// vqlcore.js
(function(){function r(a,c,d){if(a===c)return 0!==a||1/a==1/c;if(null==a||null==c)return a===c;a._chain&&(a=a._wrapped);c._chain&&(c=c._wrapped);if(a.isEqual&&b.isFunction(a.isEqual))return a.isEqual(c);if(c.isEqual&&b.isFunction(c.isEqual))return c.isEqual(a);var e=l.call(a);if(e!=l.call(c))return!1;switch(e){case"[object String]":return a==""+c;case"[object Number]":return a!=+a?c!=+c:0==a?1/a==1/c:a==+c;case"[object Date]":case"[object Boolean]":return+a==+c;case"[object RegExp]":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if("object"!=typeof a||"object"!=typeof c)return!1;for(var f=d.length;f--;)if(d[f]==a)return!0;d.push(a);var f=0,g=!0;if("[object Array]"==e){if(f=a.length,g=f==c.length)for(;f--&&(g=f in a==f in c&&r(a[f],c[f],d)););}else{if("constructor"in a!="constructor"in c||a.constructor!=c.constructor)return!1;for(var h in a)if(b.has(a,h)&&(f++,!(g=b.has(c,h)&&r(a[h],c[h],d))))break;if(g){for(h in c)if(b.has(c,h)&&!f--)break;g=!f}}d.pop();return g}var s=this,I=s._,o={},k=Array.prototype,p=Object.prototype,i=k.slice,J=k.unshift,l=p.toString,K=p.hasOwnProperty,y=k.forEach,z=k.map,A=k.reduce,B=k.reduceRight,C=k.filter,D=k.every,E=k.some,q=k.indexOf,F=k.lastIndexOf,p=Array.isArray,L=Object.keys,t=Function.prototype.bind,b=function(a){return new m(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports._=b):s._=b;b.VERSION="1.3.3";var j=b.each=b.forEach=function(a,c,d){if(a!=null)if(y&&a.forEach===y)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(e in a&&c.call(d,a[e],e,a)===o)break}else for(e in a)if(b.has(a,e)&&c.call(d,a[e],e,a)===o)break};b.map=b.collect=function(a,c,b){var e=[];if(a==null)return e;if(z&&a.map===z)return a.map(c,b);j(a,function(a,g,h){e[e.length]=c.call(b,a,g,h)});if(a.length===+a.length)e.length=a.length;return e};b.reduce=b.foldl=b.inject=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(A&&a.reduce===A){e&&(c=b.bind(c,e));return f?a.reduce(c,d):a.reduce(c)}j(a,function(a,b,i){if(f)d=c.call(e,d,a,b,i);else{d=a;f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(B&&a.reduceRight===B){e&&(c=b.bind(c,e));return f?a.reduceRight(c,d):a.reduceRight(c)}var g=b.toArray(a).reverse();e&&!f&&(c=b.bind(c,e));return f?b.reduce(g,c,d,e):b.reduce(g,c)};b.find=b.detect=function(a,c,b){var e;G(a,function(a,g,h){if(c.call(b,a,g,h)){e=a;return true}});return e};b.filter=b.select=function(a,c,b){var e=[];if(a==null)return e;if(C&&a.filter===C)return a.filter(c,b);j(a,function(a,g,h){c.call(b,a,g,h)&&(e[e.length]=a)});return e};b.reject=function(a,c,b){var e=[];if(a==null)return e;j(a,function(a,g,h){c.call(b,a,g,h)||(e[e.length]=a)});return e};b.every=b.all=function(a,c,b){var e=true;if(a==null)return e;if(D&&a.every===D)return a.every(c,b);j(a,function(a,g,h){if(!(e=e&&c.call(b,a,g,h)))return o});return!!e};var G=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=false;if(a==null)return e;if(E&&a.some===E)return a.some(c,d);j(a,function(a,b,h){if(e||(e=c.call(d,a,b,h)))return o});return!!e};b.include=b.contains=function(a,c){var b=false;if(a==null)return b;if(q&&a.indexOf===q)return a.indexOf(c)!=-1;return b=G(a,function(a){return a===c})};b.invoke=function(a,c){var d=i.call(arguments,2);return b.map(a,function(a){return(b.isFunction(c)?c||a:a[c]).apply(a,d)})};b.pluck=function(a,c){return b.map(a,function(a){return a[c]})};b.max=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!c&&b.isEmpty(a))return-Infinity;var e={computed:-Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b>=e.computed&&(e={value:a,computed:b})});return e.value};b.min=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;var e={computed:Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b<e.computed&&(e={value:a,computed:b})});return e.value};b.shuffle=function(a){var b=[],d;j(a,function(a,f){d=Math.floor(Math.random()*(f+1));b[f]=b[d];b[d]=a});return b};b.sortBy=function(a,c,d){var e=b.isFunction(c)?c:function(a){return a[c]};return b.pluck(b.map(a,function(a,b,c){return{value:a,criteria:e.call(d,a,b,c)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c===void 0?1:d===void 0?-1:c<d?-1:c>d?1:0}),"value")};b.groupBy=function(a,c){var d={},e=b.isFunction(c)?c:function(a){return a[c]};j(a,function(a,b){var c=e(a,b);(d[c]||(d[c]=[])).push(a)});return d};b.sortedIndex=function(a,c,d){d||(d=b.identity);for(var e=0,f=a.length;e<f;){var g=e+f>>1;d(a[g])<d(c)?e=g+1:f=g}return e};b.toArray=function(a){return!a?[]:b.isArray(a)||b.isArguments(a)?i.call(a):a.toArray&&b.isFunction(a.toArray)?a.toArray():b.values(a)};b.size=function(a){return b.isArray(a)?a.length:b.keys(a).length};b.first=b.head=b.take=function(a,b,d){return b!=null&&!d?i.call(a,0,b):a[0]};b.initial=function(a,b,d){return i.call(a,0,a.length-(b==null||d?1:b))};b.last=function(a,b,d){return b!=null&&!d?i.call(a,Math.max(a.length-b,0)):a[a.length-1]};b.rest=b.tail=function(a,b,d){return i.call(a,b==null||d?1:b)};b.compact=function(a){return b.filter(a,function(a){return!!a})};b.flatten=function(a,c){return b.reduce(a,function(a,e){if(b.isArray(e))return a.concat(c?e:b.flatten(e));a[a.length]=e;return a},[])};b.without=function(a){return b.difference(a,i.call(arguments,1))};b.uniq=b.unique=function(a,c,d){var d=d?b.map(a,d):a,e=[];a.length<3&&(c=true);b.reduce(d,function(d,g,h){if(c?b.last(d)!==g||!d.length:!b.include(d,g)){d.push(g);e.push(a[h])}return d},[]);return e};b.union=function(){return b.uniq(b.flatten(arguments,true))};b.intersection=b.intersect=function(a){var c=i.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})};b.difference=function(a){var c=b.flatten(i.call(arguments,1),true);return b.filter(a,function(a){return!b.include(c,a)})};b.zip=function(){for(var a=i.call(arguments),c=b.max(b.pluck(a,"length")),d=Array(c),e=0;e<c;e++)d[e]=b.pluck(a,""+e);return d};b.indexOf=function(a,c,d){if(a==null)return-1;var e;if(d){d=b.sortedIndex(a,c);return a[d]===c?d:-1}if(q&&a.indexOf===q)return a.indexOf(c);d=0;for(e=a.length;d<e;d++)if(d in a&&a[d]===c)return d;return-1};b.lastIndexOf=function(a,b){if(a==null)return-1;if(F&&a.lastIndexOf===F)return a.lastIndexOf(b);for(var d=a.length;d--;)if(d in a&&a[d]===b)return d;return-1};b.range=function(a,b,d){if(arguments.length<=1){b=a||0;a=0}for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);f<e;){g[f++]=a;a=a+d}return g};var H=function(){};b.bind=function(a,c){var d,e;if(a.bind===t&&t)return t.apply(a,i.call(arguments,1));if(!b.isFunction(a))throw new TypeError;e=i.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(c,e.concat(i.call(arguments)));H.prototype=a.prototype;var b=new H,g=a.apply(b,e.concat(i.call(arguments)));return Object(g)===g?g:b}};b.bindAll=function(a){var c=i.call(arguments,1);c.length==0&&(c=b.functions(a));j(c,function(c){a[c]=b.bind(a[c],a)});return a};b.memoize=function(a,c){var d={};c||(c=b.identity);return function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=a.apply(this,arguments)}};b.delay=function(a,b){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)))};b.throttle=function(a,c){var d,e,f,g,h,i,j=b.debounce(function(){h=g=false},c);return function(){d=this;e=arguments;f||(f=setTimeout(function(){f=null;h&&a.apply(d,e);j()},c));g?h=true:i=a.apply(d,e);j();g=true;return i}};b.debounce=function(a,b,d){var e;return function(){var f=this,g=arguments;d&&!e&&a.apply(f,g);clearTimeout(e);e=setTimeout(function(){e=null;d||a.apply(f,g)},b)}};b.once=function(a){var b=false,d;return function(){if(b)return d;b=true;return d=a.apply(this,arguments)}};b.wrap=function(a,b){return function(){var d=[a].concat(i.call(arguments,0));return b.apply(this,d)}};b.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};b.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}};b.keys=L||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&(c[c.length]=d);return c};b.values=function(a){return b.map(a,b.identity)};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){j(i.call(arguments,1),function(b){for(var d in b)a[d]=b[d]});return a};b.pick=function(a){var c={};j(b.flatten(i.call(arguments,1)),function(b){b in a&&(c[b]=a[b])});return c};b.defaults=function(a){j(i.call(arguments,1),function(b){for(var d in b)a[d]==null&&(a[d]=b[d])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.tap=function(a,b){b(a);return a};b.isEqual=function(a,b){return r(a,b,[])};b.isEmpty=function(a){if(a==null)return true;if(b.isArray(a)||b.isString(a))return a.length===0;for(var c in a)if(b.has(a,c))return false;return true};b.isElement=function(a){return!!(a&&a.nodeType==1)};b.isArray=p||function(a){return l.call(a)=="[object Array]"};b.isObject=function(a){return a===Object(a)};b.isArguments=function(a){return l.call(a)=="[object Arguments]"};b.isArguments(arguments)||(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});b.isFunction=function(a){return l.call(a)=="[object Function]"};b.isString=function(a){return l.call(a)=="[object String]"};b.isNumber=function(a){return l.call(a)=="[object Number]"};b.isFinite=function(a){return b.isNumber(a)&&isFinite(a)};b.isNaN=function(a){return a!==a};b.isBoolean=function(a){return a===true||a===false||l.call(a)=="[object Boolean]"};b.isDate=function(a){return l.call(a)=="[object Date]"};b.isRegExp=function(a){return l.call(a)=="[object RegExp]"};b.isNull=function(a){return a===null};b.isUndefined=function(a){return a===void 0};b.has=function(a,b){return K.call(a,b)};b.noConflict=function(){s._=I;return this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=0;e<a;e++)b.call(d,e)};b.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};b.result=function(a,c){if(a==null)return null;var d=a[c];return b.isFunction(d)?d.call(a):d};b.mixin=function(a){j(b.functions(a),function(c){M(c,b[c]=a[c])})};var N=0;b.uniqueId=function(a){var b=N++;return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var u=/.^/,n={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},v;for(v in n)n[n[v]]=v;var O=/\\|'|\r|\n|\t|\u2028|\u2029/g,P=/\\(\\|'|r|n|t|u2028|u2029)/g,w=function(a){return a.replace(P,function(a,b){return n[b]})};b.template=function(a,c,d){d=b.defaults(d||{},b.templateSettings);a="__p+='"+a.replace(O,function(a){return"\\"+n[a]}).replace(d.escape||u,function(a,b){return"'+\n_.escape("+w(b)+")+\n'"}).replace(d.interpolate||u,function(a,b){return"'+\n("+w(b)+")+\n'"}).replace(d.evaluate||u,function(a,b){return"';\n"+w(b)+"\n;__p+='"})+"';\n";d.variable||(a="with(obj||{}){\n"+a+"}\n");var a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n",e=new Function(d.variable||"obj","_",a);if(c)return e(c,b);c=function(a){return e.call(this,a,b)};c.source="function("+(d.variable||"obj")+"){\n"+a+"}";return c};b.chain=function(a){return b(a).chain()};var m=function(a){this._wrapped=a};b.prototype=m.prototype;var x=function(a,c){return c?b(a).chain():a},M=function(a,c){m.prototype[a]=function(){var a=i.call(arguments);J.call(a,this._wrapped);return x(c.apply(b,a),this._chain)}};b.mixin(b);j("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=k[a];m.prototype[a]=function(){var d=this._wrapped;b.apply(d,arguments);var e=d.length;(a=="shift"||a=="splice")&&e===0&&delete d[0];return x(d,this._chain)}});j(["concat","join","slice"],function(a){var b=k[a];m.prototype[a]=function(){return x(b.apply(this._wrapped,arguments),this._chain)}});m.prototype.chain=function(){this._chain=true;return this};m.prototype.value=function(){return this._wrapped}}).call(this);(function(){Type.registerNamespace('tab');tab.EscapingUtil=function(){}
tab.EscapingUtil.escapeHtml=function(html){var $0=(html||'');$0=$0.replace(new RegExp('&','g'),'&amp;');$0=$0.replace(new RegExp('<','g'),'&lt;');$0=$0.replace(new RegExp('>','g'),'&gt;');$0=$0.replace(new RegExp('"','g'),'&quot;');$0=$0.replace(new RegExp("'",'g'),'&#39;');$0=$0.replace(new RegExp('/','g'),'&#47;');return $0;}
tab.WindowHelper=function(window){this.$C=window;}
tab.WindowHelper.get_windowSelf=function(){return window.self;}
tab.WindowHelper.close=function(window){window.close();}
tab.WindowHelper.getOpener=function(window){return window.opener;}
tab.WindowHelper.getLocation=function(window){return window.location;}
tab.WindowHelper.getPathAndSearch=function(window){return window.location.pathname+window.location.search;}
tab.WindowHelper.setLocationHref=function(window,href){window.location.href=href;}
tab.WindowHelper.locationReplace=function(window,url){window.location.replace(url);}
tab.WindowHelper.open=function(href,target,options){return window.open(href,target,options);}
tab.WindowHelper.reload=function(w,foreGet){w.location.reload(foreGet);}
tab.WindowHelper.requestAnimationFrame=function(action){return tab.WindowHelper.$A(action);}
tab.WindowHelper.cancelAnimationFrame=function(animationId){if(ss.isValue(animationId)){tab.WindowHelper.$B(animationId);}}
tab.WindowHelper.$D=function(){var $0=0;tab.WindowHelper.$A=function($p1_0){var $1_0=new Date().getTime();var $1_1=Math.max(0,16-($1_0-$0));$0=$1_0+$1_1;var $1_2=window.setTimeout(function(){$p1_0();},$1_1);return $1_2;};}
tab.WindowHelper.prototype={$C:null,get_pageXOffset:function(){return tab.WindowHelper.$4(this.$C);},get_pageYOffset:function(){return tab.WindowHelper.$5(this.$C);},get_clientWidth:function(){return tab.WindowHelper.$2(this.$C);},get_clientHeight:function(){return tab.WindowHelper.$3(this.$C);},get_innerWidth:function(){return tab.WindowHelper.$0(this.$C);},get_outerWidth:function(){return tab.WindowHelper.$8(this.$C);},get_innerHeight:function(){return tab.WindowHelper.$1(this.$C);},get_outerHeight:function(){return tab.WindowHelper.$9(this.$C);},get_screenLeft:function(){return tab.WindowHelper.$6(this.$C);},get_screenTop:function(){return tab.WindowHelper.$7(this.$C);}}
tab.EscapingUtil.registerClass('tab.EscapingUtil');tab.WindowHelper.registerClass('tab.WindowHelper');tab.WindowHelper.$0=null;tab.WindowHelper.$1=null;tab.WindowHelper.$2=null;tab.WindowHelper.$3=null;tab.WindowHelper.$4=null;tab.WindowHelper.$5=null;tab.WindowHelper.$6=null;tab.WindowHelper.$7=null;tab.WindowHelper.$8=null;tab.WindowHelper.$9=null;tab.WindowHelper.$A=null;tab.WindowHelper.$B=null;(function(){if(('innerWidth'in window)){tab.WindowHelper.$0=function($p1_0){return $p1_0.innerWidth;};}else{tab.WindowHelper.$0=function($p1_0){return $p1_0.document.documentElement.offsetWidth;};}if(('outerWidth'in window)){tab.WindowHelper.$8=function($p1_0){return $p1_0.outerWidth;};}else{tab.WindowHelper.$8=tab.WindowHelper.$0;}if(('innerHeight'in window)){tab.WindowHelper.$1=function($p1_0){return $p1_0.innerHeight;};}else{tab.WindowHelper.$1=function($p1_0){return $p1_0.document.documentElement.offsetHeight;};}if(('outerHeight'in window)){tab.WindowHelper.$9=function($p1_0){return $p1_0.outerHeight;};}else{tab.WindowHelper.$9=tab.WindowHelper.$1;}if(('clientWidth'in window)){tab.WindowHelper.$2=function($p1_0){return $p1_0.clientWidth;};}else{tab.WindowHelper.$2=function($p1_0){return $p1_0.document.documentElement.clientWidth;};}if(('clientHeight'in window)){tab.WindowHelper.$3=function($p1_0){return $p1_0.clientHeight;};}else{tab.WindowHelper.$3=function($p1_0){return $p1_0.document.documentElement.clientHeight;};}if(ss.isValue(window.self.pageXOffset)){tab.WindowHelper.$4=function($p1_0){return $p1_0.pageXOffset;};}else{tab.WindowHelper.$4=function($p1_0){return $p1_0.document.documentElement.scrollLeft;};}if(ss.isValue(window.self.pageYOffset)){tab.WindowHelper.$5=function($p1_0){return $p1_0.pageYOffset;};}else{tab.WindowHelper.$5=function($p1_0){return $p1_0.document.documentElement.scrollTop;};}if(('screenLeft'in window)){tab.WindowHelper.$6=function($p1_0){return $p1_0.screenLeft;};}else{tab.WindowHelper.$6=function($p1_0){return $p1_0.screenX;};}if(('screenTop'in window)){tab.WindowHelper.$7=function($p1_0){return $p1_0.screenTop;};}else{tab.WindowHelper.$7=function($p1_0){return $p1_0.screenY;};}var $0='requestAnimationFrame';var $1='cancelAnimationFrame';var $2=['ms','moz','webkit','o'];var $3=null;var $4=null;if(($0 in window)){$3=$0;}if(($1 in window)){$4=$1;}for(var $5=0;$5<$2.length&&($3==null||$4==null);++$5){var $6=$2[$5];var $7=$6+'RequestAnimationFrame';if($3==null&&($7 in window)){$3=$7;}if($4==null){$7=$6+'CancelAnimationFrame';if(($7 in window)){$4=$7;}$7=$6+'CancelRequestAnimationFrame';if(($7 in window)){$4=$7;}}}if($3!=null){tab.WindowHelper.$A=function($p1_0){return window[$3]($p1_0);};}else{tab.WindowHelper.$D();}if($4!=null){tab.WindowHelper.$B=function($p1_0){window[$4]($p1_0);};}else{tab.WindowHelper.$B=function($p1_0){window.clearTimeout($p1_0);};}})();
Type.registerNamespace('tableau.types');tableau.types.FloatingToolbarVisibility=function(){};tableau.types.FloatingToolbarVisibility.prototype = {auto:'auto',show:'show',hide:'hide'}
tableau.types.FloatingToolbarVisibility.registerEnum('tableau.types.FloatingToolbarVisibility',false);tableau.types.PointerToolMode=function(){};tableau.types.PointerToolMode.prototype = {silent:'silent',singleSelect:'singleSelect',rectSelect:'rectSelect',lassoSelect:'lassoSelect',radialSelect:'radialSelect',zoom:'zoom',pan:'pan'}
tableau.types.PointerToolMode.registerEnum('tableau.types.PointerToolMode',false);tableau.types.SelectAction=function(){};tableau.types.SelectAction.prototype = {simple:'simple',toggle:'toggle',range:'range',menu:'menu'}
tableau.types.SelectAction.registerEnum('tableau.types.SelectAction',false);Type.registerNamespace('tab');tab.ILogAppender=function(){};tab.ILogAppender.registerInterface('tab.ILogAppender');tab.LoggerLevel=function(){};tab.LoggerLevel.prototype = {all:0,debug:1,info:2,warn:3,error:4,off:5}
tab.LoggerLevel.registerEnum('tab.LoggerLevel',false);tab.$create_Circle=function(center,radius){var $o={};$o.center=center;$o.radius=radius;return $o;}
tab.FeatureParam=function(){};tab.FeatureParam.prototype = {unknown:0,transparentBackground:3,newFilter:4,fieldTypeConversion:5,quickFilterFormatting:6,responsiveUi:7,clientErrorReporting:8,newToolbar:9,buttonDelay:11,hoverDelay:12,lassoSelection:13,radialSelection:14,analyticsPane:15,newSelectionTools:16,newBrowserToolbar:17,maxTooltipWhitespace:18,mapsUseLeafletForGeoSearch:19,calcDialogFuncList:20,selectionToolsMobile:23,formattedFlipboardNavigator:24,collapseSidePane:25,mapsSearchOnTheLeftHandSide:26,newCaptionToolbar:27,mapsSearchDebugAlwaysShow:28,aoPaneUI:29,categoricalHeadersVisualFeedback:30,analyticsObjectsDragToViz:31}
tab.FeatureParam.registerEnum('tab.FeatureParam',false);tab.$create_DataValueStruct=function(type,value){var $o={};$o.t=type;$o.v=value;return $o;}
tab.$create_Delta=function(x,y,s){var $o={};$o.x=x;$o.y=y;$o.scale=s;$o.w=0;$o.h=0;return $o;}
tab.$create_DojoCoords=function(){return {};}
tab.DateTimeAutoFormatMode=function(){};tab.DateTimeAutoFormatMode.prototype = {showDateOnly:0,showTimeOnly:1,showFullDateTime:2}
tab.DateTimeAutoFormatMode.registerEnum('tab.DateTimeAutoFormatMode',false);Type.registerNamespace('tableau');tab.$create_FormattingInfo=function(){return {};}
tab.$create_LocaleFormattingStrings=function(){return {};}
tab.PathnameKey=function(){};tab.PathnameKey.prototype = {workbookName:2,sheetId:3,authoringSheet:4}
tab.PathnameKey.registerEnum('tab.PathnameKey',false);tab.$create_Point=function(x,y){var $o={};$o.x=x;$o.y=y;return $o;}
tab.$create_PointF=function(x,y){var $o={};$o.x=x;$o.y=y;return $o;}
tab.$create_Rect=function(l,t,w,h){var $o={};$o.l=l;$o.t=t;$o.w=w;$o.h=h;return $o;}
tab.$create_RectXY=function(x,y,w,h){var $o={};$o.x=x;$o.y=y;$o.w=w;$o.h=h;return $o;}
tab.$create_DoubleRectXY=function(x,y,w,h){var $o={};$o.x=x;$o.y=y;$o.w=w;$o.h=h;return $o;}
tab.$create_BBoxRectF=function(minX,minY,maxX,maxY){var $o={};$o.minX=minX;$o.minY=minY;$o.maxX=maxX;$o.maxY=maxY;return $o;}
tab.$create_RegionRect=function(l,t,w,h,region){var $o={};$o.x=l;$o.y=t;$o.w=w;$o.h=h;$o.r=region;return $o;}
tab.$create_Size=function(w,h){var $o={};$o.w=w;$o.h=h;return $o;}
tab.$create_SizeF=function(w,h){var $o={};$o.w=w;$o.h=h;return $o;}
tab.TransformationType=function(){};tab.TransformationType.prototype = {none:0,pixelToDomain:1,domainToPixel:2,worldOffset:3}
tab.TransformationType.registerEnum('tab.TransformationType',false);tab.$create_TupleStruct=function(display,selected,dataValues){var $o={};$o.d=display;$o.s=selected;$o.t=dataValues;return $o;}
tableau.types.ColumnClass=function(){};tableau.types.ColumnClass.prototype = {CLASS_METADATA:0,CLASS_DATABASE:1,CLASS_NUMERICBIN:2,CLASS_CATEGORICALBIN:3,CLASS_INSTANCE:4,CLASS_MDXCALC:5,CLASS_USERCALC:6,CLASS_DANGLING:7,CLASS_LOCALDATA:8}
tableau.types.ColumnClass.registerEnum('tableau.types.ColumnClass',false);tableau.types.DrillState=function(){};tableau.types.DrillState.prototype = {DRILLNONE:0,DRILLDOWN:1,DRILLUP:2,DRILLBOTH:3}
tableau.types.DrillState.registerEnum('tableau.types.DrillState',false);tableau.types.DataSpecial=function(){}
tableau.types.DataType=function(){}
tableau.types.TableauTypesFieldRole=function(){}
tab.BaseLogAppender=function(){this.$0=[];}
tab.BaseLogAppender.prototype={$0:null,clearFilters:function(){this.$0.clear();},addFilter:function(f){this.$0.add(f);},removeFilter:function(f){this.$0.remove(f);},log:function(source,level,message,args){},formatMessage:function(message,args){if(ss.isNullOrUndefined(args)||!args.length){return message;}var $0=new ss.StringBuilder();var $1=0;var $2=false;for(var $3=0;$3<message.length;$3++){var $4=message.charAt($3);if($4==='%'){if($2){$0.append('%');$2=false;}else{$2=true;}}else{if($2){switch($4){case 'b':case 's':case 'd':case 'n':case 'o':$0.append((args.length>$1)?args[$1]:'');$1++;break;}}else{$0.append($4);}$2=false;}}return $0.toString();}}
tab.ConsoleLogAppender=function(){tab.ConsoleLogAppender.initializeBase(this);}
tab.ConsoleLogAppender.enableLogging=function(filter){if(ss.isNullOrUndefined(tab.ConsoleLogAppender.$1)){tab.ConsoleLogAppender.$1=new tab.ConsoleLogAppender();tab.Logger.addAppender(tab.ConsoleLogAppender.$1);}tab.ConsoleLogAppender.$1.addFilter((filter||function(){
return true;}));}
tab.ConsoleLogAppender.disableLogging=function(){if(ss.isNullOrUndefined(tab.ConsoleLogAppender.$1)){return;}tab.Logger.removeAppender(tab.ConsoleLogAppender.$1);tab.ConsoleLogAppender.$1=null;}
tab.ConsoleLogAppender.prototype={$2:null,logInternal:function(source,level,message,args){if(!(typeof console === 'object')){return;}message=source.get_name()+': '+message;var $0=[];if(tab.BrowserSupport.get_consoleLogFormating()){$0=$0.concat(message).concat(args);}else{$0=$0.concat(this.formatMessage(message,args));}try{Function.prototype.apply.call(this.$3(level), console, $0);}catch($1){}},$3:function($p0){if(ss.isNullOrUndefined(this.$2)){this.$2={};this.$2[(1).toString()]=console.log;this.$2[(4).toString()]=console.error;this.$2[(2).toString()]=console.info;this.$2[(3).toString()]=console.warn;}return this.$2[$p0.toString()]||console.log;}}
tab.ErrorTrace=function(){}
tab.ErrorTrace.install=function(){var $0=tsConfig.clientErrorReportingLevel;if(!String.isNullOrEmpty($0)){if($0==='debug'){tab.ErrorTrace.$5=true;}}tab.ErrorTrace.$C('setTimeout');tab.ErrorTrace.$C('setInterval');tab.ErrorTrace.installGlobalHandler();}
tab.ErrorTrace.wrap=function(func){var $0=_.wrap(func,function($p1_0){
try{return $p1_0.apply(this, Array.toArray(arguments));}catch($1_0){tab.ErrorTrace.report($1_0,true);throw $1_0;}});return $0;}
tab.ErrorTrace.$C=function($p0){var $0=window[$p0];var $1=function(){
var $1_0=Array.toArray(arguments).clone();var $1_1=$1_0[0];if(Type.getInstanceType($1_1)===Function){$1_0[0]=tab.ErrorTrace.wrap($1_1);}if(('apply' in $0)){return $0.apply(this, $1_0);}else{return $0($1_0[0], $1_0[1]);}};window[$p0]=$1;}
tab.ErrorTrace.windowOnError=function(message,url,lineNo){var $0=null;if(ss.isValue(tab.ErrorTrace.$6)){tab.ErrorTrace.$D(tab.ErrorTrace.$6,url,lineNo,message);$0=tab.ErrorTrace.$6;tab.ErrorTrace.$6=null;tab.ErrorTrace.$7=null;}else{var $1=new tab.StackLocation(url,lineNo);$1.functionName=tab.ErrorTrace.$11($1);$1.context=tab.ErrorTrace.$12($1);$0=new tab.StackTrace('onError',message);$0.name='window.onError';$0.locations=[$1];}tab.ErrorTrace.$9.push($0);if(ss.isValue(tab.ErrorTrace.$B)){tab.ErrorTrace.$B.apply(this, Array.toArray(arguments));}return false;}
tab.ErrorTrace.$D=function($p0,$p1,$p2,$p3){var $0=new tab.StackLocation($p1,$p2);if(ss.isValue($0.url)&&ss.isValue($0.lineNo)){$p0.isIncomplete=false;if(ss.isNullOrUndefined($0.functionName)){$0.functionName=tab.ErrorTrace.$11($0);}if(ss.isNullOrUndefined($0.context)){$0.context=tab.ErrorTrace.$12($0);}var $1=$p3.match(new RegExp(" '([^']+)' "));if(ss.isValue($1)&&$1.length>1){$0.columnNo=tab.ErrorTrace.$10($1[1],$0);}if(ss.isValue($p0.locations)&&$p0.locations.length>0){var $2=$p0.locations[0];if($2.url===$0.url){if($2.lineNo===$0.lineNo){return false;}else if(ss.isNullOrUndefined($2.lineNo)&&$2.functionName===$0.functionName){$2.lineNo=$0.lineNo;$2.context=$0.context;return false;}}}$p0.locations.unshift($0);$p0.isPartial=true;return true;}else{$p0.isIncomplete=true;}return false;}
tab.ErrorTrace.$E=function($p0){if(!tab.ErrorTrace.$2){return '';}try{var $0=new XMLHttpRequest();$0.open('GET',$p0,false);$0.send('');return $0.responseText;}catch($1){return '';}}
tab.ErrorTrace.$F=function($p0){if(ss.isNullOrUndefined($p0)){return [];}if(!Object.keyExists(tab.ErrorTrace.$8,$p0)){var $0='';if(($p0).indexOf(document.domain)>-1){$0=tab.ErrorTrace.$E($p0);}tab.ErrorTrace.$8[$p0]=(String.isNullOrEmpty($0))?[]:$0.split('\n');}return tab.ErrorTrace.$8[$p0];}
tab.ErrorTrace.$10=function($p0,$p1){var $0=tab.ErrorTrace.$F($p1.url);var $1=new RegExp('\\b'+tab.ErrorTrace.$13($p0)+'\\b');if(ss.isValue($0)&&$0.length>$p1.lineNo){var $2=$1.exec($0[$p1.lineNo]);if(ss.isValue($2)){return $2.index;}}return -1;}
tab.ErrorTrace.$11=function($p0){var $0=new RegExp('function ([^(]*)\\(([^)]*)\\)');var $1=new RegExp("['\"]?([0-9A-Za-z$_]+)['\"]?\\s*[:=]\\s*(function|eval|new Function)");var $2='';var $3=10;var $4=tab.ErrorTrace.$F($p0.url);var $5;if(!$4.length){return '?';}for(var $6=0;$6<$3;$6++){$2=$4[$p0.lineNo-1]+$2;if(!String.isNullOrEmpty($2)){$5=$1.exec($2);if(ss.isValue($5)&&$5.length>0){return $5[1];}$5=$0.exec($2);if(ss.isValue($5)&&$5.length>0){return $5[1];}}}return '?';}
tab.ErrorTrace.$12=function($p0){var $0=tab.ErrorTrace.$F($p0.url);if(ss.isNullOrUndefined($0)||!$0.length){return null;}var $1=[];var $2=Math.floor(tab.ErrorTrace.$4/2);var $3=$2+(tab.ErrorTrace.$4%2);var $4=Math.max(0,$p0.lineNo-$2-1);var $5=Math.min($0.length,$p0.lineNo+$3-1);$p0.lineNo-=1;for(var $6=$4;$6<$5;$6++){if(!String.isNullOrEmpty($0[$6])){$1.push($0[$6]);}}return $1;}
tab.ErrorTrace.$13=function($p0){return $p0.replace(new RegExp('[\\-\\[\\]{}()*+?.,\\\\\\^$|#]','g'),'\\\\$&');}
tab.ErrorTrace.$14=function($p0){return tab.ErrorTrace.$13($p0).replaceAll('<','(?:<|&lt;)').replaceAll('>','(?:>|&gt;)').replaceAll('&','(?:&|&amp;)').replaceAll('"','(?:"|&quot;)').replace(new RegExp('\\\\s+','g'),'\\\\s+');}
tab.ErrorTrace.$15=function($p0,$p1){var $0=null;var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $1=$enum1.current;$0=tab.ErrorTrace.$F($1);if(ss.isValue($0)&&$0.length>0){for(var $2=0;$2<$0.length;$2++){var $3=$p0.exec($0[$2]);if(ss.isValue($3)&&$3.length>0){var $4=new tab.StackLocation($1,$2);$4.columnNo=$3.index;return $4;}}}}return null;}
tab.ErrorTrace.$16=function($p0,$p1){if(ss.isNullOrUndefined($p1)){$p1=0;}var $0=new tab.StackTrace('stack',$p0.message);$0.name=$p0.name;if(tab.ErrorTrace.$5){var $1=[];$1.push(tab.ErrorTrace.$19);$1.push(tab.ErrorTrace.computeStackTraceByWalkingCallerChain);var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;var $3=null;try{$3=$2($p0);}catch($4){if(tab.ErrorTrace.$1){throw $4;}}if(ss.isValue($3)){return $3;}}}else{return $0;}$0.traceMode='failed';return $0;}
tab.ErrorTrace.$17=function($p0){if(ss.isNullOrUndefined($p0)){$p0=0;}else{$p0+=1;}try{throw new Error('');}catch($0){return tab.ErrorTrace.$16($0,$p0+1);}}
tab.ErrorTrace.computeStackTraceByWalkingCallerChain=function($p0){var $0=new RegExp('function\\s+([_$a-zA-Z\u00a0-\\uFFFF][_$a-zA-Z0-9\u00a0-\\uFFFF]*)?\\s*\\(','i');var $1=[];var $2={};var $3=false;var $4=null;for($4=tab.ErrorTrace.computeStackTraceByWalkingCallerChain.caller;ss.isValue($4)&&!$3;$4=$4.caller){if($4===tab.ErrorTrace){continue;}var $6=new tab.StackLocation(null,0);if(ss.isValue($4.name)){$6.functionName=$4.name;}else{var $8=$0.exec($4.toString());if(ss.isValue($8)&&$8.length>1){$6.functionName=$8[1];}}var $7=tab.ErrorTrace.$18($4);if(ss.isValue($7)){$6.url=$7.url;$6.lineNo=$7.lineNo;if($6.functionName==='?'){$6.functionName=tab.ErrorTrace.$11($6);}var $9=new RegExp(" '([^']+)' ").exec(($p0.message||$p0.description));if(ss.isValue($9)&&$9.length>1){$6.columnNo=tab.ErrorTrace.$10($9[1],$7);}}if(Object.keyExists($2,$4.toString())){$3=true;}else{$2[$4.toString()]=true;}$1.push($6);}var $5=new tab.StackTrace('callers',$p0.message);$5.name=$p0.name;$5.locations=$1;tab.ErrorTrace.$D($5,($p0.sourceURL||$p0.fileName),($p0.line||$p0.lineNumber),($p0.message||$p0.description));return $5;}
tab.ErrorTrace.$18=function($p0){var $0=[window.location.href];var $1=document.getElementsByTagName('script');var $2=$p0.toString();var $3=new RegExp('');var $4=null;var $5=null;for(var $8=0;$8<$1.length;$8++){var $9=$1[$8];if($9.hasAttribute('src')&&ss.isValue($9.getAttribute('src'))){$0.push($9.getAttribute('src'));}}var $6=$3.exec($2);if(ss.isValue($6)&&$6.length>0){$4=new RegExp(tab.ErrorTrace.$13($2).replace(new RegExp('\\s+','g'),'\\\\s+'));}else{var $A=($6.length>1)?'\\\\s+'+$6[1]:'';var $B=$6[2].split(',').join('\\\\s*,\\\\s*');$5=tab.ErrorTrace.$13($6[3]).replace(new RegExp(';$'),';?');$4=new RegExp('function'+$A+'\\\\s*\\\\(\\\\s*'+$B+'\\\\s*\\\\)\\\\s*{\\\\s*'+$5+'\\\\s*}');}var $7=tab.ErrorTrace.$15($4,$0);if(ss.isValue($7)){return $7;}return null;}
tab.ErrorTrace.$19=function($p0){if(!('stack' in $p0)){return null;}var $0=new RegExp('^\\s*at (?:((?:\\[object object\\])?\\S+(?: \\[as \\S+\\])?) )?\\(?((?:file|http|https):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$','i');var $1=new RegExp('^\\s*(\\S*)(?:\\((.*?)\\))?@((?:file|http|https).*?):(\\d+)(?::(\\d+))?\\s*$','i');var $2=(tab.BrowserSupport.get_isFF())?$1:$0;var $3=($p0.stack).split('\n');var $4=[];var $5=null;var $6=new RegExp('^(.*) is undefined').exec($p0.message);var $enum1=ss.IEnumerator.getEnumerator($3);while($enum1.moveNext()){var $8=$enum1.current;var $9=$2.exec($8);if(ss.isValue($9)&&$9.length>5){$5=new tab.StackLocation($9[3],parseInt($9[4]));if(ss.isValue($9[1])){$5.functionName=$9[1];}if(ss.isValue($9[4])){$5.columnNo=parseInt($9[4]);}if(ss.isValue($5.lineNo)){if(ss.isNullOrUndefined($5.functionName)){$5.functionName=tab.ErrorTrace.$11($5);}$5.context=tab.ErrorTrace.$12($5);}$4.push($5);}}if($4.length>0&&ss.isValue($4[0].lineNo)&&ss.isNullOrUndefined($4[0].columnNo)&&ss.isValue($6)&&$6.length>1){$4[0].columnNo=tab.ErrorTrace.$10($6[1],$4[0]);}if(!$4.length){return null;}var $7=new tab.StackTrace('stack',$p0.message);$7.name=$p0.name;$7.locations=$4;return $7;}
tab.ErrorTrace.hasTraces=function(){return tab.ErrorTrace.$9.length>0;}
tab.ErrorTrace.dequeueTraces=function(){var $0=tab.ErrorTrace.$9;tab.ErrorTrace.$9=[];return $0;}
tab.ErrorTrace.installGlobalHandler=function(){if(tab.ErrorTrace.$A||!tab.ErrorTrace.$3){return;}tab.ErrorTrace.$B=window.onerror;window.onerror=tab.ErrorTrace.windowOnError;tab.ErrorTrace.$A=true;}
tab.ErrorTrace.report=function(e,rethrow){if(ss.isNullOrUndefined(rethrow)){rethrow=true;}if(ss.isValue(tab.ErrorTrace.$6)){if(tab.ErrorTrace.$7===e){return;}else{var $1=tab.ErrorTrace.$6;tab.ErrorTrace.$6=null;tab.ErrorTrace.$7=null;tab.ErrorTrace.$9.push($1);}}var $0=tab.ErrorTrace.$16(e);tab.ErrorTrace.$6=$0;tab.ErrorTrace.$7=e;window.setTimeout(function(){
if(tab.ErrorTrace.$7===e){tab.ErrorTrace.$6=null;tab.ErrorTrace.$7=null;tab.ErrorTrace.$9.push($0);}},(($0.isIncomplete)?2000:0));if(rethrow){throw e;}}
tab.StackLocation=function(url,lineNo){this.functionName='?';this.url=url;this.lineNo=lineNo;}
tab.StackLocation.prototype={url:null,lineNo:0,columnNo:0,context:null}
tab.StackTrace=function(traceMode,message){this.userAgent=window.navigator.userAgent;this.traceMode='onError';this.traceMode=traceMode;this.message=message;this.url=document.URL;this.locations=[];}
tab.StackTrace.prototype={message:null,url:null,locations:null,isIncomplete:false,isPartial:false,name:null}
tab.StackTraceAppender=function(){tab.StackTraceAppender.initializeBase(this);}
tab.StackTraceAppender.enableLogging=function(filter){if(ss.isNullOrUndefined(tab.StackTraceAppender.$1)){tab.StackTraceAppender.$1=new tab.StackTraceAppender();tab.Logger.addAppender(tab.StackTraceAppender.$1);}tab.StackTraceAppender.$1.addFilter((filter||function(){
return true;}));}
tab.StackTraceAppender.disableLogging=function(){if(ss.isValue(tab.StackTraceAppender.$1)){tab.Logger.removeAppender(tab.StackTraceAppender.$1);tab.StackTraceAppender.$1=null;}}
tab.StackTraceAppender.prototype={logInternal:function(source,level,message,args){message=this.formatMessage(message.replaceAll('\\n','<br />'),args);if(level>2){try{throw new Error('Logged('+tab.Logger.loggerLevelNames[level]+', from '+source.get_name()+'): '+message);}catch($0){tab.ErrorTrace.report($0,false);}}}}
tab.Logger=function(name){tab.Logger.initializeBase(this);this.$1_1=name;}
tab.Logger.get_globalLog=function(){return tab.Logger.global;}
tab.Logger.get_$1_2=function(){return tab.MiscUtil.lazyInitStaticField(tab.Logger,'appenders',function(){
return [];});}
tab.Logger.get_$1_3=function(){return tab.MiscUtil.lazyInitStaticField(tab.Logger,'filters',function(){
return [];});}
tab.Logger.get_$1_4=function(){return tab.MiscUtil.lazyInitStaticField(tab.Logger,'nullLog',function(){
return new tab.Logger('');});}
tab.Logger.clearFilters=function(){var $enum1=ss.IEnumerator.getEnumerator(tab.Logger.get_$1_2());while($enum1.moveNext()){var $0=$enum1.current;$0.clearFilters();}tab.Logger.get_$1_3().clear();}
tab.Logger.filterByLogger=function(validLogger,minLogLevel){minLogLevel=(minLogLevel||0);tab.Logger.$1_6(function($p1_0,$p1_1){
return $p1_0===validLogger&&$p1_1>=minLogLevel;});}
tab.Logger.filterByType=function(t,minLogLevel){minLogLevel=(minLogLevel||0);tab.Logger.$1_6(function($p1_0,$p1_1){
return $p1_1>=minLogLevel&&$p1_0.get_name()===t.get_name();});}
tab.Logger.filterByName=function(namePattern,minLogLevel){minLogLevel=(minLogLevel||0);var $0=new RegExp(namePattern,'i');tab.Logger.$1_6(function($p1_0,$p1_1){
return $p1_1>=minLogLevel&&ss.isValue($p1_0.get_name().match($0));});}
tab.Logger.clearAppenders=function(){tab.Logger.get_$1_2().clear();}
tab.Logger.addAppender=function(appender){var $enum1=ss.IEnumerator.getEnumerator(tab.Logger.get_$1_3());while($enum1.moveNext()){var $0=$enum1.current;appender.addFilter($0);}tab.Logger.get_$1_2().add(appender);}
tab.Logger.removeAppender=function(appender){tab.Logger.get_$1_2().remove(appender);}
tab.Logger.lazyGetLogger=function(t){return tab.MiscUtil.lazyInitStaticField(t,'_logger',function(){
return tab.Logger.getLogger(t);});}
tab.Logger.getLogger=function(t,ll){var $0=tab.Logger.getLoggerWithName(t.get_name());if(ss.isValue(ll)){}return $0;}
tab.Logger.getLoggerWithName=function(name){return tab.Logger.get_$1_4();}
tab.Logger.$1_5=function(){var $0=tab.MiscUtil.getUriQueryParameters(window.self.location.search);if(!Object.keyExists($0,':log')){return;}var $1=$0[':log'];if(!$1.length){}var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;var $3=$2.split(':');var $4=1;if($3.length>0&&ss.isValue($3[1])){var $5=$3[1].toLowerCase();var $6=tab.Logger.loggerLevelNames.indexOf($5);if($6>=0){$4=$6;}}}}
tab.Logger.$1_6=function($p0){tab.Logger.get_$1_3().add($p0);var $enum1=ss.IEnumerator.getEnumerator(tab.Logger.get_$1_2());while($enum1.moveNext()){var $0=$enum1.current;$0.addFilter($p0);}}
tab.Logger.prototype={$1_1:null,get_name:function(){return this.$1_1;},debug:function(message){},info:function(message){},warn:function(message){},error:function(message){},log:function(level,message){},$1_7:function($p0,$p1,$p2){try{var $enum1=ss.IEnumerator.getEnumerator(tab.Logger.get_$1_2());while($enum1.moveNext()){var $0=$enum1.current;$0.log(this,$p0,$p1,$p2);}}catch($1){}}}
tab.Log=function(){}
tab.Log.get=function(o){return tab.Logger.lazyGetLogger(Type.getInstanceType(o));}
tab.MetricsLogger=function(){this.$9=[];this.$B=[];this.$D=null;this.$C=null;}
tab.MetricsLogger.get_instance=function(){if(!ss.isValue(tab.MetricsLogger.$8)){tab.MetricsLogger.$8=new tab.MetricsLogger();}return tab.MetricsLogger.$8;}
tab.MetricsLogger.$12=function($p0,$p1){var $0=($p1)?', ':',';var $1=new ss.StringBuilder();$1.append(($p1)?tab.MetricsLogger.$7[$p0.eventType]:$p0.eventType);var $2=Object.getKeyCount($p0.parameters);if($2>0){$1.append('=');$1.append('{');var $3=0;var $4=($p1)?': ':':';var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0.parameters));while($enum1.moveNext()){var $5=$enum1.current;if($5==='id'&&$p0.eventType!=='init'){continue;}$1.append(($p1)?tab.MetricsLogger.$6[$5]:$5);$1.append($4);var $6=$p0.parameters[$5];tab.MetricsLogger.$14($1,$6,$p1);if(++$3<$2){$1.append($0);}}$1.append('}');}return $1.toString();}
tab.MetricsLogger.$13=function($p0,$p1,$p2){var $0=($p2)?', ':',';var $1=($p2)?': ':':';var $2=Object.getKeyCount($p1);var $3=0;var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p1));while($enum1.moveNext()){var $4=$enum1.current;if($p1.hasOwnProperty($4)){var $5=$p1[$4];$p0.append($4);$p0.append($1);tab.MetricsLogger.$14($p0,$5,$p2);if(++$3<$2){$p0.append($0);}}}}
tab.MetricsLogger.$14=function($p0,$p1,$p2){var $0=typeof($p1);if($0==='number'&&Math.floor($p1)!==$p1){$p0.append(($p1).toFixed(1));}else if($0==='string'){if($p2){$p0.append('"');$p0.append($p1);$p0.append('"');}else{$p0.append(encodeURIComponent(($p1)));}}else if($.isArray($p1)){$p0.append('[');$p0.append($p1);$p0.append(']');}else if($0==='object'){$p0.append('{');var $1=$p1;tab.MetricsLogger.$13($p0,$1,$p2);$p0.append('}');}else{$p0.append($p1);}}
tab.MetricsLogger.prototype={$9:null,$A:null,$B:null,$C:null,$D:null,logEvent:function(evt){if(this.$9.length>=400){this.$9.shift();}this.$9.push(evt);this.$E();},attach:function(){tabBootstrap.MetricsController.get_instance().setEventLogger(ss.Delegate.create(this,this.logEvent));},$E:function($p0){if(ss.isValue(this.$D)){return;}$p0=($p0||85);this.$D=window.setTimeout(ss.Delegate.create(this,this.$F),$p0);},$F:function(){this.$D=null;var $0;if(this.$9.length>20){$0=this.$9.slice(0,20);this.$9=this.$9.slice(20);this.$E(5);}else{$0=this.$9;this.$9=[];}this.$10($0);if(tsConfig.metricsReportingEnabled){try{this.$11($0);}catch($1){}}},$10:function($p0){this.$A=(this.$A||tab.Logger.lazyGetLogger(tab.MetricsLogger));var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;}},$11:function($p0){var $0=1500;var $1=$p0.length;var $2='';if(!$1){return;}for(var $3=0;$3<$1;$3++){var $4=$p0[$3];if($4.eventType==='wps'){continue;}var $5=tab.MetricsLogger.$12($4,false);if($2.length>0&&$2.length+$5.length>$0){this.$15(tsConfig.metricsServerHostname,$2);$2='';}else if($2.length>0){$2+='&';}$2+=$5;}if($2.length>0){this.$15(tsConfig.metricsServerHostname,$2);}if(this.$C==null){this.$C=window.setTimeout(ss.Delegate.create(this,this.$16),250);}},$15:function($p0,$p1){var $0=1;if(tab.MiscUtil.isNullOrEmpty($p0)||tab.MiscUtil.isNullOrEmpty($p1)){return;}var $1=document.createElement('img');var $2='v='+$0.toString();var $3=$p0;$3+='?'+$2+'&'+$p1;$1.src=$3;this.$B.push($1);if(this.$B.length>100){this.$B.shift();}},$16:function(){try{this.$C=null;var $0=0;while($0<this.$B.length){if(this.$B[$0].complete){this.$B.splice($0,1);}else{$0++;}}if(this.$B.length>0){this.$C=window.setTimeout(ss.Delegate.create(this,this.$16),250);}}catch($1){}}}
tab.NavigationMetricsCollector=function(){}
tab.NavigationMetricsCollector.collectMetrics=function(){if(typeof(window) != 'undefined' && typeof(window.performance) != 'undefined' && typeof(window.performance.timing) != 'undefined'){tab.NavigationMetricsCollector.$1=window.performance.timing;if(('navigationStart' in tab.NavigationMetricsCollector.$1)){var $0=tab.NavigationMetricsCollector.$1[tab.NavigationMetricsCollector.$0[0]];var $1=[];var $enum1=ss.IEnumerator.getEnumerator(tab.NavigationMetricsCollector.$0);while($enum1.moveNext()){var $4=$enum1.current;var $5=tab.NavigationMetricsCollector.$1[$4];$5=((!$5)?0:$5-$0);$1.push($5);}var $2={};$2['v']=$1;var $3=new tabBootstrap.MetricsEvent('nav',tabBootstrap.MetricsSuites.navigation,$2);tabBootstrap.MetricsController.get_instance().logEvent($3);}}}
tab.NavigationMetricsCollector.getMetric=function(metricName){if(ss.isNullOrUndefined(tab.NavigationMetricsCollector.$1)){tab.NavigationMetricsCollector.collectMetrics();}return tab.NavigationMetricsCollector.$1[metricName];}
tab.WindowAppender=function(){tab.WindowAppender.initializeBase(this);}
tab.WindowAppender.enableLogging=function(filter){if(ss.isNullOrUndefined(tab.WindowAppender.$1)){tab.WindowAppender.$1=new tab.WindowAppender();tab.Logger.addAppender(tab.WindowAppender.$1);}tab.WindowAppender.$1.addFilter((filter||function(){
return true;}));}
tab.WindowAppender.disableLogging=function(){if(ss.isNullOrUndefined(tab.WindowAppender.$1)){return;}tab.Logger.removeAppender(tab.WindowAppender.$1);tab.WindowAppender.$1=null;}
tab.WindowAppender.prototype={$2:null,logInternal:function(source,level,message,args){if(ss.isNullOrUndefined(this.$2)){this.$3();}message=this.formatMessage(message.replaceAll('\\n','<br />'),args);this.$2.html(message);},$3:function(){this.$2=$("<div class='log-window-appender'>Debug mode ON</div>");this.$2.css({position:'absolute',bottom:'0px',right:'0px',backgroundColor:'white',opacity:'.8',border:'1px solid black',minWidth:'5px',minHeight:'5px','z-index':'100'});$('body').append(this.$2);}}
tab.BrowserSupport=function(){}
tab.BrowserSupport.get_getComputedStyle=function(){return ('getComputedStyle' in window);}
tab.BrowserSupport.get_addEventListener=function(){return ('addEventListener' in document);}
tab.BrowserSupport.get_selectStart=function(){return tab.BrowserSupport.$0;}
tab.BrowserSupport.get_touch=function(){return tab.BrowserSupport.$1;}
tab.BrowserSupport.get_dataUri=function(){return tab.BrowserSupport.$2;}
tab.BrowserSupport.get_postMessage=function(){return tab.BrowserSupport.$3;}
tab.BrowserSupport.get_historyApi=function(){return tab.BrowserSupport.$4;}
tab.BrowserSupport.get_consoleLogFormating=function(){return tab.BrowserSupport.$5;}
tab.BrowserSupport.get_isMobile=function(){return tab.BrowserSupport.$15||tab.BrowserSupport.$14;}
tab.BrowserSupport.get_isAndroid=function(){return tab.BrowserSupport.$15;}
tab.BrowserSupport.get_isChrome=function(){return tab.BrowserSupport.$D;}
tab.BrowserSupport.get_isMac=function(){return tab.BrowserSupport.$16;}
tab.BrowserSupport.get_isIE=function(){return tab.BrowserSupport.$E;}
tab.BrowserSupport.get_isFF=function(){return tab.BrowserSupport.$F;}
tab.BrowserSupport.get_isOpera=function(){return tab.BrowserSupport.$10;}
tab.BrowserSupport.get_isSafari=function(){return tab.BrowserSupport.$C;}
tab.BrowserSupport.get_browserVersion=function(){return parseFloat($.browser.version);}
tab.BrowserSupport.get_raisesEventOnImageReassignment=function(){return !tab.BrowserSupport.$C;}
tab.BrowserSupport.get_imageLoadIsSynchronous=function(){return tab.BrowserSupport.$E;}
tab.BrowserSupport.get_useAlternateHitStrategy=function(){return tab.BrowserSupport.$A;}
tab.BrowserSupport.get_pointerEvents=function(){return tab.BrowserSupport.$12||tab.BrowserSupport.get_isFF();}
tab.BrowserSupport.get_displayInlineBlock=function(){return !tab.BrowserSupport.$E||tab.BrowserSupport.get_browserVersion()>=8;}
tab.BrowserSupport.get_cssTransform=function(){return ss.isValue(tab.BrowserSupport.$6);}
tab.BrowserSupport.get_cssTransformName=function(){return tab.BrowserSupport.$6;}
tab.BrowserSupport.get_cssTransitionName=function(){return tab.BrowserSupport.$7;}
tab.BrowserSupport.get_cssTranslate2D=function(){return tab.BrowserSupport.$8;}
tab.BrowserSupport.get_cssTranslate3D=function(){return tab.BrowserSupport.$9;}
tab.BrowserSupport.get_nativeJSONSupport=function(){return (typeof JSON !== 'undefined')&&('parse' in JSON);}
tab.BrowserSupport.get_backingStoragePixelRatio=function(){return tab.BrowserSupport.$18;}
tab.BrowserSupport.get_devicePixelRatio=function(){return tab.BrowserSupport.$17;}
tab.BrowserSupport.get_canvasLinePattern=function(){return tab.BrowserSupport.$B;}
tab.BrowserSupport.get_dateInput=function(){return tab.BrowserSupport.$19;}
tab.BrowserSupport.get_dateTimeInput=function(){return tab.BrowserSupport.$1A;}
tab.BrowserSupport.get_dateTimeLocalInput=function(){return tab.BrowserSupport.$1B;}
tab.BrowserSupport.get_timeInput=function(){return tab.BrowserSupport.$1C;}
tab.BrowserSupport.get_setSelectionRange=function(){return tab.BrowserSupport.$1D;}
tab.BrowserSupport.get_mouseWheelEvent=function(){var $0;if(('onwheel' in window.document.documentElement)){$0='wheel';}else if(('onmousewheel' in window.document.documentElement)){$0='mousewheel';}else{$0='MozMousePixelScroll';}return $0;}
tab.BrowserSupport.get_mouseCapture=function(){return ('releaseCapture' in document);}
tab.BrowserSupport.get_orientationChange=function(){return window.onorientationchange !== undefined;}
tab.BrowserSupport.getOrigin=function(location){var $0=location.origin;if(ss.isNullOrUndefined($0)){$0=location.protocol+'//'+location.host;}return $0;}
tab.BrowserSupport.doPostMessage=function(message){if(!tab.BrowserSupport.get_postMessage()){return;}var $0=window.parent;try{$0.postMessage(message,'*');}catch($1){}}
tab.BrowserSupport.doPostMessageWithContext=function(message){var $0=new ss.StringBuilder(message);if(tsConfig.loadOrderID>=0){$0.append(',').append(tsConfig.loadOrderID);}if(!String.isNullOrEmpty(tsConfig.apiID)){if(tsConfig.loadOrderID<0){$0.append(',').append(tsConfig.loadOrderID);}$0.append(',').append(tsConfig.apiID);}tab.BrowserSupport.doPostMessage($0.toString());}
tab.BrowserSupport.$1E=function(){var $0=$('<img />');var $1=$0[0];$0.bind('load error',function(){
tab.BrowserSupport.$2=$1.width===1&&$1.height===1;});$1.src='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';}
tab.BrowserSupport.$1F=function(){var $0=window.document.body;if(tab.BrowserSupport.$12&&tab.BrowserSupport.get_isMobile()){var $1=$('<div></div>');$1.css({position:'absolute',top:'300px',left:'300px',width:'25px',height:'25px','z-index':'10000'});var $2=$1.get(0);try{$0.appendChild($2);tab.BrowserSupport.$A=document.elementFromPoint(310,310)!==$2;}catch($3){}finally{$1.remove();}}}
tab.BrowserSupport.$20=function(){try{if(ss.isValue(console)&&ss.isValue(console.log)){tab.BrowserSupport.$5=window.navigator.userAgent.indexOf('iPad')<0;}else{tab.BrowserSupport.$5=false;}}catch($0){tab.BrowserSupport.$5=false;}}
tab.BrowserSupport.$21=function(){var $0=window.navigator.userAgent;tab.BrowserSupport.$11=$0.indexOf('Konqueror')>=0;tab.BrowserSupport.$12=$0.indexOf('WebKit')>=0;tab.BrowserSupport.$D=$0.indexOf('Chrome')>=0;tab.BrowserSupport.$C=$0.indexOf('Safari')>=0&&!tab.BrowserSupport.$D;tab.BrowserSupport.$10=$0.indexOf('Opera')>=0;tab.BrowserSupport.$13=!tab.BrowserSupport.$11&&!tab.BrowserSupport.$12&&$0.indexOf('Gecko')>=0;tab.BrowserSupport.$F=tab.BrowserSupport.$13||$0.indexOf('Firefox')>=0||$0.indexOf('Minefield')>=0;tab.BrowserSupport.$E=$0.indexOf('MSIE')>=0||(!tab.BrowserSupport.$10&&$0.indexOf('Trident')>=0);var $1=new RegExp('iPhone|iPod|iPad');tab.BrowserSupport.$14=$1.test($0);tab.BrowserSupport.$15=$0.indexOf('Android')>=0;tab.BrowserSupport.$16=$0.indexOf('Mac')>=0;}
tab.BrowserSupport.$22=function($p0,$p1,$p2){var $0=document.createElement('div');try{document.body.insertBefore($0,null);if(!($p0 in $0.style)){return false;}$0.style[$p0]=$p2;var $1=tab.DomUtil.getComputedStyle($0);var $2=$1[$p1];return !tab.MiscUtil.isNullOrEmpty($2)&&$2!=='none';}finally{document.body.removeChild($0).style.display='none';}}
tab.BrowserSupport.$23=function(){var $0={transition:'transition',webkitTransition:'-webkit-transition',msTransition:'-ms-transition',mozTransition:'-moz-transition',oTransition:'-o-transition'};var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};if(!($1.key in document.body.style)){continue;}tab.BrowserSupport.$7=$1.value;break;}}
tab.BrowserSupport.$24=function(){var $0={transform:'transform',webkitTransform:'-webkit-transform',msTransform:'-ms-transform',mozTransform:'-moz-transform',oTransform:'-o-transform'};var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};if(!($1.key in document.body.style)){continue;}tab.BrowserSupport.$6=$1.value;tab.BrowserSupport.$8=tab.BrowserSupport.$22($1.key,$1.value,'translate(1px,1px)');tab.BrowserSupport.$9=tab.BrowserSupport.$22($1.key,$1.value,'translate3d(1px,1px,1px)');break;}}
tab.BrowserSupport.$25=function(){tab.BrowserSupport.$17=(window.self.devicePixelRatio||1);}
tab.BrowserSupport.$26=function(){var $0=document.createElement('canvas');if(ss.isNullOrUndefined($0)){tab.BrowserSupport.$18=1;return;}var $1=null;if((typeof(Type.getInstanceType($0).getContext)==='function')){$1=$0.getContext('2d');}if(ss.isNullOrUndefined($1)){tab.BrowserSupport.$18=1;return;}tab.BrowserSupport.$18=($1.webkitBackingStorePixelRatio||$1.mozBackingStorePixelRatio||$1.msBackingStorePixelRatio||$1.oBackingStorePixelRatio||1);}
tab.BrowserSupport.$27=function(){var $0=document.createElement('canvas');if(ss.isNullOrUndefined($0)){return;}var $1=null;if((typeof($0.getContext)==='function')){$1=$0.getContext('2d');}if(ss.isNullOrUndefined($1)){return;}tab.BrowserSupport.$B=(typeof($1.setLineDash)==='function')||('mozDash' in $1)||('webkitLineDash' in $1);}
tab.BrowserSupport.$28=function(){var $0=$('<input>');tab.BrowserSupport.$1D=(typeof($0.get(0).setSelectionRange)==='function');}
tab.BrowserSupport.$29=function(){tab.BrowserSupport.$19=tab.BrowserSupport.$2A('date');tab.BrowserSupport.$1A=tab.BrowserSupport.$2A('datetime');tab.BrowserSupport.$1B=tab.BrowserSupport.$2A('datetime-local');tab.BrowserSupport.$1C=tab.BrowserSupport.$2A('time');}
tab.BrowserSupport.$2A=function($p0){var $0=$("<input type='"+$p0+"'>").css({position:'absolute',visibility:'hidden'}).appendTo($(document.body));var $1=$0.get(0);var $2=$1.getAttribute('type');var $3='@inva/1d:)';$1.value=$3;var $4=($2===$p0&&$1.value!==$3);$0.remove();return $4;}
tab.CalendarOptions=function(){}
tab.CalendarOptions.prototype={startOfWeek:1,fiscalYearStart:1,minDaysInFirstWeek:1,brokenWeeks:true}
tab.CallOnDispose=function(callOnDispose){this.$0=callOnDispose;}
tab.CallOnDispose.prototype={$0:null,dispose:function(){if(ss.isNullOrUndefined(this.$0)){return;}this.$0();this.$0=null;}}
tab.CircleUtil=function(){}
tab.CircleUtil.isEmpty=function(circle){return tab.FloatUtil.isZero(circle.radius);}
tab.CircleUtil.isEqual=function(c1,c2){return tab.FloatUtil.isEqual(c1.radius,c2.radius)&&tab.CircleUtil.hasTheSameCenter(c1,c2);}
tab.CircleUtil.hasTheSameCenter=function(c1,c2){return tab.FloatUtil.isEqual(c1.center.x,c2.center.x)&&tab.FloatUtil.isEqual(c1.center.y,c2.center.y);}
tab.CircleUtil.intersectsWith=function(c1,c2){var $0=Math.pow(c1.center.x-c2.center.x,2)+Math.pow(c1.center.y-c2.center.y,2);return Math.pow(c1.radius+c2.radius,2)>$0;}
tab.CircleUtil.offsetCircle=function(c,p){var $0=tab.$create_PointF(c.center.x+p.x,c.center.y+p.y);return tab.$create_Circle($0,c.radius);}
tab.CircleUtil.clone=function(c){return tab.$create_Circle(tab.$create_PointF(c.center.x,c.center.y),c.radius);}
tab.CircleUtil.boundingBox=function(circle){var $0=Math.ceil(circle.radius);var $1=Math.floor(circle.center.x-$0);var $2=Math.ceil(circle.center.x+$0);var $3=Math.floor(circle.center.y-$0);var $4=Math.ceil(circle.center.y+$0);return tab.$create_RectXY($1,$3,$2-$1,$4-$3);}
tab.CircleUtil.containmentBox=function(circle){var $0=Math.abs(Math.round(circle.center.x)-circle.center.x);var $1=Math.abs(Math.round(circle.center.y)-circle.center.y);var $2=(Math.sqrt(2)/2*circle.radius)-Math.max($0,$1);var $3=Math.ceil(circle.center.x-$2);var $4=Math.ceil(circle.center.y-$2);var $5=Math.floor(circle.center.x+$2);var $6=Math.floor(circle.center.y+$2);return tab.$create_RectXY($3,$4,($5-$3),($6-$4));}
tab.CircleUtil.getChangedRects=function(c1,c2){if(!tab.CircleUtil.hasTheSameCenter(c1,c2)){return new Array(0);}var $0=(c1.radius>c2.radius)?tab.CircleUtil.boundingBox(c1):tab.CircleUtil.boundingBox(c2);var $1=(c1.radius>c2.radius)?tab.CircleUtil.containmentBox(c2):tab.CircleUtil.containmentBox(c1);var $2=new Array(4);var $3=($0.h-$1.h)/2;var $4=($0.w-$1.w)/2;$2[0]=tab.$create_RectXY($0.x,$0.y,$0.w,$3);$2[1]=tab.$create_RectXY($0.x,$0.y+$3+$1.h,$0.w,$3);$2[2]=tab.$create_RectXY($0.x,$0.y+$3,$4,$1.h);$2[3]=tab.$create_RectXY($0.x+$4+$1.w,$0.y+$3,$4,$1.h);return $2;}
tab.FeatureFlags=function(){}
tab.FeatureFlags.isEnabled=function(featureFlagId){return ss.isValue(tsConfig.features)&&(tsConfig.features[featureFlagId]||false);}
tab.FeatureParamsLookup=function(){}
tab.FeatureParamsLookup.getBool=function(param){return tab.FeatureParamsLookup.getBoolWithDefault(param,null);}
tab.FeatureParamsLookup.getBoolDefaultTrue=function(param){return tab.FeatureParamsLookup.getBoolWithDefault(param,true);}
tab.FeatureParamsLookup.getBoolDefaultFalse=function(param){return tab.FeatureParamsLookup.getBoolWithDefault(param,false);}
tab.FeatureParamsLookup.getBoolWithDefault=function(param,defaultValue){var $0=defaultValue;if(Object.keyExists(tab.FeatureParamsLookup.$6,param)){if(ss.isValue(tab.FeatureParamsLookup.$6[param])){$0=tab.FeatureParamsLookup.$6[param];}return $0;}return null;}
tab.FeatureParamsLookup.getFloat=function(param){if(Object.keyExists(tab.FeatureParamsLookup.$7,param)){return tab.FeatureParamsLookup.$7[param];}return null;}
tab.FeatureParamsLookup.getInt=function(param){if(Object.keyExists(tab.FeatureParamsLookup.$8,param)){return tab.FeatureParamsLookup.$8[param];}return null;}
tab.FeatureParamsLookup.getString=function(param){if(Object.keyExists(tab.FeatureParamsLookup.$9,param)){return tab.FeatureParamsLookup.$9[param];}return null;}
tab.FeatureParamsLookup.$A=function($p0,$p1,$p2){tab.FeatureParamsLookup.$1.add($p1);tab.FeatureParamsLookup.$5[$p0]=$p1;tab.FeatureParamsLookup.$6[$p1]=(ss.isValue($p2))?$p2:null;}
tab.FeatureParamsLookup.$B=function($p0,$p1){tab.FeatureParamsLookup.$2.add($p1);tab.FeatureParamsLookup.$5[$p0]=$p1;tab.FeatureParamsLookup.$7[$p1]=null;}
tab.FeatureParamsLookup.$C=function($p0,$p1){tab.FeatureParamsLookup.$3.add($p1);tab.FeatureParamsLookup.$5[$p0]=$p1;tab.FeatureParamsLookup.$8[$p1]=null;}
tab.FeatureParamsLookup.$D=function($p0,$p1){tab.FeatureParamsLookup.$4.add($p1);tab.FeatureParamsLookup.$5[$p0]=$p1;tab.FeatureParamsLookup.$9[$p1]=null;}
tab.FeatureParamsLookup.$E=function(){var $0=tab.MiscUtil.getUriQueryParameters(window.self.location.search);var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=$1.key.toLowerCase();var $3=0;if(Object.keyExists(tab.FeatureParamsLookup.$5,$2)){$3=tab.FeatureParamsLookup.$5[$2];}else{continue;}if($1.value.length>0){var $4=$1.value[0];if(tab.FeatureParamsLookup.$1.contains($3)){var $5=Boolean.parse($4);tab.FeatureParamsLookup.$6[$3]=$5;}else if(tab.FeatureParamsLookup.$2.contains($3)){var $6=parseFloat($4);tab.FeatureParamsLookup.$7[$3]=$6;}else if(tab.FeatureParamsLookup.$3.contains($3)){var $7=parseInt($4);tab.FeatureParamsLookup.$8[$3]=$7;}else if(tab.FeatureParamsLookup.$4.contains($3)){tab.FeatureParamsLookup.$9[$3]=$4;}else{continue;}}else{continue;}}}
tab.DateUtil=function(){}
tab.DateUtil.get_$1=function(){return tab.Logger.lazyGetLogger(tab.DateUtil);}
tab.DateUtil.adjustDateByPeriod=function(date,periodType,numPeriods){var $0=new Date();switch(periodType){case 'year':$0=new Date(date.getFullYear()+numPeriods,date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds());break;case 'quarter':$0=tab.DateUtil.adjustByMonths(date,numPeriods*3);break;case 'month':$0=tab.DateUtil.adjustByMonths(date,numPeriods);break;case 'week':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneWeek));break;case 'day':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneDay));break;case 'hour':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneHour));break;case 'minute':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneMinute));break;case 'second':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneSecond));break;}return $0;}
tab.DateUtil.adjustByMonths=function(date,n){var $0=date.getMonth();var $1;var $2;if(n<0){$1=parseInt((-(((12-($0-1))-1-n)/12)));}else{$1=parseInt((($0-1+n)/12));}$2=$0+(n-($1*12));return new Date(date.getFullYear()+$1,$2,date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds());}
tab.DateUtil.adjustDateByPeriodInUTC=function(date,periodType,numPeriods){var $0=new Date();switch(periodType){case 'year':$0=new Date(date.getUTCFullYear()+numPeriods,date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds());break;case 'quarter':$0=tab.DateUtil.adjustByMonthsInUTC(date,numPeriods*3);break;case 'month':$0=tab.DateUtil.adjustByMonthsInUTC(date,numPeriods);break;case 'week':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneWeek));break;case 'day':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneDay));break;case 'hour':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneHour));break;case 'minute':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneMinute));break;case 'second':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneSecond));break;}return $0;}
tab.DateUtil.adjustByMonthsInUTC=function(date,n){var $0=date.getUTCMonth(),$1,$2;if(n<0){$1=parseInt((-(((12-($0-1))-1-n)/12)));}else{$1=parseInt((($0-1+n)/12));}$2=$0+(n-($1*12));return new Date(Date.UTC(date.getUTCFullYear()+$1,$2,date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds()));}
tab.DateUtil.parsePresModelDate=function(dateValue){if(ss.isNullOrUndefined(dateValue)){return null;}var $0=new RegExp('(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)( (\\d\\d):(\\d\\d):(\\d\\d))?').exec(dateValue);if(ss.isNullOrUndefined($0)){return null;}var $1=parseInt($0[1],10);var $2=parseInt($0[2],10)-1;var $3=parseInt($0[3],10);if(String.isNullOrEmpty($0[4])){return new Date(Date.UTC($1,$2,$3));}else{var $4=parseInt($0[5],10);var $5=parseInt($0[6],10);var $6=parseInt($0[7],10);return new Date(Date.UTC($1,$2,$3,$4,$5,$6));}}
tab.DateUtil.getFakeUTCDate=function(date){return new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds());}
tab.DateUtil.dateAsYear=function(arg){return arg.getUTCFullYear();}
tab.DateUtil.dateAsQuarter=function(arg){var $0=tab.DateUtil.$3(arg);return parseInt(1+(($0-1)/3));}
tab.DateUtil.dateAsMonth=function(arg){return tab.DateUtil.$3(arg);}
tab.DateUtil.dateAsWeek=function(arg){var $0=new Date(arg.getUTCFullYear(),0,1);var $1=tab.DateUtil.$2(arg);var $2=parseInt(1+((($1+tab.DateUtil.$4($0))-2)/7));return $2;}
tab.DateUtil.dateAsDay=function(arg){return arg.getUTCDate();}
tab.DateUtil.dateAsDayOfYear=function(arg){return tab.DateUtil.$2(arg);}
tab.DateUtil.dateAsDayOfWeek=function(arg){return tab.DateUtil.$4(arg);}
tab.DateUtil.dateAsMonthYear=function(arg){var $0=(tab.DateUtil.$3(arg)*10000)+arg.getUTCFullYear();return $0;}
tab.DateUtil.dateAsMonthDayYear=function(arg){var $0=((tab.DateUtil.$3(arg)*1000000)+(arg.getUTCDate()*10000))+arg.getUTCFullYear();return $0;}
tab.DateUtil.dateTimeAsHour=function(arg){return arg.getUTCHours();}
tab.DateUtil.dateTimeAsMinute=function(arg){return arg.getUTCMinutes();}
tab.DateUtil.dateTimeAsSecond=function(arg){return arg.getUTCSeconds();}
tab.DateUtil.dateTimeAsOleDate=function(arg){return tableau.types.OleDateFromJsDate(arg.getTime());}
tab.DateUtil.$2=function($p0){var $0=$p0.getUTCFullYear();var $1=$p0.getUTCMonth();var $2=$p0.getUTCDate();var $3=new Date($0,0,1,12,0,0);var $4=new Date($0,$1,$2,12,0,0);var $5=Math.round(($4-$3)/tab.DateUtil.$0);return $5+1;}
tab.DateUtil.$3=function($p0){return $p0.getUTCMonth()+1;}
tab.DateUtil.$4=function($p0){return $p0.getUTCDay()+1;}
tab.DateUtil.daysSinceEpoch=function(date){return Math.floor(date.getTime()/tab.DateUtil.$0);}
tab.DateUtil.sameDay=function(date1,date2){return tab.DateUtil.daysSinceEpoch(date1)===tab.DateUtil.daysSinceEpoch(date2);}
tab.DisposableHolder=function(){this.$0=[];}
tab.DisposableHolder.prototype={add:function(d){this.$0.add(d);},dispose:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$0);while($enum1.moveNext()){var $0=$enum1.current;$0.dispose();}this.$0.clear();}}
tab.DomUtil=function(){}
tab.DomUtil.get_$0=function(){return tab.Logger.lazyGetLogger(tab.DomUtil);}
tab.DomUtil.getComputedStyle=function(e){if(tab.BrowserSupport.get_getComputedStyle()){var $0=window.getComputedStyle(e);if(ss.isValue($0)){return $0;}}return e.style;}
tab.DomUtil.getComputedZIndex=function(child){tab.Param.verifyValue(child,'child');var $0=$(child);var $1=$0;var $2=$('body');while(!!$0.length&&$0[0]!==$2[0]){var $3=$0.css('position');if($3==='absolute'||$3==='fixed'){$1=$0;}$0=$0.offsetParent();}return tab.DomUtil.$3($1);}
tab.DomUtil.resize=function(e,rect){if((typeof(e.resize)==='function')){e.resize(rect);}else{tab.DomUtil.setMarginBox((e.domNode||e),rect);}}
tab.DomUtil.getContentBox=function(e){var $0=$(e);return tab.$create_Rect((parseInt($0.css('padding-left'),10)||0),(parseInt($0.css('padding-top'),10)||0),$0.width(),$0.height());}
tab.DomUtil.setContentBox=function(e,r){$(e).width(r.w).height(r.h);}
tab.DomUtil.setMarginBox=function(e,r){tab.DomUtil.setMarginBoxJQ($(e),r);}
tab.DomUtil.setMarginBoxJQ=function(o,r){tab.DomUtil.setMarginSizeJQ(o,tab.RecordCast.rectAsSize(r));if(!isNaN(r.t)){o.css('top',r.t+'px');}if(!isNaN(r.l)){o.css('left',r.l+'px');}}
tab.DomUtil.setMarginSizeJQ=function(o,s){if(s.w>=0){tab.DomUtil.$1(o,s.w);}if(s.h>=0){tab.DomUtil.$2(o,s.h);}}
tab.DomUtil.getMarginBox=function(e){return tab.DomUtil.getMarginBoxJQ($(e));}
tab.DomUtil.getMarginBoxJQ=function(o){var $0=o.position();return tab.$create_Rect($0.left,$0.top,o.outerWidth(true),o.outerHeight(true));}
tab.DomUtil.getDojoCoordsJQ=function(o){var $0=tab.$create_DojoCoords();$0.l=o.position().left;$0.t=o.position().top;$0.x=o.offset().left;$0.y=o.offset().top;$0.w=o.outerWidth(true);$0.h=o.outerHeight(true);return $0;}
tab.DomUtil.isAncestorOf=function(ancestor,child){if(ss.isNullOrUndefined(ancestor)||ss.isNullOrUndefined(child)){return false;}return $(child).parents().index(ancestor)>=0;}
tab.DomUtil.isEqualOrAncestorOf=function(ancestor,child){if(ss.isNullOrUndefined(ancestor)||ss.isNullOrUndefined(child)){return false;}return (ancestor===child||tab.DomUtil.isAncestorOf(ancestor,child));}
tab.DomUtil.setElementPosition=function(e,pageX,pageY,duration,useTransform){if((!ss.isValue(useTransform)||useTransform)&&tab.BrowserSupport.get_cssTransform()){var $1={top:'0px',left:'0px'};if(tab.BrowserSupport.get_cssTranslate3D()){var $2=new ss.StringBuilder('translate3d(').append(pageX).append('px,').append(pageY).append('px,').append('0px)').toString();$1[tab.BrowserSupport.get_cssTransformName()]=$2;if(ss.isValue(duration)){$1[tab.BrowserSupport.get_cssTransitionName()+'-duration']=duration;}e.css($1);return;}if(tab.BrowserSupport.get_cssTranslate2D()){var $3=new ss.StringBuilder('translate(').append(pageX).append('px,').append(pageY).append('px)').toString();$1[tab.BrowserSupport.get_cssTransformName()]=$3;if(ss.isValue(duration)){$1[tab.BrowserSupport.get_cssTransitionName()+'-duration']=duration;}e.css($1);return;}}var $0={position:'absolute',top:pageY+'px',left:pageX+'px'};if(tab.BrowserSupport.get_cssTransform()){$0[tab.BrowserSupport.get_cssTransformName()]='';}e.css($0);}
tab.DomUtil.getElementPosition=function(e){var $0=e.offset();return tab.$create_Point($0.left,$0.top);}
tab.DomUtil.getElementClientPosition=function(e){var $0=tab.DomUtil.getElementPosition(e);$0.x-=$(document.documentElement).scrollLeft();$0.y-=$(document.documentElement).scrollTop();return $0;}
tab.DomUtil.getElementRelativePosition=function(e,p){if(ss.isNullOrUndefined(p)){p=e.parent();}var $0=e.offset();var $1=p.offset();return tab.$create_Point($0.left-$1.left,$0.top-$1.top);}
tab.DomUtil.parseWidthFromStyle=function(style){if(ss.isValue(style)&&!tab.MiscUtil.isNullOrEmpty(style.width)){return parseInt(style.width);}return Number.NaN;}
tab.DomUtil.parseHeightFromStyle=function(style){if(ss.isValue(style)&&!tab.MiscUtil.isNullOrEmpty(style.height)){return parseInt(style.height);}return Number.NaN;}
tab.DomUtil.createNamespacedEventName=function(eventName,eventNamespace){if(ss.isValue(eventNamespace)){return eventName+eventNamespace;}return eventName;}
tab.DomUtil.stopPropagationOfInputEvents=function(o,eventNamespace){var $0=function($p1_0){
$p1_0.stopPropagation();};tab.DomUtil.handleInputEvents(o,eventNamespace,$0);}
tab.DomUtil.handleInputEvents=function(o,eventNamespace,handler){o.bind(tab.DomUtil.createNamespacedEventName('touchstart',eventNamespace),handler).bind(tab.DomUtil.createNamespacedEventName('touchcancel',eventNamespace),handler).bind(tab.DomUtil.createNamespacedEventName('touchend',eventNamespace),handler).bind(tab.DomUtil.createNamespacedEventName('touchmove',eventNamespace),handler).bind(tab.DomUtil.createNamespacedEventName('click',eventNamespace),handler).bind(tab.DomUtil.createNamespacedEventName('mousedown',eventNamespace),handler).bind(tab.DomUtil.createNamespacedEventName('mousemove',eventNamespace),handler).bind(tab.DomUtil.createNamespacedEventName('mouseup',eventNamespace),handler);}
tab.DomUtil.isMouseOnlyWidget=function(domElement){var $0=$(domElement).closest("[dojoattachevent], '.tabAuthTransparencyControlContainer'");if($0.length>0){return true;}return false;}
tab.DomUtil.isFocusableTextElement=function(domElement){if(ss.isValue(domElement)&&ss.isValue(domElement.tagName)){var $0=domElement.tagName.toLowerCase();if(($0==='textarea')||($0==='input')||($0==='select')){return true;}}return false;}
tab.DomUtil.isCheckboxElement=function(domElement){if(ss.isValue(domElement)&&ss.isValue(domElement.tagName)){var $0=domElement.tagName.toLowerCase();var $1=$(domElement).attr('type');if($0==='input'&&$1==='checkbox'){return true;}}return false;}
tab.DomUtil.handleTouchEvents=function(domElement){if(tab.DomUtil.isMouseOnlyWidget(domElement)){return false;}if(tab.DomUtil.isCheckboxElement(domElement)){return false;}if(tab.DomUtil.isFocusableTextElement(domElement)){return false;}return true;}
tab.DomUtil.setCapture=function(e,retargetToElement){if(!tab.BrowserSupport.get_mouseCapture()){return;}e.setCapture(retargetToElement);}
tab.DomUtil.releaseCapture=function(){if(!tab.BrowserSupport.get_mouseCapture()){return;}document.releaseCapture();}
tab.DomUtil.$1=function($p0,$p1){var $0=(parseInt($p0.css('margin-left'),10)||0);var $1=(parseInt($p0.css('border-left-width'),10)||0);var $2=(parseInt($p0.css('padding-left'),10)||0);var $3=(parseInt($p0.css('padding-right'),10)||0);var $4=(parseInt($p0.css('border-right-width'),10)||0);var $5=(parseInt($p0.css('margin-right'),10)||0);var $6=Math.max($p1-$0-$1-$2-$3-$4-$5,0);$p0.width($6);}
tab.DomUtil.$2=function($p0,$p1){var $0=(parseInt($p0.css('margin-top'),10)||0);var $1=(parseInt($p0.css('border-top-width'),10)||0);var $2=(parseInt($p0.css('padding-top'),10)||0);var $3=(parseInt($p0.css('padding-bottom'),10)||0);var $4=(parseInt($p0.css('border-bottom-width'),10)||0);var $5=(parseInt($p0.css('margin-bottom'),10)||0);var $6=Math.max($p1-$0-$1-$2-$3-$4-$5,0);$p0.height($6);}
tab.DomUtil.$3=function($p0){tab.Param.verifyValue($p0,'o');var $0=$p0.css('z-index');if(_.isNumber($0)){return $0;}if(_.isString($0)){if(!String.isNullOrEmpty($0)&&$0!=='auto'&&$0!=='inherits'){return parseInt($0,10);}}return 0;}
tab.DomUtil.makeHtmlSafeId=function(value){return encodeURIComponent(value).replaceAll('.','dot');}
tab.DomUtil.setSelectionRangeOnInput=function(inputElement,selectionStart,selectionEnd){if(tab.BrowserSupport.get_setSelectionRange()){try{inputElement.setSelectionRange(selectionStart, selectionEnd);}catch($0){}}}
tab.DomUtil.selectAllInputText=function(inputElement){try{if(tab.BrowserSupport.get_setSelectionRange()){inputElement.get(0).setSelectionRange(0, inputElement.val().length);}else{inputElement.select();}}catch($0){}}
tab.FloatUtil=function(){}
tab.FloatUtil.isEqual=function(f1,f2){var $0=tab.FloatUtil.isZero(f1);if($0){return tab.FloatUtil.isZero(f2);}if(tab.FloatUtil.isZero(f2)){return false;}var $1=f2/f1;return tab.FloatUtil.$2<$1&&$1<tab.FloatUtil.$1;}
tab.FloatUtil.isZero=function(f){return !(f>0||f<0);}
tab.FloatUtil.isLessThan=function(f1,f2){return f1<f2&&!tab.FloatUtil.isEqual(f1,f2);}
tab.FloatUtil.isLessThanOrEqual=function(f1,f2){return f1<f2||tab.FloatUtil.isEqual(f1,f2);}
tab.FloatUtil.isGreaterThan=function(f1,f2){return f1>f2||!tab.FloatUtil.isEqual(f1,f2);}
tab.FloatUtil.isGreaterThanOrEqual=function(f1,f2){return f1>f2||tab.FloatUtil.isEqual(f1,f2);}
tableau.format=function(){}
tableau.format.get_$17=function(){return tab.Logger.lazyGetLogger(tableau.format);}
tableau.format.get_isO8601DateFormat=function(){return tableau.format.$B;}
tableau.format.get_isO8601DateTimeFormat=function(){return tableau.format.$C;}
tableau.format.get_isO8601TimeFormat=function(){return tableau.format.$D;}
tableau.format.formatDataValue=function(dv,role,format,precision,showFullDateTimes){var $0=dv.s;if(ss.isNullOrUndefined($0)||$0==null){var $1=(('t' in dv))?dv.t:'';var $2=dv.v;switch($1){case 's':return $2;case 'b':return $2.toString();case 'i':if(typeof($2)!=='number'){$2=parseInt($2,10);}return (role==='d')?tableau.format.$2D($2).toString():tableau.format.$39($2,format);case 'r':if(typeof($2)!=='number'){$2=parseFloat($2);}return tableau.format.$37($2,$1,format,precision,role);case 't':return (_.isDate($2))?tableau.format.formatJsDateTime($2,format,showFullDateTimes,$1):tableau.format.$28($2,format,showFullDateTimes,$1);case 'd':return (_.isDate($2))?tableau.format.formatJsDateTime($2,format,0,$1):tableau.format.$28($2,format,0,$1);}throw Error.createError('Invalid Tableau Format Type',null);}if($0==='n'){return 'null';}if($0==='m'){return tab.Strings.SpecialMissing;}return '#special:'+$0+'#';}
tableau.format.parseQuantitativeDataValue=function(input,dataType,format,showFullDateTimes,oldValue){switch(dataType){case 'i':return parseInt(tableau.format.reformatNumberToJsFormat(input,format),10);case 'r':return parseFloat(tableau.format.reformatNumberToJsFormat(input,format));case 'd':case 't':var $0=tableau.format.formatToJSCompliantFormat(input,format,showFullDateTimes,oldValue);return tableau.types.OleDateFromJsDate(Date.parseDate($0+' GMT').getTime());}return (ss.isValue(oldValue))?oldValue.v:0;}
tableau.format.reformatNumberToJsFormat=function(numberString,format){var $0=format[8].replace(tableau.format.$E,'\\$1');if($0.indexOf('\u00a0')!==-1){$0+=' ';}var $1=format[7].replace(tableau.format.$E,'\\$1');return numberString.replace(new RegExp('['+$0+']','g'),'').replace(new RegExp('['+$1+']','g'),'.');}
tableau.format.formatToJSCompliantFormat=function(dateTimeString,format,showFullDateTimes,previousValue){var $0=tableau.format.normalizeDateTimeFormat(format,showFullDateTimes,previousValue.t);var $1=tableau.format.tokenizeDateTime(dateTimeString,$0,showFullDateTimes);if(ss.isValue($1)){return tableau.format.$18($1,previousValue);}else{return '';}}
tableau.format.normalizeDateTimeFormat=function(format,showFullDateTimes,dataValueType){var $0=format.format;var $1=format.timeFormat;if($0.charAt(0)==='*'){$0=$0.substr(1);}if(!!showFullDateTimes&&ss.isValue($1)&&(ss.isNullOrUndefined(format.originalFormat)||0===format.originalFormat.length||format.originalFormat==='S')&&(dataValueType==='t')){if($1.charAt(0)==='*'){$1=$1.substr(1);}$0=$0+' '+$1;}$0=$0.replace(new RegExp('ampm','g'),'tt');$0=$0.replaceAll('H','h');$0=$0.replace(tableau.format.$14,function($p1_0){
return $p1_0.replace(new RegExp('m','gi'),'m');});$0=$0.replace(tableau.format.$15,function($p1_0){
return $p1_0.replace(new RegExp('m','gi'),'n');});return $0;}
tableau.format.tokenizeDateTime=function(dateTime,normalizedDateTimeFormat,showFullDateTimes){var $0=normalizedDateTimeFormat;$0=$0.replace(tableau.format.$E,'\\$1');$0=$0.replace(tableau.format.tt,'($1)');$0=$0.replace(tableau.format.$11,'($1)');var $1=normalizedDateTimeFormat.match(new RegExp($0));var $2=normalizedDateTimeFormat;$2=$2.replace(tableau.format.$E,'\\$1');if(showFullDateTimes===1){$2=$2.replace(tableau.format.$F,'(?:$1 )?$2');}else{$2=$2.replace(tableau.format.$F,'$1(?: $2)?');}$2=$2.replace(tableau.format.$10,'(?:$1)?');$2=$2.replace(tableau.format.$11,'(\\d+)');$2=$2.replace(tableau.format.tt,'([^0-9\\s]+)?');$2=$2.replace(tableau.format.$12,function($p1_0){
return $p1_0.replace(new RegExp('\\s+','g'),'\\s+');});$2=$2.replace(tableau.format.$13,'\\s*');var $3=dateTime.match(new RegExp($2));if(ss.isNullOrUndefined($3)){return null;}var $4={};for(var $5=1;$5<$3.length;++$5){if(ss.isValue($3[$5])&&$3[$5].length>0){$4[$1[$5].substr(0,1).toLowerCase()]=$3[$5];}}return $4;}
tableau.format.$18=function($p0,$p1){if(!Object.keyExists($p0,'y')&&!Object.keyExists($p0,'m')&&!Object.keyExists($p0,'d')){var $2=(('v' in $p1))?new Date(tableau.types.JsDateFromOleDate($p1.v)):new Date(tableau.types.javaScriptOLEEpoch());$p0['y']=$2.getUTCFullYear().toString();$p0['m']=($2.getUTCMonth()+1).toString();$p0['d']=$2.getUTCDate().toString();}var $0=$p0['y'].replace(new RegExp('^(\\d{2})$'),function($p1_0){
var $1_0=parseInt($p1_0,10);return ($1_0<30)?('20'+$p1_0):('19'+$p1_0);});var $1=$p0['m']+'/'+$p0['d']+'/'+$0;if(Object.keyExists($p0,'h')&&Object.keyExists($p0,'n')){$1+=' '+$p0['h']+':'+$p0['n']+':';$1+=(Object.keyExists($p0,'s'))?$p0['s']:'00';if(Object.keyExists($p0,'t')){if(ss.isValue($p0['t'].match(tableau.format.am))){$1+=' am';}else if(ss.isValue($p0['t'].match(tableau.format.pm))){$1+=' pm';}}}return $1;}
tableau.format.adjustFyFormat=function(d,fiscalYearStart){var $0=d.getUTCFullYear();var $1=d.getUTCMonth()+1;var $2=d.getUTCDate();if($1<fiscalYearStart){$1+=13-fiscalYearStart;}else{$1-=fiscalYearStart-1;++$0;}if($2>28&&$1===2){if(!!($0%4)||(!!($0%400)&&!($0%100))){$2=28;}else{$2=29;}}else if($2>30&&($1===4||$1===6||$1===9||$1===11)){$2=30;}return new Date(Date.UTC($0,$1-1,$2,0,0,0));}
tableau.format.formatCustomJSDateTime=function(d,format,showFullDateTimes,dataValueType,locale,originalFormat,timeFormat,localeFormattingStrings,calOpts){var $0=0,$1=0,$2;if(ss.isNullOrUndefined(calOpts)){calOpts=new tab.CalendarOptions();}var $3=ss.isValue(timeFormat);var $4=(ss.isNullOrUndefined(originalFormat)||0===originalFormat.length||originalFormat==='S');var $5=(dataValueType==='t');if(!!showFullDateTimes&&$3&&$4&&$5){if(timeFormat.charAt(0)==='*'){timeFormat=timeFormat.substr(1);}if(showFullDateTimes===2){format=format+' '+timeFormat;}else{format=timeFormat;}}if(format==='L'){format='*dddd, mmmm dd, yyyy';}if(format.charAt(0)==='*'){format=format.substr(1);}$2=format.length;var $6,$7;if(calOpts.fiscalYearStart>1){$6=$7=tableau.format.dtGetFiscalYear(d,calOpts.fiscalYearStart);}else{$6=d.getUTCFullYear();$7=(calOpts.brokenWeeks)?$6:tableau.format.$22(d,calOpts.startOfWeek,calOpts.minDaysInFirstWeek);}var $8=$7.toString();var $9=$8.substr($8.length-2);var $A=$6.toString();var $B=$A.substr($A.length-2);var $C=[];$C.add(new tab.StringTuple('ampm',tableau.format.$1D(d)));$C.add(new tab.StringTuple('tt',tableau.format.$1D(d)));$C.add(new tab.StringTuple('yyyy',$A));$C.add(new tab.StringTuple('yy',$B));$C.add(new tab.StringTuple('mmmm',tableau.format.$26(d,localeFormattingStrings)));$C.add(new tab.StringTuple('mmm',tableau.format.$27(d,localeFormattingStrings)));$C.add(new tab.StringTuple('dddd',tableau.format.$24(d,localeFormattingStrings)));$C.add(new tab.StringTuple('ddd',tableau.format.$25(d,localeFormattingStrings)));$C.add(new tab.StringTuple('mm',tableau.format.$1B(d.getUTCMonth()+1,2)));$C.add(new tab.StringTuple('m',(d.getUTCMonth()+1).toString()));$C.add(new tab.StringTuple('dd',tableau.format.$1B(d.getUTCDate(),2)));$C.add(new tab.StringTuple('d',d.getUTCDate().toString()));$C.add(new tab.StringTuple('hh',tableau.format.$1B(tableau.format.$1F(d),2)));$C.add(new tab.StringTuple('h',tableau.format.$1F(d).toString()));$C.add(new tab.StringTuple('nn',tableau.format.$1B(d.getUTCMinutes(),2)));$C.add(new tab.StringTuple('n',d.getUTCMinutes().toString()));$C.add(new tab.StringTuple('ss',tableau.format.$1B(d.getUTCSeconds(),2)));$C.add(new tab.StringTuple('s',d.getUTCSeconds().toString()));$C.add(new tab.StringTuple('ww',tableau.format.$23(d,calOpts).toString()));$C.add(new tab.StringTuple('y',tableau.format.$20(d).toString()));$C.add(new tab.StringTuple('w',(d.getUTCDay()+1).toString()));$C.add(new tab.StringTuple('q',tableau.format.dtGetFiscalQuarter(d,calOpts.fiscalYearStart).toString()));var $D=[];var $E=null;var $F=false;var $10=false;var $11=-1;var $12=false;var $13=false;var $14=false;while($0<$2){var $15=false;var $16=false;var $enum1=ss.IEnumerator.getEnumerator($C);while($enum1.moveNext()){var $17=$enum1.current;var $18=$17.get_first();var $19=$17.get_second();if($18===format.substr($0,$18.length).toLowerCase()){$15=true;$D.add($19);$0+=$18.length;if(ss.isValue($E)&&$18==='mm'){$D[$D.length-1]=tableau.format.$1B(d.getUTCMinutes(),2);}if(ss.isValue($E)&&$18==='m'){$D[$D.length-1]=d.getUTCMinutes().toString();}if($18.charAt(0)==='d'){$E=null;}if($18.charAt(0)==='h'){$E=$18;$1=$D.length-1;}if(ss.isValue($E)&&($18==='ampm'||$18==='tt')){$D[$1]=($E==='hh')?tableau.format.$1B(tableau.format.$1E(d),2):tableau.format.$1E(d).toString();}switch($18.charAt(0)){case 'y':if($18.length>1){$16=true;$11=$D.length-1;$12=$18.length===4;$14=true;if($F){if(!calOpts.brokenWeeks){$D[$11]=($12)?$8:$9;$14=false;}$F=false;}}break;case 'w':if($18.length!==2){break;}var $1A=$F;$F=true;if(!$1A&&!$10&&$14){if(!calOpts.brokenWeeks){$D[$11]=($12)?$8:$9;$14=false;}$F=false;}$10=false;break;case 'm':case 'd':case 'q':if(($18==='mm'||$18==='m')&&ss.isValue($E)){break;}$F=false;$10=true;break;}break;}}if($15){$13=$16;continue;}if(format.charAt($0)==='\\'){$D.add(format.substr($0+1,1));$0+=2;}else if(format.charAt($0)==='"'){var $1B=format.charAt($0);var $1C=++$0;while($0<$2&&format.charAt($0)!==$1B){$0+=1;}if($1C<$2&&$0>$1C){$D.add(format.substr($1C,$0-$1C));}if($0<$2){$0+=1;}}else if(format.charAt($0)==='['){var $1D=++$0;while($1D<format.length&&format.charAt($1D)!==']'){$1D++;}var $1E=format.substring($0,$1D);if(($1E==='y'||$1E==='Y')&&$13){$D[$11]=($1E==='y')?(($12)?$A:$B):(($12)?$8:$9);$14=false;}$0=$1D+1;}else{$D.add(format.charAt($0).toString());$0+=1;}$13=$16;}format=$D.join('');return format;}
tableau.format.mapIcuToOleFormat=function(icuFormat){return tableau.format.$19(tableau.format.$16,icuFormat);}
tableau.format.$19=function($p0,$p1){if($p0==null||String.isNullOrEmpty($p1)){return $p1;}var $0=new ss.StringBuilder();var $1=0;var $2=0;var $3=null;while(++$2<=$p1.length){var $4=$p0[$p1.substring($1,$2)];if(ss.isValue($4)){$3=$4;}else{if($3!=null){$0.append($3);--$2;}else{$0.append($p1.substring($1,$1+1));}$1=$2;$3=null;}}if($3!=null){$0.append($3);}return $0.toString();}
tableau.format.escapeHTML=function(html){return tab.EscapingUtil.escapeHtml(html);}
tableau.format.formatSchemaDisplayName=function(schema){var $0='';var $enum1=ss.IEnumerator.getEnumerator(schema);while($enum1.moveNext()){var $1=$enum1.current;if(!!$0.length){$0+=',';}$0+=tableau.format.formatColumnDisplayName($1,false);}return $0;}
tableau.format.formatColumnDisplayName=function(column,suppressDSName){var $0=column.caption;var $1;if(!ss.isUndefined($0)){$1=$0;}else{var $2=column.name;$1=(suppressDSName)?$2.extract(1).join('.'):tableau.format.formatQualifiedName($2);}return tab.EscapingUtil.escapeHtml($1);}
tableau.format.formatTupleDisplayName=function(tuple,noEscape,role){if(ss.isNullOrUndefined(tuple)){return ' ';}var $0=tuple.d;var $1=(ss.isValue($0))?$0:tableau.format.formatTupleUniqueName(tuple,role);var $2=(noEscape)?$1:tableau.format.escapeHTML($1);return ($2||' ');}
tableau.format.formatTupleUniqueName=function(tuple,role){var $0='';if(ss.isValue(tuple)){var $1=tuple.t;if(ss.isValue($1)){var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;if(!!$0.length){$0+=',';}$0+=tableau.format.formatDataValue($2,role);}}}return $0;}
tableau.format.formatTupleDisplayFacet=function(tuple,noEscape,role){var $0=tableau.format.formatTupleFacet(tuple,role);return (noEscape)?$0:tableau.format.escapeHTML($0);}
tableau.format.formatTupleFacet=function(tuple,role){var $0='';if(ss.isValue(tuple)){var $1=tuple.f;if(ss.isValue($1)){var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;if(!!$0.length){$0+=',';}$0+=tableau.format.formatDataValue($2,role);}}}return $0;}
tableau.format.formatAliasedDataValue=function(adv,role,precision,showFullDateTimes){if(ss.isValue(adv[1])){return adv[1];}return tableau.format.formatDataValue(adv[0],role,null,precision,showFullDateTimes);}
tableau.format.formatQualifiedName=function(qname){var $0='';var $enum1=ss.IEnumerator.getEnumerator(qname);while($enum1.moveNext()){var $1=$enum1.current;if(!!$0.length){$0+='.';}$0+='['+$1.replace(new RegExp('\\]','g'),']]')+']';}return $0;}
tableau.format.formatIntAuto=function(v,doSeparators,separatorStr,groupingSpecStr){var $0=tableau.format.$2A(v,doSeparators,separatorStr,groupingSpecStr);return (tableau.format.$29(v)>=0)?$0:'-'+$0;}
tableau.format.isDateTimeWithNonMidnightTime=function(dv){return (ss.isValue(dv)&&(!('s' in dv)||dv.s==null))&&dv.t==='t'&&!tableau.format.$1C(new Date(tableau.types.JsDateFromOleDate(dv.v)));}
tableau.format.applyDecimalPlaces=function(v,places,decimalStr){if(places>=0){var $0=v-tableau.format.$29(v);var $1=tableau.format.$34($0,places);var $2=parseInt($1,10);if(Math.abs($2)===1){return $2;}if(!places){return '';}$1=$1.replace(new RegExp('^-?0\\.'),decimalStr);return $1;}return '';}
tableau.format.formatString=function(value,vizColumn){var $0=vizColumn.aiy;var $1=vizColumn.us;var $2=vizColumn.aj4;var $3=$1;var $4='';var $5=value;switch($0){case 'cstring':$4='s';break;case 'date':$4='d';$5=tab.DateUtil.parsePresModelDate(value);$3=tableau.format.$3A($1);break;case 'datetime':$4='t';$5=tab.DateUtil.parsePresModelDate(value);$3=tableau.format.$3A($1);break;case 'integer':$4='i';$5=parseInt(value);break;case 'real':$4='r';$5=parseFloat(value);break;case 'tuple':$4='s';$5=tableau.format.$3B(value);break;case 'unknown':default:$4=null;break;}var $6={};$6.t=$4;$6.v=$5;var $7;switch($2){case 'dimension':$7='d';break;case 'measure':$7='m';break;case 'unknown':default:$7=null;break;}return tableau.format.formatDataValue($6,$7,$3,null,0);}
tableau.format.formatSpecial=function(specialValue,specialOverride){if(ss.isValue(specialOverride)){return specialOverride;}switch(specialValue){case '%many-values%':return tab.Strings.SpecialManyValues;case '%null%':return '';case '%error%':return tab.Strings.SpecialError;case '%ragged%':return tab.Strings.SpecialRagged;case '%skipped%':return tab.Strings.SpecialSkipped;case '%missing%':return '';case '%all%':return tab.Strings.SpecialAll;case '%no-access%':return tab.Strings.SpecialNoAccess;case '%wildcard%':return tab.Strings.SpecialWildcard;default:return '#Special';}}
tableau.format.isSpecialValue=function(value){return (value==='%many-values%'||value==='%null%'||value==='%error%'||value==='%ragged%'||value==='%skipped%'||value==='%missing%'||value==='%all%'||value==='%no-access%'||value==='%wildcard%');}
tableau.format.stripFormattedText=function(formattedText){if(ss.isNullOrUndefined(formattedText)){return null;}return $(formattedText).find('run').text();}
tableau.format.deriveNumberEditingFormat=function(format){if(ss.isNullOrUndefined(format)){return null;}return ['',format[1],format[2],'','','','',format[7],format[8],format[9]];}
tableau.format.$1A=function($p0){var $0={en:true,fr:true,de:true};if(ss.isNullOrUndefined($p0)||String.isNullOrEmpty($p0)){return 'en';}var $1=($p0).substr(0,2);if(String.isNullOrEmpty($1)||!Object.keyExists($0,$1)){return 'en';}return $1;}
tableau.format.$1B=function($p0,$p1){var $0=$p0.toString();while($0.length<$p1){$0='0'+$0;}return $0;}
tableau.format.$1C=function($p0){return ss.isValue($p0)&&((!$p0.getUTCHours()&&!$p0.getUTCMinutes()&&!$p0.getUTCSeconds())||($p0.getUTCHours()===23&&$p0.getUTCMinutes()===59&&$p0.getUTCSeconds()===59));}
tableau.format.$1D=function($p0){return ($p0.getUTCHours()<12)?'AM':'PM';}
tableau.format.$1E=function($p0){var $0=$p0.getUTCHours();if($0<12){if(!$0){$0=12;}}else if($0>12){$0-=12;}return $0;}
tableau.format.$1F=function($p0){return $p0.getUTCHours();}
tableau.format.$20=function($p0){var $0=new Date($p0.getUTCFullYear(),0,1,12);var $1=new Date($p0.getUTCFullYear(),$p0.getUTCMonth(),$p0.getUTCDate(),12);return Math.round(($1-$0)/86400000)+1;}
tableau.format.$21=function($p0,$p1){return $p0.getUTCFullYear()+(($p0.getUTCMonth()+1<$p1)?-1:0);}
tableau.format.$22=function($p0,$p1,$p2){var $0=($p0.getUTCDay()+7-($p1-1))%7;var $1=-$0+(7-$p2);var $2=new Date(Date.UTC($p0.getUTCFullYear(),$p0.getUTCMonth(),$p0.getUTCDate()+$1));return $2.getUTCFullYear();}
tableau.format.$23=function($p0,$p1){var $0;if($p1.fiscalYearStart<=1){var $4=($p1.brokenWeeks)?$p0.getUTCFullYear():tableau.format.$22($p0,$p1.startOfWeek,$p1.minDaysInFirstWeek);$0=new Date(Date.UTC($4,0,1));}else{$0=new Date(Date.UTC(tableau.format.$21($p0,$p1.fiscalYearStart),$p1.fiscalYearStart-1,1));}var $1=new Date(Date.UTC($p0.getUTCFullYear(),$p0.getUTCMonth(),$p0.getUTCDate()));var $2=($0.getUTCDay()+7-($p1.startOfWeek-1))%7;var $3=(($1-$0)/86400000)+$2;if($p1.fiscalYearStart<=1&&7-$2<$p1.minDaysInFirstWeek){$3-=7;}return Math.floor($3/7)+1;}
tableau.format.dtGetFiscalYear=function(d,fiscalYearStart){var $0=d.getUTCFullYear();var $1=d.getUTCMonth()+1;return (($1<fiscalYearStart||fiscalYearStart===1)?0:1)+$0;}
tableau.format.dtGetFiscalQuarter=function(d,fiscalYearStart){if(fiscalYearStart<1){fiscalYearStart=1;}return Math.floor((((d.getUTCMonth()+1)-fiscalYearStart+12)%12)/3)+1;}
tableau.format.$24=function($p0,$p1){if(ss.isNullOrUndefined($p1)){return null;}return $p1.day[$p0.getUTCDay()+1];}
tableau.format.$25=function($p0,$p1){if(ss.isNullOrUndefined($p1)){return null;}return $p1.shortDay[$p0.getUTCDay()+1];}
tableau.format.$26=function($p0,$p1){if(ss.isNullOrUndefined($p1)){return null;}return $p1.month[$p0.getUTCMonth()];}
tableau.format.$27=function($p0,$p1){if(ss.isNullOrUndefined($p1)){return null;}return $p1.shortMonth[$p0.getUTCMonth()];}
tableau.format.formatJsDateTime=function(d,format,showFullDateTimes,dataValueType){if(ss.isNullOrUndefined(format)){if(showFullDateTimes===2&&tableau.format.$1C(d)){showFullDateTimes=0;}return tableau.format.formatCustomJSDateTime(d,'*M/d/yyyy',showFullDateTimes,dataValueType,'en_US','','h:nn:ss tt',null);}return tableau.format.formatCustomJSDateTime(d,format.format,showFullDateTimes,dataValueType,format.locale,format.originalFormat,format.timeFormat,format.locale_formatting_strings,format.calOpts);}
tableau.format.$28=function($p0,$p1,$p2,$p3){var $0=new Date(tableau.types.JsDateFromOleDate($p0));return tableau.format.formatJsDateTime($0,$p1,$p2,$p3);}
tableau.format.$29=function($p0){return ($p0<0)?Math.ceil($p0):Math.floor($p0);}
tableau.format.$2A=function($p0,$p1,$p2,$p3){var $0=Math.abs(tableau.format.$29($p0));var $1='';var $2=(parseInt($p3.charAt(0).toString(),10)||3);if($p1!=='t'){return $0.toString();}while(true){var $3=$0%1000;$0=tableau.format.$29($0/1000);if(isNaN($0)||0===$0){$1=$3.toString()+$1;break;}$1=$p2+tableau.format.$1B($3,$2)+$1;}return $1;}
tableau.format.$2B=function($p0,$p1){switch($p1){case 'B':case 'G':return $p0/1000000000;case 'M':return $p0/1000000;case 'K':return $p0/1000;default:return $p0;}}
tableau.format.$2C=function($p0,$p1,$p2,$p3,$p4){$p1=$p1.replace(new RegExp('^-'),'');if($p0>=0||new RegExp('^[.0]*$').test($p1)){return $p2+$p1+$p3;}switch(parseInt($p4,10)){case 2:return '-'+$p2+$p1+$p3;case 3:return $p2+$p1+$p3+'-';case 4:return $p2+'-'+$p1+$p3;case 5:return $p2+$p1+'-'+$p3;default:return '('+$p2+$p1+$p3+')';}}
tableau.format.$2D=function($p0){return tableau.format.$29($p0);}
tableau.format.$2E=function($p0,$p1,$p2,$p3,$p4,$p5,$p6){if($p1==='i'){return tableau.format.$30($p0,$p1,$p2,$p3,$p4,$p5,$p6,null,null);}else{return tableau.format.$30($p0,$p1,$p2,$p3,$p4,$p5,$p6,0.0001,1000000000000000);}}
tableau.format.$2F=function($p0,$p1,$p2,$p3,$p4,$p5){if($p1==='i'){return tableau.format.$30($p0,$p1,null,$p2,$p3,$p4,$p5,null,1000000);}else{return tableau.format.$30($p0,$p1,null,$p2,$p3,$p4,$p5,0.0001,1000000000000000);}}
tableau.format.$30=function($p0,$p1,$p2,$p3,$p4,$p5,$p6,$p7,$p8){var $0=Math.abs($p0);if($0!==0&&((ss.isValue($p8)&&$0>=$p8)||(ss.isValue($p7)&&$0<$p7))){var $5=tableau.format.$31(1,$p1);var $6=tableau.format.$32($p0,$5,$p3);return $6.replace(new RegExp('['+$p3+']?0+e'),'e');}var $1=$p0-tableau.format.$29($p0);var $2=tableau.format.formatIntAuto($p0,$p4,$p5,$p6);var $3='';if(!$1){return $2;}if($2==='0'&&$p0<0){$2='-0';}var $4;if(ss.isValue($p2)&&$p2<0){$4=-$p2;}else{$4=tableau.format.$31($p0,$p1);}$3=$1.toFixed($4);if(parseFloat($3)>=1){$2=tableau.format.formatIntAuto(tableau.format.$29($p0)+1,$p4,$p5,$p6);return $2;}$3=$3.replace(new RegExp('0+$'),'');$3=$3.replace(new RegExp('^-?0\\.'),$p3);return $2+$3;}
tableau.format.$31=function($p0,$p1){var $0=($p1==='i')?6:15;return Math.min(Math.max(0,$0-Math.abs(tableau.format.$29($p0)).toString().length),9);}
tableau.format.$32=function($p0,$p1,$p2){if(isNaN($p0)||!isFinite($p0)){return $p0.toString();}if($p1<0||isNaN($p1)){$p1=0;}if($p1>15){$p1=15;}var $0=tableau.format.$33($p0,$p1);var $1=$0.indexOf('e');var $2=$0.substr($1);if($2.length<4){$0=$0.substring(0,$1+2)+'0'+$0.substr($1+2);}$0=$0.replace(new RegExp('\\.'),$p2);return $0;}
tableau.format.$33=function($p0,$p1){return tableau.format.$35($p0,$p1,15,function($p1_0,$p1_1){
return $p1_0.toExponential($p1_1);});}
tableau.format.$34=function($p0,$p1){return tableau.format.$35($p0,$p1,tableau.format.$31($p0,'r'),function($p1_0,$p1_1){
return $p1_0.toFixed($p1_1);});}
tableau.format.$35=function($p0,$p1,$p2,$p3){$p2=Math.max($p2-1,$p1);var $0=$p3($p0,$p2);var $1=$0.indexOf('e');if($1===-1){$1=$0.length;}var $2=$1-($p2-$p1);var $3=$0.charCodeAt($2);if($0.charCodeAt($2-1)===46){$2--;}$0=$0.substring(0,$2)+$0.substring($1,$0.length);if($3>=53&&$3<=57){var $4;do{$2--;$4=$0.charCodeAt($2);if($4===46||$4===45){$4=48;continue;}$4++;if($4>57){$4=48;}$0=$0.substring(0,$2)+String.fromCharCode($4)+$0.substring($2+1,$0.length);}while($4===48&&$2>0);if($4===48&&!$2){$0=$p3($p0,$p1);}}return $0;}
tableau.format.$36=function($p0,$p1,$p2,$p3){if($p2===-1){return tableau.format.$30($p0*100,$p1,null,$p3[7],$p3[2],$p3[8],$p3[9],null,null)+'%';}else{return tableau.format.$38($p0*100,$p2,$p3)+'%';}}
tableau.format.$37=function($p0,$p1,$p2,$p3,$p4){if(ss.isNullOrUndefined($p2)||$p2.length!==10){return tableau.format.$2E($p0,$p1,$p3,'.',($p4==='d')?null:'t',',','3;0');}var $0=parseInt($p2[1],10);switch($p2[0]){case '':return tableau.format.$2E($p0,$p1,null,$p2[7],$p2[2],$p2[8],$p2[9]);case 'N':return tableau.format.$2F($p0,$p1,$p2[7],$p2[2],$p2[8],$p2[9]);case 'e':return tableau.format.$32($p0,$0,$p2[7]);case 'p':return tableau.format.$36($p0,$p1,$0,$p2);default:return tableau.format.$38($p0,$0,$p2);}}
tableau.format.$38=function($p0,$p1,$p2){$p0=tableau.format.$2B($p0,$p2[5]);var $0=$p2[5]+$p2[4];var $1=tableau.format.applyDecimalPlaces($p0,$p1,$p2[7]);if(Type.canCast($1,Number)){$p0+=$1;$1=tableau.format.applyDecimalPlaces(0,$p1,$p2[7]);}var $2=tableau.format.$2A($p0,$p2[2],$p2[8],$p2[9])+$1;return tableau.format.$2C($p0,$2,$p2[3],$0,$p2[6]);}
tableau.format.$39=function($p0,$p1){return tableau.format.$37(tableau.format.$29($p0),'i',$p1,null,null);}
tableau.format.$3A=function($p0){var $0=tab.$create_FormattingInfo();$0.format=$p0[0];$0.locale=$p0[1];$0.originalFormat=$p0[2];$0.timeFormat=$p0[3];$0.calOpts=new tab.CalendarOptions();$0.calOpts.fiscalYearStart=parseInt($p0[4]);if(isNaN($0.calOpts.fiscalYearStart)){$0.calOpts.fiscalYearStart=0;}$0.calOpts.startOfWeek=parseInt($p0[5]);if(isNaN($0.calOpts.startOfWeek)){$0.calOpts.startOfWeek=1;}$0.calOpts.minDaysInFirstWeek=parseInt($p0[6]);if(isNaN($0.calOpts.minDaysInFirstWeek)){$0.calOpts.minDaysInFirstWeek=1;}$0.calOpts.brokenWeeks=$p0[7]==='1';return $0;}
tableau.format.$3B=function($p0){var $0=',';var $1='(';var $2=')';var $3='"';var $4='\\';var $5=[];$p0=$p0.trim();if(!$p0.length){return '';}var $6=$p0.length;var $7=0;if($7>=$6||$p0.charAt($7)!==$1){return '';}++$7;while($7<$6){var $8=$7;var $9=false;var $A=0;while($8<$6&&!$9){var $C=$p0.charAt($8);if(!$A&&($C===$0||$C===$2)){$9=true;break;}else if($C===$4){$8+=2;}else{if($C===$3){$A=1-$A;}++$8;}}if(!$9){return '';}var $B=$p0.substring($7+1,$8-1);$B=$B.replaceAll('\\\\','\\');$B=$B.replaceAll('\\"','"');$B=$B.replaceAll('\\,',',');$B=$B.replaceAll('\\(','(');$B=$B.replaceAll('\\)',')');$5.add($B);$7=$8;++$7;}return $5.join(', ');}
tab.HistoryUtil=function(){}
tab.HistoryUtil.pushState=function(window,state,title,url){if(tab.BrowserSupport.get_historyApi()){try{window.history.pushState(state, title, url);}catch($0){}}}
tab.HistoryUtil.replaceState=function(window,state,title,url){if(tab.BrowserSupport.get_historyApi()){try{window.history.replaceState(state, title, url);}catch($0){}}}
tab.IntegerRange=function(from,to){this.$0=from;this.to=to;}
tab.IntegerRange.itemToTileRange=function(itemRange,tileSize){var $0=new tab.IntegerRange(0,0);$0.set_from(Math.floor(itemRange.get_from()/tileSize));$0.set_to(Math.floor(itemRange.get_to()/tileSize));return $0;}
tab.IntegerRange.pixelToItemRange=function(pixelRange,itemHeight){var $0=new tab.IntegerRange(0,0);$0.set_from(Math.floor(pixelRange.get_from()/itemHeight));$0.set_to(Math.floor(pixelRange.get_to()/itemHeight));return $0;}
tab.IntegerRange.pixelToTileRange=function(pixelRange,itemHeight,tileSize){return tab.IntegerRange.itemToTileRange(tab.IntegerRange.pixelToItemRange(pixelRange,itemHeight),tileSize);}
tab.IntegerRange.prototype={$0:0,to:0,get_from:function(){return this.$0;},set_from:function(value){this.$0=value;return value;},get_to:function(){return this.to;},set_to:function(value){this.to=value;return value;}}
tab.IntSet=function(){this.$0={};}
tab.IntSet.prototype={get_count:function(){return Object.getKeyCount(this.$0);},get_values:function(){var $0=new Array(this.get_count());var $1=0;var $dict1=this.$0;for(var $key2 in $dict1){var $2={key:$key2,value:$dict1[$key2]};$0[$1]=$2.value;$1++;}return $0;},addAll:function(ints){var $enum1=ss.IEnumerator.getEnumerator(ints);while($enum1.moveNext()){var $0=$enum1.current;this.$0[$0]=$0;}},add:function(i){this.$0[i]=i;},remove:function(i){delete this.$0[i];},clear:function(){Object.clearKeys(this.$0);},contains:function(i){return Object.keyExists(this.$0,i);},intersect:function(ints){var $0=new tab.IntSet();var $dict1=ints.$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};if(this.contains($1.key)){$0.$0[$1.key]=$1.value;}}return $0;}}
tab.UintSet=function(){this.$0={};}
tab.UintSet.prototype={get_count:function(){return Object.getKeyCount(this.$0);},get_values:function(){var $0=new Array(this.get_count());var $1=0;var $dict1=this.$0;for(var $key2 in $dict1){var $2={key:$key2,value:$dict1[$key2]};$0[$1]=$2.value;$1++;}return $0;},addAll:function(ints){var $enum1=ss.IEnumerator.getEnumerator(ints);while($enum1.moveNext()){var $0=$enum1.current;this.$0[$0]=$0;}},add:function(i){this.$0[i]=i;},remove:function(i){delete this.$0[i];},clear:function(){Object.clearKeys(this.$0);},contains:function(i){return Object.keyExists(this.$0,i);},intersect:function(ints){var $0=new tab.UintSet();var $dict1=ints.$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};if(this.contains($1.key)){$0.$0[$1.key]=$1.value;}}return $0;}}
$.fn.focusDelayed=function(delayMilliseconds,action){this.each(function(){
var $1_0=this;window.setTimeout(function(){
$($1_0).focus();if(ss.isValue(action)){action.call($1_0);}},delayMilliseconds);});}
$.expr.filters.focusable=function(element){return tab.vqlcore$0.$0(element,!isNaN(parseInt($(element).attr('tabindex'),10)));}
$.expr.filters.tabbable=function(element){var $0=parseInt($(element).attr('tabindex'),10);var $1=isNaN($0);return ($1||$0>=0)&&tab.vqlcore$0.$0(element,!$1);}
tab.vqlcore$0=function(){}
tab.vqlcore$0.$0=function($p0,$p1){var $0=$p0.nodeName.toLowerCase();if($0==='area'){return false;}var $1=$p1;var $2=new RegExp('input|select|textarea|button|object');if($2.test($0)){$1=!$p0.disabled;}else if($0==='a'){$1=!String.isNullOrEmpty(($p0).href)||$p1;}return $1&&tab.vqlcore$0.$1($p0);}
tab.vqlcore$0.$1=function($p0){var $0=$($p0).parents().andSelf().filter(function(){
return $(this).css('visibility')==='hidden'||$.expr.filters.hidden(this);});return !$0.length;}
tab.JsonUtil=function(){}
tab.JsonUtil.parseJson=function(jsonValue){return $.parseJSON(jsonValue);}
tab.JsonUtil.toJson=function(it,pretty,indentStr){pretty=(pretty||false);indentStr=(indentStr||'');var $0=[];return tab.JsonUtil.$3(it,pretty,indentStr,$0);}
tab.JsonUtil.$1=function($p0,$p1,$p2){if(ss.isValue((Array).prototype['indexOf'])){return $p0.indexOf($p1,$p2);}$p2=($p2||0);var $0=$p0.length;if($0>0){for(var $1=$p2;$1<$0;$1++){if($p0[$1]===$p1){return $1;}}}return -1;}
tab.JsonUtil.$2=function($p0,$p1,$p2){var $0=tab.JsonUtil.$1($p0,$p1,$p2);return $0>=0;}
tab.JsonUtil.$3=function($p0,$p1,$p2,$p3){if(tab.JsonUtil.$2($p3,$p0)){throw Error.createError('The object contains recursive reference of sub-objects',null);}if(ss.isUndefined($p0)){return 'undefined';}if($p0==null){return 'null';}var $0=$.type($p0);if($0==='number'||$0==='boolean'){return $p0.toString();}if($0==='string'){return tab.JsonUtil.$6($p0);}$p3.push($p0);var $1;$p2=($p2||'');var $2=($p1)?$p2+'\t':'';var $3=($p0.__json__||$p0.json);if($.isFunction($3)){var $6=$3;$1=$6($p0);if($p0!==$1){var $7=tab.JsonUtil.$3($1,$p1,$2,$p3);$p3.pop();return $7;}}if(ss.isValue($p0.nodeType)&&ss.isValue($p0.cloneNode)){throw Error.createError("Can't serialize DOM nodes",null);}var $4=($p1)?' ':'';var $5=($p1)?'\n':'';if($.isArray($p0)){return tab.JsonUtil.$5($p0,$p1,$p2,$p3,$2,$5);}if($0==='function'){$p3.pop();return null;}return tab.JsonUtil.$4($p0,$p1,$p2,$p3,$2,$5,$4);}
tab.JsonUtil.$4=function($p0,$p1,$p2,$p3,$p4,$p5,$p6){var $0=$p0;var $1=new ss.StringBuilder('{');var $2=false;var $dict1=$0;for(var $key2 in $dict1){var $3={key:$key2,value:$dict1[$key2]};var $4;var $5;if(typeof($3.key)==='number'){$4='"'+$3.key+'"';}else if(typeof($3.key)==='string'){$4=tab.JsonUtil.$6($3.key);}else{continue;}$5=tab.JsonUtil.$3($3.value,$p1,$p4,$p3);if($5==null){continue;}if($2){$1.append(',');}$1.append($p5+$p4+$4+':'+$p6+$5);$2=true;}$1.append($p5+$p2+'}');$p3.pop();return $1.toString();}
tab.JsonUtil.$5=function($p0,$p1,$p2,$p3,$p4,$p5){var $0=false;var $1=new ss.StringBuilder('[');var $2=$p0;for(var $3=0;$3<$2.length;$3++){var $4=$2[$3];var $5=tab.JsonUtil.$3($4,$p1,$p4,$p3);if($5==null){$5='undefined';}if($0){$1.append(',');}$1.append($p5+$p4+$5);$0=true;}$1.append($p5+$p2+']');$p3.pop();return $1.toString();}
tab.JsonUtil.$6=function($p0){$p0 = ('"' + $p0.replace(/(["\\])/g, '\\$1') + '"');$p0=$p0.replace(new RegExp('[\u000c]','g'),'\\f');$p0=$p0.replace(new RegExp('[\u0008]','g'),'\\b');$p0=$p0.replace(new RegExp('[\n]','g'),'\\n');$p0=$p0.replace(new RegExp('[\t]','g'),'\\t');$p0=$p0.replace(new RegExp('[\r]','g'),'\\r');return $p0;}
tab.MiscUtil=function(){}
tab.MiscUtil.get_pathName=function(){var $0=tabBootstrap.Utility.get_locationWindow();return tab.WindowHelper.getLocation($0).pathname;}
tab.MiscUtil.get_urlPathnameParts=function(){var $0=tab.MiscUtil.get_pathName();var $1=tsConfig.site_root;var $2=$0.indexOf($1,0);var $3=$0.substr($2+$1.length);var $4=$3.split('/');var $5={};$5[2]=$4[2];$5[3]=$4[3];$5[4]=$4[4];return $5;}
tab.MiscUtil.addMethodAfterAdvice=function(instance,methodName,afterAdvice){var $0=instance[methodName];var $1=function(){
var $1_0=Array.toArray(arguments);var $1_1=$0.apply(instance,$1_0);return (afterAdvice.call(instance,$1_0)||$1_1);};instance[methodName]=$1;var $2=function(){
instance[methodName]=$0;};return new tab.CallOnDispose($2);}
tab.MiscUtil.lazyInitStaticField=function(t,fieldName,initializer){var $0=t[fieldName];if(ss.isNullOrUndefined($0)){$0=initializer();t[fieldName]=$0;}return $0;}
tab.MiscUtil.isValue=function(arg,field){if(ss.isNullOrUndefined(arg)){return false;}if(!ss.isNullOrUndefined(field)){var $0=arg[field];return !ss.isNullOrUndefined($0);}return true;}
tab.MiscUtil.percentEncode=function(valueToEncode,unreservedChars){valueToEncode=encodeURIComponent(valueToEncode);if(ss.isNullOrUndefined(unreservedChars)){return valueToEncode;}var $0=new ss.StringBuilder();var $1=0;while($1<valueToEncode.length){var $2=valueToEncode.substr($1,1);if($2==='%'){$0.append(valueToEncode.substr($1,3));$1+=2;}else if(!Object.keyExists(unreservedChars,$2)){$0.append('%').append($2.charCodeAt(0).toString(16).toUpperCase());}else{$0.append($2);}$1++;}return $0.toString();}
tab.MiscUtil.encodeForWG=function(valueToEncode){var $0={};var $1=function($p1_0,$p1_1){
for(var $1_0=$p1_0;$1_0<=$p1_1;$1_0++){var $1_1=String.fromCharCode($1_0);$0[$1_1]=$1_1;}};$1(97,122);$1(64,90);$1(48,57);$1(95,95);$1(45,45);valueToEncode=tab.MiscUtil.percentEncode(valueToEncode,$0);valueToEncode=tab.MiscUtil.percentEncode(valueToEncode,null);return valueToEncode;}
tab.MiscUtil.isNullOrUndefined=function(args){if(ss.isNullOrUndefined(args)){return true;}for(var $0=0;$0<args.length;$0++){if(ss.isNullOrUndefined(args[$0])){return true;}}return false;}
tab.MiscUtil.isNullOrEmpty=function(args){if(ss.isNullOrUndefined(args)){return true;}var $0=args;if(ss.isValue($0['length'])&&!$0['length']){return true;}return false;}
tab.MiscUtil.isValidIndex=function(index,arr){var $0=[index,arr];return !tab.MiscUtil.isNullOrUndefined($0)&&index>=0&&index<arr.length;}
tab.MiscUtil.isObject=function(o){return o === Object(o);}
tab.MiscUtil.hasOwnProperty=function(owner,field){return owner.hasOwnProperty(field);}
tab.MiscUtil.toBoolean=function(value,defaultIfMissing){var $0=new RegExp('^(yes|y|true|t|1)$','i');if(tab.MiscUtil.isNullOrEmpty(value)){return defaultIfMissing;}var $1=value.match($0);return !tab.MiscUtil.isNullOrEmpty($1);}
tab.MiscUtil.getUriQueryParameters=function(uri){var $0={};if(ss.isNullOrUndefined(uri)){return $0;}var $1=(uri).indexOf('?');if($1<0){return $0;}var $2=(uri).substr($1+1);var $3=$2.indexOf('#');if($3>=0){$2=$2.substr(0,$3);}if(String.isNullOrEmpty($2)){return $0;}var $4=$2.split('&');var $enum1=ss.IEnumerator.getEnumerator($4);while($enum1.moveNext()){var $5=$enum1.current;var $6=$5.split('=');var $7=decodeURIComponent($6[0]);var $8;if(Object.keyExists($0,$7)){$8=$0[$7];}else{$8=[];$0[$7]=$8;}if($6.length>1){$8.add(decodeURIComponent($6[1]));}}return $0;}
tab.MiscUtil.replaceUriQueryParameters=function(uri,parameters){var $0=new ss.StringBuilder();var $1=true;var $2=function(){
$0.append(($1)?'?':'&');$1=false;};var $dict1=parameters;for(var $key2 in $dict1){var $8={key:$key2,value:$dict1[$key2]};var $9=encodeURIComponent($8.key);if(ss.isNullOrUndefined($8.value)||!$8.value.length){$2();$0.append($9);}else{var $enum3=ss.IEnumerator.getEnumerator($8.value);while($enum3.moveNext()){var $A=$enum3.current;$2();$0.append($9).append('=').append(encodeURIComponent($A));}}}var $3=(uri).indexOf('?');var $4=(uri).indexOf('#');var $5=Math.min(($3<0)?(uri).length:$3,($4<0)?(uri).length:$4);var $6=(uri).substr(0,$5);var $7=($4<0)?'':(uri).substr($4);return $6+$0+$7;}
tab.MiscUtil.sanatizeBoolean=function(value){if(ss.isNullOrUndefined(value)){return value;}return Boolean.parse(value.toString());}
tab.MiscUtil.newRelativePathWithParams=function(newPathname,uri){var $0=(uri).indexOfAny(tab.MiscUtil.$0);return newPathname+(($0<0)?'':(uri).substr($0));}
tab.MiscUtil.postHookMessage=function(message){tab.BrowserSupport.doPostMessage('tableau.hooks.'+message);}
tab.MiscUtil.dispose=function(d){if(ss.isValue(d)){d.dispose();}return null;}
tab.MiscUtil.cloneObject=function(src){var $0;if(tab.BrowserSupport.get_nativeJSONSupport()){var $1=JSON.stringify(src);$0=JSON.parse($1);}else{$0=$.extend(true,{},src);}return $0;}
tab.MiscUtil.cloneArray=function(arr){var $0;if(tab.BrowserSupport.get_nativeJSONSupport()){var $1=JSON.stringify(arr);$0=JSON.parse($1);}else{$0=$.extend(true,[],arr);}return $0;}
tab.Param=function(){}
tab.Param.createArgumentNullOrUndefinedException=function(paramName){return Error.createError(paramName+' is null or undefined.',{paramName:paramName});}
tab.Param.verifyString=function(param,paramName){tab.Param.verifyValue(param,paramName);if(!param.trim().length){var $0=Error.createError(paramName+' contains only white space',{paramName:paramName});tab.Param.$0($0);throw $0;}}
tab.Param.verifyValue=function(param,paramName){if(ss.isNullOrUndefined(param)){var $0=tab.Param.createArgumentNullOrUndefinedException(paramName);tab.Param.$0($0);throw $0;}}
tab.Param.$0=function($p0){if(tab.Param.suppressAlerts){return;}try{throw $p0;}catch($0){alert(tab.Param.$1($0));}}
tab.Param.$1=function($p0){var $0;if(ss.isValue($p0.stack)){$0=$p0.stack;}else{$0=$p0.message;}return $0;}
tab.PointUtil=function(){}
tab.PointUtil.fromPresModel=function(pointPM){if(ss.isNullOrUndefined(pointPM)){return null;}return tab.$create_Point(pointPM.v9,pointPM.wa);}
tab.PointUtil.toPresModel=function(pt){if(ss.isNullOrUndefined(pt)){return null;}var $0={};$0.v9=pt.x;$0.wa=pt.y;return $0;}
tab.PointUtil.fromPosition=function(position){return tab.$create_Point(position.left,position.top);}
tab.PointUtil.add=function(first,second){if(ss.isNullOrUndefined(first)||ss.isNullOrUndefined(second)){return first;}return tab.$create_Point(first.x+second.x,first.y+second.y);}
tab.PointUtil.subtract=function(first,second){return tab.$create_Point(first.x-second.x,first.y-second.y);}
tab.PointUtil.distance=function(first,second){tab.Param.verifyValue(first,'first');tab.Param.verifyValue(second,'second');var $0=first.x-second.x;var $1=first.y-second.y;return Math.sqrt(($0*$0)+($1*$1));}
tab.PointUtil.equals=function(p,p2){return ss.isValue(p)&&ss.isValue(p2)&&p2.x===p.x&&p2.y===p.y;}
tab.PointFUtil=function(){}
tab.PointFUtil.subtract=function(first,second){return tab.$create_PointF(first.x-second.x,first.y-second.y);}
tab.PointFUtil.timesScalar=function(p,scalar){return tab.$create_PointF(p.x*scalar,p.y*scalar);}
tab.PointFUtil.round=function(p){return tab.$create_Point(Math.round(p.x),Math.round(p.y));}
tab.RecordCast=function(){}
tab.RecordCast.deltaAsPoint=function(d){return d;}
tab.RecordCast.deltaAsRectXY=function(d){return d;}
tab.RecordCast.rectAsSize=function(r){return r;}
tab.RecordCast.regionRectAsRectXY=function(r){return r;}
tab.RecordCast.regionRectAsSize=function(r){return r;}
tab.RecordCast.dojoCoordsAsPoint=function(c){return c;}
tab.RecordCast.dojoCoordsAsRectXY=function(c){return c;}
tab.RecordCast.frameInfoAsRect=function(fi){return fi;}
tab.RecordCast.rectPresModelAsRectXY=function(rpm){if(ss.isNullOrUndefined(rpm)){return null;}return tab.$create_RectXY(rpm.v9,rpm.wa,rpm.wb,rpm.wc);}
tab.RecordCast.doubleRectPresModelAsDoubleRectXY=function(rpm){if(ss.isNullOrUndefined(rpm)){return null;}return tab.$create_DoubleRectXY(rpm.aeg,rpm.aef,rpm.aeh,rpm.aei);}
tab.RecordCast.sizeAsSizePresModel=function(sz){if(ss.isNullOrUndefined(sz)){return null;}var $0={};$0.wb=sz.w;$0.wc=sz.h;return $0;}
tab.RectUtil=function(){}
tab.RectUtil.isEmpty=function(r){return !r.w||!r.h;}
tab.RectUtil.isEqual=function(r1,r2){return r1.t===r2.t&&r1.l===r2.l&&r1.w===r2.w&&r1.h===r2.h;}
tab.RectUtil.inRect=function(r,p){return p.x>=r.l&&p.x<(r.l+r.w)&&p.y>=r.t&&p.y<(r.t+r.h);}
tab.RectUtil.intersectsWith=function(r1,r2){return !(r2.l+r2.w<r1.l||r2.t+r2.h<r1.t||r2.l>r1.l+r1.w||r2.t>r1.t+r1.h);}
tab.RectUtil.union=function(bounds1,bounds2){var $0=Math.min(bounds1.l,bounds2.l);var $1=Math.min(bounds1.t,bounds2.t);var $2=Math.max(bounds1.l+bounds1.w,bounds2.l+bounds2.w);var $3=Math.max(bounds1.t+bounds1.h,bounds2.t+bounds2.h);return tab.$create_Rect($0,$1,$2-$0,$3-$1);}
tab.RectXYUtil=function(){}
tab.RectXYUtil.isEmpty=function(r){if(!ss.isValue(r)){return true;}return !r.w||!r.h;}
tab.RectXYUtil.isEqual=function(r1,r2){return r1.x===r2.x&&r1.y===r2.y&&r1.w===r2.w&&r1.h===r2.h;}
tab.RectXYUtil.isNull=function(r){return !r.x&&!r.y&&!r.w&&!r.h;}
tab.RectXYUtil.inRect=function(r,p){return p.x>=r.x&&p.x<(r.x+r.w)&&p.y>=r.y&&p.y<(r.y+r.h);}
tab.RectXYUtil.inRectPointF=function(r,p){return p.x>=r.x&&p.x<(r.x+r.w)&&p.y>=r.y&&p.y<(r.y+r.h);}
tab.RectXYUtil.intersectsWith=function(r1,r2){return !(r2.x+r2.w<r1.x||r2.y+r2.h<r1.y||r2.x>r1.x+r1.w||r2.y>r1.y+r1.h);}
tab.RectXYUtil.intersectsWithMoreThanSharedEdge=function(r1,r2){return !(r2.x+r2.w<=r1.x||r2.y+r2.h<=r1.y||r2.x>=r1.x+r1.w||r2.y>=r1.y+r1.h);}
tab.RectXYUtil.clone=function(r){return tab.$create_RectXY(r.x,r.y,r.w,r.h);}
tab.RectXYUtil.nonemptyify=function(r){return tab.$create_RectXY(r.x,r.y,Math.max(1,r.w),Math.max(1,r.h));}
tab.RectXYUtil.intersectsWithAny=function(r1,rectangles){var $0=false;var $enum1=ss.IEnumerator.getEnumerator(rectangles);while($enum1.moveNext()){var $1=$enum1.current;if(ss.isNullOrUndefined($1)){continue;}if(tab.RectXYUtil.intersectsWith(r1,$1)){$0=true;break;}}return $0;}
tab.RectXYUtil.completelyContains=function(r1,r2){return tab.RectXYUtil.inRect(r1,tab.$create_Point(r2.x,r2.y))&&tab.RectXYUtil.inRect(r1,tab.$create_Point(r2.x+r2.w-1,r2.y+r2.h-1));}
tab.RectXYUtil.toRect=function(r){return tab.$create_Rect(r.x,r.y,r.w,r.h);}
tab.RectXYUtil.offsetRect=function(r,p){return tab.$create_RectXY(r.x+p.x,r.y+p.y,r.w,r.h);}
tab.RectXYUtil.offsetRectF=function(r,p){return tab.$create_RectXY(r.x+Math.round(p.x),r.y+Math.round(p.y),r.w,r.h);}
tab.RectXYUtil.outsetRect=function(r,dx,dy){return tab.$create_RectXY(r.x-dx,r.y-dy,r.w+dx+dx,r.h+dy+dy);}
tab.RectXYUtil.outsetRectSizeF=function(r,d){return tab.RectXYUtil.outsetRect(r,Math.ceil(d.w),Math.ceil(d.h));}
tab.RectXYUtil.encompassPoint=function(r,p){if(tab.RectXYUtil.isEmpty(r)){return tab.$create_RectXY(p.x,p.y,1,1);}if(!tab.RectXYUtil.inRect(r,p)){var $0=tab.$create_RectXY(r.x,r.y,r.w,r.h);var $1=$0.x-p.x;if($1>0){$0.x=p.x;$0.w+=$1;}else if($1<-$0.w){$0.w=-$1;}var $2=$0.y-p.y;if($2>0){$0.y=p.y;$0.h+=$2;}else if($2<-$0.h){$0.h=-$2;}return $0;}return r;}
tab.RectXYUtil.encompassCircle=function(r,circle){var $0=circle.radius*2;var $1=tab.$create_RectXY(Math.floor(circle.center.x-circle.radius+0.5),Math.floor(circle.center.y-circle.radius+0.5),Math.floor($0+0.5),Math.floor($0+0.5));if(tab.RectXYUtil.isEmpty(r)){return $1;}return tab.RectXYUtil.union(r,$1);}
tab.RectXYUtil.union=function(bounds1,bounds2){if(tab.RectXYUtil.isEmpty(bounds1)){return bounds2;}if(tab.RectXYUtil.isEmpty(bounds2)){return bounds1;}var $0=Math.min(bounds1.x,bounds2.x);var $1=Math.min(bounds1.y,bounds2.y);var $2=Math.max(bounds1.x+bounds1.w,bounds2.x+bounds2.w);var $3=Math.max(bounds1.y+bounds1.h,bounds2.y+bounds2.h);return tab.$create_RectXY($0,$1,$2-$0,$3-$1);}
tab.RectXYUtil.rectXYFromCorners=function(corner1,corner2){var $0=Math.round(Math.min(corner1.x,corner2.x));var $1=Math.round(Math.min(corner1.y,corner2.y));var $2=Math.abs(Math.round(corner1.x-corner2.x));var $3=Math.abs(Math.round(corner1.y-corner2.y));return tab.$create_RectXY($0,$1,$2,$3);}
tab.RectXYUtil.rectXYFromBBoxRectF=function(bounds){return tab.RectXYUtil.rectXYFromMinAndMax(bounds.minX,bounds.minY,bounds.maxX,bounds.maxY);}
tab.RectXYUtil.rectXYFromMinAndMax=function(minX,minY,maxX,maxY){var $0=Math.floor(minX);var $1=Math.floor(minY);var $2=Math.ceil(maxX);var $3=Math.ceil(maxY);return tab.$create_RectXY($0,$1,$2-$0,$3-$1);}
tab.RectXYUtil.dialate=function(r,dialation){var $0=r.x-dialation;var $1=r.y-dialation;var $2=r.w+(2*dialation);var $3=r.h+(2*dialation);return tab.$create_RectXY($0,$1,$2,$3);}
tab.RectXYUtil.intersect=function(rect1,rect2){if(!tab.RectXYUtil.intersectsWith(rect1,rect2)||tab.RectXYUtil.isEmpty(rect2)||tab.RectXYUtil.isEmpty(rect1)){return tab.$create_RectXY(0,0,0,0);}var $0=Math.max(rect1.x,rect2.x);var $1=Math.max(rect1.y,rect2.y);var $2=Math.min(rect1.x+rect1.w,rect2.x+rect2.w);var $3=Math.min(rect1.y+rect1.h,rect2.y+rect2.h);return tab.$create_RectXY($0,$1,$2-$0,$3-$1);}
tab.RectXYUtil.shiftCoordsTowardsCenter=function(coords,rect,marginSize){if(ss.isNullOrUndefined(rect)){return coords;}var $0=tab.$create_Point(coords.x,coords.y);$0=tab.RectXYUtil.horizontalShiftCoordsTowardsCenter($0,rect,marginSize);return tab.RectXYUtil.verticalShiftCoordsTowardsCenter($0,rect,marginSize);}
tab.RectXYUtil.horizontalShiftCoordsTowardsCenter=function(coords,rect,marginSize){if(ss.isNullOrUndefined(rect)){return coords;}var $0=tab.$create_Point(coords.x,coords.y);if($0.x<=(rect.x+marginSize)){$0.x+=marginSize;}else if($0.x>=((rect.x+rect.w)-(2*marginSize))){$0.x-=marginSize;}return $0;}
tab.RectXYUtil.verticalShiftCoordsTowardsCenter=function(coords,rect,marginSize){if(ss.isNullOrUndefined(rect)){return coords;}var $0=tab.$create_Point(coords.x,coords.y);if($0.y<=(rect.y+marginSize)){$0.y+=marginSize;}else if($0.y>=((rect.y+rect.h)-(2*marginSize))){$0.y-=marginSize;}return $0;}
tab.RectXYUtil.getChangedRects=function(originalRect,newRect){var $0=[];if(!ss.isValue(originalRect)||!ss.isValue(newRect)||!tab.RectXYUtil.intersectsWith(originalRect,newRect)){return $0;}var $1=originalRect.x+originalRect.w;var $2=originalRect.y+originalRect.h;var $3=newRect.x+newRect.w;var $4=newRect.y+newRect.h;if(originalRect.x!==newRect.x){$0.add(tab.$create_RectXY(Math.min(originalRect.x,newRect.x),Math.max(originalRect.y,newRect.y),Math.abs(originalRect.x-newRect.x),Math.min(originalRect.h,newRect.h)));}if(originalRect.y!==newRect.y){$0.add(tab.$create_RectXY(Math.max(originalRect.x,newRect.x),Math.min(originalRect.y,newRect.y),Math.min(originalRect.w,newRect.w),Math.abs(originalRect.y-newRect.y)));}if($1!==$3){$0.add(tab.$create_RectXY(Math.min($1,$3),Math.max(originalRect.y,newRect.y),Math.abs($1-$3),Math.min(originalRect.h,newRect.h)));}if($2!==$4){$0.add(tab.$create_RectXY(Math.max(originalRect.x,newRect.x),Math.min($2,$4),Math.min(originalRect.w,newRect.w),Math.abs($2-$4)));}if((originalRect.x<newRect.x&&originalRect.y<newRect.y)||(originalRect.x>newRect.x&&originalRect.y>newRect.y)){$0.add(tab.$create_RectXY(Math.min(originalRect.x,newRect.x),Math.min(originalRect.y,newRect.y),Math.abs(originalRect.x-newRect.x),Math.abs(originalRect.y-newRect.y)));}if((originalRect.x<newRect.x&&$2>$4)||(originalRect.x>newRect.x&&$2<$4)){$0.add(tab.$create_RectXY(Math.min(originalRect.x,newRect.x),Math.min($2,$4),Math.abs(originalRect.x-newRect.x),Math.abs($2-$4)));}if(($1>$3&&originalRect.y<newRect.y)||($1<$3&&originalRect.y>newRect.y)){$0.add(tab.$create_RectXY(Math.min($1,$3),Math.min(originalRect.y,newRect.y),Math.abs($1-$3),Math.abs(originalRect.y-newRect.y)));}if(($1<$3&&$2<$4)||($1>$3&&$2>$4)){$0.add(tab.$create_RectXY(Math.min($1,$3),Math.min($2,$4),Math.abs($1-$3),Math.abs($2-$4)));}return $0;}
tab.DoubleRectXYUtil=function(){}
tab.DoubleRectXYUtil.isEmpty=function(r){if(!ss.isValue(r)){return true;}return !r.w||!r.h;}
tab.DoubleRectXYUtil.isEqual=function(r1,r2){return r1.x===r2.x&&r1.y===r2.y&&r1.w===r2.w&&r1.h===r2.h;}
tab.DoubleRectXYUtil.isNull=function(r){return !r.x&&!r.y&&!r.w&&!r.h;}
tab.DoubleRectXYUtil.inRect=function(r,p){return p.x>=r.x&&p.x<(r.x+r.w)&&p.y>=r.y&&p.y<(r.y+r.h);}
tab.DoubleRectXYUtil.intersectsWith=function(r1,r2){return !(r2.x+r2.w<r1.x||r2.y+r2.h<r1.y||r2.x>r1.x+r1.w||r2.y>r1.y+r1.h);}
tab.DoubleRectXYUtil.outsetRect=function(r,dx,dy){return tab.$create_DoubleRectXY(r.x-dx,r.y-dy,r.w+dx+dx,r.h+dy+dy);}
tab.RleDecoder=function(){}
tab.RleDecoder.decode=function(root){if(ss.isNullOrUndefined(root)){return root;}return tab.RleDecoder.$0(root);}
tab.RleDecoder.$0=function($p0){if(typeof($p0)!=='object'||!ss.isValue($p0)){return $p0;}if($.isArray($p0)){var $0=$p0;for(var $1=0,$2=$0.length;$1<$2;$1++){var $3=$0[$1];if(typeof($3)!=='object'){break;}$0[$1]=tab.RleDecoder.$0($3);}return tab.RleDecoder.$4($0);}else{var $4=$p0;var $5=Object.keys($4);for(var $6=0,$7=$5.length;$6<$7;$6++){var $8=$5[$6];if(typeof($4[$8])!=='object'){continue;}if($4.hasOwnProperty($8)){$4[$8]=tab.RleDecoder.$0($4[$8]);}}}return $p0;}
tab.RleDecoder.$1=function($p0){if(!$p0.length){return false;}var $0=$p0[$p0.length-1];if(!$.isArray($0)){return false;}return !($0).length;}
tab.RleDecoder.$2=function($p0){var $0=$p0.length;return $0===2||$0===3;}
tab.RleDecoder.$3=function($p0,$p1){var $0=$p1[0];var $1=$p1[1];var $2=($p1.length===3)?$p1[2]:0;for(var $3=0,$4=$0;$3<$1;$3++,$4+=$2){$p0.push($4);}}
tab.RleDecoder.$4=function($p0){if(!tab.RleDecoder.$1($p0)){return $p0;}$p0.pop();var $0=null;var $1=0;var $2=$p0.length;for(var $3=0;$3<$2;$3++){var $4=$p0[$3];var $5=typeof($4);if($5==='number'){continue;}if($4==null){continue;}if($5!=='object'||!$.isArray($4)){return $p0;}var $6=$4;if(!tab.RleDecoder.$2($6)){return $p0;}$0=($0||[]);for(var $7=$1;$7<$3;$7++){$0.push($p0[$7]);}tab.RleDecoder.$3($0,$6);$1=$3+1;}if(ss.isValue($0)){for(var $8=$1;$8<$2;$8++){$0.push($p0[$8]);}$p0=$0;}return $p0;}
tab.SizeUtil=function(){}
tab.SizeUtil.isEmpty=function(s){return !s.w&&!s.h;}
tab.SizeUtil.union=function(s1,s2){return tab.$create_Size(Math.max(s1.w,s2.w),Math.max(s1.h,s2.h));}
tab.SizeUtil.unionPresModels=function(s1,s2){var $0={};$0.wb=Math.max(s1.wb,s2.wb);$0.wc=Math.max(s1.wc,s2.wc);return $0;}
tab.SizeUtil.add=function(first,second){if(ss.isNullOrUndefined(first)||ss.isNullOrUndefined(second)){return first;}return tab.$create_Size(first.w+second.w,first.h+second.h);}
tab.SizeUtil.subtract=function(first,second){return tab.$create_Size(first.w-second.w,first.h-second.h);}
tab.SizeUtil.equals=function(p,p2){return ss.isValue(p)&&ss.isValue(p2)&&p2.w===p.w&&p2.h===p.h;}
tab.StringTuple=function(first,second){this.$0=first;this.$1=second;}
tab.StringTuple.prototype={$0:null,$1:null,get_first:function(){return this.$0;},set_first:function(value){this.$0=value;return value;},get_second:function(){return this.$1;},set_second:function(value){this.$1=value;return value;}}
tab.StyleUtil=function(){}
tab.StyleUtil.appendCSSRule=function(selector,declarations){tab.StyleUtil.appendCSSRuleToStyleSheet('appendedCustomStyle',selector,declarations);}
tab.StyleUtil.appendCSSRuleToStyleSheet=function(styleElementId,selector,declarations){var $0;var $1=null;if(ss.isNullOrUndefined(tab.StyleUtil.$3)){tab.StyleUtil.$3={};}if(ss.isNullOrUndefined(tab.StyleUtil.$2)){tab.StyleUtil.$2={};}$0=tab.StyleUtil.$3[styleElementId];$1=tab.StyleUtil.$2[styleElementId];if(ss.isNullOrUndefined($0)){$0=document.createElement('style');$0.setAttribute('type','text/css');$0.id=styleElementId;document.getElementsByTagName('head')[0].appendChild($0);var $3=document.styleSheets;var $enum1=ss.IEnumerator.getEnumerator($3);while($enum1.moveNext()){var $4=$enum1.current;var $5=$4.ownerNode;if(ss.isNullOrUndefined($5)){$5=$4.owningElement;}if(ss.isValue($5)&&$5.id===styleElementId){$1=$4;break;}}tab.StyleUtil.$3[styleElementId]=$0;tab.StyleUtil.$2[styleElementId]=$1;}var $2='';var $enum2=ss.IEnumerator.getEnumerator(Object.keys(declarations));while($enum2.moveNext()){var $6=$enum2.current;$2+=$6+':'+declarations[$6]+';\n';}if((typeof($1.insertRule)==='function')){var $7=selector+' {\n'+$2+'}\n';var $8=$1.cssRules.length;$1.insertRule($7,$8);}else{var $enum3=ss.IEnumerator.getEnumerator(selector.split(','));while($enum3.moveNext()){var $9=$enum3.current;$1.addRule($9,$2,-1);}}}
tab.StyleUtil.clearDefaultStyleSheet=function(){tab.StyleUtil.clearStyleSheet('appendedCustomStyle');}
tab.StyleUtil.clearStyleSheet=function(styleElementId){var $0=null;if(ss.isNullOrUndefined(tab.StyleUtil.$3)){return;}$0=tab.StyleUtil.$3[styleElementId];if(ss.isValue($0)&&ss.isValue($0.parentNode)){$0.parentNode.removeChild($0);delete tab.StyleUtil.$2[styleElementId];delete tab.StyleUtil.$3[styleElementId];}}
tab.StyleUtil.isValidCssClassName=function(cssClassName){var $0=cssClassName.match(tab.StyleUtil.$1);return ss.isValue($0);}
tab.Transform=function(translateX,translateY,scale,type){this.$1=tab.$create_PointF(translateX,translateY);this.$2=scale;this.$3=1/scale;this.$4=type;}
tab.Transform.worldOffset=function(offset){return (!offset)?tab.Transform.$0:new tab.Transform(offset,0,1,3);}
tab.Transform.pixelToDomain=function(translateX,translateY,scale){if(tab.FloatUtil.isZero(translateX)&&tab.FloatUtil.isZero(translateY)&&tab.FloatUtil.isEqual(1,scale)){return tab.Transform.$0;}return new tab.Transform(translateX,translateY,scale,1);}
tab.Transform.domainToPixel=function(translateX,translateY,scale){if(tab.FloatUtil.isZero(translateX)&&tab.FloatUtil.isZero(translateY)&&tab.FloatUtil.isEqual(1,scale)){return tab.Transform.$0;}return new tab.Transform(translateX,translateY,scale,2);}
tab.Transform.prototype={$1:null,$2:0,$3:0,$4:0,get_translateX:function(){return this.$1.x;},get_translateY:function(){return this.$1.y;},get_transformType:function(){return this.$4;},get_isNull:function(){return !this.$4;},transformBounds:function(bounds){if(!this.$4){var $0=Math.floor(bounds.minX);var $1=Math.floor(bounds.minY);var $2=Math.ceil(bounds.maxX);var $3=Math.ceil(bounds.maxY);return tab.$create_RectXY($0,$1,$2-$0,$3-$1);}if(this.$4===2){var $4=Math.floor((bounds.minX*this.$2)+this.$1.x);var $5=Math.floor((bounds.minY*this.$2)+this.$1.y);var $6=Math.ceil((bounds.maxX*this.$2)+this.$1.x);var $7=Math.ceil((bounds.maxY*this.$2)+this.$1.y);return tab.$create_RectXY($4,$5,$6-$4,$7-$5);}return null;},transformRect:function(rect){switch(this.$4){case 0:return tab.$create_DoubleRectXY(rect.x,rect.y,rect.w,rect.h);case 1:case 3:return tab.$create_DoubleRectXY((rect.x-this.$1.x)*this.$3,(rect.y-this.$1.y)*this.$3,rect.w*this.$3,rect.h*this.$3);default:return null;}},transformCircle:function(c){switch(this.$4){case 0:return c;case 1:case 3:var $0=(c.center.x-this.$1.x)*this.$3;var $1=(c.center.y-this.$1.y)*this.$3;return tab.$create_Circle(tab.$create_PointF($0,$1),c.radius*this.$3);default:return null;}},transformPolygon:function(listOfPoints){switch(this.$4){case 0:return listOfPoints;case 1:case 3:var $0=[];var $enum1=ss.IEnumerator.getEnumerator(listOfPoints);while($enum1.moveNext()){var $1=$enum1.current;var $2=($1.x-this.$1.x)*this.$3;var $3=($1.y-this.$1.y)*this.$3;$0.add(tab.$create_PointF($2,$3));}return $0;default:return null;}}}
tableau.types.$0=function(){return tab.MiscUtil.lazyInitStaticField(tableau.types,'millisecondsPerDay',function(){
return 24*60*60*1000;});}
tableau.types.javaScriptOLEEpoch=function(){return tab.MiscUtil.lazyInitStaticField(tableau.types,'javascriptOleEpoch',function(){
return Date.UTC(1899,11,30,0,0,0,0);});}
tableau.types.JsDateFromOleDate=function(f){var $0=(f<0)?Math.ceil(f):Math.floor(f);var $1=Math.round(Math.abs(f-$0)*tableau.types.$0())+($0*tableau.types.$0());return $1+tableau.types.javaScriptOLEEpoch();}
tableau.types.OleDateFromJsDate=function(ms){var $0=new Date(ms);var $1=Date.UTC($0.getUTCFullYear(),$0.getUTCMonth(),$0.getUTCDate());var $2=($1-tableau.types.javaScriptOLEEpoch())/tableau.types.$0();var $3=(ms-$1)/tableau.types.$0();return $2+((($2<0)?-1:1)*$3);}
tableau.types.isO=function(field){return field.fieldType==='O'||field.fieldType==='N';}
tableau.types.isMetadata=function(field){return !field.column_class;}
tableau.types.isOm=function(field){return tableau.types.isO(field)&&tableau.types.isMetadata(field);}
tableau.types.getRegionType=function(regionName){switch(regionName){case 'viz':case 'bottomaxis':case 'topaxis':case 'leftaxis':case 'rightaxis':case 'xheader':case 'yheader':return 't';case 'color':case 'shape':case 'size':case 'map':return 'l';case 'filter':return 'f';case 'current-page':return 'p';case 'title':return 'i';case 'text':return 'x';case 'bitmap':return 'b';case 'web':return 'w';case 'paramctrl':return 'a';case 'draw':return 'd';case 'text-block':return 'k';case 'layout-basic':case 'layout-flow':return 'c';default:return null;}}
tableau.types.RegionType=function(){}
tableau.types.FieldTypeTypes=function(){}
tableau.types.QFDomain=function(){}
tableau.types.CFStyle=function(){}
tableau.types.HFStyle=function(){}
tableau.types.CFType=function(){}
tableau.types.QFFixed=function(){}
tableau.types.QFInclude=function(){}
tableau.types.QFInclude.isRange=function(v){switch(v){case 'include-all':case 'include-null':case 'include-non-null':return false;default:return true;}}
tableau.types.DataSpecial.registerClass('tableau.types.DataSpecial');tableau.types.DataType.registerClass('tableau.types.DataType');tableau.types.TableauTypesFieldRole.registerClass('tableau.types.TableauTypesFieldRole');tab.BaseLogAppender.registerClass('tab.BaseLogAppender',null,tab.ILogAppender);tab.ConsoleLogAppender.registerClass('tab.ConsoleLogAppender',tab.BaseLogAppender);tab.ErrorTrace.registerClass('tab.ErrorTrace');tab.StackLocation.registerClass('tab.StackLocation');tab.StackTrace.registerClass('tab.StackTrace');tab.StackTraceAppender.registerClass('tab.StackTraceAppender',tab.BaseLogAppender);tab.Logger.registerClass('tab.Logger',tab.BaseLogger);tab.Log.registerClass('tab.Log');tab.MetricsLogger.registerClass('tab.MetricsLogger');tab.NavigationMetricsCollector.registerClass('tab.NavigationMetricsCollector');tab.WindowAppender.registerClass('tab.WindowAppender',tab.BaseLogAppender);tab.BrowserSupport.registerClass('tab.BrowserSupport');tab.CalendarOptions.registerClass('tab.CalendarOptions');tab.CallOnDispose.registerClass('tab.CallOnDispose',null,ss.IDisposable);tab.CircleUtil.registerClass('tab.CircleUtil');tab.FeatureFlags.registerClass('tab.FeatureFlags');tab.FeatureParamsLookup.registerClass('tab.FeatureParamsLookup');tab.DateUtil.registerClass('tab.DateUtil');tab.DisposableHolder.registerClass('tab.DisposableHolder',null,ss.IDisposable);tab.DomUtil.registerClass('tab.DomUtil');tab.FloatUtil.registerClass('tab.FloatUtil');tableau.format.registerClass('tableau.format');tab.HistoryUtil.registerClass('tab.HistoryUtil');tab.IntegerRange.registerClass('tab.IntegerRange');tab.IntSet.registerClass('tab.IntSet');tab.UintSet.registerClass('tab.UintSet');tab.vqlcore$0.registerClass('tab.vqlcore$0');tab.JsonUtil.registerClass('tab.JsonUtil');tab.MiscUtil.registerClass('tab.MiscUtil');tab.Param.registerClass('tab.Param');tab.PointUtil.registerClass('tab.PointUtil');tab.PointFUtil.registerClass('tab.PointFUtil');tab.RecordCast.registerClass('tab.RecordCast');tab.RectUtil.registerClass('tab.RectUtil');tab.RectXYUtil.registerClass('tab.RectXYUtil');tab.DoubleRectXYUtil.registerClass('tab.DoubleRectXYUtil');tab.RleDecoder.registerClass('tab.RleDecoder');tab.SizeUtil.registerClass('tab.SizeUtil');tab.StringTuple.registerClass('tab.StringTuple');tab.StyleUtil.registerClass('tab.StyleUtil');tab.Transform.registerClass('tab.Transform');tableau.types.RegionType.registerClass('tableau.types.RegionType');tableau.types.FieldTypeTypes.registerClass('tableau.types.FieldTypeTypes');tableau.types.QFDomain.registerClass('tableau.types.QFDomain');tableau.types.CFStyle.registerClass('tableau.types.CFStyle');tableau.types.HFStyle.registerClass('tableau.types.HFStyle');tableau.types.CFType.registerClass('tableau.types.CFType');tableau.types.QFFixed.registerClass('tableau.types.QFFixed');tableau.types.QFInclude.registerClass('tableau.types.QFInclude');tableau.types.DataSpecial.DS_NORMAL=null;tableau.types.DataSpecial.DS_NULL='n';tableau.types.DataSpecial.DS_ALL='a';tableau.types.DataSpecial.DS_WILDCARD='w';tableau.types.DataSpecial.DS_SKIPPED='s';tableau.types.DataSpecial.DS_NOACCESS='p';tableau.types.DataSpecial.DS_RAGGED='r';tableau.types.DataSpecial.DS_ERROR='e';tableau.types.DataSpecial.DS_MISSING='m';tableau.types.DataType.DT_INTEGER='i';tableau.types.DataType.DT_REAL='r';tableau.types.DataType.DT_STRING='s';tableau.types.DataType.DT_TIMESTAMP='t';tableau.types.DataType.DT_BOOLEAN='b';tableau.types.DataType.DT_DATE='d';tableau.types.DataType.DT_UNKNOWN=null;tableau.types.TableauTypesFieldRole.ROLE_DIMENSION='d';tableau.types.TableauTypesFieldRole.ROLE_MEASURE='m';tableau.types.TableauTypesFieldRole.ROLE_UNKNOWN=null;tab.ConsoleLogAppender.$1=null;tab.ErrorTrace.$1=false;tab.ErrorTrace.$2=true;tab.ErrorTrace.$3=true;tab.ErrorTrace.$4=3;tab.ErrorTrace.$5=false;tab.ErrorTrace.$6=null;tab.ErrorTrace.$7=null;tab.ErrorTrace.$8={};tab.ErrorTrace.$9=[];tab.ErrorTrace.$A=false;tab.ErrorTrace.$B=null;tab.StackTraceAppender.$1=null;tab.Logger.global=tab.Logger.getLoggerWithName('global');tab.Logger.loggerLevelNames=[];(function(){tab.Logger.loggerLevelNames[0]='all';tab.Logger.loggerLevelNames[1]='debug';tab.Logger.loggerLevelNames[2]='info';tab.Logger.loggerLevelNames[3]='warn';tab.Logger.loggerLevelNames[4]='error';tab.Logger.loggerLevelNames[5]='off';})();
tab.MetricsLogger.$6=null;tab.MetricsLogger.$7=null;tab.MetricsLogger.$8=null;(function(){tab.MetricsLogger.$6={};tab.MetricsLogger.$6['d']='DESC';tab.MetricsLogger.$6['t']='TIME';tab.MetricsLogger.$6['id']='ID';tab.MetricsLogger.$6['sid']='SESSION_ID';tab.MetricsLogger.$6['e']='ELAPSED';tab.MetricsLogger.$6['v']='VALS';tab.MetricsLogger.$6['wb']='WORKBOOK';tab.MetricsLogger.$6['s']='SHEET_NAME';tab.MetricsLogger.$6['p']='PROPS';tab.MetricsLogger.$7={};tab.MetricsLogger.$7['nav']='Navigation';tab.MetricsLogger.$7['wps']='ProfileStart';tab.MetricsLogger.$7['wp']='ProfileEnd';tab.MetricsLogger.$7['gen']='Unknown';tab.MetricsLogger.$7['init']='SessionInit';})();
tab.NavigationMetricsCollector.$0=['navigationStart','unloadEventStart','unloadEventEnd','redirectStart','redirectEnd','fetchStart','domainLookupStart','domainLookupEnd','connectStart','connectEnd','secureConnectionStart','requestStart','responseStart','responseEnd','domLoading','domInteractive','domContentLoadedEventStart','domContentLoadedEventEnd','domComplete','loadEventStart','loadEventEnd'];tab.NavigationMetricsCollector.$1=null;(function(){if(ss.isValue(window.self.addEventListener)){window.addEventListener('load',function(){
_.defer(tab.NavigationMetricsCollector.collectMetrics);},false);}else if(ss.isValue(window.self.attachEvent)){window.attachEvent('load',function(){
_.defer(tab.NavigationMetricsCollector.collectMetrics);});}})();
tab.WindowAppender.$1=null;tab.BrowserSupport.$0=false;tab.BrowserSupport.$1='ontouchend' in document;tab.BrowserSupport.$2=false;tab.BrowserSupport.$3=false;tab.BrowserSupport.$4=false;tab.BrowserSupport.$5=false;tab.BrowserSupport.$6=null;tab.BrowserSupport.$7=null;tab.BrowserSupport.$8=false;tab.BrowserSupport.$9=false;tab.BrowserSupport.$A=false;tab.BrowserSupport.$B=false;tab.BrowserSupport.$C=false;tab.BrowserSupport.$D=false;tab.BrowserSupport.$E=false;tab.BrowserSupport.$F=false;tab.BrowserSupport.$10=false;tab.BrowserSupport.$11=false;tab.BrowserSupport.$12=false;tab.BrowserSupport.$13=false;tab.BrowserSupport.$14=false;tab.BrowserSupport.$15=false;tab.BrowserSupport.$16=false;tab.BrowserSupport.$17=1;tab.BrowserSupport.$18=1;tab.BrowserSupport.$19=false;tab.BrowserSupport.$1A=false;tab.BrowserSupport.$1B=false;tab.BrowserSupport.$1C=false;tab.BrowserSupport.$1D=false;(function(){$(function(){
var $1_0=document.body;var $1_1=document.createElement('div');$1_0.appendChild($1_1);tab.BrowserSupport.$0=('onselectstart' in $1_1);$1_0.removeChild($1_1).style.display='none';tab.BrowserSupport.$3=('postMessage' in window);tab.BrowserSupport.$4=(typeof(window.history.pushState)==='function')&&(typeof(window.history.replaceState)==='function');tab.BrowserSupport.$1E();tab.BrowserSupport.$20();tab.BrowserSupport.$21();tab.BrowserSupport.$23();tab.BrowserSupport.$24();tab.BrowserSupport.$1F();tab.BrowserSupport.$25();tab.BrowserSupport.$26();tab.BrowserSupport.$29();tab.BrowserSupport.$27();tab.BrowserSupport.$28();});})();
tab.FeatureParamsLookup.$0=null;tab.FeatureParamsLookup.$1=null;tab.FeatureParamsLookup.$2=null;tab.FeatureParamsLookup.$3=null;tab.FeatureParamsLookup.$4=null;tab.FeatureParamsLookup.$5=null;tab.FeatureParamsLookup.$6=null;tab.FeatureParamsLookup.$7=null;tab.FeatureParamsLookup.$8=null;tab.FeatureParamsLookup.$9=null;(function(){tab.FeatureParamsLookup.$0=tab.Logger.lazyGetLogger(tab.FeatureParamsLookup);tab.FeatureParamsLookup.$1=[];tab.FeatureParamsLookup.$2=[];tab.FeatureParamsLookup.$3=[];tab.FeatureParamsLookup.$4=[];tab.FeatureParamsLookup.$5={};tab.FeatureParamsLookup.$6={};tab.FeatureParamsLookup.$7={};tab.FeatureParamsLookup.$8={};tab.FeatureParamsLookup.$9={};tab.FeatureParamsLookup.$A(':transparentbackground',3);tab.FeatureParamsLookup.$A(':newfilter',4);tab.FeatureParamsLookup.$A(':fieldconversion',5);tab.FeatureParamsLookup.$A(':qfformatting',6);tab.FeatureParamsLookup.$A(':responsive',7,true);tab.FeatureParamsLookup.$A(':newtoolbar',9);tab.FeatureParamsLookup.$A(':lassoselection',13,false);tab.FeatureParamsLookup.$A(':radialselection',14,false);tab.FeatureParamsLookup.$A(':newselectiontools',16,true);tab.FeatureParamsLookup.$A(':selectiontoolsmobile',23,true);tab.FeatureParamsLookup.$A(':newbrowsertoolbar',17);tab.FeatureParamsLookup.$A(':calcdialogfunclist',20,true);tab.FeatureParamsLookup.$A(':formattedflipboardnav',24,true);tab.FeatureParamsLookup.$A(':collapsesidepane',25,true);tab.FeatureParamsLookup.$A(':mapssearchleftside',26,false);tab.FeatureParamsLookup.$A(':newcaptiontoolbar',27,true);tab.FeatureParamsLookup.$A(':mapssearchdebugalwaysshow',28,false);tab.FeatureParamsLookup.$A(':useleafletforgeosearch',19,false);tab.FeatureParamsLookup.$A(':aopaneui',29,true);tab.FeatureParamsLookup.$A(':headersfeedback',30,true);tab.FeatureParamsLookup.$A(':aodragtoviz',31,false);tab.FeatureParamsLookup.$C(':buttondelay',11);tab.FeatureParamsLookup.$C(':hoverdelay',12);tab.FeatureParamsLookup.$C(':maxtooltipwhitespace',18);tab.FeatureParamsLookup.$E();})();
tab.DateUtil.oneSecond=new Date(2008,11,21,1,1,2).getTime()-new Date(2008,11,21,1,1,1).getTime();tab.DateUtil.oneMinute=new Date(2008,11,21,1,2).getTime()-new Date(2008,11,21,1,1).getTime();tab.DateUtil.oneHour=new Date(2008,11,21,2).getTime()-new Date(2008,11,21,1).getTime();tab.DateUtil.oneDay=new Date(2008,11,21).getTime()-new Date(2008,11,20).getTime();tab.DateUtil.oneWeek=new Date(2008,11,21).getTime()-new Date(2008,11,14).getTime();tab.DateUtil.$0=(1000*60)*(60*24);tab.FloatUtil.epsilon=Math.pow(2,-23);tab.FloatUtil.$0=1+tab.FloatUtil.epsilon;tab.FloatUtil.$1=tab.FloatUtil.$0;tab.FloatUtil.$2=1/tab.FloatUtil.$0;tableau.format.specialManyValues='%many-values%';tableau.format.specialNull='%null%';tableau.format.specialError='%error%';tableau.format.specialRagged='%ragged%';tableau.format.specialSkipped='%skipped%';tableau.format.specialMissing='%missing%';tableau.format.specialAll='%all%';tableau.format.specialNoAccess='%no-access%';tableau.format.specialWildcard='%wildcard%';tableau.format.millisPerDay=86400000;tableau.format.$B=tab.$create_FormattingInfo();tableau.format.$C=tab.$create_FormattingInfo();tableau.format.$D=tab.$create_FormattingInfo();tableau.format.$E=new RegExp('(\\\\|\\^|\\$|\\*|\\+|\\?|\\.|\\:|\\,|\\(|\\)|\\[|\\]|\\{|\\}|\\|)','g');tableau.format.$F=new RegExp('^([yYmMdD\\W]+)\\s+([hnst\\W]+)$');tableau.format.$10=new RegExp('(\\\\[:.]s+)');tableau.format.tt=new RegExp('(t+)','g');tableau.format.$11=new RegExp('([yYmMdDhnswq]+)','g');tableau.format.$12=new RegExp('\\(\\\\d\\+\\)(?:\\(\\?\\:)?\\s+\\(\\\\d\\+\\)','g');tableau.format.$13=new RegExp('\\s','g');tableau.format.$14=new RegExp('(^|d)([^h]*)(h|$)','gi');tableau.format.$15=new RegExp('h([^d]*)(d|$)','gi');tableau.format.am=new RegExp('^(a|a\\.?m\\.?|\u33c2|\u03c0\\.?\u00b5\\.?|\u5348\u524d)$','i');tableau.format.pm=new RegExp('^(p|p\\.?m\\.?|\u33d8|\u00b5\\.?\u00b5\\.?|\u5348\u5f8c)$','i');tableau.format.$16={yyyyy:'yyyyy',yyyy:'yyyy',yyy:'yyyy',yy:'yy',y:'yyyy',L:'m',LL:'mm',LLL:'mmm',LLLL:'mmmm'};(function(){tableau.format.$B.format='yyyy-mm-dd';tableau.format.$B.timeFormat='hh:nn';tableau.format.$C.format='yyyy-mm-ddThh:nn';tableau.format.$D.format='hh:nn';})();
(function(){$.DeferredData = $.Deferred;})();
tab.MiscUtil.$0=['?','#'];tab.Param.suppressAlerts=false;tab.StyleUtil.$1=new RegExp('-?[_a-zA-Z]+[_a-zA-Z0-9-]*');tab.StyleUtil.$2=null;tab.StyleUtil.$3=null;tab.Transform.$0=null;(function(){tab.Transform.$0=new tab.Transform(0,0,1,0);})();
(function(){var $0={};$0['ExportImage']={title:tab.Strings.ExportImageDialogTitle,mimeType:'image/png',message:tab.Strings.ExportImageDialogMessage};$0['ExportData']={title:tab.Strings.ExportDataDialogTitle,mimeType:'text/csv',message:tab.Strings.ExportDataDialogMessage};$0['ExportCrosstab']={title:tab.Strings.ExportCrosstabDialogTitle,message:tab.Strings.ExportCrosstabDialogMessage};$0['PrintPDF']={title:tab.Strings.PrintPdfDialogTitle,mimeType:'application/pdf',message:tab.Strings.PrintPdfDialogMessage,noping:true};tab.MiscUtil.lazyInitStaticField(tableau.types,'ExportDialogType',function(){
return $0;});})();
tableau.types.RegionType.table='t';tableau.types.RegionType.legend='l';tableau.types.RegionType.filter='f';tableau.types.RegionType.currentPage='p';tableau.types.RegionType.title='i';tableau.types.RegionType.text='x';tableau.types.RegionType.bitmap='b';tableau.types.RegionType.web='w';tableau.types.RegionType.draw='d';tableau.types.RegionType.textBlock='k';tableau.types.RegionType.layoutContainer='c';tableau.types.RegionType.parameter='a';tableau.types.FieldTypeTypes.FT_QUANTITATIVE='Q';tableau.types.FieldTypeTypes.FT_ORDINAL='O';tableau.types.FieldTypeTypes.FT_NOMINAL='N';tableau.types.FieldTypeTypes.FT_UNKNOWN=null;tableau.types.QFDomain.QFD_ALL='all';tableau.types.QFDomain.QFD_CONTEXT='context';tableau.types.QFDomain.QFD_RELEVANT='relevant';tableau.types.CFStyle.CFS_ALL='all';tableau.types.CFStyle.CFS_SINGLE='single-select';tableau.types.CFStyle.CFS_MULTIPLE='multi-select';tableau.types.HFStyle.HFS_SINGLE='single-select';tableau.types.HFStyle.HFS_MULTIPLE='multi-select';tableau.types.CFType.CFT_INCLUSIVE='include';tableau.types.CFType.CFT_EXCLUSIVE='exclude';tableau.types.QFFixed.QFF_FIXED_START='start';tableau.types.QFFixed.QFF_FIXED_END='end';tableau.types.QFInclude.QFI_ALL='include-all';tableau.types.QFInclude.QFI_NON_NULL='include-non-null';tableau.types.QFInclude.QFI_NULL_ONLY='include-null';tableau.types.QFInclude.QFI_RANGE='include-range';tableau.types.QFInclude.QFI_RANGE_OR_NULL='include-range-or-null';}());// This script was generated using Script# v0.7.4.0
// vqldomain.js
(function(){
Type.registerNamespace('tab');tab.TabResources=function(){}
tab.TabResources.getResourceName=function(filePath){return filePath.substring(filePath.lastIndexOf('/')+1,filePath.lastIndexOf('.'));}
tab.TabResources.lookupResourceAlias=function(id){return (Object.keyExists(tab.TabResources.$0,id))?tab.TabResources.$0[id]:'';}
tab.TabResources.lookupFullResourceAlias=function(id){var $0=(id).split('/');var $1=($0.length>0)?$0[$0.length-1]:id;return tab.TabResources.lookupResourceAlias($1);}
tab.TabResources.lookupTabRes=function(id){return tab.TabResources.lookupResourceAlias(id);}
tab.TabResources.lookupDefaultTabRes=function(id){return (':/'+tsConfig.locale+'/'+tab.TabResources.lookupResourceAlias(id));}
tab.VizUriType=function(){};tab.VizUriType.prototype = {invalid:0,viewing:1,authoring:2,authorNewWorkbook:3,admin:4,sharedView:5}
tab.VizUriType.registerEnum('tab.VizUriType',false);tab.VizUriModel=function(location){this.$3=0;if(!Object.getKeyCount(tab.VizUriModel.$D)){tab.VizUriModel.$15();}if(ss.isValue(location)){this.$16(location);}}
tab.VizUriModel.createForCurrentWindowLocation=function(window){if(tab.MiscUtil.isNullOrEmpty(window)){window=tabBootstrap.Utility.get_locationWindow();}var $0=new tab.VizUriModel(tab.WindowHelper.getLocation(window));return $0;}
tab.VizUriModel.createForViewingSheet=function(repositoryUrl){var $0=tab.VizUriModel.$1D();$0.$3=1;var $1=new tab.RepoPathObject(repositoryUrl);$0.$4=$1.get_workbookId();$0.$5=$1.get_sheetId();$0.$8=$1.get_customizedView();$0.$6='';return $0;}
tab.VizUriModel.createForCurrentWindowLocationAndVizState=function(repoUrl,currentSheetName){var $0=tab.VizUriModel.createForCurrentWindowLocation();var $1=new tab.RepoPathObject(repoUrl);$0.$4=$1.get_workbookId();$0.$5=$1.get_sheetId();$0.$8=$1.get_customizedView();$0.$6=currentSheetName;return $0;}
tab.VizUriModel.createForAuthoringUnpublishedSheet=function(repoUrl,authoringSheetName){var $0=tab.VizUriModel.createForAuthoringPublishedSheet(repoUrl);$0.$6=authoringSheetName;return $0;}
tab.VizUriModel.createForAuthoringPublishedSheet=function(repoUrl){var $0=tab.VizUriModel.$1D();$0.$3=2;var $1=new tab.RepoPathObject(repoUrl);$0.$4=$1.get_workbookId();$0.$5=$1.get_sheetId();$0.$6='';return $0;}
tab.VizUriModel.createInvalid=function(){var $0=new tab.VizUriModel();$0.$3=0;return $0;}
tab.VizUriModel.$15=function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(tab.VizUriModel.$B));while($enum1.moveNext()){var $0=$enum1.current;tab.VizUriModel.$D[tab.VizUriModel.$B[$0]]=$0;}}
tab.VizUriModel.$1D=function($p0){if(tab.MiscUtil.isNullOrEmpty($p0)){$p0=tabBootstrap.Utility.get_locationWindow();}var $0=tab.WindowHelper.getLocation($p0);var $1=new tab.VizUriModel();$1.$7=tab.VizUriModel.$1E($0);$1.$9=$0.hash;$1.$A=tab.BrowserSupport.getOrigin($0);return $1;}
tab.VizUriModel.$1E=function($p0){var $0=tab.MiscUtil.getUriQueryParameters($p0.href);var $enum1=ss.IEnumerator.getEnumerator(tab.VizUriModel.$C);while($enum1.moveNext()){var $1=$enum1.current;if(Object.keyExists($0,$1)){delete $0[$1];}}return $0;}
tab.VizUriModel.encodeUserName=function(username){var $0=tab.MiscUtil.percentEncode(username.replaceAll('/','%2F'),tab.VizUriModel.$E);return $0.replaceAll('%40','@');}
tab.VizUriModel.prototype={explicitNotGuest:false,$4:'',$5:'',$6:'',$7:null,$8:'',$9:'',$A:'',get_isViewingUri:function(){return this.$3===1;},get_isAuthoringUri:function(){return this.$3===2;},get_isAuthorNewWorkbookUri:function(){return this.$3===3;},get_isInvalid:function(){return !this.$3;},get_isAdminUri:function(){return this.$3===4;},get_isSharedViewUri:function(){return this.$3===5;},get_absoluteUri:function(){return this.$11();},get_uri:function(){return this.$12();},get_path:function(){return this.$13();},get_queryParams:function(){return this.$7;},get_retry:function(){return this.$F(':retry');},set_retry:function(value){this.$10(':retry',value);return value;},get_originalView:function(){return this.$F(':original_view');},set_originalView:function(value){this.$10(':original_view',value);if(value){this.$8='';}return value;},get_showSaveAs:function(){return this.$F(':showSaveAs');},set_showSaveAs:function(value){this.$10(':showSaveAs',value);return value;},$F:function($p0){return Object.keyExists(this.$7,$p0)&&tab.MiscUtil.toBoolean(this.$7[$p0][0],false);},$10:function($p0,$p1){if($p1){this.$7[$p0]=[];this.$7[$p0].add('yes');}else{delete this.$7[$p0];}},removeQueryParam:function(queryParam){delete this.$7[queryParam];return this;},removeAllQueryParams:function(){Object.clearKeys(this.$7);return this;},fullPageLoad:function(window){window=window||tabBootstrap.Utility.get_locationWindow();this.setWindowLocation();window.setTimeout(function(){
tab.WindowHelper.reload(window,true);},300);},replaceState:function(window){if(tab.MiscUtil.isNullOrEmpty(window)){window=tabBootstrap.Utility.get_locationWindow();}tab.HistoryUtil.replaceState(window,{},'',this.get_uri());},setWindowLocation:function(window){if(tab.MiscUtil.isNullOrEmpty(window)){window=tabBootstrap.Utility.get_locationWindow();}tab.WindowHelper.setLocationHref(window,this.get_uri());},setTopWindowLocation:function(){this.setWindowLocation(window.top);},matchesCurrentWindowLocationUri:function(window){return this.get_uri()===tab.VizUriModel.createForCurrentWindowLocation(window).get_uri();},matchesCurrentWindowLocationAbsoluteUri:function(){return this.get_absoluteUri()===tab.VizUriModel.createForCurrentWindowLocation().get_absoluteUri();},matchesCurrentWindowLocationPath:function(window){return this.get_path()===tab.VizUriModel.createForCurrentWindowLocation(window).get_path();},removeHash:function(){this.$9='';},$11:function(){var $0=this.$12();var $1=this.$A;if(!$0.startsWith('/')){$1+='/';}$1+=$0;return $1;},$12:function(){var $0=new ss.StringBuilder();$0.append(this.$13());var $1=tab.MiscUtil.replaceUriQueryParameters('',this.$7);if(!tab.MiscUtil.isNullOrEmpty($1)){$0.append($1);}$0.append(this.$14());return $0.toString();},$13:function(){var $0=new ss.StringBuilder();if(!tab.MiscUtil.isNullOrEmpty(tsConfig.site_root)&&!this.get_isAdminUri()){$0.append(tsConfig.site_root);}$0.append('/');$0.append(this.$1B(this.$3));if(this.$3===2){$0.append('/');$0.append(this.$4);$0.append('/');$0.append(this.$5);if(!tab.MiscUtil.isNullOrEmpty(this.$6)){$0.append('/');$0.append(encodeURIComponent(this.$6));}}else if(this.$3===1){$0.append('/');$0.append(this.$4);$0.append('/');$0.append(this.$5);if(!tab.MiscUtil.isNullOrEmpty(this.$8)){$0.append('/');$0.append(this.$8);}}else if(this.$3===4){$0.append('/');$0.append(this.$4);$0.append('/');$0.append(this.$5);}else if(this.$3===3){$0.append('/');$0.append(this.$4);}else if(this.$3===5){$0.append('/');$0.append(tsConfig.guid);}return $0.toString();},$14:function(){if(this.explicitNotGuest){return '#guest=n';}return this.$9;},$16:function($p0){var $0=_.keys(tab.VizUriModel.$B);var $1=tab.UriPathStripper.getModuleFromPath($p0.pathname,$0);this.$3=this.$1C($1);var $2=tab.UriPathStripper.getMeatFromPath($p0.pathname,$0);if(this.$3===1){this.$17($2);}else if(this.$3===2){this.$18($2);}else if(this.$3===3){this.$1A($2);}else if(this.$3===4){this.$19($2);}this.$7=tab.VizUriModel.$1E($p0);this.$9=$p0.hash;this.$A=tab.BrowserSupport.getOrigin($p0);},$17:function($p0){var $0=$p0.split('/');this.$4=$0[0];this.$5=$0[1];if($0.length>2){if($0.length===3){this.$8=$0[2];}this.$8=$0[2]+'/'+$0[3];}},$18:function($p0){var $0=$p0.split('/');this.$4=$0[0];this.$5=$0[1];if($0.length>2){this.$6=decodeURIComponent($0[2]);}},$19:function($p0){var $0=$p0.split('/');this.$4=$0[0];this.$5=$0[1];},$1A:function($p0){this.$4=$p0;},$1B:function($p0){return tab.VizUriModel.$D[$p0];},$1C:function($p0){return tab.VizUriModel.$B[$p0];},updateForViewingSheet:function(repoUrl){if(!this.get_isViewingUri()&&!this.get_isAuthoringUri()&&!this.get_isAdminUri()&&!this.get_isSharedViewUri()){throw new Error('Cannot call UpdateForViewingNewTab() from a VizUriModel that does not have VizUriType Viewing');}var $0=new tab.RepoPathObject(repoUrl);this.$4=$0.get_workbookId();this.$5=$0.get_sheetId();this.$6='';return this;},updateForCustomizedView:function(cv){if(!this.get_isViewingUri()){throw new Error('Cannot call UpdateForCustomizedView() from a VizUriModel that does not have VizUriType Viewing');}this.$5=cv.startViewId||this.$5;this.$8=String.format('{0}/{1}',tab.VizUriModel.encodeUserName(cv.owner.username),cv.urlId);this.$6='';this.set_originalView(false);return this;}}
tab.RepoPathObject=function(repoPath){var $0=repoPath.split('/');this.$0=$0[0].replace(new RegExp('^ds:'),'');this.$1=$0[1];if($0.length>2){if($0.length===3){throw new Error("new RepoPathObject() encountered repo path'"+repoPath+"' with a badly formed customized view");}this.$2=$0[2]+'/'+$0[3];}else{this.$2='';}}
tab.RepoPathObject.prototype={$0:null,$1:null,$2:null,get_workbookId:function(){return this.$0;},get_sheetId:function(){return this.$1;},get_customizedView:function(){return this.$2;}}
tab.UriPathStripper=function(){}
tab.UriPathStripper.getModuleFromPath=function(path,legalModules){var $0=tsConfig.site_root||'';var $1=path.indexOf($0,0);var $2;if($1===-1){$2=path.substr(1);}else{var $3=$1+$0.length;$2=path.substr($3+1);}var $enum1=ss.IEnumerator.getEnumerator(legalModules);while($enum1.moveNext()){var $4=$enum1.current;if($2.startsWith($4+'/')){return $4;}}return '';}
tab.UriPathStripper.getMeatFromPath=function(path,legalModules){var $0=tab.UriPathStripper.getModuleFromPath(path,legalModules);var $1=path.indexOf($0,0);return path.substr($1+$0.length+1);}
tab.$create_CommandModel=function(){return {};}
tab.EventName=function(){};tab.EventName.prototype = {onTabSelect:'onTabSelect',onDoLaunchAuthoring:'onDoLaunchAuthoring',newGuid:'newGuid',newLayoutId:'newLayoutId',activeViewChanged:'activeViewChanged',invalidate:'invalidate',hoverChanged:'hoverChanged',modifiedSheetsChanged:'modifiedSheetsChanged',workbookModifiedChanged:'workbookModifiedChanged',globalFirstTouch:'globalFirstTouch',globalPress:'globalPress',globalPotentialTap:'globalPotentialTap',globalLastTouch:'globalLastTouch',globalRightClick:'globalRightClick',globalDragEnd:'globalDragEnd',stateChanged:'stateChanged',layoutUpdated:'layoutUpdated',refreshLayoutModel:'refreshLayoutModel',sheetDataChanged:'sheetDataChanged',refreshSheetInfo:'refreshSheetInfo',refreshFilterModel:'refreshFilterModel',viewChanged:'viewChanged',refreshVisualModel:'refreshVisualModel',refreshLegacyLegendImages:'refreshLegacyLegendImages',refreshMenuModel:'refreshMenuModel',selectionChanged:'selectionChanged',onBootstrapSuccess:'onBootstrapSuccess',maxEvent:'maxEvent',openActionUrl:'openActionUrl',modifierKeysChanged:'modifierKeysChanged',fieldSelectionChanged:'fieldSelectionChanged'}
tab.EventName.registerEnum('tab.EventName',false);tab.PresModelPathItemType=function(){};tab.PresModelPathItemType.prototype = {simple:0,array:1}
tab.PresModelPathItemType.registerEnum('tab.PresModelPathItemType',false);tab.IContinuousRangeModel=function(){};tab.IContinuousRangeModel.registerInterface('tab.IContinuousRangeModel');tab.FieldInstanceType=function(){};tab.FieldInstanceType.prototype = {column:'column',drillPath:'drillPath',cubeDimension:'cubeDimension',group:'group',cubeHierarchy:'cubeHierarchy',relationalTable:'relationalTable',cubeFolder:'cubeFolder',folder:'folder',multiple:'multiple'}
tab.FieldInstanceType.registerEnum('tab.FieldInstanceType',false);tab.$create_Granularity=function(){return {};}
tab.$create_UbertipModel=function(){return {};}
tab.IRemoteCommandHandler=function(){};tab.IRemoteCommandHandler.registerInterface('tab.IRemoteCommandHandler');tab.CommandInterceptorResult=function(){};tab.CommandInterceptorResult.prototype = {proceed:0,stop:1}
tab.CommandInterceptorResult.registerEnum('tab.CommandInterceptorResult',false);tab.ChangeType=function(){};tab.ChangeType.prototype = {single:0,range:1}
tab.ChangeType.registerEnum('tab.ChangeType',false);tab.ActionType=function(){};tab.ActionType.prototype = {highlight:'highlight',filter:'filter',url:'url'}
tab.ActionType.registerEnum('tab.ActionType',false);tab.IExportImageHelper=function(){};tab.IExportImageHelper.registerInterface('tab.IExportImageHelper');tab.IExportPdfHelper=function(){};tab.IExportPdfHelper.registerInterface('tab.IExportPdfHelper');tab.$create_XhrMultipartData=function(){return {};}
tab.ApiClientCommands=function(){}
tab.ApiClientCommands.doApiCommand=function(c,onSuccess,onError){tab.CommandController.SendCommand(tab.vqldomain$A.$5(c,'immediately',onSuccess,onError));}
tab.ToolbarClientCommands=function(){}
tab.ToolbarClientCommands.revert=function(){var $0=tab.CommandUtils.newSrvCommand('revert-workbook');var $1=new tab.ClientCommand('immediately',function($p1_0){
var $1_0=tab.ModelUtils.findContentDashboard();var $1_1=$p1_0.makeMutablePresModel($1_0);$1_1.anp=new Array(0);},$0);tab.CommandController.SendCommand($1);}
tab.StoryClientCommands=function(){}
tab.StoryClientCommands.get_$0=function(){return tab.Logger.lazyGetLogger(tab.StoryClientCommands);}
tab.StoryClientCommands.setActiveStoryPoint=function(newActiveStoryPointIndex,nav){var $0=$.Deferred();if(!tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard()||nav.get_currentPointIndex()===newActiveStoryPointIndex){$0.resolve();return $0.promise();}var $1=new tab.ClientCommand('none',function($p1_0){
tab.StoryClientCommands.$3(newActiveStoryPointIndex,nav,$p1_0);},tab.StoryClientCommands.$4(nav.get_storyPoints()[newActiveStoryPointIndex].abq),tab.CommandController.$1A($0),tab.CommandController.$1B($0));tab.CommandController.SendCommand($1);return $0.promise();}
tab.StoryClientCommands.nextStoryPoint=function(nav){var $0=$.Deferred();if(!tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard()){$0.reject("The workbook's current sheet is not a story");return $0.promise();}var $1=new tab.ClientCommand('none',function($p1_0){
tab.StoryClientCommands.$3(nav.get_currentPointIndex()+1,nav,$p1_0);},tab.StoryClientCommands.$5(),tab.CommandController.$1A($0),tab.CommandController.$1B($0));tab.CommandController.SendCommand($1);return $0.promise();}
tab.StoryClientCommands.previousStoryPoint=function(nav){var $0=$.Deferred();if(ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_workbook().get_storyboard())){$0.reject("The workbook's current sheet is not a story");return $0.promise();}var $1=new tab.ClientCommand('none',function($p1_0){
tab.StoryClientCommands.$3(nav.get_currentPointIndex()-1,nav,$p1_0);},tab.StoryClientCommands.$6(),tab.CommandController.$1A($0),tab.CommandController.$1B($0));tab.CommandController.SendCommand($1);return $0.promise();}
tab.StoryClientCommands.revertStoryPoint=function(sheetPath,storyPointId){var $0=$.Deferred();var $1=new tab.ClientCommand('none',function($p1_0){
tab.StoryClientCommands.$1();},tab.StoryClientCommands.$2(sheetPath,storyPointId),tab.CommandController.$1A($0),tab.CommandController.$1B($0));tab.CommandController.SendCommand($1);return $0.promise();}
tab.StoryClientCommands.$1=function(){tab.StoryClientCommands.$8();}
tab.StoryClientCommands.$2=function($p0,$p1){var $0=tab.CommandUtils.newDocCommand('revert-story-point');$0.commandParams={};tab.CommandUtils.addStoryPointToCommand($0.commandParams,$p0);$0.commandParams['abq']=$p1.toString();return $0;}
tab.StoryClientCommands.$3=function($p0,$p1,$p2){if(ss.isValue($p1)){var $0=$p2.makeMutablePresModel($p1);$0.xs=$p0;tab.StoryClientCommands.$8();}}
tab.StoryClientCommands.$4=function($p0){var $0=tab.StoryClientCommands.$7('set-active-story-point');$0.commandParams['abq']=$p0.toString();$0.commandParams['g9']='false';$0.commandParams['ha']='true';return $0;}
tab.StoryClientCommands.$5=function(){var $0=tab.StoryClientCommands.$7('next-story-point');$0.commandParams['g9']='false';$0.commandParams['ha']='true';return $0;}
tab.StoryClientCommands.$6=function(){var $0=tab.StoryClientCommands.$7('previous-story-point');$0.commandParams['g9']='false';$0.commandParams['ha']='true';return $0;}
tab.StoryClientCommands.$7=function($p0){var $0=tab.CommandUtils.newDocCommand($p0);var $1=tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_flipboard();var $2={};$2['ll']=tsConfig.current_sheet_name;$2['aa9']=$1.get_zoneId();$0.commandParams=$2;return $0;}
tab.StoryClientCommands.$8=function(){var $0=tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_flipboard();if(ss.isValue($0)){$0.invalidated();}}
tab.UberTipClientCommands=function(){}
tab.UberTipClientCommands.get_$0=function(){return tab.MiscUtil.lazyInitStaticField(tab.UberTipClientCommands,'commandPermissions',function(){
return tab.PermissionManager.buildCommandPermission();});}
tab.UberTipClientCommands.executeUbertipAction=function(action,objectIds,visualModel){var $0=new tab.vqldomain$9(function($p1_0){
tab.ActionUtils.executeAction(action,objectIds,visualModel,$p1_0);});tab.CommandController.SendCommand($0);}
tab.UberTipClientCommands.executeUbertipCommand=function(command){switch(command.commandType){case 1:tab.SelectionClientCommands.clearAllSelections(tab.ModelUtils.findActiveOrDefaultVisual().get_visualId());break;case 2:case 10:var $0=tab.UberTipClientCommands.$4(command);tab.ServerCommands.executeServerCommand($0,'immediately');break;case 4:case 11:case 12:case 13:case 15:case 17:case 18:tab.ServerCommands.executeServerCommand(command.command,'immediately');break;case 21:tab.ServerCommands.executeServerCommand(command.command,'immediately',tab.CommandUtils.createCommandRedirectSuccessHandler(null),null);break;case 6:case 9:case 7:default:return;}}
tab.UberTipClientCommands.localAndRemoteUberTipCommand=function(vizRegion,visualId,selRect,tupleId,actionActivationMethod,localInfo,localCallback,remoteCallback,tooltipFailureCallback){var $0=tab.UberTipClientCommands.$1(vizRegion,visualId,selRect,actionActivationMethod,localInfo,localCallback,remoteCallback,tooltipFailureCallback,tupleId);tab.CommandController.SendCommand($0);}
tab.UberTipClientCommands.$1=function($p0,$p1,$p2,$p3,$p4,$p5,$p6,$p7,$p8){var $0=new tab.vqldomain$8(function($p1_0){
if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return;}var $1_0=tab.UbertipSerializer.createLocalUberTipModel(tab.ModelUtils.getVisualModelFromVisualId($p1),$p4,tsConfig.is_authoring);$1_0.isUpdate=false;if(ss.isValue($1_0)){tab.PermissionManager.filterCommands($1_0.commands,tab.UberTipClientCommands.get_$0());}$p5($1_0);if($p3==='on-hover'){tab.ActionUtils.executeActions($p1.st,$p3,$p4.get_interactedTupleIds(),$p1_0);}},tab.UberTipClientCommands.$2($p0,$p1,$p2,$p8),tab.UberTipClientCommands.$3(true,$p6),$p7);return $0;}
tab.UberTipClientCommands.localOnlyUbertipCommand=function(visualId,localInfo,callback,actionActivationMethod){var $0=tab.UberTipClientCommands.buildLocalOnlyUbertipCommand(visualId,localInfo,callback,actionActivationMethod);$0.set_commandName('render-tooltip-server');tab.CommandController.SendCommand($0);}
tab.UberTipClientCommands.buildLocalOnlyUbertipCommand=function(visualId,localInfo,callback,actionActivationMethod){var $0=new tab.vqldomain$8(function($p1_0){
var $1_0=tab.UbertipSerializer.createLocalUberTipModel(tab.ModelUtils.getVisualModelFromVisualId(visualId),localInfo,tsConfig.is_authoring);$1_0.isUpdate=false;if(ss.isValue($1_0)){tab.PermissionManager.filterCommands($1_0.commands,tab.UberTipClientCommands.get_$0());}callback($1_0);if(actionActivationMethod==='on-hover'){tab.ActionUtils.executeActions(visualId.st,actionActivationMethod,localInfo.get_interactedTupleIds(),$p1_0);}},null,null,null);return $0;}
tab.UberTipClientCommands.remoteOnlyUbertipCommand=function(vizRegion,visualId,regionSelRect,callback,tooltipFailureCallback,tupleId){var $0=tab.UberTipClientCommands.buildRemoteOnlyUberTipCommand(vizRegion,visualId,regionSelRect,callback,tooltipFailureCallback,tupleId);tab.CommandController.SendCommand($0);}
tab.UberTipClientCommands.buildRemoteOnlyUberTipCommand=function(vizRegion,visualId,regionSelRect,callback,tooltipFailureCallback,tupleId){var $0=new tab.vqldomain$8(null,tab.UberTipClientCommands.$2(vizRegion,visualId,regionSelRect,tupleId),tab.UberTipClientCommands.$3(false,callback),tooltipFailureCallback);return $0;}
tab.UberTipClientCommands.$2=function($p0,$p1,$p2,$p3){var $0={};$0.commandNamespace='tabsrv';$0.commandName='render-tooltip-server';var $1={};tab.CommandUtils.addVisualIdToCommand($1,$p1);if(ss.isValue($p3)){$1['acf']=[$p3];}var $2={};var $3=tab.VizRegionRectWrapper.create($2);$3.set_r($p0);$3.set_x(Math.round($p2.x));$3.set_y(Math.round($p2.y));$3.set_w(Math.round($p2.w));$3.set_h(Math.round($p2.h));$1['am8']=$2;$1['da']=true;$1['db']=true;$1['dc']=tsConfig.is_mobile;$1['dd']=true;$0.commandParams=$1;return $0;}
tab.UberTipClientCommands.$3=function($p0,$p1){return function($p1_0){
if(!ss.isValue($p1_0)){return;}var $1_0=tab.JsonUtil.parseJson($p1_0.toString());var $1_1=tab.UbertipSerializer.deserializeUbertip($1_0);if(ss.isValue($1_1)){$1_1.isUpdate=$p0;tab.PermissionManager.filterCommands($1_1.commands,tab.UberTipClientCommands.get_$0());}if(ss.isValue($p1)){$p1($1_1);}};}
tab.UberTipClientCommands.$4=function($p0){var $0=tab.CommandUtils.duplicateCommand($p0.command);var $1=$0.commandParams;var $2=$1['aar'];delete $1.aar;if(!Object.keyExists($1,'aqt')&&ss.isValue($2)){var $3=[parseInt($2)];var $4={};$4.acg=$3;$4.akf='tuples';$1['avy']=$4;}return $0;}
tab.vqldomain$8=function(doLocal,cmd,successCallback,errorCallback){tab.vqldomain$8.initializeBase(this,['none',doLocal,cmd,successCallback,errorCallback]);}
tab.vqldomain$8.prototype={get_isOneAtATime:function(){return true;}}
tab.FilterClientCommands=function(){}
tab.FilterClientCommands.setQuantitativeFilterRange=function(visualId,filterField,filterMin,filterMax,includeMode){var $0={};$0.commandNamespace='tabdoc';$0.commandName='range-filter';$0.commandParams={};tab.CommandUtils.addVisualIdToCommand($0.commandParams,visualId);$0.commandParams['afg']=filterField;if(ss.isValue(filterMin)){$0.commandParams['ad9']=filterMin.toString();}if(ss.isValue(filterMax)){$0.commandParams['aea']=filterMax.toString();}$0.commandParams['aiw']=includeMode;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.setCategoricalFilterValues=function(visualId,filterField,updateType,aliases){if(!ss.isValue(updateType)){updateType='filter-replace';}if(!ss.isValue(aliases)){aliases=new Array(0);}var $0={};$0.commandNamespace='tabdoc';$0.commandName='categorical-filter';$0.commandParams={};tab.CommandUtils.addVisualIdToCommand($0.commandParams,visualId);$0.commandParams['afg']=filterField;$0.commandParams['uq']=tab.JsonUtil.toJson(aliases);$0.commandParams['akd']=updateType;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.setCategoricalFilterValuesByIndex=function(visualId,filterField,updateType,indexes){if(!ss.isValue(updateType)){updateType='filter-replace';}if(!ss.isValue(indexes)){indexes=new Array(0);}var $0={};$0.commandNamespace='tabdoc';$0.commandName='categorical-filter-by-index';$0.commandParams={};tab.CommandUtils.addVisualIdToCommand($0.commandParams,visualId);$0.commandParams['afg']=filterField;$0.commandParams['acm']=tab.JsonUtil.toJson(indexes);$0.commandParams['akd']=updateType;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.modifyCategoricalFilterValues=function(visualId,filterField,addAliases,removeAliases){if((!ss.isValue(addAliases)||!addAliases.length)&&(!ss.isValue(removeAliases)||!removeAliases.length)){return;}var $0={};$0.commandNamespace='tabdoc';$0.commandName='categorical-filter';$0.commandParams={};tab.CommandUtils.addVisualIdToCommand($0.commandParams,visualId);$0.commandParams['afg']=filterField;if(ss.isValue(addAliases)){$0.commandParams['uu']=tab.JsonUtil.toJson(addAliases);}if(ss.isValue(removeAliases)){$0.commandParams['uv']=tab.JsonUtil.toJson(removeAliases);}$0.commandParams['akd']='filter-delta';tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.modifyCategoricalFilterValuesByIndex=function(visualId,filterField,addIndexes,removeIndexes){if((!ss.isValue(addIndexes)||!addIndexes.length)&&(!ss.isValue(removeIndexes)||!removeIndexes.length)){return;}var $0={};$0.commandNamespace='tabdoc';$0.commandName='categorical-filter-by-index';$0.commandParams={};tab.CommandUtils.addVisualIdToCommand($0.commandParams,visualId);$0.commandParams['afg']=filterField;if(ss.isValue(addIndexes)){$0.commandParams['ack']=tab.JsonUtil.toJson(addIndexes);}if(ss.isValue(removeIndexes)){$0.commandParams['acl']=tab.JsonUtil.toJson(removeIndexes);}$0.commandParams['akd']='filter-delta';tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.setCategoricalQuickFilterMode=function(visualId,fieldName,mode){var $0={};$0.commandNamespace='tabsrv';$0.commandName='set-quick-filter-mode';$0.commandParams={};tab.CommandUtils.addVisualIdToCommand($0.commandParams,visualId);$0.commandParams['axp']=mode;$0.commandParams['afc']=fieldName;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.setCategoricalQuickFilterDomain=function(visualId,fieldName,domain){var $0={};$0.commandNamespace='tabsrv';$0.commandName='set-quick-filter-domain';$0.commandParams={};tab.CommandUtils.addVisualIdToCommand($0.commandParams,visualId);$0.commandParams['ai0']=domain;$0.commandParams['afc']=fieldName;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.setPatternFilterState=function(visualId,fieldName,pattern){var $0={};$0.commandNamespace='tabdoc';$0.commandName='categorical-quick-filter-pattern';$0.commandParams={};tab.CommandUtils.addVisualIdToCommand($0.commandParams,visualId);$0.commandParams['m3']=pattern;$0.commandParams['afc']=fieldName;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.addManualFilterItems=function(visualId,fieldName,data){var $0={};var $1={};$1.abe=0;$1.mb='';$0.aiy='cstring';$0.aw9=$1;var $2=data.tuples;var $3=[];var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $5=$enum1.current;$3.add($5.d);}$0.vs=$3;var $4={};$4.commandNamespace='tabsrv';$4.commandName='add-manual-items-to-filter';$4.commandParams={};tab.CommandUtils.addVisualIdToCommand($4.commandParams,visualId);$4.commandParams['anq']=tab.JsonUtil.toJson($0);$4.commandParams['afc']=fieldName;tab.ServerCommands.executeServerCommand($4,'immediately');}
tab.FilterClientCommands.levelDrill=function(visualId,position,shelfType,isDrillDown){var $0={};$0.commandNamespace='tabdoc';$0.commandName='level-drill';$0.commandParams={};tab.CommandUtils.addVisualIdToCommand($0.commandParams,visualId);$0.commandParams['r']=isDrillDown.toString();$0.commandParams['ajv']=shelfType;$0.commandParams['wl']=position.toString();tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.updateCategoricalFilter=function(filterData){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return;}var $0=function(){
return true;};var $1=function($p1_0,$p1_1){
var $1_0=tab.VizDataLookup.lookupAlias($p1_1,$p1_0,tab.ApplicationModel.get_instance().get_dataDictionary());return !filterData.includesValue($1_0);};tab.FilterClientCommands.$4(filterData.get_filterField(),filterData.get_targetSheets(),$0,$1,true);}
tab.FilterClientCommands.updateQuantitativeFilter=function(filterData){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return;}var $0=function(){
var $1_0=!ss.isValue(filterData.get_currentMinVal())||(ss.isValue(filterData.get_previousMinVal())&&tab.FloatUtil.isGreaterThanOrEqual(filterData.get_currentMinVal(),filterData.get_previousMinVal()));var $1_1=!ss.isValue(filterData.get_currentMaxVal())||(ss.isValue(filterData.get_previousMaxVal())&&tab.FloatUtil.isLessThanOrEqual(filterData.get_currentMaxVal(),filterData.get_previousMaxVal()));return $1_0&&$1_1;};var $1=function($p1_0,$p1_1){
var $1_0=tab.VizDataLookup.lookupRawDataValue($p1_1,$p1_0,tab.ApplicationModel.get_instance().get_dataDictionary());if($p1_0.get_dataType()==='date'||$p1_0.get_dataType()==='datetime'){var $1_1=tab.DateUtil.parsePresModelDate($1_0);return !filterData.valueInRange(tab.DateUtil.dateTimeAsOleDate($1_1));}else{return !filterData.valueInRange(parseFloat($1_0));}};tab.FilterClientCommands.$4(filterData.get_filterField(),filterData.get_targetSheets(),$0,$1,false);}
tab.FilterClientCommands.applyFilter=function(visModel,filterField,isFilteredOut){var $0=visModel.get_vizDataModel();var $1=$0.getVizDataField(filterField);var $2=[];$0.forEachTupleId(function($p1_0){
if(isFilteredOut($1,$p1_0)){$2.add($p1_0);}return true;});return $2;}
tab.FilterClientCommands.doRelativeDateQuickFilter=function(visualId,fieldName,periodType,rangeType,range){var $0={};$0.commandNamespace='tabdoc';$0.commandName='relative-date-filter';$0.commandParams=tab.FilterClientCommands.createDoRelativeDateQuickFilterParams(visualId,fieldName,periodType,rangeType,range);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.doLevelHierarchialFilter=function(visualId,fieldName,addLevels,removeLevels,updateType){var $0={};$0.commandNamespace='tabdoc';$0.commandName='hierarchical-filter';$0.commandParams=tab.FilterClientCommands.$0(visualId,fieldName,addLevels,removeLevels,updateType);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.doMemberHierarchialFilter=function(visualId,fieldName,addMember,removeMember,updateType){var $0={};$0.commandNamespace='tabdoc';$0.commandName='hierarchical-filter';$0.commandParams=tab.FilterClientCommands.$1(visualId,fieldName,addMember,removeMember,updateType);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.doRangeHierarchialFilter=function(visualId,fieldName,rangeAddMembers,rangeRemoveMembers,updateType){var $0={};$0.commandNamespace='tabdoc';$0.commandName='hierarchical-filter';$0.commandParams=tab.FilterClientCommands.$2(visualId,fieldName,rangeAddMembers,rangeRemoveMembers,updateType);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.resetQuantitativeFilter=function(filterField,targetSheets){var $enum1=ss.IEnumerator.getEnumerator(targetSheets);while($enum1.moveNext()){var $0=$enum1.current;var $1=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$0);if(ss.isNullOrUndefined($1)){continue;}if(tab.FilterClientCommands.$3(filterField,$0)){var $2=new Array(0);$1.setFilteredTuples(filterField,$2);$1.setHiddenTuples(filterField,$2);}tab.VizClientCommands.validateVisualModel($1);}}
tab.FilterClientCommands.createDoRelativeDateQuickFilterParams=function(visualId,fieldName,periodType,rangeType,range,anchorDate,includedValues){var $0={};tab.CommandUtils.addVisualIdToCommand($0,visualId);$0['afg']=fieldName;$0['ai1']=periodType;$0['ai3']=rangeType;if(rangeType==='lastn'||rangeType==='nextn'){$0['aa1']=range;}if(ss.isValue(anchorDate)){$0['mz']=anchorDate;}if(ss.isValue(includedValues)){$0['aiw']=includedValues;}return $0;}
tab.FilterClientCommands.$0=function($p0,$p1,$p2,$p3,$p4){var $0={};tab.CommandUtils.addVisualIdToCommand($0,$p0);var $1={};$1['aci']=$p2;$1['acj']=$p3;$0['afg']=$p1;$0['asu']=$1;$0['akd']=$p4;return $0;}
tab.FilterClientCommands.$1=function($p0,$p1,$p2,$p3,$p4){var $0={};tab.CommandUtils.addVisualIdToCommand($0,$p0);var $1={};$1['uu']=$p2;$1['uv']=$p3;$0['afg']=$p1;$0['asu']=$1;$0['akd']=$p4;return $0;}
tab.FilterClientCommands.$2=function($p0,$p1,$p2,$p3,$p4){var $0={};tab.CommandUtils.addVisualIdToCommand($0,$p0);var $1={};$1['ass']=$p2;$1['ast']=$p3;$0['afg']=$p1;$0['asu']=$1;$0['akd']=$p4;return $0;}
tab.FilterClientCommands.$3=function($p0,$p1){var $0=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$p1);if(ss.isValue($0)){return $0.get_shouldUpdate()&&$0.hasFilterFieldData($p0);}return false;}
tab.FilterClientCommands.$4=function($p0,$p1,$p2,$p3,$p4){var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $0=$enum1.current;var $1=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$0);if(ss.isNullOrUndefined($1)){continue;}var $2=tab.FilterClientCommands.$3($p0,$0);var $3=new tab.vqldomain$9(function($p1_0){
if(!$2||!$p2()){if(!$p4){tab.ModelUtils.setVisualValidStateOnModel($p1_0,$1,false);}}else{var $1_0=new Array(0);$1_0=tab.FilterClientCommands.applyFilter($1,$p0,$p3);$1.setFilteredTuples($p0,$1_0);if(!$p4){$1.setHiddenTuples($p0,$1_0);}tab.ModelUtils.setVisualValidStateOnModel($p1_0,$1,true);}});$3.set_commandName(($p4)?'categorical-filter':'range-filter');tab.CommandController.SendCommand($3);}}
tab.SheetClientCommands=function(){}
tab.SheetClientCommands.switchSheets=function(msg,isEmbedded){if(ss.isNullOrUndefined(msg.oldSheetName)){msg.oldSheetName=tsConfig.current_sheet_name;}tab.CommandController.get().get_legacySession().get_waitHandler().showAndLock();var $0={};$0.commandNamespace='tabsrv';$0.commandName='ensure-layout-for-sheet';$0.commandParams={};$0.commandParams['sz']=msg.sheetName;$0.commandParams['dz']=isEmbedded.toString();tab.ServerCommands.executeServerCommand($0,'immediately',msg.successCallback,msg.errorCallback);}
tab.SheetClientCommands.createSheet=function(sheetName,insertAtEnd){var $0={};$0.commandNamespace='tabdoc';$0.commandName='new-worksheet';$0.commandParams={};if(ss.isValue(sheetName)){$0.commandParams['sx']=sheetName;}if(insertAtEnd){$0.commandParams['e4']=insertAtEnd.toString();}tab.ServerCommands.executeServerCommand($0,'immediately',null,null);}
tab.SheetClientCommands.deleteSheet=function(sheetName){var $0={};$0.commandNamespace='tabdoc';$0.commandName='delete-sheet';$0.commandParams={};$0.commandParams['sr']=sheetName;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.SheetClientCommands.renameSheet=function(sheetName,newName){var $0={};$0.commandNamespace='tabdoc';$0.commandName='rename-sheet';$0.commandParams={};$0.commandParams['sr']=sheetName;$0.commandParams['sx']=newName;tab.ServerCommands.executeServerCommand($0,'immediately',null,null);}
tab.SheetClientCommands.duplicateSheet=function(sheetName){var $0={};$0.commandNamespace='tabdoc';$0.commandName='duplicate-sheet';$0.commandParams={};$0.commandParams['sr']=sheetName;tab.ServerCommands.executeServerCommand($0,'immediately',null,null);}
tab.SheetClientCommands.clearWorksheet=function(sheetName){var $0={};$0.commandNamespace='tabdoc';$0.commandName='clear-sheet';$0.commandParams={};$0.commandParams['sr']=sheetName;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.SheetClientCommands.setPortSize=function(portSize,metrics){var $0={};$0.commandNamespace='tabsrv';$0.commandName='set-port-size';$0.commandParams={};$0.commandParams['sr']=tsConfig.current_sheet_name;$0.commandParams['arr']=tab.JsonUtil.toJson(portSize);$0.commandParams['ay4']=tab.JsonUtil.toJson(metrics);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.VizClientCommands=function(){}
tab.VizClientCommands.invalidateVisualModel=function(model){tab.VizClientCommands.$0(model,false);}
tab.VizClientCommands.validateVisualModel=function(model){tab.VizClientCommands.$0(model,true);}
tab.VizClientCommands.$0=function($p0,$p1){var $0=new tab.vqldomain$9(function($p1_0){
tab.ModelUtils.setVisualValidStateOnModel($p1_0,$p0,$p1);});tab.CommandController.SendCommand($0);}
tab.VizRegionRectWrapper=function(rect){this.$0=rect;}
tab.VizRegionRectWrapper.create=function(rect){return new tab.VizRegionRectWrapper(rect);}
tab.VizRegionRectWrapper.prototype={$0:null,get_r:function(){return this.$0.ajp;},set_r:function(value){this.$0.ajp=value;return value;},get_fns:function(){return this.$0.aft;},set_fns:function(value){this.$0.aft=value;return value;},get_x:function(){return this.$0.v9;},set_x:function(value){this.$0.v9=value;return value;},get_y:function(){return this.$0.wa;},set_y:function(value){this.$0.wa=value;return value;},get_w:function(){return this.$0.wb;},set_w:function(value){this.$0.wb=value;return value;},get_h:function(){return this.$0.wc;},set_h:function(value){this.$0.wc=value;return value;}}
tab.vqldomain$4=function(session){this.$0=session;this.$1=0;this.$2={};}
tab.vqldomain$4.prototype={$0:null,$1:0,$2:null,add_commmandSucceeded:function($p0){this.$3=ss.Delegate.combine(this.$3,$p0);},remove_commmandSucceeded:function($p0){this.$3=ss.Delegate.remove(this.$3,$p0);},$3:null,add_commandFailed:function($p0){this.$4=ss.Delegate.combine(this.$4,$p0);},remove_commandFailed:function($p0){this.$4=ss.Delegate.remove(this.$4,$p0);},$4:null,executeCommand:function($p0,$p1,$p2){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$2));while($enum1.moveNext()){var $5=$enum1.current;if(!this.$2[$5].$11($p0,$p1,$p2)){return;}}var $0={};$0['cn']=$p0.commandName;var $1=tabBootstrap.MetricsController.get_instance().createContext('EXEREM',tabBootstrap.MetricsSuites.commands,$0);var $2=this.$1;var $3=ss.Delegate.create(this,function($p1_0){
$1.close();if(ss.isValue(this.$3)){this.$3($2,$p0,$p1_0);}var $1_0=tab.PresentationModel.fromCommand($p1_0,$p0);$p1($1_0);});var $4=ss.Delegate.create(this,function($p1_0){
$1.close();if(ss.isValue(this.$4)){this.$4($2,$p0,$p1_0);}$p2($p1_0);});this.$0.executeServerCommand($p0,$3,$4);++this.$1;},$5:function($p0,$p1,$p2,$p3,$p4){var $0=$p0.toString()+'-'+$p1.toString();if(Object.keyExists(this.$2,$0)){return false;}var $1=new tab.vqldomain$3(this,$p0,$p1,$p2,$p3,$p4);$1.add_$F(ss.Delegate.create(this,this.$6));this.$2[$0]=$1;return true;},$6:function($p0,$p1,$p2){if(ss.isValue(this.$4)){this.$4(0,$p0,null);}$p2(null);}}
tab.ClientCommand=function(uiBlockType,doLocal,remoteCommand,successCallback,errorCallback){this.$0=uiBlockType;this.$1='remoteFirst';this.hasLocalComponent=ss.isValue(doLocal);this.hasRemoteComponent=ss.isValue(remoteCommand);this.doLocalWork=doLocal;this.$2=[];if(this.hasRemoteComponent){this.$2.enqueue(new tab.CommandRecord(remoteCommand,successCallback,errorCallback));this.$3=remoteCommand.commandName;}this.doRemoteWork=ss.Delegate.create(this,this.$4);}
tab.ClientCommand.prototype={doRemoteWork:null,doLocalWork:null,$0:null,$1:null,$2:null,$3:'Unknown',hasLocalComponent:false,hasRemoteComponent:false,get_blockType:function(){return this.$0;},get_isOneAtATime:function(){return false;},get_commandName:function(){return this.$3;},set_commandName:function(value){this.$3=value;return value;},get_hasLocalComponent:function(){return this.hasLocalComponent;},get_hasRemoteComponent:function(){return this.hasRemoteComponent;},execute:function(t,cc,onComplete){if(this.$1==='localFirst'){this.executeLocal(t);this.executeRemote(cc,onComplete);}else if(this.$1==='remoteFirst'){this.executeRemote(cc,onComplete);this.executeLocal(t);}if(!ss.isValue(this.doRemoteWork)&&ss.isValue(onComplete)){onComplete(true);}},executeLocal:function(t){if(ss.isValue(this.doLocalWork)){var $0=tabBootstrap.MetricsController.get_instance().createContext('EXELOC',tabBootstrap.MetricsSuites.commands,this.buildCommandMetricsParameters());this.doLocalWork(t);$0.close();}},executeRemote:function(cc,onComplete){if(ss.isValue(this.doRemoteWork)){this.doRemoteWork(cc,function($p1_0){
if(ss.isValue(onComplete)){onComplete($p1_0);}});}},buildCommandMetricsParameters:function(){var $0={};$0['cn']=this.get_commandName();return $0;},enqueueCommand:function(cmdRec){this.$2.enqueue(cmdRec);},handleRemoteCommandSuccess:function(command,pm){if(ss.isValue(command.get_successCallback())){command.get_successCallback()(pm);}},handleRemoteCommandFailure:function(command,o){if(ss.isValue(command.get_errorCallback())){command.get_errorCallback()(o);}},$4:function($p0,$p1){if(!this.$2.length){if(ss.isValue($p1)){$p1(true);}return;}var $0=this.$2.dequeue();var $1=$0.get_commandToExececute();if(ss.isNullOrUndefined($1)){if(ss.isValue($p1)){$p1(true);}return;}$p0.executeCommand($1,ss.Delegate.create(this,function($p1_0){
try{this.handleRemoteCommandSuccess($0,$p1_0);}finally{this.$4($p0,$p1);}}),ss.Delegate.create(this,function($p1_0){
try{this.handleRemoteCommandFailure($0,$p1_0);}finally{if(ss.isValue($p1)){$p1(false);}}}));}}
tab.LegacyClientCommand=function(doLocal,doRemote,uiBlockType){tab.LegacyClientCommand.initializeBase(this,[uiBlockType,doLocal,null]);this.doRemoteWork=doRemote;}
tab.CommandRecord=function(remoteCommand,successCallback,errorCallback){this.$0=remoteCommand;this.$1=successCallback;this.$2=errorCallback;}
tab.CommandRecord.prototype={$0:null,$1:null,$2:null,get_commandToExececute:function(){return this.$0;},get_successCallback:function(){return this.$1;},get_errorCallback:function(){return this.$2;}}
tab.CommandPermission=function(availableTypes){this.$1={};var $enum1=ss.IEnumerator.getEnumerator(availableTypes);while($enum1.moveNext()){var $0=$enum1.current;this.$1[$0.toString()]='granted';}}
tab.CommandPermission.prototype={$1:null,test:function(command){tab.Param.verifyValue(command,'command');if(ss.isNullOrUndefined(command.commandType)){}return ss.isValue(command.commandType)&&Object.keyExists(this.$1,command.commandType.toString())&&this.$1[command.commandType.toString()]==='granted';}}
tab.CommandSerializer=function(){}
tab.CommandSerializer.get_$1=function(){return tab.Logger.lazyGetLogger(tab.CommandSerializer);}
tab.CommandSerializer.buildDocCommandName=function(command){return tab.CommandSerializer.buildQualifiedCommandName('tabdoc',command);}
tab.CommandSerializer.buildQualifiedCommandName=function(commandNamespace,command){return commandNamespace+':'+command;}
tab.CommandSerializer.deserialize=function(serializedCommand){var $0=new RegExp('^(\\w+):([\\w-]+)( ((.|\n)*))?$');var $1=$0.exec(serializedCommand);if(ss.isNullOrUndefined($1)||!$1.length){return null;}var $2={};$2.commandNamespace=$1[1];$2.commandName=$1[2];tab.CommandSerializer.$2($2,$1[4]);return $2;}
tab.CommandSerializer.getCommandType=function(command){if(Object.keyExists(tab.CommandSerializer.$0,command.commandName)){return tab.CommandSerializer.$0[command.commandName];}else{return null;}}
tab.CommandSerializer.$2=function($p0,$p1){if(String.isNullOrEmpty($p1)){return;}var $0=new ss.StringBuilder();var $1=[];for(var $2=$p1.length-1;$2>=0;$2--){$1.push($p1.charAt($2));}while($1.length>0){var $3=tab.CommandSerializer.$3($1,$0);if(ss.isNullOrUndefined($3)){return;}var $4=tab.CommandSerializer.$4($1,$0);if(ss.isNullOrUndefined($4)){return;}if($4==='{}'){continue;}if(ss.isNullOrUndefined($p0.commandParams)){$p0.commandParams={};}$p0.commandParams[$3.trim()]=$4;}}
tab.CommandSerializer.$3=function($p0,$p1){$p1.clear();var $0=false;while($p0.length>0){var $1=$p0.pop();switch($1){case '=':return $p1.toString();case '-':$0=true;break;default:if($0){$p1.append(String.fromChar($1,1).toUpperCase());$0=false;}else{$p1.append($1);}break;}}return null;}
tab.CommandSerializer.$4=function($p0,$p1){$p1.clear();var $0=[];var $1=$p0.length>1&&$p0.peek()==='"';while($p0.length>0){var $2=$p0.pop();var $3=true;switch($2){case '\\':if($1){if($0.peek()!=='\\'){$0.push('\\');$3=false;}else{$0.pop();}}break;case '"':if($0.peek()==='\\'){$0.pop();}else if($0.peek()==='"'){$0.pop();if(!$0.length){$3=false;}}else{if(!$0.length){$3=false;}$0.push('"');}break;case '[':if($0.peek()==='"'){}else{$0.push('[');}break;case ']':if($0.peek()==='"'){}else if($0.peek()!=='['){}else{$0.pop();}break;case '{':if($0.peek()==='"'){}else{$0.push('{');}break;case '}':if($0.peek()==='"'){}else if($0.peek()!=='{'){}else{$0.pop();}break;default:if($0.peek()==='\\'){$0.pop();}break;}if($3){$p1.append($2);}if(!$0.length){return $p1.toString();}}return null;}
tab.CommandsPresModelWrapper=function(commandsPM){this.$0=commandsPM;}
tab.CommandsPresModelWrapper.create=function(pm){if(!ss.isValue(pm)){return null;}return new tab.CommandsPresModelWrapper(pm);}
tab.CommandsPresModelWrapper.prototype={$0:null,get_presModel:function(){return this.$0;},get_commandItems:function(){return this.$0.aov;},set_commandItems:function(value){this.$0.aov=value;return value;},get_defaultItem:function(){return this.$0.abf;},set_defaultItem:function(value){this.$0.abf=value;return value;}}
tab.CommandItemWrapper=function(itemModel){this.$0=itemModel;}
tab.CommandItemWrapper.create=function(item){if(!ss.isValue(item)){return null;}return new tab.CommandItemWrapper(item);}
tab.CommandItemWrapper.prototype={$0:null,get_item:function(){return this.$0;},get_name:function(){return this.$0.mb;},set_name:function(value){this.$0.mb=value;return value;},get_description:function(){return this.$0.rt;},set_description:function(value){this.$0.rt=value;return value;},get_commandsType:function(){return this.$0.aix;},set_commandsType:function(value){this.$0.aix=value;return value;},get_enabled:function(){return this.$0.a;},set_enabled:function(value){this.$0.a=value;return value;},get_isChecked:function(){return this.$0.cs;},set_isChecked:function(value){this.$0.cs=value;return value;},get_isDefault:function(){return this.$0.cu;},set_isDefault:function(value){this.$0.cu=value;return value;},get_isRadioOn:function(){return this.$0.ct;},set_isRadioOn:function(value){this.$0.ct=value;return value;},get_isVisible:function(){return this.$0.bo;},set_isVisible:function(value){this.$0.bo=value;return value;},get_commands:function(){return this.$0.aol;},set_commands:function(value){this.$0.aol=value;return value;},get_command:function(){return this.$0.l1;},set_command:function(value){this.$0.l1=value;return value;},get_argumentParams:function(){return this.$0.ag7;},set_argumentParams:function(value){this.$0.ag7=value;return value;},get_iconRes:function(){return this.$0.mp;},set_iconRes:function(value){this.$0.mp=value;return value;}}
tab.vqldomain$3=function(handler,commandNS,command,rate,pendingCommandThreshold,pendingCommandDelay){this.$2=handler;this.$3=commandNS;this.$4=command;this.$5=rate;this.$7=(pendingCommandThreshold||1);this.$6=(pendingCommandDelay||35);}
tab.vqldomain$3.prototype={$2:null,$3:null,$4:null,$5:0,$6:0,$7:0,$8:null,$9:null,$A:null,$B:0,$C:null,$D:0,$E:false,add_$F:function($p0){this.$10=ss.Delegate.combine(this.$10,$p0);},remove_$F:function($p0){this.$10=ss.Delegate.remove(this.$10,$p0);},$10:null,$11:function($p0,$p1,$p2){if($p0.commandNamespace!==this.$3||$p0.commandName!==this.$4){return 1;}if(this.$E){return 1;}if(ss.isValue(this.$8)&&ss.isValue(this.$C)){this.$14(this.$8,this.$9,this.$A);this.$8=$p0;this.$9=$p1;this.$A=$p2;return 0;}var $0=Math.floor(tabBootstrap.MetricsController.getTiming());var $1=$0-this.$B;if(this.$5!==-1&&$1<this.$5){this.$13($p0,$p1,$p2,this.$5-$1);}else if(this.$7!==-1&&this.$D>=this.$7){this.$13($p0,$p1,$p2,this.$6*this.$D);}else{this.$E=true;++this.$D;try{this.$2.executeCommand($p0,ss.Delegate.create(this,function($p1_0){
if(this.$D>0){--this.$D;}$p1($p1_0);}),ss.Delegate.create(this,function($p1_0){
if(this.$D>0){--this.$D;}$p2($p1_0);}));}finally{this.$E=false;this.$B=$0;}}return 0;},$12:function(){var $0=this.$8;var $1=this.$9;var $2=this.$A;this.$8=null;this.$9=null;this.$A=null;if(!ss.isValue($0)){return;}this.$2.executeCommand($0,$1,$2);},$13:function($p0,$p1,$p2,$p3){this.$8=$p0;this.$9=$p1;this.$A=$p2;this.$C=window.setTimeout(ss.Delegate.create(this,function(){
this.$C=null;this.$12();}),$p3);},$14:function($p0,$p1,$p2){if(ss.isValue(this.$10)){this.$10($p0,$p1,$p2);}}}
tab.CompositeClientCommand=function(uiBlockType,commands){tab.CompositeClientCommand.initializeBase(this,[uiBlockType,null,null]);this.$5=[];var $enum1=ss.IEnumerator.getEnumerator(commands);while($enum1.moveNext()){var $0=$enum1.current;if(ss.isValue($0)){this.$5.push($0);this.hasLocalComponent=this.hasLocalComponent||$0.get_hasLocalComponent();this.hasRemoteComponent=this.hasRemoteComponent||$0.get_hasRemoteComponent();}}}
tab.CompositeClientCommand.prototype={$5:null,get_commandName:function(){return 'Composite';},executeLocal:function(t){var $enum1=ss.IEnumerator.getEnumerator(this.$5);while($enum1.moveNext()){var $0=$enum1.current;$0.executeLocal(t);}},executeRemote:function(cc,onComplete){var $0=0;this.$6(cc,function($p1_0){
if(ss.isValue(onComplete)){onComplete($p1_0);}},$0);},$6:function($p0,$p1,$p2){if($p2>=this.$5.length){$p1(true);return;}var $0=this.$5[$p2];$0.executeRemote($p0,ss.Delegate.create(this,function($p1_0){
if(!$p1_0){$p1(false);}else{this.$6($p0,$p1,$p2+1);}}));}}
tab.DeferLayoutImpl=function(){}
tab.DeferLayoutImpl.get_instance=function(){if(ss.isNullOrUndefined(tab.DeferLayoutImpl.$0)){tab.DeferLayoutImpl.$0=new tab.DeferLayoutImpl();}return tab.DeferLayoutImpl.$0;}
tab.DeferLayoutImpl.prototype={$1:false,$2:false,get_isZoomin:function(){return this.$2;},set_isZoomin:function(value){this.$2=value;return value;},shouldDeferLayoutUpdates:function(){return this.$1;},setDeferLayoutUpdates:function(b){this.$1=b;}}
tab.EventMap=function(){}
tab.EventMap.prototype={get_$1:function(){return Object.getKeyCount(tab.EventMap.$0);},get_item:function($p0){return tab.EventMap.$0[$p0];}}
tab.vqldomain$9=function(doLocal){tab.vqldomain$9.initializeBase(this,['none',doLocal,null]);}
tab.PermissionManager=function(){}
tab.PermissionManager.buildCommandPermission=function(){var $0=[];if(tsConfig.allow_filter){$0.add(11);$0.add(12);$0.add(10);$0.add(2);$0.add(13);$0.add(4);$0.add(6);}if(tsConfig.allow_select){$0.add(1);$0.add(9);}if(tsConfig.allow_sheetlink){$0.add(8);}if(tsConfig.allow_view_underlying||tsConfig.allow_summary){$0.add(7);}if(tsConfig.is_authoring){$0.add(15);$0.add(17);$0.add(18);$0.add(19);$0.add(20);if(tab.FeatureFlags.isEnabled('ConstantRefLineQuickEditor')&&!tsConfig.is_mobile){$0.add(21);}}return new tab.CommandPermission($0);}
tab.PermissionManager.filterCommands=function(commands,permission){for(var $0=commands.length-1;$0>=0;$0--){if(!permission.test(commands[$0])){commands.removeAt($0);}}}
tab.PresentationModel=function(){}
tab.PresentationModel.commandResultByName=function(response,c){var $0=tab.CommandSerializer.buildQualifiedCommandName(c.commandNamespace,c.commandName);var $1=response.ato;var $2=$1.att;var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $3=$enum1.current;if($3.mk===$0){return $3.amn;}}return null;}
tab.PresentationModel.fromCommand=function(response,c){var $0=tab.PresentationModel.commandResultByName(response,c);if(ss.isValue($0)&&Object.getKeyCount($0)===1){var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};return $1.value;}}else{return $0;}return null;}
tab.PresentationModel.ensurePath=function(sourcePM,destPM,path){var $0=destPM;var $1=sourcePM;var $2;var $3;var $4=path.get_pathList();for(var $5=0,$6=$4.length;$5<$6;$5++){var $7=$4[$5];var $8=$7.name;$2=$0[$8];$3=(ss.isValue($1))?$1[$8]:null;if(!ss.isValue($2)){var $9=$5===$6-1;var $A=null;if($7.type===1&&ss.isValue($3)){var $B=$3;var $C=[];for(var $D=0;$D<$B.length;$D++){$C[$D]=tab.MiscUtil.cloneObject($B[$D]);}$A=$C;}else if(!$9&&ss.isValue($3)){$A=tab.PresentationModel.cloneObjWithScalarsOnly($3);}else{$A={};}$0[$8]=$A;}$0=$0[$8];$1=$3;}return $0;}
tab.PresentationModel.insertAtPath=function(sourcePM,destPM,path,newPM){tab.PresentationModel.ensurePath(sourcePM,destPM,path);tab.PresentationModel.$0(destPM,path,newPM);}
tab.PresentationModel.cloneObjWithScalarsOnly=function(sourceObj){if(!_.isObject(sourceObj)){return sourceObj;}var $0={};var $1=sourceObj;var $enum1=ss.IEnumerator.getEnumerator(Object.keys($1));while($enum1.moveNext()){var $2=$enum1.current;var $3=$1[$2];if(!_.isObject($3)){$0[$2]=$3;}}return $0;}
tab.PresentationModel.$0=function($p0,$p1,$p2){if(!$p1.get_pathList().length){var $0=$p2;var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};$p0[$1.key]=$1.value;}}else{var $2,$3;var $4=$p0;var $5=$p1.get_pathList();for($2=0,$3=$5.length;$2<$3-1;$2++){$4=$4[$5[$2].name];}$4[$5[$3-1].name]=$p2;}}
tab.PresModelPathItem=function(name,type){this.name=name;if(ss.isValue(type)){this.type=type;}else{this.type=0;}}
tab.PresModelPathItem.prototype={name:null,type:0}
tab.PresModelPath=function(){this.$0=[];}
tab.PresModelPath.prototype={get_pathList:function(){return this.$0;},get_enumerator:function(){return this.$0.getEnumerator();},add:function(s){this.$0.add(s);},reverse:function(){this.$0.reverse();}}
tab.SimpleCommandsPresModelWrapper=function(commandsPM){this.$0=commandsPM;}
tab.SimpleCommandsPresModelWrapper.create=function(pm){if(ss.isNullOrUndefined(pm)){return null;}return new tab.SimpleCommandsPresModelWrapper(pm);}
tab.SimpleCommandsPresModelWrapper.prototype={$0:null,get_simpleCommand:function(){return this.$0.mt;},set_simpleCommand:function(value){this.$0.mt=value;return value;}}
tab.UbertipSerializer=function(){}
tab.UbertipSerializer.deserializeUbertip=function(ubertip){if(ss.isNullOrUndefined(ubertip)){return null;}var $0=[];var $1=[];var $2=[];if(ss.isValue(ubertip.aol)){tab.UbertipSerializer.$8(ubertip.aol,$0,$1,$2);}var $3=[];if(ss.isValue(ubertip.aom)){tab.UbertipSerializer.$7(ubertip.aom,$3,0);}var $4=tab.$create_UbertipModel();$4.tooltipHtml=tab.UbertipSerializer.$9(ubertip.th);$4.selectionHtml=tab.UbertipSerializer.$9(ubertip.ti);$4.overlayImage=tab.UbertipSerializer.$9(ubertip.ag2);$4.overlayImageKey=tab.UbertipSerializer.$9(ubertip.sp);$4.tupleId=ubertip.aar;$4.imageRegion=ubertip.ajp;if(!!$4.tupleId){$4.interactedTupleId=$4.tupleId;}$4.tupleSelected=(ubertip.g5||false);$4.refLineSelected=(ubertip.g7||false);$4.trendLineSelected=(ubertip.g8||false);$4.isExplicitlyEmpty=(ubertip.g4||false);$4.tooltipOffset=tab.PointUtil.fromPresModel(ubertip.aqw);$4.commands=$0;$4.subcommands=$1;$4.commandsAndSubcommands=$2;$4.actions=$3;if(ss.isValue($4.overlayImage)||ss.isValue($4.overlayImageKey)){var $5=ubertip.arj.length;$4.overlayAnchors=new Array($5);for(var $6=0;$6<$5;++$6){var $7=ubertip.arj[$6];var $8=tab.PointUtil.fromPresModel($7);$4.overlayAnchors[$6]=tab.$create_PointF($8.x,$8.y);}}tab.UbertipSerializer.$5(ubertip,$0,$2,true);if(ss.isValue($4.tooltipHtml)||ss.isValue($4.selectionHtml)||$0.length>0||$3.length>0){return $4;}return null;}
tab.UbertipSerializer.createLocalUberTipModel=function(visualModel,localInfo,isAuthoring){var $0=localInfo.get_interactedTupleIds();var $1=localInfo.get_affectedTupleIds();var $2=localInfo.get_paneDescriptorKey();var $3=visualModel.get_vizDataModel();if(ss.isNullOrUndefined($3)){return null;}var $4=$3.get_ubertipData();var $5=tab.UbertipSerializer.$2($4,$2);var $6=tab.ApplicationModel.get_instance().get_dataDictionary();var $7=null;var $8;var $9=!$5.th.toString().length;if($0.length===1){$7=tab.UbertipSerializer.$3($6,$5,$3,$0);$8=$0[0];}else{$8=0;}var $A=null;var $B=false;if($1.length>1&&$5.d9){$B=true;$A=tab.UbertipSerializer.$4($6,$3,$1,$5.m2);}var $C=[];var $D=($1.length>1)?0:$1[0];if($D<0){$D=0;}var $E=[];if($5.d9&&$3.hasDimensionColumnNotMeasureNames()){if(tab.VizDataUtils.hasTupleWithNonTotalValue($3,$6,$1)){tab.UbertipSerializer.$7($4.aoo,$C,$D);}if($B){tab.UbertipSerializer.$7($4.aop,$C,$D);}$C=$C.filter(function($p1_0){
return $p1_0.commandType!==10;});tab.UbertipSerializer.$5(null,$C,null,false);if(isAuthoring){var $10=tab.$create_CommandModel();$10.commandType=10;$10.imageRes=tab.TabResources.lookupResourceAlias('TQRC_SPLIT');$10.name='';if(tsConfig.is_mobile){var $11=tab.Strings.UbertipMergeMobile;var $12=tab.Strings.UbertipSplitMobile;$10.description=($12.length>$11.length)?$12:$11;}$E.add($10);}}var $F=tab.ActionUtils.getApplicableActions(visualModel.get_visualId().st,'explicitly');$F=_.filter($F,function($p1_0){
if($p1_0.akk==='explicitly'&&tab.ActionUtils.getActionType($p1_0)!=='url'&&!$p1_0.vg.length){return false;}return true;});if(ss.isValue($7)||ss.isValue($A)||$C.length>0||$F.length>0){var $13=tab.$create_UbertipModel();$13.tooltipHtml=$7;$13.selectionHtml=$A;$13.tupleId=$D;$13.interactedTupleId=$8;$13.isExplicitlyEmpty=$9;$13.actionPMs=$F;$13.commands=$C;$13.placeHolders=$E;$13.visualId=visualModel.get_visualId();return $13;}return null;}
tab.UbertipSerializer.$2=function($p0,$p1){if($p0.axc.length===1){return $p0.axc[0];}var $enum1=ss.IEnumerator.getEnumerator($p0.axc);while($enum1.moveNext()){var $0=$enum1.current;if(ss.isValue($0.avq)){if($0.avq.m1===$p1){return $0;}}}return null;}
tab.UbertipSerializer.$3=function($p0,$p1,$p2,$p3){return tab.VizDataUtils.constructHtml($p0,$p1.th,$p2,$p3);}
tab.UbertipSerializer.$4=function($p0,$p1,$p2,$p3){var $0=$p1.getVizDataField($p3||'');if(ss.isValue($0)){var $1=[];$.extend(true,$1,tab.UbertipSerializer.$0);$1[2]=$p2.length.toString();$1[4]=tab.Strings.UbertipItemsSelected;if($0.get_aggType()!=='sum'){$1[8]=tab.Strings.SumOf;}$1[10]=$p3;$1[14]='&lt;'+$p3+'&gt;';var $2=$1.join('');return tab.VizDataUtils.constructHtml($p0,$2,$p1,$p2);}else{tab.UbertipSerializer.$1[2]=$p2.length.toString();tab.UbertipSerializer.$1[4]=tab.Strings.UbertipItemsSelected;return tab.UbertipSerializer.$1.join('');}}
tab.UbertipSerializer.$5=function($p0,$p1,$p2,$p3){if($p1.length<=0){return;}var $0=false;if(ss.isValue($p0)&&ss.isValue($p0.ajp)){switch($p0.ajp){case 'viz':case 'xheader':case 'yheader':case 'bottomaxis':case 'leftaxis':case 'rightaxis':case 'topaxis':$0=true;break;}$0=$0&&!$p0.g7&&!$p0.g8&&!$p0.g6;}if(!tsConfig.previewMode&&($0||!$p3)){var $1=tab.$create_CommandModel();$1.commandType=7;$1.status='enabled';$1.description=tab.Strings.UbertipViewData;$1.command={};$1.command.commandName='viewData';$1.command.commandNamespace='tabdoc';$1.command.commandParams={};var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $2=$enum1.current;if(ss.isValue($2.command)&&ss.isValue($2.command.commandParams)&&Object.keyExists($2.command.commandParams,'aqt')){$1.command.commandParams['aqt']=$2.command.commandParams['aqt'];break;}}tab.UbertipSerializer.$6($1,$p1,$p2);}if(tsConfig.is_mobile){var $3=tab.$create_CommandModel();$3.commandType=1;$3.name=tab.Strings.UbertipClearSelection;$3.status='enabled';tab.UbertipSerializer.$6($3,$p1,$p2);}}
tab.UbertipSerializer.$6=function($p0,$p1,$p2){$p1.add($p0);if(ss.isValue($p2)){$p2.add(new ss.Tuple(true,$p1.length-1));}}
tab.UbertipSerializer.$7=function($p0,$p1,$p2){var $0=tab.CommandsPresModelWrapper.create($p0);if(ss.isNullOrUndefined($0)||ss.isNullOrUndefined($0.get_commandItems())){return;}var $enum1=ss.IEnumerator.getEnumerator($0.get_commandItems());while($enum1.moveNext()){var $1=$enum1.current;var $2=tab.CommandItemWrapper.create($1);var $3=tab.$create_CommandModel();$3.command=tab.CommandSerializer.deserialize($2.get_command());if(ss.isValue($3.command)){tab.UbertipSerializer.buildCommandModelFromWrapper($3,$2,$p2);$p1.add($3);}if(ss.isValue($2.get_commands())){tab.UbertipSerializer.$7($2.get_commands(),$p1,$p2);}}}
tab.UbertipSerializer.$8=function($p0,$p1,$p2,$p3){var $0=tab.CommandsPresModelWrapper.create($p0);if(ss.isNullOrUndefined($0)||ss.isNullOrUndefined($0.get_commandItems())){return;}var $1=0;var $2=0;var $enum1=ss.IEnumerator.getEnumerator($0.get_commandItems());while($enum1.moveNext()){var $3=$enum1.current;var $4=tab.CommandItemWrapper.create($3);var $5=tab.$create_CommandModel();$5.command=tab.CommandSerializer.deserialize($4.get_command());if(ss.isValue($5.command)){tab.UbertipSerializer.buildCommandModelFromWrapper($5,$4,0);$p1.add($5);$p3.add(new ss.Tuple(true,$1));$1++;}if(ss.isValue($4.get_commands())){$p2.add($4);$p3.add(new ss.Tuple(false,$2));$2++;}}}
tab.UbertipSerializer.buildCommandModelFromWrapper=function(com,itemWrapper,tupleId){tab.UbertipSerializer.setCommandType(com);com.name=itemWrapper.get_name();com.description=itemWrapper.get_description();if(!tab.MiscUtil.isNullOrEmpty(itemWrapper.get_iconRes())){com.imageRes=tab.TabResources.lookupFullResourceAlias(itemWrapper.get_iconRes());}var $0=itemWrapper.get_enabled();com.status=(ss.isNullOrUndefined($0)||$0)?'enabled':'disabled';if(!!tupleId&&!ss.isValue(com.command.commandParams['aqt'])){com.command.commandParams['aar']=tupleId.toString();}}
tab.UbertipSerializer.setCommandType=function(model){var $0=tab.CommandSerializer.getCommandType(model.command);if(ss.isValue($0)){model.commandType=$0;}}
tab.UbertipSerializer.$9=function($p0){return (String.isNullOrEmpty($p0))?null:$p0;}
tab.CommandRedirectRegistry=function(){}
tab.CommandRedirectRegistry.checkpointRegistry=function(){var $0=tab.CommandRedirectRegistry.$0;tab.CommandRedirectRegistry.$0=$.extend(false,{},$0);return function(){
tab.CommandRedirectRegistry.$0=$0;};}
tab.CommandRedirectRegistry.registerHandler=function(commandRedirectType,handler){tab.Param.verifyValue(commandRedirectType,'commandRedirectType');tab.Param.verifyValue(handler,'handler');if(ss.isNullOrUndefined(tab.CommandRedirectRegistry.$0)){tab.CommandRedirectRegistry.$0={};}tab.CommandRedirectRegistry.$0[commandRedirectType]=handler;}
tab.CommandRedirectRegistry.handleRedirect=function(type,model){if(ss.isNullOrUndefined(tab.CommandRedirectRegistry.$0)||!Object.keyExists(tab.CommandRedirectRegistry.$0,type)){throw new Error('No command redirect registerd for type: '+type);}var $0=tab.CommandRedirectRegistry.$0[type];return $0(model);}
tab.AnalyticsPaneModel=function(parent){tab.AnalyticsPaneModel.initializeBase(this,[parent,new tab.PresModelPathItem('auh')]);}
tab.AnalyticsPaneModel.prototype={add_newAnalyticsPane:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newAnalyticsPane:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_analyticsPresModel:function(){return this.presModel;},update:function(analyticsPresModel){this.simpleSwapToUpdate(analyticsPresModel,this.$6);}}
tab.CalculationAutoCompleteItemModel=function(parent,pm){tab.CalculationAutoCompleteItemModel.initializeBase(this,[parent,new tab.PresModelPathItem('aym')]);this.swapPresModel(pm);}
tab.CalculationAutoCompleteItemModel.prototype={get_$6:function(){return this.get_presModel();},get_itemType:function(){return (ss.isValue(this.get_$6().ayl))?this.get_$6().ayl:'func';},get_name:function(){return this.get_$6().mb;},get_label:function(){return this.get_$6().mc;},get_styledLabel:function(){return this.get_$6().md;},get_datasourceName:function(){return this.get_$6().s3;},get_iconResource:function(){return this.get_$6().mu;},get_tooltip:function(){return this.get_$6().rv;},get_replaceText:function(){return this.get_$6().qz;},get_caretIndex:function(){return this.get_$6().ab6;}}
tab.CalculationAutoCompleteModel=function(pm){this.$6=[];tab.CalculationAutoCompleteModel.initializeBase(this,[null,new tab.PresModelPathItem('ayo')]);this.swapPresModel(pm);var $enum1=ss.IEnumerator.getEnumerator(pm.ayn||new Array(0));while($enum1.moveNext()){var $0=$enum1.current;this.$6.add(new tab.CalculationAutoCompleteItemModel(this,$0));}}
tab.CalculationAutoCompleteModel.prototype={get_functionTooltip:function(){var $0=this.get_presModel();return $0.rg;},get_functionHelpPosition:function(){var $0=this.get_presModel();return $0.y8;},get_calculation:function(){var $0=this.get_presModel();return $0.qy;},get_startIndex:function(){var $0=this.get_presModel();return $0.z1;},get_endIndex:function(){var $0=this.get_presModel();return $0.z2;},get_items:function(){return this.$6;}}
tab.CalculationFunctionListModel=function(parent){tab.CalculationFunctionListModel.initializeBase(this,[parent,new tab.PresModelPathItem('ayh')]);this.presModel={};}
tab.CalculationFunctionListModel.prototype={add_functionListUpdated:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_functionListUpdated:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_$7:function(){return this.presModel;},get_functions:function(){return this.get_$7().ayg||[];},update:function(newFunctionList){this.simpleSwapToUpdate(newFunctionList,this.$6);}}
tab.CalculationModel=function(parent,isAdHoc){tab.CalculationModel.initializeBase(this,[parent,new tab.PresModelPathItem(((isAdHoc)?'ayc':'ayb'))]);this.presModel={};this.$6=isAdHoc;}
tab.CalculationModel.prototype={$6:false,add_calculationUpdated:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_calculationUpdated:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_hasCalculation:function(){return ss.isValue(this.presModel)&&(!tab.MiscUtil.isNullOrEmpty(this.get_$8().r3)||!tab.MiscUtil.isNullOrEmpty(this.get_$8().lo)||!tab.MiscUtil.isNullOrEmpty(this.get_$8().s3));},get_isNewCalculation:function(){return tab.MiscUtil.isNullOrEmpty(this.get_$8().afc);},get_isAdhoc:function(){return this.$6&&this.get_$8().hq;},get_adHocShelf:function(){return (this.get_$8().ajv||'none-shelf');},get_adHocShelfPosition:function(){return this.get_$8().wz;},get_adHocPaneSpecId:function(){return this.get_$8().wn;},get_$8:function(){return this.presModel;},get_tokens:function(){return this.get_$8().ayj||[];},get_name:function(){return this.get_$8().lo||'';},get_fieldName:function(){return this.get_$8().afc||'';},get_errors:function(){return this.get_$8().aye||[];},get_errorSummary:function(){return this.get_$8().o0||'';},get_caption:function(){return this.get_$8().r3||'';},get_formula:function(){return this.get_$8().r4||'';},get_dependencies:function(){return this.get_$8().r7||'';},get_dataSourceName:function(){return this.get_$8().s3||'';},get_dataSourceCaption:function(){var $0=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema();if(ss.isNullOrUndefined($0)){return null;}var $1=$0.findDataSourceByName(this.get_dataSourceName());if(ss.isNullOrUndefined($1)){return null;}return $1.get_caption();},update:function(newCalculation){this.simpleSwapToUpdate(newCalculation,this.$7);}}
tab.CategoricalFilterModel=function(parent,presModel){tab.CategoricalFilterModel.initializeBase(this,[parent,presModel]);}
tab.CategoricalFilterModel.prototype={get_filterType:function(){return 'Categorical';},get_mode:function(){switch(this.get_filterPresModel().mode){case 'checklist':return 'check-list';case 'radiolist':return 'radio-list';case 'dropdown':return 'dropdown';case 'checkdropdown':return 'check-dropdown';case 'slider':return 'slider';case 'pattern':return 'pattern';case 'typeinlist':return 'type-in-list';default:return 'check-list';}},get_pattern:function(){return this.get_filterPresModel().pattern;},get_isAllMode:function(){return this.get_filterPresModel().all;},get_allItemsAreChecked:function(){return this.get_filterPresModel().allChecked;},get_noItemsAreChecked:function(){return this.get_filterPresModel().allNotChecked;},get_exclude:function(){return this.get_filterPresModel().exclude;},get_isTiled:function(){return this.get_filterPresModel().isTiled;},get_isSearchable:function(){return this.get_filterPresModel().is_searchable;},get_summary:function(){return this.get_filterPresModel().summary;},get_underlyingDataSourceIsCube:function(){return this.get_filterPresModel().catIsHier;},get_condition:function(){return this.get_filterPresModel().condition;},get_limit:function(){return this.get_filterPresModel().limit;},get_rangeType:function(){return this.get_filterPresModel().rangeType;},get_catFilterTable:function(){return this.get_filterPresModel().table;},get_domainActualSize:function(){return this.get_catFilterTable().actual_size;},get_tuples:function(){return this.get_catFilterTable().tuples;}}
tab.DataDictionaryModel=function(parent){tab.DataDictionaryModel.initializeBase(this,[parent,new tab.PresModelPathItem('awy')]);}
tab.DataDictionaryModel.prototype={get_isEmpty:function(){return tab.MiscUtil.isNullOrEmpty(this.get_$6())||tab.MiscUtil.isNullOrEmpty(this.get_$6().awx);},get_$6:function(){return this.get_presModel();},update:function(dataPM){if(ss.isValue(this.get_$6())&&ss.isValue(dataPM)){var $0=dataPM.awx;if(ss.isValue($0)){var $1=this.get_$6().awx;if(ss.isValue($1)){var $dict1=$1;for(var $key2 in $dict1){var $2={key:$key2,value:$dict1[$key2]};if(!Object.keyExists($0,$2.key)){$0[$2.key]=$2.value;}}}var $dict3=$0;for(var $key4 in $dict3){var $3={key:$key4,value:$dict3[$key4]};if(ss.isNull($3.value)){delete $0[$3.key];}}}}this.presModel=dataPM;},getRawValue:function(dt,index){if(ss.isNullOrUndefined(this.get_$6())||ss.isNullOrUndefined(this.get_$6().awx)){return null;}var $0=Object.getKeyCount(this.get_$6().awx);for(var $1=0;$1<$0;$1++){var $2=this.get_$6().awx[$1.toString()];var $3=_.find($2.anr,function($p1_0){
return ($p1_0.aiy===dt);});if(!ss.isValue($3)){continue;}if(index<$3.vs.length){return $3.vs[index];}index-=$3.vs.length;}return null;}}
tab.HierarchicalFilterModel=function(parent,presModel){tab.HierarchicalFilterModel.initializeBase(this,[parent,presModel]);}
tab.HierarchicalFilterModel.prototype={get_filterType:function(){return 'Hierarchical';},get_hierarchyTables:function(){return this.get_filterPresModel().table;},get_levels:function(){return this.get_filterPresModel().levels;},get_isSearchable:function(){return this.get_filterPresModel().is_searchable;}}
tab.MapServerModel=function(parent){tab.MapServerModel.initializeBase(this,[parent,new tab.PresModelPathItem('map-server')]);}
tab.MapServerModel.prototype={add_newMapServerInfo:function(value){this.$9=ss.Delegate.combine(this.$9,value);},remove_newMapServerInfo:function(value){this.$9=ss.Delegate.remove(this.$9,value);},$9:null,get_useFastMaps:function(){return this.get_hasPresModel()&&this.get_mapServerPresModel().go;},get_hasPresModel:function(){return ss.isValue(this.get_presModel());},get_isAttributionVisible:function(){return this.get_mapServerPresModel().gp;},get_minZoom:function(){return this.get_mapServerPresModel().adf;},get_maxZoom:function(){return this.get_mapServerPresModel().adg;},get_zoom:function(){var $0=Math.log(this.get_mapServerPresModel().ade)/Math.LN2;return this.get_mapServerPresModel().add+$0;},get_centerLatitude:function(){return this.get_mapServerPresModel().adb;},get_centerLongitude:function(){return this.get_mapServerPresModel().adc;},get_tilePixelSize:function(){return 256;},get_numWorldRepeats:function(){return this.get_mapServerPresModel().ab3;},get_tileUrl:function(){var $0=this.get_mapServerPresModel();var $1;if($0.on.toString().startsWith('http://')||$0.on.toString().startsWith('https://')){$1='';}else{var $3=tab.WindowHelper.getLocation(window.self).protocol;$1=$3+'//';}$1+=$0.on;if(!$1.endsWith('/')&&!$0.oo.toString().startsWith('/')){$1+='/';}$1+=$0.oo;$1=$1.replaceAll('{K}',$0.ot);$1=$1.replaceAll('{L}',$0.os);var $2=tab.FloatUtil.isGreaterThanOrEqual(tab.BrowserSupport.get_devicePixelRatio(),2);$1=$1.replaceAll('{D}',($2)?'@2x':'');$1=$1.replaceAll('{X}','{x}');$1=$1.replaceAll('{Y}','{y}');$1=$1.replaceAll('{Z}','{z}');$1=$1.replaceAll('{P}','{p}');return $1;},get_hasValidTileLayer:function(){return this.get_mapServerPresModel().gq;},get_attributionUrl:function(){return this.get_mapServerPresModel().oq;},get_attributionText:function(){return this.get_mapServerPresModel().op;},get_attributionTextColor:function(){return this.get_mapServerPresModel().agn;},get_attributionTextSize:function(){return this.get_mapServerPresModel().or;},get_attributionBGColor:function(){return this.$A(this.get_mapServerPresModel().ago);},get_mapBGFillColor:function(){return this.$A(this.get_mapServerPresModel().agm);},get_waitTileFillColor:function(){return this.get_mapServerPresModel().agp;},get_hasWashout:function(){return this.get_mapServerPresModel().adj>0;},get_washoutColor:function(){var $0=Math.max(0,Math.min(1,this.get_mapServerPresModel().adj));return new tab.ColorModel(255,255,255,$0);},get_intermediateTileLevels:function(){return this.get_mapServerPresModel().ab2;},get_mapServerPresModel:function(){return this.presModel;},update:function(mapServerPresModel){this.simpleSwapToUpdate(mapServerPresModel,this.$9);},$A:function($p0){return tab.ColorModel.fromColorCode($p0||'rgb(255,255,255)').toString();}}
tab.QuantitativeFilterModel=function(parent,presModel){tab.QuantitativeFilterModel.initializeBase(this,[parent,presModel]);}
tab.QuantitativeFilterModel.prototype={get_filterType:function(){return 'Quantitative';},get_range:function(){return this.get_filterPresModel().range;},get_data:function(){return this.get_filterPresModel().data;},get_dateFormat:function(){return this.get_filterPresModel().date_format;},get_editingFormat:function(){return this.get_filterPresModel().editing_format;},get_format:function(){return this.get_filterPresModel().format;},get_calendarControlStartOfWeek:function(){return this.get_filterPresModel().first_day_of_week;},get_dataSourceStartOfWeek:function(){return this.get_filterPresModel().start_of_week;},get_quantitativeFilterTable:function(){return this.get_filterPresModel().table;},get_column:function(){return this.get_quantitativeFilterTable().column;},get_included:function(){return this.get_quantitativeFilterTable().included;},get_min:function(){return this.get_quantitativeFilterTable().min;},get_max:function(){return this.get_quantitativeFilterTable().max;}}
tab.RelativeDateFilterModel=function(parent,presModel){tab.RelativeDateFilterModel.initializeBase(this,[parent,presModel]);}
tab.RelativeDateFilterModel.prototype={get_filterType:function(){return (this.get_isRelativeDatePick())?'RelativeDatePick':'RelativeDate';},get_defaultFormat:function(){return this.get_filterPresModel().default_format;},get_fiscalYearStart:function(){return this.get_filterPresModel().fy;},get_noTime:function(){return this.get_filterPresModel().noTime;},get_isRelativeDatePick:function(){return this.get_filterPresModel().showRelDatePick;},get_text:function(){return this.get_filterPresModel().text;},get_relativeDateTable:function(){return this.get_filterPresModel().table;},get_periodType:function(){return this.get_relativeDateTable().periodType;},get_rangeType:function(){return this.get_relativeDateTable().rangeType;},get_rangeN:function(){return this.get_relativeDateTable().rangeN;},get_anchor:function(){return this.get_relativeDateTable().anchor;}}
tab.CategoricalLegendModel=function(parent,contentType,legendType){tab.CategoricalLegendModel.initializeBase(this,[parent,new tab.PresModelPathItem(contentType)]);this.$6=legendType;}
tab.CategoricalLegendModel.$A=function($p0,$p1){var $0;switch($p0){case 'color':case 'map':$0=($p1).ar7;break;case 'size':$0=($p1).asd;break;case 'shape':$0=($p1).asa;break;default:return null;}return $0;}
tab.CategoricalLegendModel.prototype={$6:null,add_legendChanged:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_legendChanged:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,add_legendNameChanged:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_legendNameChanged:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,get_worksheetName:function(){return this.get_$9().get_worksheetName();},get_id:function(){return this.get_legendNames().join(';')+this.$6;},get_catLegendPresModel:function(){return this.presModel;},get_isHighlightEnabled:function(){return (this.get_catLegendPresModel().du||false);},get_isHighlightAllowed:function(){return (this.get_catLegendPresModel().dt||false);},get_isOneWay:function(){return (this.get_catLegendPresModel().h||false);},get_fieldCaptions:function(){return this.get_catLegendPresModel().vl;},get_legendNames:function(){return this.get_catLegendPresModel().afy;},get_legendType:function(){return this.$6;},get_items:function(){return tab.CategoricalLegendModel.$A(this.get_legendType(),this.get_catLegendPresModel());},get_$9:function(){var $0=Type.safeCast(this.get_parent(),tab.ZoneContentWrapperModel);return $0.get_zone();},findItemById:function(objectId){return _.find(this.get_items(),function($p1_0){
return $p1_0.abi===objectId;});},update:function(catLegendPresModel){if(this.isNewPresModelSameAsOld(catLegendPresModel)){return;}var $0=this.get_catLegendPresModel();this.swapAndCopyPresModel(catLegendPresModel);if(ss.isValue($0)&&!_.isEqual($0.afy,catLegendPresModel.afy)){this.raiseEvent(this.$8);}this.raiseEvent(this.$7);}}
tab.ColorModel=function(r,g,b,a){this.r=r;this.g=g;this.b=b;this.a=a;}
tab.ColorModel.fromArgbInt=function(color){var $0=(color&16711680)>>>16;var $1=(color&65280)>>>8;var $2=(color&255);var $3=(color&4278190080)>>>24;return new tab.ColorModel($0,$1,$2,$3/255);}
tab.ColorModel.fromColorCode=function(colorCode){var $0=function($p1_0){
return Math.min(Math.max($p1_0,0),255);};var $1;var $2;var $3;var $4=1;var $5=tab.ColorModel.$2.exec(colorCode);if(ss.isValue($5)){$1=$0(parseInt($5[1],16));$2=$0(parseInt($5[2],16));$3=$0(parseInt($5[3],16));return new tab.ColorModel($1,$2,$3,$4);}$5=tab.ColorModel.$3.exec(colorCode);if(ss.isValue($5)){$1=$0(parseInt($5[1],10));$2=$0(parseInt($5[2],10));$3=$0(parseInt($5[3],10));return new tab.ColorModel($1,$2,$3,$4);}$5=tab.ColorModel.$4.exec(colorCode);if(ss.isValue($5)){$1=$0(parseInt($5[1],10));$2=$0(parseInt($5[2],10));$3=$0(parseInt($5[3],10));$4=parseFloat($5[4]);if($4<=1){$4=$4*255;}if($4>255){$4=255;}if($4<0){$4=0;}$4=$4/255;return new tab.ColorModel($1,$2,$3,$4);}throw new Error('Unknown color format: '+colorCode);}
tab.ColorModel.fromColorModelPlusAlpha=function(rgb,a){return new tab.ColorModel(rgb.get_r(),rgb.get_g(),rgb.get_b(),a);}
tab.ColorModel.convertColorForCanvas=function(colorFromBackend){var $0=tab.ColorModel.fromColorCode(colorFromBackend);return $0.toString();}
tab.ColorModel.isDark=function(colorModel,darkThreshold){var $0=tab.ColorModel.alphaBlend(colorModel,tab.ColorModel.$1);return Math.max($0.get_r(),$0.get_g(),$0.get_b())<=darkThreshold;}
tab.ColorModel.alphaBlend=function(transparentColor,opaqueColor){if(transparentColor.get_a()<1){var $0=1-transparentColor.get_a();var $1=(opaqueColor.get_r()*$0)+(transparentColor.get_r()*transparentColor.get_a());var $2=(opaqueColor.get_g()*$0)+(transparentColor.get_g()*transparentColor.get_a());var $3=(opaqueColor.get_b()*$0)+(transparentColor.get_b()*transparentColor.get_a());return new tab.ColorModel(parseInt($1),parseInt($2),parseInt($3),1);}else{return transparentColor;}}
tab.ColorModel.isFullyTransparent=function(colorModel){return colorModel.get_a()===0;}
tab.ColorModel.alphaComposite=function(src,dst){if(dst.get_a()>=0.99999){return tab.ColorModel.alphaCompositeSolidDest(src,dst);}var $0=1-src.get_a();var $1=src.get_a()+(dst.get_a()*$0);return new tab.ColorModel(tab.ColorModel.$6(src.get_r(),src.get_a(),dst.get_r(),dst.get_a(),$1),tab.ColorModel.$6(src.get_g(),src.get_a(),dst.get_g(),dst.get_a(),$1),tab.ColorModel.$6(src.get_b(),src.get_a(),dst.get_b(),dst.get_a(),$1),$1);}
tab.ColorModel.alphaCompositeSolidDest=function(src,dst){return new tab.ColorModel(tab.ColorModel.$7(src.get_r(),src.get_a(),dst.get_r()),tab.ColorModel.$7(src.get_g(),src.get_a(),dst.get_g()),tab.ColorModel.$7(src.get_b(),src.get_a(),dst.get_b()),1);}
tab.ColorModel.$5=function($p0,$p1){var $0=$p0.toString(16);while($0.length<$p1){$0='0'+$0;}return $0;}
tab.ColorModel.$6=function($p0,$p1,$p2,$p3,$p4){return Math.round(((($p0*$p1)+(($p2*$p3)*(1-$p1)))/$p4));}
tab.ColorModel.$7=function($p0,$p1,$p2){return Math.round(($p0*$p1)+($p2*(1-$p1)));}
tab.ColorModel.$8=function($p0){if($p0<=0.04045){return $p0/12.92;}else{return Math.pow(($p0+0.055)/1.055,2.4);}}
tab.ColorModel.$9=function($p0){if($p0>0.0088564){return Math.pow($p0,0.3333333);}else{return (7.787037*$p0)+0.137931;}}
tab.ColorModel.prototype={r:0,g:0,b:0,a:0,get_r:function(){return this.r;},get_g:function(){return this.g;},get_b:function(){return this.b;},get_a:function(){return this.a;},toString:function(){return (this.a>=0.99999)?this.toRgb():this.toRgba();},equals:function(m){return ss.isValue(m)&&this.r===m.r&&this.g===m.g&&this.b===m.b&&this.a===m.a;},luminance:function(){var $0=tab.ColorModel.$8(this.r/255);var $1=tab.ColorModel.$8(this.g/255);var $2=tab.ColorModel.$8(this.b/255);var $3=(0.212671*$0)+(0.71516*$1)+(0.072169*$2);var $4=(116*tab.ColorModel.$9($3))-16;return $4;},toRgba:function(){return new ss.StringBuilder('rgba(').append(this.r).append(',').append(this.g).append(',').append(this.b).append(',').append(this.a).append(')').toString();},toRgba255:function(){return new ss.StringBuilder('rgba(').append(this.r).append(',').append(this.g).append(',').append(this.b).append(',').append(this.a*255).append(')').toString();},toRgb:function(){return new ss.StringBuilder('rgb(').append(this.r).append(',').append(this.g).append(',').append(this.b).append(')').toString();},toArgbHex:function(){var $0=this.a*255;return new ss.StringBuilder('#').append(tab.ColorModel.$5($0,2)).append(tab.ColorModel.$5(this.r,2)).append(tab.ColorModel.$5(this.g,2)).append(tab.ColorModel.$5(this.b,2)).toString();},toArgbInt:function(){var $0=this.a*255;return ($0<<24)+(this.r<<16)+(this.g<<8)+this.b;}}
tab.QuickFilterDisplayModel=function(parent){tab.QuickFilterDisplayModel.initializeBase(this,[parent,new tab.PresModelPathItem('quickFilterDisplay')]);}
tab.QuickFilterDisplayModel.prototype={$6:null,$7:null,$8:null,add_quickFilterDisplayUpdated:function(value){this.$9=ss.Delegate.combine(this.$9,value);},remove_quickFilterDisplayUpdated:function(value){this.$9=ss.Delegate.remove(this.$9,value);},$9:null,get_quickFilterTitle:function(){return this.get_quickFilterDisplayPresModel().ax2;},get_quickFilterCommands:function(){return this.get_quickFilterDisplayPresModel().aoq;},get_quickFilterModeMatrix:function(){var $0=tab.FeatureParamsLookup.getBool(tab.FeatureParam.newFilter);if(ss.isValue($0)&&$0){return this.$A();}else{return null;}},get_quickFilterDisplayPresModel:function(){return this.presModel;},get_zone:function(){return this.get_zoneModel().get_presModel();},get_frame:function(){return this.$6;},get_zoneModel:function(){return (this.get_parent()).get_zone();},update:function(newQuickFilterDisplayPresModel,newFrame){var $0=!_.isEqual(this.$6,newFrame);this.$6=newFrame;if(this.isNewPresModelSameAsOld(newQuickFilterDisplayPresModel)){if($0){this.raiseEvent(this.$9,newQuickFilterDisplayPresModel);}return;}if(ss.isValue(newQuickFilterDisplayPresModel)&&ss.isValue(newQuickFilterDisplayPresModel.ax2)){this.$7=new tab.TextRegionModel(this,'ax2');}this.$7.update(newQuickFilterDisplayPresModel.ax2);if(ss.isValue(newQuickFilterDisplayPresModel)&&ss.isValue(newQuickFilterDisplayPresModel.aoq)){this.$8=new tab.CommandsModel(this);}this.$8.update(newQuickFilterDisplayPresModel.aoq);this.simpleSwapToUpdate(newQuickFilterDisplayPresModel,this.$9,newQuickFilterDisplayPresModel);},$A:function(){var $0=[];var $1=['year','qtr','month','day','hour','minute','second','week','weekday','month-year','mdy','none','trunc-year','trunc-qtr','trunc-month','trunc-week','trunc-day','trunc-hour','trunc-minute','trunc-second'];var $2=['check-list','radio-list','dropdown','slider','pattern','type-in-list','check-dropdown'];var $3=['min-max','min-only','max-only','rel-date','rel-pick'];var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $4=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($2);while($enum2.moveNext()){var $5=$enum2.current;var $6={};$6.ag9=$4;$6.axp=$5;$0.add($6);}var $enum3=ss.IEnumerator.getEnumerator($3);while($enum3.moveNext()){var $7=$enum3.current;var $8={};$8.ag9=$4;$8.axr=$7;$0.add($8);}}return $0;}}
tab.ShelvesModel=function(parent){this.$6=[];tab.ShelvesModel.initializeBase(this,[parent,new tab.PresModelPathItem('shelves',1)]);}
tab.ShelvesModel.createShelfModel=function(parent,shelf,schema,index){var $0=new tab.ShelfModel(new tab.ShelfListArrayModel(parent),index);$0.update(shelf,schema);return $0;}
tab.ShelvesModel.prototype={add_newShelves:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newShelves:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_shelves:function(){return this.$6;},findShelf:function(st){return this.$9(this.$6,st);},update:function(pm,schema,defaultPaneSpecId){if(this.isNewPresModelSameAsOld(pm)){return;}this.swapAndCopyPresModel(pm);this.$8(pm,schema,defaultPaneSpecId);this.raiseEvent(this.$7);},$8:function($p0,$p1,$p2){if(ss.isValue($p0)){var $0=this.$6.clone();for(var $1=0;$1<$p0.apt.length;$1++){var $2=$p0.apt[$1];if(ss.isNullOrUndefined($2.wn)&&ss.isValue($p2)){$2.wn=$p2;}var $3=_.find(this.$6,function($p1_0){
return $p1_0.get_shelfType()===$2.ajv&&$p1_0.get_paneId()===($2.wn||0);});if(ss.isValue($3)){$0.remove($3);$3.update($2,$p1);}else{this.$6.add(tab.ShelvesModel.createShelfModel(this,$2,$p1,$1));}}var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $4=$enum1.current;this.$6.remove($4);}}},$9:function($p0,$p1){return _.find($p0,function($p1_0){
return $p1_0.get_shelfType()===$p1;});}}
tab.ShelfListArrayModel=function(parent){tab.ShelfListArrayModel.initializeBase(this,[parent,new tab.PresModelPathItem('shelfList',1)]);}
tab.StoryPointsModel=function(parent){tab.StoryPointsModel.initializeBase(this,[parent,new tab.PresModelPathItem('azk')]);}
tab.StoryPointsModel.prototype={$6:null,get_currentStoryPoint:function(){return this.$6;},update:function(storyPoint){if(!ss.isValue(this.$6)){this.$6=new tab.StoryPointModel(this,storyPoint.abq);}this.$6.update(storyPoint);}}
tab.ColorPaletteCollectionModel=function(parent){tab.ColorPaletteCollectionModel.initializeBase(this,[parent,new tab.PresModelPathItem('atf')]);}
tab.ColorPaletteCollectionModel.prototype={get_paletteCollectionPresModel:function(){return this.presModel;},get_qColorPaletteGroups:function(){return this.get_paletteCollectionPresModel().ath;},get_qColorPaletteGroupCount:function(){return this.get_paletteCollectionPresModel().ath.length;},get_catColorPaletteGroupCount:function(){return this.get_paletteCollectionPresModel().ati.length;},get_catColorPaletteGroups:function(){return this.get_paletteCollectionPresModel().ati;},get_colorPalettes:function(){var $0=this.presModel;if(ss.isNullOrUndefined($0)){return [];}return $0.atf;},colorPaletteGroup:function(groupPresModel){var $0=groupPresModel.zt;return _.map($0,ss.Delegate.create(this,function($p1_0){
return this.get_colorPalettes()[$p1_0];}));},qColorPaletteGroup:function(groupIndex){return this.colorPaletteGroup(this.get_qColorPaletteGroups()[groupIndex]);},catColorPaletteGroup:function(groupIndex){return this.colorPaletteGroup(this.get_catColorPaletteGroups()[groupIndex]);},update:function(newColorPalettes){this.simpleSwapToUpdate(newColorPalettes,null);}}
tab.FlipboardModel=function(parent){tab.FlipboardModel.initializeBase(this,[parent,new tab.PresModelPathItem('azl')]);this.$6=new tab.StoryPointsModel(this);}
tab.FlipboardModel.prototype={$6:null,add_invalidateZone:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_invalidateZone:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_flipboardPresModel:function(){return this.presModel;},get_storyPointModel:function(){return this.$6.get_currentStoryPoint();},get_dashboardModel:function(){return this.get_storyPointModel().get_dashboardModel();},get_zoneId:function(){return (this.get_parent()).get_zone().get_zoneId();},get_currentStoryPointId:function(){return this.get_flipboardPresModel().abr;},invalidated:function(){this.raiseEvent(this.$7);},update:function(flipboardPresModel){if(ss.isValue(flipboardPresModel.abr)){this.$6.update(flipboardPresModel.azk[flipboardPresModel.abr.toString()]);}this.swapPresModel(flipboardPresModel);}}
tab.QuantitativeColorLegendModel=function(parent,contentType){tab.QuantitativeColorLegendModel.initializeBase(this,[parent,new tab.PresModelPathItem(contentType)]);}
tab.QuantitativeColorLegendModel.prototype={add_legendChanged:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_legendChanged:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_quantColorLegendPresModel:function(){return this.presModel;},get_worksheetName:function(){return this.get_$7().get_worksheetName();},get_$7:function(){var $0=Type.safeCast(this.get_parent(),tab.ZoneContentWrapperModel);return $0.get_zone();},update:function(quantLegendPresModel){if(this.isNewPresModelSameAsOld(quantLegendPresModel)){return;}this.swapAndCopyPresModel(quantLegendPresModel);this.raiseEvent(this.$6);}}
tab.StoryPointModel=function(parent,storyPointId){tab.StoryPointModel.initializeBase(this,[parent,new tab.PresModelPathItem(storyPointId.toString(),0)]);this.$6=new tab.DashboardModel(this,'dashboardPresModel');}
tab.StoryPointModel.prototype={$6:null,add_dashboardDisposal:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_dashboardDisposal:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,add_newStoryPoint:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_newStoryPoint:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,get_dashboardModel:function(){return this.$6;},get_isBackingSheetDashboard:function(){return this.get_$9().ay;},get_$9:function(){return this.presModel;},get_storyPointId:function(){return this.get_$9().abq;},update:function(storyPointPresModel){if(ss.isValue(this.get_$9())&&(this.get_storyPointId()!==storyPointPresModel.abq)){this.set_presModelKey(new tab.PresModelPathItem(storyPointPresModel.abq.toString(),0));if(ss.isValue(this.$6)){this.raiseEvent(this.$7);this.$6=null;}this.$6=new tab.DashboardModel(this,'dashboardPresModel');this.$A(storyPointPresModel.at2);this.raiseEvent(this.$8);}else{this.$A(storyPointPresModel.at2);}this.swapPresModel(storyPointPresModel);},$A:function($p0){if(ss.isValue($p0)){this.get_dashboardModel().update($p0);}}}
tab.FieldModel=function(parent){tab.FieldModel.initializeBase(this,[parent,new tab.PresModelPathItem('ao6')]);}
tab.FieldModel.prototype={get_dataSourceModel:function(){return this.get_parent();},get_canHaveChildren:function(){return false;},get_isUnsortedContainer:function(){return false;},get_isSelectable:function(){return !this.get_isUnsortedContainer();},get_isDraggable:function(){return this.get_isSelectable()&&!this.get_isHidden()&&!this.get_isInvalid();},get_childToSelect:function(){return (this.get_isUnsortedContainer())?null:this;},get_isDerived:function(){if(this.get_canHaveChildren()){return false;}return this.get_isGenerated()||this.get_isAutoColumn()||(this.get_isColumn()&&this.asColumn().get_isInstance());},get_isMeasureNamesOrValues:function(){return this.get_localName()===tab.FieldModel.nameOfMeasuresColumn||this.get_localName()===tab.FieldModel.nameOfMeasureValuesColumn;},get_field:function(){return this.presModel;},get_fieldIconResource:function(){return this.get_dataSourceModel().getFieldIconResource(this.get_field().abs);},get_isInstance:function(){return !this.get_isGenerated()&&this.get_isDerived();},get_isHidden:function(){return this.get_field().b9||this.get_isInstance();},get_isInvalid:function(){return this.get_field().ak;},get_isGenerated:function(){return this.get_field().cd;},get_isAutoColumn:function(){return this.get_field().ce;},get_isAllowedInCalcs:function(){return this.get_field().d2;},get_isUnnamedCalc:function(){return this.get_field().d7||false;},get_globalName:function(){return this.get_field().afc;},get_localName:function(){return this.get_field().mb;},get_description:function(){return this.get_field().rt;},get_userCaption:function(){return this.get_field().rz;},get_ordinal:function(){return this.get_field().xu;},get_isColumn:function(){return this.get_instanceType()==='column'||this.get_instanceType()==='group';},get_isGroup:function(){return this.get_instanceType()==='group';},get_isCubeDimension:function(){return this.get_instanceType()==='cubeDimension';},get_isDrillPath:function(){return this.get_instanceType()==='drillPath';},get_isCubeHierarchy:function(){return this.get_instanceType()==='cubeHierarchy';},get_isCubeFolder:function(){return this.get_instanceType()==='cubeFolder';},get_isFolder:function(){return this.get_instanceType()==='folder';},get_isRelationalTable:function(){return this.get_instanceType()==='relationalTable';},get_defaultRole:function(){return (this.get_field()).aj5;},get_role:function(){return (this.get_field()).aj4;},get_defaultFieldType:function(){return (this.get_isColumn())?(this.get_field()).aj7:'unknown';},get_fieldType:function(){return (this.get_isColumn())?(this.get_field()).aj6:'unknown';},get_displayName:function(){return (this.get_isDrillPath())?(this.get_localName()||this.get_description()):(this.get_description()||this.get_localName());},get_tooltip:function(){return (this.get_userCaption()||this.get_description()||this.get_displayName());},matchesFolderRole:function(section){if(this.get_isFolder()){return this.asFolder().get_folderRole()===section;}else{switch(section){case 'dimensions':return this.get_defaultRole()==='dimension';case 'measure':return this.get_defaultRole()==='measure';case 'groups':return this.get_isGroup();case 'parameters':return true;default:return false;}}},asColumn:function(){return Type.safeCast(this,tab.FieldColumnModel);},asGroup:function(){return Type.safeCast(this,tab.GroupModel);},asDimension:function(){return Type.safeCast(this,tab.CubeDimensionModel);},asHierarchy:function(){return Type.safeCast(this,tab.CubeHierarchyModel);},asCubeFolder:function(){return Type.safeCast(this,tab.CubeFolderModel);},asFolder:function(){return Type.safeCast(this,tab.FolderModel);},asDrillPath:function(){return Type.safeCast(this,tab.DrillPathModel);},asRelationalTable:function(){return Type.safeCast(this,tab.RelationalTableModel);}}
tab.FieldColumnModel=function(parent){tab.FieldColumnModel.initializeBase(this,[parent]);}
tab.FieldColumnModel.prototype={fieldCol:null,get_instanceType:function(){return 'column';},get_dataType:function(){return this.fieldCol.aiy;},get_defaultRole:function(){return this.fieldCol.aj5;},get_role:function(){return this.fieldCol.aj4;},get_baseColumnName:function(){return (this.get_isInstance())?this.fieldCol.afl:this.get_globalName();},get_baseColumn:function(){return (this.get_isInstance())?(this.get_parent()).findField(this.get_baseColumnName()):this;},get_isInstance:function(){return !ss.isNullOrUndefined(this.fieldCol.fa)&&this.fieldCol.fa;},get_isAllowedInCalcs:function(){var $0=this.get_baseColumn();return ($0===this)?tab.FieldColumnModel.callBaseMethod(this, 'get_isAllowedInCalcs'):$0.get_isAllowedInCalcs();},get_aggType:function(){return this.fieldCol.ag9;},get_defaultAggType:function(){return this.fieldCol.aha;},get_isCalculated:function(){return this.fieldCol.d1;},update:function(pm){this.fieldCol=pm;this.swapAndCopyPresModel(pm);}}
tab.GroupModel=function(parent){tab.GroupModel.initializeBase(this,[parent]);}
tab.GroupModel.prototype={get_instanceType:function(){return 'group';},get_isCombinedField:function(){return ((this.fieldCol).cf||false);}}
tab.DrillPathModel=function(parent){tab.DrillPathModel.initializeBase(this,[parent]);}
tab.DrillPathModel.prototype={$6:null,get_levels:function(){return this.$6;},get_childToSelect:function(){return this.$6[0];},get_instanceType:function(){return 'drillPath';},get_canHaveChildren:function(){return true;},update:function(pm,newLevels){this.swapAndCopyPresModel(pm);this.$6=newLevels;}}
tab.CubeHierarchyModel=function(parent){tab.CubeHierarchyModel.initializeBase(this,[parent]);}
tab.CubeHierarchyModel.prototype={$6:null,get_levels:function(){return this.$6;},get_childToSelect:function(){return this.$6[0];},get_instanceType:function(){return 'cubeHierarchy';},get_canHaveChildren:function(){return true;},update:function(pm,newLevels){this.swapAndCopyPresModel(pm);this.$6=newLevels;}}
tab.FolderModel=function(parent){tab.FolderModel.initializeBase(this,[parent]);}
tab.FolderModel.prototype={$6:null,get_fields:function(){return this.$6;},get_folderRole:function(){return (this.presModel).ahw;},get_instanceType:function(){return 'folder';},get_canHaveChildren:function(){return true;},get_isUnsortedContainer:function(){return true;},update:function(pm,newFields){this.swapAndCopyPresModel(pm);this.$6=newFields;}}
tab.CubeFolderModel=function(parent){tab.CubeFolderModel.initializeBase(this,[parent]);}
tab.CubeFolderModel.prototype={$6:null,$7:null,get_hierarchies:function(){return this.$6;},get_childToSelect:function(){return this.$6[0];},get_columns:function(){return this.$7;},get_instanceType:function(){return 'cubeFolder';},get_canHaveChildren:function(){return true;},get_isUnsortedContainer:function(){return true;},update:function(pm,newHierarchies,newColumns){this.swapAndCopyPresModel(pm);this.$6=newHierarchies;this.$7=newColumns;}}
tab.CubeDimensionModel=function(parent){tab.CubeDimensionModel.initializeBase(this,[parent]);}
tab.CubeDimensionModel.prototype={$6:null,$7:null,$8:null,get_hierarchies:function(){return this.$6;},get_childToSelect:function(){var $0=(this.presModel).ng;if(!String.isNullOrEmpty($0)){var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $2=$enum1.current;if($2.get_localName()===$0){return $2.get_levels()[0];}}}var $1=[];var $enum2=ss.IEnumerator.getEnumerator(this.$6);while($enum2.moveNext()){var $3=$enum2.current;$1.add($3);}var $enum3=ss.IEnumerator.getEnumerator(this.$7);while($enum3.moveNext()){var $4=$enum3.current;var $enum4=ss.IEnumerator.getEnumerator($4.get_hierarchies());while($enum4.moveNext()){var $5=$enum4.current;$1.add($5);}}$1.sort(function($p1_0,$p1_1){
if($p1_0.get_levels().length>1&&$p1_1.get_levels().length<=1){return -1;}else if($p1_0.get_levels().length<=1&&$p1_1.get_levels().length>1){return 1;}else{return 0;}});return ($1.length>0)?$1[0].get_levels()[0]:null;},get_folders:function(){return this.$7;},get_attributes:function(){return this.$8;},get_instanceType:function(){return 'cubeDimension';},get_canHaveChildren:function(){return true;},update:function(pm,newHierarchies,newFolders,newAttributes){this.swapAndCopyPresModel(pm);this.$6=newHierarchies;this.$7=newFolders;this.$8=newAttributes;}}
tab.RelationalTableModel=function(parent){tab.RelationalTableModel.initializeBase(this,[parent]);}
tab.RelationalTableModel.prototype={$6:null,get_columns:function(){return this.$6;},get_instanceType:function(){return 'relationalTable';},get_canHaveChildren:function(){return true;},get_isUnsortedContainer:function(){return true;},update:function(pm,newColumns){this.swapAndCopyPresModel(pm);this.$6=newColumns;}}
tab.MultipleFieldsModel=function(){tab.MultipleFieldsModel.initializeBase(this,[null]);var $0={};$0.afc='';this.swapAndCopyPresModel($0);}
tab.MultipleFieldsModel.prototype={get_instanceType:function(){return 'multiple';}}
tab.FlipboardNavigatorModel=function(parent){tab.FlipboardNavigatorModel.initializeBase(this,[parent,new tab.PresModelPathItem('aze')]);}
tab.FlipboardNavigatorModel.prototype={add_newFlipboardNav:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newFlipboardNav:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_flipboardNavPresModel:function(){return this.presModel;},get_currentPointIndex:function(){return this.get_flipboardNavPresModel().xs;},get_storyPoints:function(){return this.get_flipboardNavPresModel().azd;},get_zone:function(){return (this.get_parent()).get_zone();},update:function(flipboardNavPresModel){this.simpleSwapToUpdate(flipboardNavPresModel,this.$6);}}
tab.ImageZoneModel=function(parent){tab.ImageZoneModel.initializeBase(this,[parent,new tab.PresModelPathItem('imagezone')]);this.$6=parent.get_zone();}
tab.ImageZoneModel.prototype={$6:null,add_newImageZone:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newImageZone:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_zone:function(){return this.$6.get_presModel();},update:function(imageZonePresModel){this.simpleSwapToUpdate(imageZonePresModel,this.$7);}}
tab.ToolbarModel=function(parent){tab.ToolbarModel.initializeBase(this,[parent,new tab.PresModelPathItem('at0')]);}
tab.ToolbarModel.prototype={add_newToolbar:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newToolbar:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_toolbarPresModel:function(){return this.presModel;},get_vizCommandItems:function(){var $0=null;if(ss.isValue(this.get_toolbarPresModel())){var $1=tab.CommandsPresModelWrapper.create(this.get_toolbarPresModel().aos);$0=$1.get_commandItems();}return $0;},get_nonVizCommandItems:function(){var $0=null;if(ss.isValue(this.get_toolbarPresModel())){var $1=tab.CommandsPresModelWrapper.create(this.get_toolbarPresModel().aot);$0=$1.get_commandItems();}return $0;},get_downloadableItems:function(){return this.get_toolbarPresModel().atx;},update:function(toolbarPresModel){if(ss.isValue(toolbarPresModel)){this.simpleSwapToUpdate(toolbarPresModel,this.$6);}}}
tab.WebZoneModel=function(parent){tab.WebZoneModel.initializeBase(this,[parent,new tab.PresModelPathItem('webzone')]);this.$6=parent.get_zone();}
tab.WebZoneModel.prototype={$6:null,add_newWebZone:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newWebZone:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_zone:function(){return this.$6.get_presModel();},update:function(webZonePresModel){this.simpleSwapToUpdate(webZonePresModel,this.$7);}}
tab.LegacyLegendModel=function(parent){tab.LegacyLegendModel.initializeBase(this,[parent,new tab.PresModelPathItem('serverRenderedLegend')]);}
tab.LegacyLegendModel.prototype={add_newLegacyLegend:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newLegacyLegend:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,update:function(newPresModel){this.simpleSwapToUpdate(newPresModel,this.$6);}}
tab.CustomizedView=function(){}
tab.CustomizedView.prototype={id:null,name:null,urlId:null,startViewId:null,isPublic:false,owner:null}
tab.ParameterCtrlModel=function(parent){tab.ParameterCtrlModel.initializeBase(this,[parent,new tab.PresModelPathItem('parameterCtrl')]);}
tab.ParameterCtrlModel.prototype={$6:null,add_newParameterCtrl:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newParameterCtrl:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_title:function(){return tableau.format.stripFormattedText((this.get_parameterCtrlPresModel().amp).title);},get_parameterCtrlPresModel:function(){return this.presModel;},get_parameterCtrlJsonPresModel:function(){return this.get_parameterCtrlPresModel().amp;},get_zone:function(){return this.get_zoneModel().get_presModel();},get_frame:function(){return this.$6;},get_zoneModel:function(){return (this.get_parent()).get_zone();},update:function(newPresModel,newFrame){this.$6=newFrame;this.simpleSwapToUpdate(newPresModel,this.$7,newPresModel);}}
tab.PageModel=function(parent){tab.PageModel.initializeBase(this,[parent,new tab.PresModelPathItem('page')]);this.$6=parent.get_zone();}
tab.PageModel.prototype={$6:null,$7:null,add_newPage:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_newPage:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,get_title:function(){return tableau.format.stripFormattedText(this.get_pagePresModel().v6);},get_pagePresModel:function(){return this.presModel;},get_zone:function(){return this.$6.get_presModel();},get_frame:function(){return this.$7;},get_zoneModel:function(){return this.$6;},update:function(pagePresModel,newFrame){this.$7=newFrame;this.simpleSwapToUpdate(pagePresModel,this.$8,pagePresModel);}}
tab.ViewGeometryModel=function(parent){tab.ViewGeometryModel.initializeBase(this,[parent,new tab.PresModelPathItem('geometry')]);}
tab.ViewGeometryModel.prototype={add_newViewGeometry:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newViewGeometry:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,update:function(newPresModel){if(!this.isNewPresModelSameAsOld(newPresModel)){this.presModel=newPresModel;this.raiseEvent(this.$6);}}}
tab.FilterModel=function(parent,presModel){tab.FilterModel.initializeBase(this,[parent,new tab.PresModelPathItem('filter['+presModel.name.join('_')+']')]);this.presModel=presModel;}
tab.FilterModel.$7=function($p0){return ss.isValue($p0)&&tableau.format.isDateTimeWithNonMidnightTime($p0);}
tab.FilterModel.isQuantitativeTimestampFilter=function(filterState,min,max){var $0=tab.FilterModel.$7(min)||tab.FilterModel.$7(max);if(!$0&&ss.isValue(filterState)){if(ss.isValue(filterState.data)){$0=$0||tab.FilterModel.$7(filterState.data.min)||tab.FilterModel.$7(filterState.data.max);}if(!$0&&ss.isValue(filterState.range)){$0=$0||tab.FilterModel.$7(filterState.range.min)||tab.FilterModel.$7(filterState.range.max);}}return $0;}
tab.FilterModel.$8=function($p0){return ($p0.t===tableau.types.DataType.DT_TIMESTAMP||$p0.t===tableau.types.DataType.DT_DATE);}
tab.FilterModel.isQuantitativeDateFilter=function(filterState,min,max){if(ss.isValue(min)){return tab.FilterModel.$8(min);}else if(ss.isValue(max)){return tab.FilterModel.$8(max);}else if(ss.isValue(filterState)){if(ss.isValue(filterState.data)){if(ss.isValue(filterState.data.min)){return tab.FilterModel.$8(filterState.data.min);}else if(ss.isValue(filterState.data.max)){return tab.FilterModel.$8(filterState.data.max);}}if(ss.isValue(filterState.range)){if(ss.isValue(filterState.range.min)){return tab.FilterModel.$8(filterState.range.min);}else if(ss.isValue(filterState.range.max)){return tab.FilterModel.$8(filterState.range.max);}}}return false;}
tab.FilterModel.isNormalValue=function(f){return ss.isValue(f)&&(ss.isNullOrUndefined(f.s)||f.s===tableau.types.DataSpecial.DS_NORMAL)&&ss.isValue(f.v);}
tab.FilterModel.timestampsWithSameDateOrNull=function(values){var $0=null;var $enum1=ss.IEnumerator.getEnumerator(values);while($enum1.moveNext()){var $1=$enum1.current;if(ss.isNullOrUndefined($1)||$1.s===tableau.types.DataSpecial.DS_NULL||(ss.isNullOrUndefined($1.v)&&$1.t===tableau.types.DataType.DT_TIMESTAMP)){continue;}if(!tab.FilterModel.isNormalValue($1)||$1.t!==tableau.types.DataType.DT_TIMESTAMP){return false;}var $2=($1.v>=0)?Math.floor($1.v):Math.ceil($1.v);if(ss.isValue($0)&&$2!==$0){return false;}$0=$2;}return ss.isValue($0);}
tab.FilterModel.prototype={add_filterUpdated:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_filterUpdated:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_filterPresModel:function(){return this.get_presModel();},get_filterType:function(){switch(this.get_filterPresModel().type){case 'Q':return 'Quantitative';case 'H':return 'Hierarchical';case 'C':return 'Categorical';case 'RD':if(this.get_filterPresModel().showRelDatePick){return 'RelativeDatePick';}else{return 'RelativeDate';}default:return 'FilterDefault';}},get_caption:function(){return this.get_filterPresModel().caption;},get_fieldCaption:function(){return this.get_filterPresModel().fieldCaption;},get_fieldName:function(){return this.get_filterPresModel().fieldName;},get_datasourceName:function(){return this.get_filterPresModel().fieldDatasource;},get_domains:function(){return this.get_filterPresModel().domains;},get_name:function(){return this.get_filterPresModel().name;},get_role:function(){return this.get_filterPresModel().role;},get_targetSheets:function(){return this.get_filterPresModel().targetSheets;},get_globalFieldName:function(){var $0=this.get_presModel();var $1=new String();$1='[';for(var $2=0;$2<$0.name.length;++$2){if($1.endsWith(']')){$1+='.';$1+='[';}$1+=$0.name[$2];$1+=']';}return $1;},update:function(newFilterPresModel){if(!this.isNewPresModelSameAsOld(newFilterPresModel)){this.presModel=newFilterPresModel;this.raiseEvent(this.$6);}else if(ss.isValue(newFilterPresModel)&&(newFilterPresModel).isTiled){this.raiseEvent(this.$6);}}}
tab.SceneModel=function(parent){this.$7={};this.$8=[];this.$9=[];tab.SceneModel.initializeBase(this,[parent,new tab.PresModelPathItem('aua')]);this.$A=[];this.$B=[];}
tab.SceneModel.$E=function($p0,$p1){if(Object.keyExists($p0,'background')){var $0=$p0['background'].get_visualListPresModel().au0;var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;if($1.ag5==='avh'){var $2=$1;return tab.ColorModel.fromColorCode($2.agb);}}}return (ss.isValue($p1.agd))?tab.ColorModel.fromColorCode($p1.agd):tab.SceneModel.$6;}
tab.SceneModel.prototype={$A:null,$B:null,$C:null,add_newSceneModel:function(value){this.$D=ss.Delegate.combine(this.$D,value);},remove_newSceneModel:function(value){this.$D=ss.Delegate.remove(this.$D,value);},$D:null,get_scenePresModel:function(){return this.presModel;},get_visualListModels:function(){return this.$7;},get_refLineVisualLists:function(){return this.$A;},get_trendLineVisualLists:function(){return this.$B;},get_drawFirstParts:function(){return this.$8;},get_drawLastParts:function(){return this.$9;},get_backgroundColor:function(){return this.$C;},get_paneDescriptorCount:function(){return Object.getKeyCount(this.get_scenePresModel().avs);},update:function(scenePresModel){if(this.isNewPresModelSameAsOld(scenePresModel)){return;}this.$10(scenePresModel);if(ss.isValue(scenePresModel.aue)){this.$8.clear();var $enum1=ss.IEnumerator.getEnumerator(scenePresModel.aue);while($enum1.moveNext()){var $0=$enum1.current;var $1=$0.aj8;if(!Object.keyExists(this.$7,$1)){this.$7[$1]=new tab.VisualListModel(this);}if(this.$8.contains($1)){continue;}this.$8.add($1);this.$7[$1].update($0);}}if(ss.isValue(scenePresModel.aug)){this.$9.clear();var $enum2=ss.IEnumerator.getEnumerator(scenePresModel.aug);while($enum2.moveNext()){var $2=$enum2.current;var $3=$2.aj8;if(!Object.keyExists(this.$7,$3)){this.$7[$3]=new tab.VisualListModel(this);}this.$9.add($3);this.$7[$3].update($2);}}this.swapAndCopyPresModel(scenePresModel);this.$C=tab.SceneModel.$E(this.$7,scenePresModel);this.$F();this.raiseEvent(this.$D);},$F:function(){this.$A.clear();this.$B.clear();if(ss.isValue(this.get_scenePresModel().auq)){var $enum1=ss.IEnumerator.getEnumerator(this.get_scenePresModel().auq);while($enum1.moveNext()){var $0=$enum1.current;if(ss.isValue($0.auf)){var $enum2=ss.IEnumerator.getEnumerator($0.auf);while($enum2.moveNext()){var $1=$enum2.current;if(ss.isValue($1)){if($1.aj8==='ref-lines'){this.$A.add($1);}else if($1.aj8==='trend-lines'){this.$B.add($1);}}}}}}},$10:function($p0){var $dict1=this.get_visualListModels();for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.key;var $2=_.find($p0.aue,function($p1_0){
return $1===$p1_0.aj8;});if(ss.isNullOrUndefined($2)){$2=_.find($p0.aug,function($p1_0){
return $1===$p1_0.aj8;});}if(ss.isNullOrUndefined($2)){delete this.get_visualListModels()[$1];}}}}
tab.ProjectModel=function(){}
tab.ProjectModel.prototype={$0:null,id:null,get_name:function(){return this.$0;},set_name:function(value){this.$0=value;return value;},get_id:function(){return this.id;},set_id:function(value){this.id=value;return value;}}
tab.Schedule=function(){}
tab.Schedule.prototype={$0:null,id:null,$1:0,get_name:function(){return this.$0;},set_name:function(value){this.$0=value;return value;},get_id:function(){return this.id;},set_id:function(value){this.id=value;return value;},get_action:function(){return this.$1;},set_action:function(value){this.$1=value;return value;}}
tab.SelectionsModel=function(parent,pathName){this.$6=[];tab.SelectionsModel.initializeBase(this,[parent,new tab.PresModelPathItem(pathName,1)]);this.$B('tuples');this.$B('nodes');this.$B('trend-lines');this.$B('ref-lines');}
tab.SelectionsModel.$8=function($p0){var $0={};$0.akf=$p0;switch($p0){case 'ref-lines':case 'trend-lines':case 'annotations':case 'tuples':$0.acg=new Array(0);break;case 'legend-items':$0.awb={};$0.acg=new Array(0);break;case 'nodes':$0.awd=new Array(0);break;default:break;}return $0;}
tab.SelectionsModel.$9=function($p0,$p1){var $0=$p0.akf;for(var $1=0;$1<$p1.length;++$1){var $2=$p1[$1];if($2.akf===$0){if($0==='legend-items'&&!_.isEqual($p0.awb,$2.awb)){continue;}$p1[$1]=$p0;return;}}$p1.add($p0);}
tab.SelectionsModel.$C=function($p0,$p1){var $0={};var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $2=$enum1.current;$0[$2.toString()]=$2;}var $1={};var $enum2=ss.IEnumerator.getEnumerator($p1);while($enum2.moveNext()){var $3=$enum2.current;$1[$3.toString()]=$3;}return tab.SelectionsModel.computeTupleDictionaryDifference($0,$1);}
tab.SelectionsModel.computeTupleDictionaryDifference=function(set1,set2){var $0=$.extend(true,{},set1);var $1=$.extend(true,{},set2);var $2=[];var $enum1=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum1.moveNext()){var $3=$enum1.current;if(!Object.keyExists($1,$3)){$2.add($0[$3]);}else{delete $1[$3];}}var $enum2=ss.IEnumerator.getEnumerator(Object.keys($1));while($enum2.moveNext()){var $4=$enum2.current;$2.add($1[$4]);}return $2;}
tab.SelectionsModel.prototype={isOnlyQuantitativeNodeSelected:false,add_newSelections:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newSelections:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_selectionModels:function(){return this.$6;},get_isEmpty:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $0=$enum1.current;if(!$0.get_isEmpty()){return false;}}return true;},get_hasPaneTableObjectSelection:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $0=$enum1.current;if(!$0.get_isEmpty()&&$0.get_selectionType()!=='legend-items'&&$0.get_selectionType()!=='nodes'){return true;}}return false;},get_tupleSelection:function(){return this.$A('tuples');},get_nodeSelection:function(){return this.$A('nodes');},get_refLineSelection:function(){return this.$A('ref-lines');},get_trendLineSelection:function(){return this.$A('trend-lines');},get_allLegendSelections:function(){return _.filter(this.$6,function($p1_0){
return $p1_0.get_selectionType()==='legend-items';});},getLegendSelection:function(key,legendColumns){var $0=_.find(this.$6,function($p1_0){
return $p1_0.get_selectionType()==='legend-items'&&ss.isValue($p1_0.get_selectionPresModel())&&$p1_0.get_selectionPresModel().awb.ahx===key&&_.isEqual($p1_0.get_selectionPresModel().awb.afx,legendColumns);});if(ss.isNullOrUndefined($0)){$0=this.$B('legend-items');$0.get_selectionPresModel().awb.ahx=key;$0.get_selectionPresModel().awb.afx=legendColumns;}return $0;},update:function(presModels){var $0=_.compact(presModels);var $1=[];$1.addRange($0);var $2=false;var $3=[];var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $5=$enum1.current;var $6;if($5.akf==='legend-items'){if(ss.isNullOrUndefined($5.awb)){$2=true;continue;}$6=this.getLegendSelection($5.awb.ahx,$5.awb.afx);}else{$6=this.$A($5.akf);}if(ss.isNullOrUndefined($6)){$6=new tab.SelectionModel(this,this.$6.length);this.$6.add($6);}$6.update($5);$3.add($6.get_hashKey());tab.SelectionsModel.$9($5,$1);}if($2){var $enum2=ss.IEnumerator.getEnumerator(this.$6);while($enum2.moveNext()){var $7=$enum2.current;tab.SelectionsModel.$9($7.get_selectionPresModel(),$1);}}else{var $enum3=ss.IEnumerator.getEnumerator(this.$6);while($enum3.moveNext()){var $8=$enum3.current;if($3.contains($8.get_hashKey())){continue;}var $9=tab.SelectionsModel.$8($8.get_selectionType());if($9.akf==='legend-items'){$9.awb=$8.get_selectionPresModel().awb;}$8.update($9);tab.SelectionsModel.$9($9,$1);}}for(var $A=0;$A<$1.length;++$A){presModels[$A]=$1[$A];}var $4={};$4.selections=presModels;if(this.isNewPresModelSameAsOld($4)){return;}this.swapAndCopyPresModel($4);this.raiseEvent(this.$7);},$A:function($p0){return _.find(this.$6,function($p1_0){
return $p1_0.get_selectionType()===$p0;});},$B:function($p0){var $0=new tab.SelectionModel(this,this.$6.length);this.$6.add($0);var $1=tab.SelectionsModel.$8($p0);$0.update($1);return $0;},createSelectionsToken:function(){return this.get_presModel();},computeSelectionsDiff:function(selectionsToken,impliedSelectionToken,currentImpliedSelectionModel){if(ss.isNullOrUndefined(selectionsToken)){return new ss.Tuple(true,new Array(0));}var $0=new ss.Tuple(false,new Array(0));var $enum1=ss.IEnumerator.getEnumerator((selectionsToken).selections);while($enum1.moveNext()){var $1=$enum1.current;switch($1.akf){case 'ref-lines':case 'trend-lines':var $2=($1.acg||new Array(0));var $3=tab.SelectionsModel.$C($2,this.$A($1.akf).get_ids());if($3.length>0){return new ss.Tuple(true,new Array(0));}break;case 'tuples':var $4=$1.acg;var $5=this.get_tupleSelection().get_ids();var $6=(ss.isValue(impliedSelectionToken))?(impliedSelectionToken).acg:new Array(0);var $7=(ss.isValue(currentImpliedSelectionModel))?currentImpliedSelectionModel.get_ids():new Array(0);var $8=(!!($4.length+$6.length))!==(!!($5.length+$7.length));if($8){return new ss.Tuple(true,new Array(0));}var $9=tab.SelectionsModel.$C($4,$5);var $A=tab.SelectionsModel.$C($6,$7);var $B=[];$B.addRange($9);$B.addRange($A);$0.second=$B;break;default:break;}}return $0;}}
tab.SelectionsPresModel=function(){}
tab.SelectionsPresModel.prototype={selections:null}
tab.User=function(){}
tab.User.prototype={id:0,friendlyName:null,username:null}
tab.SortIndicatorsModel=function(parent){tab.SortIndicatorsModel.initializeBase(this,[parent,new tab.PresModelPathItem('ap3')]);}
tab.SortIndicatorsModel.prototype={add_newSortIndicators:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newSortIndicators:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_sortIndicatorsPresModel:function(){return this.get_presModel();},update:function(sortIndicatorsPresModel){this.simpleSwapToUpdate(sortIndicatorsPresModel,this.$6,sortIndicatorsPresModel);}}
tab.VisualListModel=function(parent){tab.VisualListModel.initializeBase(this,[parent,new tab.PresModelPathItem('visuallist')]);}
tab.VisualListModel.prototype={$6:null,add_newVisualList:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newVisualList:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_visualListPresModel:function(){return this.presModel;},get_groupItemNodes:function(){if(ss.isNullOrUndefined(this.$6)){this.$6=[];var $enum1=ss.IEnumerator.getEnumerator(this.get_visualListPresModel().au0);while($enum1.moveNext()){var $0=$enum1.current;if($0.ag5==='auv'){this.$6.add($0);}}}return this.$6;},update:function(visualListPresModel){if(this.isNewPresModelSameAsOld(visualListPresModel)){return;}this.$6=null;this.swapAndCopyPresModel(visualListPresModel);this.raiseEvent(this.$7);}}
tab.VizDataModel=function(parent){tab.VizDataModel.initializeBase(this,[parent,new tab.PresModelPathItem('awz')]);this.$6=[];}
tab.VizDataModel.get_$9=function(){return tab.Logger.lazyGetLogger(tab.VizDataModel);}
tab.VizDataModel.prototype={$6:null,$7:null,add_newVizData:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_newVizData:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,get_hasTupleIdColumn:function(){return ss.isValue(this.$7);},get_columnCount:function(){return this.$6.length;},get_highlightCaptions:function(){return this.get_$A().vm;},get_filterFields:function(){return this.get_$A().afu;},get_fieldCaptions:function(){var $0=[];var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $1=$enum1.current;$0.add($1.get_fieldCaption());}return $0;},get_ubertipData:function(){return this.get_$A().axd;},get_$A:function(){return this.presModel;},get_$B:function(){return this.get_$A().aw8;},get_$C:function(){return this.get_$B().aw7;},getVizDataField:function(captionOrFieldName){var $0=_.find(this.$6,function($p1_0){
return $p1_0.isKnownAs(captionOrFieldName);});return $0;},getVizDataFieldByIndex:function(index){var $0=this.get_$B().aw3;var $1=null;if(index>=0&&index<$0.length){var $2=$0[index].afc;$1=this.getVizDataField($2);}return $1;},getColumnIndex:function(captionOrFieldName){var $0=this.get_$B().aw3;for(var $1=0;$1<$0.length;++$1){if(tab.VizDataUtils.isNameOfColumn($0[$1],captionOrFieldName)){return $1;}}return -1;},hasDimensionColumnNotMeasureNames:function(){var $0=_.find(this.get_$B().aw3,function($p1_0){
return ($p1_0.afh!=='[:Measure Names]')&&($p1_0.aj4==='dimension');});return ss.isValue($0);},isHeaderFullyNotQuantitative:function(columnIndexes){if(ss.isNullOrUndefined(columnIndexes)||!columnIndexes.length){return false;}var $enum1=ss.IEnumerator.getEnumerator(columnIndexes);while($enum1.moveNext()){var $0=$enum1.current;if(this.getVizDataFieldByIndex($0).get_isQuantitative()){return false;}}return true;},hasTupleId:function(tupleId){var $0=false;if(this.get_hasTupleIdColumn()){this.forEachVizDataField(function($p1_0,$p1_1){
if($p1_0.isTupleIdValid(tupleId)){$0=true;return false;}return true;});}return $0;},forEachTupleId:function(tupleIdFunction){for(var $0=0;$0<this.get_$C().length;++$0){var $1=this.get_$C()[$0].aw5[0];var $enum1=ss.IEnumerator.getEnumerator($1.acf);while($enum1.moveNext()){var $2=$enum1.current;var $3=!tupleIdFunction($2);if($3){break;}}}},forEachVizDataField:function(vizDataFieldFunction){var $0=this.get_$B().aw3;for(var $1=0;$1<$0.length;++$1){var $2=$0[$1].afc;if($2==='[system:visual].[tuple_id]'){continue;}var $3=this.getVizDataField($2);var $4=!vizDataFieldFunction($3,$1);if($4){break;}}},update:function(vizDataPresModel){var $0=this.simpleSwapToUpdate(vizDataPresModel,this.$8);if($0&&ss.isValue(this.get_$B())){this.$7=_.find(this.get_$B().aw3,function($p1_0){
return ($p1_0.afc==='[system:visual].[tuple_id]');});this.$6.clear();var $enum1=ss.IEnumerator.getEnumerator(this.get_$B().aw3);while($enum1.moveNext()){var $1=$enum1.current;if($1.afc==='[system:visual].[tuple_id]'){continue;}var $2=new tab.VizDataField($1,this.get_$B().aw7);this.$6.add($2);}}}}
tab.ZoneModel=function(parent,dashboard,zoneId){tab.ZoneModel.initializeBase(this,[parent,new tab.PresModelPathItem(zoneId.toString(),0)]);this.$16=dashboard;}
tab.ZoneModel.typeOfContent=function(zonePresModel){var $0=zonePresModel.amo;if(ss.isValue($0)&&Object.getKeyCount($0)===1){return Object.keys($0)[0];}switch(zonePresModel.akp){case 'filter':case 'layout-basic':case 'layout-flow':case 'layout-free-form':case 'empty':return '';}return '';}
tab.ZoneModel.getContent=function(zonePresModel,contentType){if(!(contentType in zonePresModel.amo)){return null;}return zonePresModel.amo[contentType];}
tab.ZoneModel.$1E=function($p0){switch($p0){case 'color':return 'color';case 'shape':return 'shape';case 'size':return 'size';case 'map':return 'map';}return 'color';}
tab.ZoneModel.prototype={$16:null,$17:null,$18:null,add_newZoneContent:function(value){this.$19=ss.Delegate.combine(this.$19,value);},remove_newZoneContent:function(value){this.$19=ss.Delegate.remove(this.$19,value);},$19:null,add_updateZoneContent:function(value){this.$1A=ss.Delegate.combine(this.$1A,value);},remove_updateZoneContent:function(value){this.$1A=ss.Delegate.remove(this.$1A,value);},$1A:null,add_removeZoneContent:function(value){this.$1B=ss.Delegate.combine(this.$1B,value);},remove_removeZoneContent:function(value){this.$1B=ss.Delegate.remove(this.$1B,value);},$1B:null,add_updateZone:function(value){this.$1C=ss.Delegate.combine(this.$1C,value);},remove_updateZone:function(value){this.$1C=ss.Delegate.remove(this.$1C,value);},$1C:null,add_resizeZone:function(value){this.$1D=ss.Delegate.combine(this.$1D,value);},remove_resizeZone:function(value){this.$1D=ss.Delegate.remove(this.$1D,value);},$1D:null,get_model:function(){return this.$17;},get_dashboardModel:function(){return this.$16;},get_visualModel:function(){if(this.get_zoneType()==='viz'){return this.$17;}return null;},get_zoneType:function(){return this.$1F(this.get_zonePresModel());},get_height:function(){return this.get_zonePresModel().wc;},get_width:function(){return this.get_zonePresModel().wb;},get_x:function(){return this.get_zonePresModel().v9;},get_y:function(){return this.get_zonePresModel().wa;},get_zoneContentRect:function(){return tab.$create_RectXY(this.get_x(),this.get_y(),this.get_width(),this.get_height());},get_zoneId:function(){return this.get_zonePresModel().aay;},get_worksheetName:function(){return this.get_zonePresModel().st;},get_contentType:function(){return tab.ZoneModel.typeOfContent(this.get_zonePresModel());},get_zonePresModel:function(){return this.presModel;},get_backgroundColor:function(){if(ss.isValue(this.get_zonePresModel().agd)){return tab.ColorModel.convertColorForCanvas(this.get_zonePresModel().agd);}return null;},get_relativeZoneZIndex:function(){return this.get_zonePresModel().aaz+1;},get_associatedSheet:function(){return this.get_zonePresModel().sr;},get_isDependentOnViz:function(){switch(this.get_zoneType()){case 'viz':case 'color':case 'shape':case 'size':case 'map':return true;}return false;},get_hasBorder:function(){return tab.ModelUtils.hasBorder(this.get_zonePresModel().ayq);},raiseRemoveZoneContent:function(){this.raiseEvent(this.$1B);},update:function(zonePresModel){if(ss.isValue(zonePresModel)){zonePresModel.sr=(zonePresModel.sr||'');zonePresModel.w1=(zonePresModel.w1||0);zonePresModel.w0=(zonePresModel.w0||0);if(!this.$20(zonePresModel)){this.raiseEvent(this.$1D);}if(ss.isValue(zonePresModel.amo)){if(!ss.isValue(this.$18)){this.$18=new tab.ZoneContentWrapperModel(this);}var $0=tab.ZoneModel.typeOfContent(zonePresModel);if(ss.isValue(this.presModel)&&this.get_contentType()!==$0){this.$17=null;}var $1=true;if($0===tab.ZoneModel.$6){var $2=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$6);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.VisualModel(this.$18);this.$21(this.$17);}var $3=this.$17;$3.update($2);}else if($0===tab.ZoneModel.$7){var $4=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$7);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.TextRegionModel(this.$18,tab.ZoneModel.$7);this.$21(this.$17);}var $5=this.$17;$5.update($4);}else if($0===tab.ZoneModel.$8){var $6=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$8);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.TextRegionModel(this.$18,tab.ZoneModel.$8);this.$21(this.$17);}var $7=this.$17;$7.update($6);}else if($0===tab.ZoneModel.$13){var $8=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$13);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.QuickFilterDisplayModel(this.$18);this.$21(this.$17);}var $9=tab.JsonUtil.parseJson(zonePresModel.ts);var $A=this.$17;$A.update($8,$9);}else if($0===tab.ZoneModel.$9){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var $B=tab.ZoneModel.getContent(zonePresModel,$0);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.QuantitativeColorLegendModel(this.$18,$0);this.$21(this.$17);}var $C=this.$17;$C.update($B);}}else if($0===tab.ZoneModel.$A||$0===tab.ZoneModel.$B||$0===tab.ZoneModel.$C||$0===tab.ZoneModel.$D){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var $D=tab.ZoneModel.getContent(zonePresModel,$0);if(ss.isNullOrUndefined(this.$17)){var $F=this.$1F(zonePresModel);this.$17=new tab.CategoricalLegendModel(this.$18,$0,tab.ZoneModel.$1E($F));this.$21(this.$17);}var $E=this.$17;$E.update($D);}}else if($0===tab.ZoneModel.$E){var $10=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$E);var $11=tab.JsonUtil.parseJson($10.tr);$10.amp=$11;if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.ParameterCtrlModel(this.$18);this.$21(this.$17);}var $12=tab.JsonUtil.parseJson(zonePresModel.ts);var $13=this.$17;$13.update($10,$12);}else if($0===tab.ZoneModel.$F){var $14=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$F);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.PageModel(this.$18);this.$21(this.$17);}var $15=tab.JsonUtil.parseJson(zonePresModel.ts);var $16=this.$17;$16.update($14,$15);}else if($0===tab.ZoneModel.$14){var $17=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$14);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.FlipboardNavigatorModel(this.$18);this.$21(this.$17);}var $18=this.$17;$18.update($17);}else if($0===tab.ZoneModel.$15){var $19=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$15);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.FlipboardModel(this.$18);this.$21(this.$17);}var $1A=this.$17;$1A.update($19);}else if($0===tab.ZoneModel.$10){var $1B=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$10);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.LegacyLegendModel(this.$18);this.$21(this.$17);}var $1C=this.$17;$1C.update($1B);}else if($0===tab.ZoneModel.$12){var $1D=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$12);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.WebZoneModel(this.$18);this.$21(this.$17);}var $1E=this.$17;$1E.update($1D);}else if($0===tab.ZoneModel.$11){var $1F=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$11);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.ImageZoneModel(this.$18);this.$21(this.$17);}var $20=this.$17;$20.update($1F);}else{$1=false;}if($1){this.$22();}}else{if(zonePresModel.akp==='filter'){if(zonePresModel.ts!==this.get_zonePresModel().ts){if(ss.isValue(this.$17)){var $21=tab.JsonUtil.parseJson(zonePresModel.ts);var $22=this.$17;$22.update($22.get_quickFilterDisplayPresModel(),$21);}}}}}this.swapAndCopyPresModel(zonePresModel);this.raiseEvent(this.$1C);},$1F:function($p0){if(ss.isValue($p0)){return $p0.akp;}return 'invalid';},$20:function($p0){if(ss.isValue(this.get_presModel())){return $p0.wc===this.get_height()&&$p0.wb===this.get_width()&&$p0.v9===this.get_x()&&$p0.wa===this.get_y();}return false;},borderWidth:function(){var $0=0;if(this.get_hasBorder()){$0=this.get_zonePresModel().ayq.abh;}return $0;},$21:function($p0){this.raiseEvent(this.$19,$p0);},$22:function(){this.raiseEvent(this.$1A);}}
tab.ZoneContentWrapperModel=function(parent){tab.ZoneContentWrapperModel.initializeBase(this,[parent,new tab.PresModelPathItem('amo')]);}
tab.ZoneContentWrapperModel.prototype={get_zone:function(){return Type.safeCast(this.get_parent(),tab.ZoneModel);}}
tab.ShapeModel=function(shapePalette,shapeType){this.$0=shapePalette;this.$1=shapeType;}
tab.ShapeModel.fromString=function(shapeName){var $0=new RegExp('^(:([^\\/]+)\\/)?([^\\/]+)$');var $1=$0.exec(shapeName);if(ss.isNullOrUndefined($1)){return null;}var $2=$1[2];var $3=$1[3];if(ss.isNullOrUndefined($3)){return null;}var $4=null;if(ss.isValue($2)){if($2==='filled'){$4='filled';}else{return null;}}var $5=$3;return new tab.ShapeModel($4,$5);}
tab.ShapeModel.prototype={$0:null,$1:null,get_palette:function(){return this.$0;},get_shapeType:function(){return this.$1;},equals:function(selectedShape){return ss.isValue(selectedShape)&&this.$0===selectedShape.$0&&this.$1===selectedShape.$1;},toString:function(){if(ss.isNullOrUndefined(this.$0)){return this.get_shapeType();}return ':'+this.get_palette()+'/'+this.get_shapeType();}}
tab.TextRegionModel=function(parent,presModelKey){tab.TextRegionModel.initializeBase(this,[parent,new tab.PresModelPathItem(presModelKey)]);}
tab.TextRegionModel.prototype={add_newText:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newText:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_hAlign:function(){return this.get_$7().aky;},get_html:function(){return this.get_$7().tg;},get_orientation:function(){return this.get_$7().ac7;},get_styledBox:function(){return this.get_$7().ayq;},get_vAlign:function(){return this.get_$7().akz;},get_$7:function(){return this.presModel;},update:function(textRegionPresModel){this.simpleSwapToUpdate(textRegionPresModel,this.$6);}}
tab.ZonesModel=function(parent){tab.ZonesModel.initializeBase(this,[parent,new tab.PresModelPathItem('axu')]);this.set_zonePresModels({});this.$6={};}
tab.ZonesModel.$8=function($p0){return 'z_'+$p0;}
tab.ZonesModel.prototype={$6:null,add_newZone:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newZone:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_zoneModels:function(){var $0=[];var $dict1=this.$6;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};$0.add($1.value);}return $0;},get_zonePresModels:function(){return this.presModel;},set_zonePresModels:function(value){this.presModel=value;return value;},getZone:function(zoneId){return this.$6[tab.ZonesModel.$8(zoneId)];},hasZone:function(zoneId){return Object.keyExists(this.$6,tab.ZonesModel.$8(zoneId));},update:function(presModels){this.$A('Zones before update: ');this.$9(presModels);var $dict1=presModels;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;if(ss.isValue($1)){var $2=$1.aay;try{var $3=tab.ZonesModel.$8($2);if(!ss.isValue(this.$6[$3])){var $4=new tab.ZoneModel(this,this.get_parent(),$2);this.$6[$3]=$4;this.raiseEvent(this.$7,this.$6[$3]);}else if(ss.isValue($1)&&ss.isValue($1.amo)&&this.$6[$3].get_contentType()!==tab.ZoneModel.typeOfContent($1)){this.$6[$3].raiseRemoveZoneContent();this.raiseEvent(this.$7,this.$6[$3]);}this.$6[$3].update($1);}catch($5){tab.ErrorTrace.report($5,false);}}}this.swapAndCopyPresModel(presModels);this.$A('Zones after update: ');},$9:function($p0){var $dict1=this.$6;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;var $2=$p0[$1.get_zoneId().toString()];if(ss.isNull($2)){var $3=$1.get_zoneId().toString();delete $p0[$3];delete this.get_zonePresModels()[$3];this.removeZone($1);continue;}if(ss.isValue($2)&&$1.get_zoneType()!==$2.akp){this.removeZone($1);continue;}}},removeZone:function($p0){$p0.raiseRemoveZoneContent();delete this.$6[tab.ZonesModel.$8($p0.get_zoneId())];},$A:function($p0){var $0=new ss.StringBuilder();$0.appendLine($p0);var $dict1=this.get_zonePresModels();for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};if(ss.isValue($1.value)){$0.append('[ ');$0.append($1.value.aay);$0.append(' ');$0.append($1.value.akp);$0.append(' ] ');$0.appendLine();}}}}
tab.ExportServerCommands=function(){}
tab.ExportServerCommands.exportImage=function(sheetName,dialogData,sheetNames,scrollOffsets){var $0={};$0.commandNamespace='tabsrv';$0.commandName='png-export-server';$0.commandParams={};if(ss.isValue(sheetName)){$0.commandParams['sr']=sheetName;}$0.commandParams['vj']=tab.JsonUtil.toJson(sheetNames);var $1=scrollOffsets.length;var $2=new Array($1);for(var $3=0;$3<$1;$3++){var $4={};$4.v9=Math.round(scrollOffsets[$3].x);$4.wa=Math.round(scrollOffsets[$3].y);$2[$3]=$4;}$0.commandParams['arl']=tab.JsonUtil.toJson($2);tab.ServerCommands.executeServerCommand($0,'immediately',function($p1_0){
var $1_0=$p1_0;var $1_1=tab.CommandController.get().get_legacySession();$1_1.openDownload($1_1.formatSessionTempfileReference($1_0.so,true,true),dialogData);},null);}
tab.SessionServerCommands=function(){}
tab.SessionServerCommands.destroySessionAndForward=function(window,forwardUrl){var $0=tab.CommandController.get().get_legacySession();var $1=$0.$15(function(){
if(tab.WindowHelper.getLocation(window).href===forwardUrl){tab.WindowHelper.reload(window,true);}else{tab.WindowHelper.setLocationHref(window,forwardUrl);}},function(){
},function(){
},'immediately');var $2={};$2.type='DELETE';$2.url=$0.$F('destroy');$2.headers={Accept:'text/javascript'};$2.dataType='json';$0.$13($2,$1);}
tab.ToolbarServerCommands=function(){}
tab.ToolbarServerCommands.setAutoUpdate=function(state){var $0={};$0.commandNamespace='tabsrv';$0.commandName='set-auto-update-server';var $1={};$1['a']=state;$0.commandParams=$1;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.ToolbarServerCommands.refreshData=function(){var $0={};$0.commandNamespace='tabsrv';$0.commandName='refresh-data-server';var $1={};$1['xh']=0;$1['dv']=true;$0.commandParams=$1;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.ToolbarServerCommands.toggleMarks=function(){var $0={};$0.commandNamespace='tabdoc';$0.commandName='toggle-mark-labels';tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.ToolbarServerCommands.downloadWorkbook=function(givenUrl){var $0;if(ss.isValue(givenUrl)){$0=givenUrl;}else{$0=tsConfig.downloadURI;}var $1;if(tsConfig.is_metrics_view){$1=tab.CommandController.get().get_legacySession().metricsViewDownloadUrl();}else{$1=tab.ToolbarServerCommands.$1($0);}window.open($1);}
tab.ToolbarServerCommands.exportData=function(sheetName){if(ss.isNullOrUndefined(sheetName)&&ss.isValue(tab.ModelUtils.findActiveOrDefaultVisual())){sheetName=tab.ModelUtils.findActiveOrDefaultVisual().get_worksheetName();}var $0=tab.ModelUtils.findContentDashboard().getViewSession(sheetName);if(ss.isValue($0)){window.open($0.formatUnderlyingDataURL(null),$0.getWindow('vud'),'scrollbars,resizable');}}
tab.ToolbarServerCommands.exportImage=function(exportImageHelper){var $0=tableau.types.ExportDialogType['ExportImage'];var $1=[];var $2=[];if(tab.ModelUtils.findContentDashboard().get_isDashboard()){var $3=exportImageHelper.get_sheetScrollPositions();if(ss.isValue($3)){var $enum1=ss.IEnumerator.getEnumerator(Object.keys($3));while($enum1.moveNext()){var $4=$enum1.current;var $5=$3[$4];var $6=$5.x;var $7=$5.y;if(!!$6||!!$7){$2.add(tab.$create_Point($6,$7));$1.add($4);}}}}tab.ExportServerCommands.exportImage(tsConfig.current_sheet_name,$0,$1,$2);}
tab.ToolbarServerCommands.exportCrosstab=function(sheetName){if(ss.isNullOrUndefined(sheetName)&&ss.isValue(tab.ModelUtils.findActiveOrDefaultVisual())){sheetName=tab.ModelUtils.findActiveOrDefaultVisual().get_worksheetName();}var $0=tab.ModelUtils.findContentDashboard().getViewSession(sheetName);if(ss.isValue($0)){var $1=tableau.types.ExportDialogType['ExportCrosstab'];$0.openDownload($0.formatExportCrossTabURL('utf16'),$1);}}
tab.ToolbarServerCommands.exportPdf=function(exportPdfHelper){exportPdfHelper.triggerExportPdfUI();}
tab.ToolbarServerCommands.$1=function($p0){if(ss.isValue($p0)){var $0=$p0.match(tab.ToolbarServerCommands.$0);if(ss.isValue($0)&&$0.length>=2){return tabBootstrap.ViewerBootstrap.get_instance().location.protocol+'//'+tabBootstrap.ViewerBootstrap.get_instance().location.host+$0[1];}}return $p0;}
tab.ParameterServerCommands=function(){}
tab.ParameterServerCommands.setParameterValue=function(fieldName,value,forceUseUSLocale,successCallback,errorCallback){var $0={};$0.commandNamespace='tabdoc';$0.commandName='set-parameter-value';forceUseUSLocale=(forceUseUSLocale||false);$0.commandParams=tab.ParameterServerCommands.$0(fieldName,value,forceUseUSLocale);tab.ServerCommands.executeServerCommand($0,'immediately',successCallback,errorCallback);}
tab.ParameterServerCommands.$0=function($p0,$p1,$p2){var $0={};$0['afg']=$p0;$0['me']=$p1;$0['ej']=$p2;return $0;}
tab.PageServerCommands=function(){}
tab.PageServerCommands.changePage=function(pageNumber,visualId){var $0={};$0.commandNamespace='tabdoc';$0.commandName='change-page';$0.commandParams=tab.PageServerCommands.$0(pageNumber,visualId);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.PageServerCommands.syncedChangePage=function(visualId,zoneId,pageNumber){var $0={};$0.commandNamespace='tabsrv';$0.commandName='synced-change-page-server';$0.commandParams=tab.PageServerCommands.$1(visualId,zoneId,pageNumber);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.PageServerCommands.toggleTrails=function(visualId){var $0={};$0.commandNamespace='tabdoc';$0.commandName='page-toggle-trails';$0.commandParams=tab.PageServerCommands.$2(visualId);tab.ServerCommands.executeServerCommand($0,'afterDelay');}
tab.PageServerCommands.$0=function($p0,$p1){var $0={};tab.CommandUtils.addVisualIdToCommand($0,$p1);$0['aak']=$p0;return $0;}
tab.PageServerCommands.$1=function($p0,$p1,$p2){var $0={};tab.CommandUtils.addVisualIdToCommand($0,$p0);$0['aay']=$p1;$0['aak']=$p2;return $0;}
tab.PageServerCommands.$2=function($p0){var $0={};tab.CommandUtils.addVisualIdToCommand($0,$p0);return $0;}
tab.SaveServerCommands=function(){}
tab.SaveServerCommands.saveWorkbook=function(successCallback){var $0=function($p1_0){
tab.WorldUpdateServerCommands.getWorldUpdate(function(){
if(ss.isValue(successCallback)){successCallback($p1_0);}});};tab.CommandController.get().SaveWorkbook(tsConfig.current_workbook_name,tsConfig.current_project_id,tsConfig.showTabsWorkbook,$0);}
tab.SaveServerCommands.saveWorkbookAs=function(name,project,showTabs,embedCredentials,noOverwrite,successCallback,errorCallback){tab.CommandController.get().SaveWorkbookAs(name,project.get_id(),showTabs,embedCredentials,noOverwrite,successCallback,errorCallback);}
tab.SaveServerCommands.transitionSessionAfterLogon=function(successCallback){tab.CommandController.get().$1C(successCallback);}
tab.SortServerCommands=function(){}
tab.SortServerCommands.sortFromIndicator=function(mouse,scrollAmount,visualId){var $0=[];var $1=tab.ModelUtils.getZoneIdForSheetName(visualId.st);if(tsConfig.allow_select&&$1!==-1&&!tab.ModelUtils.isActiveZone($1)){var $5=tab.SelectionClientCommands.buildActiveZoneClientCommand($1);$0.push($5);}var $2={};$2.commandNamespace='tabdoc';$2.commandName='sort-from-indicator';$2.commandParams=tab.SortServerCommands.$0(mouse,scrollAmount,visualId);var $3=new tab.ClientCommand('afterDelay',null,$2);$0.push($3);var $4=new tab.CompositeClientCommand('afterDelay',$0);tab.CommandController.SendCommand($4);}
tab.SortServerCommands.$0=function($p0,$p1,$p2){var $0={};var $1=tab.$create_Point(Math.floor($p0.x),Math.floor($p0.y));tab.CommandUtils.addVisualIdToCommand($0,$p2);$0['arf']=tab.JsonUtil.toJson(tab.PointUtil.toPresModel($1));$0['are']=tab.JsonUtil.toJson(tab.PointUtil.toPresModel($p1));return $0;}
tab.WorkgroupServerCommands=function(){}
tab.WorkgroupServerCommands.getWritableProjects=function(callback){var $0=[];tab.WorkgroupServerCommands.$0('getProjects',function($p1_0){
var $1_0=tab.WorkgroupServerCommands.$5($p1_0);$0.addRange($1_0);return $1_0.length;},function(){
callback($0);},0);}
tab.WorkgroupServerCommands.extendWorkgroupSession=function(){if(!tsConfig.is_guest){tab.XhrUtil.helper(tab.WorkgroupServerCommands.$2('getSessionInfo',null,function(){
},function(){
}));}}
tab.WorkgroupServerCommands.getSchedules=function(callback){var $0=[];tab.WorkgroupServerCommands.$0('getSchedules',function($p1_0){
var $1_0=tab.WorkgroupServerCommands.$6($p1_0);$0.addRange($1_0);return $1_0.length;},function(){
callback($0);},0);}
tab.WorkgroupServerCommands.$0=function($p0,$p1,$p2,$p3){var $0=[{field:'name',ascending:true}];var $1={page:{startIndex:$p3},order:$0};var $2=tab.WorkgroupServerCommands.$2($p0,$1,function(){
},function(){
});$2.success=function($p1_0,$p1_1,$p1_2){
var $1_0=tab.WorkgroupServerCommands.$7($p1_0);if(tab.WorkgroupServerCommands.$4($1_0)){$p2();}else{var $1_1=$p1($1_0);var $1_2=Boolean.parse($1_0['moreItems'].toString());if($1_2){tab.WorkgroupServerCommands.$0($p0,$p1,$p2,$p3+$1_1);}else{$p2();}}};tab.XhrUtil.helper($2);}
tab.WorkgroupServerCommands.setUserEmail=function(email,success,failure){tab.WorkgroupServerCommands.$1(function($p1_0){
var $1_0={userId:$p1_0,email:email};tab.XhrUtil.helper(tab.WorkgroupServerCommands.$2('updateUserEmail',$1_0,success,failure));},failure);}
tab.WorkgroupServerCommands.$1=function($p0,$p1){var $0=tsConfig.current_user_name;var $1=tsConfig.current_user_domain_name;var $2=[{field:'username',operator:'eq',value:$0},{field:'domainName',operator:'eq',value:$1}];var $3={filter:{clauses:$2}};tab.XhrUtil.helper(tab.WorkgroupServerCommands.$2('getServerUsers',$3,function($p1_0){
var $1_0=$p1_0['users'];if($1_0!=null&&$1_0.length>0&&Object.keyExists($1_0[0],'id')){var $1_1=$1_0[0]['id'];$p0($1_1);}else{$p1();}},$p1));}
tab.WorkgroupServerCommands.createSubscription=function(subject,workbook,schedule,success,failure){var $0={scheduleId:schedule.get_id(),subject:$.trim(subject),targetType:(workbook)?'Workbook':'View',targetId:(workbook)?tsConfig.current_workbook_id:tsConfig.current_view_id,customizedViewId:tsConfig.current_custom_view_id};tab.XhrUtil.helper(tab.WorkgroupServerCommands.$2('createSubscription',$0,success,failure));}
tab.WorkgroupServerCommands.logOff=function(failure){var $0=function($p1_0){
var $1_0=$p1_0['redirectUrl'];tab.WindowHelper.setLocationHref(window.self,(ss.isValue($1_0))?$1_0:'/');};tab.XhrUtil.helper(tab.WorkgroupServerCommands.$2('logout',{},$0,failure));}
tab.WorkgroupServerCommands.$2=function($p0,$p1,$p2,$p3){var $0={};$0.type='POST';$0.contentType='application/json;charset=UTF-8';$0.dataType='json';$0.url='/vizportal/api/web/v1/'+$p0;var $1=tab.WorkgroupServerCommands.$3();if(ss.isValue($1)){$0.headers={'X-XSRF-TOKEN':$1};}$0.data=JSON.stringify({method:$p0,params:$p1});$0.success=function($p1_0,$p1_1,$p1_2){
var $1_0=tab.WorkgroupServerCommands.$7($p1_0);if(tab.WorkgroupServerCommands.$4($1_0)){$p3();}else{$p2($1_0);}};$0.error=function(){
$p3();};return $0;}
tab.WorkgroupServerCommands.$3=function(){var $0=document.cookie.match(new RegExp('(^|;) ?XSRF-TOKEN=([^;]*)(;|$)'));return ($0!=null)?$0[2]:null;}
tab.WorkgroupServerCommands.$4=function($p0){if(Object.keyExists($p0,'errors')){var $0=$p0['errors'];return $0.length>0;}else{return false;}}
tab.WorkgroupServerCommands.$5=function($p0){var $0=$p0['projects'];var $1=[];var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $2=$enum1.current;var $3=new tab.ProjectModel();$3.set_name($2['name'].toString());$3.set_id($2['id'].toString());$1.add($3);}return $1;}
tab.WorkgroupServerCommands.$6=function($p0){var $0=$p0['schedules'];var $1=[];var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $2=$enum1.current;var $3=new tab.Schedule();$3.set_name($2['name'].toString());$3.set_id($2['id'].toString());$3.set_action(($2['scheduledAction'].toString().toLowerCase()==='extract')?tab.Schedule.extract:tab.Schedule.subscription);$1.add($3);}return $1;}
tab.WorkgroupServerCommands.$7=function($p0){var $0=$p0;return $0['result'];}
tab.WorksheetServerCommands=function(){}
tab.WorksheetServerCommands.revert=function(){var $0=tab.CommandUtils.newSrvCommand('revert-workbook');tab.CommandController.SendCommand(tab.vqldomain$A.$5($0,'immediately'));}
tab.WorksheetServerCommands.undoToPosition=function(historyPosition){var $0=tab.CommandUtils.newDocCommand('undo');$0.commandParams=tab.WorksheetServerCommands.$0(historyPosition);tab.CommandController.SendCommand(tab.vqldomain$A.$5($0,'immediately'));}
tab.WorksheetServerCommands.undo=function(){var $0=tab.CommandUtils.newDocCommand('undo');tab.CommandController.SendCommand(tab.vqldomain$A.$5($0,'immediately'));}
tab.WorksheetServerCommands.redoToPosition=function(historyPosition){var $0=tab.CommandUtils.newDocCommand('redo');$0.commandParams=tab.WorksheetServerCommands.$0(historyPosition);tab.CommandController.SendCommand(tab.vqldomain$A.$5($0,'immediately'));}
tab.WorksheetServerCommands.redo=function(){var $0=tab.CommandUtils.newDocCommand('redo');tab.CommandController.SendCommand(tab.vqldomain$A.$5($0,'immediately'));}
tab.WorksheetServerCommands.$0=function($p0){var $0={};$0['abm']=$p0;return $0;}
tab.WorldUpdateServerCommands=function(){}
tab.WorldUpdateServerCommands.getWorldUpdate=function(onFinish){var $0={};$0.commandNamespace='tabdoc';$0.commandName='get-world-update';$0.commandParams=tab.WorldUpdateServerCommands.$0();tab.ServerCommands.executeServerCommand($0,'immediately',onFinish,onFinish);}
tab.WorldUpdateServerCommands.$0=function(){var $0={};$0['sr']=tsConfig.current_sheet_name;return $0;}
tab.PaneClientCommands=function(){}
tab.PaneClientCommands.setPanePrimitive=function(model,type){var $0=tab.CommandUtils.newDocCommand('set-primitive');$0.commandParams=tab.PaneClientCommands.$0(model);$0.commandParams['aik']=type;tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',null,null));}
tab.PaneClientCommands.getDefaultShapeType=function(layer,callback){var $0=tab.CommandUtils.newDocCommand('get-default-shape');$0.commandParams=tab.PaneClientCommands.$0(layer);tab.CommandController.SendCommand(new tab.vqldomain$A($0,'none',function($p1_0){
callback((_.isString($p1_0))?tab.ShapeModel.fromString($p1_0.toString()):null);},function(){
callback(null);}));}
tab.PaneClientCommands.setDefaultShapeType=function(layer,shape){var $0=tab.CommandUtils.newDocCommand('set-default-shape');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['m0']=tab.PaneClientCommands.$1(shape);tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',null,null));}
tab.PaneClientCommands.toggleMarkLabels=function(layer){var $0=tab.CommandUtils.newDocCommand('toggle-mark-labels');$0.commandParams={};$0.commandParams['st']=tsConfig.current_sheet_name;if(ss.isValue(layer)&&layer.get_id()>0){$0.commandParams['wn']=layer.get_id().toString();}tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',null,null));}
tab.PaneClientCommands.setMarkSize=function(layer,newSize){var $0=tab.CommandUtils.newDocCommand('set-mark-size');$0.commandParams={};$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['acz']=newSize.toString();tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',null,null));}
tab.PaneClientCommands.resetTooltip=function(layer){var $0=tab.CommandUtils.newDocCommand('reset-tooltip');$0.commandParams={};$0.commandParams['st']=tsConfig.current_sheet_name;if(ss.isValue(layer)&&layer.get_id()>0){$0.commandParams['wn']=layer.get_id().toString();}tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',null,null));}
tab.PaneClientCommands.getDefaultColor=function(layer,callback){var $0=tab.CommandUtils.newDocCommand('get-default-color');$0.commandParams=tab.PaneClientCommands.$0(layer);tab.CommandController.SendCommand(new tab.vqldomain$A($0,'none',function($p1_0){
callback((_.isString($p1_0))?tab.ColorModel.fromColorCode($p1_0.toString()):null);},function(){
callback(null);}));}
tab.PaneClientCommands.setDefaultColor=function(layer,color){var $0=tab.CommandUtils.newDocCommand('set-default-color');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['agc']=color.toRgba255();tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',null,null));}
tab.PaneClientCommands.setSteppedColor=function(layer,stepCount){var $0=tab.CommandUtils.newDocCommand('set-quantitative-color');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['xt']=stepCount.toString();tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',null,null));}
tab.PaneClientCommands.reverseColor=function(layer,newValue){var $0=tab.CommandUtils.newDocCommand('set-quantitative-color');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['ez']=newValue.toString();tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',null,null));}
tab.PaneClientCommands.setQuantColorPalette=function(layer,newPaletteName){var $0=tab.CommandUtils.newDocCommand('set-quantitative-color');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['ne']=newPaletteName;tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',null,null));}
tab.PaneClientCommands.setCatColorPalette=function(layer,newPaletteName){var $0=tab.CommandUtils.newDocCommand('set-categorical-color');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['ne']=newPaletteName;var $1=true;$0.commandParams['fa']=$1.toString();tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',null,null));}
tab.PaneClientCommands.setColorAlphaLevel=function(layer,newAlphaLevel){if(isNaN(newAlphaLevel)){return;}var $0=tab.CommandUtils.newDocCommand('change-alpha-level');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['xq']=newAlphaLevel.toString();tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',null,null));}
tab.PaneClientCommands.boundingBoxPan=function(visualIdPresModel,mapRect){var $0=tab.CommandUtils.newDocCommand('bounding-box-pan');var $1={};$1['aqs']=mapRect;$0.commandParams=$1;if(ss.isValue(visualIdPresModel)){tab.CommandUtils.addVisualIdToCommand($0.commandParams,visualIdPresModel);}tab.ServerCommands.executeServerCommand($0,'afterDelay',null,null);}
tab.PaneClientCommands.geographicSearchQuery=function(visualIdPresModel,query,locale,maxResults,callback){var $0=tab.CommandUtils.newDocCommand('geographic-search-query');var $1={};$0.commandParams=$1;$0.commandParams['l6']=query;$0.commandParams['l7']=locale;$0.commandParams['yu']=maxResults.toString();if(ss.isValue(visualIdPresModel)){tab.CommandUtils.addVisualIdToCommand($0.commandParams,visualIdPresModel);}tab.ServerCommands.executeServerCommand($0,'none',function($p1_0){
callback($p1_0);},null);}
tab.PaneClientCommands.setReferenceLineConstantValue=function(constantValue,refLineId){var $0=tab.CommandUtils.newDocCommand('set-reference-line-constant-value');$0.commandParams={};$0.commandParams['ud']=constantValue;$0.commandParams['ly']=refLineId;tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',null,null));}
tab.PaneClientCommands.$0=function($p0){var $0={};$0['st']=tsConfig.current_sheet_name;$0['wn']=$p0.get_id().toString();return $0;}
tab.PaneClientCommands.$1=function($p0){if(ss.isNullOrUndefined($p0)){return null;}return $p0.toString();}
tab.SchemaClientCommands=function(){}
tab.SchemaClientCommands.addFieldToSheet=function(fieldName,callback){var $0={};$0.commandNamespace='tabdoc';$0.commandName='add-to-sheet';$0.commandParams={};$0.commandParams['afc']=fieldName;$0.commandParams['st']=tsConfig.current_sheet_name;tab.CommandController.SendCommand(tab.vqldomain$A.$5($0,'immediately',function($p1_0){
callback();},function($p1_0){
callback();}));}
tab.SchemaClientCommands.$0=function($p0,$p1){var $0=tab.CommandUtils.newDocCommand($p0);var $1={};$0.commandParams={};$1['aft']=$p1;$0.commandParams=$1;tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',null,null));}
tab.SchemaClientCommands.convertToMeasure=function(fieldNames){tab.SchemaClientCommands.$0('convert-to-measure',fieldNames);}
tab.SchemaClientCommands.convertToDimension=function(fieldNames){tab.SchemaClientCommands.$0('convert-to-dimension',fieldNames);}
tab.SchemaClientCommands.requestSchemaContextMenu=function(dataSource,callback){var $0=tab.CommandUtils.newDocCommand('build-data-schema-context-menu');var $1={};$1['s3']=dataSource.get_name();$0.commandParams=$1;tab.CommandController.SendCommand(tab.vqldomain$A.$5($0,'none',function($p1_0){
callback($p1_0);},null));}
tab.SchemaClientCommands.requestSchemaFieldContextMenu=function(dataSource,field,callback){var $0=tab.CommandUtils.newDocCommand('build-data-schema-field-context-menu');var $1={};$1['s3']=dataSource.get_name();$1['afc']=field;$0.commandParams=$1;tab.CommandController.SendCommand(tab.vqldomain$A.$5($0,'none',function($p1_0){
callback($p1_0);},null));}
tab.SchemaClientCommands.convertUnnamedFields=function(fieldNames){var $0=$.DeferredData();var $1={};$1['aft']=fieldNames;var $2=new tab.vqldomain$A(tab.CommandUtils.newDocCommand('convert-unnamed-fields',$1),'immediately',tab.CommandController.$1A($0),function(){
$0.reject();});tab.CommandController.SendCommand($2);return $0.promise();}
tab.SelectionClientCommands=function(){}
tab.SelectionClientCommands.get_$1=function(){return tab.Logger.lazyGetLogger(tab.SelectionClientCommands);}
tab.SelectionClientCommands.setActiveZone=function(newActiveZoneID){if(!tsConfig.allow_select){return;}if(tab.ModelUtils.isActiveZone(newActiveZoneID)){return;}tab.CommandController.SendCommand(tab.SelectionClientCommands.buildActiveZoneClientCommand(newActiveZoneID));}
tab.SelectionClientCommands.buildActiveZoneClientCommand=function(newActiveZoneID){var $0=new tab.ClientCommand('none',function($p1_0){
tab.SelectionClientCommands.$E(newActiveZoneID,$p1_0);},tab.SelectionClientCommands.$6(newActiveZoneID));return $0;}
tab.SelectionClientCommands.selectFields=function(fieldNames,dataSourceName,callback){var $0={};$0.commandNamespace='tabdoc';$0.commandName='get-show-me';var $1={};$1['aft']=fieldNames;$1['st']=tsConfig.current_sheet_name;$1['s3']=dataSourceName;$0.commandParams=$1;tab.CommandController.SendCommand(tab.vqldomain$A.$5($0,'none',function($p1_0){
callback($p1_0);},function($p1_0){
callback(null);}));}
tab.SelectionClientCommands.toggleLegendHighlight=function(zoneId,visualId,regionPart,fieldNames,successCallback){if(!tsConfig.allow_highlight){return;}var $0=[];if(!tab.ModelUtils.isActiveZone(zoneId)){var $6=tab.SelectionClientCommands.buildActiveZoneClientCommand(zoneId);$0.push($6);}var $1={};$1['ajp']=regionPart;$1['afy']=fieldNames;tab.CommandUtils.addVisualIdToCommand($1,visualId);var $2={};$2.commandNamespace='tabsrv';$2.commandName='toggle-legend-server';$2.commandParams=$1;var $3=function($p1_0){
if(ss.isValue(successCallback)){successCallback($p1_0);}};var $4=new tab.ClientCommand('immediately',null,$2,$3,null);$0.push($4);var $5=new tab.CompositeClientCommand('immediately',$0);tab.CommandController.SendCommand($5);}
tab.SelectionClientCommands.selectRegion=function(region,selRect,action,visualId,fieldNames){if(!tsConfig.allow_select){return;}var $0={};$0.commandNamespace='tabsrv';$0.commandName='select-region-no-return-server';$0.commandParams=tab.SelectionClientCommands.$A(selRect,region,action,visualId,fieldNames);tab.ServerCommands.executeServerCommand($0,'afterDelay');}
tab.SelectionClientCommands.selectRectRegionAndDoUbertip=function(region,selRect,action,visualId,tooltipCallback){if(!tsConfig.allow_select){return;}var $0={};$0.commandName='select-region-no-return-server';$0.commandParams=tab.SelectionClientCommands.$A(selRect,region,action,visualId);tab.SelectionClientCommands.$2(tooltipCallback,$0);}
tab.SelectionClientCommands.selectCircleRegionAndDoUbertip=function(region,selRect,selCircle,action,visualId,tooltipCallback){if(!tsConfig.allow_select){return;}var $0={};$0.commandName='select-radial-region-no-return-server';var $1=tab.SelectionClientCommands.$A(selRect,region,action,visualId);var $2={};$2.arh={};$2.arh.v9=Math.round(selCircle.center.x);$2.arh.wa=Math.round(selCircle.center.y);$2.wd=Math.round(selCircle.radius);$1['arm']=$2;$0.commandParams=$1;tab.SelectionClientCommands.$2(tooltipCallback,$0);}
tab.SelectionClientCommands.selectPolyRegionAndDoUbertip=function(region,selRect,selPoints,action,visualId,tooltipCallback){if(!tsConfig.allow_select){return;}var $0={};$0.commandName='select-lasso-region-no-return-server';var $1=tab.SelectionClientCommands.$A(selRect,region,action,visualId);var $2=selPoints.length;var $3=new Array($2);for(var $4=0;$4<$2;$4++){var $5={};$5.v9=Math.round(selPoints[$4].x);$5.wa=Math.round(selPoints[$4].y);$3[$4]=$5;}$1['ark']=$3;$0.commandParams=$1;tab.SelectionClientCommands.$2(tooltipCallback,$0);}
tab.SelectionClientCommands.$2=function($p0,$p1){$p1.commandNamespace='tabsrv';var $0=new tab.ClientCommand('afterDelay',null,$p1,function($p1_0){
$p0();},null);var $1=[];$1.push($0);var $2=new tab.CompositeClientCommand('afterDelay',$1);tab.CommandController.SendCommand($2);}
tab.SelectionClientCommands.clearAllSelections=function(visualId){if(!tsConfig.allow_select){return;}var $0=tab.ModelUtils.getZoneIdForSheetName(visualId.st);if($0!==-1&&!tab.ModelUtils.isActiveZone($0)){tab.SelectionClientCommands.setActiveZone($0);return;}var $1=tab.CommandUtils.newSrvCommand('select-none');var $2={};tab.CommandUtils.addVisualIdToCommand($2,visualId);$1.commandParams=$2;var $3=new tab.ClientCommand(((tab.ApplicationModel.get_instance().get_isLocalRenderMode())?'none':'afterDelay'),function($p1_0){
if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){tab.SelectionClientCommands.$8($p1_0,null);tab.ActionUtils.executeActions(visualId.st,'on-select',new Array(0),$p1_0,true);}},$1);tab.CommandController.SendCommand($3);}
tab.SelectionClientCommands.clearAllSelectionsIncludingMaster=function(){if(!tsConfig.allow_select){return;}var $0={};$0.commandNamespace='tabdoc';$0.commandName='select-none-including-master';$0.commandParams={};$0.commandParams['sr']=tsConfig.current_sheet_name;var $1=new tab.ClientCommand(((tab.ApplicationModel.get_instance().get_isLocalRenderMode())?'none':'afterDelay'),function($p1_0){
tab.SelectionClientCommands.$9($p1_0);tab.SelectionClientCommands.$5($p1_0);var $1_0=tab.ModelUtils.getVisualModelsFromDashboard(tab.ModelUtils.findContentDashboard());var $enum1=ss.IEnumerator.getEnumerator(Object.keys($1_0));while($enum1.moveNext()){var $1_1=$enum1.current;var $1_2=$1_0[$1_1];tab.ActionUtils.executeActions($1_2.get_visualId().st,'on-select',new Array(0),$p1_0,true);}},$0);tab.CommandController.SendCommand($1);}
tab.SelectionClientCommands.selectLegendItemsLocal=function(zoneId,action,selectedItems,visualId,model,type){if(!tsConfig.allow_select){return;}var $0=tab.ModelUtils.getVisualModelFromVisualId(visualId);var $1=$0.get_selectionsModel();var $2=$1.getLegendSelection(type,model.get_legendNames());var $3=tab.SelectionUtils.resolveLegendSelection(action,selectedItems,model,$2);var $4=[];if(!$2.isAnyLegendItemSelected()&&!$3.length&&!tab.ModelUtils.isActiveZone(zoneId)){$4.push(tab.SelectionClientCommands.buildActiveZoneClientCommand(zoneId));}var $5={};$5.commandNamespace='tabdoc';$5.commandName='select-legend-items';$5.commandParams=tab.SelectionClientCommands.$B($3,visualId,model,type,zoneId);var $6=new tab.ClientCommand('none',function($p1_0){
tab.SelectionClientCommands.$E(zoneId,$p1_0);if(!$2.isAnyLegendItemSelected()&&!$3.length){return;}var $1_0=$p1_0.makeMutablePresModel($2);$1_0.acg=$3;$1_0.awb={};$1_0.awb.ahx=model.get_legendType();$1_0.awb.afx=model.get_legendNames();tab.SelectionClientCommands.$C($p1_0,$1.get_tupleSelection(),$0);tab.SelectionClientCommands.$C($p1_0,$1.get_nodeSelection(),$0);var $enum1=ss.IEnumerator.getEnumerator($1.get_allLegendSelections());while($enum1.moveNext()){var $1_1=$enum1.current;if($1_1!==$2){tab.SelectionClientCommands.$C($p1_0,$1_1,$0);}}tab.SelectionClientCommands.$8($p1_0,visualId);tab.SelectionClientCommands.$7($3,model,$0,$p1_0);},$5);$4.push($6);var $7=new tab.CompositeClientCommand('none',$4);tab.CommandController.SendCommand($7);}
tab.SelectionClientCommands.$3=function($p0,$p1,$p2,$p3,$p4,$p5,$p6){var $0=tab.ModelUtils.getZoneIdForSheetName($p5.st);var $1=tab.ModelUtils.getVisualModelFromVisualId($p5);var $2=$1.get_selectionsModel();var $3=$2.get_nodeSelection();var $4=(tab.ActionUtils.willActionCauseTabChange($p5.st,'on-select'))?'afterDelay':'none';var $5=[];if($0!==-1&&!tab.ModelUtils.isActiveZone($0)){var $D=tab.SelectionClientCommands.buildActiveZoneClientCommand($0);$5.push($D);}var $6=tab.CommandUtils.newSrvCommand('select-region-no-return-server');var $7=2;var $8=null;if(ss.isValue($p4.ym)&&ss.isValue($p4.yn)){var $E=($p4.yk||0);var $F=($p4.yl||0);$8=tab.$create_RectXY($E,$F,$p4.ym,$p4.yn);}var $9=tab.RectXYUtil.shiftCoordsTowardsCenter($p1,$8,$7);var $A=tab.$create_RectXY($9.x,$9.y,0,0);$6.commandParams=tab.SelectionClientCommands.$A($A,$p0,$p2,$p5);var $B=new tab.ClientCommand($4,function($p1_0){
var $1_0=$p1_0.makeMutablePresModel($3);tab.SelectionUtils.resolveNodeSelection($p2,$p3.get_groupItemNodes(),$p4,$3,$1_0);var $1_1=$p2!=='toggle'&&$p2!=='range';var $1_2=$2.get_tupleSelection().get_ids();if($1_1){tab.SelectionClientCommands.$C($p1_0,$2.get_tupleSelection(),$1);$1_2=new Array(0);}var $enum1=ss.IEnumerator.getEnumerator($2.get_allLegendSelections());while($enum1.moveNext()){var $1_3=$enum1.current;tab.SelectionClientCommands.$C($p1_0,$1_3,$1);}tab.SelectionClientCommands.$8($p1_0,$p5);$1.$2A($1_0.awd);tab.ActionUtils.executeActions($p5.st,'on-select',$1.getEffectiveSelectedTuples($1_2),$p1_0,true);},$6,function($p1_0){
if(ss.isValue($p6)){$p6();}},null);$5.push($B);var $C=new tab.CompositeClientCommand($4,$5);return $C;}
tab.SelectionClientCommands.selectNode=function(region,coords,action,visualListModel,selectedNode,visualId,tooltipCallback){if(!tsConfig.allow_select){return;}var $0=tab.SelectionClientCommands.$3(region,coords,action,visualListModel,selectedNode,visualId,tooltipCallback);tab.CommandController.SendCommand($0);}
tab.SelectionClientCommands.selectMarksLocal=function(selectedMarkIDs,visualId,action,isAreaSelection,tooltipCallback){if(!tsConfig.allow_select){return;}if(tab.MiscUtil.isNullOrEmpty(selectedMarkIDs)){tab.SelectionClientCommands.clearAllSelections(visualId);return;}var $0=tab.ModelUtils.getZoneIdForSheetName(visualId.st);var $1=tab.ModelUtils.getVisualModelFromVisualId(visualId);var $2=$1.get_selectionsModel();var $3=$2.get_tupleSelection();var $4=(tab.ActionUtils.willActionCauseTabChange(visualId.st,'on-select'))?'afterDelay':'none';var $5=[];if($0!==-1&&!tab.ModelUtils.isActiveZone($0)){var $9=tab.SelectionClientCommands.buildActiveZoneClientCommand($0);$5.push($9);}var $6={};$6.commandNamespace='tabdoc';$6.commandName='select';$6.commandParams=tab.SelectionClientCommands.$D(selectedMarkIDs,'tuples',action,visualId);var $7=new tab.ClientCommand($4,function($p1_0){
var $1_0=tab.SelectionUtils.resolveMarkSelection(action,selectedMarkIDs,$3,isAreaSelection);var $1_1=$p1_0.makeMutablePresModel($3);$1_1.acg=$1_0;if(action!=='toggle'&&action!=='range'){tab.SelectionClientCommands.$C($p1_0,$2.get_nodeSelection(),$1);}var $enum1=ss.IEnumerator.getEnumerator($2.get_allLegendSelections());while($enum1.moveNext()){var $1_2=$enum1.current;tab.SelectionClientCommands.$C($p1_0,$1_2,$1);}tab.SelectionClientCommands.$8($p1_0,visualId);tab.ActionUtils.executeActions(visualId.st,'on-select',$1.getEffectiveSelectedTuples($1_0),$p1_0,true);},$6,function($p1_0){
if(ss.isValue(tooltipCallback)){tooltipCallback();}},null);$5.push($7);var $8=new tab.CompositeClientCommand($4,$5);tab.CommandController.SendCommand($8);}
tab.SelectionClientCommands.$4=function($p0,$p1){if(!$p0.get_isBrushingComputed()){return;}var $dict1=tab.ModelUtils.getVisualModels(tab.ApplicationModel.get_instance());for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;var $2=$0.key;if($p0.hasBrushingForSheet($2)){var $3=$p1.makeMutablePresModel($1.get_brushingsModel().get_tupleSelection());$3.acg=$p0.getTupleBrushing($2);var $4=$p1.makeMutablePresModel($1.get_brushingsModel().get_nodeSelection());$4.awd=$p0.getNodeBrushing($2);var $5=$p0.getLegendBrushing($2);var $enum3=ss.IEnumerator.getEnumerator($1.get_brushingsModel().get_allLegendSelections());while($enum3.moveNext()){var $6=$enum3.current;var $7=$p1.makeMutablePresModel($6);var $8=new Array(0);var $9=tab.BrushingComputer.$8($7.awb.ahx,$7.awb.afx);if(ss.isValue($5[$9])){$8=$5[$9];}$7.acg=$8;}}}}
tab.SelectionClientCommands.$5=function($p0){var $dict1=tab.ModelUtils.getVisualModels(tab.ApplicationModel.get_instance());for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;var $2=$p0.makeMutablePresModel($1.get_brushingsModel().get_tupleSelection());$2.acg=new Array(0);var $3=$p0.makeMutablePresModel($1.get_brushingsModel().get_nodeSelection());$3.awd=new Array(0);var $enum3=ss.IEnumerator.getEnumerator($1.get_brushingsModel().get_allLegendSelections());while($enum3.moveNext()){var $4=$enum3.current;var $5=$p0.makeMutablePresModel($4);var $6=new Array(0);$5.acg=$6;}}}
tab.SelectionClientCommands.$6=function($p0){var $0=tab.CommandUtils.newDocCommand('set-active-zone');var $1={};$1['su']=tsConfig.current_sheet_name;$1['aay']=$p0;$0.commandParams=$1;return $0;}
tab.SelectionClientCommands.$7=function($p0,$p1,$p2,$p3){var $0=tab.BrushingComputer.computeFromLegend($p2,$p0,$p1);tab.SelectionClientCommands.$4($0,$p3);}
tab.SelectionClientCommands.$8=function($p0,$p1){var $0=tab.ModelUtils.getVisualModels(tab.ApplicationModel.get_instance());var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=$1.value;var $3=$1.key;if(ss.isNullOrUndefined($p1)||$3!==$p1.st){var $4=tab.ModelUtils.findContentDashboard();var $5=!tab.ActionUtils.isFilterSource($4,$3);var $enum3=ss.IEnumerator.getEnumerator($2.get_selectionsModel().get_selectionModels());while($enum3.moveNext()){var $6=$enum3.current;if($5||($6.get_selectionType()!=='tuples'&&$6.get_selectionType()!=='nodes')){var $7=$p0.makeMutablePresModel($6);$7.acg=new Array(0);$7.awd=new Array(0);$6.setOverriddenTupleIds(new Array(0));}}}}}
tab.SelectionClientCommands.$9=function($p0){var $0=tab.ModelUtils.getVisualModels(tab.ApplicationModel.get_instance());var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=$1.value;var $enum3=ss.IEnumerator.getEnumerator($2.get_selectionsModel().get_selectionModels());while($enum3.moveNext()){var $3=$enum3.current;var $4=$p0.makeMutablePresModel($3);$4.acg=new Array(0);$4.awd=new Array(0);$3.setOverriddenTupleIds(new Array(0));}}}
tab.SelectionClientCommands.$A=function($p0,$p1,$p2,$p3,$p4){var $0={};tab.CommandUtils.addVisualIdToCommand($0,$p3);var $1={};var $2=tab.VizRegionRectWrapper.create($1);$2.set_x(Math.round($p0.x));$2.set_y(Math.round($p0.y));$2.set_w(Math.round(($p0.w||0)));$2.set_h(Math.round(($p0.h||0)));$2.set_r($p1);if(ss.isValue($p4)){$2.set_fns($p4);}$0['am8']=$1;$0['fu4']=$p2;return $0;}
tab.SelectionClientCommands.$B=function($p0,$p1,$p2,$p3,$p4){var $0={};tab.CommandUtils.addVisualIdToCommand($0,$p1);$0['afy']=$p2.get_legendNames();$0['ahx']=$p3;$0['acg']=$p0;$0['aay']=$p4;return $0;}
tab.SelectionClientCommands.$C=function($p0,$p1,$p2){if(ss.isValue($p1)){var $0=$p0.makeMutablePresModel($p1);$0.acg=new Array(0);$0.awd=new Array(0);if($p1.get_selectionType()==='nodes'){$p2.$2B();}}}
tab.SelectionClientCommands.$D=function($p0,$p1,$p2,$p3){var $0={};if(ss.isValue($p3)){tab.CommandUtils.addVisualIdToCommand($0,$p3);}var $1={};$1.acg=$p0;$1.akf=$p1;$0['avy']=$1;$0['akh']=tab.SelectionClientCommands.$0[$p2];return $0;}
tab.SelectionClientCommands.$E=function($p0,$p1){var $0=tab.ModelUtils.findContentDashboard();var $1=$p1.makeMutablePresModel($0);$1.aa0=$p0;}
tab.SelectionClientCommands.buildActiveZoneCommand=function(newActiveZoneID){var $0=tab.CommandUtils.newDocCommand('set-active-zone');var $1={};$1['ani']=tab.ModelUtils.findContentDashboard().get_sheetPath();$1['aay']=newActiveZoneID;$0.commandParams=$1;return $0;}
tab.ShelfClientCommands=function(){}
tab.ShelfClientCommands.setItemEncodingType=function(sm,pm,et){var $0={};$0.commandNamespace='tabdoc';$0.commandName='set-item-encoding-type';$0.commandParams={};tab.CommandUtils.addVisualIdToCommand($0.commandParams,tab.ShelfClientCommands.$7());$0.commandParams['wn']=sm.get_paneId().toString();$0.commandParams['wl']=sm.get_pills().indexOf(pm).toString();$0.commandParams['ahq']=et;$0.commandParams['ajv']=sm.get_shelfType();tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.ShelfClientCommands.startDrag=function(f,t,activePaneSpecId){var $0=$.DeferredData();var $1={};$1.commandNamespace='tabdoc';$1.commandName='get-drag-pres-model';$1.commandParams={};$1.commandParams['st']=tsConfig.current_sheet_name;$1.commandParams['cl']=tab.JsonUtil.toJson(false);if(ss.isValue(activePaneSpecId)){$1.commandParams['wn']=tab.JsonUtil.toJson(activePaneSpecId);}tab.ShelfClientCommands.$3($1.commandParams,f,t);tab.ServerCommands.executeServerCommand($1,'none',tab.CommandController.$1A($0),function(){
$0.reject();});return $0;}
tab.ShelfClientCommands.drillOnPill=function(shelf,p,index){var $0={};$0.commandName='level-drill';$0.commandNamespace='tabdoc';$0.commandParams={};$0.commandParams['st']=tsConfig.current_sheet_name;$0.commandParams['ajv']=shelf.get_shelfType();$0.commandParams['wl']=index.toString();$0.commandParams['r']=tab.JsonUtil.toJson(p.get_shouldDrill());if(shelf.get_shelfType()==='encoding-shelf'){$0.commandParams['wn']=shelf.get_paneId().toString();}var $1=new tab.ClientCommand('immediately',function($p1_0){
var $1_0=$p1_0.makeMutablePresModel(shelf);var $1_1=$p1_0.makeMutablePresModel(p);$1_1.aj=!p.get_shouldDrill();if(p.get_shouldDrill()){var $1_2=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema();var $1_3=$1_2.dataSourceForField(p.get_column());var $1_4={};$1_4.ajv='encoding-shelf';$1_4.akb='insert';$1_4.ahq=p.get_encodingType();$1_4.cv=true;if(ss.isValue($1_3)){var $1_5=$1_3.findColumnDrillChain(p.get_column());if(ss.isValue($1_5)&&$1_5.length>0){var $1_6=$1_5[0];var $1_7={};$1_7.afc=$1_6.get_globalName();$1_7.rx=$1_6.get_description();$1_7.ai=false;$1_4.wz=index+1;tab.ShelfClientCommands.$4($1_0,$1_7,$1_4,0);}}}else{for(var $1_8=shelf.get_pills().indexOf(p)+1;$1_8<shelf.get_pills().length;$1_8++){var $1_9=shelf.get_pills()[$1_8];tab.ShelfClientCommands.$5($1_0,$1_9.get_item());if(!$1_9.get_hasDrill()){break;}}}},$0);tab.CommandController.SendCommand($1);}
tab.ShelfClientCommands.removeShelfPill=function(shelf,p){var $0=tab.ShelfClientCommands.$0();$0.commandName='drop-nowhere';var $1=$0.commandParams;$1['wn']=shelf.get_paneId();$1['r1']=shelf.get_shelfType();tab.ShelfClientCommands.$2($1,p.get_column(),p.get_encodingType());$1['acd']=[p.get_item().aas];$1['aj9']='drag-drop-viz';var $2=$1['axh'];$2.ajv=shelf.get_shelfType();$2.wz=shelf.get_pills().indexOf(p);$2.akb='replace';var $3=new tab.ClientCommand('immediately',function($p1_0){
tab.ShelfClientCommands.$5($p1_0.makeMutablePresModel(shelf),p.get_item());},$0);tab.CommandController.SendCommand($3);}
tab.ShelfClientCommands.replaceShelfPill=function(srcShelf,src,targetShelf,target,dropPos,isRightDrop){var $0=srcShelf.get_pills().indexOf(src);var $1=dropPos.wz;var $2=tab.ShelfClientCommands.$0();var $3=$2.commandParams;tab.ShelfClientCommands.$2($3,src.get_column(),src.get_encodingType());$3['acd']=[src.get_item().aas];$3['aj9']='drag-drop-viz';var $4=$3['axh'];$4.ajv=srcShelf.get_shelfType();$4.wz=$0;$4.akb='replace';$3['wn']=targetShelf.get_paneId();$3['aka']='drag-drop-viz';if(ss.isNullOrUndefined(dropPos)){dropPos=$3['axi'];dropPos.ajv=targetShelf.get_shelfType();dropPos.wz=$1;dropPos.ahq=target.get_encodingType();dropPos.akb='replace';}else{$3['axi']=dropPos;}if(isRightDrop){$3['cj']=tab.JsonUtil.toJson(true);}var $5=new tab.vqldomain$B(function($p1_0){
if(!isRightDrop){var $1_2=$p1_0.makeMutablePresModel(srcShelf);tab.ShelfClientCommands.$5($1_2,src.get_item());}var $1_0=$p1_0.makeMutablePresModel(targetShelf);tab.ShelfClientCommands.$5($1_0,target.get_item());var $1_1={};$1_1.rx=src.get_item().rx;$1_1.afc=src.get_item().afc;$1_1.ahq=target.get_encodingType();$1_1.as0=target.get_item().as0;tab.ShelfClientCommands.$4($1_0,$1_1,dropPos,0);},$2,targetShelf.get_shelfType());tab.CommandController.SendCommand($5);}
tab.ShelfClientCommands.moveShelfPill=function(srcShelf,targetShelf,p,dropPos,isRightDrop){var $0=tab.ShelfClientCommands.$0();var $1=$0.commandParams;$1['acd']=[p.get_item().aas];tab.ShelfClientCommands.$2($1,p.get_column(),p.get_encodingType());if(isRightDrop){$1['cj']=tab.JsonUtil.toJson(true);}$1['aj9']='drag-drop-viz';var $2=$1['axh'];$2.ajv=srcShelf.get_shelfType();$2.wz=srcShelf.get_pills().indexOf(p);$2.akb='replace';if(ss.isNullOrUndefined(dropPos)){dropPos=$1['axi'];dropPos.ajv=targetShelf.get_shelfType();dropPos.wz=0;dropPos.akb=(srcShelf===targetShelf)?'swap':'insert';}$1['aka']='drag-drop-viz';$1['wn']=targetShelf.get_paneId();$1['axi']=dropPos;var $3=new tab.vqldomain$B(function($p1_0){
var $1_0={};$1_0.rx=p.get_item().rx;$1_0.afc=p.get_item().afc;$1_0.ahq=dropPos.ahq;var $1_1=$p1_0.makeMutablePresModel(targetShelf);tab.ShelfClientCommands.$4($1_1,$1_0,dropPos,0);if(!isRightDrop){var $1_2=$p1_0.makeMutablePresModel(srcShelf);tab.ShelfClientCommands.$5($1_2,p.get_item());}},$0,targetShelf.get_shelfType());tab.CommandController.SendCommand($3);}
tab.ShelfClientCommands.movePillToEncoding=function(srcShelf,encodingShelf,type,p,isRightDrop,dropPos){var $0=tab.ShelfClientCommands.$0();var $1=$0.commandParams;$1['acd']=[p.get_item().aas];$1['aj9']='drag-drop-viz';var $2=$1['axh'];$2.ajv=srcShelf.get_shelfType();$2.wz=srcShelf.get_pills().indexOf(p);$2.ahq=p.get_encodingType();$2.akb='replace';$2.cv=false;tab.ShelfClientCommands.$2($1,p.get_column(),p.get_encodingType());if(isRightDrop){$1['cj']=tab.JsonUtil.toJson(true);}if(ss.isNullOrUndefined(dropPos)){dropPos=$1['axi'];dropPos.ajv='encoding-shelf';dropPos.wz=0;dropPos.akb='insert';dropPos.ahq=type;dropPos.cv=true;}$1['aka']='drag-drop-viz';$1['wn']=encodingShelf.get_paneId();$1['axi']=tab.JsonUtil.toJson(dropPos);var $3=new tab.vqldomain$B(function($p1_0){
var $1_0=$p1_0.makeMutablePresModel(srcShelf);if(!isRightDrop){tab.ShelfClientCommands.$5($1_0,p.get_item());}var $1_1={};$1_1.rx=p.get_column().get_description();$1_1.afc=p.get_column().get_globalName();$1_1.ahq=type;$1_1.as0=p.get_item().as0;tab.ShelfClientCommands.$4($1_0,$1_1,dropPos,0);},$0,encodingShelf.get_shelfType());tab.CommandController.SendCommand($3);}
tab.ShelfClientCommands.addEncodingFields=function(encodingShelf,type,fieldColumns,dropPos,isShiftDrop){var $0=tab.ShelfClientCommands.$0();var $1=$0.commandParams;if(ss.isNullOrUndefined(dropPos)){dropPos=$1['axi'];dropPos.ajv='encoding-shelf';dropPos.wz=0;dropPos.akb='insert';dropPos.ahq=type;}if(isShiftDrop){$1['cm']=tab.JsonUtil.toJson(true);}tab.ShelfClientCommands.$3($1,fieldColumns,'invalid-encoding');$1['wn']=encodingShelf.get_paneId();$1['aj9']='drag-drop-schema';$1['aka']='drag-drop-viz';$1['axi']=tab.JsonUtil.toJson(dropPos);var $2=new tab.vqldomain$B(function($p1_0){
var $1_0=$p1_0.makeMutablePresModel(encodingShelf);var $enum1=ss.IEnumerator.getEnumerator(fieldColumns);while($enum1.moveNext()){var $1_1=$enum1.current;var $1_2={};$1_2.rx=$1_1.get_description();$1_2.afc=$1_1.get_globalName();$1_2.ahq=type;$1_2.as0=[{}];$1_2.as0[0].bo=true;$1_2.as0[0].an=true;$1_2.as0[0].ahq=$1_2.ahq;tab.ShelfClientCommands.$4($1_0,$1_2,dropPos,0);}},$0,encodingShelf.get_shelfType());tab.CommandController.SendCommand($2);}
tab.ShelfClientCommands.addShelfField=function(svm,fieldColumns,encoding,dropPos){var $0=tab.ShelfClientCommands.$0();var $1=$0.commandParams;if(ss.isNullOrUndefined(dropPos)){dropPos=$1['axi'];dropPos.ajv=svm.get_shelfType();dropPos.wz=0;dropPos.akb='insert';dropPos.ahq=encoding;}tab.ShelfClientCommands.$3($1,fieldColumns,'invalid-encoding');$1['wn']=svm.get_paneId();$1['aj9']='drag-drop-schema';$1['aka']='drag-drop-viz';$1['axi']=dropPos;if(encoding!=='invalid-encoding'){$1['ahq']=encoding;}var $2=new tab.vqldomain$B(function($p1_0){
var $1_0=0;var $enum1=ss.IEnumerator.getEnumerator(fieldColumns);while($enum1.moveNext()){var $1_1=$enum1.current;var $1_2={};$1_2.rx=$1_1.get_description();$1_2.afc=$1_1.get_globalName();$1_2.ahq=(svm.get_shelfType()==='encoding-shelf'&&encoding==='invalid-encoding')?'level-of-detail-encoding':encoding;var $1_3=$p1_0.makeMutablePresModel(svm);tab.ShelfClientCommands.$4($1_3,$1_2,dropPos,$1_0);$1_0++;}},$0,svm.get_shelfType());tab.CommandController.SendCommand($2);}
tab.ShelfClientCommands.replaceShelfPillWithField=function(targetShelf,target,src,dropPos){var $0=tab.ShelfClientCommands.$0();var $1=$0.commandParams;if(ss.isNullOrUndefined(dropPos)){dropPos=$1['axi'];dropPos.ajv=targetShelf.get_shelfType();dropPos.wz=targetShelf.get_pills().indexOf(target);dropPos.akb='replace';dropPos.ahq=target.get_encodingType();}tab.ShelfClientCommands.$3($1,src,'invalid-encoding');$1['wn']=targetShelf.get_paneId();$1['acd']=new Array(0);$1['aj9']='drag-drop-schema';$1['aka']='drag-drop-viz';$1['axi']=dropPos;var $2=new tab.vqldomain$B(function($p1_0){
var $1_0=$p1_0.makeMutablePresModel(targetShelf);var $1_1=0;var $enum1=ss.IEnumerator.getEnumerator(src);while($enum1.moveNext()){var $1_2=$enum1.current;var $1_3={};$1_3.rx=$1_2.get_description();$1_3.afc=$1_2.get_globalName();$1_3.ahq=target.get_encodingType();$1_3.as0=target.get_item().as0;tab.ShelfClientCommands.$4($1_0,$1_3,dropPos,$1_1);$1_1++;}},$0,targetShelf.get_shelfType());tab.CommandController.SendCommand($2);}
tab.ShelfClientCommands.setCommandParams=function(c,cmdParams){tab.CommandUtils.addVisualIdToCommand(cmdParams,tab.ShelfClientCommands.$7());var $dict1=cmdParams;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;if(ss.isNullOrUndefined($1)||Type.canCast($1,String)||Type.canCast($1,Boolean)||Type.canCast($1,Number)){}else if(Type.canCast($1,Object)||Type.canCast($1,Array)){cmdParams[$0.key]=tab.JsonUtil.toJson($1);}}c.commandParams=cmdParams;}
tab.ShelfClientCommands.$0=function(){var $0={};$0.commandNamespace='tabdoc';$0.commandName='drop-on-shelf';var $1={};$1['aj9']='drag-drop-none';$1['aka']='drag-drop-none';$1['r1']='';$1['cj']=false;$1['ck']=false;$1['cl']=false;$1['akc']='none';$1['axh']={};$1['axi']={};$0.commandParams=$1;return $0;}
tab.ShelfClientCommands.$1=function($p0,$p1){var $0={};$0.afc=$p0.get_globalName();if(ss.isValue($p1)&&$p1!=='invalid-encoding'){$0.ahq=$p1;}return $0;}
tab.ShelfClientCommands.$2=function($p0,$p1,$p2){$p0['apy']=tab.JsonUtil.toJson([tab.ShelfClientCommands.$1($p1,$p2)]);}
tab.ShelfClientCommands.$3=function($p0,$p1,$p2){var $0=_.map($p1,function($p1_0){
return tab.ShelfClientCommands.$1($p1_0,$p2);});$p0['apy']=tab.JsonUtil.toJson($0);}
tab.ShelfClientCommands.$4=function($p0,$p1,$p2,$p3){var $0=($p3>0)?'insert':($p2.akb||'insert');switch($0){case 'insert':tab.ShelfClientCommands.$6($p0.apv).insert($p2.wz+$p3,$p1);break;case 'replace':$p0.apv[$p2.wz]=$p1;break;case 'replace-all':$p0.apv[$p2.wz]=$p1;$p0.apv=_.filter($p0.apv,function($p1_0){
return $p1_0.ahq!==$p2.ahq||$p1_0===$p1;});break;}}
tab.ShelfClientCommands.$5=function($p0,$p1){$p0.apv=_.filter($p0.apv,function($p1_0){
return !_.isEqual($p1_0,$p1);});}
tab.ShelfClientCommands.$6=function($p0){return ($p0);}
tab.ShelfClientCommands.$7=function(){return tab.ModelUtils.getVisualId(tsConfig.current_sheet_name);}
tab.vqldomain$B=function(doLocal,remoteDropCommand,shelfType){tab.vqldomain$B.initializeBase(this,['immediately',doLocal,null]);this.$5=remoteDropCommand;this.$6=shelfType;var $0={};$0.commandNamespace='tabdoc';$0.commandName='drop-prepare';tab.ShelfClientCommands.setCommandParams($0,remoteDropCommand.commandParams);this.enqueueCommand(new tab.CommandRecord($0));}
tab.vqldomain$B.prototype={$5:null,$6:null,$7:false,handleRemoteCommandSuccess:function($p0,$p1){tab.vqldomain$B.callBaseMethod(this, 'handleRemoteCommandSuccess',[$p0,$p1]);if(this.$7){return;}this.$7=true;var $0=$p1;if(ss.isNullOrUndefined($0)){return;}var $1=this.$5;var $2=this.$5.commandParams;if(Object.keyExists($0,'aoz')){var $3=$0['aoz'];var $4=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create($3).get_simpleCommand());if(ss.isValue($4)){$1=$4;$2=$4.commandParams;}}if(Object.keyExists($0,'apy')){$2['apy']=$0['apy'];}else if(Object.keyExists($0,'afc')){var $5={};$5.afc=$0['afc'];$2['apy']=tab.JsonUtil.toJson([$5]);}if(Object.keyExists($0,'cn')&&$0['cn']&&this.$6==='filter-shelf'){var $6=$0['apx'];var $7=tab.CommandUtils.newSrvCommand('create-default-quick-filter');var $8={};$8['afc']=$6.afc;tab.ShelfClientCommands.setCommandParams($7,$8);this.enqueueCommand(new tab.CommandRecord($7));}tab.ShelfClientCommands.setCommandParams($1,$2);this.enqueueCommand(new tab.CommandRecord($1));}}
tab.CommandController=function(session){this.$6=[];this.$7=new tab.vqldomain$2();this.$8=new tab.Transactor();this.$9={};var $0=new tab.vqldomain$4(session);$0.$5('tabsrv','render-tooltip-server',135);this.$5=$0;this.$5.add_commmandSucceeded(ss.Delegate.create(this,this.$23));this.$E=session;}
tab.CommandController.get_fireDeferredUrlActions=function(){return tab.CommandController.$3;}
tab.CommandController.set_fireDeferredUrlActions=function(value){tab.CommandController.$3=value;return value;}
tab.CommandController.get_$18=function(){return tab.Logger.lazyGetLogger(tab.CommandController);}
tab.CommandController.create=function(session){if(ss.isNullOrUndefined(tab.CommandController.$4)){tab.CommandController.$4=new tab.CommandController(session);}return tab.CommandController.$4;}
tab.CommandController.get=function(){if(!ss.isValue(tab.CommandController.$4)){throw new Error('Attempted to use CommandController before creating it.');}return tab.CommandController.$4;}
tab.CommandController.handleBootstrapException=function(e){if(tab.CommandController.$1){return;}var $0=new ss.StringBuilder();if(ss.isValue(e['name'])){$0.append(e['name']).append(': ');}$0.append(e.message);tab.BaseSession.showAlertDialog(tab.Strings.UnhandledExceptionMessage($0.toString()),tab.Strings.UnhandledExceptionTitle,true);tab.CommandController.sendParentCompletedMessage();tab.CommandController.$1=true;}
tab.CommandController.sendParentCompletedMessage=function(){if(tab.CommandController.$2){return;}tab.CommandController.$2=true;var $0={};$0['t']=tabBootstrap.MetricsController.getTiming();$0['d']='CLNTLD';var $1=new tabBootstrap.MetricsEvent('gen',tabBootstrap.MetricsSuites.bootstrap,$0);tabBootstrap.MetricsController.get_instance().logEvent($1);tab.BrowserSupport.doPostMessageWithContext('tableau.completed');}
tab.CommandController.$19=function($p0){return $p0.get_blockType()==='immediately';}
tab.CommandController.SendCommand=function($p0){var $0=tab.CommandController.get();$0.$7.$2($p0);$0.$20();}
tab.CommandController.$1A=function($p0){return function($p1_0){
var $1_0=tab.CommandController.get();var $1_1=null;$1_1=function(){
$1_0.remove_postRemoteCommand($1_1);$p0.resolve($p1_0);};$1_0.add_postRemoteCommand($1_1);};}
tab.CommandController.$1B=function($p0){return function($p1_0){
var $1_0=tab.CommandController.get();var $1_1=null;$1_1=function(){
$1_0.remove_postRemoteCommand($1_1);$p0.reject($p1_0);};$1_0.add_postRemoteCommand($1_1);};}
tab.CommandController.prototype={$5:null,$A:null,$B:0,$C:null,$D:false,$E:null,$F:false,$10:false,add_onUrlActionsResponse:function(value){this.$11=ss.Delegate.combine(this.$11,value);},remove_onUrlActionsResponse:function(value){this.$11=ss.Delegate.remove(this.$11,value);},$11:null,add_onInvalidation:function(value){this.$12=ss.Delegate.combine(this.$12,value);},remove_onInvalidation:function(value){this.$12=ss.Delegate.remove(this.$12,value);},$12:null,add_onBootstrapSuccess:function(value){this.$13=ss.Delegate.combine(this.$13,value);},remove_onBootstrapSuccess:function(value){this.$13=ss.Delegate.remove(this.$13,value);},$13:null,add_destroyView:function(value){this.$14=ss.Delegate.combine(this.$14,value);},remove_destroyView:function(value){this.$14=ss.Delegate.remove(this.$14,value);},$14:null,add_postLocalCommand:function(value){this.$15=ss.Delegate.combine(this.$15,value);},remove_postLocalCommand:function(value){this.$15=ss.Delegate.remove(this.$15,value);},$15:null,add_postRemoteCommand:function(value){this.$16=ss.Delegate.combine(this.$16,value);},remove_postRemoteCommand:function(value){this.$16=ss.Delegate.remove(this.$16,value);},$16:null,add_postBootstrap:function(value){this.$17=ss.Delegate.combine(this.$17,value);},remove_postBootstrap:function(value){this.$17=ss.Delegate.remove(this.$17,value);},$17:null,get_waitingOnCommands:function(){return Object.getKeyCount(this.$9)>0||this.$6.length>0||this.$7.get_$1()>0;},get_deferredServerResponseQueueSize:function(){return Object.getKeyCount(this.$9);},get_currentWorldDiffersFromCheckpoint:function(){return this.$D;},get_legacySession:function(){return this.$E;},get_processingRenderModeChange:function(){return this.$F;},get_processingStoryPointChange:function(){return this.$10;},updateLayoutSession:function(layoutSession){this.$E=layoutSession;},resetInvalidationHandlers:function(){this.$11=null;this.$12=null;this.$13=null;},refreshLayout:function(){dojo.publish('close-menus');if(tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){return;}var $0=ss.Delegate.create(this,function($p1_0){
tab.WorkgroupServerCommands.extendWorkgroupSession();var $1_0=tabBootstrap.MetricsController.get_instance().createContext('PROPRI',tabBootstrap.MetricsSuites.bootstrap);var $1_1=tabBootstrap.MetricsController.get_instance().createContext('RLE Decode Primary',tabBootstrap.MetricsSuites.debug);$p1_0=tab.RleDecoder.decode($p1_0);$1_1.close();var $1_2=$p1_0;if(ss.isValue(this.$13)){try{this.$13($1_2,this);}catch($1_3){tab.CommandController.handleBootstrapException($1_3);}this.get_legacySession().nudgeWait();}$1_0.close();this.$2B();});var $1=ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;if(ss.isValue($1_0)){_.defer(ss.Delegate.create(this,function(){
var $2_0=tabBootstrap.MetricsController.get_instance().createContext('PROSEC',tabBootstrap.MetricsSuites.bootstrap);var $2_1=tabBootstrap.MetricsController.get_instance().createContext('RLE Decode Secondary',tabBootstrap.MetricsSuites.debug);$1_0=tab.RleDecoder.decode($1_0);$2_1.close();try{this.$1E($1_0);}catch($2_2){tab.CommandController.handleBootstrapException($2_2);}$2_0.close();tab.CommandController.sendParentCompletedMessage();}));}});var $2=ss.Delegate.create(this,function($p1_0){
tab.WorkgroupServerCommands.extendWorkgroupSession();var $1_0=$p1_0.status;if($1_0===200){var $1_1=$p1_0.message;if($1_1.substr(0,12)==='Invalid JSON'){tab.CommandController.sendParentCompletedMessage();var $1_2=tab.Strings.ServerErrorInvalidJSON+'<br>';tab.BaseSession.showAlertDialog($1_2,tab.Strings.SessionUnknownErrorTitle,true);throw new Error('Invalid JSON');}}else if($1_0===403){var $1_3=0;var $1_4='';try{var $1_5=JSON.parse($p1_0.responseText);if(ss.isValue($1_5)){$1_3=$1_5.code;$1_4=$1_5.message;}}catch($1_6){}tab.CommandController.sendParentCompletedMessage();this.$E.handleSessionForbiddenAction($1_3,$1_4);}else if($1_0===401){var $1_7=$p1_0.responseText;tab.WindowHelper.locationReplace(window.self,$1_7);}else if($1_0===410){this.$E.handleSessionExpiration(true);}else if($1_0===413){tab.CommandController.sendParentCompletedMessage();this.$E.handleSessionLimitExceeded();}else if(!!$1_0){tab.CommandController.sendParentCompletedMessage();var $1_8=$p1_0.responseText;if($1_0===502||$1_0===503){this.$E.handleSessionKilled($1_8);}else{this.$E.handleUnknownErrorStatus($1_8);}this.$E.nudgeWait();}});tabBootstrap.ViewerBootstrap.get_instance().waitOnInitialLayoutModel($0,$2,$1);},executeUrlActions:function(urlActions){var $0=Array.toArray(urlActions);this.$11($0);},checkpointAppPresModel:function(){this.$C=tab.ApplicationModel.get_instance().get_presModel();Object.clearKeys(this.$9);this.$D=false;},worldCheckpoint:function(){var $0=tab.MiscUtil.cloneObject(this.$C);return $0;},SaveWorkbook:function($p0,$p1,$p2,$p3){this.$1F('publish',$p0,$p1,$p2,null,null,$p3,null);},SaveWorkbookAs:function($p0,$p1,$p2,$p3,$p4,$p5,$p6){this.$1F('publish_as',$p0,$p1,$p2,$p3,$p4,$p5,$p6);},$1C:function($p0){var $0=function(){
$p0();};var $1={};$1.type='POST';$1.dataType='json';$1.url=this.$1D('transitionGuest');var $2=tab.MiscUtil.get_urlPathnameParts();var $3=(Object.keyExists($2,3))?$2[3]:'';var $4=tsConfig.current_sheet_name;var $5={':authSheet':$4,sheet_id:$3};$1.data=$5;var $6=new tab.SessionAjaxCallManager(this.$E,null,$0,null,true,true);tab.XhrUtil.helper($1,$6);},$1D:function($p0){return tabBootstrap.BaseUrlFormatter.formatSessionMethod($p0,this.$E.get_id(),this.$E.get_urlRoot());},$1E:function($p0){var $0=$p0.ay1;if(!ss.isValue($0)||!ss.isValue($0.ay0)||!Object.getKeyCount($0.ay0)){return;}var $1=tab.ApplicationModel.get_instance().get_appPresModel();if(Object.keyExists($0.ay0,'dataDictionary')){var $2=$0.ay0['dataDictionary'].amo;var $3=$2.genDataDictionaryPresModel;if(ss.isValue($3)){$1.awy=$3;}}if(Object.keyExists($0.ay0,'vizData')){var $4=$1.at1.at2;var $5=$0.ay0['vizData'].amo;var $6=$5.genPresModelMapPresModel;var $7=Object.keys($6.ay0);var $enum1=ss.IEnumerator.getEnumerator($7);while($enum1.moveNext()){var $8=$enum1.current;var $dict2=$4.axu;for(var $key3 in $dict2){var $9={key:$key3,value:$dict2[$key3]};var $A=$9.value;if($A.akp==='viz'&&$A.sr===$8){var $B=$A.amo.at5;if(ss.isValue($B)){$5=$6.ay0[$8].amo;$B.awz=$5.genVizDataPresModel;}break;}}}}tab.ApplicationModel.get_instance().update($1);this.checkpointAppPresModel();if(tab.ModelUtils.hasAnyImpliedSelection()){tab.Model.fireDeferredEvents(tab.CommandController.handleBootstrapException);}else{tab.Model.$4();}},$1F:function($p0,$p1,$p2,$p3,$p4,$p5,$p6,$p7){var $0=function($p1_0,$p1_1,$p1_2){
var $1_0=$p1_0;if(Object.keyExists($1_0,'workbook')){var $1_1=$1_0['workbook'];$p6($1_1);}else{$p6(null);}};var $1=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
var $1_0;try{$1_0=tab.JsonUtil.parseJson($p1_0.responseText);}catch($1_1){$1_0=null;}if(ss.isValue($p7)&&ss.isValue($1_0)){var $1_2=$1_0;$p7($1_2);}else{this.$E.$12($p1_2,$p1_0);}});var $2={};$2.type='POST';$2.dataType='json';$2.url=this.$1D($p0);var $3={project:$p2,name:$p1,display_tabs:$p3};if(ss.isValue($p4)){$3['save_db_passwords']=$p4;}if(ss.isValue($p5)){$3['no_overwrite']=$p5;}var $4=tab.XhrUtil.getMultipartData(null,$3);$2.contentType='multipart/form-data; boundary='+$4.header;$2.data=$4.body;var $5=new tab.SessionAjaxCallManager(this.$E,null,$0,$1,true,true);tab.XhrUtil.helper($2,$5);},$20:function(){while(!!this.$7.get_$1()&&!_.any(this.$6,tab.CommandController.$19)){this.$21(this.$7.$3());}},$21:function($p0){this.$6.add($p0);if($p0.get_blockType()!=='none'){this.get_legacySession().incrementWait($p0.get_blockType()==='immediately');}var $0=this.$8.beginTransaction();var $1;try{$p0.execute($0,this.$5,ss.Delegate.create(this,function($p1_0){
this.$22($p0,$p1_0);}));$1=this.$8.endTransaction();}catch($3){this.$8.rollbackTransaction();tab.Model.$4();this.$25($p0);return;}var $2=null;if($p0.get_hasLocalComponent()){$2=tabBootstrap.MetricsController.get_instance().createContext('PROLOC',tabBootstrap.MetricsSuites.commands,$p0.buildCommandMetricsParameters());}if(ss.isValue($1)){tab.ApplicationModel.get_instance().update($1);this.$28();}tab.Model.fireDeferredEvents(null);this.$29();if($2!=null){$2.close();}},$22:function($p0,$p1){var $0=null;if($p0.get_hasRemoteComponent()){$0=tabBootstrap.MetricsController.get_instance().createContext('PROREM',tabBootstrap.MetricsSuites.commands,$p0.buildCommandMetricsParameters());}this.$25($p0);if($0!=null){$0.close();}_.defer(ss.Delegate.create(this,function(){
if(this.$7.get_$1()>0){this.$20();}}));},$23:function($p0,$p1,$p2){if(!ss.isValue($p1)||!ss.isValue($p2)){return;}var $0=$p2.ato;if(!ss.isValue($0)){return;}if(ss.isValue($0.atp)){var $1=$0.atp;if((ss.isValue($1.atv)&&!tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&ss.isValue(this.$11))||tab.CommandController.get_fireDeferredUrlActions()){if($1.atv.length>0){tab.CommandController.set_fireDeferredUrlActions(false);this.$11($1.atv);}}if(ss.isValue($1.atz)&&ss.isValue($1.atz.at1)&&ss.isValue($1.atz.at1.at2)&&ss.isValue($1.atz.at1.at2.ap9)){this.$A=$1.atz.at1.at2.ap9;}var $2=new ss.Tuple();var $3=null;if(ss.isValue($p1.commandParams)&&Object.keyExists($p1.commandParams,'st')&&!($p1.commandName==='render-tooltip-server')){$3=$p1.commandParams['st'];}var $4=new tab.InvalidationInfo();$4.primarySheet=$3;$4.layoutStatus=$0.atp;$4.cmdResult=$0.att[0];$2.second=$4;if(ss.isValue($0.atp.atz)){$2.first=$0.atp.atz;}this.$27($p0,$2);}},$24:function($p0){if(ss.isNullOrUndefined(this.$12)){return;}this.$12($p0);},$25:function($p0){try{this.$6.remove($p0);if($p0.get_blockType()!=='none'){this.$B+=1;}if(!this.$6.length&&!this.$7.get_$1()){var $0=false;var $1=false;if(ss.isValue(this.$A)){$0=this.get_legacySession().get_layoutId()!==this.$A.abl.toString();$1=tsConfig.current_sheet_name!==this.$A.ss;this.get_legacySession().set_layoutId(this.$A.abl.toString());if($1||$0){this.$14();}}var $2=this._getRenderMode();var $3=tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard();var $4=($3)?tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_sheetName():null;var $5=($3)?tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_flipboard().get_currentStoryPointId():0;var $6=tab.ApplicationModel.get_instance();if(this.$D){$6.update(this.$C);}var $7=Object.keys(this.$9);$7=$7.sort(function($p1_0,$p1_1){
return ($p1_0>$p1_1)?1:-1;});var $8=[];var $enum1=ss.IEnumerator.getEnumerator($7);while($enum1.moveNext()){var $B=$enum1.current;var $C=this.$9[$B];$6.update($C.first);$8.add($C.second);if(ss.isValue($C.second)&&ss.isValue($C.second.layoutStatus)&&ss.isValue($C.second.layoutStatus.abm)){if($C.second.layoutStatus.abm>this.get_legacySession().get_$6()){this.$E.$D('');}this.get_legacySession().set_$6($C.second.layoutStatus.abm);}}this.checkpointAppPresModel();var $9=(tab.ApplicationModel.get_instance().get_renderMode()!==$2);this.$F=$9;if($9){this.$B+=1;this.get_legacySession().get_waitHandler().addrefAndTurnOnImmediately();}if($3&&tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard()){if((ss.isValue($4)&&$4===tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_sheetName())&&($5!==tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_flipboard().get_currentStoryPointId())){this.$10=true;}}if(ss.isValue(this.$A)){if($1||$0){if($1){try{if(ss.isValue(window.parent)&&(typeof(window.parent.handleSheetChanged)==='function')){window.parent.handleSheetChanged(this.$A.ss,this.$A.ta);}}catch($D){}}this.$A.oldSheetName=tsConfig.current_sheet_name;dojo.publish('newLayoutId',[this.$A]);this.$A=null;}}var $A=tab.LayoutSession.$19($6.get_presModel());if(ss.isValue($A)){dojo.publish('refreshLayoutModel',[$A]);}tab.Model.fireDeferredEvents(null);this.$26($8);this.$2A();while(this.$B>0){this.get_legacySession().decrementWait();this.$B-=1;}}}finally{this.$F=false;this.$10=false;}},$26:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;this.$24($0);}},$27:function($p0,$p1){if(ss.isValue($p1)){this.$9[$p0]=$p1;}},_getRenderMode:function(){return tab.ApplicationModel.get_instance().get_renderMode();},$28:function(){this.$D=true;},$29:function(){if(ss.isValue(this.$15)){this.$15();}},$2A:function(){if(ss.isValue(this.$16)){this.$16();}},$2B:function(){if(ss.isValue(this.$17)){this.$17();}}}
tab.vqldomain$2=function(){this.$0=[];}
tab.vqldomain$2.prototype={$0:null,get_$1:function(){return this.$0.length;},$2:function($p0){if($p0.get_isOneAtATime()){this.$5(Type.getInstanceType($p0));}this.$0.add($p0);},$3:function(){if(this.$0.length<=0){return null;}var $0=this.$0[0];this.$0.removeAt(0);return $0;},$4:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$0);while($enum1.moveNext()){var $0=$enum1.current;if(tab.CommandController.$19($0)){return true;}}return false;},$5:function($p0){var $0=0;for(var $1=this.$0.length-1;$1>=0;--$1){if(Type.getInstanceType(this.$0[$1])===$p0){++$0;this.$0.removeAt($1);}}if($0>0){}}}
tab.vqldomain$A=function(command,uiBlockType,successCallback,errorCallback){tab.vqldomain$A.initializeBase(this,[uiBlockType,null,command,successCallback,errorCallback]);}
tab.vqldomain$A.$5=function($p0,$p1,$p2,$p3){return new tab.vqldomain$A($p0,$p1,$p2,$p3);}
tab.Transactor=function(){}
tab.Transactor.prototype={$0:null,beginTransaction:function(){if(ss.isValue(this.$0)){throw new Error('Internal error: nested transaction');}this.$0=new tab.Transaction();return this.$0;},rollbackTransaction:function(){this.$0=null;},endTransaction:function(){var $0=this.$0.get_transactedChange();this.$0=null;return $0;},doTransaction:function(a){this.beginTransaction();a(this.$0);return this.endTransaction();}}
tab.Transaction=function(){this.$0=[];}
tab.Transaction.prototype={$0:null,get_transactedChange:function(){return this.$1();},makeMutablePresModel:function(model){var $0=model.getPresModelPath();var $enum1=ss.IEnumerator.getEnumerator(this.$0);while($enum1.moveNext()){var $2=$enum1.current;if(_.isEqual($2.get_$3(),$0)){return $2.get_$2();}}var $1=model.getMutableCopyOfPresModel();this.$0.add(new tab.vqldomain$1($0,$1));return $1;},$1:function(){if(!this.$0.length){return null;}this.$0=_.sortBy(this.$0,function($p1_0){
return $p1_0.get_$3().get_pathList().length;});var $0=tab.ApplicationModel.get_instance().get_presModel();var $1=tab.PresentationModel.cloneObjWithScalarsOnly($0);if(!ss.isValue($1)){$1={};}for(var $2=0,$3=this.$0.length;$2<$3;$2++){var $4=this.$0[$2];tab.PresentationModel.insertAtPath($0,$1,$4.get_$3(),$4.get_$2());}return $1;}}
tab.vqldomain$1=function(path,presModel){this.$0=path;this.$1=presModel;}
tab.vqldomain$1.prototype={$0:null,$1:null,get_$2:function(){return this.$1;},get_$3:function(){return this.$0;}}
tab.ApplicationModel=function(){tab.ApplicationModel.initializeBase(this,[null,null]);this.set_presModelKey(new tab.PresModelPathItem('atz'));this.$8=new tab.ToolbarModel(this);this.$9=new tab.WorkbookModel(this);this.$A=new tab.ColorPaletteCollectionModel(this);this.$B=new tab.DataDictionaryModel(this);this.$C=new tab.CalculationModel(this,false);this.$D=new tab.CalculationModel(this,true);this.$E=new tab.CalculationFunctionListModel(this);this.$7=new tab.ShapeManager();}
tab.ApplicationModel.get_instance=function(){if(ss.isNullOrUndefined(tab.ApplicationModel.$6)){tab.ApplicationModel.$6=new tab.ApplicationModel();}return tab.ApplicationModel.$6;}
tab.ApplicationModel.prototype={$7:null,$8:null,$9:null,$A:null,$B:null,$C:null,$D:null,$E:null,add_newWorkbook:function(value){this.$F=ss.Delegate.combine(this.$F,value);},remove_newWorkbook:function(value){this.$F=ss.Delegate.remove(this.$F,value);},$F:null,add_applicationUpdate:function(value){this.$10=ss.Delegate.combine(this.$10,value);},remove_applicationUpdate:function(value){this.$10=ss.Delegate.remove(this.$10,value);},$10:null,get_toolbar:function(){return this.$8;},get_workbook:function(){return this.$9;},get_colorPalettes:function(){return this.$A;},get_calculationModel:function(){return this.$C;},get_typeInPillCalculationModel:function(){return this.$D;},get_calculationFunctionListModel:function(){return this.$E;},get_shapeManager:function(){return this.$7;},get_dataDictionary:function(){return this.$B;},get_renderMode:function(){return (ss.isValue(this.get_appPresModel()))?this.get_appPresModel().ak2:'render-mode-server';},get_isLocalRenderMode:function(){return this.get_renderMode()==='render-mode-client';},get_appPresModel:function(){return this.presModel;},get_autoUpdate:function(){return tab.ModelUtils.findContentDashboard().get_autoUpdate();},set_autoUpdate:function(value){tab.ModelUtils.findContentDashboard().set_autoUpdate(value);return value;},get_invalid:function(){return tab.ModelUtils.findContentDashboard().get_invalid();},set_invalid:function(value){tab.ModelUtils.findContentDashboard().set_invalid(value);return value;},update:function(applicationPresModel){if(ss.isNullOrUndefined(this.presModel)){this.presModel={};}if(ss.isValue(applicationPresModel.ak2)){this.get_appPresModel().ak2=applicationPresModel.ak2;}if(ss.isValue(applicationPresModel.awy)){this.$B.update(applicationPresModel.awy);}if(ss.isValue(applicationPresModel.at1)){if(!ss.isValue(this.$9)){this.$9=new tab.WorkbookModel(this);this.raiseEvent(this.$F,this.$9);}this.$9.update(applicationPresModel.at1);}if(ss.isValue(applicationPresModel.atj)){this.$A.update(applicationPresModel.atj);}if(ss.isValue(applicationPresModel.ayb)){this.$C.update(applicationPresModel.ayb);}if(ss.isValue(applicationPresModel.ayc)){this.$D.update(applicationPresModel.ayc);}if(ss.isValue(applicationPresModel.ayb)&&ss.isValue(applicationPresModel.ayb.ayh)){this.$E.update(applicationPresModel.ayb.ayh);}if(ss.isValue(applicationPresModel.at0)){this.$8.update(applicationPresModel.at0);}this.swapAndCopyPresModel(applicationPresModel);this.raiseEvent(this.$10);}}
tab.SelectionModel=function(parent,index){tab.SelectionModel.initializeBase(this,[parent,new tab.PresModelPathItem(index.toString())]);}
tab.SelectionModel.$B=function($p0,$p1){var $0=new ss.StringBuilder();if(ss.isValue($p0)){$0.append($p0.join(';'));}$0.append('=');if(ss.isValue($p1)){$0.append($p1.join(';'));}return $0.toString();}
tab.SelectionModel.prototype={$6:null,$7:null,$8:null,add_newSelection:function(value){this.$9=ss.Delegate.combine(this.$9,value);},remove_newSelection:function(value){this.$9=ss.Delegate.remove(this.$9,value);},$9:null,get_selectionPresModel:function(){if(ss.isValue(this.$6)){var $0={};$0.akf='tuples';$0.acg=this.$6;return $0;}return this.get_$A();},get_selectionType:function(){return this.get_$A().akf;},get_isEmpty:function(){return (tab.MiscUtil.isNullOrEmpty(this.get_ids())&&tab.MiscUtil.isNullOrEmpty(this.get_$A().awd));},get_nodes:function(){return this.get_$A().awd;},get_ids:function(){if(ss.isValue(this.$6)){return this.$6;}return this.get_$A().acg;},get_hashKey:function(){var $0=this.get_selectionType();if(this.get_selectionType()==='legend-items'){$0+='-'+this.get_selectionPresModel().awb.ahx+':'+this.get_selectionPresModel().awb.afx.join(';');}return $0;},get_$A:function(){return this.presModel;},isMarkSelected:function(markId){if(ss.isNullOrUndefined(this.get_$A())){return false;}return (this.get_ids()||new Array(0)).contains(markId);},isLegendItemSelected:function(item){if(this.get_selectionType()!=='legend-items'){return false;}if(ss.isNullOrUndefined(this.$8)){this.$8={};if(ss.isValue(this.get_ids())){var $enum1=ss.IEnumerator.getEnumerator(this.get_ids());while($enum1.moveNext()){var $0=$enum1.current;this.$8[$0]=true;}}}return Object.keyExists(this.$8,item.abi);},isAnyLegendItemSelected:function(){if(this.get_selectionType()!=='legend-items'){return false;}if(ss.isValue(this.get_ids())){return this.get_ids().length>0;}return false;},isNodeSelected:function(nodeGroup){return ss.isValue(this.$C(nodeGroup.zk,nodeGroup.zi));},findNodeSelection:function(nodeGroup){return this.$C(nodeGroup.zk,nodeGroup.zi);},isNodeAncestorSelected:function(nodeGroup){if(ss.isNullOrUndefined(nodeGroup.zk)||ss.isNullOrUndefined(nodeGroup.zi)){return false;}for(var $0=1;$0<nodeGroup.zk.length;$0++){var $1=nodeGroup.zk.extract($0);var $2=nodeGroup.zi.extract($0);if(ss.isValue(this.$C($1,$2))){return true;}}return false;},setOverriddenTupleIds:function(tupleIds){if(this.get_$A().akf!=='tuples'){return;}if(_.isEqual(this.$6,tupleIds)||(tab.MiscUtil.isNullOrEmpty(this.$6)&&tab.MiscUtil.isNullOrEmpty(tupleIds))){return;}this.$6=tupleIds;this.raiseEvent(this.$9);},update:function(selectionPresModel){if(this.isNewPresModelSameAsOld(selectionPresModel)&&ss.isNullOrUndefined(this.$6)){return;}this.$7=null;this.$8=null;this.$6=null;this.swapAndCopyPresModel(selectionPresModel);this.raiseEvent(this.$9);},isNewPresModelSameAsOld:function(newPM){if(ss.isNullOrUndefined(this.presModel)!==ss.isNullOrUndefined(newPM)){return false;}var $0=newPM;if($0.akf!==this.get_selectionPresModel().akf){return false;}if(ss.isValue($0.acg)&&!_.isEqual($0.acg,this.get_selectionPresModel().acg)){return false;}if(ss.isValue($0.awd)&&!_.isEqual($0.awd,this.get_selectionPresModel().awd)){return false;}if(ss.isValue($0.awb)&&!_.isEqual($0.awb,this.get_selectionPresModel().awb)){return false;}return true;},$C:function($p0,$p1){if(ss.isNullOrUndefined($p0)&&ss.isNullOrUndefined($p1)){return null;}if(ss.isNullOrUndefined(this.$7)){this.$7={};var $0=this.get_$A();if(ss.isValue($0.awd)){var $enum1=ss.IEnumerator.getEnumerator($0.awd);while($enum1.moveNext()){var $1=$enum1.current;this.$7[tab.SelectionModel.$B($1.zk,$1.zi)]=$1;}}}if(!Object.getKeyCount(this.$7)){return null;}return this.$7[tab.SelectionModel.$B($p0,$p1)];},createSelectionToken:function(){return this.get_selectionPresModel();}}
tab.DataSourceModel=function(parent){tab.DataSourceModel.initializeBase(this,[parent,new tab.PresModelPathItem('apn')]);this.$6={};this.$B={};this.$7={};this.$D={};this.$8={};this.$C={};this.$9={};this.$E={};this.$A=[];}
tab.DataSourceModel.splitGlobalFieldName=function(fn){return (tab.DataSourceModel.$12(fn)).split('].[');}
tab.DataSourceModel.$11=function($p0,$p1){for(var $0=0;$0<$p0.length;$0++){var $1=$p0[$0];if($1.get_localName()===$p1&&$0<$p0.length-1){return _.last($p0,$p0.length-$0-1);}}return null;}
tab.DataSourceModel.$12=function($p0){if(($p0).length>=2&&($p0).charAt(0)==='['&&($p0).charAt(($p0).length-1)===']'){return ($p0).substr(1,($p0).length-2);}return $p0;}
tab.DataSourceModel.prototype={$6:null,$7:null,$8:null,$9:null,$A:null,$B:null,$C:null,$D:null,$E:null,$F:0,get_name:function(){return this.get_$10().s3;},get_caption:function(){return this.get_$10().ry;},get_fields:function(){return this.$A;},get_dataSourceLayoutPresModel:function(){return this.get_$10().apl;},get_$10:function(){return this.presModel;},get_specifiedWidth:function(){return this.$F;},set_specifiedWidth:function(value){this.$F=value;return value;},getFieldIconResource:function(index){var $0=this.get_$10().azr;if(ss.isNullOrUndefined($0)){return '';}if(index<0||index>=$0.uz.length){return 'invalid';}return $0.uz[index];},findField:function(fn){if(ss.isValue(this.$6)&&Object.keyExists(this.$6,fn)){return this.$6[fn];}return null;},findColumnDrillChain:function(column){var $0=null;var $1=column.get_localName();if(column.get_isColumn()&&column.asColumn().get_isInstance()){$1=tab.DataSourceModel.$12(column.asColumn().get_baseColumnName());}var $enum1=ss.IEnumerator.getEnumerator(this.get_fields());while($enum1.moveNext()){var $2=$enum1.current;switch($2.get_instanceType()){case 'drillPath':$0=tab.DataSourceModel.$11($2.asDrillPath().get_levels(),$1);if(ss.isValue($0)){return $0;}break;case 'cubeDimension':var $enum2=ss.IEnumerator.getEnumerator($2.asDimension().get_hierarchies());while($enum2.moveNext()){var $3=$enum2.current;$0=tab.DataSourceModel.$11($3.get_levels(),$1);if(ss.isValue($0)){return $0;}}break;}}return $0;},update:function(datasourcePresModel){if(this.isNewPresModelSameAsOld(datasourcePresModel)){return;}if(ss.isValue(datasourcePresModel.ao7)){this.$A.clear();this.$B=$.extend({},this.$6);this.$C=$.extend({},this.$8);this.$D=$.extend({},this.$7);this.$E=$.extend({},this.$9);var $enum1=ss.IEnumerator.getEnumerator(datasourcePresModel.ao7);while($enum1.moveNext()){var $0=$enum1.current;switch($0.ag5){case 'apf':this.$14(this.$17($0),true);break;case 'ape':var $1=[];var $enum2=ss.IEnumerator.getEnumerator(($0).ao9);while($enum2.moveNext()){var $6=$enum2.current;$1.add(this.$18($6));this.$14($1[$1.length-1],false);}this.$14(this.$16($0,$1),true);break;case 'apd':var $2=[];var $enum3=ss.IEnumerator.getEnumerator(($0).ao9);while($enum3.moveNext()){var $7=$enum3.current;$2.add(this.$18($7));this.$14($2[$2.length-1],false);}this.$14(this.$1A($0,$2),true);break;case 'apb':this.$14(this.$1B($0),true);break;case 'apj':var $3=$0;var $4=[];var $5=[];var $enum4=ss.IEnumerator.getEnumerator($3.api);while($enum4.moveNext()){var $8=$enum4.current;var $9=[];var $enum5=ss.IEnumerator.getEnumerator($8.ao9);while($enum5.moveNext()){var $A=$enum5.current;$9.add(this.$18($A));this.$14($9[$9.length-1],false);}$4.add(this.$1D($8,$9));this.$14($4[$4.length-1],false);}var $enum6=ss.IEnumerator.getEnumerator($3.ao9);while($enum6.moveNext()){var $B=$enum6.current;var $C=this.$18($B);$5.add($C);this.$14($C,false);}this.$14(this.$1E($3,$4,$5),true);break;case 'apg':this.$14(this.$19($0),true);break;case 'ao8':this.$14(this.$18($0),true);break;}}var $dict7=this.$8;for(var $key8 in $dict7){var $D={key:$key8,value:$dict7[$key8]};var $E=$D.value;var $F=$E.get_presModel();var $10=[];var $enum9=ss.IEnumerator.getEnumerator($F.vo);while($enum9.moveNext()){var $11=$enum9.current;var $12=(Object.keyExists(this.$6,$11))?this.$6[$11]:null;if(ss.isValue($12)){$10.add($12);this.$A.remove($12);}}var $enum10=ss.IEnumerator.getEnumerator($F.u0);while($enum10.moveNext()){var $13=$enum10.current;var $14=(Object.keyExists(this.$7,$13))?this.$7[$13]:null;if(ss.isValue($14)){$10.add($14);this.$A.remove($14);}}$E.update($F,$10);}if(ss.isValue(datasourcePresModel.ao9)){var $enum11=ss.IEnumerator.getEnumerator(datasourcePresModel.ao9);while($enum11.moveNext()){var $15=$enum11.current;this.$14(this.$18($15),false);}}this.$15();}else{this.$A.clear();Object.clearKeys(this.$6);Object.clearKeys(this.$7);Object.clearKeys(this.$8);Object.clearKeys(this.$9);}this.swapAndCopyPresModel(datasourcePresModel);},$13:function($p0){this.$A.add($p0);},$14:function($p0,$p1){if($p0.get_isColumn()&&!$p0.asColumn().get_isInstance()){delete this.$B[$p0.get_localName()];this.$6[$p0.get_localName()]=$p0;}var $0=$p0.get_globalName()||$p0.get_localName();switch($p0.get_instanceType()){case 'drillPath':this.$7[$0]=$p0;delete this.$D[$0];break;case 'folder':$0=$0+($p0).get_folderRole();this.$8[$0]=$p0;delete this.$C[$0];break;case 'relationalTable':this.$9[$0]=$p0;delete this.$E[$0];break;default:this.$6[$0]=$p0;delete this.$B[$0];break;}if($p1){this.$13($p0);}},$15:function(){var $dict1=this.$B;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};delete this.$6[$0.key];}Object.clearKeys(this.$B);var $dict3=this.$D;for(var $key4 in $dict3){var $1={key:$key4,value:$dict3[$key4]};delete this.$7[$1.key];}Object.clearKeys(this.$D);var $dict5=this.$C;for(var $key6 in $dict5){var $2={key:$key6,value:$dict5[$key6]};delete this.$8[$2.key];}Object.clearKeys(this.$C);var $dict7=this.$E;for(var $key8 in $dict7){var $3={key:$key8,value:$dict7[$key8]};delete this.$9[$3.key];}Object.clearKeys(this.$E);},$16:function($p0,$p1){var $0=null;if(Object.keyExists(this.$7,$p0.mb)){var $1=this.$7[$p0.mb];if($1.get_isDrillPath()){$0=$1;}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.DrillPathModel(this);}$0.update($p0,$p1);return $0;},$17:function($p0){var $0=null;var $1=$p0.mb+$p0.ahw;if(Object.keyExists(this.$8,$1)){var $2=this.$8[$1];if($2.get_isFolder()){$0=$2;}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.FolderModel(this);}$0.update($p0,[]);return $0;},$18:function($p0){var $0=null;if(Object.keyExists(this.$6,$p0.afc)){var $1=this.$6[$p0.afc];if($1.get_isColumn()){$0=$1.asColumn();}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.FieldColumnModel(this);}$0.update($p0);return $0;},$19:function($p0){var $0=null;if(Object.keyExists(this.$6,$p0.afc)){var $1=this.$6[$p0.afc];if($1.get_isGroup()){$0=$1.asGroup();}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.GroupModel(this);}$0.update($p0);return $0;},$1A:function($p0,$p1){var $0=null;if(Object.keyExists(this.$9,$p0.mb)){var $1=this.$9[$p0.mb];if($1.get_isRelationalTable()){$0=$1.asRelationalTable();}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.RelationalTableModel(this);}$0.update($p0,$p1);return $0;},$1B:function($p0){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p0.api);while($enum1.moveNext()){var $3=$enum1.current;var $4=[];var $enum2=ss.IEnumerator.getEnumerator($3.ao9);while($enum2.moveNext()){var $5=$enum2.current;$4.add(this.$18($5));this.$14($4[$4.length-1],false);}$0.add(this.$1D($3,$4));this.$14($0[$0.length-1],false);}var $1=[];var $enum3=ss.IEnumerator.getEnumerator($p0.apk);while($enum3.moveNext()){var $6=$enum3.current;var $7=[];var $8=[];var $enum4=ss.IEnumerator.getEnumerator($6.api);while($enum4.moveNext()){var $9=$enum4.current;var $A=[];var $enum5=ss.IEnumerator.getEnumerator($9.ao9);while($enum5.moveNext()){var $B=$enum5.current;$A.add(this.$18($B));this.$14($A[$A.length-1],false);}$7.add(this.$1D($9,$A));this.$14($7[$7.length-1],false);}var $enum6=ss.IEnumerator.getEnumerator($6.ao9);while($enum6.moveNext()){var $C=$enum6.current;$8.add(this.$18($C));}$1.add(this.$1E($6,$7,$8));}var $2=[];var $enum7=ss.IEnumerator.getEnumerator($p0.apc);while($enum7.moveNext()){var $D=$enum7.current;$2.add(this.$1B($D));}return this.$1C($p0,$0,$1,$2);},$1C:function($p0,$p1,$p2,$p3){var $0=null;if(Object.keyExists(this.$6,$p0.afc)){var $1=this.$6[$p0.afc];if($1.get_isCubeDimension()){$0=$1.asDimension();}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.CubeDimensionModel(this);}$0.update($p0,$p1,$p2,$p3);return $0;},$1D:function($p0,$p1){var $0=null;if(Object.keyExists(this.$6,$p0.afc)){var $1=this.$6[$p0.afc];if($1.get_isCubeHierarchy()){$0=$1.asHierarchy();}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.CubeHierarchyModel(this);}$0.update($p0,$p1);return $0;},$1E:function($p0,$p1,$p2){var $0=null;if(Object.keyExists(this.$6,$p0.mb)){var $1=this.$6[$p0.mb];if($1.get_isCubeFolder()){$0=$1.asCubeFolder();}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.CubeFolderModel(this);}$0.update($p0,$p1,$p2);return $0;}}
tab.LayerEncodingModel=function(parent,paneSpecId){tab.LayerEncodingModel.initializeBase(this,[parent,new tab.PresModelPathItem('layer-encoding['+paneSpecId+']')]);this.$6=new tab.MarkSizeModel(this);}
tab.LayerEncodingModel.prototype={$6:null,add_newLayerEncoding:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newLayerEncoding:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_id:function(){return this.get_layerPresModel().wn;},get_name:function(){return this.get_layerPresModel().mb;},get_isTableCalc:function(){return this.get_layerPresModel().d3;},get_encodings:function(){return _.filter(this.get_layerPresModel().as0,function($p1_0){
return $p1_0.bo&&$p1_0.an;});},get_textEncodingDropdown:function(){return this.getDropdownPresModel('text-encoding');},get_colorEncodingDropdown:function(){return this.getDropdownPresModel('color-encoding');},get_currentPrimitiveType:function(){var $0=_.find(this.get_primitiveTypes(),function($p1_0){
return $p1_0.ao;});return $0;},get_primitiveTypes:function(){return _.filter(this.get_layerPresModel().as2,function($p1_0){
return $p1_0.bo&&$p1_0.an;});},get_markSizeModel:function(){return this.$6;},get_layerPresModel:function(){return this.presModel;},update:function(newPresModel){this.simpleSwapToUpdate(newPresModel,this.$7);if(ss.isNullOrUndefined(this.$6)){this.$6=new tab.MarkSizeModel(this);}this.$6.update(this.getDropdownPresModel('size-encoding'));},equals:function(pm){return this.get_id()===pm.wn;},getDropdownPresModel:function($p0){var $0=_.filter(this.get_layerPresModel().as0,function($p1_0){
return $p1_0.bo&&$p1_0.an&&$p1_0.ahq===$p0;});if(ss.isNullOrUndefined($0)||$0.length!==1){return null;}return $0[0].as3;}}
tab.MarksCardModel=function(parent){this.$6=[];tab.MarksCardModel.initializeBase(this,[parent,new tab.PresModelPathItem('marks-card')]);}
tab.MarksCardModel.prototype={$7:null,add_newMarksCard:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_newMarksCard:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,get_layers:function(){return this.$6;},get_activePaneSpecId:function(){return this.$7;},set_activePaneSpecId:function(value){this.$7=value;return value;},update:function(newPresModel){if(this.isNewPresModelSameAsOld(newPresModel)){return;}var $0=[];if(ss.isValue(newPresModel)&&ss.isValue(newPresModel.asv)){this.$9(newPresModel.asv,$0);}if(ss.isValue(newPresModel)&&ss.isValue(newPresModel.asw)){var $enum1=ss.IEnumerator.getEnumerator(newPresModel.asw);while($enum1.moveNext()){var $1=$enum1.current;this.$9($1,$0);}}this.$6=$0;this.swapAndCopyPresModel(newPresModel);this.raiseEvent(this.$8);},$9:function($p0,$p1){var $0=_.find(this.$6,function($p1_0){
return $p1_0.equals($p0);});if(ss.isNullOrUndefined($0)){$0=new tab.LayerEncodingModel(this,$p0.wn);}$0.update($p0);$p1.add($0);}}
tab.MarkSizeModel=function(parent){tab.MarkSizeModel.initializeBase(this,[parent,new tab.PresModelPathItem('mark-size')]);this.$6=parent;}
tab.MarkSizeModel.prototype={$6:null,$7:null,add_sliderFractionUpdated:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_sliderFractionUpdated:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,get_markSizePresModel:function(){return this.presModel;},get_explanation:function(){return this.get_markSizePresModel().sb;},get_minMarkSize:function(){return this.get_markSizePresModel().aej;},get_maxMarkSize:function(){return this.get_markSizePresModel().aek;},get_currentMarkSize:function(){return this.get_markSizePresModel().ael;},get_currentSliderFraction:function(){return this.$7.valueToFraction(this.get_currentMarkSize());},get_transform:function(){return this.$7;},get_parentModel:function(){return this.$6;},getCurrentFraction:function(){return this.get_currentSliderFraction();},setCurrentFraction:function(newValue){},markSizeUpdated:function(){if(ss.isValue(this.$8)){this.$8(this.get_currentSliderFraction());}},update:function(pmodel){if(ss.isValue(pmodel)){this.$9(pmodel);}this.simpleSwapToUpdate(pmodel,ss.Delegate.create(this,this.markSizeUpdated));},$9:function($p0){switch($p0.as9.length){case 0:this.$7=new tab.LinearRangeTransform($p0.aej,$p0.aek);break;case 1:var $0=$p0.as9[0];this.$7=new tab.AcceleratingRangeTransform($p0.aej,$p0.aek,$0.aem,$0.aen,$0.aem,$0.aen);break;case 2:default:var $1=$p0.as9[0];var $2=$p0.as9[1];this.$7=new tab.AcceleratingRangeTransform($p0.aej,$p0.aek,$1.aem,$1.aen,$2.aem,$2.aen);break;}}}
tab.DataSchemaModel=function(parent){tab.DataSchemaModel.initializeBase(this,[parent,new tab.PresModelPathItem('app')]);this.$6=[];}
tab.DataSchemaModel.prototype={$6:null,add_newDataSchema:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newDataSchema:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_parametersDataSource:function(){if(ss.isNullOrUndefined(this.get_dataSchemaPresModel())){return null;}var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $0=$enum1.current;if($0.get_name()===this.get_dataSchemaPresModel().s5){return $0;}}return null;},get_dataSchemaPresModel:function(){return this.presModel;},get_dataSources:function(){return this.$6;},getDefaultDataSourceForSheet:function(sheetName){if(ss.isNullOrUndefined(this.get_dataSchemaPresModel())){return null;}var $0=null;if(Object.keyExists(this.get_dataSchemaPresModel().apr,sheetName)){$0=this.get_dataSchemaPresModel().apr[sheetName].s4;}if(String.isNullOrEmpty($0)){return _.chain(this.$6).filter(ss.Delegate.create(this,function($p1_0){
return $p1_0.get_name()!==this.get_dataSchemaPresModel().s5;})).last().value();}return _.find(this.$6,function($p1_0){
return $p1_0.get_name()===$0;});},getDataSourceCount:function(includeParameters){if(includeParameters||ss.isNullOrUndefined(this.get_parametersDataSource())){return this.get_dataSources().length;}else{return this.get_dataSources().length-1;}},findField:function(globalFieldName){var $0=this.findDataSourceFromGlobalFieldName(globalFieldName);if(ss.isNullOrUndefined($0)){return null;}return $0.findField(globalFieldName);},findDataSourceByName:function(datasourceName){return _.find(this.get_dataSources(),function($p1_0){
return $p1_0.get_name().toString()===datasourceName;});},findDataSourceFromGlobalFieldName:function(fn){var $0=tab.DataSourceModel.splitGlobalFieldName(fn);if($0.length<=1){return null;}var $1=$0[0].replace(new RegExp('\\]\\]'),']');return this.findDataSourceByName($1);},dataSourceForField:function(field){return this.findDataSourceFromGlobalFieldName(field.get_globalName());},update:function(newPresModel){if(this.isNewPresModelSameAsOld(newPresModel)){return;}var $0=(ss.isValue(newPresModel)&&ss.isValue(newPresModel.apm))?newPresModel.apm.apo:new Array(0);var $1=this.$6.clone();var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $2=$enum1.current;var $3=_.find(this.$6,function($p1_0){
return $p1_0.get_name()===$2.s3;});if(ss.isNullOrUndefined($3)){$3=new tab.DataSourceModel(this);this.$6.add($3);}else{$1.remove($3);}$3.update($2);}var $enum2=ss.IEnumerator.getEnumerator($1);while($enum2.moveNext()){var $4=$enum2.current;this.$6.remove($4);}this.swapAndCopyPresModel(newPresModel);this.raiseEvent(this.$7);}}
tab.PillModel=function(parent,index){tab.PillModel.initializeBase(this,[parent,new tab.PresModelPathItem(index.toString())]);}
tab.PillModel.prototype={$6:null,get_encodingType:function(){if(ss.isNullOrUndefined(this.get_item())||ss.isNullOrUndefined(this.get_item().ahq)){return 'invalid-encoding';}return this.get_item().ahq;},get_alternateEncodings:function(){if(ss.isNullOrUndefined(this.get_item())||ss.isNullOrUndefined(this.get_item().as0)){return [];}return _.filter(this.get_item().as0,function($p1_0){
return $p1_0.bo&&$p1_0.an;});},get_filterType:function(){if(ss.isNullOrUndefined(this.get_item())||ss.isNullOrUndefined(this.get_item().aht)){return 'no-filter';}return this.get_item().aht;},get_hasDrill:function(){return (this.get_item().ai||false);},get_shouldDrill:function(){return this.get_hasDrill()&&(this.get_item().aj||false);},get_item:function(){return this.presModel;},get_column:function(){return this.$6;},get_tooltip:function(){return tableau.format.stripFormattedText(this.get_item().v7);},get_sideIconToolip:function(){return tableau.format.stripFormattedText(this.get_item().v8);},get_displayName:function(){return this.get_item().rx;},get_contextMenuCommands:function(){return this.get_item().aol;},get_isMultipleFields:function(){return this.get_item().ahq!=='invalid-encoding'&&Type.canCast(this.$6,tab.MultipleFieldsModel);},update:function(item,newColumn){if(this.isNewPresModelSameAsOld(item)){return;}this.$6=newColumn;this.swapAndCopyPresModel(item);}}
tab.ShelfModel=function(parent,index){tab.ShelfModel.initializeBase(this,[parent,new tab.PresModelPathItem(index.toString())]);}
tab.ShelfModel.prototype={$6:null,add_shelfChanged:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_shelfChanged:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_paneId:function(){return (ss.isValue(this.get_$8().wn))?this.get_$8().wn:0;},get_shelfType:function(){return this.get_$8().ajv;},get_pills:function(){return this.$6;},get_tooltip:function(){return tableau.format.stripFormattedText(this.get_$8().v7);},get_$8:function(){return this.get_presModel();},update:function(shelf,schema){if(this.isNewPresModelSameAsOld(shelf)){return;}if(ss.isNull(shelf.apv)){this.$6=[];}else if(ss.isValue(shelf.apv)){var $0=[];var $1=new tab.ShelfItemsArrayModel(this);for(var $2=0;$2<shelf.apv.length;$2++){var $3=shelf.apv[$2];var $4=$3.afc;var $5;if(String.isNullOrEmpty($4)&&shelf.ajv==='encoding-shelf'){$5=new tab.MultipleFieldsModel();}else{$5=schema.findField($4);}if(ss.isNullOrUndefined($5)){$3.ak=true;}if($3.ak){var $7=new tab.FieldColumnModel(schema.findDataSourceFromGlobalFieldName($4));var $8={};$8.ag5='ao8';$8.afc=$4;$8.rt=$4;$8.abs=0;$7.update($8);$5=$7;}var $6=new tab.PillModel($1,$2);$6.update($3,$5);$0.add($6);}this.$6=$0;}this.swapAndCopyPresModel(shelf);this.raiseEvent(this.$7,this);}}
tab.ShelfItemsArrayModel=function(parent){tab.ShelfItemsArrayModel.initializeBase(this,[parent,new tab.PresModelPathItem('shelfItems',1)]);}
tab.VisualModel=function(parent){this.$9={};tab.VisualModel.initializeBase(this,[parent,new tab.PresModelPathItem('at5')]);this.$17={};this.$18={};this.$19={};this.$1A={};this.$6=new tab.SelectionsModel(this,'av0');this.$7=new tab.SelectionModel(null,-1);this.$8=new tab.SelectionsModel(this,'av1');this.$1C=true;this.$1D=false;this.$7.update(tab.SelectionsModel.$8('tuples'));}
tab.VisualModel.get_$26=function(){return tab.Logger.lazyGetLogger(tab.VisualModel);}
tab.VisualModel.prototype={$6:null,$7:null,$8:null,$A:null,$B:null,$C:null,$D:null,$E:null,$F:null,$10:null,$11:null,$12:null,$13:null,$14:null,$15:null,$16:null,$17:null,$18:null,$19:null,$1A:null,$1B:null,$1C:false,$1D:false,add_newVisual:function(value){this.$1E=ss.Delegate.combine(this.$1E,value);},remove_newVisual:function(value){this.$1E=ss.Delegate.remove(this.$1E,value);},$1E:null,add_newHiddenTuples:function(value){this.$1F=ss.Delegate.combine(this.$1F,value);},remove_newHiddenTuples:function(value){this.$1F=ss.Delegate.remove(this.$1F,value);},$1F:null,add_newFilteredTuples:function(value){this.$20=ss.Delegate.combine(this.$20,value);},remove_newFilteredTuples:function(value){this.$20=ss.Delegate.remove(this.$20,value);},$20:null,add_urlInfoCacheChange:function(value){this.$21=ss.Delegate.combine(this.$21,value);},remove_urlInfoCacheChange:function(value){this.$21=ss.Delegate.remove(this.$21,value);},$21:null,add_visualValidStateChanged:function(value){this.$22=ss.Delegate.combine(this.$22,value);},remove_visualValidStateChanged:function(value){this.$22=ss.Delegate.remove(this.$22,value);},$22:null,add_brushingFromActionChanged:function(value){this.$23=ss.Delegate.combine(this.$23,value);},remove_brushingFromActionChanged:function(value){this.$23=ss.Delegate.remove(this.$23,value);},$23:null,add_colorDictionaryChanged:function(value){this.$24=ss.Delegate.combine(this.$24,value);},remove_colorDictionaryChanged:function(value){this.$24=ss.Delegate.remove(this.$24,value);},$24:null,add_customShapesLoaded:function(value){this.$25=ss.Delegate.combine(this.$25,value);},remove_customShapesLoaded:function(value){this.$25=ss.Delegate.remove(this.$25,value);},$25:null,get_worksheetName:function(){return this.get_visualId().st;},get_visualId:function(){return this.get_visualPresModel().anb;},get_containerGeometry:function(){return this.get_zone().get_zoneContentRect();},get_visualPresModel:function(){return this.presModel;},get_tooltipMode:function(){return this.get_visualPresModel().alp;},get_scenePresModel:function(){return this.get_visualPresModel().aua;},get_shelves:function(){return this.$C;},get_analyticsModel:function(){return this.$B;},get_marksCardModel:function(){return this.$F;},get_selectionsModel:function(){return this.$6;},get_impliedSelectionModel:function(){return this.$7;},get_brushingsModel:function(){return this.$8;},get_showMeModel:function(){return this.$11;},get_sceneModel:function(){return this.$D;},get_labelsModel:function(){return this.$E;},get_mapServerModel:function(){return this.$10;},get_filters:function(){return _.values(this.$9);},get_filterModels:function(){return this.$9;},get_geometryModel:function(){return this.$16;},get_sortIndicatorsModel:function(){return this.$15;},get_vizDataModel:function(){return this.$12;},get_titleModel:function(){return this.$14;},get_captionModel:function(){return this.$13;},get_hiddenTuples:function(){return this.$18;},get_filteredTuples:function(){return this.$1A;},get_isMap:function(){return this.get_visualPresModel().d4;},get_hasBackgroundImage:function(){return this.get_visualPresModel().d5;},get_floatingToolbarVisibility:function(){return this.get_visualPresModel().ak7;},get_geoSearchVisibility:function(){return this.get_visualPresModel().ak8;},get_cacheUrlInfo:function(){return this.$1B;},get_hasModifiedAxes:function(){return this.get_visualPresModel().ea;},get_backgroundColor:function(){return this.get_visualPresModel().agd;},get_paneBGColor:function(){return this.get_visualPresModel().agq;},get_headerBGColor:function(){return this.get_visualPresModel().agr;},get_shouldUpdate:function(){return tab.ApplicationModel.get_instance().get_autoUpdate();},get_invalidSheets:function(){var $0=tab.ApplicationModel.get_instance().get_workbook().findContentDashboard();return $0.get_invalidSheets();},get_isVisualValid:function(){return this.$1C;},set_isVisualValid:function(value){if(this.get_visualPresModel().ed&&value!==this.$1C){this.$1C=value;this.raiseEvent(this.$22);}return value;},get_isBrushedFromAction:function(){return this.$1D;},set_isBrushedFromAction:function(value){if(this.$1D!==value){this.$1D=value;this.raiseEvent(this.$23);}return value;},get_zone:function(){var $0=Type.safeCast(this.get_parent(),tab.ZoneContentWrapperModel);return $0.get_zone();},vizDataContainsDuplicateCaption:function(caption){if(ss.isNullOrUndefined(this.get_vizDataModel())){return false;}return _.filter(this.get_vizDataModel().get_fieldCaptions(),function($p1_0){
return $p1_0===caption;}).length>1;},setFilteredTuples:function(fieldName,tuplesToFilter){this.$19[fieldName]=tuplesToFilter;var $0={};var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$19));while($enum1.moveNext()){var $2=$enum1.current;var $3=this.$19[$2];var $enum2=ss.IEnumerator.getEnumerator($3);while($enum2.moveNext()){var $4=$enum2.current;$0[$4.toString()]=$4;}}var $1=Object.getKeyCount(this.$1A)!==Object.getKeyCount($0);if(!$1){var $enum3=ss.IEnumerator.getEnumerator(Object.keys(this.$1A));while($enum3.moveNext()){var $5=$enum3.current;if(!Object.keyExists($0,$5)){$1=true;break;}}}if($1){this.$1A=$0;if(ss.isValue(this.$20)){this.$20();}}},setHiddenTuples:function(fieldName,tuplesToHide){this.$17[fieldName]=tuplesToHide;var $0={};var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$17));while($enum1.moveNext()){var $2=$enum1.current;var $3=this.$17[$2];var $enum2=ss.IEnumerator.getEnumerator($3);while($enum2.moveNext()){var $4=$enum2.current;$0[$4.toString()]=$4;}}var $1=Object.getKeyCount(this.$18)!==Object.getKeyCount($0);if(!$1){var $enum3=ss.IEnumerator.getEnumerator(Object.keys(this.$18));while($enum3.moveNext()){var $5=$enum3.current;if(!Object.keyExists($0,$5)){$1=true;break;}}}if($1){this.$18=$0;if(ss.isValue(this.$1F)){this.$1F();}}},getMutableCopyOfPresModel:function(){var $0=this.get_visualPresModel().aua;var $1=this.get_visualPresModel().aub;var $2=this.get_visualPresModel().awz;delete this.get_visualPresModel().aua;delete this.get_visualPresModel().awz;delete this.get_visualPresModel().aub;var $3=tab.VisualModel.callBaseMethod(this, 'getMutableCopyOfPresModel');this.get_visualPresModel().aua=$0;this.get_visualPresModel().awz=$2;this.get_visualPresModel().aub=$1;return $3;},update:function(visualPresModel){if(ss.isNullOrUndefined(this.$C)){this.$C=new tab.ShelvesModel(this);}if(ss.isValue(visualPresModel.apw)){var $6=this.$2C(visualPresModel);this.$C.update(visualPresModel.apw,tab.ApplicationModel.get_instance().get_workbook().get_dataSchema(),$6);}if(ss.isValue(visualPresModel.auh)){if(ss.isNullOrUndefined(this.$B)){this.$B=new tab.AnalyticsPaneModel(this);}this.$B.update(visualPresModel.auh);}if(ss.isValue(visualPresModel.awz)){if(ss.isNullOrUndefined(this.$12)){this.$12=new tab.VizDataModel(this);}this.$12.update(visualPresModel.awz);}if(ss.isNullOrUndefined(this.$D)){this.$D=new tab.SceneModel(this);}if(ss.isValue(visualPresModel.aua)){if(ss.isValue(this.$17)){var $7=Object.getKeyCount(this.$18)>0;this.$17={};this.$18={};if($7){this.raiseEvent(this.$1F);}}if(ss.isValue(this.$19)){var $8=Object.getKeyCount(this.$1A)>0;this.$19={};this.$1A={};if($8){this.raiseEvent(this.$20);}}if(ss.isValue(visualPresModel.aua.avp)&&ss.isValue(visualPresModel.aua.avp.length>0)){tab.ApplicationModel.get_instance().get_shapeManager().updateCustomImageMap(visualPresModel.aua.avp,ss.Delegate.create(this,function(){
this.$25();}));}this.$D.update(visualPresModel.aua);}if(ss.isValue(visualPresModel.avn)&&ss.isValue(this.get_visualPresModel())){if(!_.isEqual(this.get_visualPresModel().avn,visualPresModel.avn)){this.raiseEvent(this.$24);}}if(ss.isNullOrUndefined(this.$E)){this.$E=new tab.SceneModel(this);}if(ss.isValue(visualPresModel.aub)){this.$E.update(visualPresModel.aub);}if(ss.isNullOrUndefined(this.$F)){this.$F=new tab.MarksCardModel(this);}if(ss.isValue(visualPresModel.asx)){this.$F.update(visualPresModel.asx);}if(ss.isValue(visualPresModel.av0)&&visualPresModel.av0.length>0){this.$6.update(visualPresModel.av0);}if(ss.isValue(visualPresModel.av1)){this.$8.update(visualPresModel.av1);}this.$2A(this.$6.get_nodeSelection().get_nodes());if(!ss.isValue(this.$11)){this.$11=new tab.CommandsModel(this);}if(ss.isValue(visualPresModel.aon)){this.$11.update(visualPresModel.aon);}if(ss.isNullOrUndefined(this.$10)){this.$10=new tab.MapServerModel(this);}if(ss.isValue(visualPresModel.auc)||!visualPresModel.d4){var $9=(visualPresModel.d4)?visualPresModel.auc:null;this.$10.update($9);}var $0=visualPresModel.tn||'';var $1=tab.JsonUtil.parseJson($0);if(this.$29($1,$0)){this.$A=$0;if(ss.isValue($1)){var $A={};var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $B=$enum1.current;var $C=tableau.format.formatQualifiedName($B.name);var $D=this.$9[$C];if(ss.isNullOrUndefined($D)){$D=tab.ModelUtils.createFilterModel(this,$B);}$D.update($B);$A[$C]=$D;}this.$9=$A;}}var $2=visualPresModel.tq||'';var $3=tab.JsonUtil.parseJson($2);if(!_.isEqual($3,this.get_cacheUrlInfo())){this.$1B=$3;this.$28();}var $4=visualPresModel.tp||'';if(!ss.isValue(this.$16)){this.$16=new tab.ViewGeometryModel(this);}var $5=tab.JsonUtil.parseJson($4);this.$16.update($5);if(ss.isNullOrUndefined(this.$14)){this.$14=new tab.TextRegionModel(this,'ax0');}if(ss.isValue(visualPresModel.ax0)){this.$14.update(visualPresModel.ax0);}if(!ss.isValue(this.$13)){this.$13=new tab.TextRegionModel(this,'ax1');}if(ss.isValue(visualPresModel.ax1)){this.$13.update(visualPresModel.ax1);}if(!ss.isValue(this.$15)){this.$15=new tab.SortIndicatorsModel(this);}if(ss.isValue(visualPresModel.ap3)){this.$15.update(visualPresModel.ap3);}this.swapAndCopyPresModel(visualPresModel);if(this.get_isVisualValid()!==this.get_visualPresModel().ed){this.$1C=this.get_visualPresModel().ed;this.raiseEvent(this.$22);}this.$27();},$27:function(){this.raiseEvent(this.$1E);},$28:function(){if(ss.isValue(this.get_cacheUrlInfo())){this.raiseEvent(this.$21);}},$29:function($p0,$p1){if(ss.isNullOrUndefined(this.$A)){return true;}if(ss.isValue($p0)){var $0=_.find($p0,function($p1_0){
return $p1_0.isTiled;});if(ss.isValue($0)){return true;}}return (this.$A!==$p1);},hasFilterFieldData:function(fieldName){return (ss.isValue(this.get_vizDataModel())&&this.get_vizDataModel().get_filterFields().indexOf(fieldName)!==-1);},getEffectiveSelectedTuples:function(directTupleSelection){var $0;var $1=this.$7.get_ids();if(tab.MiscUtil.isNullOrEmpty($1)){$0=directTupleSelection;}else if(tab.MiscUtil.isNullOrEmpty(directTupleSelection)){$0=$1;}else{var $2=[];$2.addRange(directTupleSelection);$2.addRange($1);$0=$2;}return $0;},$2A:function($p0){var $0=tab.BrushingComputer.getTuplesAssociatedWithSelectedNodes(this,$p0);this.$7.setOverriddenTupleIds($0);},$2B:function(){this.$7.setOverriddenTupleIds(new Array(0));},$2C:function($p0){if(ss.isValue($p0)&&ss.isValue($p0.asx)&&ss.isValue($p0.asx.wn)){return $p0.asx.wn;}return tab.ModelUtils.findActivePaneSpecId();}}
tab.DashboardModel=function(parent,dashboardID){this.$6={};tab.DashboardModel.initializeBase(this,[parent,new tab.PresModelPathItem('at2')]);this.$8=false;this.$7=new tab.ZonesModel(this);}
tab.DashboardModel.prototype={$7:null,$8:false,$9:false,$A:null,add_newDashboard:function(value){this.$B=ss.Delegate.combine(this.$B,value);},remove_newDashboard:function(value){this.$B=ss.Delegate.remove(this.$B,value);},$B:null,add_activeZoneChanged:function(value){this.$C=ss.Delegate.combine(this.$C,value);},remove_activeZoneChanged:function(value){this.$C=ss.Delegate.remove(this.$C,value);},$C:null,add_renderModeChanged:function(value){this.$D=ss.Delegate.combine(this.$D,value);},remove_renderModeChanged:function(value){this.$D=ss.Delegate.remove(this.$D,value);},$D:null,get_zonesModel:function(){return this.$7;},get_zoneModels:function(){return this.$7.get_zoneModels();},get_actionPresModels:function(){if(ss.isValue(this.presModel)){return this.get_dashboardPresModel().awk;}return null;},get_dashboardPresModel:function(){return this.presModel;},get_backgroundColor:function(){if(ss.isValue(this.presModel)&&ss.isValue(this.get_dashboardPresModel().vv)){return this.get_dashboardPresModel().vv['backgroundColor'];}return null;},get_sheetName:function(){if(ss.isValue(this.presModel)&&ss.isValue(this.get_dashboardPresModel().ap9)){return this.get_dashboardPresModel().ap9.ss;}return null;},get_sheetPath:function(){if(ss.isValue(this.presModel)){return this.get_dashboardPresModel().ane;}return null;},get_invalidSheets:function(){if(ss.isValue(this.presModel)){return [this.get_dashboardPresModel().anc];}return [];},get_autoUpdate:function(){return this.$9;},set_autoUpdate:function(value){this.$9=value;return value;},get_hasSelection:function(){if(ss.isValue(this.presModel)){return this.get_dashboardPresModel().dp;}return false;},get_invalid:function(){return this.$8;},set_invalid:function(value){if(value===this.$8){return;}this.$8=value;return value;},get_activeZoneID:function(){if(ss.isValue(this.presModel)){return this.get_dashboardPresModel().aa0;}return 0;},get_activeVisual:function(){if(ss.isNullOrUndefined(this.get_dashboardPresModel())){return null;}if(this.get_activeZoneID()>0){var $enum1=ss.IEnumerator.getEnumerator(this.get_zoneModels());while($enum1.moveNext()){var $0=$enum1.current;if($0.get_zoneId()===this.get_activeZoneID()){return $0.get_visualModel();}}}return null;},get_renderMode:function(){return tab.ApplicationModel.get_instance().get_renderMode();},get_formats:function(){if(ss.isValue(this.presModel)){return this.get_dashboardPresModel().vv;}return null;},get_portSize:function(){if(ss.isValue(this.presModel)){return this.get_dashboardPresModel().arr;}return null;},get_isDashboard:function(){if(ss.isValue(this.presModel)&&ss.isValue(this.get_dashboardPresModel().ane)){return this.get_dashboardPresModel().ane.aw;}return false;},get_flipboard:function(){var $0=_.find(this.get_zoneModels(),function($p1_0){
return $p1_0.get_zoneType()==='flipboard';});return $0.get_model();},get_legacyMenus:function(){if(ss.isValue(this.presModel)){return this.get_dashboardPresModel().atx;}return null;},getViewId:function(sheetName){if(!Object.keyExists(this.get_dashboardPresModel().vw,sheetName)){return null;}return this.get_dashboardPresModel().vw[sheetName];},getViewSession:function(sheetName){return this.$6[sheetName];},getZone:function(zoneId){return this.$7.getZone(zoneId);},hasZone:function(zoneId){return this.$7.hasZone(zoneId);},isValidSheet:function(zone){return ss.isValue(this.get_dashboardPresModel().anc)&&(zone.get_zoneType()!=='viz'||this.get_dashboardPresModel().anc.indexOf(zone.get_worksheetName())===-1);},getMutableCopyOfPresModel:function(){var $0=this.get_dashboardPresModel().axu;delete this.get_dashboardPresModel().axu;var $1=tab.DashboardModel.callBaseMethod(this, 'getMutableCopyOfPresModel');this.get_dashboardPresModel().axu=$0;return $1;},update:function(dashboardPresModel){if(ss.isValue(this.$A)&&this.$A!==this.get_renderMode()){this.raiseEvent(this.$D);}this.$A=this.get_renderMode();if(ss.isValue(dashboardPresModel.axu)){this.$7.update(dashboardPresModel.axu);}if(ss.isValue(dashboardPresModel.dp)){}if(ss.isValue(dashboardPresModel.dn)){this.$9=dashboardPresModel.dn;}if(ss.isValue(dashboardPresModel.vw)){var $dict1=dashboardPresModel.vw;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=$1.key;var $3=$1.value;var $4=this.$6[$2];if(ss.isNullOrUndefined($4)){$4=new tab.ViewSession(tab.CommandController.get().get_legacySession().get_urlRoot(),$2,$3);this.$6[$2]=$4;}$4.set_viewId($3);}var $0=_.difference(_.keys(this.$6),_.keys(dashboardPresModel.vw));var $enum3=ss.IEnumerator.getEnumerator($0);while($enum3.moveNext()){var $5=$enum3.current;delete this.$6[$5];}}if(ss.isValue(dashboardPresModel.aa0)){if((ss.isNullOrUndefined(this.get_dashboardPresModel())||this.get_dashboardPresModel().aa0!==dashboardPresModel.aa0)){this.raiseEvent(this.$C);}}if(!ss.isUndefined(dashboardPresModel.anp)){this.raiseEvent(function(){
tab.CommandController.get().get_legacySession().fireEvent('modifiedSheetsChanged',dashboardPresModel.anp);});}this.swapAndCopyPresModel(dashboardPresModel);this.raiseEvent(this.$B);this.$E();},$E:function(){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return;}var $0=tab.ModelUtils.getVisualModelsFromDashboard(this);var $1={};var $2=null;var $dict1=$0;for(var $key2 in $dict1){var $3={key:$key2,value:$dict1[$key2]};if(!$3.value.get_selectionsModel().get_tupleSelection().get_isEmpty()||(!$3.value.get_selectionsModel().get_nodeSelection().get_isEmpty()&&!$3.value.get_selectionsModel().isOnlyQuantitativeNodeSelected)){var $4=tab.ActionUtils.getApplicableActions($3.key,'on-select','highlight');if(!tab.MiscUtil.isNullOrEmpty($4)){$2=$3.key;var $5=$3.value.get_vizDataModel();var $enum3=ss.IEnumerator.getEnumerator($4);while($enum3.moveNext()){var $6=$enum3.current;if($6.vf.contains($2)){var $7=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create($6.aow).get_simpleCommand());var $8=ss.isNullOrUndefined($5)||tab.BrushingComputer.isSpecialDateTimeHighlighting($7);if(!$8){var $9=tab.BrushingComputer.getHighlightFieldCaptions($7,$5.get_highlightCaptions(),$5.get_fieldCaptions());$8=!tab.MiscUtil.isNullOrEmpty($9);}if($8){var $enum4=ss.IEnumerator.getEnumerator($6.vg);while($enum4.moveNext()){var $A=$enum4.current;$1[$A]=true;}}}}}break;}}if(ss.isNullOrUndefined($2)){var $dict5=$0;for(var $key6 in $dict5){var $B={key:$key6,value:$dict5[$key6]};if(this.$F($B.value)){var $enum7=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum7.moveNext()){var $C=$enum7.current;$1[$C]=true;}break;}}}var $dict8=$0;for(var $key9 in $dict8){var $D={key:$key9,value:$dict8[$key9]};var $E=Object.keyExists($1,$D.key);$D.value.set_isBrushedFromAction($E);}},$F:function($p0){var $enum1=ss.IEnumerator.getEnumerator(tab.ModelUtils.getVizCategoricalLegends($p0));while($enum1.moveNext()){var $0=$enum1.current;if($0.get_isHighlightEnabled()&&!$p0.get_selectionsModel().getLegendSelection($0.get_legendType(),$0.get_legendNames()).get_isEmpty()){return true;}}return false;}}
tab.WorkbookModel=function(parent){tab.WorkbookModel.initializeBase(this,[parent,new tab.PresModelPathItem('at1')]);this.$6=new tab.CommandsModel(this);this.$8=new tab.DataSchemaModel(this);}
tab.WorkbookModel.prototype={$6:null,$7:null,$8:null,$9:null,add_newDashboard:function(value){this.$A=ss.Delegate.combine(this.$A,value);},remove_newDashboard:function(value){this.$A=ss.Delegate.remove(this.$A,value);},$A:null,add_dashboardDeleted:function(value){this.$B=ss.Delegate.combine(this.$B,value);},remove_dashboardDeleted:function(value){this.$B=ss.Delegate.remove(this.$B,value);},$B:null,add_sheetsChanged:function(value){this.$C=ss.Delegate.combine(this.$C,value);},remove_sheetsChanged:function(value){this.$C=ss.Delegate.remove(this.$C,value);},$C:null,add_newWorkbook:function(value){this.$D=ss.Delegate.combine(this.$D,value);},remove_newWorkbook:function(value){this.$D=ss.Delegate.remove(this.$D,value);},$D:null,get_dataSchema:function(){return this.$8;},get_commands:function(){return this.$6;},get_$E:function(){return this.$7;},get_isCurrentSheetStoryboard:function(){return ss.isValue(this.get_storyboard());},get_storyboard:function(){var $0=tab.ModelUtils.findContentDashboard();if(ss.isValue($0)&&$0.get_sheetName()===this.$7.get_sheetName()){return null;}return this.$7;},get_sheetsInfo:function(){return this.$9;},get_isWorkbookIncomplete:function(){return this.get_removedDataSourceCount()>0||this.get_removedSheetCount()>0;},get_isWorkbookModifiedAuthoring:function(){return ss.isValue(this.get_workbookPresModel())&&this.get_workbookPresModel().eh;},get_isCurrentDashboardModified:function(){return (ss.isValue(this.get_$E())&&ss.isValue(this.get_$E().get_dashboardPresModel())&&ss.isValue(this.get_$E().get_dashboardPresModel().anp)&&this.get_$E().get_dashboardPresModel().anp.length>0);},get_removedDataSourceCount:function(){return (this.get_workbookPresModel().xf||0);},get_removedSheetCount:function(){return (this.get_workbookPresModel().xg||0);},get_workbookPresModel:function(){return this.presModel;},set_workbookPresModel:function(value){this.presModel=value;return value;},get_outerDashboardRepositoryUrl:function(){return (ss.isValue(this.$7)&&ss.isValue(this.$7.get_dashboardPresModel())&&ss.isValue(this.$7.get_dashboardPresModel().ap9))?this.$7.get_dashboardPresModel().ap9.ta:null;},get_outerDashboardPortSize:function(){var $0=this.$7.get_portSize();return tab.$create_Size($0.wb,$0.wc);},withDashboard:function(callback){var $0=this.findContentDashboard();if(ss.isValue($0)){callback($0);return;}var $1=null;$1=ss.Delegate.create(this,function($p1_0){
callback($p1_0);this.remove_newDashboard($1);});this.add_newDashboard($1);},$F:function($p0){return (ss.isValue($p0.at2.ap9)&&$p0.at2.ap9.ss!==tsConfig.current_sheet_name);},$10:function($p0){return (ss.isValue($p0.at2.ap9)&&ss.isValue(this.get_workbookPresModel())&&ss.isValue(this.get_workbookPresModel().at2)&&ss.isValue(this.get_workbookPresModel().at2.ap9)&&$p0.at2.ap9.abl!==this.get_workbookPresModel().at2.ap9.abl);},addNewDashboardHandler:function(handler){this.add_newDashboard(handler);if(ss.isValue(this.$7)){handler(this.$7);}},removeDashboardHandler:function(handler){this.remove_newDashboard(handler);},findContentDashboard:function(){if(ss.isNullOrUndefined(this.$7)){return null;}var $0=this.$7;var $enum1=ss.IEnumerator.getEnumerator($0.get_zoneModels());while($enum1.moveNext()){var $1=$enum1.current;if(Type.canCast($1.get_model(),tab.FlipboardModel)){$0=($1.get_model()).get_dashboardModel();break;}}return $0;},update:function(workbookPresModel){if(ss.isValue(workbookPresModel.eh)&&(ss.isNullOrUndefined(this.presModel)||this.get_isWorkbookModifiedAuthoring()!==workbookPresModel.eh)){this.raiseEvent(function(){
tab.CommandController.get().get_legacySession().fireEvent('workbookModifiedChanged',workbookPresModel.eh);});}if(!ss.isValue(this.$8)){this.$8=new tab.DataSchemaModel(this);}if(ss.isValue(workbookPresModel.app)){this.$8.update(workbookPresModel.app);}if(ss.isUndefined(workbookPresModel.at2)){}else if(ss.isNull(workbookPresModel.at2)){var $0=this.$7;this.$7=null;this.raiseEvent(this.$B,$0);}else{if(this.$F(workbookPresModel)||this.$10(workbookPresModel)){this.$7=null;}if(!ss.isValue(this.$7)){this.$7=new tab.DashboardModel(this,'at2');this.raiseEvent(this.$A,this.$7);}this.$7.update(workbookPresModel.at2);}if(ss.isValue(workbookPresModel.aol)){this.$6.update(workbookPresModel.aol);}if(ss.isValue(workbookPresModel.arx)){this.$9=workbookPresModel.arx;this.raiseEvent(this.$C,this);}this.simpleSwapToUpdate(workbookPresModel,this.$D);}}
tab.ServerCommands=function(){}
tab.ServerCommands.$1=function($p0,$p1){return $p0+':'+$p1;}
tab.ServerCommands.executeServerCommand=function(c,uiBlockState,successCallback,errorCallback){var $0=tab.ServerCommands.$0[tab.ServerCommands.$1(c.commandNamespace,c.commandName)];if(ss.isValue($0)){var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;if($1(c)===1){return;}}}tab.CommandController.SendCommand(tab.vqldomain$A.$5(c,uiBlockState,successCallback,errorCallback));}
tab.ServerCommands.addCommandInterceptor=function(c,commandNamespace,commandName){var $0=tab.ServerCommands.$1(commandNamespace,commandName);var $1=tab.ServerCommands.$0[$0];if(ss.isNullOrUndefined($1)){$1=[];tab.ServerCommands.$0[$0]=$1;}$1.add(c);}
tab.ServerCommands.clearAllCommandInterceptors=function(){Object.clearKeys(tab.ServerCommands.$0);}
tab.BaseSession=function(urlRoot){var $0=tabBootstrap.BaseUrlFormatter.formatBaseUrl();if(ss.isValue(urlRoot)){this.urlRoot=urlRoot;}else{this.urlRoot=tabBootstrap.BaseUrlFormatter.formatUrlRoot($0);}if(ss.isValue(tsConfig.site_root)){this.siteRoot=tsConfig.site_root;}else{this.siteRoot=$0;}}
tab.BaseSession.showAlertDialog=function(content,title,isContentSelectable){try{tableau.util.showAlertDialog(content, title, isContentSelectable);}catch($0){}}
tab.BaseSession.prototype={urlRoot:null,siteRoot:null,add_stateChanged:function(value){this.$5=ss.Delegate.combine(this.$5,value);},remove_stateChanged:function(value){this.$5=ss.Delegate.remove(this.$5,value);},$5:null,get_urlRoot:function(){return this.urlRoot;},get_id:function(){return tsConfig.sessionid;},get_$6:function(){return tab.BaseSession.$3;},set_$6:function($p0){tab.BaseSession.$3=$p0;return $p0;},get_waitHandler:function(){if(ss.isNullOrUndefined(tab.BaseSession.$4)){tab.BaseSession.$4=new tab.WaitHandler();}return tab.BaseSession.$4;},get_$7:function(){return this.urlRoot+'/sessions/'+tsConfig.sessionid;},formatThumbnailReference:function(worksheetPath){return this.siteRoot+'/thumb/views/'+worksheetPath;},formatSessionTempfileReference:function(tempfileid,keepfile,attachment){return this.urlRoot+'/tempfile/sessions/'+tsConfig.sessionid+'/?key='+tempfileid+((keepfile)?'&keepfile=yes':'')+((attachment)?'&attachment=yes':'');},railsEncode:function(s){var $dict1=tab.BaseSession.$2;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};s=s.replace($0.value,$0.key);}return s;},nudgeWait:function(){if(ss.isNullOrUndefined(tab.BaseSession.$4)){return false;}tab.BaseSession.$4.nudge();return true;},incrementWait:function(immediateWait){if(ss.isNullOrUndefined(tab.BaseSession.$4)){return false;}tab.BaseSession.$4.addref(immediateWait);return true;},decrementWait:function(){if(ss.isNullOrUndefined(tab.BaseSession.$4)){return false;}tab.BaseSession.$4.release();return true;},handleSessionExpiration:function(limitAttempts){var $0=tab.VizUriModel.createForCurrentWindowLocation();if(limitAttempts&&$0.get_retry()){throw new Error('Failed to re-initialize session');}this.$8(limitAttempts);},handleAuthenticationFailure:function(){this.$8(false);},handleSessionForbiddenAction:function(code,message){var $0=tab.Strings.SessionForbiddenActionTitle;var $1=tab.Strings.SessionForbiddenActionMsg;switch(code){case 16:case 19:case 21:$1=message;break;}tab.BaseSession.showAlertDialog($1,$0,true);},handleSessionLimitExceeded:function(){if(tab.BaseSession.$0){return;}var $0=tab.Strings.TimeLimitExceededWarning;$0+='\n';$0+=tab.Strings.PressBackButtonMessage;var $1=tab.Strings.TimeLimitExceededTitle;tab.BaseSession.$0=true;tab.BaseSession.showAlertDialog($0,$1,true);},handleSessionKilled:function(info){this.$17(info,tab.Strings.SessionEndedAlertTitle,tab.Strings.SessionEndedAlertMessage);},handleUnknownErrorStatus:function(info){this.$17(info,tab.Strings.SessionUnknownErrorTitle,tab.Strings.SessionEndedAlertMessage);},getWindow:function(rootName){return rootName+tsConfig.sessionid.replace(new RegExp('[^A-Za-z0-9_]','g'),'_');},registerEventListener:function(evt,callback){return dojo.subscribe(this.getTopic(evt),callback);},fireEvent:function(evt,data){dojo.publish(this.getTopic(evt),[data]);},fireStateChanged:function(data){if(ss.isValue(this.$5)){this.$5(data);}},$8:function($p0){document.body.style.cursor='wait';var $0=tsConfig.repositoryUrl||tsConfig.origin_repository_url;var $1=tab.VizUriModel.createForCurrentWindowLocationAndVizState($0,tsConfig.current_sheet_name);$1.set_retry($p0);$1.explicitNotGuest=tsConfig.is_authoring&&!tsConfig.is_guest;$1.fullPageLoad();},openDownload:function(url,dialogData){if(ss.isValue(dialogData.popup)){var $0=dialogData.popup;var $1=window.open('about:blank',$0);window.setTimeout(ss.Delegate.create(this,function(){
var $1_0=new tab.WindowHelper($1);if(ss.isValue($1)&&!$1.closed&&!!$1_0.get_innerWidth()&&!!$1_0.get_innerHeight()){$1.location.href=url;}else{if(ss.isValue($1)){$1.close();}dialogData.popup=null;this.openDownload(url,dialogData);}}),500);}else{var $2="\n<div style='text-align:center'>{0}</div><br/>\n  <div class='tab-dialog-actions'>\n    <a name='ok' class='tab-styledButton left' target='{1}' href='{2}' onclick='dijit.getEnclosingWidget(this).hide();'>\n        <span class='tab-styledButtonLeft'></span>\n        <span class='tab-styledButtonMiddle'>{3}</span>\n        <span class='tab-styledButtonRight'></span>\n    </a><button name='cancel' class='tab-styledButton' onclick='dijit.getEnclosingWidget(this).hide();'>\n        <span class='tab-styledButtonLeft'></span>\n        <span class='tab-styledButtonMiddle'>{4}</span>\n        <span class='tab-styledButtonRight'></span>\n    </button>\n  </div>";var $3=(url.indexOf('?')===-1)?'?':'&';url+=$3+'download=true';var $4='_blank';var $5=String.format($2,dialogData.message,$4,url,tab.Strings.DialogButtonDownload,tab.Strings.DialogButtonCancel);var $6=function(){
tab.BaseSession.showAlertDialog($5,dialogData.title,false);};if(ss.isNullOrUndefined(dialogData.noping)){var $7=(url.indexOf('?')===-1)?'?':'&';url+=$7+'nodata=true';var $8=this.$15(null,$6,null,'none');var $9={};$9.headers={Accept:'text/plain'};$9.dataType='text';$9.type='GET';$9.url=url;this.$13($9,$8);}else{tab.BaseSession.showAlertDialog($5,dialogData.title,false);}}},showDownloads:function(urlsByName,dialogData){var $0="\n<div style='text-align:center'>{0}</div><br />\n<div class='dlgDownloads' style='text-align:center'>";var $1="<a href='{1}' target='_blank'>{0}</a><br />";var $2="</div>\n  <div class='tab-dialog-footer'>\n    <div class='tab-dialog-actions'>\n      <input onclick='dijit.getEnclosingWidget(this).hide(); return false;' type='button' value='{0}' name='cancel' />\n    </div>\n  </div>\n</div>";var $3=new ss.StringBuilder(String.format($0,dialogData['message']));var $enum1=ss.IEnumerator.getEnumerator(Object.keys(urlsByName));while($enum1.moveNext()){var $5=$enum1.current;$3.append(String.format($1,$5,urlsByName[$5]));}$3.append(String.format($2,tab.Strings.DialogButtonCancel));var $4=$3.toString();tab.BaseSession.showAlertDialog($4,dialogData['title'],false);},$9:function($p0,$p1,$p2){var $0={};$0.type='POST';$0.url=this.$F('inform');$0.headers={Accept:'text/plain'};$0.contentType='text/plain';var $1=tsConfig.clientErrorReportingMaxRequestSizeBytes;var $2=new ss.StringBuilder();$2.appendLine('url: '+$p0);$2.appendLine('user-agent: '+$p1);var $3=($1-$2.toString().length)/Object.getKeyCount($p2);var $dict1=$p2;for(var $key2 in $dict1){var $4={key:$key2,value:$dict1[$key2]};$2.appendLine($4.key);$2.appendLine($4.value.substr(0,$3-$4.key.length-2));}$0.data=$2.toString();this.$13($0);},sendSessionCommand:function(ns,command,inputModel,onSuccess,onError){var $0={};$0.type='POST';$0.url=this.$10(ns,command);$0.headers={Accept:'application/json, text/javascript'};$0.dataType='json';$0.success=onSuccess;$0.error=onError;var $1=tab.XhrUtil.getMultipartData(null,inputModel);$0.contentType='multipart/form-data; boundary='+$1.header;$0.data=$1.body;var $2=this.$14(null,onSuccess,null);this.$13($0,$2);},$A:function($p0,$p1){if($p1){tab.WorksheetServerCommands.redoToPosition($p0);}else{tab.WorksheetServerCommands.undoToPosition($p0);}},$B:function(){var $0={};$0.error=null;$0.success=null;$0.type='POST';$0.url=this.urlRoot+'/setignore/sessions';var $1={_method:'PUT',target:tsConfig.sessionid};$0.data=$1;$0.async=false;this.$13($0);},requestRestoreFixedAxes:function(visualId){if(!tsConfig.allow_filter){return;}var $0={};$0.commandNamespace='tabsrv';$0.commandName='restore-fixed-axes';var $1={};tab.CommandUtils.addVisualIdToCommand($1,visualId);$0.commandParams=$1;var $2=ss.Delegate.create(this,function($p1_0){
this.fireStateChanged($p1_0);});tab.CommandController.SendCommand(new tab.vqldomain$A($0,'immediately',$2,function(){
}));},executeServerCommand:function(c,successCallback,errorCallback){var $0={};this.$C($0,c);$0.headers={Accept:'text/javascript'};var $1=function($p1_0,$p1_1,$p1_2){
if(ss.isValue(successCallback)){$p1_0=tab.RleDecoder.decode($p1_0);successCallback($p1_0);}};var $2=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$12($p1_2,$p1_0,c.noExceptionDialog);if(ss.isValue(errorCallback)){var $1_0={message:$p1_0.responseText,status:$p1_0.status};errorCallback(Error.createError($p1_2.toString(),$1_0));}});var $3=this.$14(null,$1,(ss.isValue(errorCallback))?$2:null);this.$13($0,$3);},basicPostOpts:function(url,dat){var $0={};$0.type='POST';$0.url=url;$0.headers={Accept:'text/javascript'};$0.dataType='json';$0.data=dat;return $0;},basicGetOpts:function(url){var $0={};$0.type='GET';$0.url=url;$0.headers={Accept:'text/javascript'};$0.dataType='json';return $0;},$C:function($p0,$p1){var $0=tab.XhrUtil.getMultipartData(null,$p1.commandParams);$p0.type='POST';$p0.dataType='json';$p0.contentType='multipart/form-data; boundary='+$0.header;$p0.data=$0.body;$p0.url=this.$10($p1.commandNamespace,$p1.commandName);},$D:function($p0){var $0=this.get_$6();var $1=ss.Delegate.create(this,function(){
this.$A($0,false);});var $2=ss.Delegate.create(this,function(){
this.$A($0+1,true);});this.$11($1,$2);++tab.BaseSession.$3;},getTopic:function(topicId){return this.getTopicCore(topicId,null);},$E:function($p0){return this.urlRoot+'/'+$p0;},$F:function($p0){return tabBootstrap.BaseUrlFormatter.formatSessionMethod($p0,tsConfig.sessionid,this.urlRoot);},$10:function($p0,$p1){return this.get_$7()+'/commands/'+$p0+'/'+$p1;},$11:function($p0,$p1){if(!tsConfig.embedded||tsConfig.browserBackButtonUndo){if(ss.isValue(tab.BaseSession.$1)){tab.BaseSession.$1.back=$p0;}else{tab.DojoCurrentState.setInitialState($p0);}tab.BaseSession.$1=new tab.DojoCurrentState();tab.BaseSession.$1.back=null;tab.BaseSession.$1.forward=$p1;tab.DojoCurrentState.addToHistory(tab.BaseSession.$1);}},$12:function($p0,$p1,$p2){if(tabBootstrap.ViewerBootstrap.get_instance().get_sessionBeingCleared()){return;}var $0=$p1.responseText.match(new RegExp('Fatal exception in vizql engine'));if($p1.status===410||$p1.status===404||$p1.status===403){this.handleSessionExpiration(false);}else if($p1.status===401){this.handleAuthenticationFailure();}else if($p1.status===502||$p1.status===503){this.handleSessionKilled(null);}else if($p1.status===500&&$0!=null&&$0.length>0){this.handleUnknownErrorStatus($p1.responseText);}else if($p1.status===413){this.handleSessionLimitExceeded();}else if(!$p1.status){var $1;if(!!$p1.responseText.length){var $2=new ss.StringBuilder();$2.append('XHR Response Status: 0\nReadyState:');$2.append($p1.readyState);$2.append('\nHeaders:\n');$2.append($p1.getAllResponseHeaders());$2.append('\nResponse:\n');$2.append($p1.responseText);$1=function(){
tab.BaseSession.showAlertDialog($2.toString(),tab.Strings.RequestAbortedByBrowser,true);};}else{$1=ss.Delegate.create(this,function(){
this.$18($p0,$p1);});}window.setTimeout($1,5000);}else if(ss.isNullOrUndefined($p2)||!$p2){this.$18($p0,$p1);}},$13:function($p0,$p1){return tab.XhrUtil.helper($p0,$p1);},$14:function($p0,$p1,$p2){return new tab.SessionAjaxCallManager(this,$p0,$p1,$p2,false,false);},$15:function($p0,$p1,$p2,$p3){var $0=($p3!=='none');var $1=($p3==='immediately');return new tab.SessionAjaxCallManager(this,$p0,$p1,$p2,$0,$1);},formatLayoutMethod:function(layoutid,method){var $0=(ss.isValue(method))?this.$F(method):this.get_$7();$0+='/layouts/'+layoutid;return $0;},formatViewMethod:function(viewid,method){var $0=(ss.isValue(method))?this.$F(method):this.get_$7();$0+='/views/'+viewid;return $0;},formatSaveSharedViewMethod:function(){return this.$F('save_shared_view');},formatFilterReference:function(sheetid,field,method){return this.$16(sheetid,field,method,'filters');},$16:function($p0,$p1,$p2,$p3){$p0=encodeURIComponent(this.railsEncode($p0));var $0;if(ss.isValue($p2)){$0=this.$F($p2);}else{$0=this.get_$7();}$0+='/sheets/'+$p0+'/'+$p3;if(ss.isValue($p1)){$0+='/'+encodeURIComponent(this.railsEncode($p1));}return $0;},getTopicCore:function(evt,subid){var $0=evt;var $1=new tab.EventMap();var $2=$1.get_item(evt);if($2<0||$2>=$1.get_$1()){throw Error.createError('Illegal event id '+$0,null);}if($2<=$1.get_item('stateChanged')){subid=null;}return (ss.isNullOrUndefined(subid))?$0:$0+subid;},$17:function($p0,$p1,$p2){var $0=null;try{$0=window.parent.location;}catch($3){}$p0=($p0||'').trim();var $1=tab.Strings.UnhandledExceptionMessage($p0);if(!String.isNullOrEmpty($p0)){$1+='<br/><br/>';}var $2=ss.Delegate.create(this,function(){
$1+=$p2;var $1_0=ss.Delegate.create(this,function(){
this.$B();document.body.style.cursor='wait';this.$8(false);});tableau.util.showConfirmationDialog($1, $p1, true, $1_0);});if(tsConfig.single_frame){$2();}else if(ss.isNullOrUndefined($0)){tab.BaseSession.showAlertDialog($1,$p1,true);}else{$2();}},$18:function($p0,$p1){var $0=Type.safeCast($p0,String);var $1=Type.safeCast($p0,Error);var $2='';if(ss.isValue($0)){$2=$0.replaceAll('XMLHttpTransport.watchInFlight Error: ','');}else if(ss.isValue($1)){$2=$1.message.replaceAll('XMLHttpTransport.watchInFlight Error: ','');}$2=$2.replaceAll('XMLHttpTransport Error: ','');var $3=tab.Strings.ServerErrorUnexpected;if($p1.status<400){$3=tab.Strings.BrowserErrorProcessing;$2=tab.Strings.BrowserErrorProcessingMessage+'<br>'+$2;}else if($p1.status===400){$3=tab.Strings.ServerErrorRejected;$2=tab.Strings.ServerErrorRejectedMessage+'<br>';}else{var $4;try{$4=eval('('+$p1.responseText+')');$4=$4.replace(new RegExp('\n(?=s*[A-Z])','g'),'<li>').replace(new RegExp('\n','g'),'<br>');$4='<ul><li>'+$4+'</ul>';}catch($5){$4=$p1.responseText;}if(String.isNullOrEmpty($4)){$2=tab.Strings.ServerErrorGeneral($p1.status)+'<br>';}else{$2=$4;}}tab.BaseSession.showAlertDialog($2,$3,true);}}
tab.CustomizedViewSession=function(baseSession){this.$6=baseSession;}
tab.CustomizedViewSession.buildUrl=function(cv,removeQueryParams){var $0=tab.VizUriModel.createForViewingSheet(tsConfig.repositoryUrl);if(ss.isValue(cv)){$0.updateForCustomizedView(cv);}else{$0.set_originalView(true);}$0.removeHash();if(removeQueryParams){$0.removeAllQueryParams();}return $0.get_absoluteUri();}
tab.CustomizedViewSession.$8=function($p0){var $0=function($p1_0,$p1_1,$p1_2){
if(!ss.isValue($p0)){return;}var $1_0=tab.CustomizedViewSession.$9($p1_0);$p0((ss.isValue($1_0))?$1_0:($p1_2.message||''));};return $0;}
tab.CustomizedViewSession.$9=function($p0){if(ss.isValue($p0.responseText)){try{var $0=tab.JsonUtil.parseJson($p0.responseText);if(('msg' in $0)){return $0.msg;}}catch($1){}}return null;}
tab.CustomizedViewSession.prototype={$6:null,navigateToCustomizedView:function(cv){var $0=tabBootstrap.Utility.get_locationWindow();tab.SessionServerCommands.destroySessionAndForward($0,tab.CustomizedViewSession.buildUrl(cv));},navigateToOriginalView:function(){var $0=tabBootstrap.Utility.get_locationWindow();tab.SessionServerCommands.destroySessionAndForward($0,tab.CustomizedViewSession.buildUrl(null));},getCustomizedViews:function(success,failure){var $0=function($p1_0,$p1_1,$p1_2){
if(!ss.isValue(success)){return;}var $1_0;var $1_1=null;if(('customizedViews' in $p1_0)){$1_0=$p1_0.customizedViews;}else{$1_0=new Array(0);}if(('defaultCustomizedViewId' in $p1_0)){$1_1=$p1_0.defaultCustomizedViewId;}success($1_0,$1_1);};this.$B($0,tab.CustomizedViewSession.$8(failure),'get_customized_views',{sheet_id:tsConfig.current_sheet_name},'GET','none');},setDefaultCustomizedView:function(cv,success,failure){var $0=function($p1_0,$p1_1,$p1_2){
if(!ss.isValue(success)){return;}var $1_0=null;if(('defaultCv' in $p1_0)){$1_0=$p1_0.defaultCv;}success($1_0);};var $1={sheet_id:tsConfig.current_sheet_name};if(ss.isValue(cv)){$1['cvId']=cv.id;}this.$B($0,tab.CustomizedViewSession.$8(failure),'set_default_customized_view',$1);},destroyCustomizedView:function(cv,success,failure){tab.Param.verifyValue(cv,'cv');var $0=function($p1_0,$p1_1,$p1_2){
if(!ss.isValue(success)){return;}success();};this.$A($0,tab.CustomizedViewSession.$8(failure),'destroy_customized_view',{cvId:cv.id});},saveCustomizedView:function(cv,success,failure){tab.Param.verifyValue(cv,'cv');var $0=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
if(!ss.isValue(success)){return;}var $1_0=null;if(('cv' in $p1_0)){$1_0=$p1_0.cv;this.$7($1_0);}success($1_0);});var $1={sheet_id:tsConfig.current_sheet_name,name:cv.name,shared:cv.isPublic};if(ss.isValue(cv.id)){$1['cvId']=cv.id;}this.$B($0,tab.CustomizedViewSession.$8(failure),'save_customized_view',$1);},$7:function($p0){var $0=new tab.RepoPathObject(tsConfig.repositoryUrl);tsConfig.repositoryUrl=String.format('{0}/{1}/{2}/{3}',$0.get_workbookId(),$0.get_sheetId(),tab.VizUriModel.encodeUserName($p0.owner.username),$p0.urlId);tsConfig.current_custom_view_id=$p0.id;},updateCustomizedView:function(cv,success,failure){tab.Param.verifyValue(cv,'cv');var $0=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
if(!ss.isValue(success)){return;}var $1_0=null;if(('cv' in $p1_0)){$1_0=$p1_0.cv;this.$7($1_0);}success($1_0);});var $1={sheet_id:tsConfig.current_sheet_name,name:cv.name,shared:cv.isPublic,cvId:cv.id};this.$B($0,tab.CustomizedViewSession.$8(failure),'update_customized_view',$1);},$A:function($p0,$p1,$p2,$p3){var $0=this.$6.$15(null,$p0,$p1,'immediately');var $1={};$1.type='POST';$1.url=this.$6.$E($p2);$1.headers={Accept:'text/javascript'};$1.dataType='json';if(ss.isValue($p3)){$1.data=$p3;}this.$6.$13($1,$0);},$B:function($p0,$p1,$p2,$p3,$p4,$p5){var $0={};$0.type=($p4||'POST');$0.url=this.$6.$F($p2);$0.headers={Accept:'text/javascript'};$0.dataType='json';if(ss.isValue($p3)){$0.data=$p3;}var $1=($p5||'immediately');var $2=this.$6.$15(null,$p0,$p1,$1);this.$6.$13($0,$2);}}
tab.DojoCurrentState=function(){}
tab.DojoCurrentState.setInitialState=function(undo){var $0=function(){
};var $1={back:undo,forward:$0};dojo.back.setInitialState($1);}
tab.DojoCurrentState.addToHistory=function(state){dojo.back.addToHistory(state);}
tab.DojoCurrentState.prototype={back:null,forward:null}
tab.FailureHandler=function(){}
tab.FailureHandler.reportFailures=function(){if(tab.ErrorTrace.hasTraces()){var $0=tab.ErrorTrace.dequeueTraces();var $1={};var $2=$0[0].url;var $3=$0[0].userAgent;var $4=0;var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $5=$enum1.current;$1['Error #'+$4.toString()]=tab.FailureHandler.postContentForStackTrace($5);$4++;}tab.CommandController.get().get_legacySession().$9($2,$3,$1);}}
tab.FailureHandler.postContentForStackTrace=function(stack){var $0=new ss.StringBuilder();$0.appendLine('name: '+stack.name);$0.appendLine('message: '+stack.message);$0.appendLine('error-mode: '+stack.traceMode);if(ss.isValue(stack.locations)){$0.appendLine('stack:');var $enum1=ss.IEnumerator.getEnumerator(stack.locations);while($enum1.moveNext()){var $1=$enum1.current;if(ss.isNullOrUndefined($1.url)&&ss.isNullOrUndefined($1.lineNo)&&ss.isNullOrUndefined($1.functionName)){continue;}$0.appendLine($1.url+':'+$1.lineNo+' '+$1.functionName);if(ss.isValue($1.context)&&$1.context.length>0){var $enum2=ss.IEnumerator.getEnumerator($1.context);while($enum2.moveNext()){var $2=$enum2.current;var $3=$2;if($2.length>120){if(ss.isValue($1.functionName)&&$2.indexOf($1.functionName)>0){var $4=$2.indexOf($1.functionName);var $5=Math.max(0,$4-(120/2));var $6=Math.min($5+120,$2.length-1);$3=$2.substring($5,$6);}else{$3=$2.substr(0,120);}}$0.append('    '+$3);}}}}return $0.toString();}
tab.FailureHandler.dispose=function(){tab.FailureHandler.reportFailures();window.clearInterval(tab.FailureHandler.$2);tab.FailureHandler.$2=-1;}
tab.LayoutSession=function(urlRoot,layoutid){tab.LayoutSession.initializeBase(this,[urlRoot]);this.layoutid=layoutid;}
tab.LayoutSession.$19=function($p0){var $0=null;if(ss.isValue($p0)&&ss.isValue($p0.at1)&&ss.isValue($p0.at1.at2)){var $1=$p0.at1.at2;$0=tab.$create_Size($1.arr.wb,$1.arr.wc);}return $0;}
tab.LayoutSession.getViewingUriFromWorkbook=function(w){var $0=_.find(w.views,function($p1_0){
return $p1_0.name===tsConfig.current_sheet_name;})||_.first(w.views);if($0==null){return tab.WindowHelper.getLocation(window.self).pathname;}return tab.LayoutSession.getViewingUri(w.repositoryUrl,$0.sheetId);}
tab.LayoutSession.getViewingUri=function(workbookId,viewId){var $0=new ss.StringBuilder();if(!String.isNullOrEmpty(tsConfig.site_root)){$0.append(tsConfig.site_root);}$0.append('/views');$0.append('/').append(workbookId).append('/').append(viewId);return $0.toString();}
tab.LayoutSession.prototype={layoutid:null,get_layoutId:function(){return this.layoutid;},set_layoutId:function(value){this.layoutid=value;return value;},formatDashboardTempfileReference:function(tempfileid,keepfile,attachment){return this.formatLayoutMethod(this.layoutid,'tempfile')+'/?key='+tempfileid+((keepfile)?'&keepfile=yes':'')+((attachment)?'&attachment=yes':'');},saveSharedView:function(button,primaryContentUrl,doShareAction){var $0=function($p1_0,$p1_1,$p1_2){
$p1_0.button=button;if(ss.isValue($p1_0.guid)){tab.XhrUtil.guid=$p1_0.guid;}dojo.publish('newGuid',[$p1_0]);};var $1=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
tab.XhrUtil.guid=null;if($p1_0.status===410||$p1_0.status===403){this.handleSessionExpiration(false);}else if($p1_0.status===401){this.handleAuthenticationFailure();}else{var $1_0={};$1_0.button=button;doShareAction($1_0);}});var $2=this.$15(null,$0,$1,'none');var $3={};$3['sheet_id']=tab.XhrUtil.get_currentTabName();$3['parent_id']=tab.XhrUtil.parentID;$3['primary_content_url']=primaryContentUrl;$3['share_button']=button;var $4=this.basicPostOpts(this.$F('save_shared_view'),$3);$4.async=false;$4.timeout=2000;this.$13($4,$2);},getBootstrapRequestLayoutModelSuccessFunction:function(sheetName){var $0=function($p1_0){
var $1_0=tab.LayoutSession.$19($p1_0);dojo.publish('refreshLayoutModel',[$1_0]);if(!ss.isNullOrUndefined(sheetName)){dojo.publish('onBootstrapSuccess',[sheetName]);}};return $0;},formatExportURL:function(mimetype,options,scrollData){var $0=this.formatLayoutMethod(this.layoutid,'export')+'?format='+mimetype;if(ss.isValue(options)){$0+='&'+$.param(options);}if(ss.isValue(scrollData)){$0+='&'+$.param(scrollData);}return $0;},saveAndOpenMetricsView:function(){window.open(this.$F('save_metrics_view'),'metrics','scrollbars,resizable');},metricsViewDownloadUrl:function(){return this.$F('download_metrics_view');},getAutocompleteInfo:function(currentStr,updateFunc,field){var $0=function($p1_0,$p1_1,$p1_2){
updateFunc($p1_0.new_value);};var $1=this.basicGetOpts(this.formatLayoutMethod(this.layoutid,'getautocomplete'));var $2={fieldname:field,input_string:currentStr};$1.data=$2;$1.success=$0;this.$13($1);},performPostLoadOperations:function(sheetId,responseCallback){var $0=function($p1_0,$p1_1,$p1_2){
if(ss.isValue(responseCallback)){responseCallback($p1_0);}};var $1=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
if($p1_0.status===410||$p1_0.status===404||$p1_0.status===403){throw new Error($p1_0.status+' response on postLoadOperations');}else{this.$12($p1_2,$p1_0,true);}});var $2=this.$15(null,$0,$1,'none');var $3={sheet_id:sheetId};var $4={};$4.data=$3;$4.async=true;$4.type='GET';$4.headers={Accept:'text/javascript'};$4.dataType='json';$4.url=this.formatLayoutMethod(this.layoutid,'performPostLoadOperations');this.$13($4,$2);},launchEditing:function(authoringSheetName){var $0;if(tab.MiscUtil.isNullOrEmpty(authoringSheetName)){$0=tab.VizUriModel.createForAuthoringPublishedSheet(tsConfig.repositoryUrl);}else{$0=tab.VizUriModel.createForAuthoringUnpublishedSheet(tsConfig.repositoryUrl,authoringSheetName);}$0.removeAllQueryParams();$0.removeHash();if(!tsConfig.openAuthoringInTopWindow&&(tabBootstrap.Utility.get_embedMode()==='embeddedNotInWg'||tsConfig.is_mobile_app)){tab.WindowHelper.open($0.get_uri(),'tableauAuthoring');}else{$0.setTopWindowLocation();}},getTopic:function(topicId){return this.getTopicCore(topicId,'Layout_'+tsConfig.sheetId);}}
tab.SessionAjaxCallManager=function(session,onComplete,onSuccess,onError,usesWaitHandler,immediateWait){this.$0=session;this.$1=onComplete;this.$2=onSuccess;this.$3=onError;if(ss.isNullOrUndefined(usesWaitHandler)||usesWaitHandler){this.$4=this.$0.incrementWait(immediateWait);}}
tab.SessionAjaxCallManager.prototype={$0:null,$1:null,$2:null,$3:null,$4:false,get_completedDelegate:function(){return ss.Delegate.create(this,this.onComplete);},get_successDelegate:function(){return ss.Delegate.create(this,this.onSuccess);},get_errorDelegate:function(){return ss.Delegate.create(this,this.onError);},onComplete:function(xhr,textStatus){try{if(ss.isValue(this.$1)){this.$1(xhr,textStatus);}}finally{this.$5();}},onSuccess:function(data,textStatus,xhr){try{var $0=false;$0 = data instanceof Error;if($0){this.$0.$12(data,xhr);}else if(xhr.status===202){var $1=xhr.args;var $2=new tab.SessionAjaxHandler(this.$0,$1);$2.requestStatus();$0=true;}if(!$0){if(ss.isValue(this.$2)){this.$2(data,textStatus,xhr);}}}finally{this.$5();}},onError:function(xhr,textStatus,errorThrown){try{if(ss.isValue(this.$3)){this.$3(xhr,textStatus,errorThrown);}else{this.$0.$12(errorThrown,xhr);}}finally{this.$5();}},$5:function(){if(this.$4){this.$4=false;this.$0.decrementWait();}}}
tab.SessionAjaxHandler=function(session,args){this.$4='';this.$5=session;this.$1=args;this.$4=session.$F('status');}
tab.SessionAjaxHandler.prototype={$0:false,$1:null,$2:0,$3:1000,$5:null,requestStatus:function(){var $0=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$6($p1_1,$p1_2);});var $1=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$7($p1_0,$p1_1);});var $2=new tab.SessionAjaxCallManager(this.$5,null,$0,$1,false,false);var $3={};$3.type='GET';$3.url=this.$4;$3.cache=false;tab.XhrUtil.helper($3,$2);},$6:function($p0,$p1){if($p1.status===204){this.$0=true;}this.$8($p0,$p1);},$7:function($p0,$p1){if(ss.isNullOrUndefined(this.$1.complete)){this.$1.complete($p0,$p1);}},$8:function($p0,$p1){++this.$2;if(!(this.$2%10)&&this.$3<4000){this.$3*=2;}if(!this.$0){window.setTimeout(ss.Delegate.create(this,function(){
this.requestStatus();}),this.$3);}else{var $0=this.$1.skipResendOriginal;if(ss.isValue($0)&&$0){if(ss.isValue(this.$1.complete)){this.$1.complete($p1,$p0);}}else{window.setTimeout(ss.Delegate.create(this,function(){
this.$9();}),0);}}},$9:function(){if(!this.$1.async){delete this.$1.async;}tab.XhrUtil.helper(this.$1);}}
tab.SheetSession=function(urlRoot,sheetid){tab.SheetSession.initializeBase(this,[urlRoot]);this.sheetid=sheetid;}
tab.SheetSession.prototype={sheetid:null,add_sheetDataChanged:function(value){this.$19=ss.Delegate.combine(this.$19,value);},remove_sheetDataChanged:function(value){this.$19=ss.Delegate.remove(this.$19,value);},$19:null,get_visualId:function(){return tab.ModelUtils.getVisualId(this.sheetid);},requestHSMChildren:function(field,member,onComplete,onError){if(!tsConfig.allow_filter){return;}var $0=function($p1_0,$p1_1,$p1_2){
onComplete($p1_0);};var $1=this.$15(null,$0,null,'none');var $2={};$2.name='file';$2.filename='file';$2.contentType='text/javascript';$2.content=tab.JsonUtil.toJson(member,true,'');var $3={_method:'PUT'};var $4=tab.XhrUtil.getMultipartData($2,$3);var $5={};$5.type='POST';$5.url=this.formatFilterReference(this.sheetid,field,'show_children');$5.dataType='json';$5.contentType='multipart/form-data; boundary='+$4.header;$5.data=$4.body;this.$13($5,$1);},getFilterItems:function(field,domain,itemRange,onComplete,onError){if(!tsConfig.allow_filter){return;}var $0=function($p1_0,$p1_1,$p1_2){
onComplete($p1_0);};var $1=this.$15(null,$0,null,'none');var $2={};$2['fromIndex']=itemRange.get_from();$2['toIndex']=itemRange.get_to();$2['domain']=domain;var $3=this.basicGetOpts(this.formatFilterReference(this.sheetid,field,'getfilteritems'));$3.data=$2;this.$13($3,$1);},setPatternFilterState:function(pattern,filterDef){var $0=filterDef.field;tab.FilterClientCommands.setPatternFilterState(this.get_visualId(),$0,pattern.toString());},addManualFilterItems:function(data,filterDef){var $0=filterDef.field;tab.FilterClientCommands.addManualFilterItems(this.get_visualId(),$0,data);},searchFilter:function(field,query,maxRows,shouldGetIndex,domain,successHandler,errorHandler){if(!tsConfig.allow_filter){return null;}var $0=function($p1_0,$p1_1,$p1_2){
var $1_0=$p1_0;successHandler($1_0);};var $1=function($p1_0,$p1_1,$p1_2){
errorHandler($p1_2);};var $2=this.$15(null,$0,$1,'none');var $3=(shouldGetIndex)?'searchwithindex':'search';var $4=this.basicGetOpts(this.formatFilterReference(this.sheetid,field,$3));var $5={query:query,maxRows:maxRows,domain:domain};$4.data=$5;return this.$13($4,$2);},restoreSheetAxes:function(){this.requestRestoreFixedAxes(this.get_visualId());},getTopic:function(topicId){return this.getTopicCore(topicId,'Sheet_'+this.sheetid);},fireSheetDataChanged:function(){if(ss.isValue(this.$19)){this.$19();}}}
tab.ViewSession=function(urlRoot,sheetId,viewid){tab.ViewSession.initializeBase(this,[urlRoot,sheetId]);this.viewid=viewid;this.$1A=tab.PermissionManager.buildCommandPermission();}
tab.ViewSession.$1E=function($p0){var $0=$p0;if(ss.isValue($p0)){$0=tab.$create_Point(Math.round($p0.x),Math.round($p0.y));}return $0;}
tab.ViewSession.prototype={$1A:null,viewid:null,get_viewId:function(){return this.viewid;},set_viewId:function(value){if(this.viewid===value){return;}this.viewid=value;return value;},fireSelectionChanged:function(data){this.fireEvent('selectionChanged',data);},$1B:function($p0){return this.formatViewMethod(this.viewid,'region')+'?r='+$p0;},formatRegionTileURL:function(cacheInfo,r,requestId){if(cacheInfo.useUrl){return this.formatTileURL(cacheInfo,r,0,0,'',requestId);}return this.$1B(r)+'&'+requestId;},$1C:function($p0,$p1){var $0='';if(!tab.MiscUtil.isNullOrEmpty($p1)){$0='&fn='+encodeURIComponent($p1);}return this.formatViewMethod(this.viewid,'region')+'?r='+$p0+$0;},formatLegendRegionTileURL:function(cacheInfo,r,fn,fnid,requestId){fnid=(ss.isNullOrUndefined(fnid))?'':fnid;if(cacheInfo.useUrl){return this.formatTileURL(cacheInfo,r+fnid,0,0,fn,requestId);}return this.$1C(r,fn)+'&'+requestId;},formatTileURL:function(cacheInfo,r,tileX,tileY,fn,requestId){if(cacheInfo.useUrl){var $1=cacheInfo.url;var $2='';if(!tab.MiscUtil.isNullOrEmpty(fn)){$2='?fn='+encodeURIComponent(fn)+'&'+requestId;}else{$2='?='+requestId;}return $1.replaceAll('%SESSIONID%',tsConfig.sessionid).replaceAll('[r]',r).replaceAll('[x]',tileX.toString()).replaceAll('[y]',tileY.toString())+$2;}var $0=this.formatViewMethod(this.viewid,'tile');return $0+'?r='+r+'&x='+tileX+'&y='+tileY+'&'+requestId;},formatUnderlyingDataURL:function(selectAtPoint){var $0=new ss.StringBuilder(this.formatViewMethod(this.viewid,'viewData'));$0.append('?maxrows=200');if(ss.isValue(selectAtPoint)){$0.append('&select_x=').append(selectAtPoint.x);$0.append('&select_y=').append(selectAtPoint.y);}return $0.toString();},formatExportCrossTabURL:function(charset){if(ss.isNullOrUndefined(charset)){charset='utf8';}return this.formatViewMethod(this.viewid,'exportcrosstab')+'?charset='+charset;},fireRefreshLegacyLegendImages:function(data){this.fireEvent('refreshLegacyLegendImages',data);},zoomDoubleClick:function(regionPart,rect,paneResolverPoint,isZoomin,deferAPI){deferAPI.isZoomin=isZoomin;this.zoom(regionPart,rect,paneResolverPoint,isZoomin,deferAPI);},zoomIn:function(regionPart,rect,paneResolverPoint){this.zoom(regionPart,rect,paneResolverPoint,true,null);},zoomOut:function(regionPart,point,paneResolverPoint){this.zoom(regionPart,point,paneResolverPoint,false,null);},zoom:function(regionPart,rect,paneResolverPoint,isZoomin,deferAPI){if(!tsConfig.allow_filter){return;}var $0={};var $1={};var $2=tab.VizRegionRectWrapper.create($1);$2.set_r(regionPart);$2.set_x(rect.x);$2.set_y(rect.y);if(ss.isValue($2.get_x())){$2.set_x(Math.round($2.get_x()));}if(ss.isValue($2.get_y())){$2.set_y(Math.round($2.get_y()));}if(ss.isValue(rect.w)&&ss.isValue(rect.h)){$2.set_w(rect.w);$2.set_h(rect.h);}$0['am8']=$1;$0['w']=isZoomin;$0['u']=false;if(ss.isValue(paneResolverPoint)){paneResolverPoint=tab.ViewSession.$1E(paneResolverPoint);var $5=tab.PointUtil.toPresModel(paneResolverPoint);$0['ard']=$5;}var $3={};$3.commandNamespace='tabsrv';$3.commandName='pane-zoom-server';$3.commandParams=$0;tab.CommandUtils.addVisualIdToCommand($3.commandParams,this.get_visualId());var $4=ss.Delegate.create(this,function($p1_0){
if(ss.isValue(deferAPI)){deferAPI.setDeferLayoutUpdates(false);}this.fireSheetDataChanged();});tab.CommandController.SendCommand(new tab.vqldomain$A($3,'afterDelay',$4,function(){
}));},pan:function(regionPart,point,delta,onError){if(!tsConfig.allow_filter){return;}var $0={};$0['ajp']=regionPart;$0['arb']=tab.PointUtil.toPresModel(tab.ViewSession.$1E(point));$0['arc']=tab.PointUtil.toPresModel(tab.ViewSession.$1E(delta));var $1={};$1.commandNamespace='tabsrv';$1.commandName='pane-pan-server';$1.commandParams=$0;tab.CommandUtils.addVisualIdToCommand($1.commandParams,this.get_visualId());var $2=ss.Delegate.create(this,function($p1_0){
this.fireSheetDataChanged();});var $3=function($p1_0){
onError();};tab.ServerCommands.executeServerCommand($1,'afterDelay',$2,$3);},toggleHighlight:function(regionPart,encodedFieldName){var $0=ss.Delegate.create(this,function($p1_0){
this.$1D(null,$p1_0);});var $1=encodedFieldName.split('\n');var $2=tab.ModelUtils.getZoneIdForSheetName(this.sheetid);if($2!==-1){tab.SelectionClientCommands.toggleLegendHighlight($2,this.get_visualId(),regionPart,$1,$0);}},executeAction:function(action,successCallback,onFailure){if(action.commandType===9){this.executeCommand(action);}else{var $0={};$0.commandNamespace='tabdoc';$0.commandName='run-action';$0.commandParams=action.command.commandParams;tab.ServerCommands.executeServerCommand($0,'immediately',successCallback,onFailure);}},executeCommand:function(command){if(command==null){return;}switch(command.commandType){case 9:var $0={};$0.s9=(command.command.commandParams).s9;$0.mm=(command.command.commandParams).mm;tab.ActionUtils.launchActionUrls([$0]);break;case 7:var $1=null;if(ss.isValue(command.command)&&ss.isValue(command.command.commandParams)&&Object.keyExists(command.command.commandParams,'aqt')){$1=tab.JsonUtil.parseJson(command.command.commandParams['aqt']);}window.open(this.formatUnderlyingDataURL($1),this.getWindow('vud'),'scrollbars,resizable');break;case 1:case 2:case 4:case 6:case 11:case 12:case 10:case 13:break;default:break;}},levelDrill:function(position,direction,axis){if(!tsConfig.allow_filter){return;}var $0=(axis.toString()==='yheader')?'rows-shelf':'columns-shelf';var $1=(direction==='down');tab.FilterClientCommands.levelDrill(this.get_visualId(),position,$0,$1);},createUbertipModel:function(ubertip){var $0=tab.UbertipSerializer.deserializeUbertip(ubertip);if(ss.isValue($0)){tab.PermissionManager.filterCommands($0.commands,this.$1A);}return $0;},getTopic:function(topicId){var $0=new tab.EventMap();var $1=$0.get_item(topicId);var $2=$0.get_item('viewChanged');if($1>=$2){return this.getTopicCore(topicId,'View_'+this.sheetid);}return tab.ViewSession.callBaseMethod(this, 'getTopic',[topicId]);},$1D:function($p0,$p1){var $0=false;var $1=dojo.subscribe(this.getTopic('onTabSelect'),function($p1_0){
$0=true;});$p1.primarySheet=this.sheetid;if(ss.isValue($p1)&&ss.isValue($p0)){var $2;if(!$0&&(ss.isNullOrUndefined(tsConfig.allow_tooltip)||tsConfig.allow_tooltip)){var $3=$p1.ubertip;$2=this.createUbertipModel($3);}else{$2=null;}$p0($2);}dojo.unsubscribe($1);}}
tab.WaitHandler=function(){this.$0=$('#loadingGlassPane');this.$0.bind('mousedown',false);this.$1=$('#loadingSpinner');this.$5=0;this.$6=true;this.$2=dojo.animateProperty;this.$3=dojo.fx.easing;this.$4=dojo.fadeOut;this.$9=null;this.$A=null;this.$D=true;this.$E=false;}
tab.WaitHandler.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:0,$6:false,$7:null,$8:null,$9:null,$A:null,$B:null,$C:null,$D:false,$E:false,isBusy:function(){return this.$5>0;},addref:function(immediateWait){if(!this.$6){return;}this.$5+=1;if(this.$5===1&&!this.$D&&!this.$E){this.$11(immediateWait);}},addrefAndTurnOnImmediately:function(){if(!this.$6){return;}this.$5+=1;this.$11(true,true);},showAndLock:function(){this.$11(true,true);this.lock();},lock:function(){this.$E=true;},unlock:function(){this.$E=false;},release:function(){if(!this.$6){return;}this.$5-=1;if(this.$5<0){this.$5=0;}this.nudge();},nudge:function(){if(this.$5>0||this.$E){return;}this.$10();},invalidate:function(){this.$6=false;this.$11();},reset:function(){this.$F();var $0=300;var $1='linear';this.$1.hide().css('opacity','0');if(!this.$0.length){return;}var $2=ss.Delegate.create(this,function(){
this.$0.css('cursor','default').hide();this.$B=null;var $1_0=$('.facadedom');if($1_0.length>0){$1_0.remove();}});var $3={node:this.$0[0],duration:$0,easing:this.$3[$1],onEnd:$2};this.$B=this.$4($3);this.$B.play();},onNextHide:function(f){this.$C=f;},$F:function(){if(ss.isValue(this.$7)){window.clearTimeout(this.$7);}delete this.glassShowTimer;if(ss.isValue(this.$8)){window.clearTimeout(this.$8);}delete this.spinnerShowTimer;if(ss.isValue(this.$B)){this.$B.stop();this.$B=null;}if(ss.isValue(this.$9)){this.$9.stop();this.$9=null;}if(ss.isValue(this.$A)){this.$A.stop();this.$A=null;}},$10:function(){if(ss.isValue(this.$C)){this.$C();this.$C=null;}else{this.reset();}this.$D=false;},$11:function($p0,$p1){var $0=400;var $1=500;var $2=1900;var $3=100;var $4='quadOut';var $5='linear';var $6=0.24;if($p0){$0=0;$2-=400;}this.$F();if($p1){this.$12($1,$4,$6);this.$13($3,$5);}else{this.$7=window.setTimeout(ss.Delegate.create(this,function(){
this.$12($1,$4,$6);}),$0);this.$8=window.setTimeout(ss.Delegate.create(this,function(){
this.$13($3,$5);}),$2);}this.$D=true;},$12:function($p0,$p1,$p2){if(ss.isValue(this.$B)){this.$B.stop();this.$B=null;}var $0=ss.Delegate.create(this,function(){
this.$0.show().css('cursor','wait');});var $1=ss.Delegate.create(this,function(){
this.$7=null;this.$9=null;});var $2={node:this.$0[0],onBegin:$0,onEnd:$1,onStop:$1,properties:{opacity:{start:0,end:$p2}},duration:$p0,easing:this.$3[$p1]};this.$9=this.$2($2);this.$9.play();},$13:function($p0,$p1){var $0=ss.Delegate.create(this,function(){
this.$1.show();});var $1=ss.Delegate.create(this,function(){
this.$8=null;this.$A=null;});var $2={node:this.$1[0],onBegin:$0,onEnd:$1,onStop:$1,properties:{opacity:{start:0,end:1}},duration:$p0,easing:this.$3[$p1]};this.$A=this.$2($2);this.$A.play();}}
tab.BrushingComputer=function(){this.$2={};this.$3={};this.$4={};}
tab.BrushingComputer.get_$6=function(){return tab.Logger.lazyGetLogger(tab.BrushingComputer);}
tab.BrushingComputer.computeFromLegend=function(legendVisualModel,selectedItemsIds,legendModel){var $0=new tab.BrushingComputer();if(!legendModel.get_isHighlightEnabled()){return $0;}var $1=legendVisualModel.get_vizDataModel();var $2=tab.vqldomain$5.$1(legendModel,selectedItemsIds,$1,legendModel.get_fieldCaptions());var $enum1=ss.IEnumerator.getEnumerator(legendModel.get_fieldCaptions());while($enum1.moveNext()){var $4=$enum1.current;if(legendVisualModel.vizDataContainsDuplicateCaption($4)){$0.$5=false;return $0;}}var $3;if(legendModel.get_isOneWay()){$3=tab.ModelUtils.getVisualModels(tab.ApplicationModel.get_instance());}else{$3={};var $5=tab.ActionUtils.getApplicableActions(legendVisualModel.get_worksheetName(),'on-select','highlight');var $enum2=ss.IEnumerator.getEnumerator($5);while($enum2.moveNext()){var $6=$enum2.current;if(ss.isNullOrUndefined($6.vg)){continue;}var $enum3=ss.IEnumerator.getEnumerator($6.vg);while($enum3.moveNext()){var $7=$enum3.current;var $8=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$7);$3[$7]=$8;}}}var $dict4=$3;for(var $key5 in $dict4){var $9={key:$key5,value:$dict4[$key5]};var $A=$9.value;var $B=$A.get_vizDataModel();$0.$2[$9.key]=tab.vqldomain$5.$7($2,$B);var $C=[];var $dict6=tab.BrushingComputer.$7($A);for(var $key7 in $dict6){var $D={key:$key7,value:$dict6[$key7]};var $E=$D.value;var $F=tab.vqldomain$5.$3($A,$E);var $10=_.intersection($F,legendModel.get_fieldCaptions());if($10.length>0){var $11=tab.vqldomain$5.$1(legendModel,selectedItemsIds,$1,$10);$C.addRange(tab.vqldomain$5.$A($11,$A,$E));}}$0.$4[$9.key]=$C;var $enum8=ss.IEnumerator.getEnumerator(tab.ModelUtils.getVizCategoricalLegends($A));while($enum8.moveNext()){var $12=$enum8.current;if($12.get_isOneWay()||!$12.get_isHighlightEnabled()){continue;}var $13=tab.vqldomain$5.$9($2,$B,$12);if(!Object.keyExists($0.$3,$A.get_worksheetName())){$0.$3[$A.get_worksheetName()]={};}$0.$3[$A.get_worksheetName()][tab.BrushingComputer.$8($12.get_legendType(),$12.get_legendNames())]=$13;}}return $0;}
tab.BrushingComputer.getTuplesAssociatedWithSelectedNodes=function(visualModel,selectedNodes){if(ss.isNullOrUndefined(visualModel.get_vizDataModel())||ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_dataDictionary())){return new Array(0);}var $0=[];var $enum1=ss.IEnumerator.getEnumerator(selectedNodes);while($enum1.moveNext()){var $3=$enum1.current;if(visualModel.get_vizDataModel().isHeaderFullyNotQuantitative($3.zk)){$0.push($3);}}visualModel.get_selectionsModel().isOnlyQuantitativeNodeSelected=!$0.length&&!!selectedNodes.length;if(!$0.length){return new Array(0);}var $1=tab.vqldomain$5.$2(visualModel.get_vizDataModel(),$0);var $2=tab.BrushingComputer.$9($1,visualModel);return $2;}
tab.BrushingComputer.computeFromTuples=function(visualModel,tupleIDs,relatedActions){var $0=new tab.BrushingComputer();var $enum1=ss.IEnumerator.getEnumerator(relatedActions);while($enum1.moveNext()){var $1=$enum1.current;if(ss.isNullOrUndefined($1.vg)){continue;}var $2=tab.CommandSerializer.deserialize($1.aow.mt);var $enum2=ss.IEnumerator.getEnumerator($1.vg);while($enum2.moveNext()){var $3=$enum2.current;var $4=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$3);if(ss.isNullOrUndefined($4)){continue;}var $5=$4.get_vizDataModel();if(ss.isNullOrUndefined($5)){continue;}if(tab.BrushingComputer.isSpecialDateTimeHighlighting($2)){var $6=tab.ApplicationModel.get_instance().get_dataDictionary();var $7=tab.vqldomain$5.$5(visualModel.get_vizDataModel(),$5,$6,tupleIDs);var $8=$7.first;var $9=$7.second;$0.$2[$3]=tab.vqldomain$5.$6($8,$9,$5,$6);$0.$4[$3]=tab.vqldomain$5.$B($8,$9,$4,$6);$0.$A($4,visualModel,tupleIDs,$2);}else{var $A=tab.BrushingComputer.getHighlightFieldCaptions($2,visualModel.get_vizDataModel().get_highlightCaptions(),visualModel.get_vizDataModel().get_fieldCaptions());if(visualModel!==$4){$A=_.intersection($A,$5.get_fieldCaptions());}if(tab.MiscUtil.isNullOrEmpty($A)){continue;}var $enum3=ss.IEnumerator.getEnumerator($A);while($enum3.moveNext()){var $D=$enum3.current;if(visualModel.vizDataContainsDuplicateCaption($D)){$0.$5=false;return $0;}}var $B=tab.vqldomain$5.$4(visualModel.get_vizDataModel(),tupleIDs,$A);$0.$2[$3]=tab.vqldomain$5.$7($B,$5);var $C=[];var $dict4=tab.BrushingComputer.$7($4);for(var $key5 in $dict4){var $E={key:$key5,value:$dict4[$key5]};var $F=$E.value;var $10=tab.vqldomain$5.$3($4,$F);var $11=_.intersection($10,$A);if($11.length>0){var $12=tab.vqldomain$5.$4(visualModel.get_vizDataModel(),tupleIDs,$11);$C.addRange(tab.vqldomain$5.$A($12,$4,$F));}}$0.$4[$3]=$C;$0.$A($4,visualModel,tupleIDs,$2);}}}return $0;}
tab.BrushingComputer.$7=function($p0){var $0={};var $1=$p0.get_sceneModel().get_visualListModels();var $dict1=$1;for(var $key2 in $dict1){var $3={key:$key2,value:$dict1[$key2]};$0[$3.key]=$3.value.get_groupItemNodes();}var $2=($0['x-labels']||[]);$2.addRange(($0['bottom-axis']||new Array(0)));$0['x-labels']=$2;delete $0['bottom-axis'];return $0;}
tab.BrushingComputer.isSpecialDateTimeHighlighting=function(highlightCmd){var $0=highlightCmd.commandParams['ahi'];return ss.isValue($0)&&$0==='date-time';}
tab.BrushingComputer.getHighlightFieldCaptions=function(highlightCmd,vizHighlightCaptions,commonFieldCaptions){var $0;var $1=highlightCmd.commandParams['vl'];if(!ss.isNullOrUndefined($1)){$0=tab.JsonUtil.parseJson($1);}else{var $2=highlightCmd.commandParams['ahi'];if(ss.isNullOrUndefined($2)||$2!=='all'){}$0=vizHighlightCaptions;}if(ss.isValue(commonFieldCaptions)){$0=_.intersection(commonFieldCaptions,$0);}return $0;}
tab.BrushingComputer.$8=function($p0,$p1){return ('LegendType:'+$p0+' LegendNames:'+$p1.join(';'));}
tab.BrushingComputer.$9=function($p0,$p1){var $0=[];if(ss.isNullOrUndefined($p1.get_vizDataModel())){return $0;}var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.current;$0=_.union($0,tab.vqldomain$5.$7($1,$p1.get_vizDataModel()));}return $0;}
tab.BrushingComputer.prototype={$5:true,get_isBrushingComputed:function(){return this.$5;},hasBrushingForSheet:function(worksheet){return ss.isValue(this.$2[worksheet])||ss.isValue(this.$4[worksheet])||ss.isValue(this.$3[worksheet]);},getTupleBrushing:function(worksheet){return (this.$2[worksheet]||[]);},getNodeBrushing:function(worksheet){return (this.$4[worksheet]||[]);},getLegendBrushing:function(worksheet){return this.$3[worksheet]||{};},$A:function($p0,$p1,$p2,$p3){var $0=$p0.get_vizDataModel();var $enum1=ss.IEnumerator.getEnumerator(tab.ModelUtils.getVizCategoricalLegends($p0));while($enum1.moveNext()){var $1=$enum1.current;if(ss.isNullOrUndefined($0)){continue;}if($1.get_isOneWay()||!$1.get_isHighlightEnabled()){continue;}var $2=_.intersection($p1.get_vizDataModel().get_fieldCaptions(),$1.get_fieldCaptions());$2=tab.BrushingComputer.getHighlightFieldCaptions($p3,$p1.get_vizDataModel().get_highlightCaptions(),$2);var $3=tab.vqldomain$5.$4($p1.get_vizDataModel(),$p2,$2);var $4=tab.vqldomain$5.$9($3,$0,$1);if(!Object.keyExists(this.$3,$p0.get_worksheetName())){this.$3[$p0.get_worksheetName()]={};}this.$3[$p0.get_worksheetName()][tab.BrushingComputer.$8($1.get_legendType(),$1.get_legendNames())]=$4;}}}
tab.CategoricalFilterData=function(sheets,filterField,exclude,filterValues){this.$0=sheets;this.$1=filterField;this.$4=exclude;if(ss.isValue(filterValues)){this.$2=filterValues;}else{this.$2=[];}}
tab.CategoricalFilterData.prototype={$0:null,$1:null,$2:null,$3:false,$4:false,get_filterField:function(){return this.$1;},get_targetSheets:function(){return this.$0;},set_targetSheets:function(value){this.$0=value;return value;},get_includeAll:function(){return this.$3;},set_includeAll:function(value){this.$3=value;this.clearValues();return value;},get_isExclude:function(){return this.$4;},addValue:function(value){if(this.$2.contains(value)){return false;}this.$2.add(value);return true;},clearValues:function(){this.$2.clear();},getFilterValues:function(){return this.$2;},includesValue:function(value){if(this.get_includeAll()){return true;}return (this.$4!==this.$2.contains(value));},removeValue:function(value){if(this.$2.contains(value)){return false;}this.$2.remove(value);return true;}}
tab.Changelist=function(){this.$0=[];}
tab.Changelist.prototype={$0:null,addChange:function(change){this.$0.add(change);},compileForChecklist:function(domain){var $0={};for(var $4=0;$4<this.$0.length;++$4){var $5=this.$0[$4];switch($5.type){case 0:$0[$5.index]=$5.checkState;break;case 1:var $6=$5.range;var $7=$5.checkState;var $8=Math.min($6.get_from(),$6.get_to());var $9=Math.max($6.get_from(),$6.get_to());for(var $A=$8;$A<=$9;++$A){$0[$A]=$7;}break;}}var $1=[];var $2=[];var $dict1=$0;for(var $key2 in $dict1){var $B={key:$key2,value:$dict1[$key2]};var $C=parseInt($B.key,10);var $D=$B.value;if($D){$1.add($C);}else{$2.add($C);}}var $3=new tab.CompiledChecklistChangelist();$3.select=$1;$3.deselect=$2;$3.domain=domain;return $3;},compileForRadiolist:function(domain){var $0=this.$0.length-1;var $1=this.$0[$0];var $2=new tab.CompiledRadiolistChangelist();$2.index=$1.index;$2.domain=domain;return $2;},reset:function(){this.$0.clear();},appendChangelist:function(other){for(var $0=0;$0<other.$0.length;$0++){this.$0.add(other.$0[$0]);}}}
tab.RawChange=function(){}
tab.RawChange.prototype={range:null,index:0,type:0,checkState:false,setRange:function(range,checkState){this.type=1;this.range=range;this.checkState=checkState;},setSingle:function(index,checkState){this.type=0;this.index=index;this.checkState=checkState;}}
tab.CompiledChecklistChangelist=function(){this.select=new Array(0);this.deselect=new Array(0);}
tab.CompiledChecklistChangelist.prototype={select:null,deselect:null,domain:null}
tab.CompiledRadiolistChangelist=function(){}
tab.CompiledRadiolistChangelist.prototype={index:0,domain:null}
tab.CommandUtils=function(){}
tab.CommandUtils.newDocCommand=function(commandName,cmdParams){var $0={};$0.commandName=commandName;$0.commandNamespace='tabdoc';if(ss.isValue(cmdParams)){$0.commandParams=cmdParams;}return $0;}
tab.CommandUtils.newSrvCommand=function(commandName){var $0={};$0.commandName=commandName;$0.commandNamespace='tabsrv';return $0;}
tab.CommandUtils.addVisualIdToCommand=function(cmdParams,visualId){if(tab.MiscUtil.isNullOrEmpty(visualId.ll)){cmdParams['st']=visualId.st;if(ss.isValue(visualId.su)&&visualId.su.toString().length>0){cmdParams['su']=visualId.su;}}else{cmdParams['anb']=tab.JsonUtil.toJson(visualId);}}
tab.CommandUtils.addStoryPointToCommand=function(cmdParams,sheetPath){if(ss.isValue(sheetPath.ll)){cmdParams['ll']=sheetPath.ll;cmdParams['aa9']=sheetPath.aa9.toString();cmdParams['abq']=sheetPath.abq.toString();}}
tab.CommandUtils.duplicateCommand=function(command){var $0={};$.extend(true,$0,command);return $0;}
tab.CommandUtils.createCommandRedirectSuccessHandler=function(deferred){deferred=deferred||$.Deferred();var $0=$.DeferredData();$0.promise().pipe(function($p1_0){
if(_.isObject($p1_0)&&('ame' in $p1_0)){var $1_0=$p1_0.ame;var $1_1=tab.CommandRedirectRegistry.handleRedirect($1_0,$p1_0);$1_1.pipe(function(){
deferred.resolve($p1_0);return $p1_0;},function(){
deferred.reject();return $p1_0;});}else{deferred.resolve($p1_0);}return $p1_0;},function(){
deferred.reject();return null;});return tab.CommandController.$1A($0);}
tab.ActionUtils=function(){}
tab.ActionUtils.get_$3=function(){return tab.Logger.lazyGetLogger(tab.ActionUtils);}
tab.ActionUtils.isVizSourceOfAction=function(action,sheet){return _.any(action.vf,function($p1_0){
return $p1_0===sheet;});}
tab.ActionUtils.isTargetOfActionLocal=function(action){var $0=tab.ModelUtils.getVisualModels(tab.ApplicationModel.get_instance());var $enum1=ss.IEnumerator.getEnumerator(action.vg);while($enum1.moveNext()){var $1=$enum1.current;if(Object.keyExists($0,$1)){return true;}}return false;}
tab.ActionUtils.isFilterAction=function(action){return (ss.isValue(action.aow)&&(action.aow.mt).startsWith('tabdoc:filter-targets'));}
tab.ActionUtils.isHighlightAction=function(action){return (ss.isValue(action.aow)&&(action.aow.mt).startsWith('tabdoc:highlight'));}
tab.ActionUtils.isFilterSource=function(dashboardModel,sheet){var $0=dashboardModel.get_dashboardPresModel();var $1=$0.awk;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;if(!tab.ActionUtils.isVizSourceOfAction($2,sheet)){continue;}if($2.akk!=='on-select'){continue;}if(ss.isNullOrUndefined($2.aow)){continue;}var $3=($2.aow.mt).replaceAll('simpleCommand=','');var $4=tab.CommandSerializer.deserialize($3);if($4.commandName!=='filter-targets'){continue;}var $5=$2.vg;if(!$5.length){continue;}return true;}return false;}
tab.ActionUtils.getApplicableActions=function(sourceWorksheet,activationMethod,type,vizRegion){var $0=tab.ApplicationModel.get_instance().get_workbook().findContentDashboard().get_actionPresModels();var $1=tab.ActionUtils.$B($0,sourceWorksheet,activationMethod);if(ss.isValue(type)){var $2=tab.ActionUtils.$4(vizRegion);$1=_.filter($1,function($p1_0){
return tab.ActionUtils.getActionType($p1_0)===type&&!$2;});}$1=_.filter($1,function($p1_0){
return tab.ActionUtils.getActionType($p1_0)==='url'||ss.isValue($p1_0.tz)||$p1_0.vg.length>0;});return $1;}
tab.ActionUtils.executeActions=function(sheetID,activationMethod,tupleIds,t,forceHighlight,vizRegion){var $0=tab.ActionUtils.getApplicableActions(sheetID,activationMethod,'filter',vizRegion);var $1=tab.ActionUtils.getApplicableActions(sheetID,activationMethod,'highlight',vizRegion);var $2=tab.ActionUtils.getApplicableActions(sheetID,activationMethod,'url',vizRegion);var $3=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetID);if(ss.isValue(tupleIds)){if($2.length>0&&tupleIds.length>0){tab.ActionUtils.$7($2,tupleIds,$3);}if($1.length>0){if(tupleIds.length>0){tab.ActionUtils.$5($1,tupleIds,$3,t);}else{tab.ActionUtils.$6(t);}}else if(ss.isValue(forceHighlight)&&forceHighlight){tab.ActionUtils.$5($1,tupleIds,$3,t);}}if($0.length>0){tab.ActionUtils.$8(sheetID,$0,tupleIds,t,$3);}}
tab.ActionUtils.executeAction=function(actionPresModel,tupleIds,visualModel,t){if(!ss.isValue(actionPresModel)){return;}var $0=[actionPresModel];if(!ss.isNullOrUndefined(actionPresModel.awl)){tab.ActionUtils.$7($0,tupleIds,visualModel);}else if(true){tab.ActionUtils.$5($0,tupleIds,visualModel,t);}else{}}
tab.ActionUtils.getActionType=function(model){if(ss.isValue(model.aow)){var $0=tab.CommandSerializer.deserialize(model.aow.mt);if($0.commandName==='highlight'){return 'highlight';}if($0.commandName==='filter-targets'){return 'filter';}return null;}if(ss.isValue(model.awl)){return 'url';}return null;}
tab.ActionUtils.willActionCauseTabChange=function(sheetID,activationMethod){var $0=tab.ActionUtils.getApplicableActions(sheetID,activationMethod,'filter');var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;if(ss.isValue($1.aow)){var $2=tab.CommandSerializer.deserialize($1.aow.mt);var $3=$2.commandParams['sz'];if(ss.isValue($3)&&!_.isEqual($3,tsConfig.current_sheet_name)){return true;}}}return false;}
tab.ActionUtils.getUrlActionPm=function(actionPresModel,vizModel,tupleIds){if(ss.isValue(tupleIds)){if(!ss.isNullOrUndefined(actionPresModel.awl)){var $0=vizModel.get_vizDataModel();var $1=tab.ApplicationModel.get_instance().get_dataDictionary();var $2=tab.VizDataUtils.constructUrl($1,actionPresModel.awl,$0,tupleIds,vizModel.get_worksheetName());if(ss.isNullOrUndefined($2)){return null;}var $3={};$3.s9=$2;var $4=tab.ModelUtils.getFirstAvailableWebZoneName(tab.ApplicationModel.get_instance());if($4!=null){$3.mm=$4;}return $3;}}return null;}
tab.ActionUtils.$4=function($p0){return ss.isValue($p0)&&($p0==='color'||$p0==='size'||$p0==='shape');}
tab.ActionUtils.$5=function($p0,$p1,$p2,$p3){var $0=tab.BrushingComputer.computeFromTuples($p2,$p1,$p0);tab.SelectionClientCommands.$4($0,$p3);}
tab.ActionUtils.$6=function($p0){tab.SelectionClientCommands.$5($p0);}
tab.ActionUtils.$7=function($p0,$p1,$p2){if((ss.isValue($p1)&&$p1.length>0)){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.current;var $2=tab.ActionUtils.getUrlActionPm($1,$p2,$p1);if(ss.isValue($2)){$0.add($2);}else{tab.CommandController.set_fireDeferredUrlActions(true);return;}}if($0.length>0){tab.CommandController.get().executeUrlActions($0);}}}
tab.ActionUtils.$8=function($p0,$p1,$p2,$p3,$p4){if(ss.isValue($p1)){var $0=tab.ActionUtils.$9($p1);if($0.length>0){var $1=tab.ModelUtils.getSheetInfoPresModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);if(ss.isValue($1)&&!($1.aw&&ss.isNullOrUndefined($1.ve))){var $2=!$1.aw||$1.ve.length===1;var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $3=$enum1.current;if($2||$3.get_worksheetName()!==$p0){tab.ModelUtils.setVisualValidStateOnPresModel($p3,$3);}}}}if($p2.length>0){var $4=[];var $enum2=ss.IEnumerator.getEnumerator($p1);while($enum2.moveNext()){var $5=$enum2.current;if(($p2.length===1||!$5.cq)&&ss.isValue($5.tz)){var $6={};var $7=$5.tz+'&:exclude='+tab.CommandController.get().get_legacySession().railsEncode($p0);var $8=$p4.get_vizDataModel();var $9=tab.ApplicationModel.get_instance().get_dataDictionary();$6.s9=tab.VizDataUtils.constructUrlForFilterActionFromTargetURL($9,$7,$8,$p2);$4.add($6);}}if($4.length>0){tab.CommandController.get().executeUrlActions($4);}}}}
tab.ActionUtils.$9=function($p0){var $0={};if(ss.isValue($p0)){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $2=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($2.vg);while($enum2.moveNext()){var $3=$enum2.current;var $4=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$3);if(ss.isValue($4)){$0[$3]=$4;}}}}var $1=[];var $dict3=$0;for(var $key4 in $dict3){var $5={key:$key4,value:$dict3[$key4]};$1.add($5.value);}return $1;}
tab.ActionUtils.$A=function($p0){if(!tab.ActionUtils.$1){tab.ActionUtils.$1=true;var $3=tsConfig.schemeWhitelist.split(',');var $enum1=ss.IEnumerator.getEnumerator($3);while($enum1.moveNext()){var $4=$enum1.current;var $5=$4.toLowerCase().trim();if(!$5.endsWith(':')){$5+=':';}if($5.length>1){tab.ActionUtils.$0.add($5);}}}var $0=new RegExp('(^[A-Za-z][A-Za-z0-9+\\-.]*:)');var $1=$0.exec($p0);if(!ss.isValue($1)){return true;}var $2=$1[0].toLowerCase();return tab.ActionUtils.$0.contains($2);}
tab.ActionUtils.$B=function($p0,$p1,$p2){var $0=_.filter($p0,function($p1_0){
var $1_0=$p1_0.vf.contains($p1);var $1_1=($p2===$p1_0.akk);return ($1_0&&$1_1);});return $0;}
tab.ActionUtils.launchActionUrls=function(launch){var $0=[];var $1={};if(ss.isNullOrUndefined(launch)||!launch.length){return;}if(ss.isValue(tab.BaseSession.linkTarget)&&tab.BaseSession.linkTarget.length>0){var $2=tab.BaseSession.linkTarget;$0.add(new ss.Tuple($2,false));$1[$2]=launch[launch.length-1].s9;}else{var $3=0;var $enum1=ss.IEnumerator.getEnumerator(launch);while($enum1.moveNext()){var $4=$enum1.current;if(!tab.ActionUtils.$A($4.s9)){if(!tab.ActionUtils.$2){tab.ActionUtils.$2=true;tab.BaseSession.showAlertDialog(tab.Strings.SecurityBlockedURLActionMessage,tab.Strings.SecurityBlockedURLActionHeader,true);}continue;}if(ss.isNullOrUndefined($4.mm)||('t' in $4)){$4.mm=$4.t;}var $5;if(ss.isValue($4.mm)){$5=new ss.Tuple($4.mm,true);}else{var $6='_'+tsConfig.layoutid.toString().replace(new RegExp('[^\\w]','g'),'');if($3>0){$6+='_'+$3.toString();}$5=new ss.Tuple($6,false);}if(!Object.keyExists($1,$5.first)){$0.add($5);}$1[$5.first]=$4.s9;$3++;}}var $enum2=ss.IEnumerator.getEnumerator($0);while($enum2.moveNext()){var $7=$enum2.current;var $8=$7.first;if($7.second){$('[name='+$8+']').prop('src',$1[$8]);}else{window.open($1[$8],$8);}}}
tab.InvalidationInfo=function(){}
tab.InvalidationInfo.prototype={primarySheet:null,suppressActivation:null,layoutStatus:null,cmdResult:null}
tab.LocalUbertipInfo=function(interactedTupleIds,affectedTupleIds,paneDescriptorKey,needRemoteUbertip){this.$0=interactedTupleIds;this.$1=affectedTupleIds;this.$2=paneDescriptorKey;this.$3=needRemoteUbertip;}
tab.LocalUbertipInfo.prototype={$0:null,$1:null,$2:null,$3:false,get_interactedTupleIds:function(){return this.$0;},get_affectedTupleIds:function(){return this.$1;},get_paneDescriptorKey:function(){return this.$2;},get_needRemoteUbertip:function(){return this.$3;},shouldDoLocalUbertip:function(){return ss.isValue(this.$0)&&ss.isValue(this.$2)&&this.$0.length>0;}}
tab.ModelUtils=function(){}
tab.ModelUtils.getViewSession=function(sheetName){return tab.ModelUtils.findContentDashboard().getViewSession(sheetName);}
tab.ModelUtils.getVizCategoricalLegends=function(viz){var $0=[];var $1=tab.ModelUtils.findContentDashboard();if(ss.isValue($1)){var $enum1=ss.IEnumerator.getEnumerator($1.get_zoneModels());while($enum1.moveNext()){var $2=$enum1.current;if(Type.canCast($2.get_model(),tab.CategoricalLegendModel)&&$2.get_worksheetName()===viz.get_worksheetName()){$0.add($2.get_model());}}}return $0;}
tab.ModelUtils.withVisualModel=function(sheetName,callback){var $0=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetName);if(ss.isValue($0)){callback($0);return;}if(ss.isNullOrUndefined(tab.ModelUtils.$0)){tab.ModelUtils.$0={};tab.ModelUtils.findContentDashboard().get_zonesModel().add_newZone(tab.ModelUtils.$1);}var $1=tab.ModelUtils.$0[sheetName]||[];$1.add(callback);tab.ModelUtils.$0[sheetName]=$1;}
tab.ModelUtils.getVisualModels=function(appModel){var $0=tab.ModelUtils.findContentDashboard(appModel);return tab.ModelUtils.getVisualModelsFromDashboard($0);}
tab.ModelUtils.getVisualModelsFromDashboard=function(dashboardModel){var $0={};var $enum1=ss.IEnumerator.getEnumerator(dashboardModel.get_zoneModels());while($enum1.moveNext()){var $1=$enum1.current;var $2=$1.get_visualModel();if(ss.isValue($2)){$0[$1.get_worksheetName()]=$2;}}return $0;}
tab.ModelUtils.getSheetInfoPresModel=function(appModel,sheetName){var $0=appModel.get_workbook();if(ss.isNullOrUndefined($0)||ss.isNullOrUndefined($0.get_sheetsInfo())){return null;}var $enum1=ss.IEnumerator.getEnumerator($0.get_sheetsInfo());while($enum1.moveNext()){var $1=$enum1.current;if($1.sr===sheetName){return $1;}}return null;}
tab.ModelUtils.getVisualModel=function(appModel,sheetName){var $0=null;var $1=tab.ModelUtils.findContentDashboard(appModel);if(ss.isNullOrUndefined($1)){return $0;}var $enum1=ss.IEnumerator.getEnumerator($1.get_zoneModels());while($enum1.moveNext()){var $2=$enum1.current;var $3=$2.get_visualModel();if(ss.isValue($3)){var $4=$2.get_worksheetName();if($4===sheetName){$0=$3;break;}}}return $0;}
tab.ModelUtils.getVisualModelFromVisualId=function(visualId,appModel){if(ss.isNullOrUndefined(appModel)){appModel=tab.ApplicationModel.get_instance();}var $0=null;var $1=tab.ModelUtils.findContentDashboard(appModel);if(ss.isNullOrUndefined($1)){return $0;}var $enum1=ss.IEnumerator.getEnumerator($1.get_zoneModels());while($enum1.moveNext()){var $2=$enum1.current;var $3=$2.get_visualModel();if(ss.isValue($3)){if(_.isEqual($3.get_visualId(),visualId)){$0=$3;break;}}}return $0;}
tab.ModelUtils.getVisualId=function(sheetName){return tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetName).get_visualId();}
tab.ModelUtils.getFirstAvailableWebZoneName=function(appModel){var $0=null;var $1=tab.ModelUtils.findContentDashboard(appModel);if(ss.isNullOrUndefined($1)){return $0;}var $enum1=ss.IEnumerator.getEnumerator($1.get_zoneModels());while($enum1.moveNext()){var $2=$enum1.current;if($2.get_zoneType()==='web'){var $3=$2.get_zoneId();$0='frame_'+$3.toString();break;}}return $0;}
tab.ModelUtils.isActiveZone=function(zoneId){return zoneId===tab.ModelUtils.findContentDashboard().get_activeZoneID();}
tab.ModelUtils.getZoneIdForSheetName=function(worksheetName){var $0=tab.ModelUtils.findContentDashboard();var $enum1=ss.IEnumerator.getEnumerator($0.get_zoneModels());while($enum1.moveNext()){var $1=$enum1.current;if($1.get_zoneType()==='viz'&&$1.get_worksheetName()===worksheetName){return $1.get_zoneId();}}return -1;}
tab.ModelUtils.hasBorder=function(styledBox){return ss.isValue(styledBox)&&styledBox.ak6!=='bs-none'&&!!styledBox.abh;}
tab.ModelUtils.hasUberTipData=function(visualId){var $0=tab.ModelUtils.getVisualModelFromVisualId(visualId);return ss.isValue($0.get_visualPresModel().awz)&&ss.isValue($0.get_visualPresModel().awz.axd);}
tab.ModelUtils.visualHasFilterField=function(sheetName,fieldName){var $0=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetName);return (ss.isValue($0.get_vizDataModel())&&$0.get_vizDataModel().get_filterFields().indexOf(fieldName)!==-1);}
tab.ModelUtils.createFilterModel=function(parent,presModel){switch(presModel.type){case 'Q':return new tab.QuantitativeFilterModel(parent,presModel);case 'H':return new tab.HierarchicalFilterModel(parent,presModel);case 'C':return new tab.CategoricalFilterModel(parent,presModel);case 'RD':return new tab.RelativeDateFilterModel(parent,presModel);default:return new tab.FilterModel(parent,presModel);}}
tab.ModelUtils.findMatchingFilterModel=function(visualModel,quickFilterModel){var $0=quickFilterModel.get_frame().param;return visualModel.get_filterModels()[$0];}
tab.ModelUtils.setVisualValidStateOnModel=function(t,model,valid){if(ss.isNullOrUndefined(model)){return;}model.set_isVisualValid(valid);}
tab.ModelUtils.invalidateVisuals=function(sheetNames){if(ss.isNullOrUndefined(sheetNames)){return;}var $enum1=ss.IEnumerator.getEnumerator(sheetNames);while($enum1.moveNext()){var $0=$enum1.current;var $1=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$0);if(ss.isValue($1)){tab.VizClientCommands.invalidateVisualModel($1);}}}
tab.ModelUtils.setVisualValidStateOnPresModel=function(t,model){if(ss.isNullOrUndefined(model)){return;}(t.makeMutablePresModel(model)).ed=false;}
tab.ModelUtils.$1=function($p0){if($p0.get_zoneType()!=='viz'){return;}var $0=tab.ModelUtils.$0[$p0.get_worksheetName()]||[];delete tab.ModelUtils.$0[$p0.get_worksheetName()];if(!Object.getKeyCount(tab.ModelUtils.$0)){tab.ModelUtils.$0=null;tab.ModelUtils.findContentDashboard().get_zonesModel().remove_newZone(tab.ModelUtils.$1);}var $1=$p0.get_visualModel();var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $2=$enum1.current;$2($1);}}
tab.ModelUtils.findContentDashboard=function(appModel){if(ss.isNullOrUndefined(appModel)){appModel=tab.ApplicationModel.get_instance();}return appModel.get_workbook().findContentDashboard();}
tab.ModelUtils.findActiveOrDefaultVisual=function(){var $0=tab.ModelUtils.findContentDashboard();if(ss.isNullOrUndefined($0)||ss.isNullOrUndefined($0.get_zoneModels())){return null;}var $1=$0.get_activeVisual();if(ss.isValue($1)){return $1;}var $enum1=ss.IEnumerator.getEnumerator($0.get_zoneModels());while($enum1.moveNext()){var $2=$enum1.current;if(ss.isValue($2.get_visualModel())){return $2.get_visualModel();}}return null;}
tab.ModelUtils.findActivePaneSpecId=function(){var $0=tab.ModelUtils.findActiveOrDefaultVisual();if(ss.isValue($0)&&ss.isValue($0.get_marksCardModel())){return $0.get_marksCardModel().get_activePaneSpecId();}return null;}
tab.ModelUtils.findShelf=function(st){var $0=tab.ModelUtils.findActiveOrDefaultVisual();return $0.get_shelves().findShelf(st);}
tab.ModelUtils.hasAnyImpliedSelection=function(){var $0=tab.ModelUtils.getVisualModels(tab.ApplicationModel.get_instance());var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=$1.value;if(!$2.get_impliedSelectionModel().get_isEmpty()){return true;}}return false;}
tab.QuantitativeFilterData=function(sheets,filterField,currentMinVal,currentMaxVal,previousMinVal,previousMaxVal){this.$0=sheets;this.$1=filterField;this.$2=currentMinVal;this.$3=currentMaxVal;this.$4=previousMinVal;this.$5=previousMaxVal;}
tab.QuantitativeFilterData.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,get_filterField:function(){return this.$1;},get_currentMaxVal:function(){return this.$3;},get_currentMinVal:function(){return this.$2;},get_targetSheets:function(){return this.$0;},set_targetSheets:function(value){this.$0=value;return value;},get_previousMaxVal:function(){return this.$5;},get_previousMinVal:function(){return this.$4;},valueInRange:function(val){var $0=true;if(ss.isValue(this.$2)){$0=$0&&tab.FloatUtil.isGreaterThanOrEqual(val,this.$2);}if(ss.isValue(this.$3)){$0=$0&&tab.FloatUtil.isLessThanOrEqual(val,this.$3);}return $0;}}
tab.ShapeManager=function(){this.$2={};this.$3={};}
tab.ShapeManager.$4=function($p0,$p1,$p2,$p3,$p4,$p5){return $p0+';'+$p1+';'+$p2+';'+$p3+';'+$p4+';'+$p5;}
tab.ShapeManager.prototype={get_imageKeys:function(){return Object.keys(this.$2);},get_allowHighQualityImageScaling:function(){return Object.getKeyCount(this.$2)<50;},getImageElement:function(shapeId){return this.$2[shapeId];},getCachedCanvas:function(shapeId,layer,colorOverrideMode,color,width,height,cacheableCanvasGenerator){var $0=null;var $1=tab.ShapeManager.$4(shapeId,layer,colorOverrideMode,color,width,height);if(!Object.keyExists(this.$3,$1)){if(ss.isValue(cacheableCanvasGenerator)){$0=cacheableCanvasGenerator();if(ss.isValue($0)){this.$3[$1]=$0;}}}else{$0=this.$3[$1];}return $0;},updateCustomImageMap:function(customShapes,imageLoadedCallback){var $enum1=ss.IEnumerator.getEnumerator(customShapes);while($enum1.moveNext()){var $0=$enum1.current;if(ss.isValue($0)){var $1=$0.abg.toString();var $2=0;if(!Object.keyExists(this.$2,$1)){++$2;var $3=$0.ag1;var $4=document.createElement('img');$4.src='data:image/png;base64,'+$3;this.$2[$1]=$4;var $5=null;$5=function(){
--$2;if(!$2&&ss.isValue(imageLoadedCallback)){imageLoadedCallback();}$4.removeEventListener('load',$5,false);};$4.addEventListener('load',$5,false);}}}}}
tab.WorkbookViewObjectUtils=function(){}
tab.WorkbookViewObjectUtils.createVizUriModelForAuthoringSheetInWorkbook=function(sheetName,workbook){var $0;var $1=tab.WorkbookViewObjectUtils.findSheetIdBySheetNameInWorkbook(sheetName,workbook);if($1.length>0){$0=tab.VizUriModel.createForAuthoringPublishedSheet(workbook.repositoryUrl+'/'+$1);}else{var $2=tab.WorkbookViewObjectUtils.findFirstSheetInWorkbook(workbook);$0=tab.VizUriModel.createForAuthoringUnpublishedSheet(workbook.repositoryUrl+'/'+$2,sheetName);}if(tab.MiscUtil.isNullOrEmpty($0)){$0=tab.VizUriModel.createInvalid();}return $0;}
tab.WorkbookViewObjectUtils.createVizUriModelForViewingSheetInWorkbook=function(sheetName,workbook){var $0;var $1=tab.WorkbookViewObjectUtils.findSheetIdBySheetNameInWorkbook(sheetName,workbook);if($1.length>0){$0=tab.VizUriModel.createForViewingSheet(workbook.repositoryUrl+'/'+$1);}else{$0=tab.VizUriModel.createInvalid();}return $0;}
tab.WorkbookViewObjectUtils.findSheetIdBySheetNameInWorkbook=function(sheetName,workbook){var $0=_.find(workbook.views,function($p1_0){
return $p1_0.name===sheetName;});if($0==null){return '';}return $0.sheetId;}
tab.WorkbookViewObjectUtils.findFirstSheetInWorkbook=function(workbook){var $0=_.first(workbook.views);if($0==null){return '';}return $0.sheetId;}
tab.XhrUtil=function(){}
tab.XhrUtil.get_currentTabName=function(){return tab.XhrUtil.$0;}
tab.XhrUtil.set_currentTabName=function(value){tab.XhrUtil.$0=value;return value;}
tab.XhrUtil.helper=function(args,handler){var $0=new tab.XhrUtil();if(!ss.isValue(args.success)&&ss.isValue(handler)){args.success=handler.get_successDelegate();}if(!ss.isValue(args.complete)&&ss.isValue(handler)){args.complete=handler.get_completedDelegate();}if(!ss.isValue(args.error)&&ss.isValue(handler)){args.error=handler.get_errorDelegate();}return $0.request(args);}
tab.XhrUtil.getMultipartData=function(file,nameValues){var $0=tab.XhrUtil.randomString();var $1='--'+$0;var $2='\r\n';var $3=new ss.StringBuilder();if(ss.isValue(file)){$3.append($1);$3.append($2);$3.append('Content-Disposition: form-data; name="');$3.append(file.name);$3.append('"');if(('filename' in file)){$3.append('; filename="');$3.append(file.filename);$3.append('"');}$3.append($2);$3.append('Content-Type: ');$3.append(file.contentType);$3.append($2);$3.append($2);$3.append(file.content);$3.append($2);}var $dict1=nameValues;for(var $key2 in $dict1){var $5={key:$key2,value:$dict1[$key2]};$3.append($1);$3.append($2);$3.append('Content-Disposition: form-data; name="');$3.append($5.key);$3.append('"');$3.append($2);$3.append($2);if(Type.canCast($5.value,String)){$3.append($5.value);}else{$3.append(tab.JsonUtil.toJson($5.value));}$3.append($2);}$3.append($1);$3.append('--');$3.append($2);var $4=tab.$create_XhrMultipartData();$4.header=$0;$4.body=$3.toString();return $4;}
tab.XhrUtil.randomString=function(){var $0='0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';var $1=8;var $2='';for(var $3=0;$3<$1;$3++){var $4=Math.random()*$0.length;var $5=parseInt($4);$2+=$0.substring($5,$5+1);}return $2;}
tab.XhrUtil.prototype={request:function($p0){$p0.headers=($p0.headers||{});if(!$p0.headers['X-Tsi-Supports-Accepted']){delete $p0.headers['X-Tsi-Supports-Accepted'];}else{$p0.headers['X-Tsi-Supports-Accepted']=true;}if(ss.isValue(tab.XhrUtil.$0)&&tab.XhrUtil.$0.length>0){$p0.headers['X-Tsi-Active-Tab']=encodeURIComponent(tab.XhrUtil.$0);}if(ss.isValue($p0.complete)){var $1=$p0.complete;$p0.complete=function($p1_0,$p1_1){
$p1_0.args=$p0;$1($p1_0,$p1_1);};}if(ss.isValue($p0.success)){var $2=$p0.success;$p0.success=function($p1_0,$p1_1,$p1_2){
$p1_2.args=$p0;$2($p1_0,$p1_1,$p1_2);};}if(ss.isValue($p0.error)){var $3=$p0.error;$p0.error=function($p1_0,$p1_1,$p1_2){
$p1_0.args=$p0;$3($p1_0,$p1_1,$p1_2);};}if(ss.isValue($p0.beforeSend)){var $4=$p0.beforeSend;$p0.beforeSend=function($p1_0){
$p1_0.args=$p0;$4($p1_0);};}var $0=null;$0 = $p0;return $.ajax($0);}}
tab.Model=function(parent,presModelKey){this.$0=parent;this.$3=presModelKey;}
tab.Model.fireDeferredEvents=function(exceptionHandler){var $0=tab.Model.$1;tab.Model.$1=null;if(ss.isValue($0)){var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;try{$1();}catch($2){if(ss.isValue(exceptionHandler)){exceptionHandler($2);}}}}if(ss.isValue(tab.Model.$2)){window.clearTimeout(tab.Model.$2);tab.Model.$2=null;}}
tab.Model.$4=function(){tab.Model.$1=null;}
tab.Model.prototype={presModel:null,$0:null,$3:null,get_presModel:function(){return this.presModel;},get_presModelKey:function(){return this.$3;},set_presModelKey:function(value){this.$3=value;return value;},get_parent:function(){return this.$0;},getMutableCopyOfPresModel:function(){var $0=tab.MiscUtil.cloneObject(this.presModel);if(!ss.isValue($0)){$0={};}return $0;},getPresModelPath:function(){return this.$5(new tab.PresModelPath());},swapAndCopyPresModel:function(newPM){var $0=this.presModel;if(ss.isValue($0)&&ss.isValue(newPM)){var $1=newPM;var $2=$0;var $enum1=ss.IEnumerator.getEnumerator(Object.keys($2));while($enum1.moveNext()){var $3=$enum1.current;if((!Object.keyExists($1,$3)||ss.isUndefined($1[$3]))&&!$.isFunction($2[$3])&&!_.isBoolean($2[$3])){$1[$3]=$2[$3];}}}this.presModel=newPM;},swapPresModel:function(newPM){this.presModel=newPM;},simpleSwapToUpdate:function(newPresModel,eventToFire){if(this.isNewPresModelSameAsOld(newPresModel)){return false;}this.swapAndCopyPresModel(newPresModel);var $0=Array.toArray(arguments).extract(1);Function.prototype.apply.call(ss.Delegate.create(this,this.raiseEvent), this, $0);return true;},isNewPresModelSameAsOld:function(newPM){return _.isEqual(this.presModel,newPM);},isNewPresModelSameAsOldArray:function(oldPM,newPM){return _.isEqual(oldPM,newPM);},raiseEvent:function(a){if(ss.isValue(a)){if(ss.isValue(this.presModel)){}var $0=Array.toArray(arguments).extract(1);var $1=this;var $2=function(){
Function.prototype.apply.call(a, $1, $0);};if(ss.isNullOrUndefined(tab.Model.$1)){tab.Model.$1=[];}tab.Model.$1.add($2);if(ss.isNullOrUndefined(tab.Model.$2)){tab.Model.$2=window.setTimeout(function(){
tab.Model.fireDeferredEvents(null);},0);}}},$5:function($p0){if(!ss.isValue(this.$0)){$p0.reverse();return $p0;}if(ss.isValue(this.$3)){$p0.add(this.$3);}var $0=this.$0;return $0.$5($p0);}}
tab.UndoList=function(){this.$0=[];}
tab.UndoList.prototype={add:function(nextUndo){this.$0.add(nextUndo);},makeUndoFunc:function(){var $0=ss.Delegate.create(this,function(){
var $enum1=ss.IEnumerator.getEnumerator(this.$0);while($enum1.moveNext()){var $1_0=$enum1.current;$1_0();}});return $0;}}
tab.CalculationCommands=function(){}
tab.CalculationCommands.registerCommandInterceptors=function(){tab.ServerCommands.addCommandInterceptor(tab.CalculationCommands.$2,'tabdoc','edit-pill');tab.ServerCommands.addCommandInterceptor(tab.CalculationCommands.$0,'tabdoc','initiate-create-calc');tab.ServerCommands.addCommandInterceptor(tab.CalculationCommands.$1,'tabdoc','initiate-edit-calc');}
tab.CalculationCommands.$0=function($p0){if(Object.keyExists($p0.commandParams,'afc')){tab.CalculationCommands.createCalculation($p0.commandParams['s3'],$p0.commandParams['afc']);}else{tab.CalculationCommands.createCalculation($p0.commandParams['s3']);}return 1;}
tab.CalculationCommands.$1=function($p0){tab.CalculationCommands.editCalculation($p0.commandParams['afc']);return 1;}
tab.CalculationCommands.$2=function($p0){var $0=$p0.commandParams;tab.CalculationCommands.editPill($0['afc'],$0['ajv'],parseInt($0['wz']),parseInt($0['wn']));return 1;}
tab.CalculationCommands.createCalculation=function(datasource,fn){var $0={};$0['s3']=datasource;if(ss.isValue(fn)){$0['afc']=fn;}var $1=tab.CommandUtils.newDocCommand('initiate-create-calc',$0);tab.CommandController.SendCommand(new tab.ClientCommand('immediately',function($p1_0){
var $1_0=$p1_0.makeMutablePresModel(tab.ApplicationModel.get_instance().get_calculationModel());$1_0.s3=datasource;$1_0.lo='__temporary calc name__';},$1));}
tab.CalculationCommands.editCalculation=function(fn){var $0={};$0['afc']=fn;var $1=tab.CommandUtils.newDocCommand('initiate-edit-calc',$0);var $2='';var $3='';var $4=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().findDataSourceFromGlobalFieldName(fn);if(ss.isValue($4)){$3=$4.get_name();var $5=$4.findField(fn);if(ss.isValue($5)){$2=$5.get_displayName();}}tab.CommandController.SendCommand(new tab.ClientCommand('immediately',function($p1_0){
var $1_0=$p1_0.makeMutablePresModel(tab.ApplicationModel.get_instance().get_calculationModel());$1_0.afc=fn;$1_0.r3=$2;$1_0.s3=$3;$1_0.lo='__temporary calc name__';},$1));}
tab.CalculationCommands.editPill=function(fieldName,shelfType,shelfPosition,paneSpec){var $0={};$0['afc']=fieldName;$0['wn']=paneSpec;$0['ajv']=shelfType;$0['wz']=shelfPosition;var $1=tab.CommandUtils.newDocCommand('edit-pill',$0);return tab.CalculationCommands.$4(shelfType,$1,tab.CalculationCommands.$3(shelfType,shelfPosition,paneSpec));}
tab.CalculationCommands.createAdHocCalculation=function(shelfType,shelfPosition,paneSpec){var $0={};$0['wn']=paneSpec;$0['ajv']=shelfType;$0['wz']=shelfPosition;var $1=tab.CommandUtils.newDocCommand('create-type-in-pill',$0);return tab.CalculationCommands.$4(shelfType,$1,tab.CalculationCommands.$3(shelfType,shelfPosition,paneSpec));}
tab.CalculationCommands.$3=function($p0,$p1,$p2){return function($p1_0){
var $1_0=$p1_0.makeMutablePresModel(tab.ApplicationModel.get_instance().get_typeInPillCalculationModel());$1_0.s3='__fake ds name__';$1_0.lo='__temporary calc name__';$1_0.ajv=$p0;$1_0.wz=$p1;$1_0.wn=$p2;};}
tab.CalculationCommands.$4=function($p0,$p1,$p2){if(!tab.CalculationCommands.isValidShelfForCalcs($p0)){return $.DeferredData().reject();}var $0=$.DeferredData();var $1=$0.promise().pipe(function($p1_0){
var $1_0=$p1_0;return ss.isValue($1_0)&&(ss.isNullOrUndefined($1_0.ed)||$1_0.ed);});tab.CommandController.SendCommand(new tab.ClientCommand('immediately',$p2,$p1,tab.CommandController.$1A($0),function(){
$1.reject();}));return $1;}
tab.CalculationCommands.requestAutoCompleteInfoWithContext=function(context,position,isTypeInPill){var $0={};$0['mg']=context;$0['wl']=position;$0['hq']=isTypeInPill;var $1=$.DeferredData();var $2=tab.CommandUtils.newDocCommand('calculation-auto-complete-with-context',$0);$2.noExceptionDialog=true;tab.CommandController.SendCommand(new tab.vqldomain$A($2,'none',function($p1_0){
var $1_0=new tab.CalculationAutoCompleteModel($p1_0);$1.resolve($1_0);},function(){
$1.reject();}));return $1.promise();}
tab.CalculationCommands.applyCalculation=function(model,fieldCaption,calcText,skipValidation,isFinished){var $0=$.DeferredData();var $1=$0.promise().pipe(function($p1_0){
return tab.CalcApplyResponse.fromApplyCalculationResult($p1_0,model);});var $2={};var $3;if(model.get_isAdhoc()){$3='apply-type-in-pill';$2['r6']=calcText;$2['hc']=true;$2['hd']=isFinished;}else{$3='apply-calculation';$2['r5']=fieldCaption;$2['r6']=calcText;$2['hc']=true;}var $4=function($p1_0){
if(model.get_isAdhoc()&&isFinished){var $1_0=$p1_0.makeMutablePresModel(model);$1_0.r3=null;$1_0.lo=null;$1_0.s3=null;}};tab.CommandController.SendCommand(new tab.ClientCommand('immediately',$4,tab.CommandUtils.newDocCommand($3,$2),tab.CommandController.$1A($0),function(){
$0.reject();}));return $1;}
tab.CalculationCommands.cancelCalculation=function(model){var $0=null;if(model.get_isAdhoc()){$0={};$0['hq']=true;}var $1=tab.CommandUtils.newDocCommand('clear-calculation-model',$0);tab.CommandController.SendCommand(new tab.ClientCommand('none',function($p1_0){
var $1_0=$p1_0.makeMutablePresModel(model);$1_0.r3=null;$1_0.lo=null;$1_0.s3=null;},$1));}
tab.CalculationCommands.validateCalculation=function(model,fieldCaption,calcText){var $0=$.Deferred();var $1;var $2={};$2['r6']=calcText;$2['hc']=true;if(model.get_isAdhoc()){$1='validate-type-in-pill';}else{$1='validate-formula';$2['r5']=fieldCaption;}tab.CommandController.SendCommand(new tab.vqldomain$A(tab.CommandUtils.newDocCommand($1,$2),'none',function(){
$0.resolve();},function(){
$0.reject();}));return $0.promise();}
tab.CalculationCommands.startDraggingText=function(text){var $0=$.DeferredData();var $1={};$1['sr']=tsConfig.current_sheet_name;$1['cl']=false;$1['sg']=text;tab.CommandController.SendCommand(new tab.vqldomain$A(tab.CommandUtils.newDocCommand('get-drag-pres-model-and-fieldname-for-text',$1),'none',tab.CommandController.$1A($0),function(){
$0.reject();}));return $0;}
tab.CalculationCommands.dropOnCalcEditor=function(fieldNames,dropPosition,dragSource,textSelection,isTypeInPill,draggedText){var $0=$.DeferredData();var $1={};$1['aft']=fieldNames;$1['yg']=dropPosition;$1['aj9']=dragSource;if(ss.isValue(textSelection)){$1['ayk']=textSelection;}$1['cl']=false;$1['hc']=true;$1['hq']=isTypeInPill;if(ss.isValue(draggedText)){$1['sg']=draggedText;}var $2=new tab.vqldomain$A(tab.CommandUtils.newDocCommand('drop-on-calc-editor',$1),'immediately',tab.CommandController.$1A($0),function(){
$0.reject();});tab.CommandController.SendCommand($2);return $0.promise();}
tab.CalculationCommands.insertFunctionInFormula=function(funcModel,formula,selection){var $0=$.DeferredData();if(ss.isNullOrUndefined(selection)||ss.isNullOrUndefined(funcModel)){return $0.reject();}var $1={};$1['ayf']=funcModel;$1['r4']=formula;$1['y9']=selection.yi;$1['za']=selection.yj;var $2=new tab.vqldomain$A(tab.CommandUtils.newDocCommand('insert-function-in-formula',$1),'immediately',tab.CommandController.$1A($0),function(){
$0.reject();});tab.CommandController.SendCommand($2);return $0.promise();}
tab.CalculationCommands.isValidShelfForCalcs=function(type){return tab.FeatureFlags.isEnabled('TypeInPills')&&(type==='columns-shelf'||type==='rows-shelf'||type==='encoding-shelf'||type==='measures-shelf'||((type==='filter-shelf'||type==='pages-shelf')&&tab.FeatureFlags.isEnabled('TypeInPillsExtraShelves')));}
tab.CalcApplyResponse=function(resultType){this.$0=resultType;}
tab.CalcApplyResponse.fromApplyCalculationResult=function(result,model){var $0=(_.isString(result))?result:result.ayp;var $1=new tab.CalcApplyResponse($0);switch($1.get_resultType()){case 'invalid-formula':$1.set_errorMessage(model.get_errorSummary());break;case 'invalid-caption-for-new-calc':$1.set_errorMessage(result.o0);break;}return $1;}
tab.CalcApplyResponse.prototype={$0:null,$1:null,get_resultType:function(){return this.$0;},get_errorMessage:function(){return this.$1;},set_errorMessage:function(value){this.$1=value;return value;}}
tab.CommandsModel=function(parent){tab.CommandsModel.initializeBase(this,[parent,new tab.PresModelPathItem('aol')]);}
tab.CommandsModel.prototype={$6:true,add_commandsChanged:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_commandsChanged:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_shouldUpdate:function(){return this.$6;},set_shouldUpdate:function(value){this.$6=value;return value;},get_commands:function(){return this.presModel;},update:function(newCommands){if(this.get_shouldUpdate()){this.forceUpdate(newCommands);}},forceUpdate:function(newCommands){this.simpleSwapToUpdate(newCommands,this.$7,this);}}
tab.HTMLEscape=function(){};tab.HTMLEscape.prototype = {escape:0,noEscape:1}
tab.HTMLEscape.registerEnum('tab.HTMLEscape',false);tab.vqldomain$6=function(fieldCaptions){this.$1={};this.$2=[];this.$0=fieldCaptions;}
tab.vqldomain$6.$A=function($p0,$p1){var $0=new Array($p0.length);for(var $1=0;$1<$p0.length;++$1){$0[$1]=new ss.Tuple($p0[$1],$p1[$1]);}return _.sortBy($0,function($p1_0){
return $p1_0.first;});}
tab.vqldomain$6.$C=function($p0,$p1){var $0;if($p1.length===1||ss.isNullOrUndefined($p0)){$0=$p1;}else{$0=_.sortBy($p1,function($p1_0,$p1_1){
return $p0[$p1_1];});}return $0;}
tab.vqldomain$6.prototype={$0:null,$3:false,get_$4:function(){return this.$0;},get_$5:function(){return !Object.getKeyCount(this.$1);},get_$6:function(){return _.map(this.$1,function($p1_0,$p1_1){
return $p1_0;});},$7:function($p0,$p1){if(ss.isNullOrUndefined($p0)||!$p0.length){return;}this.$2.add(tab.vqldomain$6.$A($p1,$p0));this.$3=this.$3||this.$9($p0);$p0=tab.vqldomain$6.$C($p1,$p0);this.$1[$p0.join(',')]=$p0;},$8:function($p0,$p1){if(ss.isNullOrUndefined($p1)||!$p1.length){return false;}var $0;if(this.$3||this.$9($p1)){$0=this.$B($p0,$p1);}else{var $1=tab.vqldomain$6.$C($p0,$p1);$0=Object.keyExists(this.$1,$1.join(','));}return $0;},$9:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;if(!ss.isValue($0)){return true;}}return false;},$B:function($p0,$p1){var $0=tab.vqldomain$6.$A($p0,$p1);var $enum1=ss.IEnumerator.getEnumerator(this.$2);while($enum1.moveNext()){var $1=$enum1.current;var $2=true;var $3=false;var $4=0;var $5=0;while($2&&$5<$1.length&&$4<$0.length){var $6=$1[$5];var $7=$0[$4];if($6.first<$7.first){++$5;}else if($6.first>$7.first){++$4;}else{$2=!ss.isValue($6.second)||!ss.isValue($7.second)||$6.second===$7.second;$3=$3||($6.second===$7.second);++$5;++$4;}}if($2&&$3){return true;}}return false;}}
tab.SceneUtils=function(){}
tab.SceneUtils.get_$0=function(){return tab.Logger.lazyGetLogger(tab.SceneUtils);}
tab.SceneUtils.getPaneDescriptorKeyFromTupleId=function(tupleId,scene){var $enum1=ss.IEnumerator.getEnumerator(scene.auq);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($0.auf);while($enum2.moveNext()){var $1=$enum2.current;if(ss.isValue($1.avw)){var $2=scene.avs;var $dict3=$2;for(var $key4 in $dict3){var $3={key:$key4,value:$dict3[$key4]};var $4=$3.value.ant['tuple_id'];var $5=_.find($4.vs,function($p1_0){
return $p1_0===tupleId;});if(ss.isValue($5)){return $3.key;}}}}}return '';}
tab.vqldomain$5=function(){}
tab.vqldomain$5.get_$0=function(){return tab.Logger.lazyGetLogger(tab.SelectionClientCommands);}
tab.vqldomain$5.$1=function($p0,$p1,$p2,$p3){var $0=tab.vqldomain$5.$8($p2,$p3);var $1=new tab.vqldomain$6($p3);var $2=new Array($p3.length);for(var $3=0;$3<$2.length;++$3){var $4=$p2.getColumnIndex($p3[$3]);$2[$3]=$4;}var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $5=$enum1.current;var $6=$p0.findItemById($5);if(!ss.isValue($6)){continue;}var $7=[];if(tab.vqldomain$5.$C($p0,$6,$p2,$0,$7)){$1.$7($7,$2);}}return $1;}
tab.vqldomain$5.$2=function($p0,$p1){var $0={};var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $1=$enum1.current;var $2=new Array($1.zk.length);for(var $5=0;$5<$2.length;$5++){var $6=$p0.getVizDataFieldByIndex($1.zk[$5]);$2[$5]=$6.get_fieldName();}var $3=$2.join(';');var $4;if(Object.keyExists($0,$3)){$4=$0[$3];}else{$4=new tab.vqldomain$6($2);$0[$3]=$4;}$4.$7($1.zi,$1.zk);}return _.map($0,function($p1_0,$p1_1){
return $p1_0;});}
tab.vqldomain$5.$3=function($p0,$p1){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $1=$enum1.current;if(ss.isNullOrUndefined($1.zk)){continue;}var $enum2=ss.IEnumerator.getEnumerator($1.zk);while($enum2.moveNext()){var $2=$enum2.current;var $3=$p0.get_vizDataModel().getVizDataFieldByIndex($2);var $4=$3.get_fieldCaption();if(!$0.contains($4)){$0.add($4);}}}return $0;}
tab.vqldomain$5.$4=function($p0,$p1,$p2){var $0=new tab.vqldomain$6($p2);var $1=tab.vqldomain$5.$8($p0,$p2);var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $2=$enum1.current;var $3=[];var $4=[];var $enum2=ss.IEnumerator.getEnumerator($p2);while($enum2.moveNext()){var $5=$enum2.current;var $6=$1[$5];var $7=$6.getAliasIndex($2);$3.add($7);$4.add($p0.getColumnIndex($5));}if($3.length!==$p2.length){}$0.$7($3,$4);}return $0;}
tab.vqldomain$5.$5=function($p0,$p1,$p2,$p3){var $0=[];var $1={};var $2=false;$p0.forEachVizDataField(function($p1_0,$p1_1){
if(tab.vqldomain$5.$D($p1_0)){var $1_0=($p1_0.get_aggType()||'none');$1[$1_0]=$p1_1;if($1_0==='none'){$2=true;}}return true;});var $3=true;var $4=null;$p1.forEachVizDataField(function($p1_0,$p1_1){
if(tab.vqldomain$5.$D($p1_0)){if($4==null){$4=$p1_0.get_baseColumnName();}else if($4!==$p1_0.get_baseColumnName()){$3=false;}}return true;});var $5=[];if($3){var $8=[];$p1.forEachVizDataField(function($p1_0,$p1_1){
if(tab.vqldomain$5.$D($p1_0)){var $1_0=($p1_0.get_aggType()||'none');if(!$2&&$1_0==='none'){var $enum1=ss.IEnumerator.getEnumerator(Object.keys($1));while($enum1.moveNext()){var $1_1=$enum1.current;if(!$8.contains($1_1)){$8.add($1_1);var $1_2=$1[$1_1];$0.add(new tab.vqldomain$7($1_2,$p1_1,$1_1,'none'));var $1_3=$p0.getVizDataFieldByIndex($1_2);$5.add($1_3);}}}else if(Object.keyExists($1,$1_0)){if(!$8.contains($1_0)){$8.add($1_0);var $1_4=$1[$1_0];$0.add(new tab.vqldomain$7($1_4,$p1_1,'none','none'));$5.add($p1_0);}}else if($2){var $1_5=$1['none'];$0.add(new tab.vqldomain$7($1_5,$p1_1,'none',$1_0));$5.add($p1_0);}}return true;});}var $6=new Array($5.length);var $enum1=ss.IEnumerator.getEnumerator($5);while($enum1.moveNext()){var $9=$enum1.current;$6.add($9.get_fieldCaption());}var $7=new tab.vqldomain$6($6);var $enum2=ss.IEnumerator.getEnumerator($p3);while($enum2.moveNext()){var $A=$enum2.current;var $B=[];var $C=[];var $enum3=ss.IEnumerator.getEnumerator($0);while($enum3.moveNext()){var $D=$enum3.current;var $E=$p0.getVizDataFieldByIndex($D.$0);var $F=$E.getDataValueIndex($A);var $10=$p2.getRawValue($E.get_dataType(),$F);var $11=tab.vqldomain$5.$E($10,$D.$2,$D.$3,$F);$B.add($11);$C.add($D.$0);}$7.$7($B,$C);}return new ss.Tuple($7,$0);}
tab.vqldomain$5.$6=function($p0,$p1,$p2,$p3){var $0=[];if(ss.isNullOrUndefined($p2)||$p0.get_$5()){return $0;}$p2.forEachTupleId(function($p1_0){
var $1_0=[];var $1_1=[];var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $1_2=$enum1.current;var $1_3=$p2.getVizDataFieldByIndex($1_2.$1);var $1_4=$1_3.getDataValueIndex($p1_0);var $1_5=$p3.getRawValue($1_3.get_dataType(),$1_4);var $1_6=tab.vqldomain$5.$E($1_5,$1_2.$3,$1_2.$2,$1_4);$1_0.add($1_6);$1_1.add($1_2.$1);}if($p0.$8($1_1,$1_0)){$0.add($p1_0);}return true;});return $0;}
tab.vqldomain$5.$7=function($p0,$p1){var $0=[];if(ss.isNullOrUndefined($p1)||$p0.get_$5()){return $0;}var $1=$p0.get_$4();var $2=tab.vqldomain$5.$8($p1,$1);if(ss.isNullOrUndefined($2)){return $0;}if(!$p1.get_hasTupleIdColumn()){return $0;}var $3=new Array($1.length);for(var $4=0;$4<$1.length;$4++){$3[$4]=$p1.getColumnIndex($1[$4]);}$p1.forEachTupleId(function($p1_0){
var $1_0=new Array($1.length);for(var $1_1=0;$1_1<$1.length;$1_1++){var $1_2=$1[$1_1];var $1_3=$2[$1_2];var $1_4=$1_3.getAliasIndex($p1_0);$1_0[$1_1]=$1_4;}if($p0.$8($3,$1_0)){$0.add($p1_0);}return true;});return $0;}
tab.vqldomain$5.$8=function($p0,$p1){var $0={};var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $1=$enum1.current;var $2=$p0.getVizDataField($1);if(ss.isNullOrUndefined($2)){return null;}$0[$1]=$2;}return $0;}
tab.vqldomain$5.$9=function($p0,$p1,$p2){var $0=[];if(ss.isNullOrUndefined($p1)||$p2.get_fieldCaptions().length!==$p0.get_$4().length){return $0;}var $1=$p2.get_fieldCaptions();var $enum1=ss.IEnumerator.getEnumerator($p0.get_$6());while($enum1.moveNext()){var $2=$enum1.current;var $3=new Array($2.length);for(var $4=0;$4<$3.length;$4++){var $5=$1[$4];var $6=$p0.get_$4().indexOf($5);var $7=$2[$6];var $8=$p1.getVizDataField($5);$3[$4]=tab.VizDataLookup.lookupAliasFromIndex($7,$8,tab.ApplicationModel.get_instance().get_dataDictionary());}var $enum2=ss.IEnumerator.getEnumerator($p2.get_items());while($enum2.moveNext()){var $9=$enum2.current;if(_.isEqual($3,$9.uw)){$0.add($9.abi);}}}return $0;}
tab.vqldomain$5.$A=function($p0,$p1,$p2){var $0=[];if(ss.isNullOrUndefined($p1.get_vizDataModel())){return $0;}var $1=$p0.get_$4();var $enum1=ss.IEnumerator.getEnumerator($p2);while($enum1.moveNext()){var $2=$enum1.current;if(ss.isNullOrUndefined($2.zk)||ss.isNullOrUndefined($2.zi)||$2.zi.length<$1.length){continue;}var $3=[];var $4=[];var $5=false;for(var $6=0;$6<$2.zk.length;++$6){var $7=$2.zk[$6];var $8=$p1.get_vizDataModel().getVizDataFieldByIndex($7).get_fieldCaption();if(ss.isValue($8)&&$1.contains($8)){$3.add($7);$4.add($2.zi[$6]);if(!$6){$5=true;}}}if($5&&$p0.$8($3,$4)){var $9={};$9.zk=$2.zk;$9.zi=$2.zi;$0.add($9);}}return $0;}
tab.vqldomain$5.$B=function($p0,$p1,$p2,$p3){var $0=[];if(ss.isNullOrUndefined($p2.get_vizDataModel())){return $0;}var $dict1=$p2.get_sceneModel().get_visualListModels();for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $enum3=ss.IEnumerator.getEnumerator($1.value.get_groupItemNodes());while($enum3.moveNext()){var $2=$enum3.current;if(ss.isNullOrUndefined($2.zk)||ss.isNullOrUndefined($2.zi)||$2.zk.length!==$2.zi.length){continue;}var $3=[];for(var $4=0;$4<$2.zk.length;++$4){var $5=$2.zk[$4];var $6=_.find($p1,function($p1_0){
return $p1_0.$1===$5;});if(ss.isValue($6)){var $7=$2.zi[$4];var $8=$p2.get_vizDataModel().getVizDataFieldByIndex($6.$1);var $9=$p3.getRawValue($8.get_dataType(),$7);var $A=tab.vqldomain$5.$E($9,$6.$3,$6.$2,$7);$3.add($A);}}if($3.length===$2.zi.length){if($p0.$8($2.zk,$3)){var $B={};$B.zk=$2.zk;$B.zi=$2.zi;$0.add($B);}}}}return $0;}
tab.vqldomain$5.$C=function($p0,$p1,$p2,$p3,$p4){$p4.clear();for(var $0=0;$0<$p1.uw.length;$0++){var $1=$p0.get_fieldCaptions()[$0];var $2=$p1.uw[$0];var $3=$p3[$1];if(ss.isNullOrUndefined($3)){continue;}var $4=tab.VizDataLookup.reverseLookupAlias($2,$p2,$3,tab.ApplicationModel.get_instance().get_dataDictionary());if(!ss.isValue($4)){return false;}$p4.add($4);}return true;}
tab.vqldomain$5.$D=function($p0){if(ss.isNullOrUndefined($p0)){return false;}var $0=$p0.get_dataType();if($0==='datetime'||$0==='date'){return true;}var $1=['day','hour','mdy','minute','month','month-year','qtr','trunc-day','trunc-hour','trunc-minute','trunc-month','trunc-qtr','trunc-second','trunc-week','trunc-year','week','weekday','year'];return $1.contains($p0.get_aggType());}
tab.vqldomain$5.$E=function($p0,$p1,$p2,$p3){if(_.isNumber($p0)){return $p0;}var $0=(_.isDate($p0))?$p0:tab.DateUtil.parsePresModelDate($p0);var $1=$p3;if($p1==='none'&&$p2!=='none'){switch($p2){case 'year':$1=tab.DateUtil.dateAsYear($0);break;case 'qtr':$1=tab.DateUtil.dateAsQuarter($0);break;case 'month':$1=tab.DateUtil.dateAsMonth($0);break;case 'day':$1=tab.DateUtil.dateAsDay($0);break;case 'hour':$1=tab.DateUtil.dateTimeAsHour($0);break;case 'minute':$1=tab.DateUtil.dateTimeAsMinute($0);break;case 'second':$1=tab.DateUtil.dateTimeAsSecond($0);break;case 'week':$1=tab.DateUtil.dateAsWeek($0);break;case 'weekday':$1=tab.DateUtil.dateAsDayOfWeek($0);break;case 'month-year':$1=tab.DateUtil.dateAsMonthYear($0);break;case 'mdy':$1=tab.DateUtil.dateAsMonthDayYear($0);break;}if(ss.isNullOrUndefined($1)){}}return $1;}
tab.vqldomain$5.$F=function($p0){return ($p0.ag9||'none');}
tab.vqldomain$7=function(srcIdx,destIdx,srcA,destA){this.$0=srcIdx;this.$1=destIdx;this.$2=(srcA||'none');this.$3=(destA||'none');}
tab.vqldomain$7.prototype={$0:0,$1:0,$2:null,$3:null}
tab.SelectionUtils=function(){}
tab.SelectionUtils.get_$0=function(){return tab.Logger.lazyGetLogger(tab.SelectionUtils);}
tab.SelectionUtils.resolveLegendSelection=function(action,selectedItems,legend,currentSelection){var $0=[];if(ss.isValue(selectedItems)){var $1=currentSelection.get_selectionPresModel()||{};switch(action){case 'toggle':if(ss.isValue($1.acg)){$0.addRange($1.acg);}var $enum1=ss.IEnumerator.getEnumerator(selectedItems);while($enum1.moveNext()){var $3=$enum1.current;var $4=$0.indexOf($3.abi);if($4>=0){$0.removeAt($4);}else{$0.add($3.abi);}}break;case 'range':$0=tab.SelectionUtils.$1(selectedItems,legend,$1);break;case 'simple':var $2=(ss.isValue($1.acg))?$1.acg:new Array(0);if($2.length<=1){var $enum2=ss.IEnumerator.getEnumerator(selectedItems);while($enum2.moveNext()){var $5=$enum2.current;var $6=$2.indexOf($5.abi);if($6>=0){$0.removeAt($6);}else{$0.add($5.abi);}}}else{$0.addRange(_.pluck(selectedItems,'abi'));}break;}}return $0;}
tab.SelectionUtils.resolveMarkSelection=function(action,selectedMarkIDs,currentSelection,isAreaSelection){var $0=[];switch(action){case 'simple':if(!isAreaSelection&&selectedMarkIDs.length===1&&currentSelection.get_ids().length===1&&selectedMarkIDs[0]===currentSelection.get_ids()[0]){$0.clear();}else{$0.addRange(selectedMarkIDs);}break;case 'range':case 'toggle':$0.addRange(currentSelection.get_ids());var $enum1=ss.IEnumerator.getEnumerator(selectedMarkIDs);while($enum1.moveNext()){var $1=$enum1.current;if(!currentSelection.isMarkSelected($1)){$0.add($1);}else if(!isAreaSelection){$0.remove($1);}}break;}return $0;}
tab.SelectionUtils.resolveNodeSelection=function(action,allNodes,selectedNode,currentSelection,selectionToUpdate){var $0=[];if(ss.isValue(selectedNode)){switch(action){case 'simple':tab.SelectionUtils.$3(selectedNode,currentSelection,$0);break;case 'toggle':tab.SelectionUtils.$4(selectedNode,currentSelection,$0);break;case 'range':tab.SelectionUtils.$2(allNodes,selectedNode,currentSelection,$0);break;}}selectionToUpdate.awd=$0;}
tab.SelectionUtils.$1=function($p0,$p1,$p2){var $0=[];if(!ss.isValue($p2.acg)){return $0;}$0.addRange($p2.acg);$0.addRange(_.pluck($p0,'abi'));var $1=_.last($p2.acg);var $2=-1;for(var $6=0;$6<$p1.get_items().length;$6++){if($p1.get_items()[$6].abi===$1){$2=$6;}}var $3=$p1.get_items().indexOf(_.first($p0));if($2<0||$3<0){return _.uniq($0);}var $4=Math.min($2,$3);var $5=$4+Math.abs($2-$3)+1;for(var $7=$4;$7<$5;$7++){$0.add($p1.get_items()[$7].abi);}return _.uniq($0);}
tab.SelectionUtils.$2=function($p0,$p1,$p2,$p3){var $0=_.last($p2.get_nodes());if(ss.isNullOrUndefined($0)){$p3.addRange($p2.get_nodes());var $1={};$1.zk=($p1.zk||new Array(0));$1.zi=($p1.zi||new Array(0));$p3.add($1);}else{$p3.addRange($p2.get_nodes());var $2=-1;for(var $4=0;$4<$p0.length;$4++){var $5=$p0[$4];if(_.isEqual($5.zk,$0.zk)&&_.isEqual($5.zi,$0.zi)){$2=$4;break;}}var $3=$p0.indexOf($p1);if($p1.zk[0]!==$p0[$2].zk[0]){if(!$p2.isNodeAncestorSelected($p1)){var $6={};$6.zk=($p1.zk||new Array(0));$6.zi=($p1.zi||new Array(0));$p3.add($6);}}else{var $7=$p0.extract(Math.min($2,$3),Math.abs($2-$3)+1);var $enum1=ss.IEnumerator.getEnumerator($7);while($enum1.moveNext()){var $8=$enum1.current;if($8.zk[0]!==$p1.zk[0]){continue;}if($p2.isNodeSelected($8)){continue;}if($p2.isNodeAncestorSelected($8)){continue;}var $9={};$9.zk=($8.zk||new Array(0));$9.zi=($8.zi||new Array(0));$p3.add($9);}}}}
tab.SelectionUtils.$3=function($p0,$p1,$p2){if(!$p1.isNodeSelected($p0)||$p1.get_nodes().length>1){var $0={};$0.zk=($p0.zk||new Array(0));$0.zi=($p0.zi||new Array(0));$p2.add($0);}}
tab.SelectionUtils.$4=function($p0,$p1,$p2){$p2.addRange($p1.get_nodes());var $0=$p1.findNodeSelection($p0);if(ss.isValue($0)){$p2.remove($0);}else if(!$p1.isNodeAncestorSelected($p0)){var $1={};$1.zk=($p0.zk||new Array(0));$1.zi=($p0.zi||new Array(0));$p2.add($1);}}
tab.StartupUtils=function(){}
tab.StartupUtils.callAfterBootstrap=function(action){if(tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){action();}else{var $0=null;var $1=function(){
action();dojo.unsubscribe($0);};$0=dojo.subscribe('onBootstrapSuccess',$1);}}
tab.SubscriptionDisposable=function(subscription){this.$0=subscription;}
tab.SubscriptionDisposable.prototype={$0:null,dispose:function(){dojo.unsubscribe(this.$0);}}
tab.VizDataField=function(columnPresModel,paneColumnsPresModel){this.$0=columnPresModel;this.$1=paneColumnsPresModel;this.$4={};this.$E();this.$2=this.$C();this.$3=this.$D();}
tab.VizDataField.prototype={$0:null,$1:null,$2:false,$3:false,$4:null,get_hasDataValues:function(){return this.$2;},get_hasAliases:function(){return this.$3;},get_dataType:function(){return this.$0.aiy;},get_fieldName:function(){return this.$0.afc;},get_fieldCaption:function(){return this.$0.r2;},get_baseColumnName:function(){return this.$0.afl;},get_role:function(){return this.$0.aj4;},get_aggType:function(){return this.$0.ag9;},get_specialValuesOverride:function(){return this.$0.nw;},get_isQuantitative:function(){return !this.$0.ch;},get_formatStrings:function(){return this.$0.us;},get_filterContext:function(){return this.$0.axa;},get_vizColumnDoNotUse:function(){return this.$0;},get_$5:function(){return this.$0.zl;},get_$6:function(){return this.$0.zk;},get_$7:function(){return tab.Logger.lazyGetLogger(tab.VizDataField);},isKnownAs:function(captionOrFieldName){return tab.VizDataUtils.isNameOfColumn(this.$0,captionOrFieldName);},isTupleIdValid:function(tupleId){for(var $0=0;$0<this.$0.zl.length;++$0){var $1=this.$0.zl[$0];var $2=this.$9(tupleId,$1);if(ss.isValue($2)){return true;}}return false;},$8:function($p0){var $0=this.$B($p0,0);var $1={};var $2=0;var $enum1=ss.IEnumerator.getEnumerator($0.acf);while($enum1.moveNext()){var $3=$enum1.current;$1[$3]=$2++;}this.$4[$p0]=$1;},$9:function($p0,$p1){if(!Object.keyExists(this.$4,$p1)){this.$8($p1);}return this.$4[$p1][$p0];},getAliasIndex:function(tupleId){var $0=null;if(!this.get_hasAliases()){return $0;}for(var $1=0;$1<this.$0.zl.length;++$1){var $2=this.$0.zl[$1];var $3=this.$9(tupleId,$2);if(ss.isValue($3)){var $4=this.$0.zk[$1];var $5=this.$B($2,$4);$0=$5.zi[$3];break;}}return $0;},getDataValueIndex:function(tupleId){var $0=null;if(this.get_hasDataValues()){for(var $1=0;$1<this.$0.zl.length;++$1){var $2=this.$0.zl[$1];var $3=this.$9(tupleId,$2);if(ss.isValue($3)){var $4=this.$0.zk[$1];var $5=this.$B($2,$4);$0=$5.zh[$3];break;}}}return $0;},getPaneDescriptorKey:function(tupleId){var $0=null;for(var $1=0;$1<this.$0.zl.length;++$1){var $2=this.get_$5()[$1];var $3=this.$9(tupleId,$2);if(ss.isValue($3)){var $4=this.$A($2);$0=$4.avq.m1;break;}}return $0;},$A:function($p0){var $0=null;if(this.$1.length>$p0){$0=this.$1[$p0];}else{}return $0;},$B:function($p0,$p1){var $0=null;var $1=this.$A($p0);if(ss.isValue($1)){if($1.aw5.length>$p1){$0=$1.aw5[$p1];}else{}}return $0;},$C:function(){var $0=false;if(this.get_$5().length>0){var $1=this.get_$5()[0];var $2=this.get_$6()[0];var $3=this.$B($1,$2);if(ss.isValue($3)){$0=ss.isValue($3.zh)&&$3.zh.length>0;}}return $0;},$D:function(){var $0=false;if(this.get_$5().length>0){var $1=this.get_$5()[0];var $2=this.get_$6()[0];var $3=this.$B($1,$2);if(ss.isValue($3)){$0=ss.isValue($3.zi)&&$3.zi.length>0;}}return $0;},$E:function(){}}
tab.VizDataLookup=function(){}
tab.VizDataLookup.lookupDisplayValue=function(tupleId,dataField,dataDictionary){if(!dataField.isTupleIdValid(tupleId)){var $1=String.format('Failed trying to look up the display value for tuple id "{0}" because it is invalid for field "{1}"',tupleId,dataField.get_fieldCaption());return null;}var $0=null;if(dataField.get_hasAliases()){$0=tab.VizDataLookup.lookupAlias(tupleId,dataField,dataDictionary);}if(ss.isNull($0)&&dataField.get_hasDataValues()){$0=tab.VizDataLookup.$0(tupleId,dataField,dataDictionary);}if(ss.isNull($0)){var $2=String.format('Failed trying to look up the display value for tuple id "{0}" and field "{1}"',tupleId,dataField.get_fieldCaption());return null;}return $0;}
tab.VizDataLookup.lookupAlias=function(tupleId,dataField,dataDictionary){if(!dataField.isTupleIdValid(tupleId)){var $1=String.format('Failed trying to look up the alias for tuple id "{0}" because it is invalid for field "{1}"',tupleId,dataField.get_fieldCaption());return null;}var $0=dataField.getAliasIndex(tupleId);return tab.VizDataLookup.lookupAliasFromIndex($0,dataField,dataDictionary);}
tab.VizDataLookup.lookupAliasFromIndex=function(aliasIndex,dataField,dataDictionary){var $0=null;if(ss.isValue(aliasIndex)){if(aliasIndex>=0){var $1=aliasIndex;$0=tab.VizDataLookup.$1($1,dataField,dataDictionary);}else{aliasIndex=-aliasIndex-1;$0=dataDictionary.getRawValue('cstring',aliasIndex);if(tableau.format.isSpecialValue($0)){$0=tableau.format.formatSpecial($0,dataField.get_specialValuesOverride());}}}return $0;}
tab.VizDataLookup.lookupRawDataValue=function(tupleId,dataField,dataDictionary){var $0=dataField.getDataValueIndex(tupleId);return tab.VizDataLookup.lookupRawDataValueFromIndex($0,dataField,dataDictionary);}
tab.VizDataLookup.lookupRawDataValueFromIndex=function(dataValueIndex,dataField,dataDictionary){var $0=null;if(ss.isValue(dataValueIndex)){var $1;var $2;if(dataValueIndex>=0){$1=dataField.get_dataType();$2=dataValueIndex;}else{$2=-dataValueIndex-1;$1='cstring';}var $3=dataDictionary.getRawValue($1,$2);if(ss.isValue($3)){$0=dataDictionary.getRawValue($1,$2).toString();}}return $0;}
tab.VizDataLookup.$0=function($p0,$p1,$p2){var $0=$p1.getDataValueIndex($p0);return tab.VizDataLookup.$1($0,$p1,$p2);}
tab.VizDataLookup.$1=function($p0,$p1,$p2){var $0=null;var $1=tab.VizDataLookup.lookupRawDataValueFromIndex($p0,$p1,$p2);if(ss.isValue($1)){if(tableau.format.isSpecialValue($1)){$0=tableau.format.formatSpecial($1,$p1.get_specialValuesOverride());}else{$0=tableau.format.formatString($1,$p1.get_vizColumnDoNotUse());}}return $0;}
tab.VizDataLookup.reverseLookupAlias=function(targetAlias,vizData,column,dataDictionary){var $0=null;if(column.get_hasAliases()){vizData.forEachTupleId(function($p1_0){
var $1_0=tab.VizDataLookup.lookupAlias($p1_0,column,dataDictionary);if(String.equals($1_0,targetAlias,false)){$0=column.getAliasIndex($p1_0);return false;}return true;});}return $0;}
tab.VizDataLookup.isSpecial=function(tupleId,dataField,dataDictionary,specialType){var $0=tab.VizDataLookup.lookupRawDataValue(tupleId,dataField,dataDictionary);if(ss.isValue($0)){return (ss.isValue(specialType))?($0===specialType):tableau.format.isSpecialValue($0);}var $1=dataField.getAliasIndex(tupleId);if(ss.isValue($1)&&$1>=0){var $2=$1;var $3=tab.VizDataLookup.lookupRawDataValueFromIndex($2,dataField,dataDictionary);if(ss.isValue($3)){return (ss.isValue(specialType))?($3===specialType):tableau.format.isSpecialValue($3);}}return false;}
tab.VizDataUtils=function(){}
tab.VizDataUtils.constructUrl=function(dataDictionary,linkInfo,source,tupleIds,sheetId){var $0=function($p1_0,$p1_1,$p1_2){
if(String.isNullOrEmpty($p1_1)){if(ss.isValue(tupleIds)){return tab.VizDataUtils.$4(dataDictionary,$p1_0,tupleIds,1,linkInfo);}return null;}var $1_0=tab.VizDataUtils.$8(dataDictionary,$p1_0,$p1_1);if(linkInfo.c9){$1_0=encodeURIComponent($1_0);}return $1_0;};var $1=tab.VizDataUtils.decodeAndReplaceData(linkInfo.s9,'<','>',source,$0);if(!$1.second){return null;}return $1.first;}
tab.VizDataUtils.constructUrlForFilterActionFromTargetURL=function(dataDictionary,targetURL,source,tupleIds){var $0=function($p1_0,$p1_1,$p1_2){
return tab.VizDataUtils.$5(dataDictionary,$p1_0,tupleIds,$p1_2,',');};var $1=tab.VizDataUtils.decodeAndReplaceData(targetURL,'<','>',source,$0);return $1.first;}
tab.VizDataUtils.constructUrlFromString=function(dataDictionary,linkDisplayStr,source,tupleIds,sheetId){var $0=function($p1_0,$p1_1,$p1_2){
if(String.isNullOrEmpty($p1_1)){return tab.VizDataUtils.$6(dataDictionary,$p1_0,tupleIds,1);}else{return tab.VizDataUtils.$8(dataDictionary,$p1_0,$p1_1);}};var $1=tab.VizDataUtils.decodeAndReplaceData(linkDisplayStr,'<','>',source,$0);return $1.first;}
tab.VizDataUtils.constructHtml=function(dataDictionary,html,source,tupleIds){var $0=function($p1_0,$p1_1,$p1_2){
return tab.VizDataUtils.$6(dataDictionary,$p1_0,tupleIds,0);};var $1=tab.VizDataUtils.decodeAndReplaceData(html,'&lt;','&gt;',source,$0);var $2=$($1.first);var $3=[];tab.VizDataUtils.$1($2,$3);tab.VizDataUtils.$2($2,$3);if(tab.MiscUtil.isNullOrEmpty($2.text())){return '';}return $2.wrap('<div>').parent().html();}
tab.VizDataUtils.decodeAndReplaceData=function(original,open,close,vizDataModel,getStringForColumn){var $0=true;var $1=tab.VizDataUtils.$0(original,'escaped_open_tag');var $2=tab.VizDataUtils.$0(original,'escaped_close_tag');var $3=(original).replaceAll(open+open,$1).replaceAll(close+close,$2);var $4=$3.split(open);var $5=null;var $6=new ss.StringBuilder($4[0]);for(var $8=1;$8<$4.length;++$8){var $9=$4[$8];var $A=$9.split(close);var $B=$A[0].replaceAll($1,open).replaceAll($2,close).htmlDecode();var $C=$A[1];var $D;var $E=true;var $F=$B.lastIndexOf('~');var $10=$B.lastIndexOf(']');if($F>=0&&($10===-1||$10<$F)){$D=$B.substr($F);$B=$B.substr(0,$F);if($D==='~na'){$E=false;}}if(tab.VizDataUtils.$7($B)){var $15=$B.indexOf('(');$5=$B.substring(0,$15);$B=$B.substring($15+1,$B.length-1);}var $11=$B.indexOf('[');var $12=$B.lastIndexOf(']');if($11>=0&&$11<$12){$B=$B.substring($11+1,$12);}if($B.startsWith('Parameters.')){return new ss.Tuple('',false);}var $13=vizDataModel.getVizDataField($B);if(ss.isNullOrUndefined($13)){return new ss.Tuple('',false);}var $14=getStringForColumn($13,$5,$E);if(ss.isNullOrUndefined($14)){$0=false;}else{$6.append($14);}$6.append($C);}var $7=$6.toString().replaceAll($1,open).replaceAll($2,close);return new ss.Tuple($7,$0);}
tab.VizDataUtils.hasTupleWithNonTotalValue=function(vizData,dataDictionary,effectiveTupleIds){var $enum1=ss.IEnumerator.getEnumerator(effectiveTupleIds);while($enum1.moveNext()){var $0=$enum1.current;var $1=false;vizData.forEachVizDataField(function($p1_0,$p1_1){
if($p1_0.get_role()==='dimension'){if(tab.VizDataLookup.isSpecial($0,$p1_0,dataDictionary,tableau.format.specialAll)){$1=true;return false;}}return true;});if(!$1){return true;}}return false;}
tab.VizDataUtils.isNameOfColumn=function(column,captionOrFieldName){var $0=tab.VizDataUtils.$9(captionOrFieldName);var $1=tab.VizDataUtils.$9(column.r2);var $2=tab.VizDataUtils.$9(column.afc);var $3=tab.VizDataUtils.$9(column.afd);var $4=tab.VizDataUtils.$9(column.afh);return $1===$0||$2===$0||$3===$0||$4==='['+$0+']'||$2==='['+$0+']';}
tab.VizDataUtils.$0=function($p0,$p1){var $0=$p1;while($p0.indexOf($0)>-1){$0+=parseInt((Math.random()*10000));}return $0;}
tab.VizDataUtils.$1=function($p0,$p1){var $0=$p0.clone().children().remove().end().text();if($0.indexOf('~~~???~~~')!==-1){$p1.add($p0);}var $enum1=ss.IEnumerator.getEnumerator($p0.children().get());while($enum1.moveNext()){var $1=$enum1.current;tab.VizDataUtils.$1($($1),$p1);}}
tab.VizDataUtils.$2=function($p0,$p1){var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $0=$enum1.current;var $1=tab.VizDataUtils.$3($p0,$0,'tr');if(ss.isValue($1)){$1.remove();}else{var $2=tab.VizDataUtils.$3($p0,$0,'div');if(ss.isValue($2)){$2.remove();}else{$0.remove();}}}}
tab.VizDataUtils.$3=function($p0,$p1,$p2){var $0=$p1;if(ss.isValue($p0)&&ss.isValue($p1)&&$p0.find($p1).length===1){while($0[0]!==$p0[0]){if($0[0].tagName.toLowerCase()===$p2){return $0;}$0=$0.parent();}}return null;}
tab.VizDataUtils.$4=function($p0,$p1,$p2,$p3,$p4){var $0=[];for(var $2=0;$2<$p2.length;++$2){var $3=tab.VizDataLookup.lookupAlias($p2[$2],$p1,$p0);if($p4.c9){$3=encodeURIComponent($3);}if($p2.length>1&&$3.indexOf($p4.mv)>=0){$3=$3.replaceAll($p4.mv,$p4.mw+$p4.mv);}$0.add($3);}if($0.length>1&&ss.isNullOrUndefined($p4.mv)){return null;}var $1=$0.join($p4.mv);if(!$p3){$1=tableau.format.escapeHTML($1);}return $1;}
tab.VizDataUtils.$5=function($p0,$p1,$p2,$p3,$p4){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p2);while($enum1.moveNext()){var $1=$enum1.current;var $2='';if($p3){$2=tab.VizDataLookup.lookupAlias($1,$p1,$p0);}else{$2=tab.VizDataLookup.lookupRawDataValue($1,$p1,$p0);}$0.add($2);}return encodeURIComponent($0.join($p4));}
tab.VizDataUtils.$6=function($p0,$p1,$p2,$p3){var $0;if($p2.length>1){if(!$p1.get_hasDataValues()){return '...';}var $1=new Array($p2.length);for(var $3=0;$3<$p2.length;++$3){var $4=tab.VizDataLookup.lookupRawDataValue($p2[$3],$p1,$p0);if(ss.isNull($4)||tableau.format.isSpecialValue($4)){$4='0';}else if(ss.isUndefined($4)||!$4.length){return '...';}$1[$3]=$4;}var $2=0;for(var $5=0;$5<$1.length;++$5){$2+=parseFloat($1[$5]);}$0=tableau.format.formatString($2.toString(),$p1.get_vizColumnDoNotUse());}else if($p2.length===1){var $6=tab.VizDataLookup.lookupDisplayValue($p2[0],$p1,$p0);if(ss.isNullOrUndefined($6)){return '~~~???~~~';}$0=$6;}else{return '';}if(!$p3){return tableau.format.escapeHTML($0);}else{return $0;}}
tab.VizDataUtils.$7=function($p0){if($p0.startsWith('FILTERMAX(')){return true;}else if($p0.startsWith('FILTERMIN(')){return true;}else if($p0.startsWith('FILTERVALUES(')){return true;}return false;}
tab.VizDataUtils.$8=function($p0,$p1,$p2){var $0=new String();if(ss.isValue($p1)&&ss.isValue($p1.get_filterContext())){var $1=$p1.get_filterContext();var $2=null;if($p2==='FILTERMAX'){$2=$1.zp;}else if($p2==='FILTERMIN'){$2=$1.zo;}else if($p2==='FILTERVALUES'){$2=$1.zn;}if(!tab.MiscUtil.isNullOrEmpty($2)){var $3=[];var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $4=$enum1.current;var $5=tab.VizDataLookup.lookupRawDataValueFromIndex($4,$p1,$p0);$3.push($5);}$0=$3.join(',');}}return $0;}
tab.VizDataUtils.$9=function($p0){return (ss.isValue($p0))?$p0.replaceAll('\n','').replaceAll('\r',''):null;}
tab.RangeTransform=function(){}
tab.LinearRangeTransform=function(min,max){tab.LinearRangeTransform.initializeBase(this);if(min<=max){this.$0=min;this.$1=max;}else{this.$0=max;this.$1=min;}}
tab.LinearRangeTransform.prototype={$0:0,$1:0,fractionToValue:function(fract){return this.$0+(fract*(this.$1-this.$0));},valueToFraction:function(value){return (this.$0===this.$1)?0:(value-this.$0)/(this.$1-this.$0);}}
tab.AcceleratingRangeTransform=function(min,max,inflectionFrac1,inflectionVal1,inflectionFrac2,inflectionVal2){tab.AcceleratingRangeTransform.initializeBase(this);if(ss.isNullOrUndefined(inflectionFrac2)&&ss.isValue(inflectionVal2)){inflectionFrac2=inflectionFrac1;inflectionVal2=inflectionVal1;}this.$0=min;this.$1=inflectionFrac1;this.$2=inflectionVal1;this.$3=inflectionFrac2;this.$4=inflectionVal2;var $0=max;var $1=inflectionFrac2;var $2=inflectionVal2;var $3=inflectionVal2/inflectionFrac2;this.a=($2-($3*$1)-$0+$3)/(-($1*$1)+(2*$1)-1);this.b=$3-(2*this.a*$1);this.c=$0-$3+(this.a*((2*$1)-1));}
tab.AcceleratingRangeTransform.prototype={$0:0,$1:0,$2:0,$3:0,$4:0,a:0,b:0,c:0,fractionToValue:function(fract){if(fract<=this.$1){return this.$0+(fract*(this.$2-this.$0)/this.$1);}if(fract<=this.$3){var $0=(this.$4-this.$2)/(this.$3-this.$1);var $1=this.$2-($0*this.$1);return (fract*$0)+$1;}return (this.a*fract*fract)+(this.b*fract)+this.c;},valueToFraction:function(value){if(value<=this.$2){return this.$1*(value-this.$0)/(this.$2-this.$0);}if(value<=this.$4){var $1=(this.$4-this.$2)/(this.$3-this.$1);var $2=this.$2-($1*this.$1);return (value-$2)/$1;}var $0=Math.sqrt((this.b*this.b)-(4*this.a*(this.c-value)));return (-this.b+$0)/(2*this.a);}}
tab.TabResources.registerClass('tab.TabResources');tab.VizUriModel.registerClass('tab.VizUriModel');tab.RepoPathObject.registerClass('tab.RepoPathObject');tab.UriPathStripper.registerClass('tab.UriPathStripper');tab.ApiClientCommands.registerClass('tab.ApiClientCommands');tab.ToolbarClientCommands.registerClass('tab.ToolbarClientCommands');tab.StoryClientCommands.registerClass('tab.StoryClientCommands');tab.UberTipClientCommands.registerClass('tab.UberTipClientCommands');tab.ClientCommand.registerClass('tab.ClientCommand');tab.vqldomain$8.registerClass('tab.vqldomain$8',tab.ClientCommand);tab.FilterClientCommands.registerClass('tab.FilterClientCommands');tab.SheetClientCommands.registerClass('tab.SheetClientCommands');tab.VizClientCommands.registerClass('tab.VizClientCommands');tab.VizRegionRectWrapper.registerClass('tab.VizRegionRectWrapper');tab.vqldomain$4.registerClass('tab.vqldomain$4',null,tab.IRemoteCommandHandler);tab.LegacyClientCommand.registerClass('tab.LegacyClientCommand',tab.ClientCommand);tab.CommandRecord.registerClass('tab.CommandRecord');tab.CommandPermission.registerClass('tab.CommandPermission');tab.CommandSerializer.registerClass('tab.CommandSerializer');tab.CommandsPresModelWrapper.registerClass('tab.CommandsPresModelWrapper');tab.CommandItemWrapper.registerClass('tab.CommandItemWrapper');tab.vqldomain$3.registerClass('tab.vqldomain$3');tab.CompositeClientCommand.registerClass('tab.CompositeClientCommand',tab.ClientCommand);tab.DeferLayoutImpl.registerClass('tab.DeferLayoutImpl',null,tab.IDeferLayout);tab.EventMap.registerClass('tab.EventMap');tab.vqldomain$9.registerClass('tab.vqldomain$9',tab.ClientCommand);tab.PermissionManager.registerClass('tab.PermissionManager');tab.PresentationModel.registerClass('tab.PresentationModel');tab.PresModelPathItem.registerClass('tab.PresModelPathItem');tab.PresModelPath.registerClass('tab.PresModelPath');tab.SimpleCommandsPresModelWrapper.registerClass('tab.SimpleCommandsPresModelWrapper');tab.UbertipSerializer.registerClass('tab.UbertipSerializer');tab.CommandRedirectRegistry.registerClass('tab.CommandRedirectRegistry');tab.Model.registerClass('tab.Model');tab.AnalyticsPaneModel.registerClass('tab.AnalyticsPaneModel',tab.Model);tab.CalculationAutoCompleteItemModel.registerClass('tab.CalculationAutoCompleteItemModel',tab.Model);tab.CalculationAutoCompleteModel.registerClass('tab.CalculationAutoCompleteModel',tab.Model);tab.CalculationFunctionListModel.registerClass('tab.CalculationFunctionListModel',tab.Model);tab.CalculationModel.registerClass('tab.CalculationModel',tab.Model);tab.FilterModel.registerClass('tab.FilterModel',tab.Model);tab.CategoricalFilterModel.registerClass('tab.CategoricalFilterModel',tab.FilterModel);tab.DataDictionaryModel.registerClass('tab.DataDictionaryModel',tab.Model);tab.HierarchicalFilterModel.registerClass('tab.HierarchicalFilterModel',tab.FilterModel);tab.MapServerModel.registerClass('tab.MapServerModel',tab.Model);tab.QuantitativeFilterModel.registerClass('tab.QuantitativeFilterModel',tab.FilterModel);tab.RelativeDateFilterModel.registerClass('tab.RelativeDateFilterModel',tab.FilterModel);tab.CategoricalLegendModel.registerClass('tab.CategoricalLegendModel',tab.Model);tab.ColorModel.registerClass('tab.ColorModel');tab.QuickFilterDisplayModel.registerClass('tab.QuickFilterDisplayModel',tab.Model);tab.ShelvesModel.registerClass('tab.ShelvesModel',tab.Model);tab.ShelfListArrayModel.registerClass('tab.ShelfListArrayModel',tab.Model);tab.StoryPointsModel.registerClass('tab.StoryPointsModel',tab.Model);tab.ColorPaletteCollectionModel.registerClass('tab.ColorPaletteCollectionModel',tab.Model);tab.FlipboardModel.registerClass('tab.FlipboardModel',tab.Model);tab.QuantitativeColorLegendModel.registerClass('tab.QuantitativeColorLegendModel',tab.Model);tab.StoryPointModel.registerClass('tab.StoryPointModel',tab.Model);tab.FieldModel.registerClass('tab.FieldModel',tab.Model);tab.FieldColumnModel.registerClass('tab.FieldColumnModel',tab.FieldModel);tab.GroupModel.registerClass('tab.GroupModel',tab.FieldColumnModel);tab.DrillPathModel.registerClass('tab.DrillPathModel',tab.FieldModel);tab.CubeHierarchyModel.registerClass('tab.CubeHierarchyModel',tab.FieldModel);tab.FolderModel.registerClass('tab.FolderModel',tab.FieldModel);tab.CubeFolderModel.registerClass('tab.CubeFolderModel',tab.FieldModel);tab.CubeDimensionModel.registerClass('tab.CubeDimensionModel',tab.FieldModel);tab.RelationalTableModel.registerClass('tab.RelationalTableModel',tab.FieldModel);tab.MultipleFieldsModel.registerClass('tab.MultipleFieldsModel',tab.FieldModel);tab.FlipboardNavigatorModel.registerClass('tab.FlipboardNavigatorModel',tab.Model);tab.ImageZoneModel.registerClass('tab.ImageZoneModel',tab.Model);tab.ToolbarModel.registerClass('tab.ToolbarModel',tab.Model);tab.WebZoneModel.registerClass('tab.WebZoneModel',tab.Model);tab.LegacyLegendModel.registerClass('tab.LegacyLegendModel',tab.Model);tab.CustomizedView.registerClass('tab.CustomizedView');tab.ParameterCtrlModel.registerClass('tab.ParameterCtrlModel',tab.Model);tab.PageModel.registerClass('tab.PageModel',tab.Model);tab.ViewGeometryModel.registerClass('tab.ViewGeometryModel',tab.Model);tab.SceneModel.registerClass('tab.SceneModel',tab.Model);tab.ProjectModel.registerClass('tab.ProjectModel');tab.Schedule.registerClass('tab.Schedule');tab.SelectionsModel.registerClass('tab.SelectionsModel',tab.Model);tab.SelectionsPresModel.registerClass('tab.SelectionsPresModel',null,tab.IPresentationModel);tab.User.registerClass('tab.User');tab.SortIndicatorsModel.registerClass('tab.SortIndicatorsModel',tab.Model);tab.VisualListModel.registerClass('tab.VisualListModel',tab.Model);tab.VizDataModel.registerClass('tab.VizDataModel',tab.Model);tab.ZoneModel.registerClass('tab.ZoneModel',tab.Model);tab.ZoneContentWrapperModel.registerClass('tab.ZoneContentWrapperModel',tab.Model);tab.ShapeModel.registerClass('tab.ShapeModel');tab.TextRegionModel.registerClass('tab.TextRegionModel',tab.Model);tab.ZonesModel.registerClass('tab.ZonesModel',tab.Model);tab.ExportServerCommands.registerClass('tab.ExportServerCommands');tab.SessionServerCommands.registerClass('tab.SessionServerCommands');tab.ToolbarServerCommands.registerClass('tab.ToolbarServerCommands');tab.ParameterServerCommands.registerClass('tab.ParameterServerCommands');tab.PageServerCommands.registerClass('tab.PageServerCommands');tab.SaveServerCommands.registerClass('tab.SaveServerCommands');tab.SortServerCommands.registerClass('tab.SortServerCommands');tab.WorkgroupServerCommands.registerClass('tab.WorkgroupServerCommands');tab.WorksheetServerCommands.registerClass('tab.WorksheetServerCommands');tab.WorldUpdateServerCommands.registerClass('tab.WorldUpdateServerCommands');tab.PaneClientCommands.registerClass('tab.PaneClientCommands');tab.SchemaClientCommands.registerClass('tab.SchemaClientCommands');tab.SelectionClientCommands.registerClass('tab.SelectionClientCommands');tab.ShelfClientCommands.registerClass('tab.ShelfClientCommands');tab.vqldomain$B.registerClass('tab.vqldomain$B',tab.ClientCommand);tab.CommandController.registerClass('tab.CommandController');tab.vqldomain$2.registerClass('tab.vqldomain$2');tab.vqldomain$A.registerClass('tab.vqldomain$A',tab.ClientCommand);tab.Transactor.registerClass('tab.Transactor');tab.Transaction.registerClass('tab.Transaction');tab.vqldomain$1.registerClass('tab.vqldomain$1');tab.ApplicationModel.registerClass('tab.ApplicationModel',tab.Model);tab.SelectionModel.registerClass('tab.SelectionModel',tab.Model);tab.DataSourceModel.registerClass('tab.DataSourceModel',tab.Model);tab.LayerEncodingModel.registerClass('tab.LayerEncodingModel',tab.Model);tab.MarksCardModel.registerClass('tab.MarksCardModel',tab.Model);tab.MarkSizeModel.registerClass('tab.MarkSizeModel',tab.Model,tab.IContinuousRangeModel);tab.DataSchemaModel.registerClass('tab.DataSchemaModel',tab.Model);tab.PillModel.registerClass('tab.PillModel',tab.Model);tab.ShelfModel.registerClass('tab.ShelfModel',tab.Model);tab.ShelfItemsArrayModel.registerClass('tab.ShelfItemsArrayModel',tab.Model);tab.VisualModel.registerClass('tab.VisualModel',tab.Model);tab.DashboardModel.registerClass('tab.DashboardModel',tab.Model);tab.WorkbookModel.registerClass('tab.WorkbookModel',tab.Model);tab.ServerCommands.registerClass('tab.ServerCommands');tab.BaseSession.registerClass('tab.BaseSession');tab.CustomizedViewSession.registerClass('tab.CustomizedViewSession');tab.DojoCurrentState.registerClass('tab.DojoCurrentState');tab.FailureHandler.registerClass('tab.FailureHandler');tab.LayoutSession.registerClass('tab.LayoutSession',tab.BaseSession);tab.SessionAjaxCallManager.registerClass('tab.SessionAjaxCallManager');tab.SessionAjaxHandler.registerClass('tab.SessionAjaxHandler');tab.SheetSession.registerClass('tab.SheetSession',tab.BaseSession);tab.ViewSession.registerClass('tab.ViewSession',tab.SheetSession);tab.WaitHandler.registerClass('tab.WaitHandler');tab.BrushingComputer.registerClass('tab.BrushingComputer');tab.CategoricalFilterData.registerClass('tab.CategoricalFilterData');tab.Changelist.registerClass('tab.Changelist');tab.RawChange.registerClass('tab.RawChange');tab.CompiledChecklistChangelist.registerClass('tab.CompiledChecklistChangelist');tab.CompiledRadiolistChangelist.registerClass('tab.CompiledRadiolistChangelist');tab.CommandUtils.registerClass('tab.CommandUtils');tab.ActionUtils.registerClass('tab.ActionUtils');tab.InvalidationInfo.registerClass('tab.InvalidationInfo');tab.LocalUbertipInfo.registerClass('tab.LocalUbertipInfo');tab.ModelUtils.registerClass('tab.ModelUtils');tab.QuantitativeFilterData.registerClass('tab.QuantitativeFilterData');tab.ShapeManager.registerClass('tab.ShapeManager');tab.WorkbookViewObjectUtils.registerClass('tab.WorkbookViewObjectUtils');tab.XhrUtil.registerClass('tab.XhrUtil');tab.UndoList.registerClass('tab.UndoList');tab.CalculationCommands.registerClass('tab.CalculationCommands');tab.CalcApplyResponse.registerClass('tab.CalcApplyResponse');tab.CommandsModel.registerClass('tab.CommandsModel',tab.Model);tab.vqldomain$6.registerClass('tab.vqldomain$6');tab.SceneUtils.registerClass('tab.SceneUtils');tab.vqldomain$5.registerClass('tab.vqldomain$5');tab.vqldomain$7.registerClass('tab.vqldomain$7');tab.SelectionUtils.registerClass('tab.SelectionUtils');tab.StartupUtils.registerClass('tab.StartupUtils');tab.SubscriptionDisposable.registerClass('tab.SubscriptionDisposable',null,ss.IDisposable);tab.VizDataField.registerClass('tab.VizDataField');tab.VizDataLookup.registerClass('tab.VizDataLookup');tab.VizDataUtils.registerClass('tab.VizDataUtils');tab.RangeTransform.registerClass('tab.RangeTransform');tab.LinearRangeTransform.registerClass('tab.LinearRangeTransform',tab.RangeTransform);tab.AcceleratingRangeTransform.registerClass('tab.AcceleratingRangeTransform',tab.RangeTransform);tab.TabResources.$0={};(function(){tab.TabResources.$0['TQRC_DRILL_DOWN']='others/DrillDown.png';tab.TabResources.$0['TQRC_DRILL_UP']='others/DrillUp.png';tab.TabResources.$0['TQRC_EXCLUDE']='others/Exclude.png';tab.TabResources.$0['TQRC_EXCLUDE_2X']='others/Exclude@2x.png';tab.TabResources.$0['TQRC_KEEP_ONLY']='others/KeepOnly.png';tab.TabResources.$0['TQRC_KEEP_ONLY_2X']='others/KeepOnly@2x.png';tab.TabResources.$0['TQRC_MERGE']='others/Merge.png';tab.TabResources.$0['TQRC_MERGE_2X']='others/Merge@2x.png';tab.TabResources.$0['TQRC_VIEWDATA']='others/ViewData.png';tab.TabResources.$0['TQRC_SORT_ASCENDING']='others/SortAscending.png';tab.TabResources.$0['TQRC_SORT_ASCENDING_2X']='others/SortAscending@2x.png';tab.TabResources.$0['TQRC_SORT_DESCENDING']='others/SortDescending.png';tab.TabResources.$0['TQRC_SORT_DESCENDING_2X']='others/SortDescending@2x.png';tab.TabResources.$0['TQRC_SPLIT']='others/Split.png';tab.TabResources.$0['TQRC_SPLIT_2X']='others/Split@2x.png';tab.TabResources.$0['TQRC_SHOWME_BIN']='showme/bin.png';tab.TabResources.$0['TQRC_SHOWME_BIN_2X']='showme/bin@2x.png';tab.TabResources.$0['TQRC_SHOWME_CLOSE']='showme/close.png';tab.TabResources.$0['TQRC_SHOWME_CLOSE_2X']='showme/close@2x.png';tab.TabResources.$0['TQRC_SHOWME_DATE']='showme/date.png';tab.TabResources.$0['TQRC_SHOWME_DATE_2X']='showme/date@2x.png';tab.TabResources.$0['TQRC_SHOWME_GEO']='showme/geo.png';tab.TabResources.$0['TQRC_SHOWME_GEO_2X']='showme/geo@2x.png';tab.TabResources.$0['TQRC_SHOWME_GLOW']='showme/glow.png';tab.TabResources.$0['TQRC_SHOWME_GLOW_2X']='showme/glow@2x.png';tab.TabResources.$0['TQRC_SHOWME_GRIPPER']='showme/gripper.png';tab.TabResources.$0['TQRC_SHOWME_GRIPPER_2X']='showme/gripper@2x.png';tab.TabResources.$0['TQRC_SHOWME_SHOWME']='showme/showme.png';tab.TabResources.$0['TQRC_SHOWME_SHOWME_2X']='showme/showme@2x.png';tab.TabResources.$0['TQRC_SHOWME_TITLE_BACKGROUND_HOVER']='showme/title-background-hover.png';tab.TabResources.$0['TQRC_SHOWME_TITLE_BACKGROUND_HOVER_2X']='showme/Title-background-hover@2x.png';tab.TabResources.$0['TQRC_SHOWME_TITLE_BACKGROUND_REST']='showme/title-background-rest.png';tab.TabResources.$0['TQRC_SHOWME_TITLE_BACKGROUND_REST_2X']='showme/Title-background-rest@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_BARSTACKED']='showme/enabled/BarStacked.png';tab.TabResources.$0['TQRC_SHOWME_1_BARSIDEBY']='showme/enabled/BarSideBySide.png';tab.TabResources.$0['TQRC_SHOWME_1_BARHORIZONTAL']='showme/enabled/BarHorizontal.png';tab.TabResources.$0['TQRC_SHOWME_1_BARLINE']='showme/enabled/BarLine.png';tab.TabResources.$0['TQRC_SHOWME_1_CIRCLE']='showme/enabled/Circle.png';tab.TabResources.$0['TQRC_SHOWME_1_CIRCLESIDEBYSIDE']='showme/enabled/CircleSideBySide.png';tab.TabResources.$0['TQRC_SHOWME_1_GANTT']='showme/enabled/Gantt.png';tab.TabResources.$0['TQRC_SHOWME_1_HEATMAP']='showme/enabled/HeatMap.png';tab.TabResources.$0['TQRC_SHOWME_1_HISTOGRAM']='showme/enabled/Histogram.png';tab.TabResources.$0['TQRC_SHOWME_1_LINEDIM']='showme/enabled/LineDimension.png';tab.TabResources.$0['TQRC_SHOWME_1_LINEMEAS']='showme/enabled/LineMeasure.png';tab.TabResources.$0['TQRC_SHOWME_1_AREAMEAS']='showme/enabled/FilledLineContinuous.png';tab.TabResources.$0['TQRC_SHOWME_1_AREADIM']='showme/enabled/FilledLineDiscrete.png';tab.TabResources.$0['TQRC_SHOWME_1_SCATSING']='showme/enabled/ScatterSingle.png';tab.TabResources.$0['TQRC_SHOWME_1_TEXTTABLE']='showme/enabled/TextTable.png';tab.TabResources.$0['TQRC_SHOWME_1_SPOTTABLE']='showme/enabled/SpotTable.png';tab.TabResources.$0['TQRC_SHOWME_1_MAPS']='showme/enabled/Maps.png';tab.TabResources.$0['TQRC_SHOWME_1_FILLEDMAPS']='showme/enabled/FilledMaps.png';tab.TabResources.$0['TQRC_SHOWME_1_PIES']='showme/enabled/Pies.png';tab.TabResources.$0['TQRC_SHOWME_1_DUALLINE']='showme/enabled/DualAxis.png';tab.TabResources.$0['TQRC_SHOWME_1_BULLET']='showme/enabled/Bullet.png';tab.TabResources.$0['TQRC_SHOWME_1_TREEMAP']='showme/enabled/Treemap.png';tab.TabResources.$0['TQRC_SHOWME_1_BUBBLE']='showme/enabled/Bubble.png';tab.TabResources.$0['TQRC_SHOWME_1_BOXPLOT']='showme/enabled/Boxplot.png';tab.TabResources.$0['TQRC_SHOWME_1_BARSTACKED_2X']='showme/enabled/BarStacked@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_BARSIDEBY_2X']='showme/enabled/BarSideBySide@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_BARHORIZONTAL_2X']='showme/enabled/BarHorizontal@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_BARLINE_2X']='showme/enabled/BarLine@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_CIRCLE_2X']='showme/enabled/Circle@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_CIRCLESIDEBYSIDE_2X']='showme/enabled/CircleSideBySide@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_GANTT_2X']='showme/enabled/Gantt@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_HEATMAP_2X']='showme/enabled/HeatMap@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_HISTOGRAM_2X']='showme/enabled/Histogram@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_LINEDIM_2X']='showme/enabled/LineDimension@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_LINEMEAS_2X']='showme/enabled/LineMeasure@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_AREAMEAS_2X']='showme/enabled/FilledLineContinuous@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_AREADIM_2X']='showme/enabled/FilledLineDiscrete@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_SCATSING_2X']='showme/enabled/ScatterSingle@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_TEXTTABLE_2X']='showme/enabled/TextTable@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_SPOTTABLE_2X']='showme/enabled/SpotTable@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_MAPS_2X']='showme/enabled/Maps@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_FILLEDMAPS_2X']='showme/enabled/FilledMaps@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_PIES_2X']='showme/enabled/Pies@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_DUALLINE_2X']='showme/enabled/DualAxis@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_BULLET_2X']='showme/enabled/Bullet@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_TREEMAP_2X']='showme/enabled/Treemap@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_BUBBLE_2X']='showme/enabled/Bubble@2x.png';tab.TabResources.$0['TQRC_SHOWME_1_BOXPLOT_2X']='showme/enabled/Boxplot@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_BARSTACKED']='showme/disabled/BarStacked.png';tab.TabResources.$0['TQRC_SHOWME_0_BARSIDEBY']='showme/disabled/BarSideBySide.png';tab.TabResources.$0['TQRC_SHOWME_0_BARHORIZONTAL']='showme/disabled/BarHorizontal.png';tab.TabResources.$0['TQRC_SHOWME_0_BARLINE']='showme/disabled/BarLine.png';tab.TabResources.$0['TQRC_SHOWME_0_CIRCLE']='showme/disabled/Circle.png';tab.TabResources.$0['TQRC_SHOWME_0_CIRCLESIDEBYSIDE']='showme/disabled/CircleSideBySide.png';tab.TabResources.$0['TQRC_SHOWME_0_GANTT']='showme/disabled/Gantt.png';tab.TabResources.$0['TQRC_SHOWME_0_HEATMAP']='showme/disabled/HeatMap.png';tab.TabResources.$0['TQRC_SHOWME_0_HISTOGRAM']='showme/disabled/Histogram.png';tab.TabResources.$0['TQRC_SHOWME_0_LINEDIM']='showme/disabled/LineDimension.png';tab.TabResources.$0['TQRC_SHOWME_0_LINEMEAS']='showme/disabled/LineMeasure.png';tab.TabResources.$0['TQRC_SHOWME_0_AREAMEAS']='showme/disabled/FilledLineContinuous.png';tab.TabResources.$0['TQRC_SHOWME_0_AREADIM']='showme/disabled/FilledLineDiscrete.png';tab.TabResources.$0['TQRC_SHOWME_0_SCATSING']='showme/disabled/ScatterSingle.png';tab.TabResources.$0['TQRC_SHOWME_0_TEXTTABLE']='showme/disabled/TextTable.png';tab.TabResources.$0['TQRC_SHOWME_0_SPOTTABLE']='showme/disabled/SpotTable.png';tab.TabResources.$0['TQRC_SHOWME_0_MAPS']='showme/disabled/Maps.png';tab.TabResources.$0['TQRC_SHOWME_0_FILLEDMAPS']='showme/disabled/FilledMaps.png';tab.TabResources.$0['TQRC_SHOWME_0_PIES']='showme/disabled/Pies.png';tab.TabResources.$0['TQRC_SHOWME_0_DUALLINE']='showme/disabled/DualAxis.png';tab.TabResources.$0['TQRC_SHOWME_0_BULLET']='showme/disabled/Bullet.png';tab.TabResources.$0['TQRC_SHOWME_0_TREEMAP']='showme/disabled/Treemap.png';tab.TabResources.$0['TQRC_SHOWME_0_BUBBLE']='showme/disabled/Bubble.png';tab.TabResources.$0['TQRC_SHOWME_0_BOXPLOT']='showme/disabled/Boxplot.png';tab.TabResources.$0['TQRC_SHOWME_0_BARSTACKED_2X']='showme/disabled/BarStacked@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_BARSIDEBY_2X']='showme/disabled/BarSideBySide@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_BARHORIZONTAL_2X']='showme/disabled/BarHorizontal@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_BARLINE_2X']='showme/disabled/BarLine@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_CIRCLE_2X']='showme/disabled/Circle@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_CIRCLESIDEBYSIDE_2X']='showme/disabled/CircleSideBySide@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_GANTT_2X']='showme/disabled/Gantt@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_HEATMAP_2X']='showme/disabled/HeatMap@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_HISTOGRAM_2X']='showme/disabled/Histogram@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_LINEDIM_2X']='showme/disabled/LineDimension@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_LINEMEAS_2X']='showme/disabled/LineMeasure@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_AREAMEAS_2X']='showme/disabled/FilledLineContinuous@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_AREADIM_2X']='showme/disabled/FilledLineDiscrete@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_SCATSING_2X']='showme/disabled/ScatterSingle@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_TEXTTABLE_2X']='showme/disabled/TextTable@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_SPOTTABLE_2X']='showme/disabled/SpotTable@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_MAPS_2X']='showme/disabled/Maps@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_FILLEDMAPS_2X']='showme/disabled/FilledMaps@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_PIES_2X']='showme/disabled/Pies@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_DUALLINE_2X']='showme/disabled/DualAxis@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_BULLET_2X']='showme/disabled/Bullet@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_TREEMAP_2X']='showme/disabled/Treemap@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_BUBBLE_2X']='showme/disabled/Bubble@2x.png';tab.TabResources.$0['TQRC_SHOWME_0_BOXPLOT_2X']='showme/disabled/Boxplot@2x.png';tab.TabResources.$0['TQRC_TREE_MINUS']='others/TreeMinus.png';tab.TabResources.$0['TQRC_TREE_MINUS_2X']='others/TreeMinus@2x.png';tab.TabResources.$0['TQRC_TREE_PLUS']='others/TreePlus.png';tab.TabResources.$0['TQRC_TREE_PLUS_2X']='others/TreePlus@2x.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_DROP_TABLE']='analyticspane/drop/table.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_DROP_PANE']='analyticspane/drop/pane.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_DROP_CELL']='analyticspane/drop/cell.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_DROP_LINEAR']='analyticspane/drop/trend-linear.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_DROP_POLY']='analyticspane/drop/trend-polynomial.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_DROP_LOG']='analyticspane/drop/trend-logarithmic.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_DROP_EXP']='analyticspane/drop/trend-exponential.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_DROP_SUBTOTAL']='analyticspane/drop/sub-total.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_DROP_COLUMN']='analyticspane/drop/column-total.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_DROP_ROW']='analyticspane/drop/row-total.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_DROP_FORECAST']='analyticspane/drop/forecast.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_REFLINE']='analyticspane/refline.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_REFBAND']='analyticspane/refband.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_DISTBAND']='analyticspane/distband.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_BOXPLOT']='analyticspane/boxplot.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_TOTAL']='analyticspane/total.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_TRENDLINE']='analyticspane/trendline.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_95ANDMEDIAN']='analyticspane/95andmedian.png';tab.TabResources.$0['TQRC_ANALYTICSPANE_FORECAST']='analyticspane/forecast.png';})();
tab.VizUriModel.$B={authoring:2,authoringNewWorkbook:3,views:1,'vizql/showadminview':4,shared:5};tab.VizUriModel.$C=[':bootstrapWhenNotified'];tab.VizUriModel.$D={};tab.VizUriModel.$E={};(function(){var $0=function($p1_0,$p1_1){
for(var $1_0=$p1_0;$1_0<=$p1_1;$1_0++){var $1_1=String.fromCharCode($1_0);tab.VizUriModel.$E[$1_1]=$1_1;}};$0(97,122);$0(64,90);$0(48,57);$0(95,95);$0(45,46);})();
tab.CommandSerializer.$0={};(function(){tab.CommandSerializer.$0['keep-only-or-exclude']=2;tab.CommandSerializer.$0['quick-sort']=4;tab.CommandSerializer.$0['clear-sorts']=6;tab.CommandSerializer.$0['run-action']=8;tab.CommandSerializer.$0['load-url']=9;tab.CommandSerializer.$0['merge-or-split']=10;tab.CommandSerializer.$0['legend-group-or-ungroup']=13;tab.CommandSerializer.$0['label-drill']=11;tab.CommandSerializer.$0['level-drill']=12;tab.CommandSerializer.$0['remove-reference-line']=15;tab.CommandSerializer.$0['show-reference-line-constant-value-editor']=21;tab.CommandSerializer.$0['trend-lines']=17;tab.CommandSerializer.$0['show-col-totals']=18;tab.CommandSerializer.$0['show-row-totals']=18;tab.CommandSerializer.$0['remove-subtotals']=18;tab.CommandSerializer.$0['set-totals-type']=19;tab.CommandSerializer.$0['set-reference-line-formula']=20;})();
tab.DeferLayoutImpl.$0=null;tab.EventMap.onTabSelect='onTabSelect';tab.EventMap.onDoLaunchAuthoring='onDoLaunchAuthoring';tab.EventMap.newGuid='newGuid';tab.EventMap.newLayoutId='newLayoutId';tab.EventMap.activeViewChanged='activeViewChanged';tab.EventMap.invalidate='invalidate';tab.EventMap.hoverChanged='hoverChanged';tab.EventMap.stateChanged='stateChanged';tab.EventMap.layoutUpdated='layoutUpdated';tab.EventMap.refreshLayoutModel='refreshLayoutModel';tab.EventMap.sheetDataChanged='sheetDataChanged';tab.EventMap.refreshSheetInfo='refreshSheetInfo';tab.EventMap.refreshFilterModel='refreshFilterModel';tab.EventMap.viewChanged='viewChanged';tab.EventMap.refreshVisualModel='refreshVisualModel';tab.EventMap.refreshLegacyLegendImages='refreshLegacyLegendImages';tab.EventMap.refreshMenuModel='refreshMenuModel';tab.EventMap.selectionChanged='selectionChanged';tab.EventMap.fieldSelectionChanged='fieldSelectionChanged';tab.EventMap.onBootstrapSuccess='onBootstrapSuccess';tab.EventMap.openActionUrl='openActionUrl';tab.EventMap.modifierKeysChanged='modifierKeysChanged';tab.EventMap.closeMenus='close-menus';tab.EventMap.$0={};(function(){var $0=0;var $enum1=ss.IEnumerator.getEnumerator(Object.keys((tab.EventName).prototype));while($enum1.moveNext()){var $1=$enum1.current;tab.EventMap.$0[$1]=$0++;}})();
tab.UbertipSerializer.$0=['<span style="white-space:pre"><div class="uberSelection"style="text-align:center;"><span>&nbsp;&nbsp;</span>','<span style="font-weight:bold;">','','</span><span> ','','  </span><span>','\u00b7','  </span><span>','',' </span><span>','','</span><span>',': ','</span><span style="font-weight:bold;">','','</span><span>&nbsp;&nbsp;','</span></div></span>'];tab.UbertipSerializer.$1=['<div class="uberSelection"style="text-align:center;"><span></span>','<span style="font-weight:bold;"> ','',' </span><span>','','</span><div> '];tab.CommandRedirectRegistry.$0=null;tab.ColorModel.$1=new tab.ColorModel(255,255,255,1);tab.ColorModel.$2=new RegExp('#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})','i');tab.ColorModel.$3=new RegExp('rgb\\((\\d+),(\\d+),(\\d+)\\)','i');tab.ColorModel.$4=new RegExp('rgba\\((\\d+), ?(\\d+), ?(\\d+), ?(\\d+|0\\.\\d+|1\\.0)\\)','i');tab.FieldModel.nameOfMeasuresColumn=':Measure Names';tab.FieldModel.nameOfMeasureValuesColumn='Multiple Values';tab.SceneModel.$6=new tab.ColorModel(0,0,0,1);tab.Schedule.extract=0;tab.Schedule.subscription=1;tab.VizDataModel.tupleIdColumnName='[system:visual].[tuple_id]';tab.VizDataModel.measureNamesColumnName='[:Measure Names]';tab.ZoneModel.$6='at5';tab.ZoneModel.$7='axz';tab.ZoneModel.$8='axy';tab.ZoneModel.$9='asf';tab.ZoneModel.$A='ar5';tab.ZoneModel.$B='asb';tab.ZoneModel.$C='ar8';tab.ZoneModel.$D='ase';tab.ZoneModel.$E='ao2';tab.ZoneModel.$F='ao4';tab.ZoneModel.$10='ash';tab.ZoneModel.$11='axv';tab.ZoneModel.$12='axw';tab.ZoneModel.$13='asi';tab.ZoneModel.$14='aze';tab.ZoneModel.$15='azl';tab.ToolbarServerCommands.$0=new RegExp('^https?://[^/]+(.*)$');tab.SelectionClientCommands.$0=null;(function(){tab.SelectionClientCommands.$0={};tab.SelectionClientCommands.$0['simple']='select-options-simple';tab.SelectionClientCommands.$0['toggle']='select-options-toggle';tab.SelectionClientCommands.$0['range']='select-options-range';tab.SelectionClientCommands.$0['menu']='select-options-menu';})();
tab.CommandController.$1=false;tab.CommandController.$2=false;tab.CommandController.$3=false;tab.CommandController.$4=null;tab.ApplicationModel.$6=null;tab.ServerCommands.$0={};tab.BaseSession.linkTarget=null;tab.BaseSession.autoUpdate=true;tab.BaseSession.$0=false;tab.BaseSession.$1=null;tab.BaseSession.$2=null;tab.BaseSession.$3=0;tab.BaseSession.$4=null;(function(){tab.BaseSession.$2={'%25':new RegExp('%','g'),'%3B':new RegExp(';','g'),'%2C':new RegExp(',','g'),'%2E':new RegExp('\\.','g'),'%2F':new RegExp('\\/','g'),'%3F':new RegExp('\\?','g'),'%2B':new RegExp('\\+','g'),'%20':new RegExp(' ','g'),'%5C':new RegExp('\\\\','g')};})();
tab.CustomizedViewSession.$5=tab.Logger.getLogger(tab.CustomizedViewSession);tab.FailureHandler.$2=0;(function(){if((typeof tsConfig === 'undefined')){return;}var $0=tsConfig.clientErrorReportingLevel;if(!String.isNullOrEmpty($0)){tab.ErrorTrace.install();tab.FailureHandler.$2=window.setInterval(tab.FailureHandler.reportFailures,5000);}})();
tab.ActionUtils.$0=['http:','https:','mailto:','news:','gopher:','tsc:','tsl:'];tab.ActionUtils.$1=false;tab.ActionUtils.$2=false;tab.ModelUtils.visualPartToRegionMap=null;tab.ModelUtils.regionToVisualPartMap=null;tab.ModelUtils.$0=null;(function(){tab.ModelUtils.visualPartToRegionMap={};tab.ModelUtils.visualPartToRegionMap['left-axis']='leftaxis';tab.ModelUtils.visualPartToRegionMap['right-axis']='rightaxis';tab.ModelUtils.visualPartToRegionMap['top-axis']='topaxis';tab.ModelUtils.visualPartToRegionMap['bottom-axis']='bottomaxis';tab.ModelUtils.visualPartToRegionMap['y-labels']='yheader';tab.ModelUtils.visualPartToRegionMap['x-labels']='xheader';tab.ModelUtils.regionToVisualPartMap={};tab.ModelUtils.regionToVisualPartMap['leftaxis']='left-axis';tab.ModelUtils.regionToVisualPartMap['rightaxis']='right-axis';tab.ModelUtils.regionToVisualPartMap['topaxis']='top-axis';tab.ModelUtils.regionToVisualPartMap['bottomaxis']='bottom-axis';tab.ModelUtils.regionToVisualPartMap['yheader']='y-labels';tab.ModelUtils.regionToVisualPartMap['xheader']='x-labels';})();
tab.ShapeManager.selectionBorderSize=1;tab.XhrUtil.guid='';tab.XhrUtil.parentID='';tab.XhrUtil.$0='';tab.Model.$1=null;tab.Model.$2=null;(function(){tab.CalculationCommands.registerCommandInterceptors();})();
tab.SceneUtils.blackColor=null;(function(){var $0=new tab.ColorModel(0,0,0,1).toRgba();tab.SceneUtils.blackColor={};tab.SceneUtils.blackColor['colorOverrideNone']=$0;tab.SceneUtils.blackColor['colorOverrideFog']=$0;tab.SceneUtils.blackColor['colorOverrideOpaque']=$0;})();
tab.VizDataUtils.unknownFieldMarker='~~~???~~~';tab.VizDataUtils.noLocalSummary='...';tab.VizDataUtils.invalidTupleId=0;}());// This script was generated using Script# v0.7.4.0
// spiffui.js
(function(){
Type.registerNamespace('spiff');spiff.$create_DropResult=function(drag,target,dropAccepted,canceled,ctrlKeyPressed){var $o={};$o.drag=drag;$o.target=target;$o.dropAccepted=dropAccepted;$o.canceled=canceled;$o.isCopyDrop=ctrlKeyPressed;return $o;}
spiff.IDragResponder=function(){};spiff.IDragResponder.registerInterface('spiff.IDragResponder');spiff.IDragSource=function(){};spiff.IDragSource.registerInterface('spiff.IDragSource');spiff.IDropTarget=function(){};spiff.IDropTarget.registerInterface('spiff.IDropTarget');spiff.DocumentBodySizeUsage=function(){};spiff.DocumentBodySizeUsage.prototype = {useScrollSize:'useScrollSize',useClientSize:'useClientSize'}
spiff.DocumentBodySizeUsage.registerEnum('spiff.DocumentBodySizeUsage',false);spiff.$create_EventHandleSpec=function(){var $o={};return $o;}
spiff.$create_GestureEventInfo=function(){var $o={};return $o;}
spiff.EventSource=function(){};spiff.EventSource.prototype = {mouse:1,touch:2}
spiff.EventSource.registerEnum('spiff.EventSource',false);spiff.IMouseCaptureEventHandler=function(){};spiff.IMouseCaptureEventHandler.registerInterface('spiff.IMouseCaptureEventHandler');spiff.IScrollable=function(){};spiff.IScrollable.registerInterface('spiff.IScrollable');spiff.$create_VisibleRoom=function(roomAbove,roomBelow,roomLeft,roomRight){var $o={};$o.roomAbove=roomAbove;$o.roomBelow=roomBelow;$o.roomLeft=roomLeft;$o.roomRight=roomRight;return $o;}
spiff.IUberPopupContent=function(){};spiff.IUberPopupContent.registerInterface('spiff.IUberPopupContent');spiff.MenuItemCheckState=function(){};spiff.MenuItemCheckState.prototype = {none:0,check:1,radio:2}
spiff.MenuItemCheckState.registerEnum('spiff.MenuItemCheckState',false);spiff.ISelectable=function(){};spiff.ISelectable.registerInterface('spiff.ISelectable');spiff.UberPopupMode=function(){};spiff.UberPopupMode.prototype = {closeOnExternalInteraction:0,ignoreExternalInteraction:1}
spiff.UberPopupMode.registerEnum('spiff.UberPopupMode',false);spiff.UberPopupHorizontalAlign=function(){};spiff.UberPopupHorizontalAlign.prototype = {left:0,center:1,right:2}
spiff.UberPopupHorizontalAlign.registerEnum('spiff.UberPopupHorizontalAlign',false);spiff.UberPopupRelativeViewportEdge=function(){};spiff.UberPopupRelativeViewportEdge.prototype = {left:0,right:1}
spiff.UberPopupRelativeViewportEdge.registerEnum('spiff.UberPopupRelativeViewportEdge',false);spiff.UberPopupTheme=function(){};spiff.UberPopupTheme.prototype = {standard:0,minimalist:1}
spiff.UberPopupTheme.registerEnum('spiff.UberPopupTheme',false);spiff.ButtonSize=function(){};spiff.ButtonSize.prototype = {medium:1,large:2}
spiff.ButtonSize.registerEnum('spiff.ButtonSize',false);spiff.ICompositeSearchWidgetTemplate=function(){};spiff.ICompositeSearchWidgetTemplate.registerInterface('spiff.ICompositeSearchWidgetTemplate');spiff.ITextInputViewTemplate=function(){};spiff.ITextInputViewTemplate.registerInterface('spiff.ITextInputViewTemplate');spiff.IScroller=function(){};spiff.IScroller.registerInterface('spiff.IScroller');spiff.ITabControlTemplate=function(){};spiff.ITabControlTemplate.registerInterface('spiff.ITabControlTemplate');spiff.IListViewTemplate=function(){};spiff.IListViewTemplate.registerInterface('spiff.IListViewTemplate');spiff.spiffui$0=function(){};spiff.spiffui$0.registerInterface('spiff.spiffui$0');spiff.Dialog=function(titleUnescaped,body){spiff.Dialog.initializeBase(this,[$("\n<div class='tab-dialog'>\n  <div class='tab-dialogTitleBar'>\n    <span class='tab-dialogTitle' />\n    <div class='tab-dialogCloseButton'></div>\n  </div>\n  <div class='tab-dialogBodyContainer'></div>\n  <div class='tab-dialogResizer tab-icon-cv-resize-se'><div class='tab-dialogResizerHit'/></div>\n</div>\n")]);this.set_titleUnescaped(titleUnescaped);this.set_body(body);this.$14=spiff.LabelButton.newNativeButton();this.$14.add_click(ss.Delegate.create(this,this.$26));this.get_element().find('.tab-dialogCloseButton').append(this.$14.get_element());this.$14.tabIndex(-2);this.$10=this.get_element();this.$11=this.get_element().find('.tab-dialogTitleBar');this.$12=this.get_element().find('.tab-dialogResizer');this.set_resizeable(false);this.$10.attr('tabIndex','-1');}
spiff.Dialog.prototype={$10:null,$11:null,$12:null,$13:null,$14:null,$15:false,$16:false,$17:true,$18:null,$19:null,$1A:0,$1B:0,$1C:0,$1D:0,$1E:null,add_closing:function(value){this.$1F=ss.Delegate.combine(this.$1F,value);},remove_closing:function(value){this.$1F=ss.Delegate.remove(this.$1F,value);},$1F:null,add_closed:function(value){this.$20=ss.Delegate.combine(this.$20,value);},remove_closed:function(value){this.$20=ss.Delegate.remove(this.$20,value);},$20:null,add_resizeEnd:function(value){this.$21=ss.Delegate.combine(this.$21,value);},remove_resizeEnd:function(value){this.$21=ss.Delegate.remove(this.$21,value);},$21:null,get_body:function(){return this.$13;},set_body:function(value){if(this.$13===value){return;}if(ss.isValue(this.$13)){this.$13.unbind(this.get_eventNamespace());}this.$13=value;this.get_element().find('.tab-dialogBodyContainer').html('').append(value);this.setInitialFocus();return value;},get_position:function(){return tab.$create_Point(this.$1C,this.$1D);},set_position:function(value){this.$1C=value.x;this.$1D=value.y;tab.DomUtil.setElementPosition(this.$10,this.$1C,this.$1D,null,false);this.$10.css('position','fixed');return value;},get_draggable:function(){return ss.isValue(this.$18);},get_resizeable:function(){return ss.isValue(this.$19);},set_resizeable:function(value){if(value){if(ss.isNullOrUndefined(this.$19)){this.$19=new spiff.ResizeDragSource(this.$12,this.$10,'bottomRight');this.$19.add_endAction(ss.Delegate.create(this,this.$24));}this.$12.show();this.$10.addClass('resizeable');}else{if(ss.isValue(this.$19)){this.$19.remove_endAction(ss.Delegate.create(this,this.$24));this.$19.dispose();this.$19=null;}this.$12.hide();this.$10.removeClass('resizeable');}return value;},get_zIndex:function(){return tab.DomUtil.getComputedZIndex(this.get_element()[0]);},set_zIndex:function(value){this.get_element().css('z-index',value.toString());return value;},get_horizOffset:function(){return this.$1A;},set_horizOffset:function(value){this.$1A=value;return value;},get_vertOffset:function(){return this.$1B;},set_vertOffset:function(value){this.$1B=value;return value;},get_titleUnescaped:function(){return this.get_element().find('.tab-dialogTitle').text();},set_titleUnescaped:function(value){this.get_element().find('.tab-dialogTitle').text(value);return value;},get_isShown:function(){return this.$15;},get_setFocusOnShow:function(){return this.$17;},set_setFocusOnShow:function(value){this.$17=value;return value;},get_closeButton:function(){return this.$14;},get_closeButtonVisible:function(){return this.get_element().find('.tab-dialogCloseButton').is(':visible');},set_closeButtonVisible:function(value){if(value){this.get_element().find('.tab-dialogCloseButton').show();}else{this.get_element().find('.tab-dialogCloseButton').hide();}return value;},get_useClosingAnimation:function(){return this.$16;},set_useClosingAnimation:function(value){this.$16=value;return value;},get_dialogElement:function(){return this.$10;},get_titleBarElement:function(){return this.$11;},get_resizerElement:function(){return this.$12;},configMoveDragSource:function(factory){if(ss.isValue(this.$18)){throw new Error('dialog can only be configured once.');}this.$18=factory(this);if(ss.isValue(this.$18)){this.$18.add_endAction(ss.Delegate.create(this,this.$25));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$18.remove_endAction(ss.Delegate.create(this,this.$25));this.$18.dispose();})));}},show:function(){this.ensureAttachedAndSized();this.get_element().show();this.$15=true;if(this.get_setFocusOnShow()){this.setInitialFocus();}},close:function(callbackWhenClosed){if(!this.get_isShown()){if(ss.isValue(callbackWhenClosed)){callbackWhenClosed();}return;}var $0=new ss.CancelEventArgs();this.onClosing($0);if($0.cancel){return;}this.$1E=callbackWhenClosed;if(this.get_useClosingAnimation()){this.get_element().fadeOut('fast',ss.Delegate.create(this,this.$22));}else{this.get_element().hide();this.$22();}},closeAndDispose:function(){this.close(ss.Delegate.create(this,function(){
this.dispose();}));},$22:function(){this.detach();if(ss.isValue(this.$1E)){this.$1E();this.$1E=null;}this.onClosed(new ss.EventArgs());},onClosing:function(e){if(ss.isValue(this.$1F)){this.$1F(this,e);}},onClosed:function(e){if(ss.isValue(this.$20)){this.$20(this,e);}},isAttached:function(){return this.get_element().parent().get(0)===document.body;},ensureAttachedAndSized:function(){if(this.isAttached()){return;}this.get_element().appendTo(document.body);this.positionInWindow();this.bindToEvents();},bindToEvents:function(){this.get_element().bind(this.createNamespacedEventName('keydown'),ss.Delegate.create(this,this.onKeyDown));},unbindEvents:function(){this.get_element().unbind(this.get_eventNamespace());},detach:function(){this.$15=false;this.get_element().hide();this.get_element().detach();this.unbindEvents();},dispose:function(){if(ss.isValue(this.$14)){this.$14.remove_click(ss.Delegate.create(this,this.$26));this.$14.dispose();this.$14=null;}if(ss.isValue(this.$19)){this.$19.remove_endAction(ss.Delegate.create(this,this.$24));this.$19.dispose();this.$19=null;}this.$15=false;this.$20=null;this.$1F=null;this.unbindEvents();spiff.Dialog.callBaseMethod(this, 'dispose');},setInitialFocus:function(){if(this.$15){var $0=this.get_element().find('.tab-dialogBodyContainer'+' :tabbable');if($0.length>0){$0.eq(0).focus();}else{this.$10.eq(0).focus();}}},ensureOnScreen:function(){if(!this.get_isShown()){return;}spiff.SpiffBrowserViewport.getViewport(ss.Delegate.create(this,function($p1_0){
var $1_0=this.$10.outerWidth(true);var $1_1=this.$10.outerHeight(true);var $1_2=null;if((this.$1C+$1_0)>$p1_0.get_dimensions().w){$1_2=Math.max(0,$p1_0.get_dimensions().w-$1_0);}var $1_3=null;if((this.$1D+$1_1)>$p1_0.get_dimensions().h){$1_3=Math.max(0,$p1_0.get_dimensions().h-$1_1);}if(ss.isValue($1_2)||ss.isValue($1_3)){$1_2=$1_2||this.$1C;$1_3=$1_3||this.$1D;this.set_position(tab.$create_Point($1_2,$1_3));}}));},positionInWindow:function(){this.$23();},$23:function(){var $0=Math.max(Math.round((document.body.clientWidth-this.$10.outerWidth())/2)-this.get_horizOffset(),0);var $1=Math.max(Math.round((document.body.clientHeight-this.$10.outerHeight())/2)-this.get_vertOffset(),0);this.set_position(tab.$create_Point($0,$1));},$24:function($p0){if(ss.isValue(this.$21)){this.$21();}},$25:function($p0){var $0=this.$10.position();this.set_position(tab.$create_Point($0.left,$0.top));},$26:function(){this.close();},onKeyDown:function(e){if(e.which===9){this.$27(e);return;}},$27:function($p0){var $0=this.get_element().find(':tabbable');var $1=$0.filter(':first');var $2=$0.filter(':last');if($p0.target===$1[0]&&$p0.shiftKey){$2.focusDelayed(1);$p0.preventDefault();$p0.stopPropagation();}else if($p0.target===$2[0]&&!$p0.shiftKey){$1.focusDelayed(1);$p0.preventDefault();$p0.stopPropagation();}}}
spiff.ModalDialog=function(titleUnescaped,body){spiff.ModalDialog.initializeBase(this,[titleUnescaped,body]);this.configMoveDragSource(spiff.Dialog.defaultStationaryDialogConfigurer);}
spiff.ModalDialog.prototype={$28:null,get_glass:function(){return this.$28;},ensureAttachedAndSized:function(){if(ss.isValue(this.$28)||this.isAttached()){return;}this.$28=new spiff.Glass();this.$28.set_opaque(true);this.$28.show();this.get_element().css('z-index',(this.$28.get_zIndex()+1).toString());spiff.ModalDialog.callBaseMethod(this, 'ensureAttachedAndSized');},bindToEvents:function(){spiff.ModalDialog.callBaseMethod(this, 'bindToEvents');$(window).bind(this.createNamespacedEventName('resize'),ss.Delegate.create(this,this.onWindowResize));$(document).bind(this.createNamespacedEventName('keydown'),ss.Delegate.create(this,this.onDocumentKeyDown));},unbindEvents:function(){$(window).unbind(this.get_eventNamespace());$(document).unbind(this.get_eventNamespace());spiff.ModalDialog.callBaseMethod(this, 'unbindEvents');},detach:function(){this.$29();spiff.ModalDialog.callBaseMethod(this, 'detach');},dispose:function(){this.$29();spiff.ModalDialog.callBaseMethod(this, 'dispose');},$29:function(){if(ss.isValue(this.$28)){this.$28.dispose();this.$28=null;}},onWindowResize:function(e){this.positionInWindow();},onDocumentKeyDown:function(e){if(e.which===27){this.close();e.preventDefault();return;}}}
spiff.BaseView=function(viewModel,template){spiff.BaseView.initializeBase(this,[template.get_domRoot()]);tab.Param.verifyValue(viewModel,'viewModel');tab.Param.verifyValue(template,'t');this.$A=template;this.$B=viewModel;this.$B.add_disposed(ss.Delegate.create(this,this.$C));this.$B.add_propertyChanged(ss.Delegate.create(this,this.onViewModelPropertyChanged));}
spiff.BaseView.prototype={$A:null,$B:null,get_template:function(){return this.$A;},get_viewModel:function(){return this.$B;},dispose:function(){this.$B.remove_propertyChanged(ss.Delegate.create(this,this.onViewModelPropertyChanged));this.$B.remove_disposed(ss.Delegate.create(this,this.$C));this.$A.dispose();spiff.BaseView.callBaseMethod(this, 'dispose');},onViewModelPropertyChanged:function(sender,e){},$C:function($p0){this.dispose();}}
spiff.BaseViewModel=function(){this.disposables=new tab.DisposableHolder();}
spiff.BaseViewModel.prototype={add_disposed:function(value){this.$0=ss.Delegate.combine(this.$0,value);},remove_disposed:function(value){this.$0=ss.Delegate.remove(this.$0,value);},$0:null,add_propertyChanged:function(value){this.$1=ss.Delegate.combine(this.$1,value);},remove_propertyChanged:function(value){this.$1=ss.Delegate.remove(this.$1,value);},$1:null,dispose:function(){if(ss.isValue(this.$0)){this.$0(this);this.$0=null;}this.$1=null;this.disposables.dispose();},notifyPropertyChanged:function(propertyName){if(this.$1!=null){this.$1(this,new spiff.PropertyChangedEventArgs(propertyName));}},raiseEvent:function(handler,e){if(ss.isValue(handler)){handler(this,(e||ss.EventArgs.Empty));}},raiseActionEvent:function(handler){if(ss.isValue(handler)){handler();}}}
spiff.Glass=function(parentEl){spiff.Glass.initializeBase(this,[$("<div class='tab-glass clear-glass'></div>")]);this.$D=parentEl||document.body;if(this.$D!==document.body){this.get_element().css('position','absolute');}var $0=spiff.$create_EventHandleSpec();spiff.TableauEventHandler.setHandler($0,'firstTouch',ss.Delegate.create(this,this.handleClick));this.$E=spiff.TableauClickHandler.targetAndConfig(this.get_element()[0],$0).onClick(ss.Delegate.create(this,this.handleClick)).onRightClick(ss.Delegate.create(this,this.handleClick));}
spiff.Glass.prototype={$D:null,$E:null,add_click:function(value){this.$F=ss.Delegate.combine(this.$F,value);},remove_click:function(value){this.$F=ss.Delegate.remove(this.$F,value);},$F:null,get_zIndex:function(){return tab.DomUtil.getComputedZIndex(this.get_element()[0]);},set_zIndex:function(value){this.get_element().css('z-index',value.toString());return value;},get_opaque:function(){return this.get_element().hasClass('opaque-glass');},set_opaque:function(value){this.get_element().toggleClass('clear-glass',!value);this.get_element().toggleClass('opaque-glass',value);return value;},show:function(){if(this.get_element().parent()[0]!==this.$D){this.get_element().appendTo(this.$D);}this.get_element().show();},hide:function(){this.get_element().hide();},dispose:function(){if(ss.isValue(this.$E)){this.$E.dispose();this.$E=null;}spiff.Glass.callBaseMethod(this, 'dispose');},handleClick:function(e){if(ss.isValue(this.$F)){this.$F();}}}
spiff.PropertyChangedEventArgs=function(propertyName){spiff.PropertyChangedEventArgs.initializeBase(this);this.$1_0=propertyName;}
spiff.PropertyChangedEventArgs.prototype={$1_0:null,get_propertyName:function(){return this.$1_0;}}
spiff.ObjectRegistry=function(){}
spiff.ObjectRegistry.registerType=function(baseType,actualType){if(ss.isNullOrUndefined(spiff.ObjectRegistry.$0)){spiff.ObjectRegistry.$0={};}spiff.ObjectRegistry.$0[baseType.get_fullName()]=actualType;}
spiff.ObjectRegistry.newView=function(t,vm1,vm2){if(ss.isNullOrUndefined(spiff.ObjectRegistry.$0)){throw new Error('No types registered');}var $0=spiff.ObjectRegistry.$0[t.get_fullName()];if(ss.isNullOrUndefined($0)){throw new Error('Unknown view type: '+t.get_fullName());}var $1;if(ss.isNullOrUndefined(vm2)){$1=new $0(vm1);}else{$1=new $0(vm1,vm2);}return $1;}
spiff.ObjectRegistry.newLegacyTooltip=function(t,tooltipContextProvider,visualId){if(ss.isNullOrUndefined(spiff.ObjectRegistry.$0)){throw new Error('No types registered');}var $0=spiff.ObjectRegistry.$0[t.get_fullName()];if(ss.isNullOrUndefined($0)){throw new Error('Unknown tooltip type: '+t.get_fullName());}var $1=new $0(tooltipContextProvider,visualId);return $1;}
spiff.ObjectRegistry.newLegacyTooltipBehavior=function(t,tooltip){if(ss.isNullOrUndefined(spiff.ObjectRegistry.$0)){throw new Error('No types registered');}var $0=spiff.ObjectRegistry.$0[t.get_fullName()];if(ss.isNullOrUndefined($0)){throw new Error('Unknown tooltip type: '+t.get_fullName());}return new $0(tooltip);}
spiff.ObjectRegistry.newExportPDFDialog=function(t,session){if(ss.isNullOrUndefined(spiff.ObjectRegistry.$0)){throw new Error('No types registered');}var $0=spiff.ObjectRegistry.$0[t.get_fullName()];if(ss.isNullOrUndefined($0)){throw new Error('Unknown ExportPdfDialog type: '+t.get_fullName());}return new $0(session,false);}
spiff.DragDropManager=function(){}
spiff.DragDropManager.add_dragStarted=function(value){spiff.DragDropManager.$F=ss.Delegate.combine(spiff.DragDropManager.$F,value);}
spiff.DragDropManager.remove_dragStarted=function(value){spiff.DragDropManager.$F=ss.Delegate.remove(spiff.DragDropManager.$F,value);}
spiff.DragDropManager.add_dragEnded=function(value){spiff.DragDropManager.$10=ss.Delegate.combine(spiff.DragDropManager.$10,value);}
spiff.DragDropManager.remove_dragEnded=function(value){spiff.DragDropManager.$10=ss.Delegate.remove(spiff.DragDropManager.$10,value);}
spiff.DragDropManager.get_isDragging=function(){return ss.isValue(spiff.DragDropManager.$6);}
spiff.DragDropManager.get_$11=function(){return tab.Logger.lazyGetLogger(spiff.DragDropManager);}
spiff.DragDropManager.get_lastDragEvent=function(){return spiff.DragDropManager.$A;}
spiff.DragDropManager.init=function(){spiff.DragDropManager.$E=new spiff.TableauEventHandler(document.body,spiff.DragDropManager.$D);}
spiff.DragDropManager.attachDropTarget=function(targetElement,dropTarget){targetElement.addClass('tabDropTarget').data('tabDropTarget',dropTarget);}
spiff.DragDropManager.removeDragTarget=function(targetElement){targetElement.removeData('tabDropTarget');targetElement.removeClass('tabDropTarget');}
spiff.DragDropManager.isDragTarget=function(targetElement){return targetElement.hasClass('tabDropTarget');}
spiff.DragDropManager.attachDragSource=function(sourceElement,dragSource){sourceElement.addClass('tabDragSource').data('tabDragSource',dragSource);}
spiff.DragDropManager.removeDragSource=function(sourceElement){sourceElement.removeData('tabDragSource');sourceElement.removeClass('tabDragSource');}
spiff.DragDropManager.isDragSource=function(sourceElement){return sourceElement.hasClass('tabDragSource');}
spiff.DragDropManager.startDrag=function(draggedObject){if(ss.isNullOrUndefined(draggedObject)||!draggedObject.get_hasPayload()){return;}spiff.DragDropManager.cancelDrag();spiff.DragDropManager.$6=draggedObject;spiff.DragDropManager.$13(spiff.DragDropManager.$6.get_dragAvatar());if(ss.isValue(spiff.DragDropManager.$F)){spiff.DragDropManager.$F(spiff.DragDropManager.$6);}}
spiff.DragDropManager.cancelDrag=function(){if(!ss.isValue(spiff.DragDropManager.$6)){return;}spiff.DragDropManager.$12(null,false,true,false);}
spiff.DragDropManager.drop=function(target,isCopyDrop,isShiftDrop){spiff.DragDropManager.$6.isCopyDrag=ss.isValue(isCopyDrop)&&isCopyDrop;spiff.DragDropManager.$6.isShiftDrag=ss.isValue(isShiftDrop)&&isShiftDrop;var $0=function($p1_0){
spiff.DragDropManager.$12(target,$p1_0,false,spiff.DragDropManager.$6.isCopyDrag);};if(ss.isValue(target)){var $1=target.acceptDrop(spiff.DragDropManager.$6);if($1.isResolved()){$0(true);}else{$1.always($0);}}else{$0(true);}}
spiff.DragDropManager.firstTouch=function(e){var $0=$(e.target).closest('.tabDragSource');if(ss.isNullOrUndefined($0)||!$0.length){spiff.DragDropManager.$9=null;return;}spiff.DragDropManager.$9=$0.data('tabDragSource');}
spiff.DragDropManager.dragEnd=function(e){if(ss.isNullOrUndefined(spiff.DragDropManager.$6)){return;}switch(spiff.DragDropManager.$6.get_dragType()){case 'dragdrop':spiff.DragDropManager.drop(spiff.DragDropManager.$7,e.ctrlKey,e.shiftKey);break;case 'dragmove':spiff.DragDropManager.$6.endDragAt(e);spiff.DragDropManager.$12(null,true,false,false);break;}}
spiff.DragDropManager.dragMove=function(e){if(ss.isNullOrUndefined(spiff.DragDropManager.$6)){return;}e.preventDefault();e.stopPropagation();spiff.DragDropManager.$A=e;var $0=Date.get_now().getTime();if(($0-spiff.DragDropManager.$B)>75){if(ss.isValue(spiff.DragDropManager.$C)){tab.WindowHelper.cancelAnimationFrame(spiff.DragDropManager.$C);}spiff.DragDropManager.$14();}switch(spiff.DragDropManager.$6.get_dragType()){case 'dragdrop':var $1=spiff.DragDropManager.findDropTarget(e);if(ss.isValue(spiff.DragDropManager.$7)){if(spiff.DragDropManager.$7!==$1){spiff.DragDropManager.$7.dragExit(spiff.DragDropManager.$6);}else if(spiff.DragDropManager.$7.get_feedbackType()==='dropfeedbackuponentry'){return;}}spiff.DragDropManager.$7=$1;if(ss.isNullOrUndefined(spiff.DragDropManager.$7)){return;}var $2=spiff.DragDropManager.$7.dragOver(spiff.DragDropManager.$6);while(ss.isValue($2)&&$2!==spiff.DragDropManager.$7){spiff.DragDropManager.$7=$2;$2=spiff.DragDropManager.$7.dragOver(spiff.DragDropManager.$6);}spiff.DragDropManager.$7=$2;break;case 'dragmove':spiff.DragDropManager.$6.moveTo(e);break;default:break;}}
spiff.DragDropManager.dragStart=function(e){if(spiff.DragDropManager.get_isDragging()){return;}var $0=spiff.DragDropManager.$9;if(ss.isNullOrUndefined($0)){var $2=$(e.target).closest('tabDragSource');$0=$2.data('tabDragSource');}if(ss.isNullOrUndefined($0)){return;}var $1=$0.startDrag(e);if(ss.isNullOrUndefined($1)){return;}spiff.DragDropManager.$A=e;spiff.DragDropManager.startDrag($1);spiff.DragDropManager.$14();spiff.DragDropManager.$C=tab.WindowHelper.requestAnimationFrame(spiff.DragDropManager.$14);}
spiff.DragDropManager.$12=function($p0,$p1,$p2,$p3){if(ss.isValue(spiff.DragDropManager.$10)){spiff.DragDropManager.$10(spiff.$create_DropResult(spiff.DragDropManager.$6,$p0,$p1,$p2,$p3));}if(ss.isValue(spiff.DragDropManager.$C)){tab.WindowHelper.cancelAnimationFrame(spiff.DragDropManager.$C);spiff.DragDropManager.$C=null;}spiff.DragDropManager.$13(null);spiff.DragDropManager.$6=null;spiff.DragDropManager.$7=null;}
spiff.DragDropManager.$13=function($p0){if(ss.isValue(spiff.DragDropManager.$8)){spiff.DragDropManager.$8.get_element().detach();var $0=spiff.DragDropManager.$8;$0.dispose();spiff.DragDropManager.$8=null;}spiff.DragDropManager.$8=$p0;if(ss.isValue(spiff.DragDropManager.$8)){spiff.DragDropManager.$8.get_element().addClass('dragAvatar').css('position','absolute').css('pointer-events','none').appendTo($('body'));}}
spiff.DragDropManager.$14=function(){if(ss.isNullOrUndefined(spiff.DragDropManager.$8)){return;}tab.DomUtil.setElementPosition(spiff.DragDropManager.$8.get_element(),spiff.DragDropManager.$A.pageX,spiff.DragDropManager.$A.pageY);spiff.DragDropManager.$B=Date.get_now().getTime();spiff.DragDropManager.$C=tab.WindowHelper.requestAnimationFrame(spiff.DragDropManager.$14);}
spiff.DragDropManager.$15=function($p0){if(ss.isValue(spiff.DragDropManager.$8)&&!tab.BrowserSupport.get_pointerEvents()){spiff.DragDropManager.$8.get_element().hide();}var $0=$p0.clientX;var $1=$p0.clientY;if(tab.BrowserSupport.get_useAlternateHitStrategy()){if(ss.isValue($p0.touches)&&$p0.touches.length>0&&ss.isValue($p0.touches[0].screenX)){$0=$p0.touches[0].screenX;$1=$p0.touches[0].screenY;}else{$0=$p0.originalEvent.screenX;$1=$p0.originalEvent.screenY;}}var $2=$(document.elementFromPoint($0,$1));if(ss.isValue(spiff.DragDropManager.$8)&&!tab.BrowserSupport.get_pointerEvents()){spiff.DragDropManager.$8.get_element().show();}return $2;}
spiff.DragDropManager.findDropTarget=function(e){var $0=spiff.DragDropManager.$15(e);var $1=$0.closest('.tabDropTarget').data('tabDropTarget');if($1!=null){return $1.getDropTarget($0);}return null;}
spiff.DragInstance=function(dragged,dragAvatar){this.draggedObject=dragged;this.$0=dragAvatar;this.isCopyDrag=false;this.isShiftDrag=false;}
spiff.DragInstance.prototype={isCopyDrag:false,isShiftDrag:false,draggedObject:null,$0:null,get_payload:function(){return this.draggedObject;},get_hasPayload:function(){return ss.isValue(this.draggedObject);},get_dragAvatar:function(){return this.$0;},get_dragType:function(){return 'dragdrop';},moveTo:function(e){},endDragAt:function(e){},payloadEquals:function(value){if(this.draggedObject===value){return true;}if($.isArray(this.draggedObject)){var $0=this.draggedObject;if($0.length===1&&$0[0]===value){return true;}}return false;}}
spiff.MoveDragInstance=function(dragged,moveCallback,dropCallback){spiff.MoveDragInstance.initializeBase(this,[dragged,null]);this.$1=moveCallback;this.$2=dropCallback;}
spiff.MoveDragInstance.prototype={$1:null,$2:null,get_dragType:function(){return 'dragmove';},moveTo:function(e){if(ss.isValue(this.$1)){this.$1(e);}},endDragAt:function(e){if(ss.isValue(this.$2)){this.$2(e);}}}
spiff.MoveDragSource=function(elementToDrag,elementToChange){this.$0=elementToDrag;this.$1=elementToChange;this.$3='useScrollSize';spiff.DragDropManager.attachDragSource(this.$0,this);}
spiff.MoveDragSource.prototype={$0:null,$1:null,$2:null,$3:null,add_moveAction:function(value){this.$4=ss.Delegate.combine(this.$4,value);},remove_moveAction:function(value){this.$4=ss.Delegate.remove(this.$4,value);},$4:null,add_endAction:function(value){this.$5=ss.Delegate.combine(this.$5,value);},remove_endAction:function(value){this.$5=ss.Delegate.remove(this.$5,value);},$5:null,get_offset:function(){return this.$2;},set_offset:function(value){this.$2=value;return value;},get_elementToDrag:function(){return this.$0;},get_elementToChange:function(){return this.$1;},get_documentBodySize:function(){return this.$3;},set_documentBodySize:function(value){this.$3=value;return value;},dispose:function(){spiff.DragDropManager.removeDragSource(this.$0);},calculateOffset:function(e){var $0=this.$1.position();return tab.$create_Point(e.pageX-$0.left,e.pageY-$0.top);},startDrag:function(e){this.$2=this.calculateOffset(e);this.$0.addClass('dragging');return new spiff.MoveDragInstance(this.$0,ss.Delegate.create(this,this.dragMove),ss.Delegate.create(this,this.dragEnd));},dragMove:function(e){this.performMove(e);if(ss.isValue(this.$4)){this.$4(e);}},performMove:function(e){var $0=e.pageX-this.$2.x;var $1=e.pageY-this.$2.y;var $2=(this.$3==='useClientSize')?document.body.clientWidth:document.body.scrollWidth;var $3=(this.$3==='useClientSize')?document.body.clientHeight:document.body.scrollHeight;$0=Math.min($2-this.$1.outerWidth(),Math.max(0,$0));$1=Math.min($3-this.$1.outerHeight(),Math.max(0,$1));tab.DomUtil.setElementPosition(this.$1,$0,$1);},dragEnd:function(e){this.performMove(e);this.$0.removeClass('dragging');if(ss.isValue(this.$5)){this.$5(e);}}}
spiff.ResizeDragSource=function(elementToDrag,elementToChange,location){this.$6='bottomRight';spiff.ResizeDragSource.initializeBase(this,[elementToDrag,elementToChange]);this.$6=location;}
spiff.ResizeDragSource.prototype={calculateOffset:function(e){var $0=this.get_elementToChange().position();var $1=tab.$create_Point(0,0);switch(this.$6){case 'bottomRight':$1.x=($0.left+this.get_elementToChange().width())-e.pageX;$1.y=($0.top+this.get_elementToChange().height())-e.pageY;break;case 'topLeft':$1.x=e.pageX-$0.left;$1.y=e.pageY-$0.top;break;case 'left':$1.x=e.pageX-$0.left;break;case 'right':$1.x=($0.left+this.get_elementToChange().width())-e.pageX;break;case 'top':$1.y=e.pageY-$0.top;break;case 'bottom':$1.y=($0.top+this.get_elementToChange().height())-e.pageY;break;}return $1;},performMove:function(e){var $0=this.get_elementToChange().position();var $1=this.get_elementToChange().width();var $2=this.get_elementToChange().height();switch(this.$6){case 'bottomRight':this.get_elementToChange().width((e.pageX-$0.left)+this.get_offset().x);this.get_elementToChange().height((e.pageY-$0.top)+this.get_offset().y);break;case 'topLeft':this.get_elementToChange().width($1+($0.left-e.pageX)+this.get_offset().x);this.get_elementToChange().height($2+($0.top-e.pageY)+this.get_offset().y);tab.DomUtil.setElementPosition(this.get_elementToChange(),$0.left+$1-this.get_elementToChange().width(),$0.top+$2-this.get_elementToChange().height());break;case 'left':tab.DomUtil.setElementPosition(this.get_elementToChange(),e.pageX-this.get_offset().x,$0.top);this.get_elementToChange().width($1+($0.left-e.pageX)+this.get_offset().x);tab.DomUtil.setElementPosition(this.get_elementToChange(),$0.left+$1-this.get_elementToChange().width(),$0.top);break;case 'right':this.get_elementToChange().width((e.pageX-$0.left)+this.get_offset().x);break;case 'top':this.get_elementToChange().height($2+($0.top-e.pageY)+this.get_offset().y);tab.DomUtil.setElementPosition(this.get_elementToChange(),$0.left,$0.top+$2-this.get_elementToChange().height());break;case 'bottom':this.get_elementToChange().height((e.pageY-$0.top)+this.get_offset().y);break;}}}
spiff.ClickHandler=function(){this.$2=new tab.DisposableHolder();this.$7='clickHandler'+(spiff.ClickHandler.$3++);}
spiff.ClickHandler.targetAndClick=function(o,onClick){return new spiff.ClickHandler().setTarget(o).onClick(onClick);}
spiff.ClickHandler.targetAndRightClick=function(o,onRightClick){return new spiff.ClickHandler().setTarget(o).onRightClick(onRightClick);}
spiff.ClickHandler.targetAndPress=function(o,onClick){return new spiff.ClickHandler().setTarget(o).onPress(onClick);}
spiff.ClickHandler.prototype={$4:0,$5:0,$6:null,$8:null,$9:null,add_$A:function($p0){this.$B=ss.Delegate.combine(this.$B,$p0);},remove_$A:function($p0){this.$B=ss.Delegate.remove(this.$B,$p0);},$B:null,add_$C:function($p0){this.$D=ss.Delegate.combine(this.$D,$p0);},remove_$C:function($p0){this.$D=ss.Delegate.remove(this.$D,$p0);},$D:null,add_$E:function($p0){this.$F=ss.Delegate.combine(this.$F,$p0);},remove_$E:function($p0){this.$F=ss.Delegate.remove(this.$F,$p0);},$F:null,get_target:function(){return this.$6;},dispose:function(){this.$11();this.$2.dispose();if(!ss.isValue(this.$6)){return;}this.$6.unbind('.'+this.$7);this.$6=null;},onPress:function(handler){this.add_$A(handler);this.$2.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_$A(handler);})));return this;},onClick:function(handler){this.add_$C(handler);this.$2.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_$C(handler);})));return this;},onRightClick:function(handler){this.add_$E(handler);this.$2.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_$E(handler);})));return this;},setTarget:function(dom){this.$6=dom;dom.bind(this.$10('touchstart'),ss.Delegate.create(this,this.$14));this.$2.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
dom.unbind(this.$10('touchstart'));})));if(tsConfig.is_mobile){if(!tsConfig.is_touch){dom.bind(this.$10('mousedown'),ss.Delegate.create(this,this.$12)).bind(this.$10('click'),ss.Delegate.create(this,this.$19));this.$2.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
dom.unbind(this.$10('mousedown')).unbind(this.$10('click'));})));}}else{dom.bind(this.$10('mousedown'),ss.Delegate.create(this,this.$12)).bind(this.$10('click'),ss.Delegate.create(this,this.$19)).bind(this.$10('contextmenu'),ss.Delegate.create(this,this.$19));this.$2.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
dom.unbind(this.$10('mousedown')).unbind(this.$10('click')).unbind(this.$10('contextmenu'));})));}return this;},$10:function($p0){return $p0+'.'+this.$7;},$11:function(){if(ss.isValue(this.$6)){this.$6.unbind(this.$10('touchend'));this.$6.unbind(this.$10('touchcancel'));}if(ss.isValue(this.$8)){document.body.removeEventListener('touchmove',this.$8,true);this.$8=null;}if(ss.isValue(this.$9)){window.clearTimeout(this.$9);this.$9=null;}},$12:function($p0){this.$4=$p0.pageX;this.$5=$p0.pageY;this.$16();if(ss.isValue(this.$B)){this.$B($p0);}},$13:function($p0){if($p0 && $p0.originalEvent && $p0.originalEvent.touches && $p0.originalEvent.touches[0]){return $p0.originalEvent.touches[0];}return {};},$14:function($p0){if(!tsConfig.is_mobile){if(tab.DomUtil.handleTouchEvents($p0.target)){$p0.preventDefault();}else{return;}}var $0=this.$13($p0);var $1=($0['pageX']||0);var $2=($0['pageY']||0);this.$6.bind(this.$10('touchend'),ss.Delegate.create(this,this.$15));this.$6.bind(this.$10('touchcancel'),ss.Delegate.create(this,this.$18));this.$16();if(tab.BrowserSupport.get_addEventListener()){this.$8=ss.Delegate.create(this,this.$17);document.body.addEventListener('touchmove',this.$8,true);}this.$4=$1;this.$5=$2;if(ss.isValue(this.$B)){this.$B($p0);}},$15:function($p0){if(!tsConfig.is_mobile){if(tab.DomUtil.handleTouchEvents($p0.target)){$p0.preventDefault();}else{return;}}this.$19($p0);},$16:function(){if(ss.isValue(this.$9)){window.clearTimeout(this.$9);}this.$9=window.setTimeout(ss.Delegate.create(this,this.$11),300);},$17:function($p0){if(!tsConfig.is_mobile){if(tab.DomUtil.handleTouchEvents($p0.target)){$p0.preventDefault();}else{return;}}var $0=$p0.touches[0].pageX;var $1=$p0.touches[0].pageY;if(Math.abs($0-this.$4)>10||Math.abs($1-this.$5)>10){this.$11();}},$18:function($p0){if(!tsConfig.is_mobile){if(tab.DomUtil.handleTouchEvents($p0.target)){$p0.preventDefault();}else{return;}}this.$11();},$19:function($p0){$p0.stopPropagation();this.$11();if($p0.type==='contextmenu'){$p0.preventDefault();if(ss.isValue(this.$F)){this.$F($p0);}}else{if(ss.isValue(this.$D)){this.$D($p0);}if($p0.type==='touchend'){spiff.ClickBuster.preventGhostClick(this.$4,this.$5);}}}}
spiff.Discrete=function(config){spiff.Discrete.initializeBase(this,[config,'discrete']);}
spiff.Discrete.prototype={$5:null,$6:0,$7:0,$8:false,$9:false,$A:0,$B:null,$C:null,$D:null,start:function(e){var $0=e.touches[0];if(e.touches.length!==this.numTouches){this.reset();return;}var $1=this.$19(e);if(!this.$15('globalFirstTouch',e)){return;}this.$1('firstTouch',e,$1);this.$6=$0.pageX;this.$7=$0.pageY;this.$8=true;this.$16(this.$B);this.$B=null;if(!ss.isValue(this.$5)){this.$A=new Date().getTime();this.$D=window.setTimeout(ss.Delegate.create(this,function(){
this.$11(e,$1);}),500);this.$B=window.setTimeout(ss.Delegate.create(this,function(){
this.$10(e,$1);}),750);}},move:function(e){if(this.$18(e)){this.reset();}if(e.type==='touchmove'){this.$1('touchMove',e,this.$19(e));}},end:function(e){var $0=this.$19(e);this.$12();if(this.$8){if(ss.isValue(this.$5)&&this.$5){this.$F(e,$0);}else{this.$13(e,$0);}}if(e.type==='contextmenu'){if(!this.$15('globalRightClick',e)){return;}this.$14(e,$0);}if(!e.touches.length){if(!this.$15('globalLastTouch',e)){return;}this.$1('lastTouch',e,$0);}},cancel:function(){this.reset();},reset:function(){this.$12();this.$8=false;this.$5=null;this.$9=false;this.$16(this.$C);this.$C=null;},$E:function($p0,$p1,$p2,$p3){this.$1($p0,$p1,$p2);if(ss.isValue($p3)&&!!$p3['reset']){this.reset();}},$F:function($p0,$p1){this.$16(this.$C);this.$C=null;this.$E('doubleTap',$p0,$p1,{reset:true});},$10:function($p0,$p1){this.$9=false;if(!this.$15('globalPress',$p0)){return;}this.$E('press',$p0,$p1,{reset:true});},$11:function($p0,$p1){this.$9=true;this.$E('potentialPress',$p0,$p1);},$12:function(){this.$16(this.$D);this.$D=null;this.$16(this.$B);this.$B=null;if(this.$9){this.$E('cancelPotentialPress',{},null);}},$13:function($p0,$p1){this.$5=true;if(!this.$15('globalPotentialTap',$p0)){return;}if(spiff.TableauEventHandler.isHandling(this.$0,'doubleTap')){this.$C=window.setTimeout(ss.Delegate.create(this,function(){
this.reset();}),390-this.$17());}else{this.reset();}this.$1('potentialTap',$p0,$p1);this.$1('tap',$p0,$p1);},$14:function($p0,$p1){this.$1('rightClick',$p0,$p1);},$15:function($p0,$p1){var $0=false;var $1=ss.Delegate.create(this,function($p1_0){
this.reset();if($p1_0){$p1.preventDefault();$p1.stopPropagation();}$0=true;});dojo.publish($p0,[$p1,$1]);return !$0;},$16:function($p0){if(ss.isValue($p0)){window.clearTimeout($p0);}},$17:function(){var $0=new Date().getTime()-this.$A;return $0;},$18:function($p0){var $0=$p0.touches[0];return Math.abs($0.pageX-this.$6)>this.slop||Math.abs($0.pageY-this.$7)>this.slop;},$19:function($p0){var $0=spiff.$create_GestureEventInfo();$0.pageX=$p0.changedTouches[0].pageX;$0.pageY=$p0.changedTouches[0].pageY;$0.clientX=$p0.changedTouches[0].clientX;$0.clientY=$p0.changedTouches[0].clientY;return $0;}}
spiff.Drag=function(config){spiff.Drag.initializeBase(this,[config,'drag',5]);}
spiff.Drag.prototype={$2:false,$3:null,$4:null,$5:false,start:function(e){if(e.target.tagName.toUpperCase()==='IMG'&&!tsConfig.is_mobile){e.preventDefault();}var $0=e.touches[0];if(e.touches.length!==this.numTouches){if(this.$2){this.$1('dragEnd',e,this.$4);}this.$2=false;this.$5=true;return;}if(ss.isValue(this.$3)&&!tsConfig.is_touch){this.end(e);}this.$5=false;this.$3=spiff.$create_GestureEventInfo();this.$3.pageX=$0.pageX;this.$3.pageY=$0.pageY;this.$4=this.$3;},move:function(e){if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9&&e.target.tagName.toUpperCase()==='IMG'){e.preventDefault();}if(this.$5){return;}this.$4=this.$6(e);if(this.$2){this.$1('dragMove',e,this.$4);}else if(this.$7(e)){this.$2=true;this.$1('dragStart',e,this.$4);this.$1('dragMove',e,this.$4);if(ss.isValue(this.$0.dragEnd)){spiff.MouseCapture.setCapture(document.body,true,this,false);}}},end:function(e){var $0;if(!this.$2){if(e.touches.length!==this.numTouches||ss.isNullOrUndefined(e.touches[0].identifier)){return;}this.$3=spiff.$create_GestureEventInfo();this.$3.pageX=e.touches[0].pageX;this.$3.pageY=e.touches[0].pageY;this.$4=this.$3;$0=this.$6(e);this.$5=false;this.$2=true;this.$1('dragStart',e,$0);return;}spiff.MouseCapture.releaseCapture();$0=this.$6(e);this.$2=false;this.$3=null;if(spiff.TableauEventHandler.isHandling(this.$0,'dragEnd')){var $1=new spiff.NormalizedEvent(e.originalEvent,null);$.extend($1,this.$4);var $2=function(){
spiff.DragDropManager.cancelDrag();};dojo.publish('globalDragEnd',[$1,$2]);}this.$1('dragEnd',e,$0);},cancel:function(){this.$5=true;},$6:function($p0){var $0=$p0.changedTouches[0];if(ss.isNullOrUndefined(this.$3)){this.$3=spiff.$create_GestureEventInfo();this.$3.pageX=$p0.pageX;this.$3.pageY=$p0.pageY;}if(ss.isNullOrUndefined(this.$4)){this.$4=this.$3;}var $1=spiff.$create_GestureEventInfo();$1.clientX=$0.clientX;$1.clientY=$0.clientY;if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()===9&&!$0.pageX&&!$0.pageY){$1.pageX=$0.clientX+document.documentElement.scrollLeft;$1.pageY=$0.clientY+document.documentElement.scrollTop;}else{$1.pageX=$0.pageX;$1.pageY=$0.pageY;}$1.startX=this.$3.pageX;$1.startY=this.$3.pageY;$1.deltaX=$1.pageX-this.$3.pageX;$1.deltaY=$1.pageY-this.$3.pageY;$1.deltaXSinceLast=$1.pageX-this.$4.pageX;$1.deltaYSinceLast=$1.pageY-this.$4.pageY;$1.scale=1;return $1;},$7:function($p0){var $0=$p0.touches[0];if(ss.isNullOrUndefined(this.$3)){return false;}return Math.abs($0.pageX-this.$3.pageX)>this.slop||Math.abs($0.pageY-this.$3.pageY)>this.slop;},handleCapturedMouseMove:function(e){if(e.offsetX<0||e.offsetX>document.body.offsetWidth||e.offsetY<0||e.offsetY>document.body.offsetHeight){var $0=new spiff.NormalizedEvent(e,this.$0.domElem);this.move($0);}},handleCapturedMouseComplete:function(e){var $0=document.createEvent('MouseEvents');$0.initMouseEvent('mouseup',false,true,window.self,null,this.$4.pageX,this.$4.pageY,this.$4.clientX,this.$4.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,null,null);document.body.dispatchEvent($0);}}
spiff.Gesture=function(config,type,slop,numTouches){if(ss.isValue(type)){this.type=type;}if(ss.isValue(slop)){this.slop=slop;}if(ss.isValue(numTouches)){this.numTouches=numTouches;}this.$0=spiff.$create_EventHandleSpec();this.update(config);}
spiff.Gesture.prototype={$0:null,slop:7,numTouches:1,type:'gesture',update:function(config){if(ss.isValue(config)){$.extend(this.$0,config);}},start:function(e){},move:function(e){},end:function(e){},cancel:function(){},$1:function($p0,$p1,$p2){if(spiff.TableauEventHandler.isHandling(this.$0,$p0)){var $0=$p1;$.extend($0,$p2);$0.gestureName=this.type;$0.$0=$p0;var $1=spiff.TableauEventHandler.$5(this.$0,$p0);$1($0);}}}
spiff.Hover=function(config){spiff.Hover.initializeBase(this,[config,'hover',0]);this.$7=(ss.isValue(config.hoverDelay))?config.hoverDelay:150;}
spiff.Hover.prototype={$2:0,$3:0,$4:true,$5:false,$6:null,$7:0,start:function(e){this.cancel();this.$4=false;},move:function(e){var $0=e.touches[0];if(!this.$4){return;}if(!this.$9(e)){return;}var $1=this.$A(e);if(ss.isValue(this.$6)){this.cancel();}this.$1('moving',e,$1);this.$2=$0.pageX;this.$3=$0.pageY;this.$6=window.setTimeout(ss.Delegate.create(this,function(){
if(!this.$5){this.$1('hover',e,$1);}this.$8();}),this.$7);},end:function(e){if(!e.touches.length){this.$4=true;}},out:function(e){var $0=e.originalEvent.relatedTarget;if(this.$0.domElem!==$0&&!tab.DomUtil.isAncestorOf(this.$0.domElem,$0)){this.cancel();this.$1('mouseleave',e,this.$A(e));}},suppressHover:function(){if(!this.$5){}this.$5=true;},unsuppressHover:function(){if(this.$5){}this.$5=false;this.$4=true;},cancel:function(){this.$8();this.$2=0;this.$3=0;this.$4=true;},$8:function(){if(ss.isValue(this.$6)){window.clearTimeout(this.$6);this.$6=null;}},$9:function($p0){var $0=$p0.touches[0];var $1=Math.abs($0.pageX-this.$2);var $2=Math.abs($0.pageY-this.$3);return ($1+$2)>this.slop;},$A:function($p0){var $0=spiff.$create_GestureEventInfo();$0.pageX=$p0.changedTouches[0].pageX;$0.pageY=$p0.changedTouches[0].pageY;$0.clientX=$p0.changedTouches[0].clientX;$0.clientY=$p0.changedTouches[0].clientY;return $0;}}
spiff.Pinch=function(config){spiff.Pinch.initializeBase(this,[config,'pinch',10,2]);}
spiff.Pinch.prototype={$2:false,$3:null,$4:null,$5:null,$6:null,start:function(e){if(e.touches.length<this.numTouches){return;}if(!this.$2){this.$3=e.touches[0];this.$4=e.touches[1];this.$5=this.$7();this.$6=this.$5;var $0=this.$8();this.$1('pinchStart',e,$0);this.$2=true;}},move:function(e){if(this.$2){if(e.touches.length<2){this.end(e);return;}this.$3=e.touches[0];this.$4=e.touches[1];this.$6=this.$8();this.$1('pinchMove',e,this.$6);}},end:function(e){var $0;if(e.touches.length>=this.numTouches){return;}if(this.$2){this.$2=false;$0=this.$8();this.$1('pinchEnd',e,$0);}},$7:function(){var $0=this.$3;var $1=this.$4;var $2=$1.pageX-$0.pageX;var $3=$1.pageY-$0.pageY;var $4=Math.sqrt(($2*$2)+($3*$3));var $5=($2/2)+$0.pageX;var $6=($3/2)+$0.pageY;var $7=spiff.$create_GestureEventInfo();$7.pageX=$5;$7.pageY=$6;$7.distance=$4;return $7;},$8:function(){var $0=this.$3;var $1=this.$4;var $2=$1.pageX-$0.pageX;var $3=$1.pageY-$0.pageY;var $4=Math.sqrt(($2*$2)+($3*$3));var $5=($2/2)+$0.pageX;var $6=($3/2)+$0.pageY;var $7=spiff.$create_GestureEventInfo();$7.pageX=$5;$7.pageY=$6;$7.scale=$4/this.$5.distance;$7.deltaX=$5-this.$5.pageX;$7.deltaY=$6-this.$5.pageY;$7.startX=this.$5.pageX;$7.startY=this.$5.pageY;$7.deltaXSinceLast=$5-this.$6.pageX;$7.deltaYSinceLast=$6-this.$6.pageY;return $7;}}
spiff.GlobalTouchWatcher=function(){}
spiff.GlobalTouchWatcher.add_firstTouch=function(value){spiff.GlobalTouchWatcher.$1=ss.Delegate.combine(spiff.GlobalTouchWatcher.$1,value);}
spiff.GlobalTouchWatcher.remove_firstTouch=function(value){spiff.GlobalTouchWatcher.$1=ss.Delegate.remove(spiff.GlobalTouchWatcher.$1,value);}
spiff.GlobalTouchWatcher.add_press=function(value){spiff.GlobalTouchWatcher.$2=ss.Delegate.combine(spiff.GlobalTouchWatcher.$2,value);}
spiff.GlobalTouchWatcher.remove_press=function(value){spiff.GlobalTouchWatcher.$2=ss.Delegate.remove(spiff.GlobalTouchWatcher.$2,value);}
spiff.GlobalTouchWatcher.add_potentialTap=function(value){spiff.GlobalTouchWatcher.$3=ss.Delegate.combine(spiff.GlobalTouchWatcher.$3,value);}
spiff.GlobalTouchWatcher.remove_potentialTap=function(value){spiff.GlobalTouchWatcher.$3=ss.Delegate.remove(spiff.GlobalTouchWatcher.$3,value);}
spiff.GlobalTouchWatcher.add_lastTouch=function(value){spiff.GlobalTouchWatcher.$4=ss.Delegate.combine(spiff.GlobalTouchWatcher.$4,value);}
spiff.GlobalTouchWatcher.remove_lastTouch=function(value){spiff.GlobalTouchWatcher.$4=ss.Delegate.remove(spiff.GlobalTouchWatcher.$4,value);}
spiff.GlobalTouchWatcher.add_rightClick=function(value){spiff.GlobalTouchWatcher.$5=ss.Delegate.combine(spiff.GlobalTouchWatcher.$5,value);}
spiff.GlobalTouchWatcher.remove_rightClick=function(value){spiff.GlobalTouchWatcher.$5=ss.Delegate.remove(spiff.GlobalTouchWatcher.$5,value);}
spiff.GlobalTouchWatcher.add_dragEnd=function(value){spiff.GlobalTouchWatcher.$6=ss.Delegate.combine(spiff.GlobalTouchWatcher.$6,value);}
spiff.GlobalTouchWatcher.remove_dragEnd=function(value){spiff.GlobalTouchWatcher.$6=ss.Delegate.remove(spiff.GlobalTouchWatcher.$6,value);}
spiff.GlobalTouchWatcher.dispose=function(){spiff.GlobalTouchWatcher.$0.forEach(function($p1_0){
dojo.unsubscribe($p1_0);});}
spiff.GlobalTouchWatcher.$7=function($p0,$p1){if(ss.isValue(spiff.GlobalTouchWatcher.$1)){spiff.GlobalTouchWatcher.$1($p0,$p1);}}
spiff.GlobalTouchWatcher.$8=function($p0,$p1){if(ss.isValue(spiff.GlobalTouchWatcher.$2)){spiff.GlobalTouchWatcher.$2($p0,$p1);}}
spiff.GlobalTouchWatcher.$9=function($p0,$p1){if(ss.isValue(spiff.GlobalTouchWatcher.$3)){spiff.GlobalTouchWatcher.$3($p0,$p1);}}
spiff.GlobalTouchWatcher.$A=function($p0,$p1){if(ss.isValue(spiff.GlobalTouchWatcher.$4)){spiff.GlobalTouchWatcher.$4($p0,$p1);}}
spiff.GlobalTouchWatcher.$B=function($p0,$p1){if(ss.isValue(spiff.GlobalTouchWatcher.$5)){spiff.GlobalTouchWatcher.$5($p0,$p1);}}
spiff.GlobalTouchWatcher.$C=function($p0,$p1){if(ss.isValue(spiff.GlobalTouchWatcher.$6)){spiff.GlobalTouchWatcher.$6($p0,$p1);}}
spiff.NormalizedEvent=function(evt,listeningNode){this.originalEvent=evt;this.type=evt.type;this.timeStamp=evt.timeStamp;this.keyCode=evt.keyCode;this.ctrlKey=evt.ctrlKey;this.altKey=evt.altKey;this.metaKey=evt.metaKey;this.shiftKey=evt.shiftKey;this.charOrCode=evt.charOrCode;this.clientX=evt.clientX;this.clientY=evt.clientY;if(ss.isValue(evt.touches)){this.touches=evt.touches;this.targetTouches=evt.targetTouches;this.changedTouches=evt.changedTouches;this.target=(evt.target.nodeType===3)?evt.target.parentNode:evt.target;this.currentTarget=listeningNode;}else{this.targetTouches=evt.type === 'mouseup' ? [] : [evt];this.touches=this.targetTouches;this.changedTouches=[evt];this.currentTarget=evt.currentTarget;this.target=evt.target;}var $0=this.touches.length;this.touchesById=new Array($0);while($0>0){$0-=1;var $1=(this.touches[$0].identifier||0);this.touchesById[$1]=this.touches[$0];}$0=this.changedTouches.length;while($0>0){$0-=1;var $2=(this.changedTouches[$0].identifier||0);this.touchesById[$2]=this.changedTouches[$0];}}
spiff.NormalizedEvent.prototype={originalEvent:null,type:null,target:null,currentTarget:null,timeStamp:null,keyCode:0,ctrlKey:false,altKey:false,metaKey:false,shiftKey:false,clientX:0,clientY:0,pageX:0,pageY:0,charOrCode:null,touches:null,targetTouches:null,changedTouches:null,touchesById:null,gestureName:null,$0:null,get_gestureInfo:function(){return this;},get_relatedTarget:function(){return this.originalEvent.relatedTarget;},preventDefault:function(){if(ss.isValue(this.originalEvent.preventDefault)){this.originalEvent.preventDefault();}},stopPropagation:function(){if(ss.isValue(this.originalEvent.stopPropagation)){this.originalEvent.stopPropagation();}}}
spiff.TableauClickHandler=function(element,config){this.$0=new tab.DisposableHolder();this.eventConfig=config||spiff.$create_EventHandleSpec();spiff.TableauEventHandler.setHandler(this.eventConfig,'firstTouch',ss.Delegate.create(this,this.handlePressEvent));spiff.TableauEventHandler.setHandler(this.eventConfig,'potentialTap',ss.Delegate.create(this,this.handleClickEvent));spiff.TableauEventHandler.setHandler(this.eventConfig,'rightClick',ss.Delegate.create(this,this.handleRightClickEvent));this.handler=new spiff.TableauEventHandler(element,this.eventConfig);}
spiff.TableauClickHandler.target=function(element){return new spiff.TableauClickHandler(element,null);}
spiff.TableauClickHandler.targetAndConfig=function(element,config){return new spiff.TableauClickHandler(element,config);}
spiff.TableauClickHandler.targetAndClick=function(element,action){return new spiff.TableauClickHandler(element,null).onClick(action);}
spiff.TableauClickHandler.targetAndPress=function(element,action){return new spiff.TableauClickHandler(element,null).onPress(action);}
spiff.TableauClickHandler.targetAndRightClick=function(element,action){return new spiff.TableauClickHandler(element,null).onRightClick(action);}
spiff.TableauClickHandler.targetAndDoubleClick=function(element,action){return new spiff.TableauClickHandler(element,null).onDoubleClick(action);}
spiff.TableauClickHandler.prototype={eventConfig:null,handler:null,$1:0,$2:0,$3:true,add_$4:function($p0){this.$5=ss.Delegate.combine(this.$5,$p0);},remove_$4:function($p0){this.$5=ss.Delegate.remove(this.$5,$p0);},$5:null,add_$6:function($p0){this.$7=ss.Delegate.combine(this.$7,$p0);},remove_$6:function($p0){this.$7=ss.Delegate.remove(this.$7,$p0);},$7:null,add_$8:function($p0){this.$9=ss.Delegate.combine(this.$9,$p0);},remove_$8:function($p0){this.$9=ss.Delegate.remove(this.$9,$p0);},$9:null,add_$A:function($p0){this.$B=ss.Delegate.combine(this.$B,$p0);},remove_$A:function($p0){this.$B=ss.Delegate.remove(this.$B,$p0);},$B:null,get_stopPropagationOnEvent:function(){return this.$3;},set_stopPropagationOnEvent:function(value){this.$3=value;return value;},dispose:function(){if(ss.isValue(this.handler)){this.handler.dispose();this.handler=null;}this.$0.dispose();},onPress:function(action){this.add_$4(action);this.$0.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_$4(action);})));return this;},onClick:function(action){this.add_$6(action);this.$0.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_$6(action);})));return this;},onDoubleClick:function(action){this.add_$8(action);this.$0.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_$8(action);})));this.$C('doubleTap',ss.Delegate.create(this,this.handleDoubleClickEvent));return this;},onRightClick:function(action){this.add_$A(action);this.$0.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_$A(action);})));return this;},$C:function($p0,$p1){if(!spiff.TableauEventHandler.isHandling(this.eventConfig,$p0)){var $0=spiff.$create_EventHandleSpec();spiff.TableauEventHandler.setHandler($0,$p0,$p1);this.handler.update($0);$.extend(this.eventConfig,$0);}},raiseEvent:function(e,callback,stopPropagation){if(ss.isValue(callback)){if(stopPropagation){e.stopPropagation();}callback(e);}},handlePressEvent:function(e){this.$1=e.pageX;this.$2=e.pageY;this.raiseEvent(e,this.$5,false);},handleClickEvent:function(e){this.raiseEvent(e,this.$7,this.$3);if(e.type==='touchend'){spiff.ClickBuster.preventGhostClick(this.$1,this.$2);}},handleDoubleClickEvent:function(e){this.raiseEvent(e,this.$9,this.$3);},handleRightClickEvent:function(e){e.preventDefault();this.raiseEvent(e,this.$B,this.$3);}}
spiff.OrientationHandler=function(){}
spiff.OrientationHandler.add_orientationChanged=function(value){spiff.OrientationHandler.$8=ss.Delegate.combine(spiff.OrientationHandler.$8,value);}
spiff.OrientationHandler.remove_orientationChanged=function(value){spiff.OrientationHandler.$8=ss.Delegate.remove(spiff.OrientationHandler.$8,value);}
spiff.OrientationHandler.get_isLandscape=function(){return spiff.OrientationHandler.$4===90||spiff.OrientationHandler.$4===-90;}
spiff.OrientationHandler.get_isPortrait=function(){return !spiff.OrientationHandler.$4||spiff.OrientationHandler.$4===180;}
spiff.OrientationHandler.get_windowInstHelper=function(){return spiff.OrientationHandler.$3;}
spiff.OrientationHandler.init=function(){if(!tsConfig.is_mobile_device){spiff.OrientationHandler.$4=0;return;}spiff.OrientationHandler.$2=spiff.OrientationHandler.$9();spiff.OrientationHandler.$3=new tab.WindowHelper(spiff.OrientationHandler.$2);spiff.OrientationHandler.$4=spiff.OrientationHandler.$E();spiff.OrientationHandler.$5=spiff.OrientationHandler.$3.get_outerWidth();if(tab.BrowserSupport.get_orientationChange()){$(spiff.OrientationHandler.$2).bind('orientationchange',spiff.OrientationHandler.$A);}$(spiff.OrientationHandler.$2).bind('resize',spiff.OrientationHandler.$C);}
spiff.OrientationHandler.unbindEvents=function(){if(ss.isNullOrUndefined(spiff.OrientationHandler.$2)){return;}$(spiff.OrientationHandler.$2).unbind('orientationchange',spiff.OrientationHandler.$A);$(spiff.OrientationHandler.$2).unbind('resize',spiff.OrientationHandler.$C);}
spiff.OrientationHandler.$9=function(){var $0=tab.WindowHelper.get_windowSelf();if(tabBootstrap.Utility.get_embedMode()!=='notEmbedded'){try{while(ss.isValue($0.parent)&&$0.parent!==$0){var $1=$0.parent;var $2=new tab.WindowHelper($1);if(ss.isNullOrUndefined($2.get_outerWidth())){break;}$0=$1;}}catch($3){}}return $0;}
spiff.OrientationHandler.$A=function($p0){spiff.OrientationHandler.$7=new Date();spiff.OrientationHandler.$B();}
spiff.OrientationHandler.$B=function(){var $0=new Date();var $1=spiff.OrientationHandler.$3.get_outerWidth();if(spiff.OrientationHandler.$5!==$1||($0-spiff.OrientationHandler.$7)>=2500){spiff.OrientationHandler.$5=$1;spiff.OrientationHandler.$D();}else{spiff.OrientationHandler.$10();spiff.OrientationHandler.$6=window.setTimeout(spiff.OrientationHandler.$B,150);}}
spiff.OrientationHandler.$C=function($p0){var $0=spiff.OrientationHandler.$3.get_outerWidth();if($0!==spiff.OrientationHandler.$5){spiff.OrientationHandler.$5=$0;spiff.OrientationHandler.$D();}}
spiff.OrientationHandler.$D=function(){spiff.OrientationHandler.$10();var $0=spiff.OrientationHandler.$E();if(spiff.OrientationHandler.$4!==$0){spiff.OrientationHandler.$4=spiff.OrientationHandler.$E();if(ss.isValue(spiff.OrientationHandler.$8)){spiff.OrientationHandler.$8();}}}
spiff.OrientationHandler.$E=function(){var $0;if(!tab.BrowserSupport.get_isAndroid()){$0=spiff.OrientationHandler.$F();if(ss.isValue($0)){return $0;}}$0=(spiff.OrientationHandler.$3.get_outerWidth()<spiff.OrientationHandler.$3.get_outerHeight())?0:90;return $0;}
spiff.OrientationHandler.$F=function(){try{return spiff.OrientationHandler.$2.orientation;}catch($0){}return null;}
spiff.OrientationHandler.$10=function(){if(ss.isValue(spiff.OrientationHandler.$6)){window.clearTimeout(spiff.OrientationHandler.$6);}spiff.OrientationHandler.$6=null;}
spiff.TableauEventHandler=function(domElement,config){this.startEvents={};this.moveEvents={};this.endEvents={};this.outEvents={};this.scrollEvents={};this.cancelEvents={};this.$0={};this.$1={};this.config=(config||spiff.$create_EventHandleSpec());this.config.domElem=domElement;this.makeRecognizers(this.config);this.configureDomElem(domElement);this.$A();this.setupEventNames();this.$7(domElement);}
spiff.TableauEventHandler.get_$4=function(){return spiff.TableauEventHandler.$2;}
spiff.TableauEventHandler.set_$4=function($p0){if(spiff.TableauEventHandler.$2!==$p0){spiff.TableauEventHandler.$2=$p0;}return $p0;}
spiff.TableauEventHandler.setHandler=function(spec,evt,fn){spec[evt]=fn;}
spiff.TableauEventHandler.removeHandler=function(spec,evt){spec[evt]=null;}
spiff.TableauEventHandler.isHandling=function(spec,evt){var $0=spec;return ss.isValue($0[evt]);}
spiff.TableauEventHandler.$5=function($p0,$p1){return $p0[$p1];}
spiff.TableauEventHandler.$6=function($p0){if(ss.isValue($p0)){$p0.cancel();}}
spiff.TableauEventHandler.prototype={isTouch:false,config:null,mousedown:false,lastMouseButtonPressed:null,handlingContextMenu:false,$3:null,get_usingHover:function(){return spiff.TableauEventHandler.isHandling(this.config,'hover')||spiff.TableauEventHandler.isHandling(this.config,'moving');},isStartEvent:function(eventName){return Object.keyExists(this.startEvents,eventName);},isMoveEvent:function(eventName){return Object.keyExists(this.moveEvents,eventName);},isEndEvent:function(eventName){return Object.keyExists(this.endEvents,eventName);},isOutEvent:function(eventName){return Object.keyExists(this.outEvents,eventName);},isScrollEvent:function(eventName){return Object.keyExists(this.scrollEvents,eventName);},isCancelEvent:function(eventName){return Object.keyExists(this.cancelEvents,eventName);},isMouseEvent:function(eventName){return this.$1[eventName]===1;},isTouchEvent:function(eventName){return this.$1[eventName]===2;},isRightClickEvent:function(eventName){return (eventName==='contextmenu'&&this.$1[eventName]===1);},isLeftMouseEvent:function(e){if(this.isMouseEvent(e.type)){var $0=spiff.MouseEventUtil.getMouseButtonEnum(e.originalEvent);if($0==='left'){if(tab.BrowserSupport.get_isMac()&&e.ctrlKey){return false;}return true;}}return false;},suppressHover:function(){if(this.get_usingHover()){this.$0.hover.suppressHover();}},unsuppressHover:function(){if(this.get_usingHover()){this.$0.hover.unsuppressHover();}},cancelHover:function(){if(this.get_usingHover()){this.$0.hover.cancel();}},update:function(spec){$.extend(this.config,spec);var $dict1=this.$0;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;$1.update(this.config);}this.$A();},destroy:function(){this.dispose();},dispose:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$3);while($enum1.moveNext()){var $0=$enum1.current;dojo.disconnect($0);}if(ss.isValue(this['debugger'])){this['debugger'].destroy();}spiff.TableauEventHandler.$6(this.$0.discrete);spiff.TableauEventHandler.$6(this.$0.drag);spiff.TableauEventHandler.$6(this.$0.hover);spiff.TableauEventHandler.$6(this.$0.pinch);},setupEventNames:function(){this.startEvents['touchstart']=2;this.moveEvents['touchmove']=2;this.endEvents['touchend']=2;this.cancelEvents['touchcancel']=2;if(tsConfig.is_mobile){if(!tsConfig.is_touch){this.startEvents['mousedown']=1;this.moveEvents['mousemove']=1;this.endEvents['mouseup']=1;this.outEvents['mouseout']=1;}}else{this.startEvents['mousedown']=1;this.moveEvents['mousemove']=1;this.endEvents['mouseup']=1;this.outEvents['mouseout']=1;this.scrollEvents['scroll']=1;this.endEvents['contextmenu']=1;}$.extend(this.$1,this.startEvents,this.moveEvents,this.endEvents,this.outEvents,this.scrollEvents,this.cancelEvents);},makeRecognizers:function(spec){this.$0.drag=new spiff.Drag(spec);this.$0.discrete=new spiff.Discrete(spec);this.$0.pinch=new spiff.Pinch(spec);if(this.get_usingHover()){this.$0.hover=new spiff.Hover(spec);}},configureDomElem:function(domElem){domElem.style['-webkit-user-select']='none';domElem.style['-webkit-touch-callout']='none';domElem.style['-webkit-tap-highlight-color']='transparent';domElem.style['-ms-touch-action']='none';},handler:function($p0){var $0=new spiff.NormalizedEvent($p0,this.config.domElem);if(!tsConfig.is_mobile&&this.isTouchEvent($0.type)){if(tab.DomUtil.handleTouchEvents($0.target)){$p0.preventDefault();}else{return;}}if(this.mousedown&&spiff.TableauEventHandler.get_$4()!=='left'){this.mousedown=false;}if($0.touches.length>1&&!this.$9($0)){var $dict1=this.$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=$1.value;$2.cancel();}return;}if(this.isScrollEvent($0.type)){this.mousedown=false;}else if(this.isOutEvent($0.type)){if(this.get_usingHover()){this.$0.hover.out($0);}}else if(this.isStartEvent($0.type)){this.handlingContextMenu=false;this.lastMouseButtonPressed=spiff.MouseEventUtil.getMouseButtonEnum($p0);if(this.isMouseEvent($0.type)){if(!this.isLeftMouseEvent($0)){return;}this.mousedown=true;spiff.TableauEventHandler.set_$4(this.lastMouseButtonPressed);}if(this.get_usingHover()){this.$0.hover.start($0);}this.$0.discrete.start($0);this.$0.drag.start($0);if(ss.isValue(this.$0.pinch)){this.$0.pinch.start($0);}}else if(this.isMoveEvent($0.type)){if(this.get_usingHover()){this.$0.hover.move($0);}if(this.isMouseEvent($0.type)&&this.lastMouseButtonPressed!=='left'){return;}if(this.isMouseEvent($0.type)&&!this.mousedown){return;}this.$0.discrete.move($0);this.$0.drag.move($0);if(ss.isValue(this.$0.pinch)){this.$0.pinch.move($0);}}else{spiff.TableauEventHandler.set_$4('none');if(this.isMouseEvent($0.type)){this.mousedown=false;}if(this.get_usingHover()){this.$0.hover.end($0);}if(ss.isValue(this.$0.pinch)){this.$0.pinch.end($0);}this.$0.drag.end($0);if(this.isMouseEvent($0.type)&&(this.isRightClickEvent($0.type)||this.lastMouseButtonPressed==='right')){this.handlingContextMenu=true;}if(tab.BrowserSupport.get_isMac()&&this.handlingContextMenu&&this.isMouseEvent($0.type)&&$0.type==='mouseup'){return;}if(this.handlingContextMenu&&this.isMouseEvent($0.type)&&!this.isRightClickEvent($0.type)){return;}this.$0.discrete.end($0);}},$7:function($p0){var $0=ss.Delegate.create(this,function($p1_0){
this.handler($p1_0);});this.$3=new Array(Object.getKeyCount(this.$1));var $1=0;var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1));while($enum1.moveNext()){var $2=$enum1.current;this.$3[$1]=dojo.connect($p0, $2, this, $0);$1++;}},$8:function(){return spiff.TableauEventHandler.isHandling(this.config,'pressDragStart')||spiff.TableauEventHandler.isHandling(this.config,'pressDragMove')||spiff.TableauEventHandler.isHandling(this.config,'pressDragEnd')||spiff.TableauEventHandler.isHandling(this.config,'doublePressDragStart')||spiff.TableauEventHandler.isHandling(this.config,'doublePressDragMove')||spiff.TableauEventHandler.isHandling(this.config,'doublePressDragEnd');},$9:function($p0){var $0=$p0.touches[0].target;var $1=$p0.touches[1].target;var $2=document.body;var $3=$p0.currentTarget;var $4=false;while(!$4&&ss.isValue($0)&&ss.isValue($1)){$4=true;if($0!==$3&&$0!==$2){$0=$0.parentNode;$4=false;}if($1!==$3&&$1!==$2){$1=$1.parentNode;$4=false;}if($0===$1){$4=true;}}return $0===$1;},$A:function(){if(!this.$8()){return;}var $0=ss.Delegate.create(this,function($p1_0){
if(spiff.TableauEventHandler.isHandling(this.config,'press')){var $1_1=spiff.TableauEventHandler.$5(this.config,'press');$1_1($p1_0);}var $1_0=spiff.$create_EventHandleSpec();spiff.TableauEventHandler.setHandler($1_0,'dragStart',spiff.TableauEventHandler.$5(this.config,'pressDragStart'));spiff.TableauEventHandler.setHandler($1_0,'dragMove',spiff.TableauEventHandler.$5(this.config,'pressDragMove'));spiff.TableauEventHandler.setHandler($1_0,'dragEnd',spiff.TableauEventHandler.$5(this.config,'pressDragEnd'));spiff.TableauEventHandler.setHandler($1_0,'pinchStart',spiff.TableauEventHandler.$5(this.config,'doublePressDragStart'));spiff.TableauEventHandler.setHandler($1_0,'pinchMove',spiff.TableauEventHandler.$5(this.config,'doublePressDragMove'));spiff.TableauEventHandler.setHandler($1_0,'pinchEnd',spiff.TableauEventHandler.$5(this.config,'doublePressDragEnd'));this.$0.drag.update($1_0);if(ss.isValue(this.$0.pinch)){this.$0.pinch.update($1_0);}});var $1=ss.Delegate.create(this,function($p1_0){
if(spiff.TableauEventHandler.isHandling(this.config,'lastTouch')){var $1_0=spiff.TableauEventHandler.$5(this.config,'lastTouch');$1_0($p1_0);}this.$0.drag.update(this.config);if(ss.isValue(this.$0.pinch)){this.$0.pinch.update(this.config);}});var $2=spiff.$create_EventHandleSpec();spiff.TableauEventHandler.setHandler($2,'press',$0);spiff.TableauEventHandler.setHandler($2,'lastTouch',$1);this.$0.discrete.update($2);}}
spiff.MouseCapture=function(){}
spiff.MouseCapture.get_$1=function(){return tab.Logger.lazyGetLogger(spiff.MouseCapture);}
spiff.MouseCapture.get_browserCaptureMouseEvents=function(){return tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9&&tab.BrowserSupport.get_mouseCapture();}
spiff.MouseCapture.get_$2=function(){return !tsConfig.is_mobile&&tab.BrowserSupport.get_addEventListener();}
spiff.MouseCapture.get_$3=function(){return tab.BrowserSupport.get_isIE()&&tabBootstrap.Utility.get_embedMode()!=='notEmbedded';}
spiff.MouseCapture.setCapture=function(element,retargetToElement,handler,keepExistingHandler){tab.Param.verifyValue(element,'element');tab.Param.verifyValue(handler,'handler');if(spiff.MouseCapture.get_browserCaptureMouseEvents()){spiff.MouseCapture.releaseCapture();element.setCapture(retargetToElement);}else if(spiff.MouseCapture.get_$2()){if(ss.isNullOrUndefined(spiff.MouseCapture.$0)||ss.isNullOrUndefined(keepExistingHandler)||!keepExistingHandler){spiff.MouseCapture.releaseCapture();document.addEventListener('mousemove',spiff.MouseCapture.$4,true);document.addEventListener('mouseup',spiff.MouseCapture.$5,true);document.addEventListener('mouseout',spiff.MouseCapture.$6,true);spiff.MouseCapture.$0=handler;}else{}}}
spiff.MouseCapture.releaseCapture=function(){if(spiff.MouseCapture.get_browserCaptureMouseEvents()){document.releaseCapture();}else if(spiff.MouseCapture.get_$2()){document.removeEventListener('mousemove',spiff.MouseCapture.$4,true);document.removeEventListener('mouseup',spiff.MouseCapture.$5,true);document.removeEventListener('mouseout',spiff.MouseCapture.$6,true);}}
spiff.MouseCapture.$4=function($p0){if(ss.isValue(spiff.MouseCapture.$0)){spiff.MouseCapture.$0.handleCapturedMouseMove($p0);}}
spiff.MouseCapture.$5=function($p0){spiff.MouseCapture.$7($p0);}
spiff.MouseCapture.$6=function($p0){if(spiff.MouseCapture.get_$3()&&spiff.MouseCapture.$8($p0)){spiff.MouseCapture.$7($p0);}}
spiff.MouseCapture.$7=function($p0){spiff.MouseCapture.releaseCapture();if(ss.isValue(spiff.MouseCapture.$0)){spiff.MouseCapture.$0.handleCapturedMouseComplete($p0);spiff.MouseCapture.$0=null;}}
spiff.MouseCapture.$8=function($p0){return ss.isNullOrUndefined($p0.toElement)||$p0.toElement.nodeName==='HTML';}
spiff.ClickBuster=function(){}
spiff.ClickBuster.add_clickBustDetected=function(value){spiff.ClickBuster.$2=ss.Delegate.combine(spiff.ClickBuster.$2,value);}
spiff.ClickBuster.remove_clickBustDetected=function(value){spiff.ClickBuster.$2=ss.Delegate.remove(spiff.ClickBuster.$2,value);}
spiff.ClickBuster.preventGhostClick=function(pageX,pageY,timeout){if(!tsConfig.is_touch||!tab.BrowserSupport.get_addEventListener()){return;}if(ss.isNullOrUndefined(spiff.ClickBuster.$1)){spiff.ClickBuster.$1=[];document.addEventListener('click',spiff.ClickBuster.$4,true);}spiff.ClickBuster.$1.add(new ss.Tuple(pageX,pageY));window.setTimeout(spiff.ClickBuster.$3,timeout||600);}
spiff.ClickBuster.$3=function(){spiff.ClickBuster.$1.removeAt(0);}
spiff.ClickBuster.$4=function($p0){var $0=$p0.pageX;var $1=$p0.pageY;var $enum1=ss.IEnumerator.getEnumerator(spiff.ClickBuster.$1);while($enum1.moveNext()){var $2=$enum1.current;if(Math.abs($2.first-$0)<25&&Math.abs($2.second-$1)<25){$p0.stopPropagation();$p0.preventDefault();if(ss.isValue(spiff.ClickBuster.$2)){spiff.ClickBuster.$2($p0);}}}}
spiff.MouseEventUtil=function(){}
spiff.MouseEventUtil.get_clickEvent=function(){return (tsConfig.is_touch)?'touchstart':'click';}
spiff.MouseEventUtil.getMouseButtonEnum=function(e){spiff.MouseEventUtil.$3();var $0='none';var $1=e.which;if(!ss.isNullOrUndefined($1)){var $2=$1;if(Object.keyExists(spiff.MouseEventUtil.$1,$2)){$0=spiff.MouseEventUtil.$1[$2];}}else if(!ss.isNullOrUndefined(e.button)){var $3=e.button;if(Object.keyExists(spiff.MouseEventUtil.$0,$3)){$0=spiff.MouseEventUtil.$0[$3];}}return $0;}
spiff.MouseEventUtil.$3=function(){if(!spiff.MouseEventUtil.$2){spiff.MouseEventUtil.$0={};spiff.MouseEventUtil.$0[1]='left';spiff.MouseEventUtil.$0[4]='middle';spiff.MouseEventUtil.$0[2]='right';spiff.MouseEventUtil.$1={};spiff.MouseEventUtil.$1[1]='left';spiff.MouseEventUtil.$1[2]='middle';spiff.MouseEventUtil.$1[3]='right';spiff.MouseEventUtil.$2=true;}}
spiff.Template=function(root){this.disposables=new tab.DisposableHolder();this.$0=root;}
spiff.Template.fromHtml=function(html){return new spiff.Template($(html));}
spiff.Template.prototype={$0:null,get_domRoot:function(){return this.$0;},getElementsBySelector:function(selector){return this.get_domRoot().find(selector);},getElementBySelector:function(selector){var $0=this.getElementsBySelector(selector);return $0;},dispose:function(){this.disposables.dispose();this.get_domRoot().remove();}}
spiff.EventUtil=function(){}
spiff.EventUtil.bindWithDispose=function(element,eventName,handler){var $0=String.format('{0}.{1}',eventName,++spiff.EventUtil.$0);element.bind($0,handler);return new tab.CallOnDispose(function(){
element.unbind($0);});}
spiff.EventUtil.subscribeWithDispose=function(eventName,handler){var $0=dojo.subscribe(eventName,handler);return new tab.CallOnDispose(function(){
dojo.unsubscribe($0);});}
spiff.EventUtil.isCtrlKey=function(e){if(ss.isNullOrUndefined(e)){return false;}return (tab.BrowserSupport.get_isMac())?e.metaKey:e.ctrlKey;}
spiff.HoverAddClassBehavior=function(){}
spiff.HoverAddClassBehavior.attach=function(widget,classToAdd,childSelector){classToAdd=classToAdd||'hover';return new spiff.HoverBehavior(widget,childSelector,function($p1_0){
spiff.HoverAddClassBehavior.$0($p1_0,classToAdd);},function($p1_0){
spiff.HoverAddClassBehavior.$1($p1_0,classToAdd);});}
spiff.HoverAddClassBehavior.$0=function($p0,$p1){$($p0.currentTarget).addClass($p1);}
spiff.HoverAddClassBehavior.$1=function($p0,$p1){$($p0.currentTarget).removeClass($p1);}
spiff.HoverBehavior=function(widget,childSelector,onEnter,onExit){this.$3=widget;this.$0=childSelector;this.$1=onEnter;this.$2=onExit;this.$3.add_disposed(ss.Delegate.create(this,this.$7));if(ss.isValue(childSelector)){this.$3.get_element().delegate(childSelector,'mouseenter'+this.get_$4(),ss.Delegate.create(this,this.$5));this.$3.get_element().delegate(childSelector,'mouseleave'+this.get_$4(),ss.Delegate.create(this,this.$6));}else{this.$3.get_element().bind('mouseenter'+this.get_$4(),ss.Delegate.create(this,this.$5));this.$3.get_element().bind('mouseleave'+this.get_$4(),ss.Delegate.create(this,this.$6));}}
spiff.HoverBehavior.prototype={$0:null,$1:null,$2:null,$3:null,get_$4:function(){return String.format('.{0}',Type.getInstanceType(this).get_fullName().replaceAll('.','_'));},dispose:function(){if(this.$3==null){return;}this.$3.remove_disposed(ss.Delegate.create(this,this.$7));if(ss.isValue(this.$0)){this.$3.get_element().undelegate(this.$0,this.get_$4());}else{this.$3.get_element().unbind(this.get_$4());}this.$3=null;},$5:function($p0){if(ss.isValue(this.$1)){this.$1($p0);}},$6:function($p0){if(ss.isValue(this.$2)){this.$2($p0);}},$7:function($p0,$p1){this.dispose();}}
spiff.SpiffBrowserViewport=function(dimensions,getVisibleRoomFunc){this.$0=dimensions;this.$1=getVisibleRoomFunc;}
spiff.SpiffBrowserViewport.getViewport=function(callback){if(spiff.SpiffBrowserViewport.getSpiffBrowserViewportFunc!=null){spiff.SpiffBrowserViewport.getSpiffBrowserViewportFunc(callback);}else{callback(new spiff.SpiffBrowserViewport(null,null));}}
spiff.SpiffBrowserViewport.prototype={$0:null,$1:null,get_dimensions:function(){return this.$0;},get_getVisibleRoomFunc:function(){return this.$1;},getVisibleRoom:function(position){if(this.get_getVisibleRoomFunc()!=null){return this.get_getVisibleRoomFunc()(position);}var $0=2147483647;return spiff.$create_VisibleRoom($0,$0,$0,$0);}}
spiff.MenuViewModel=function(){this.$4=new spiff.MenuViewTheme();spiff.MenuViewModel.initializeBase(this);}
spiff.MenuViewModel.createForMenu=function(m,clickHandler,theme){var $0=new spiff.MenuViewModel();$0.set_menu(m);if(ss.isValue(clickHandler)){$0.add_menuItemClicked(clickHandler);$0.disposables.add(new tab.CallOnDispose(function(){
$0.remove_menuItemClicked(clickHandler);}));}$0.disposeOnHide();$0.set_theme((theme||new spiff.MenuViewTheme()));spiff.ObjectRegistry.newView(spiff.MenuView,$0);return $0;}
spiff.MenuViewModel.handleMenuActionItemClicked=function(arg){if($.isFunction(arg.get_data())){(arg.get_data())();}}
spiff.MenuViewModel.prototype={$2:null,$3:false,$5:null,$6:null,add_shown:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_shown:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,add_hidden:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_hidden:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,add_menuChanged:function(value){this.$9=ss.Delegate.combine(this.$9,value);},remove_menuChanged:function(value){this.$9=ss.Delegate.remove(this.$9,value);},$9:null,add_menuItemClicked:function(value){this.$A=ss.Delegate.combine(this.$A,value);},remove_menuItemClicked:function(value){this.$A=ss.Delegate.remove(this.$A,value);},$A:null,add_menuItemSelectionChanged:function(value){this.$B=ss.Delegate.combine(this.$B,value);},remove_menuItemSelectionChanged:function(value){this.$B=ss.Delegate.remove(this.$B,value);},$B:null,add_menuItemFocusChanged:function(value){this.$C=ss.Delegate.combine(this.$C,value);},remove_menuItemFocusChanged:function(value){this.$C=ss.Delegate.remove(this.$C,value);},$C:null,get_visible:function(){return this.$3;},get_menu:function(){return this.$2;},set_menu:function(value){if(_.isEqual(this.$2,value)){return;}this.$2=value;if(ss.isValue(this.$9)){this.$9();}return value;},get_theme:function(){return this.$4;},set_theme:function(value){this.$4=value;return value;},get_selectedItem:function(){return this.$5;},set_selectedItem:function(value){if(ss.isValue(this.$5)){if(ss.isValue(this.$B)){this.$B(this.$5,false);}}if(ss.isNullOrUndefined(value)){this.$5=null;return;}this.$5=value;if(ss.isValue(this.$B)){this.$B(this.$5,true);}return value;},get_focusedItem:function(){return this.$6;},set_focusedItem:function(value){if(this.$6===value){return;}if(ss.isValue(this.$6)){if(ss.isValue(this.$C)){this.$C(this.$6,false);}}if(ss.isNullOrUndefined(value)||!value.get_enabled()){this.$6=null;return;}this.$6=value;if(ss.isValue(this.$C)){this.$C(this.$6,true);}return value;},show:function(options){if(this.$3){return;}this.$3=true;if(ss.isValue(this.$7)){this.$7(options);}},dispose:function(){this.hide();spiff.MenuViewModel.callBaseMethod(this, 'dispose');},disposeOnHide:function(){var $0=ss.Delegate.create(this,function(){
_.defer(ss.Delegate.create(this,this.dispose));});this.add_hidden($0);this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_hidden($0);})));},hide:function(){if(!this.$3){return;}this.$3=false;this.raiseActionEvent(this.$8);},clickMenuItem:function(mi){if(!mi.get_enabled()){return;}this.hide();if(ss.isValue(this.$A)){this.$A(mi);}},iterateFocus:function(indexChange){var $0=this.findMenuForFocusedItem();if(ss.isNullOrUndefined($0)){return;}var $1=$0.get_menuItems().indexOf(this.get_focusedItem());if($1<0){return;}$1+=indexChange;while($1>=0&&$1<$0.get_menuItems().length&&($0.get_menuItems()[$1].get_isDivider()||!$0.get_menuItems()[$1].get_enabled())){$1+=indexChange;}if($1>=0&&$1<$0.get_menuItems().length){this.set_focusedItem($0.get_menuItems()[$1]);}},focusByNamePrefix:function(prefix){prefix=prefix.toLowerCase();var $0=this.findMenuForFocusedItem();if(ss.isNullOrUndefined($0)){return;}var $1=$0.get_menuItems().indexOf(this.get_focusedItem())+1;if($1>=$0.get_menuItems().length){$1=0;}var $2=$1;do{if($0.get_menuItems()[$2].get_enabled()&&!$0.get_menuItems()[$2].get_isDivider()){if(ss.isValue($0.get_menuItems()[$2].get_name())&&$0.get_menuItems()[$2].get_name().toLowerCase().startsWith(prefix)){this.set_focusedItem($0.get_menuItems()[$2]);return;}}++$2;if($2>=$0.get_menuItems().length){$2=0;}}while($2!==$1);},findMenuForFocusedItem:function(){if(ss.isNullOrUndefined(this.get_focusedItem())){return null;}var $0=null;$0=ss.Delegate.create(this,function($p1_0){
if($p1_0.get_menuItems().contains(this.get_focusedItem())){return $p1_0;}var $enum1=ss.IEnumerator.getEnumerator($p1_0.get_menuItems());while($enum1.moveNext()){var $1_0=$enum1.current;if(ss.isValue($1_0.get_subMenu())){var $1_1=$0($1_0.get_subMenu());if(ss.isValue($1_1)){return $1_1;}}}return null;});return $0(this.get_menu());},findItemContainingSubMenu:function(subMenu){if(ss.isNullOrUndefined(subMenu)||this.get_menu()===subMenu){return null;}var $0=null;$0=function($p1_0){
var $1_0=null;var $enum1=ss.IEnumerator.getEnumerator($p1_0.get_menuItems());while($enum1.moveNext()){var $1_1=$enum1.current;if(ss.isValue($1_1.get_subMenu())){$1_0=($1_1.get_subMenu()===subMenu)?$1_1:$0($1_1.get_subMenu());if(ss.isValue($1_0)){break;}}}return $1_0;};return $0(this.get_menu());}}
spiff.ShowMenuOptions=function(relativeDom,preferUp,minWidth){this.relativeDom=relativeDom;this.preferUp=preferUp;this.preferLeft=false;this.minWidth=minWidth;this.additionalMenuClass=null;}
spiff.ShowMenuOptions.create=function(relativeDom,preferUp,minWidth){return new spiff.ShowMenuOptions(relativeDom,preferUp,minWidth);}
spiff.ShowMenuOptions.preferDownAndLeft=function(relativeDom,minWidth){var $0=new spiff.ShowMenuOptions(relativeDom,false,minWidth);$0.preferLeft=true;return $0;}
spiff.ShowMenuOptions.prototype={relativeDom:null,preferUp:false,preferLeft:false,minWidth:null,additionalMenuClass:null}
spiff.MenuViewTheme=function(){}
spiff.MenuViewTheme.prototype={menuClass:'tabMenuBaseTheme',itemClass:'tabMenuItemBaseTheme',dividerClass:'tabMenuItemDividerBaseTheme',noIconClass:'tabMenuNoIcons',noDescClass:'tabMenuNoDesc'}
spiff.UnificationLightMenuTheme=function(){spiff.UnificationLightMenuTheme.initializeBase(this);this.itemClass='tabMenuItemUnificationTheme';this.menuClass='tabMenuUnificationTheme light';}
spiff.UnificationDarkMenuTheme=function(){spiff.UnificationDarkMenuTheme.initializeBase(this);this.itemClass='tabMenuItemUnificationTheme';this.menuClass='tabMenuUnificationTheme dark';}
spiff.Menu=function(items){this.$0=items;}
spiff.Menu.prototype={$0:null,get_menuItems:function(){return this.$0;}}
spiff.MenuItem=function(){this.id='menuItem'+(++spiff.MenuItem.$0);}
spiff.MenuItem.newDivider=function(){var $0=new spiff.MenuItem();$0.set_isDivider(true);$0.$6=false;return $0;}
spiff.MenuItem.newTextInput=function(action){var $0=new spiff.MenuItem();$0.set_isTextInput(true);$0.set_data(action);return $0;}
spiff.MenuItem.newActionItem=function(name,action){var $0=new spiff.MenuItem();$0.set_name(name);if(ss.isValue(action)){$0.set_data(action);$0.set_enabled(true);}return $0;}
spiff.MenuItem.newActionItemWithItemClass=function(name,action,itemClass){var $0=new spiff.MenuItem();$0.set_name(name);$0.set_itemClass(itemClass);if(ss.isValue(action)){$0.set_data(action);$0.set_enabled(true);}return $0;}
spiff.MenuItem.newItemWithIcon=function(data,name,iconClass){var $0=new spiff.MenuItem();$0.set_data(data);$0.set_name(name);$0.set_iconClass(iconClass);$0.set_iconClassTwo(null);$0.set_enabled(true);return $0;}
spiff.MenuItem.newItemWithIconAndDescription=function(data,name,iconClass,description){var $0=new spiff.MenuItem();$0.set_data(data);$0.set_name(name);$0.set_iconClass(iconClass);$0.set_enabled(true);$0.set_description(description);return $0;}
spiff.MenuItem.newItem=function(data,name,checkState,subMenu){var $0=new spiff.MenuItem();$0.set_data(data);$0.set_name(name);if(ss.isValue(checkState)){$0.$3=checkState;}if(ss.isValue(subMenu)){$0.$9=subMenu;}$0.set_enabled(true);return $0;}
spiff.MenuItem.prototype={id:null,$1:null,$2:null,$3:0,$4:null,$5:null,$6:false,$7:false,$8:false,$9:null,$A:null,$B:null,get_name:function(){return this.$1;},set_name:function(value){this.$1=value;return value;},get_description:function(){return this.$2;},set_description:function(value){this.$2=value;return value;},get_iconClass:function(){return this.$4;},set_iconClass:function(value){this.$4=value;return value;},get_iconClassTwo:function(){return this.$5;},set_iconClassTwo:function(value){this.$5=value;return value;},get_itemClass:function(){return this.$B;},set_itemClass:function(value){this.$B=value;return value;},get_checkState:function(){return this.$3;},set_checkState:function(value){this.$3=value;return value;},get_enabled:function(){return this.$6;},set_enabled:function(value){this.$6=value;return value;},get_isDivider:function(){return this.$7;},set_isDivider:function(value){this.$7=value;return value;},get_isTextInput:function(){return this.$8;},set_isTextInput:function(value){this.$8=value;return value;},get_subMenu:function(){return this.$9;},set_subMenu:function(value){this.$9=value;return value;},get_data:function(){return this.$A;},set_data:function(value){this.$A=value;return value;},get_id:function(){return this.id;}}
spiff.CustomMenuItem=function(){spiff.CustomMenuItem.initializeBase(this);}
spiff.CustomMenuItem.newCustomMenuItem=function(domRoot){var $0=new spiff.CustomMenuItem();$0.set_domRoot(domRoot);return $0;}
spiff.CustomMenuItem.prototype={$C:null,get_domRoot:function(){return this.$C;},set_domRoot:function(value){this.$C=value;return value;}}
spiff.UberPopupViewModel=function(){this.$3=0;spiff.UberPopupViewModel.initializeBase(this);}
spiff.UberPopupViewModel.createForContent=function(content){var $0=new spiff.UberPopupViewModel();$0.set_content(content);$0.disposeOnHide();spiff.ObjectRegistry.newView(spiff.UberPopupView,$0);$0.disposables.add(new tab.CallOnDispose(function(){
content.disposeViewModel();}));return $0;}
spiff.UberPopupViewModel.prototype={$2:null,add_shown:function(value){this.$4=ss.Delegate.combine(this.$4,value);},remove_shown:function(value){this.$4=ss.Delegate.remove(this.$4,value);},$4:null,add_hidden:function(value){this.$5=ss.Delegate.combine(this.$5,value);},remove_hidden:function(value){this.$5=ss.Delegate.remove(this.$5,value);},$5:null,add_commit:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_commit:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_mode:function(){return this.$3;},set_mode:function(value){if(this.$3===value){return;}this.$3=value;this.notifyPropertyChanged('mode');return value;},get_content:function(){return this.$2;},set_content:function(value){this.$2=value;if(ss.isValue(this.$2)){this.$2.updateUberPopupViewModel(this);}this.notifyPropertyChanged('content');return value;},disposeOnHide:function(){this.add_hidden(ss.Delegate.create(this,this.dispose));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_hidden(ss.Delegate.create(this,this.dispose));})));},show:function(options){if(ss.isNullOrUndefined(this.$4)){return;}this.$4(options);},hide:function(commitOnHide){if(ss.isNullOrUndefined(this.$5)){return;}commitOnHide=ss.isValue(commitOnHide);if(commitOnHide&&ss.isValue(this.$6)){this.$6();}this.$5();},addDisposables:function(disposable){this.disposables.add(disposable);}}
spiff.UberPopupShowOptions=function(relativeElement,horizontalAlign,edge,theme){this.relativeElement=relativeElement;if(ss.isValue(horizontalAlign)){this.horizontalAlign=horizontalAlign;}else{this.horizontalAlign=0;}if(ss.isValue(edge)){this.relativeViewportEdge=edge;}else{this.relativeViewportEdge=0;}if(ss.isValue(theme)){this.theme=theme;}else{this.theme=0;}}
spiff.UberPopupShowOptions.prototype={relativeElement:null,horizontalAlign:0,relativeViewportEdge:0,theme:0,limitPopupHeight:false,additionalClass:null}
spiff.MenuView=function(viewModel,template){this.menuStack=[];this.$12={};this.menuItemDisposables=new tab.DisposableHolder();spiff.MenuView.initializeBase(this,[viewModel,template]);this.menuViewModel=viewModel;this.dom=template;this.menuStack[0]=this.dom;this.menuViewModel.add_menuChanged(ss.Delegate.create(this,this.updateMenu));this.menuViewModel.add_shown(ss.Delegate.create(this,this.shown));this.menuViewModel.add_hidden(ss.Delegate.create(this,this.hidden));this.menuViewModel.add_menuItemSelectionChanged(ss.Delegate.create(this,this.$13));this.get_element().addClass(this.menuViewModel.get_theme().menuClass);}
spiff.MenuView.getMenuItem=function(menuItemDom){return menuItemDom.data('tabMenuMenuItem');}
spiff.MenuView.getMenuItemLevel=function(menuItemDom){return menuItemDom.data('tabMenuMenuItemLevel');}
spiff.MenuView.prototype={dom:null,menuViewModel:null,glass:null,dispose:function(){this.menuViewModel.remove_menuChanged(ss.Delegate.create(this,this.updateMenu));this.menuViewModel.remove_shown(ss.Delegate.create(this,this.shown));this.menuViewModel.remove_hidden(ss.Delegate.create(this,this.hidden));this.menuViewModel.remove_menuItemSelectionChanged(ss.Delegate.create(this,this.$13));this.menuItemDisposables.dispose();var $enum1=ss.IEnumerator.getEnumerator(this.menuStack);while($enum1.moveNext()){var $0=$enum1.current;$0.get_domRoot().remove();}this.menuStack.clear();this.removeGlass();spiff.MenuView.callBaseMethod(this, 'dispose');},removeGlass:function(){if(ss.isValue(this.glass)){this.glass.remove_click(ss.Delegate.create(this,this.glassClicked));this.glass.dispose();this.glass=null;}},onAddedToDom:function(){spiff.MenuView.callBaseMethod(this, 'onAddedToDom');if(!this.dom.get_domRoot().hasClass('tabMenuHasIconTwo')){return;}var $0=this.dom.get_domRoot().find('.tabMenuItemNameArea').outerWidth();var $1=this.$17(this.dom.get_domRoot(),'.tabMenuItemIconTwo');var $2=this.dom.get_domRoot().find('.tabMenuItemName');var $3=$2.outerWidth(true)-$2.outerWidth(false);$2.css('maxWidth',($0-$3-$1)+'px');$2.css('marginRight','2px');},getElementForMenuItem:function(mi){if(ss.isValue(mi)){return this.$12[mi.get_id()];}else{return null;}},updateMenu:function(){this.dom.content.children().remove();this.$12={};this.menuItemDisposables.dispose();this.menuItemDisposables=new tab.DisposableHolder();this.buildMenu(this.dom,this.menuViewModel.get_menu());},hidden:function(){this.dom.get_domRoot().detach();this.removeGlass();},shown:function(options){if(ss.isValue(options.minWidth)){var $1=this.dom.get_domRoot().outerWidth(true)-this.dom.get_domRoot().width();this.dom.get_domRoot().css('min-width',(options.minWidth-$1)+'px');}var $0=989;if(options.relativeDom.length>0){var $2=tab.DomUtil.getComputedZIndex(options.relativeDom[0]);if($2>$0){$0=Math.max(1000,$2+1);}}this.removeGlass();this.glass=new spiff.Glass();this.glass.set_zIndex($0-1);this.glass.add_click(ss.Delegate.create(this,this.glassClicked));this.glass.show();this.dom.get_domRoot().css('z-index',$0.toString());if(ss.isValue(options.additionalMenuClass)){this.dom.get_domRoot().addClass(options.additionalMenuClass);}spiff.SpiffBrowserViewport.getViewport(ss.Delegate.create(this,function($p1_0){
this.dom.get_domRoot().css('top','0px');this.dom.get_domRoot().css('left','0px');this.dom.get_domRoot().css('visibility','hidden');if($p1_0.get_dimensions()!=null){this.dom.get_domRoot().css('max-height',$p1_0.get_dimensions().h-20+'px');}this.dom.get_domRoot().appendTo($('body'));this.positionMenu($p1_0,options,this.dom);this.dom.get_domRoot().css('visibility','visible');this.onAddedToDom();this.dom.get_domRoot().show();}));},$13:function($p0,$p1){var $0=this.$12[$p0.get_id()];if(ss.isValue($0)&&$0.is(':visible')){$0.toggleClass('tabMenuSelectedItem',$p1);if($p1){$0.offsetParent().scrollTop($0.position().top);}}},glassClicked:function(){this.menuViewModel.hide();},activateSubmenu:function(mi,relativeObj){var $0=relativeObj.data('tabMenuMenuItemLevel');if(ss.isValue($0)&&$0<this.menuStack.length){return;}var $1=new spiff.MenuTemplate("<div class='tabMenu' tabindex='1'><div class='tabMenuContent'/></div>");$1.get_domRoot().addClass(this.menuViewModel.get_theme().menuClass);this.menuStack.add($1);this.buildMenu($1,mi.get_subMenu());this.showSubmenu(mi,relativeObj,$1);},getContentMaxWidth:function(menu){var $0=menu.get_domRoot().width();if(menu.get_domRoot().hasClass(this.menuViewModel.get_theme().noDescClass)&&!menu.get_domRoot().hasClass('tabMenuHasIconTwo')){return $0;}else{var $1=menu.content.width();var $2=$0-$1;var $3=this.$17(menu.get_domRoot(),'.tabMenuItemNameArea');var $4=(menu.get_domRoot().hasClass('tabMenuHasIconTwo'))?this.$17(menu.get_domRoot(),'.tabMenuItemIconTwo'):0;var $5=(menu.get_domRoot().hasClass(this.menuViewModel.get_theme().noDescClass))?0:this.$17(menu.get_domRoot(),'.tabMenuItemDesc');return $3+$4+$5+$2+20;}},positionMenu:function(spiffBrowserViewport,options,menu){var $0=5;var $1=tab.PointUtil.fromPosition(options.relativeDom.offset());var $2=this.getContentMaxWidth(menu);var $3=menu.get_domRoot().outerWidth(false)-menu.get_domRoot().width();var $4=$2+$3;var $5=$(window).width()-(2*$0);var $6=$(window).scrollLeft()+$0;var $7=$6+$5;var $8=menu.get_domRoot().outerHeight(false);var $9=$8-menu.get_domRoot().height();var $A=options.relativeDom.outerWidth(false);var $B=options.relativeDom.outerHeight(false);var $C,$D;var $E=spiffBrowserViewport.getVisibleRoom($1);var $F=-1;if(!options.preferUp&&$E.roomBelow>=($8+$B)){$D=$1.y+$B;}else if($E.roomAbove>$8){$D=$1.y-$8;}else{if($E.roomBelow-$B>=$E.roomAbove){$D=$1.y+$B;$F=$E.roomBelow-$B-$9-$0;}else{$D=$1.y-$E.roomAbove+$0;$F=$E.roomAbove-$9-$0;}}if($4>$5){$4=$5;$2=$4-$3;}if(options.preferLeft){$C=$1.x+$A-$4;}else{$C=$1.x;}$C=Math.max($C,$6);if($C+$4>$7){$C=$7-$4;}var $10={};$10['top']=$D+'px';$10['left']=$C+'px';if($F!==-1){$10['max-height']=$F+'px';}$10['width']=$2+'px';menu.get_domRoot().css($10);},buildMenu:function(root,m){var $0=null;var $1=false;var $2=false;var $enum1=ss.IEnumerator.getEnumerator(m.get_menuItems());while($enum1.moveNext()){var $3=$enum1.current;var $4;if($3.get_isDivider()){$4=new spiff.MenuItemDividerTemplate().get_domRoot().addClass(this.menuViewModel.get_theme().dividerClass);}else{if(ss.isValue($0)&&!$0.get_isDivider()){root.content.append($("<div class='tabMenuItemSpacer'/>"));}if($3.get_isTextInput()){var $5=this.$16($3);$4=$5.get_domRoot();}else if(Type.canCast($3,spiff.CustomMenuItem)){$4=($3).get_domRoot();}else{var $6=new spiff.MenuItemTemplate();$6.get_domRoot().addClass(this.menuViewModel.get_theme().itemClass);if(ss.isValue($3.get_itemClass())){$6.get_domRoot().addClass($3.get_itemClass());}$6.name.text($3.get_name());if(!$3.get_enabled()){$6.get_domRoot().addClass('tabDisabled');}if(ss.isValue($3.get_description())&&$3.get_description().length>0){$6.description.text($3.get_description());$2=true;}switch($3.get_checkState()){case 1:$6.icon.addClass('tabMenuItemCheckIcon');$1=true;break;case 2:$6.icon.addClass('tabMenuItemRadioIcon');$1=true;break;default:if(ss.isValue($3.get_iconClass())&&$3.get_iconClass().length>0){$6.icon.addClass($3.get_iconClass());$1=true;}break;}if(ss.isValue($3.get_iconClassTwo())&&$3.get_iconClassTwo().length>0){$6.iconTwo.addClass($3.get_iconClassTwo());this.dom.get_domRoot().addClass('tabMenuHasIconTwo');}if(ss.isValue($3.get_subMenu())){$6.subMenuIcon.css('display','block');}this.menuItemDisposables.add(spiff.TableauClickHandler.targetAndClick($6.get_domRoot().get(0),this.$14($3,$6)));$6.get_domRoot().data('tabMenuMenuItem',$3);$6.get_domRoot().data('tabMenuMenuItemLevel',this.menuStack.length);$4=$6.get_domRoot();}$4.addClass('tabMenuMenuItem');}root.content.append($4);this.$12[$3.get_id()]=$4;$0=$3;}if(!$1){root.get_domRoot().addClass(this.menuViewModel.get_theme().noIconClass);}if(!$2){root.get_domRoot().addClass(this.menuViewModel.get_theme().noDescClass);}if(ss.isValue(this.menuViewModel.get_selectedItem())){this.$13(this.menuViewModel.get_selectedItem(),true);}},$14:function($p0,$p1){if(ss.isValue($p0.get_subMenu())){return ss.Delegate.create(this,function(){
this.activateSubmenu($p0,$p1.get_domRoot());});}return ss.Delegate.create(this,function(){
this.menuViewModel.clickMenuItem($p0);});},$15:function($p0){if($p0.which===13){var $0=$p0.data['callback'];if($.isFunction($0)){($0)($($p0.target).val());}}},$16:function($p0){var $0=new spiff.MenuItemTextInputTemplate();$0.textInput.bind('keydown',{callback:$p0.get_data()},ss.Delegate.create(this,this.$15));this.disposables.add(new tab.CallOnDispose(function(){
$0.textInput.unbind('keydown');}));return $0;},$17:function($p0,$p1){var $0=0;$p0.find($p1).each(function($p1_0,$p1_1){
var $1_0=$($p1_1).outerWidth(true);if($1_0>$0){$0=$1_0;}});return $0;}}
spiff.MenuTemplate=function(html){spiff.MenuTemplate.initializeBase(this,[$(html)]);this.content=this.getElementBySelector('.tabMenuContent');}
spiff.MenuTemplate.prototype={content:null}
spiff.MenuItemTemplate=function(){spiff.MenuItemTemplate.initializeBase(this,[$("\n<div class='tabMenuItem'>\n  <div class='tabMenuItemIcon' />\n  <div class='tabMenuItemNameArea'>\n    <span class='tabMenuItemName'/><span class='tabMenuItemIconTwo'/><div class='tabMenuItemDesc'/>\n  </div>\n  <div class='tabMenuItemSubMenuIcon'/></div>")]);this.icon=this.getElementBySelector('.tabMenuItemIcon');this.iconTwo=this.getElementBySelector('.tabMenuItemIconTwo');this.name=this.getElementBySelector('.tabMenuItemName');this.description=this.getElementBySelector('.tabMenuItemDesc');this.subMenuIcon=this.getElementBySelector('.tabMenuItemSubMenuIcon');}
spiff.MenuItemTemplate.prototype={icon:null,iconTwo:null,description:null,name:null,subMenuIcon:null}
spiff.MenuItemTextInputTemplate=function(){spiff.MenuItemTextInputTemplate.initializeBase(this,[$("\n<div class='tabMenuItemTextInputPanel'>\n  <div class='tabMenuItemTextInputHolder'>\n    <input class='tabMenuItemTextInput' type='text'>\n  </div>\n</div>")]);this.textInput=this.getElementBySelector('.tabMenuItemTextInput');}
spiff.MenuItemTextInputTemplate.prototype={textInput:null}
spiff.MenuItemDividerTemplate=function(){spiff.MenuItemDividerTemplate.initializeBase(this,[$("<div class='tabMenuItemDivider'/>")]);}
spiff.Selector=function(){this.$2={};spiff.Selector.initializeBase(this);}
spiff.Selector.prototype={$3:false,get_multiSelect:function(){return this.$3;},set_multiSelect:function(value){this.$3=value;return value;},get_selectedItems:function(){var $0=[];var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$2));while($enum1.moveNext()){var $1=$enum1.current;$0.add(this.$2[$1]);}return $0;},get_firstSelectedItem:function(){var $0=this.get_selectedItems();return ($0.length>0)?$0[0]:null;},selectItem:function(item){this.$4(item,false);},selectSingleItem:function(item){this.$4(item,true);},$4:function($p0,$p1){var $0=false;if($p1||!this.get_multiSelect()){$0=this.$6($p0);}$0=this.$5($p0)||$0;if($0){this.notifyPropertyChanged('selected');}},selectItems:function(items,unselectOthers){if(this.get_multiSelect()){var $0=false;if(unselectOthers){$0=this.$6(null);}if(ss.isValue(items)){for(var $1=0,$2=items.length;$1<$2;$1++){$0=this.$5(items[$1])||$0;}}if($0){this.notifyPropertyChanged('selected');}}else{var $3=(ss.isValue(items)&&items.length>0)?items[0]:null;this.selectItem($3);}},$5:function($p0){if(ss.isValue($p0)){if(ss.isValue($p0.get_selectionId())&&!Object.keyExists(this.$2,$p0.get_selectionId())){this.$2[$p0.get_selectionId()]=$p0;$p0.set_selected(true);return true;}}return false;},clearSelection:function(itemToRemainSelected){if(this.$6(itemToRemainSelected)){this.notifyPropertyChanged('selected');}},$6:function($p0){var $0=Object.getKeyCount(this.$2);var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$2));while($enum1.moveNext()){var $1=$enum1.current;if(ss.isValue($p0)&&$1===$p0.get_selectionId()){continue;}this.$2[$1].set_selected(false);delete this.$2[$1];}return $0>0&&Object.getKeyCount(this.$2)!==$0;},unselectItem:function(item){if(this.$7(item)){this.notifyPropertyChanged('selected');}},$7:function($p0){if(ss.isValue($p0)&&Object.keyExists(this.$2,$p0.get_selectionId())){delete this.$2[$p0.get_selectionId()];$p0.set_selected(false);return true;}return false;},dispose:function(){Object.clearKeys(this.$2);spiff.Selector.callBaseMethod(this, 'dispose');}}
spiff.ListViewModel=function(collection){spiff.ListViewModel.initializeBase(this);this.update(collection);}
spiff.ListViewModel.prototype={$2:null,$3:null,$4:null,$5:null,get_originalCollection:function(){return this.$2;},get_collection:function(){return this.$3;},get_filter:function(){return this.$4;},set_filter:function(value){this.$4=value;this.$6();return value;},get_sort:function(){return this.$5;},set_sort:function(value){this.$5=value;this.$6();return value;},update:function(collection){this.$2=collection||[];this.$6();},$6:function(){if(ss.isValue(this.$4)||ss.isValue(this.$5)){this.$3=(ss.isValue(this.$4))?this.$2.filter(this.$4):this.$2.clone();if(ss.isValue(this.$5)){this.$3.sort(this.$5);}}else{this.$3=this.$2;}this.notifyPropertyChanged('collection');}}
spiff.ListItemViewModel=function(id,label,data){spiff.ListItemViewModel.initializeBase(this);tab.Param.verifyString(id,'id');this.id=id;this.$2=label;if(ss.isValue(data)){this.$3=data;}}
spiff.ListItemViewModel.newListItem=function(id,label,data){var $0=$('<span/>');$0.text(label);return new spiff.ListItemViewModel(id,$0,data);}
spiff.ListItemViewModel.newFormattedListItem=function(id,label,data){return new spiff.ListItemViewModel(id,label,data);}
spiff.ListItemViewModel.prototype={id:null,$2:null,$3:null,get_id:function(){return this.id;},get_label:function(){return this.$2;},get_data:function(){return this.$3;}}
spiff.UberPopupView=function(viewModel,t){spiff.UberPopupView.initializeBase(this,[viewModel,t]);this.popupViewModel=viewModel;this.popupViewModel.add_shown(ss.Delegate.create(this,this.shown));this.popupViewModel.add_hidden(ss.Delegate.create(this,this.hidden));}
spiff.UberPopupView.prototype={popupViewModel:null,$E:null,$F:null,$10:false,$11:null,get_uberPopupMinimalistShadowHeight:function(){return 0;},get_showOptions:function(){return this.$11;},dispose:function(){if(ss.isValue(this.$F)){(this.$F).dispose();}this.popupViewModel.remove_shown(ss.Delegate.create(this,this.shown));this.popupViewModel.remove_hidden(ss.Delegate.create(this,this.hidden));this.disposeGlass();spiff.UberPopupView.callBaseMethod(this, 'dispose');},updateMode:function(){if(!this.$10){return;}if(!this.popupViewModel.get_mode()){this.showGlass();}else if(this.popupViewModel.get_mode()===1){this.hideGlass();}},onViewModelPropertyChanged:function(sender,e){if(e.get_propertyName()==='mode'){this.updateMode();}else{this.updateContent();}},shown:function(options){this.updateContent();this.$10=true;this.$11=options;this.updateMode();if(options.theme===1){this.get_element().addClass('tabUberPopupMinimal');}spiff.SpiffBrowserViewport.getViewport(ss.Delegate.create(this,function($p1_0){
this.get_element().appendTo('body');this.get_element().hide();if(Type.canCast(this.$F,spiff.BaseView)){(this.$F).onAddedToDom();}if(ss.isValue(options.additionalClass)){this.get_element().addClass(options.additionalClass);}this.positionPopup($p1_0,options,false);this.get_element().show();}));},hidden:function(){this.$10=false;this.hideGlass();this.get_element().hide();this.get_element().detach();},showGlass:function(){if(ss.isNullOrUndefined(this.$E)){this.$E=new spiff.Glass();this.$E.set_zIndex(988);this.$E.add_click(ss.Delegate.create(this,this.glassClicked));}this.$E.show();},hideGlass:function(){if(ss.isValue(this.$E)){this.$E.hide();}},disposeGlass:function(){if(ss.isValue(this.$E)){this.$E.remove_click(ss.Delegate.create(this,this.glassClicked));this.$E.dispose();this.$E=null;}},glassClicked:function(){this.popupViewModel.hide(true);},positionPopupVertically:function(viewport,options){this.positionPopup(viewport,options,true);},positionPopup:function(viewport,options,verticalOnly){var $0=options.relativeElement;var $1=options.horizontalAlign;var $2=(options.theme===1)?this.get_uberPopupMinimalistShadowHeight():this.get_uberPopupShadowHeight();var $3=$0.outerHeight(true);var $4=tab.PointUtil.fromPosition($0.offset());var $5=viewport.getVisibleRoom($4);if(options.limitPopupHeight){var $B=Math.max($5.roomAbove-$2,$5.roomBelow-$3-$2);this.get_element().css('max-height',$B+'px');}var $6=this.get_element().outerHeight(true);var $7=this.get_element().outerWidth(true);var $8=$4.x;if(!$1){if($5.roomRight<$7){$8-=($7-$5.roomRight);}}else if($1===2){var $C=$8+$0.outerWidth(true);$8=$C-$7;}else if($1===1){var $D=$8+($0.outerWidth(true)/2);$8=$D-($7/2);}var $9=tab.$create_Point($8,0);if($5.roomBelow>=($6+$3+$2)){$9.y=$4.y+$3;}else if($5.roomAbove>$6+$2){$9.y=$4.y-$6;}else if($5.roomBelow>=$5.roomAbove){$9.y=$4.y-($6-$5.roomBelow+$2);}else{$9.y=$4.y-$5.roomAbove+$2;}var $A={};$A['top']=$9.y+'px';if(!verticalOnly){if(options.relativeViewportEdge===1){var $E=$5.roomLeft+$5.roomRight;var $F=$E-$9.x-$7;$A['right']=$F+'px';}else{$A['left']=$9.x+'px';}}this.get_element().css($A);},updateContent:function(){if(ss.isValue(this.$F)){(this.$F).dispose();}var $0=(this.get_template()).content;$0.children().detach();this.$F=spiff.ObjectRegistry.newView(this.popupViewModel.get_content().get_viewType(),this.popupViewModel.get_content().get_viewModel());$0.append(this.$F.get_element());if(this.$10&&Type.canCast(this.$F,spiff.BaseView)){(this.$F).onAddedToDom();}}}
spiff.UberPopupTemplate=function(){spiff.UberPopupTemplate.initializeBase(this,[$("<div class='tabUberPopup'><div class='tabUberPopupContent'/></div>")]);this.content=this.getElementBySelector('.tabUberPopupContent');}
spiff.UberPopupTemplate.prototype={content:null}
spiff.Button=function(element){spiff.Button.initializeBase(this,[element]);this.$17();}
spiff.Button.prototype={$A:'hover',$B:'focus',$C:'disabled',$D:null,$E:null,add_press:function(value){this.$F=ss.Delegate.combine(this.$F,value);},remove_press:function(value){this.$F=ss.Delegate.remove(this.$F,value);},$F:null,add_click:function(value){this.$10=ss.Delegate.combine(this.$10,value);},remove_click:function(value){this.$10=ss.Delegate.remove(this.$10,value);},$10:null,add_shiftClick:function(value){this.$11=ss.Delegate.combine(this.$11,value);},remove_shiftClick:function(value){this.$11=ss.Delegate.remove(this.$11,value);},$11:null,add_ctrlClick:function(value){this.$12=ss.Delegate.combine(this.$12,value);},remove_ctrlClick:function(value){this.$12=ss.Delegate.remove(this.$12,value);},$12:null,add_enter:function(value){this.$13=ss.Delegate.combine(this.$13,value);},remove_enter:function(value){this.$13=ss.Delegate.remove(this.$13,value);},$13:null,add_exit:function(value){this.$14=ss.Delegate.combine(this.$14,value);},remove_exit:function(value){this.$14=ss.Delegate.remove(this.$14,value);},$14:null,add_$15:function($p0){this.$16=ss.Delegate.combine(this.$16,$p0);},remove_$15:function($p0){this.$16=ss.Delegate.remove(this.$16,$p0);},$16:null,get_hoverTooltipText:function(){return this.get_element().attr('title');},set_hoverTooltipText:function(value){this.get_element().attr('title',value);return value;},get_disabled:function(){return this.get_element()[0].disabled;},set_disabled:function(value){this.get_element()[0].disabled=value;this.get_element().toggleClass(this.$C,value);return value;},get_hoverClass:function(){return this.$A;},set_hoverClass:function(value){this.$A=value;return value;},get_focusClass:function(){return this.$B;},set_focusClass:function(value){this.$B=value;return value;},get_disabledClass:function(){return this.$C;},set_disabledClass:function(value){this.$C=value;return value;},get_context:function(){return this.$D;},set_context:function(value){this.$D=value;return value;},get_tableauClickHandler:function(){return this.$E;},tabIndex:function(index){this.get_element().attr('tabindex',index.toString());return this;},onClick:function(callback){var $0=ss.Delegate.create(this,function(){
callback(this);});this.add_click($0);return new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_click($0);}));},onDoubleClick:function(callback){this.$E.onDoubleClick(ss.Delegate.create(this,this.handleDoubleClick));var $0=ss.Delegate.create(this,function(){
callback(this);});this.add_$15($0);return new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_$15($0);}));},onShiftClick:function(callback){var $0=ss.Delegate.create(this,function(){
callback(this);});this.add_shiftClick($0);return new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_shiftClick($0);}));},$17:function(){this.get_element().focusin(ss.Delegate.create(this,this.handleFocusIn)).focusout(ss.Delegate.create(this,this.handleFocusOut)).keypress(ss.Delegate.create(this,this.$18)).keyup(ss.Delegate.create(this,this.handleKeyUp));var $0=spiff.$create_EventHandleSpec();$0.hoverDelay=0;spiff.TableauEventHandler.setHandler($0,'hover',ss.Delegate.create(this,this.handleEnter));spiff.TableauEventHandler.setHandler($0,'mouseleave',ss.Delegate.create(this,this.handleLeave));this.$E=spiff.TableauClickHandler.targetAndConfig(this.get_element().get(0),$0).onClick(ss.Delegate.create(this,this.handleClick)).onPress(ss.Delegate.create(this,this.handlePress));this.disposables.add(this.$E);},raiseEvent:function(callback){if(ss.isValue(callback)){callback();}},$18:function($p0){if($p0.which===13){$p0.preventDefault();$p0.stopPropagation();this.handleClick(null);}},handleKeyUp:function(e){if(e.which===32){e.preventDefault();e.stopPropagation();this.handleClick(null);}},handleFocusOut:function(e){this.get_element().removeClass(this.$B);},handleFocusIn:function(e){this.get_element().addClass(this.$B);},handleEnter:function(){if(!this.get_disabled()){this.get_element().addClass(this.$A);}this.raiseEvent(this.$13);},handleLeave:function(){this.get_element().removeClass(this.$A);this.raiseEvent(this.$14);},handleClick:function(e){if(this.get_disabled()){return;}if(ss.isValue(this.$11)&&ss.isValue(e)&&e.shiftKey){this.raiseEvent(this.$11);}else if(ss.isValue(this.$12)&&spiff.EventUtil.isCtrlKey(e)){this.raiseEvent(this.$12);}else{this.raiseEvent(this.$10);}},handleDoubleClick:function(e){if(this.get_disabled()){return;}this.raiseEvent(this.$16);},handlePress:function(){if(this.get_disabled()){return;}this.raiseEvent(this.$F);}}
spiff.ButtonGroup=function(){this.$1=new spiff.Selector();this.$0=[];}
spiff.ButtonGroup.prototype={$0:null,$1:null,$2:'tabSelected',get_selector:function(){return this.$1;},get_selectedClass:function(){return this.$2;},set_selectedClass:function(value){this.$2=value;return value;},get_buttons:function(){return this.$0;},addButton:function(button){button.set_selectedClass(this.$2);this.$0.add(button);button.add_disposed(ss.Delegate.create(this,this.removeButton));button.add_selectedChanging(ss.Delegate.create(this,this.handleSelectionChanging));},removeButton:function(sender,args){var $0=sender;$0.remove_disposed(ss.Delegate.create(this,this.removeButton));$0.remove_selectedChanging(ss.Delegate.create(this,this.handleSelectionChanging));this.$1.unselectItem($0);this.$0.remove($0);},selectButton:function(button){this.$1.selectItem(button);},selectAll:function(){if(this.$1.get_multiSelect()){var $0=[];this.get_buttons().forEach(function($p1_0){
$0.add($p1_0);});this.$1.selectItems($0);}else if(this.$0.length>0){this.$1.selectItem(this.$0[0]);}},clearSelection:function(){this.get_selector().clearSelection();},unselectButton:function(button){this.$1.unselectItem(button);},dispose:function(){this.$1.dispose();this.$0.forEach(ss.Delegate.create(this,function($p1_0){
$p1_0.remove_disposed(ss.Delegate.create(this,this.removeButton));$p1_0.remove_selectedChanging(ss.Delegate.create(this,this.handleSelectionChanging));}));this.$0.clear();},handleSelectionChanging:function(sender,selectArgs){var $0=sender;if(selectArgs.get_selecting()){this.$1.selectItem($0);}else if(this.$1.get_multiSelect()){this.$1.unselectItem($0);}else if(this.$1.get_firstSelectedItem()===$0){selectArgs.cancel=true;}}}
spiff.IconButton=function(){spiff.IconButton.initializeBase(this,[$('<a>').addClass('tab-iconButton')]);this.setEnabled(true);}
spiff.IconButton.prototype={iconElement:null,get_buttonElement:function(){return this.get_element();},setEnabled:function(enabled){if(enabled){this.get_buttonElement().removeClass('tab-disabled');this.get_buttonElement().addClass('tab-enabled');}else{this.get_buttonElement().removeClass('tab-enabled');this.get_buttonElement().addClass('tab-disabled');}return this;},setIcon:function(iconClass){if(!ss.isValue(this.iconElement)){this.iconElement=$('<span>');this.iconElement.appendTo(this.get_buttonElement());}this.iconElement.removeClass().addClass('tab-iconButtonIcon').addClass(iconClass);return this;}}
spiff.LabelButton=function(dom,labelSelector){spiff.LabelButton.initializeBase(this,[dom]);this.$1C=labelSelector;}
spiff.LabelButton.newAnchorButton=function(){return new spiff.LabelButton($("<a href='#' class='tab-link-button'><span class='label hide'></span><span class='icon'></span></a>"),'.label');}
spiff.LabelButton.newNativeButton=function(){return new spiff.LabelButton($("<button class='tab-button' type='button'><span class='icon'></span><span class='label hide'></span></button>"),'.label');}
spiff.LabelButton.newTextButton=function(clickHandler,label){var $0=new spiff.LabelButton($("<span class='tab-text-button'><span class='label hide'></span></span>"),'.label');if(ss.isValue(clickHandler)){$0.add_click(clickHandler);$0.disposables.add(new tab.CallOnDispose(function(){
$0.remove_click(clickHandler);}));}if(ss.isValue(label)){$0.set_label(label);}return $0;}
spiff.LabelButton.prototype={$1C:'.label',get_labelElement:function(){return this.get_element().find(this.$1C);},get_label:function(){return this.get_labelElement().text();},set_label:function(value){this.get_labelElement().text(value);if(String.isNullOrEmpty(value)){this.get_labelElement().addClass('hide');}else{this.get_labelElement().removeClass('hide');}return value;},setLabelContents:function(element){if(ss.isValue(element)){this.get_labelElement().html(element);this.get_labelElement().removeClass('hide');}else{this.get_labelElement().html('');this.get_labelElement().addClass('hide');}}}
spiff.StyledButton=function(buttonClass){spiff.StyledButton.initializeBase(this,[spiff.StyledButton.$1D(buttonClass),'.tab-styled-button-middle']);this.set_focusClass('tab-focus');this.set_disabledClass('tab-disabled');}
spiff.StyledButton.createStyledButton=function(clickHandler,label,buttonClass,tabIndex){var $0=new spiff.StyledButton(buttonClass);$0.set_label(label);$0.add_click(clickHandler);$0.disposables.add(new tab.CallOnDispose(function(){
$0.remove_click(clickHandler);}));if(ss.isValue(tabIndex)){$0.tabIndex(tabIndex);}return $0;}
spiff.StyledButton.$1D=function($p0){return $('<span>').addClass('tab-styled-button').addClass($p0).append($('<span>').addClass('tab-styled-button-left')).append($('<span>').addClass('tab-styled-button-middle')).append($('<span>').addClass('tab-styled-button-right'));}
spiff.StyledTextButton=function(){}
spiff.StyledTextButton.createPrimaryButton=function(clickHandler,label,buttonClass,size,tabIndex){var $0=spiff.StyledTextButton.$0(clickHandler,label,buttonClass,size,tabIndex);$0.addClass('tabStyledTextButtonPrimary');return $0;}
spiff.StyledTextButton.createSecondaryButton=function(clickHandler,label,buttonClass,size,tabIndex){var $0=spiff.StyledTextButton.$0(clickHandler,label,buttonClass,size,tabIndex);$0.addClass('tabStyledTextButtonSecondary');return $0;}
spiff.StyledTextButton.createActionButton=function(clickHandler,label,buttonClass,size,tabIndex){var $0=spiff.StyledTextButton.$0(clickHandler,label,buttonClass,size,tabIndex);$0.addClass('tabStyledTextButtonAction');return $0;}
spiff.StyledTextButton.$0=function($p0,$p1,$p2,$p3,$p4){var $0=spiff.LabelButton.newTextButton($p0,$p1);$0.addClass('tabStyledTextButton');switch($p3){case 2:$0.addClass('tabLargeStyledTextButton');break;case 1:$0.addClass('tabMediumStyledTextButton');break;}$0.addClass($p2);if(ss.isValue($p4)){$0.tabIndex($p4);}return $0;}
spiff.ToggleButton=function(element,selectedClass){spiff.ToggleButton.initializeBase(this,[element]);this.$1B=spiff.ToggleButton.$1D();this.$1A=selectedClass||'selected';}
spiff.ToggleButton.$1D=function(){spiff.ToggleButton.$19++;return 'toggleBtn-'+spiff.ToggleButton.$19.toString();}
spiff.ToggleButton.prototype={$1A:null,$1B:null,add_selectedChanging:function(value){this.$1C=ss.Delegate.combine(this.$1C,value);},remove_selectedChanging:function(value){this.$1C=ss.Delegate.remove(this.$1C,value);},$1C:null,get_selectedClass:function(){return this.$1A;},set_selectedClass:function(value){this.$1A=value;return value;},get_selectionId:function(){return this.$1B;},set_selectionId:function(value){this.$1B=value;return value;},get_selected:function(){return this.get_element().hasClass(this.$1A);},set_selected:function(value){if(this.get_selected()===value){return;}this.get_element().toggleClass(this.$1A,value);this.raisePropertyChanged('selected');return value;},handleClick:function(e){var $0=!this.get_selected();if(this.$1C!=null){var $1=new spiff.ToggleButtonSelectionEventArgs($0,e.shiftKey,spiff.EventUtil.isCtrlKey(e));this.$1C(this,$1);if($1.cancel){return;}}this.set_selected($0);spiff.ToggleButton.callBaseMethod(this, 'handleClick',[e]);}}
spiff.ToggleButtonSelectionEventArgs=function(selecting,shiftKey,ctrlKey){spiff.ToggleButtonSelectionEventArgs.initializeBase(this);this.$2_0=selecting;this.$2_1=shiftKey;this.$2_2=ctrlKey;}
spiff.ToggleButtonSelectionEventArgs.prototype={$2_0:false,$2_1:false,$2_2:false,get_selecting:function(){return this.$2_0;},get_shiftKey:function(){return this.$2_1;},get_ctrlKey:function(){return this.$2_2;}}
spiff.ListItemGroup=function(multiSelect){spiff.ListItemGroup.initializeBase(this);this.get_selector().set_multiSelect(multiSelect);this.$3=null;}
spiff.ListItemGroup.prototype={$3:null,$4:null,removeButton:function(sender,args){this.$3=null;this.$4=null;spiff.ListItemGroup.callBaseMethod(this, 'removeButton',[sender,args]);},dispose:function(){this.$3=null;this.$4=null;spiff.ListItemGroup.callBaseMethod(this, 'dispose');},selectButton:function(button){this.selectButtonAtIndex(this.get_buttons().indexOf(button));},selectButtonAtIndex:function(index){if(index<0||index>=this.get_buttons().length){return;}spiff.ListItemGroup.callBaseMethod(this, 'selectButton',[this.get_buttons()[index]]);this.$3=index;this.$4=null;},selectAll:function(){spiff.ListItemGroup.callBaseMethod(this, 'selectAll');this.$4=null;},clearSelection:function(){spiff.ListItemGroup.callBaseMethod(this, 'clearSelection');this.$3=null;this.$4=null;},selectButtonForKey:function(key,shiftKey){var $0=key===38;var $1=key===40;if(ss.isValue(this.$3)&&($0||$1)){if(!this.get_buttons()[this.$3].get_selected()){this.get_selector().selectItem(this.get_buttons()[this.$3]);}var $2=this.$3+(($0)?-1:1);if($2>=0&&$2<this.get_buttons().length){if(this.get_selector().get_multiSelect()&&shiftKey){if(ss.isValue(this.$4)){var $3=Math.min(this.$4,this.$3);var $4=Math.max(this.$4,this.$3);if($2>=$3&&$2<=$4){this.get_selector().unselectItem(this.get_buttons()[this.$3]);}}else{this.$4=this.$3;}this.get_selector().selectItem(this.get_buttons()[$2]);}else{this.get_selector().selectSingleItem(this.get_buttons()[$2]);this.$4=null;}this.$3=$2;return this.get_buttons()[$2];}}return null;},handleSelectionChanging:function(sender,selectArgs){var $0=sender;var $1=this.get_buttons().indexOf($0);if($1>=0){var $2=this.$3;var $3=this.$4;this.$3=$1;this.$4=null;if(this.get_selector().get_multiSelect()){if(selectArgs.get_shiftKey()&&(ss.isValue($2)||ss.isValue($3))){this.$4=(ss.isValue($3))?$3:$2;var $4=Math.min(this.$4,this.$3);var $5=Math.max(this.$4,this.$3);var $6=[];for(var $7=$4;$7<=$5;$7++){$6.add(this.get_buttons()[$7]);}this.get_selector().selectItems($6,true);selectArgs.cancel=true;}else if(selectArgs.get_ctrlKey()){if(selectArgs.get_selecting()){this.get_selector().selectItem($0);}else{this.get_selector().unselectItem($0);}}else{this.get_selector().selectSingleItem($0);if(this.get_selector().get_firstSelectedItem()===$0){selectArgs.cancel=true;}}}else{spiff.ListItemGroup.callBaseMethod(this, 'handleSelectionChanging',[sender,selectArgs]);}}}}
spiff.ClearableTextInputView=function(template,initialText,placeHoderText,clearButtonToolTip){spiff.ClearableTextInputView.initializeBase(this,[template,initialText,placeHoderText]);this.$F=template;this.add_propertyChanged(ss.Delegate.create(this,this.$12));this.$10=new spiff.Button(this.$F.get_searchBoxClear());this.$10.onClick(ss.Delegate.create(this,this.$13));this.$10.set_hoverTooltipText(clearButtonToolTip);this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_propertyChanged(ss.Delegate.create(this,this.$12));this.$10.dispose();})));this.$11();}
spiff.ClearableTextInputView.newClearableTextInputView=function(initialContent,placeHoderText,clearButtonToolTip){var $0=new spiff.ClearableTextInputViewTemplate();return new spiff.ClearableTextInputView($0,initialContent,placeHoderText,clearButtonToolTip);}
spiff.ClearableTextInputView.prototype={$F:null,$10:null,get_dom:function(){return this.$F;},get_searchBoxClearButton:function(){return this.$10;},$11:function(){if(!String.isNullOrEmpty(this.get_text())){this.$F.get_searchBoxClear().show();this.$F.get_inputElementContainer().addClass('clearButtonOn');}else{this.$F.get_searchBoxClear().hide();this.$F.get_inputElementContainer().removeClass('clearButtonOn');}},$12:function($p0,$p1){this.$11();},$13:function($p0){this.set_text('');}}
spiff.ClearableTextInputViewTemplate=function(){spiff.ClearableTextInputViewTemplate.initializeBase(this,[$(spiff.ClearableTextInputViewTemplate.$1)]);this.$2=this.getElementBySelector('.tabTextInputViewInputElement');this.$3=this.getElementBySelector('.tabTextInputViewInputElementContainer');this.$4=this.getElementBySelector('.tabClearableTextBoxClearButton');}
spiff.ClearableTextInputViewTemplate.prototype={$2:null,$3:null,$4:null,get_inputElement:function(){return this.$2;},get_inputElementContainer:function(){return this.$3;},get_searchBoxClear:function(){return this.$4;}}
spiff.EditableTextView=function(template,initialText,placeHoderText){spiff.EditableTextView.initializeBase(this,[template,initialText,placeHoderText]);this.$11=template;this.updateTextElement(initialText);var $0=new spiff.Button(this.get_textElement());$0.add_click(ss.Delegate.create(this,this.edit));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
$0.remove_click(ss.Delegate.create(this,this.edit));$0.dispose();})));this.$17(this.get_textElement());this.$16(this.get_inputElement());this.get_inputElement().blur(ss.Delegate.create(this,function(){
this.commit();}));this.get_inputElement().keyup(ss.Delegate.create(this,this.$19));if(!tsConfig.is_mobile){var $1=new spiff.HoverBehavior(this,null,ss.Delegate.create(this,function(){
this.get_element().addClass('hover');this.$18(true);}),ss.Delegate.create(this,function(){
this.get_element().removeClass('hover');this.$18(false);}));this.disposables.add($1);}this.set_isEditing(false);this.stopPropogationOfInputEvents();}
spiff.EditableTextView.newEditableTextView=function(initialContent,placeHoderText){var $0=new spiff.spiffui$3();return new spiff.EditableTextView($0,initialContent,placeHoderText);}
spiff.EditableTextView.prototype={$11:null,$12:false,add_hoverStateChanged:function(value){this.$13=ss.Delegate.combine(this.$13,value);},remove_hoverStateChanged:function(value){this.$13=ss.Delegate.remove(this.$13,value);},$13:null,add_editing:function(value){this.$14=ss.Delegate.combine(this.$14,value);},remove_editing:function(value){this.$14=ss.Delegate.remove(this.$14,value);},$14:null,add_committed:function(value){this.$15=ss.Delegate.combine(this.$15,value);},remove_committed:function(value){this.$15=ss.Delegate.remove(this.$15,value);},$15:null,get_textElement:function(){return this.$11.get_$5();},get_isEditing:function(){return this.$12;},set_isEditing:function(value){this.$12=value;return value;},get_textDisplayWidth:function(){return Math.min(this.$11.get_$6().width(),this.$11.get_$5().width());},$16:function($p0){$p0.css('display','none');},$17:function($p0){$p0.css('display','block');},$18:function($p0){if(ss.isValue(this.$13)){this.$13($p0);}},updateTextElement:function(text){this.$11.get_$6().text(text);},edit:function(){this.$16(this.get_textElement());this.$17(this.get_inputElement());this.get_inputElement().focus();tab.DomUtil.selectAllInputText(this.get_inputElement());this.set_isEditing(true);this.get_element().addClass('editing');if(ss.isValue(this.$14)){this.$14();}},commit:function(){this.set_text(this.get_inputElement().val());this.$16(this.get_inputElement());this.$17(this.get_textElement());this.set_isEditing(false);this.get_element().removeClass('editing');if(ss.isValue(this.$15)){this.$15();}},$19:function($p0){if($p0.which===13){this.commit();}},update:function(){this.updateTextElement(this.get_text());spiff.EditableTextView.callBaseMethod(this, 'update');},$1A:function(){var $0=this.get_element().parent().height();this.get_element().height($0);var $1=this.get_element().children('div');var $2=$1.height();this.get_textElement().css('height',$2+'px');this.get_textElement().css('line-height',$2+'px');this.get_inputElement().css('height',$2+'px');this.get_inputElement().css('line-height',$2+'px');},onAddedToDom:function(){this.$1A();spiff.EditableTextView.callBaseMethod(this, 'onAddedToDom');}}
spiff.spiffui$3=function(){spiff.spiffui$3.initializeBase(this,[$(spiff.spiffui$3.$1)]);this.$2=this.getElementBySelector('.view-mode');this.$3=this.getElementBySelector('.edit-mode');this.$4=this.$2.find('span');}
spiff.spiffui$3.prototype={$2:null,$3:null,$4:null,get_$5:function(){return this.$2;},get_inputElement:function(){return this.$3;},get_$6:function(){return this.$4;}}
spiff.CompositeSearchWidget=function(compositeSearchWidgetTemplate){spiff.CompositeSearchWidget.initializeBase(this,[compositeSearchWidgetTemplate.get_domRoot()]);this.compositeSearchWidgetTemplate=compositeSearchWidgetTemplate;var $0=ss.Delegate.create(this,function(){
this.$A();});var $1=ss.Delegate.create(this,function(){
this.$B();});var $2=ss.Delegate.create(this,function(){
this.$D();});this.compositeSearchWidgetTemplate.get_textInputView().add_enterKeyPressed($0);this.compositeSearchWidgetTemplate.get_searchButton().add_click($1);this.compositeSearchWidgetTemplate.get_clearButton().add_click($2);this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.compositeSearchWidgetTemplate.get_textInputView().remove_enterKeyPressed($0);this.compositeSearchWidgetTemplate.get_searchButton().remove_click($1);this.compositeSearchWidgetTemplate.get_clearButton().remove_click($2);this.compositeSearchWidgetTemplate.dispose();})));}
spiff.CompositeSearchWidget.prototype={compositeSearchWidgetTemplate:null,add_enterKeyPressed:function(value){this.$A=ss.Delegate.combine(this.$A,value);},remove_enterKeyPressed:function(value){this.$A=ss.Delegate.remove(this.$A,value);},$A:null,add_searchButtonClicked:function(value){this.$B=ss.Delegate.combine(this.$B,value);},remove_searchButtonClicked:function(value){this.$B=ss.Delegate.remove(this.$B,value);},$B:null,add_listItemClicked:function(value){this.$C=ss.Delegate.combine(this.$C,value);},remove_listItemClicked:function(value){this.$C=ss.Delegate.remove(this.$C,value);},$C:null,get_template:function(){return this.compositeSearchWidgetTemplate.get_template();},get_domRoot:function(){return this.compositeSearchWidgetTemplate.get_domRoot();},get_textInputView:function(){return this.compositeSearchWidgetTemplate.get_textInputView();},get_searchButton:function(){return this.compositeSearchWidgetTemplate.get_searchButton();},get_clearButton:function(){return this.compositeSearchWidgetTemplate.get_clearButton();},get_listViewModel:function(){return this.compositeSearchWidgetTemplate.get_listViewModel();},set_listViewModel:function(value){this.compositeSearchWidgetTemplate.set_listViewModel(value);return value;},get_listView:function(){return this.compositeSearchWidgetTemplate.get_listView();},set_listView:function(value){this.compositeSearchWidgetTemplate.set_listView(value);return value;},showList:function(listItems,parent){this.removeList();if(listItems.length>0){this.set_listViewModel(new spiff.ListViewModel(listItems));this.set_listView(spiff.ListView.createListView(this.get_listViewModel(),false));this.get_listView().add_selectionChanged(ss.Delegate.create(this,function(){
this.$C(this.get_listView().get_firstSelectedItem());}));this.get_listView().addToDom((ss.isValue(parent))?parent:this.get_domRoot());}},removeList:function(){if(ss.isValue(this.get_listViewModel())){this.get_listViewModel().dispose();this.set_listViewModel(null);}if(ss.isValue(this.get_listView())){this.get_listView().dispose();this.set_listView(null);}},$D:function(){this.get_textInputView().set_text('');}}
spiff.CompositeSearchWidgetTemplate=function(){spiff.CompositeSearchWidgetTemplate.initializeBase(this,[$("<div class='tabCompositeSearchWidget'><div>")]);this.searchTextInputView=spiff.TextInputView.newTextInputView('','');this.get_textInputView().addToDom(this.get_domRoot());this.$2=spiff.LabelButton.newNativeButton();this.$2.addClass('tabCompositeSearchWidget-SearchButton');this.get_searchButton().addToDom(this.get_domRoot());this.$3=spiff.LabelButton.newNativeButton();this.$3.addClass('tabCompositeSearchWidget-ClearButton');this.$3.addToDom(this.get_domRoot());}
spiff.CompositeSearchWidgetTemplate.prototype={searchTextInputView:null,$2:null,$3:null,$4:null,$5:null,get_template:function(){return this;},get_textInputView:function(){return this.searchTextInputView;},get_searchButton:function(){return this.$2;},get_clearButton:function(){return this.$3;},get_listViewModel:function(){return this.$4;},set_listViewModel:function(value){this.$4=value;return value;},get_listView:function(){return this.$5;},set_listView:function(value){this.$5=value;return value;},dispose:function(){spiff.CompositeSearchWidgetTemplate.callBaseMethod(this, 'dispose');if(ss.isValue(this.get_listView())){this.get_listView().dispose();}}}
spiff.TextInputView=function(template,initialText,placeHoderText){spiff.TextInputView.initializeBase(this,[template.get_domRoot()]);this.$A=template;this.$A.get_inputElement().val(initialText);this.$A.get_inputElement().attr('placeholder',placeHoderText);this.$A.get_inputElement().attr('title',placeHoderText);this.$A.get_inputElement().keyup(ss.Delegate.create(this,this.$E));this.$A.get_inputElement().bind('input',ss.Delegate.create(this,this.$D));this.stopPropogationOfInputEvents();this.$B=initialText;this.add_propertyChanged(ss.Delegate.create(this,function(){
this.update();}));}
spiff.TextInputView.newTextInputView=function(initialContent,placeHoderText){var $0=new spiff.spiffui$8();return new spiff.TextInputView($0,initialContent,placeHoderText);}
spiff.TextInputView.prototype={$A:null,$B:null,add_enterKeyPressed:function(value){this.$C=ss.Delegate.combine(this.$C,value);},remove_enterKeyPressed:function(value){this.$C=ss.Delegate.remove(this.$C,value);},$C:null,get_text:function(){return this.$B;},set_text:function(value){if(this.$B===value){return;}this.$B=value;this.raisePropertyChanged('text');return value;},get_inputElement:function(){return this.$A.get_inputElement();},$D:function($p0){this.set_text(this.$A.get_inputElement().val());},$E:function($p0){if($p0.which===13){if(ss.isValue(this.$C)){this.$C();}return;}if(tab.BrowserSupport.get_isIE()&&($p0.which===27||tab.BrowserSupport.get_browserVersion()<9)){this.set_text(this.$A.get_inputElement().val());}},update:function(){if(this.get_text()!==this.$A.get_inputElement().val()){this.$A.get_inputElement().val(this.get_text());}}}
spiff.spiffui$8=function(){spiff.spiffui$8.initializeBase(this,[$("<div class='tabTextInputView'><input class='tabTextInputViewInputElement' type='text'/></div>")]);this.$2=this.getElementBySelector('.tabTextInputViewInputElement');}
spiff.spiffui$8.prototype={$2:null,get_inputElement:function(){return this.$2;}}
spiff.TabControl=function(tabControlTemplate){this.$0=new spiff.ButtonGroup();this.$2={};this.$3=new tab.DisposableHolder();if(ss.isNullOrUndefined(tabControlTemplate)){tabControlTemplate=new spiff.spiffui$5();}this.$1=tabControlTemplate;}
spiff.TabControl.prototype={$1:null,$4:null,add_tabChanged:function(value){this.$5=ss.Delegate.combine(this.$5,value);},remove_tabChanged:function(value){this.$5=ss.Delegate.remove(this.$5,value);},$5:null,get_domRoot:function(){return this.$1.get_domRoot();},get_tabs:function(){return this.$1.get_tabs();},get_contentArea:function(){return this.$1.get_contentArea();},get_activeTabId:function(){return this.$4;},set_activeTabId:function(value){if(this.$4!==value){this.$4=value;if(ss.isValue(this.$5)){this.$5();}}return value;},addTab:function(id,tabLabel,content){if(Object.keyExists(this.$2,id)){return;}var $0=this.$1.createTabLabel();$0.get_domRoot().append(tabLabel);tabLabel.addClass('tabTabLabelId-'+id);var $1=new spiff.ToggleButton($0.get_domRoot());var $2=ss.Delegate.create(this,function($p1_0,$p1_1){
if($p1_1.get_propertyName()==='selected'&&$1.get_selected()){this.$6(content,id);}});$1.add_propertyChanged($2);this.$3.add(new tab.CallOnDispose(function(){
$1.remove_propertyChanged($2);}));this.$3.add($1);this.$0.addButton($1);this.$2[id]=$1;this.$1.get_tabs().append($0.get_domRoot());this.$1.get_contentArea().append(content);this.selectTab(id);},selectTab:function(tabId){if(!Object.keyExists(this.$2,tabId)){return;}this.$0.selectButton(this.$2[tabId]);},dispose:function(){this.$3.dispose();this.$0.dispose();},$6:function($p0,$p1){this.$1.get_contentArea().children().hide();$p0.show();this.set_activeTabId($p1);}}
spiff.spiffui$5=function(){spiff.spiffui$5.initializeBase(this,[$(spiff.spiffui$5.$1)]);this.$2=this.getElementBySelector('.tabTabLabels');this.$3=this.getElementBySelector('.tabTabContentArea');}
spiff.spiffui$5.prototype={$2:null,$3:null,get_tabs:function(){return this.$2;},get_contentArea:function(){return this.$3;},createTabLabel:function(){return new spiff.spiffui$7();}}
spiff.spiffui$7=function(){spiff.spiffui$7.initializeBase(this,[$("<span class='tabTabLabel' />")]);}
spiff.ListView=function(template,viewModel,multiSelect){this.$D=[];spiff.ListView.initializeBase(this,[template.get_domRoot()]);this.$C=new spiff.ListItemGroup(multiSelect);this.$C.get_selector().add_propertyChanged(ss.Delegate.create(this,this.$13));this.$A=template;this.$E=new spiff.spiffui$1(this.get_element());this.$B=viewModel;this.$B.add_propertyChanged(ss.Delegate.create(this,this.$16));this.$A.get_listItemContainer().keypress(ss.Delegate.create(this,this.$15)).keydown(ss.Delegate.create(this,this.$15));this.$12();}
spiff.ListView.createListView=function(viewModel,multiSelect,template){if(ss.isNullOrUndefined(template)){template=new spiff.spiffui$4();}return new spiff.ListView(template,viewModel,multiSelect);}
spiff.ListView.prototype={$A:null,$B:null,$C:null,$E:null,add_selectionChanged:function(value){this.$F=ss.Delegate.combine(this.$F,value);},remove_selectionChanged:function(value){this.$F=ss.Delegate.remove(this.$F,value);},$F:null,add_submitSelection:function(value){this.$10=ss.Delegate.combine(this.$10,value);},remove_submitSelection:function(value){this.$10=ss.Delegate.remove(this.$10,value);},$10:null,add_listItemsUpdated:function(value){this.$11=ss.Delegate.combine(this.$11,value);},remove_listItemsUpdated:function(value){this.$11=ss.Delegate.remove(this.$11,value);},$11:null,get_viewModel:function(){return this.$B;},get_multiSelect:function(){return this.$C.get_selector().get_multiSelect();},get_firstSelectedItem:function(){var $0=this.get_selectedItems();return ($0.length>0)?$0[0]:null;},get_selectedItems:function(){var $0=[];this.$C.get_selector().get_selectedItems().forEach(function($p1_0){
var $1_0=$p1_0;if(ss.isValue($1_0)){$0.add($1_0.get_viewModel());}});return $0;},get_domRoot:function(){return this.$A.get_domRoot();},get_itemViews:function(){return this.$D;},useScrollableView:function(sv){this.$E=new spiff.spiffui$2(sv);},$12:function(){for(var $0=0;$0<this.$B.get_collection().length;$0++){var $1=this.$B.get_collection()[$0];if(ss.isValue($1)){var $2=this.$A.createListItem($1).get_domRoot();var $3=new spiff.ListItemView($2,$1);$3.onDoubleClick(ss.Delegate.create(this,this.$14));this.$A.get_listItemContainer().append($2);this.$C.addButton($3);this.$D.add($3);}}this.$1B(this.$11);},$13:function($p0,$p1){if(ss.isValue(this.$F)){this.$F();}},$14:function($p0){this.$1B(this.$10);},$15:function($p0){var $0=this.$C.selectButtonForKey($p0.which,$p0.shiftKey);if(ss.isValue($0)){$p0.preventDefault();$p0.stopPropagation();this.$19($0);}},$16:function($p0,$p1){if($p1.get_propertyName()==='collection'){this.$1A();this.$A.get_listItemContainer().empty();this.$12();}},tabIndex:function(index){this.$A.get_listItemContainer().attr('tabindex',index.toString());return this;},selectItemViewModel:function(itemViewModel){if(ss.isValue(itemViewModel)){this.selectItemByIndex(this.$18(itemViewModel.get_id()));}else{this.$17(null);}},selectItemById:function(itemId){this.selectItemByIndex(this.$18(itemId));},selectItemByIndex:function(itemIndex){if(itemIndex>=0&&itemIndex<this.$D.length){this.$17(this.$D[itemIndex]);}},$17:function($p0){this.$C.selectButton($p0);this.$19($p0);},clearSelection:function(){this.$C.clearSelection();},$18:function($p0){for(var $0=0,$1=this.$D.length;$0<$1;$0++){if(this.$D[$0].get_selectionId()===$p0){return $0;}}return -1;},$19:function($p0){if(ss.isNullOrUndefined($p0)){return;}var $0=$p0.get_element()[0];this.$E.scrollToElement($0);},dispose:function(){this.$B.remove_propertyChanged(ss.Delegate.create(this,this.$16));this.$C.get_selector().remove_propertyChanged(ss.Delegate.create(this,this.$13));this.$C.dispose();this.$1A();spiff.ListView.callBaseMethod(this, 'dispose');},$1A:function(){this.$D.forEach(function($p1_0){
$p1_0.dispose();});this.$D.clear();},$1B:function($p0){if(ss.isValue($p0)){$p0();}}}
spiff.ListItemView=function(element,viewModel){spiff.ListItemView.initializeBase(this,[element]);tab.Param.verifyValue(viewModel,'viewModel');tab.Param.verifyValue(viewModel.get_id(),'viewModel.Id');this.$1E=viewModel;this.set_selectionId(viewModel.get_id());this.set_widgetId(viewModel.get_id());}
spiff.ListItemView.prototype={$1E:null,get_viewModel:function(){return this.$1E;}}
spiff.spiffui$4=function(){spiff.spiffui$4.initializeBase(this,[$("<div class='tab-list'><div class='tab-list-itemHolder'></div></div>")]);this.$2=this.getElementBySelector('.tab-list-itemHolder');}
spiff.spiffui$4.prototype={$2:null,get_listItemContainer:function(){return this.$2;},createListItem:function($p0){var $0=new spiff.spiffui$6();$0.$3($p0);return $0;}}
spiff.spiffui$6=function(){spiff.spiffui$6.initializeBase(this,[$("<div class='tab-list-item'></div>")]);}
spiff.spiffui$6.prototype={$2:null,$3:function($p0){if(!ss.isValue($p0)){return;}this.$2=$p0.get_label();this.$2.addClass('tab-list-item-label');this.get_domRoot().append(this.$2);}}
spiff.spiffui$2=function(scrollableView){this.$0=scrollableView;}
spiff.spiffui$2.prototype={$0:null,scrollToElement:function($p0){var $0=$p0.offsetTop;var $1=$0+$p0.offsetHeight;var $2=this.$0.get_scrollerY();var $3=$2+this.$0.get_element().height();if($0<$2){this.$0.scrollTo(this.$0.get_scrollerX(),$0,0,null);}else if($1>$3){this.$0.scrollTo(this.$0.get_scrollerX(),($2+$1-$3),0,null);}}}
spiff.spiffui$1=function(listRoot){this.$0=listRoot;}
spiff.spiffui$1.prototype={$0:null,scrollToElement:function($p0){var $0=$p0.offsetTop;var $1=$0+$p0.offsetHeight;var $2=this.$0.scrollTop();var $3=$2+this.$0[0].offsetHeight;if($0<$2){this.$0.scrollTop($0);}else if($1>$3){this.$0.scrollTop($2+$1-$3);}}}
spiff.Widget=function(element){this.disposables=new tab.DisposableHolder();tab.Param.verifyValue(element,'element');this.$4=element;element.addClass('tab-widget');element.data('widgetInstance',this);spiff.Widget.$3++;this.$5=spiff.Widget.$3;}
spiff.Widget.enableTextSelectionOnElement=function(element){element.removeClass('tab-unselectable');element.addClass('tab-selectable');element.unbind('.tab-disableSelection');}
spiff.Widget.disableTextSelectionOnElement=function(element){element.removeClass('tab-selectable');element.addClass('tab-unselectable');if(tab.BrowserSupport.get_selectStart()){var $0='selectstart'+'.tab-disableSelection';element.bind($0,function($p1_0){
$p1_0.preventDefault();});}}
spiff.Widget.findWidget=function(element,widgetType){tab.Param.verifyValue(element,'element');var $0=element;var $1;widgetType=(widgetType||spiff.Widget);do{$1=$0.data('widgetInstance');if(ss.isValue($1)&&!widgetType.isAssignableFrom(Type.getInstanceType($1))){$1=null;}$0=$0.parent('.'+'tab-widget');}while(ss.isNullOrUndefined($1)&&!$0.is('body')&&$0.length>0);return (ss.isNullOrUndefined($1))?null:$1;}
spiff.Widget.getWidgets=function(elements,widgetType){var $0=[];widgetType=(widgetType||spiff.Widget);var $1;elements.each(function($p1_0,$p1_1){
$1=$($p1_1).data('widgetInstance');if(ss.isValue($1)&&widgetType.isAssignableFrom(Type.getInstanceType($1))){$0.add($1);}});return $0;}
spiff.Widget.prototype={$4:null,$5:0,$6:null,$7:false,add_disposed:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_disposed:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,add_propertyChanged:function(value){this.$9=ss.Delegate.combine(this.$9,value);},remove_propertyChanged:function(value){this.$9=ss.Delegate.remove(this.$9,value);},$9:null,get_element:function(){return this.$4;},get_name:function(){return Type.getInstanceType(this).get_fullName();},get_instanceId:function(){return this.$5;},get_addedToDom:function(){return this.$7;},get_eventNamespace:function(){return String.format('.{0}_{1}',this.$5,Type.getInstanceType(this).get_fullName().replaceAll('.','_'));},get_widgetId:function(){return this.$6;},set_widgetId:function(value){if(!String.isNullOrEmpty(this.$6)&&tab.StyleUtil.isValidCssClassName(this.$6)){this.$4.removeClass(this.$6);}this.$6=value;if(!String.isNullOrEmpty(this.$6)&&tab.StyleUtil.isValidCssClassName(this.$6)){this.$4.addClass(this.$6);}return value;},enableTextSelection:function(){spiff.Widget.enableTextSelectionOnElement(this.$4);return this;},disableTextSelection:function(){spiff.Widget.disableTextSelectionOnElement(this.$4);return this;},dispose:function(){this.disposables.dispose();this.$4.removeData('widgetInstance');this.$4.remove();this.onDisposed(ss.EventArgs.Empty);},toString:function(){return this.get_name();},raisePropertyChanged:function(property){if(ss.isValue(this.$9)){this.$9(this,new spiff.PropertyChangedEventArgs(property));}},createNamespacedEventName:function(eventName){return eventName+this.get_eventNamespace();},stopPropogationOfInputEvents:function(){tab.DomUtil.stopPropagationOfInputEvents(this.get_element(),this.get_eventNamespace());},handleInputEvents:function(handler){tab.DomUtil.handleInputEvents(this.get_element(),this.get_eventNamespace(),handler);},onDisposed:function(args){if(ss.isValue(this.$8)){this.$8(this,ss.EventArgs.Empty);}},addToDom:function(parent){parent.append(this.$4);this.onAddedToDom();},onAddedToDom:function(){this.$7=true;},addClass:function(className){this.$4.addClass(className);}}
spiff.ScrollableViewModel=function(useCustomScrollbars){spiff.ScrollableViewModel.initializeBase(this);this.$6(useCustomScrollbars);}
spiff.ScrollableViewModel.get_browserSupportsCustomScrollbars=function(){return !tab.BrowserSupport.get_isIE()||tab.BrowserSupport.get_browserVersion()>8;}
spiff.ScrollableViewModel.prototype={$2:null,$3:null,add_contentChanged:function(value){this.$4=ss.Delegate.combine(this.$4,value);},remove_contentChanged:function(value){this.$4=ss.Delegate.remove(this.$4,value);},$4:null,add_refresh:function(value){this.$5=ss.Delegate.combine(this.$5,value);},remove_refresh:function(value){this.$5=ss.Delegate.remove(this.$5,value);},$5:null,get_content:function(){return this.$2;},set_content:function(value){this.$2=value;this.raiseActionEvent(this.$4);return value;},get_options:function(){return this.$3;},get_scrollX:function(){return (ss.isValue(this.$3.scrollX))?this.$3.scrollX:false;},set_scrollX:function(value){this.$3.scrollX=value;if(this.get_hasCustomIndicator()){this.get_indicatorOptions().listenX=value;}return value;},get_scrollY:function(){return (ss.isValue(this.$3.scrollY))?this.$3.scrollY:false;},set_scrollY:function(value){this.$3.scrollY=value;if(this.get_hasCustomIndicator()){this.get_indicatorOptions().listenY=value;}return value;},get_hasCustomIndicator:function(){return ss.isValue(this.$3.indicators);},set_hasCustomIndicator:function(value){if(value){if(ss.isNullOrUndefined(this.$3.indicators)){this.get_options().indicators={};this.get_options().indicators.listenX=this.get_scrollX();this.get_options().indicators.listenY=this.get_scrollY();}}else{this.get_options().indicators=null;}return value;},get_indicatorOptions:function(){return this.get_options().indicators;},$6:function($p0){this.$3={};this.set_hasCustomIndicator($p0);if(tsConfig.is_mobile){this.$8();}else{this.$7();}},$7:function(){if(!this.get_hasCustomIndicator()){this.$3.scrollbars='custom';this.$3.interactiveScrollbars=true;}this.$3.mouseWheel=true;this.$3.disableMouse=true;},$8:function(){if(!this.get_hasCustomIndicator()){this.$3.scrollbars='custom';}},triggerRefresh:function(){this.raiseActionEvent(this.$5);}}
spiff.CustomIScrollView=function(viewModel){spiff.CustomIScrollView.initializeBase(this,[viewModel,new spiff.CustomIScrollTemplate()]);this.$13();this.addScroller();this.setUpEvents();this.$14();}
spiff.CustomIScrollView.$15=function($p0,$p1,$p2){return Math.max(Math.round($p0*$p1/Math.max($p2,1)),8);}
spiff.CustomIScrollView.prototype={get_scrollbarBuffer:function(){return 0;},get_$12:function(){return this.get_template();},get_verticalScrollbar:function(){return this.get_$12().verticalScrollbar;},get_horizontalScrollbar:function(){return this.get_$12().horizontalScrollbar;},$13:function(){this.get_scrollableViewModel().get_indicatorOptions().resize=false;if(!tsConfig.is_mobile){this.get_scrollableViewModel().get_indicatorOptions().interactive=true;}if(this.get_scrollableViewModel().get_scrollY()){this.get_scrollableViewModel().get_indicatorOptions().el=this.get_verticalScrollbar()[0];}else if(this.get_scrollableViewModel().get_scrollX()){this.get_scrollableViewModel().get_indicatorOptions().el=this.get_horizontalScrollbar()[0];}},createScroller:function(){this.scroller=new IScroll(this.get_$12().contentWindow[0],this.get_scrollableViewModel().get_options());},$14:function(){if(tab.BrowserSupport.get_addEventListener()){var $0=ss.Delegate.create(this,function($p1_0){
this.sendEventToScroller($p1_0);});if(!tsConfig.is_mobile){this.get_template().get_domRoot()[0].addEventListener('mousewheel',$0,false);this.get_template().get_domRoot()[0].addEventListener('DOMMouseScroll',$0,false);this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_template().get_domRoot()[0].removeEventListener('mousewheel',$0,false);this.get_template().get_domRoot()[0].removeEventListener('DOMMouseScroll',$0,false);})));}}},addNewContent:function(){this.get_dom().content.append(this.get_scrollableViewModel().get_content());if(this.get_scrollableViewModel().get_scrollY()){this.get_$12().verticalScrollbarIndicator.height(spiff.CustomIScrollView.$15(this.get_$12().verticalScrollbar.height(),this.get_$12().contentWindow.height(),this.get_$12().content.height())+'px');}else if(this.get_scrollableViewModel().get_scrollX()){this.get_$12().horizontalScrollbarIndicator.width(spiff.CustomIScrollView.$15(this.get_$12().horizontalScrollbar.width(),this.get_$12().contentWindow.width(),this.get_$12().content.width())+'px');}this.handleRefresh();}}
spiff.CustomIScrollTemplate=function(){spiff.CustomIScrollTemplate.initializeBase(this,["<div class='tabCustomScroller'>\n            <div class='tabScrollerContentWindow'><span class='tabScrollerContent'/></div>\n            <div class='tabVerticalScrollbar'><div class='tabScrollbarIndicator'/></div>\n            <div class='tabHorizontalScrollbar'><div class='tabScrollbarIndicator'/></div>\n        </div>"]);this.content=this.getElementBySelector('.tabScrollerContent');this.scroll=this.get_domRoot();this.contentWindow=this.getElementBySelector('.tabScrollerContentWindow');this.verticalScrollbar=this.getElementBySelector('.tabVerticalScrollbar');this.verticalScrollbarIndicator=this.getElementBySelector('.tabVerticalScrollbar .tabScrollbarIndicator');this.horizontalScrollbar=this.getElementBySelector('.tabHorizontalScrollbar');this.horizontalScrollbarIndicator=this.getElementBySelector('.tabHorizontalScrollbar .tabScrollbarIndicator');}
spiff.CustomIScrollTemplate.prototype={contentWindow:null,verticalScrollbar:null,verticalScrollbarIndicator:null,horizontalScrollbar:null,horizontalScrollbarIndicator:null}
spiff.DefaultIScrollView=function(viewModel){spiff.DefaultIScrollView.initializeBase(this,[viewModel,new spiff.DefaultIScrollTemplate()]);this.addScroller();this.setUpEvents();}
spiff.DefaultIScrollView.prototype={$13:null,$14:null,get_scrollbarSize:function(){return 9;},get_scrollbarBuffer:function(){return 9+1;},get_verticalScrollbar:function(){return this.$13;},get_horizontalScrollbar:function(){return this.$14;},createScroller:function(){this.scroller=new IScroll(this.get_dom().scroll[0],this.get_scrollableViewModel().get_options());if(this.get_scrollableViewModel().get_scrollY()){this.get_dom().content.css('margin-right',this.get_scrollbarBuffer()+'px');}if(this.get_scrollableViewModel().get_scrollX()){this.get_dom().content.css('margin-bottom',this.get_scrollbarBuffer()+'px');}this.$13=this.get_dom().scroll.find('.iScrollVerticalScrollbar').css('width',this.get_scrollbarSize()+'px');this.$14=this.get_dom().scroll.find('.iScrollHorizontalScrollbar').css('height',this.get_scrollbarSize()+'px');},addNewContent:function(){this.get_dom().content.append(this.get_scrollableViewModel().get_content());this.handleRefresh();}}
spiff.DefaultIScrollTemplate=function(){spiff.DefaultIScrollTemplate.initializeBase(this,["<div class='tabScroller'><span class='tabScrollerContent'/></div>"]);this.content=this.getElementBySelector('.tabScrollerContent');this.scroll=this.get_domRoot();}
spiff.IScrollView=function(viewModel,template){this.scrollEndCleanup=new tab.DisposableHolder();spiff.IScrollView.initializeBase(this,[viewModel,template]);}
spiff.IScrollView.prototype={scroller:null,get_scrollerX:function(){return -this.scroller.x;},get_scrollerY:function(){return -this.scroller.y;},get_dom:function(){return this.get_template();},get_scrollableViewModel:function(){return this.get_viewModel();},addScroller:function(){this.createScroller();this.postCreationScrollerSetup();this.get_dom().scroll.toggleClass('tabScrollerCanScrollX',this.get_scrollableViewModel().get_scrollX());this.get_dom().scroll.toggleClass('tabScrollerCanScrollY',this.get_scrollableViewModel().get_scrollY());},postCreationScrollerSetup:function(){this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.scroller.destroy();})));this.scroller.on('scrollStart',ss.Delegate.create(this,this.$F));this.scroller.on('scrollEnd',ss.Delegate.create(this,this.$10));this.get_dom().scroll.addClass('tabScrollerIScroll');this.disposables.add(spiff.ClickHandler.targetAndClick(this.get_verticalScrollbar(),function($p1_0){
$p1_0.stopPropagation();}));this.disposables.add(spiff.ClickHandler.targetAndClick(this.get_horizontalScrollbar(),function($p1_0){
$p1_0.stopPropagation();}));(this.get_dom().get_domRoot()).on('mousewheel DOMMouseScroll',function($p1_0){
$p1_0.stopPropagation();});},setUpEvents:function(){this.get_scrollableViewModel().add_contentChanged(ss.Delegate.create(this,this.$D));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_scrollableViewModel().remove_contentChanged(ss.Delegate.create(this,this.$D));})));this.get_scrollableViewModel().add_refresh(ss.Delegate.create(this,this.handleRefresh));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_scrollableViewModel().remove_refresh(ss.Delegate.create(this,this.handleRefresh));})));},onAddedToDom:function(){spiff.IScrollView.callBaseMethod(this, 'onAddedToDom');this.addNewContent();},$D:function(){this.get_dom().content.empty();this.addNewContent();},handleRefresh:function(){this.scroller.refresh();this.$E();},$E:function(){this.get_verticalScrollbar().removeClass('noScroll');if(!this.scroller.hasVerticalScroll){this.get_verticalScrollbar().addClass('noScroll');}this.get_horizontalScrollbar().removeClass('noScroll');if(!this.scroller.hasHorizontalScroll){this.get_horizontalScrollbar().addClass('noScroll');}},$F:function(){if(tsConfig.is_mobile&&(!this.scroller.directionX||!this.scroller.hasHorizontalScroll)&&(!this.scroller.directionY||!this.scroller.hasVerticalScroll)){return;}if(tab.BrowserSupport.get_mouseCapture()){tab.DomUtil.setCapture(this.get_dom().scroll[0],true);this.scrollEndCleanup.add(new tab.CallOnDispose(function(){
tab.DomUtil.releaseCapture();}));}else if(tab.BrowserSupport.get_addEventListener()&&!tsConfig.is_mobile){var $0=ss.Delegate.create(this,function($p1_0){
this.sendEventToScroller($p1_0);});var $1=ss.Delegate.create(this,function($p1_0){
if(ss.isNullOrUndefined($p1_0.toElement)||$p1_0.toElement.nodeName==='HTML'){if(('createEvent' in document)){var $1_0=document.createEvent('MouseEvent');$1_0.initEvent('mouseup',false,false);this.sendEventToScroller($1_0);}}});document.addEventListener('mousemove',$0,true);document.addEventListener('mouseup',$0,true);document.addEventListener('mouseout',$1,true);this.scrollEndCleanup.add(new tab.CallOnDispose(function(){
document.removeEventListener('mousemove',$0,true);document.removeEventListener('mouseup',$0,true);document.removeEventListener('mouseout',$1,true);}));}this.get_dom().scroll.addClass('tabScrolling');},sendEventToScroller:function(e){this.scroller.handleEvent(e);var $enum1=ss.IEnumerator.getEnumerator(this.scroller.indicators);while($enum1.moveNext()){var $0=$enum1.current;if(e.type!=='mousemove'||$0.moved){$0.handleEvent(e);}}},$10:function(){this.scrollEndCleanup.dispose();this.get_dom().scroll.removeClass('tabScrolling');},scrollTo:function(x,y,time,easing){this.scroller.scrollTo(-x,-y,time,easing);},scrollToElement:function(elem,time,xOffset,yOffset){this.scroller.scrollToElement(elem,time,xOffset,yOffset);}}
spiff.IScrollTemplate=function(htmlTemplate){spiff.IScrollTemplate.initializeBase(this,[$(htmlTemplate)]);}
spiff.IScrollTemplate.prototype={content:null,scroll:null}
spiff.NativeScrollableView=function(viewModel){spiff.NativeScrollableView.initializeBase(this,[viewModel,new spiff.NavtiveScrollableTemplate()]);this.$10();this.get_$F().add_contentChanged(ss.Delegate.create(this,this.$11));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$F().remove_contentChanged(ss.Delegate.create(this,this.$11));})));}
spiff.NativeScrollableView.prototype={get_scrollbarBuffer:function(){return 18;},get_scrollerX:function(){return this.get_$E().scroll.scrollLeft();},get_scrollerY:function(){return this.get_$E().scroll.scrollTop();},get_$E:function(){return this.get_template();},get_$F:function(){return this.get_viewModel();},$10:function(){var $0=(this.get_$F().get_scrollX())?'auto':'hidden';var $1=(this.get_$F().get_scrollY())?'auto':'hidden';this.get_$E().scroll.css({'overflow-x':$0,'overflow-y':$1}).addClass('tabScollerNative');this.get_$E().scroll.toggleClass('tabScrollerCanScrollX',this.get_$F().get_scrollX());this.get_$E().scroll.toggleClass('tabScrollerCanScrollY',this.get_$F().get_scrollY());},onAddedToDom:function(){spiff.NativeScrollableView.callBaseMethod(this, 'onAddedToDom');this.$12();},$11:function(){this.get_$E().content.empty();this.$12();},$12:function(){this.get_$E().content.append(this.get_$F().get_content());},scrollTo:function(x,y,time,easing){this.get_$E().scroll.scrollLeft(x);this.get_$E().scroll.scrollTop(y);},scrollToElement:function(elem,time,xOffset,yOffset){var $0=$(elem).offset();this.get_$E().scroll.scrollLeft($0.left+xOffset);this.get_$E().scroll.scrollTop($0.top+yOffset);}}
spiff.NavtiveScrollableTemplate=function(){spiff.NavtiveScrollableTemplate.initializeBase(this,[$("<div class='tabScroller'><span class='tabScrollerContent'/></div>")]);this.content=this.getElementBySelector('.tabScrollerContent');this.scroll=this.get_domRoot();}
spiff.NavtiveScrollableTemplate.prototype={content:null,scroll:null}
spiff.ScrollableView=function(viewModel,scrollableTemplate){spiff.ScrollableView.initializeBase(this,[viewModel,scrollableTemplate]);}
spiff.ScrollableView.usingNativeScrollbars=function(){return tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9;}
spiff.ScrollableView.createScrollableView=function(viewModel){if(spiff.ScrollableView.usingNativeScrollbars()){return new spiff.NativeScrollableView(viewModel);}else if(viewModel.get_hasCustomIndicator()){return new spiff.CustomIScrollView(viewModel);}else{return new spiff.DefaultIScrollView(viewModel);}}
spiff.Widget.registerClass('spiff.Widget',null,ss.IDisposable);spiff.Dialog.registerClass('spiff.Dialog',spiff.Widget);spiff.ModalDialog.registerClass('spiff.ModalDialog',spiff.Dialog);spiff.BaseView.registerClass('spiff.BaseView',spiff.Widget,spiff.IView);spiff.BaseViewModel.registerClass('spiff.BaseViewModel',null,spiff.IViewModel);spiff.Glass.registerClass('spiff.Glass',spiff.Widget);spiff.PropertyChangedEventArgs.registerClass('spiff.PropertyChangedEventArgs',ss.EventArgs);spiff.ObjectRegistry.registerClass('spiff.ObjectRegistry');spiff.DragDropManager.registerClass('spiff.DragDropManager');spiff.DragInstance.registerClass('spiff.DragInstance');spiff.MoveDragInstance.registerClass('spiff.MoveDragInstance',spiff.DragInstance);spiff.MoveDragSource.registerClass('spiff.MoveDragSource',null,ss.IDisposable,spiff.IDragSource);spiff.ResizeDragSource.registerClass('spiff.ResizeDragSource',spiff.MoveDragSource);spiff.ClickHandler.registerClass('spiff.ClickHandler',null,ss.IDisposable);spiff.Gesture.registerClass('spiff.Gesture');spiff.Discrete.registerClass('spiff.Discrete',spiff.Gesture);spiff.Drag.registerClass('spiff.Drag',spiff.Gesture,spiff.IMouseCaptureEventHandler);spiff.Hover.registerClass('spiff.Hover',spiff.Gesture);spiff.Pinch.registerClass('spiff.Pinch',spiff.Gesture);spiff.GlobalTouchWatcher.registerClass('spiff.GlobalTouchWatcher');spiff.NormalizedEvent.registerClass('spiff.NormalizedEvent');spiff.TableauClickHandler.registerClass('spiff.TableauClickHandler',null,ss.IDisposable);spiff.OrientationHandler.registerClass('spiff.OrientationHandler');spiff.TableauEventHandler.registerClass('spiff.TableauEventHandler',null,ss.IDisposable);spiff.MouseCapture.registerClass('spiff.MouseCapture');spiff.ClickBuster.registerClass('spiff.ClickBuster');spiff.MouseEventUtil.registerClass('spiff.MouseEventUtil');spiff.Template.registerClass('spiff.Template',null,ss.IDisposable);spiff.EventUtil.registerClass('spiff.EventUtil');spiff.HoverAddClassBehavior.registerClass('spiff.HoverAddClassBehavior');spiff.HoverBehavior.registerClass('spiff.HoverBehavior',null,ss.IDisposable);spiff.SpiffBrowserViewport.registerClass('spiff.SpiffBrowserViewport');spiff.MenuViewModel.registerClass('spiff.MenuViewModel',spiff.BaseViewModel);spiff.ShowMenuOptions.registerClass('spiff.ShowMenuOptions');spiff.MenuViewTheme.registerClass('spiff.MenuViewTheme');spiff.UnificationLightMenuTheme.registerClass('spiff.UnificationLightMenuTheme',spiff.MenuViewTheme);spiff.UnificationDarkMenuTheme.registerClass('spiff.UnificationDarkMenuTheme',spiff.MenuViewTheme);spiff.Menu.registerClass('spiff.Menu');spiff.MenuItem.registerClass('spiff.MenuItem');spiff.CustomMenuItem.registerClass('spiff.CustomMenuItem',spiff.MenuItem);spiff.UberPopupViewModel.registerClass('spiff.UberPopupViewModel',spiff.BaseViewModel);spiff.UberPopupShowOptions.registerClass('spiff.UberPopupShowOptions');spiff.MenuView.registerClass('spiff.MenuView',spiff.BaseView);spiff.MenuTemplate.registerClass('spiff.MenuTemplate',spiff.Template);spiff.MenuItemTemplate.registerClass('spiff.MenuItemTemplate',spiff.Template);spiff.MenuItemTextInputTemplate.registerClass('spiff.MenuItemTextInputTemplate',spiff.Template);spiff.MenuItemDividerTemplate.registerClass('spiff.MenuItemDividerTemplate',spiff.Template);spiff.Selector.registerClass('spiff.Selector',spiff.BaseViewModel);spiff.ListViewModel.registerClass('spiff.ListViewModel',spiff.BaseViewModel);spiff.ListItemViewModel.registerClass('spiff.ListItemViewModel',spiff.BaseViewModel);spiff.UberPopupView.registerClass('spiff.UberPopupView',spiff.BaseView);spiff.UberPopupTemplate.registerClass('spiff.UberPopupTemplate',spiff.Template);spiff.Button.registerClass('spiff.Button',spiff.Widget);spiff.ButtonGroup.registerClass('spiff.ButtonGroup',null,ss.IDisposable);spiff.IconButton.registerClass('spiff.IconButton',spiff.Button);spiff.LabelButton.registerClass('spiff.LabelButton',spiff.Button);spiff.StyledButton.registerClass('spiff.StyledButton',spiff.LabelButton);spiff.StyledTextButton.registerClass('spiff.StyledTextButton');spiff.ToggleButton.registerClass('spiff.ToggleButton',spiff.Button,spiff.ISelectable);spiff.ToggleButtonSelectionEventArgs.registerClass('spiff.ToggleButtonSelectionEventArgs',ss.CancelEventArgs);spiff.ListItemGroup.registerClass('spiff.ListItemGroup',spiff.ButtonGroup);spiff.TextInputView.registerClass('spiff.TextInputView',spiff.Widget);spiff.ClearableTextInputView.registerClass('spiff.ClearableTextInputView',spiff.TextInputView);spiff.ClearableTextInputViewTemplate.registerClass('spiff.ClearableTextInputViewTemplate',spiff.Template,spiff.ITextInputViewTemplate);spiff.EditableTextView.registerClass('spiff.EditableTextView',spiff.TextInputView);spiff.spiffui$3.registerClass('spiff.spiffui$3',spiff.Template,spiff.ITextInputViewTemplate);spiff.CompositeSearchWidget.registerClass('spiff.CompositeSearchWidget',spiff.Widget);spiff.CompositeSearchWidgetTemplate.registerClass('spiff.CompositeSearchWidgetTemplate',spiff.Template,spiff.ICompositeSearchWidgetTemplate,ss.IDisposable);spiff.spiffui$8.registerClass('spiff.spiffui$8',spiff.Template,spiff.ITextInputViewTemplate);spiff.TabControl.registerClass('spiff.TabControl',null,ss.IDisposable);spiff.spiffui$5.registerClass('spiff.spiffui$5',spiff.Template,spiff.ITabControlTemplate);spiff.spiffui$7.registerClass('spiff.spiffui$7',spiff.Template);spiff.ListView.registerClass('spiff.ListView',spiff.Widget);spiff.ListItemView.registerClass('spiff.ListItemView',spiff.ToggleButton);spiff.spiffui$4.registerClass('spiff.spiffui$4',spiff.Template,spiff.IListViewTemplate);spiff.spiffui$6.registerClass('spiff.spiffui$6',spiff.Template);spiff.spiffui$2.registerClass('spiff.spiffui$2',null,spiff.spiffui$0);spiff.spiffui$1.registerClass('spiff.spiffui$1',null,spiff.spiffui$0);spiff.ScrollableViewModel.registerClass('spiff.ScrollableViewModel',spiff.BaseViewModel);spiff.ScrollableView.registerClass('spiff.ScrollableView',spiff.BaseView);spiff.IScrollView.registerClass('spiff.IScrollView',spiff.ScrollableView);spiff.CustomIScrollView.registerClass('spiff.CustomIScrollView',spiff.IScrollView);spiff.IScrollTemplate.registerClass('spiff.IScrollTemplate',spiff.Template);spiff.CustomIScrollTemplate.registerClass('spiff.CustomIScrollTemplate',spiff.IScrollTemplate);spiff.DefaultIScrollView.registerClass('spiff.DefaultIScrollView',spiff.IScrollView);spiff.DefaultIScrollTemplate.registerClass('spiff.DefaultIScrollTemplate',spiff.IScrollTemplate);spiff.NativeScrollableView.registerClass('spiff.NativeScrollableView',spiff.ScrollableView);spiff.NavtiveScrollableTemplate.registerClass('spiff.NavtiveScrollableTemplate',spiff.Template);spiff.Dialog.defaultDraggableDialogConfigurer=null;spiff.Dialog.defaultStationaryDialogConfigurer=null;(function(){spiff.Dialog.defaultDraggableDialogConfigurer=function($p1_0){
return new spiff.MoveDragSource($p1_0.$11,$p1_0.$10);};spiff.Dialog.defaultStationaryDialogConfigurer=function(){
return null;};})();
spiff.ObjectRegistry.$0=null;spiff.DragDropManager.$6=null;spiff.DragDropManager.$7=null;spiff.DragDropManager.$8=null;spiff.DragDropManager.$9=null;spiff.DragDropManager.$A=null;spiff.DragDropManager.$B=0;spiff.DragDropManager.$C=null;spiff.DragDropManager.$D=null;spiff.DragDropManager.$E=null;spiff.DragDropManager.$F=null;spiff.DragDropManager.$10=null;(function(){spiff.DragDropManager.$D=spiff.$create_EventHandleSpec();spiff.DragDropManager.$D.dragStart=spiff.DragDropManager.dragStart;spiff.DragDropManager.$D.dragMove=spiff.DragDropManager.dragMove;spiff.DragDropManager.$D.dragEnd=spiff.DragDropManager.dragEnd;spiff.DragDropManager.$D.firstTouch=spiff.DragDropManager.firstTouch;})();
spiff.ClickHandler.$3=0;spiff.Hover.hoverTime=150;spiff.Hover.fastHoverTime=120;spiff.GlobalTouchWatcher.$0=[];spiff.GlobalTouchWatcher.$1=null;spiff.GlobalTouchWatcher.$2=null;spiff.GlobalTouchWatcher.$3=null;spiff.GlobalTouchWatcher.$4=null;spiff.GlobalTouchWatcher.$5=null;spiff.GlobalTouchWatcher.$6=null;(function(){spiff.GlobalTouchWatcher.$0.add(dojo.subscribe('globalFirstTouch',spiff.GlobalTouchWatcher.$7));spiff.GlobalTouchWatcher.$0.add(dojo.subscribe('globalPress',spiff.GlobalTouchWatcher.$8));spiff.GlobalTouchWatcher.$0.add(dojo.subscribe('globalPotentialTap',spiff.GlobalTouchWatcher.$9));spiff.GlobalTouchWatcher.$0.add(dojo.subscribe('globalLastTouch',spiff.GlobalTouchWatcher.$A));spiff.GlobalTouchWatcher.$0.add(dojo.subscribe('globalRightClick',spiff.GlobalTouchWatcher.$B));spiff.GlobalTouchWatcher.$0.add(dojo.subscribe('globalDragEnd',spiff.GlobalTouchWatcher.$C));})();
spiff.OrientationHandler.$2=null;spiff.OrientationHandler.$3=null;spiff.OrientationHandler.$4=0;spiff.OrientationHandler.$5=0;spiff.OrientationHandler.$6=null;spiff.OrientationHandler.$7=null;spiff.OrientationHandler.$8=null;(function(){spiff.OrientationHandler.init();})();
spiff.TableauEventHandler.$2='none';spiff.MouseCapture.$0=null;spiff.ClickBuster.$1=null;spiff.ClickBuster.$2=null;spiff.MouseEventUtil.$0=null;spiff.MouseEventUtil.$1=null;spiff.MouseEventUtil.$2=false;spiff.EventUtil.$0=0;spiff.SpiffBrowserViewport.getSpiffBrowserViewportFunc=null;spiff.MenuItem.$0=0;spiff.UberPopupViewModel.modeProperty='mode';spiff.MenuView.classMenuItem='tabMenuMenuItem';spiff.MenuView.keyMenuItem='tabMenuMenuItem';spiff.MenuTemplate.htmlTemplate="<div class='tabMenu' tabindex='1'><div class='tabMenuContent'/></div>";spiff.Selector.selectedProperty='selected';spiff.ListViewModel.collectionProperty='collection';spiff.UberPopupView.minimalistThemeClass='tabUberPopupMinimal';spiff.ToggleButton.selectedProperty='selected';spiff.ToggleButton.toggleClassProperty='selectedClass';spiff.ToggleButton.$19=0;spiff.ClearableTextInputViewTemplate.$1="<div class='tabTextInputView'>"+"<span class='tabClearableTextBoxClearButton'/>"+"<div class='tabTextInputViewInputElementContainer'><input class='tabTextInputViewInputElement' type='text'/></div>"+'</div>';spiff.spiffui$3.$1="<div class='tab-editable-text-view'><div>"+"<div class='view-mode'><span/></div>"+"<input class='edit-mode' type='text'/>"+'</div></div>';spiff.TextInputView.textPropertyName='text';spiff.spiffui$5.$1='<div>'+"<div class='tabTabLabels'/>"+"<div class='tabTabContentArea'/>"+'<div>';spiff.Widget.$3=0;}());// This script was generated using Script# v0.7.4.0
// vqlui.js
var IScroll=(function(window,document,Math){var rAF=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/60);};var utils=(function(){var me={};var _elementStyle=document.createElement('div').style;var _vendor=(function(){var vendors=['t','webkitT','MozT','msT','OT'],transform,i=0,l=vendors.length;for(;i<l;i++){transform=vendors[i]+'ransform';if(transform in _elementStyle)return vendors[i].substr(0,vendors[i].length-1);} return false;})();function _prefixStyle(style){if(_vendor===false)return false;if(_vendor==='')return style;return _vendor+style.charAt(0).toUpperCase()+style.substr(1);} me.getTime=Date.now||function getTime(){return new Date().getTime();};me.extend=function(target,obj){for(var i in obj){target[i]=obj[i];}};me.addEvent=function(el,type,fn,capture){el.addEventListener(type,fn,!!capture);};me.removeEvent=function(el,type,fn,capture){el.removeEventListener(type,fn,!!capture);};me.momentum=function(current,start,time,lowerMargin,wrapperSize){var distance=current-start,speed=Math.abs(distance)/time,destination,duration,deceleration=0.0006;destination=current+(speed*speed)/(2*deceleration)*(distance<0?-1:1);duration=speed/deceleration;if(destination<lowerMargin){destination=wrapperSize?lowerMargin-(wrapperSize/2.5*(speed/8)):lowerMargin;distance=Math.abs(destination-current);duration=distance/speed;} else if(destination>0){destination=wrapperSize?wrapperSize/2.5*(speed/8):0;distance=Math.abs(current)+destination;duration=distance/speed;} return{destination:Math.round(destination),duration:duration};};var _transform=_prefixStyle('transform');me.extend(me,{hasTransform:_transform!==false,hasPerspective:_prefixStyle('perspective')in _elementStyle,hasTouch:'ontouchstart'in window,hasPointer:navigator.msPointerEnabled,hasTransition:_prefixStyle('transition')in _elementStyle});me.isAndroidBrowser=/Android/.test(window.navigator.appVersion)&&/Version\/\d/.test(window.navigator.appVersion);me.extend(me.style={},{transform:_transform,transitionTimingFunction:_prefixStyle('transitionTimingFunction'),transitionDuration:_prefixStyle('transitionDuration'),transformOrigin:_prefixStyle('transformOrigin')});me.hasClass=function(e,c){var re=new RegExp("(^|\\s)"+c+"(\\s|$)");return re.test(e.className);};me.addClass=function(e,c){if(me.hasClass(e,c)){return;} var newclass=e.className.split(' ');newclass.push(c);e.className=newclass.join(' ');};me.removeClass=function(e,c){if(!me.hasClass(e,c)){return;} var re=new RegExp("(^|\\s)"+c+"(\\s|$)",'g');e.className=e.className.replace(re,' ');};me.offset=function(el){var left=-el.offsetLeft,top=-el.offsetTop;while(el=el.offsetParent){left-=el.offsetLeft;top-=el.offsetTop;} return{left:left,top:top};};me.preventDefaultException=function(el,exceptions){for(var i in exceptions){if(exceptions[i].test(el[i])){return true;}} return false;};me.extend(me.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});me.extend(me.ease={},{quadratic:{style:'cubic-bezier(0.25, 0.46, 0.45, 0.94)',fn:function(k){return k*(2-k);}},circular:{style:'cubic-bezier(0.1, 0.57, 0.1, 1)',fn:function(k){return Math.sqrt(1-(--k*k));}},back:{style:'cubic-bezier(0.175, 0.885, 0.32, 1.275)',fn:function(k){var b=4;return(k=k-1)*k*((b+1)*k+b)+1;}},bounce:{style:'',fn:function(k){if((k/=1)<(1/2.75)){return 7.5625*k*k;} else if(k<(2/2.75)){return 7.5625*(k-=(1.5/2.75))*k+0.75;} else if(k<(2.5/2.75)){return 7.5625*(k-=(2.25/2.75))*k+0.9375;} else{return 7.5625*(k-=(2.625/2.75))*k+0.984375;}}},elastic:{style:'',fn:function(k){var f=0.22,e=0.4;if(k===0){return 0;} if(k==1){return 1;} return(e*Math.pow(2,-10*k)*Math.sin((k-f/4)*(2*Math.PI)/f)+1);}}});me.tap=function(e,eventName){var ev=document.createEvent('Event');ev.initEvent(eventName,true,true);ev.pageX=e.pageX;ev.pageY=e.pageY;e.target.dispatchEvent(ev);};me.click=function(e){var target=e.target,ev;if(target.tagName!='SELECT'&&target.tagName!='INPUT'&&target.tagName!='TEXTAREA'){ev=document.createEvent('MouseEvents');ev.initMouseEvent('click',true,true,e.view,1,target.screenX,target.screenY,target.clientX,target.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);ev._constructed=true;target.dispatchEvent(ev);}};return me;})();function IScroll(el,options){this.wrapper=typeof el=='string'?document.querySelector(el):el;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={resizeIndicator:true,mouseWheelSpeed:20,snapThreshold:0.334,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:'',preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true};for(var i in options){this.options[i]=options[i];} this.translateZ=this.options.HWCompositing&&utils.hasPerspective?' translateZ(0)':'';this.options.useTransition=utils.hasTransition&&this.options.useTransition;this.options.useTransform=utils.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?'vertical':this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=='vertical'?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=='horizontal'?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=='string'?utils.ease[this.options.bounceEasing]||utils.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap='tap';} this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable();}
IScroll.prototype={version:'5.0.6',_init:function(){this._initEvents();if(this.options.scrollbars||this.options.indicators){this._initIndicators();} if(this.options.mouseWheel){this._initWheel();} if(this.options.snap){this._initSnap();} if(this.options.keyBindings){this._initKeys();}},destroy:function(){this._initEvents(true);this._execEvent('destroy');},_transitionEnd:function(e){if(e.target!=this.scroller){return;} this._transitionTime(0);if(!this.resetPosition(this.options.bounceTime)){this._execEvent('scrollEnd');}},_start:function(e){if(utils.eventType[e.type]!=1){if(e.button!==0){return;}} if(!this.enabled||(this.initiated&&utils.eventType[e.type]!==this.initiated)){return;} if(this.options.preventDefault&&!utils.isAndroidBrowser&&!utils.preventDefaultException(e.target,this.options.preventDefaultException)){e.preventDefault();} var point=e.touches?e.touches[0]:e,pos;this.initiated=utils.eventType[e.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.isAnimating=false;this.startTime=utils.getTime();if(this.options.useTransition&&this.isInTransition){pos=this.getComputedPosition();this._translate(Math.round(pos.x),Math.round(pos.y));this._execEvent('scrollEnd');this.isInTransition=false;} this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=point.pageX;this.pointY=point.pageY;this._execEvent('beforeScrollStart');},_move:function(e){if(!this.enabled||utils.eventType[e.type]!==this.initiated){return;} if(this.options.preventDefault){e.preventDefault();} var point=e.touches?e.touches[0]:e,deltaX=point.pageX-this.pointX,deltaY=point.pageY-this.pointY,timestamp=utils.getTime(),newX,newY,absDistX,absDistY;this.pointX=point.pageX;this.pointY=point.pageY;this.distX+=deltaX;this.distY+=deltaY;absDistX=Math.abs(this.distX);absDistY=Math.abs(this.distY);if(timestamp-this.endTime>300&&(absDistX<10&&absDistY<10)){return;} if(!this.directionLocked&&!this.options.freeScroll){if(absDistX>absDistY+this.options.directionLockThreshold){this.directionLocked='h';} else if(absDistY>=absDistX+this.options.directionLockThreshold){this.directionLocked='v';} else{this.directionLocked='n';}} if(this.directionLocked=='h'){if(this.options.eventPassthrough=='vertical'){e.preventDefault();} else if(this.options.eventPassthrough=='horizontal'){this.initiated=false;return;} deltaY=0;} else if(this.directionLocked=='v'){if(this.options.eventPassthrough=='horizontal'){e.preventDefault();} else if(this.options.eventPassthrough=='vertical'){this.initiated=false;return;} deltaX=0;} deltaX=this.hasHorizontalScroll?deltaX:0;deltaY=this.hasVerticalScroll?deltaY:0;newX=this.x+deltaX;newY=this.y+deltaY;if(newX>0||newX<this.maxScrollX){newX=this.options.bounce?this.x+deltaX/3:newX>0?0:this.maxScrollX;} if(newY>0||newY<this.maxScrollY){newY=this.options.bounce?this.y+deltaY/3:newY>0?0:this.maxScrollY;} this.directionX=deltaX>0?-1:deltaX<0?1:0;this.directionY=deltaY>0?-1:deltaY<0?1:0;if(!this.moved){this._execEvent('scrollStart');} this.moved=true;this._translate(newX,newY);if(timestamp-this.startTime>300){this.startTime=timestamp;this.startX=this.x;this.startY=this.y;}},_end:function(e){if(!this.enabled||utils.eventType[e.type]!==this.initiated){return;} if(this.options.preventDefault&&!utils.preventDefaultException(e.target,this.options.preventDefaultException)){e.preventDefault();} var point=e.changedTouches?e.changedTouches[0]:e,momentumX,momentumY,duration=utils.getTime()-this.startTime,newX=Math.round(this.x),newY=Math.round(this.y),distanceX=Math.abs(newX-this.startX),distanceY=Math.abs(newY-this.startY),time=0,easing='';this.scrollTo(newX,newY);this.isInTransition=0;this.initiated=0;this.endTime=utils.getTime();if(this.resetPosition(this.options.bounceTime)){return;} if(!this.moved){if(this.options.tap){utils.tap(e,this.options.tap);} if(this.options.click){utils.click(e);} return;} if(this._events.flick&&duration<200&&distanceX<100&&distanceY<100){this._execEvent('flick');return;} if(this.options.momentum&&duration<300){momentumX=this.hasHorizontalScroll?utils.momentum(this.x,this.startX,duration,this.maxScrollX,this.options.bounce?this.wrapperWidth:0):{destination:newX,duration:0};momentumY=this.hasVerticalScroll?utils.momentum(this.y,this.startY,duration,this.maxScrollY,this.options.bounce?this.wrapperHeight:0):{destination:newY,duration:0};newX=momentumX.destination;newY=momentumY.destination;time=Math.max(momentumX.duration,momentumY.duration);this.isInTransition=1;} if(this.options.snap){var snap=this._nearestSnap(newX,newY);this.currentPage=snap;time=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(newX-snap.x),1000),Math.min(Math.abs(newY-snap.y),1000)),300);newX=snap.x;newY=snap.y;this.directionX=0;this.directionY=0;easing=this.options.bounceEasing;} if(newX!=this.x||newY!=this.y){if(newX>0||newX<this.maxScrollX||newY>0||newY<this.maxScrollY){easing=utils.ease.quadratic;} this.scrollTo(newX,newY,time,easing);return;} this._execEvent('scrollEnd');},_resize:function(){var that=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){that.refresh();},this.options.resizePolling);},resetPosition:function(time){var x=this.x,y=this.y;time=time||0;if(!this.hasHorizontalScroll||this.x>0){x=0;} else if(this.x<this.maxScrollX){x=this.maxScrollX;} if(!this.hasVerticalScroll||this.y>0){y=0;} else if(this.y<this.maxScrollY){y=this.maxScrollY;} if(x==this.x&&y==this.y){return false;} this.scrollTo(x,y,time,this.options.bounceEasing);return true;},disable:function(){this.enabled=false;},enable:function(){this.enabled=true;},refresh:function(){var rf=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth;} if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight;} this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=utils.offset(this.wrapper);this._execEvent('refresh');this.resetPosition();},on:function(type,fn){if(!this._events[type]){this._events[type]=[];} this._events[type].push(fn);},_execEvent:function(type){if(!this._events[type]){return;} var i=0,l=this._events[type].length;if(!l){return;} for(;i<l;i++){this._events[type][i].call(this);}},scrollBy:function(x,y,time,easing){x=this.x+x;y=this.y+y;time=time||0;this.scrollTo(x,y,time,easing);},scrollTo:function(x,y,time,easing){easing=easing||utils.ease.circular;if(!time||(this.options.useTransition&&easing.style)){this._transitionTimingFunction(easing.style);this._transitionTime(time);this._translate(x,y);} else{this._animate(x,y,time,easing.fn);}},scrollToElement:function(el,time,offsetX,offsetY,easing){el=el.nodeType?el:this.scroller.querySelector(el);if(!el){return;} var pos=utils.offset(el);pos.left-=this.wrapperOffset.left;pos.top-=this.wrapperOffset.top;if(offsetX===true){offsetX=Math.round(el.offsetWidth/2-this.wrapper.offsetWidth/2);} if(offsetY===true){offsetY=Math.round(el.offsetHeight/2-this.wrapper.offsetHeight/2);} pos.left-=offsetX||0;pos.top-=offsetY||0;pos.left=pos.left>0?0:pos.left<this.maxScrollX?this.maxScrollX:pos.left;pos.top=pos.top>0?0:pos.top<this.maxScrollY?this.maxScrollY:pos.top;time=time===undefined||time===null||time==='auto'?Math.max(Math.abs(this.x-pos.left),Math.abs(this.y-pos.top)):time;this.scrollTo(pos.left,pos.top,time,easing);},_transitionTime:function(time){time=time||0;this.scrollerStyle[utils.style.transitionDuration]=time+'ms';if(this.indicators){for(var i=this.indicators.length;i--;){this.indicators[i].transitionTime(time);}}},_transitionTimingFunction:function(easing){this.scrollerStyle[utils.style.transitionTimingFunction]=easing;if(this.indicators){for(var i=this.indicators.length;i--;){this.indicators[i].transitionTimingFunction(easing);}}},_translate:function(x,y){if(this.options.useTransform){this.scrollerStyle[utils.style.transform]='translate('+x+'px,'+y+'px)'+this.translateZ;} else{x=Math.round(x);y=Math.round(y);this.scrollerStyle.left=x+'px';this.scrollerStyle.top=y+'px';} this.x=x;this.y=y;if(this.indicators){for(var i=this.indicators.length;i--;){this.indicators[i].updatePosition();}}},_initEvents:function(remove){var eventType=remove?utils.removeEvent:utils.addEvent,target=this.options.bindToWrapper?this.wrapper:window;eventType(window,'orientationchange',this);eventType(window,'resize',this);if(this.options.click){eventType(this.wrapper,'click',this,true);} if(!this.options.disableMouse){eventType(this.wrapper,'mousedown',this);eventType(target,'mousemove',this);eventType(target,'mousecancel',this);eventType(target,'mouseup',this);} if(utils.hasPointer&&!this.options.disablePointer){if(window.PointerEvent){eventType(this.wrapper,'pointerdown',this);eventType(target,'pointermove',this);eventType(target,'pointercancel',this);eventType(target,'pointerup',this);} else if(window.MSPointerEvent){eventType(this.wrapper,'MSPointerDown',this);eventType(target,'MSPointerMove',this);eventType(target,'MSPointerCancel',this);eventType(target,'MSPointerUp',this);}} if(utils.hasTouch&&!this.options.disableTouch){eventType(this.wrapper,'touchstart',this);eventType(target,'touchmove',this);eventType(target,'touchcancel',this);eventType(target,'touchend',this);} eventType(this.scroller,'transitionend',this);eventType(this.scroller,'webkitTransitionEnd',this);eventType(this.scroller,'oTransitionEnd',this);eventType(this.scroller,'MSTransitionEnd',this);},getComputedPosition:function(){var matrix=window.getComputedStyle(this.scroller,null),x,y;if(this.options.useTransform){matrix=matrix[utils.style.transform].split(')')[0].split(', ');x=+(matrix[12]||matrix[4]);y=+(matrix[13]||matrix[5]);} else{x=+matrix.left.replace(/[^-\d]/g,'');y=+matrix.top.replace(/[^-\d]/g,'');} return{x:x,y:y};},_initIndicators:function(){var interactive=this.options.interactiveScrollbars,defaultScrollbars=typeof this.options.scrollbars!='object',customStyle=typeof this.options.scrollbars!='string',indicators=[],indicator;this.indicators=[];if(this.options.scrollbars){if(this.options.scrollY){indicator={el:createDefaultScrollbar('v',interactive,this.options.scrollbars),interactive:interactive,defaultScrollbars:true,customStyle:customStyle,resize:this.options.resizeIndicator,listenX:false};this.wrapper.appendChild(indicator.el);indicators.push(indicator);} if(this.options.scrollX){indicator={el:createDefaultScrollbar('h',interactive,this.options.scrollbars),interactive:interactive,defaultScrollbars:true,customStyle:customStyle,resize:this.options.resizeIndicator,listenY:false};this.wrapper.appendChild(indicator.el);indicators.push(indicator);}} if(this.options.indicators){indicators=indicators.concat(this.options.indicators);} for(var i=indicators.length;i--;){this.indicators[i]=new Indicator(this,indicators[i]);} this.on('refresh',function(){if(this.indicators){for(var i=this.indicators.length;i--;){this.indicators[i].refresh();}}});this.on('destroy',function(){if(this.indicators){for(var i=this.indicators.length;i--;){this.indicators[i].destroy();}} delete this.indicators;});},_initWheel:function(){utils.addEvent(this.wrapper,'mousewheel',this);utils.addEvent(this.wrapper,'DOMMouseScroll',this);this.on('destroy',function(){utils.removeEvent(this.wrapper,'mousewheel',this);utils.removeEvent(this.wrapper,'DOMMouseScroll',this);});},_wheel:function(e){if(!this.enabled){return;} e.preventDefault();var wheelDeltaX,wheelDeltaY,newX,newY,that=this;clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){that._execEvent('scrollEnd');},400);if('wheelDeltaX'in e){wheelDeltaX=e.wheelDeltaX/120;wheelDeltaY=e.wheelDeltaY/120;} else if('wheelDelta'in e){wheelDeltaX=wheelDeltaY=e.wheelDelta/120;} else if('detail'in e){wheelDeltaX=wheelDeltaY=-e.detail/3;} else{return;} wheelDeltaX*=this.options.mouseWheelSpeed;wheelDeltaY*=this.options.mouseWheelSpeed;if(!this.hasVerticalScroll){wheelDeltaX=wheelDeltaY;wheelDeltaY=0;} if(this.options.snap){newX=this.currentPage.pageX;newY=this.currentPage.pageY;if(wheelDeltaX>0){newX--;} else if(wheelDeltaX<0){newX++;} if(wheelDeltaY>0){newY--;} else if(wheelDeltaY<0){newY++;} this.goToPage(newX,newY);return;} newX=this.x+Math.round(this.hasHorizontalScroll?wheelDeltaX*this.options.invertWheelDirection:0);newY=this.y+Math.round(this.hasVerticalScroll?wheelDeltaY*this.options.invertWheelDirection:0);if(newX>0){newX=0;} else if(newX<this.maxScrollX){newX=this.maxScrollX;} if(newY>0){newY=0;} else if(newY<this.maxScrollY){newY=this.maxScrollY;} this.scrollTo(newX,newY,0);},_initSnap:function(){this.currentPage={};if(typeof this.options.snap=='string'){this.options.snap=this.scroller.querySelectorAll(this.options.snap);} this.on('refresh',function(){var i=0,l,m=0,n,cx,cy,x=0,y,stepX=this.options.snapStepX||this.wrapperWidth,stepY=this.options.snapStepY||this.wrapperHeight,el;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return;} if(this.options.snap===true){cx=Math.round(stepX/2);cy=Math.round(stepY/2);while(x>-this.scrollerWidth){this.pages[i]=[];l=0;y=0;while(y>-this.scrollerHeight){this.pages[i][l]={x:Math.max(x,this.maxScrollX),y:Math.max(y,this.maxScrollY),width:stepX,height:stepY,cx:x-cx,cy:y-cy};y-=stepY;l++;} x-=stepX;i++;}} else{el=this.options.snap;l=el.length;n=-1;for(;i<l;i++){if(i===0||el[i].offsetLeft<=el[i-1].offsetLeft){m=0;n++;} if(!this.pages[m]){this.pages[m]=[];} x=Math.max(-el[i].offsetLeft,this.maxScrollX);y=Math.max(-el[i].offsetTop,this.maxScrollY);cx=x-Math.round(el[i].offsetWidth/2);cy=y-Math.round(el[i].offsetHeight/2);this.pages[m][n]={x:x,y:y,width:el[i].offsetWidth,height:el[i].offsetHeight,cx:cx,cy:cy};if(x>this.maxScrollX){m++;}}} this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold;} else{this.snapThresholdX=Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold);}});this.on('flick',function(){var time=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(this.x-this.startX),1000),Math.min(Math.abs(this.y-this.startY),1000)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,time);});},_nearestSnap:function(x,y){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0};} var i=0,l=this.pages.length,m=0;if(Math.abs(x-this.absStartX)<this.snapThresholdX&&Math.abs(y-this.absStartY)<this.snapThresholdY){return this.currentPage;} if(x>0){x=0;} else if(x<this.maxScrollX){x=this.maxScrollX;} if(y>0){y=0;} else if(y<this.maxScrollY){y=this.maxScrollY;} for(;i<l;i++){if(x>=this.pages[i][0].cx){x=this.pages[i][0].x;break;}} l=this.pages[i].length;for(;m<l;m++){if(y>=this.pages[0][m].cy){y=this.pages[0][m].y;break;}} if(i==this.currentPage.pageX){i+=this.directionX;if(i<0){i=0;} else if(i>=this.pages.length){i=this.pages.length-1;} x=this.pages[i][0].x;} if(m==this.currentPage.pageY){m+=this.directionY;if(m<0){m=0;} else if(m>=this.pages[0].length){m=this.pages[0].length-1;} y=this.pages[0][m].y;} return{x:x,y:y,pageX:i,pageY:m};},goToPage:function(x,y,time,easing){easing=easing||this.options.bounceEasing;if(x>=this.pages.length){x=this.pages.length-1;} else if(x<0){x=0;} if(y>=this.pages[x].length){y=this.pages[x].length-1;} else if(y<0){y=0;} var posX=this.pages[x][y].x,posY=this.pages[x][y].y;time=time===undefined?this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(posX-this.x),1000),Math.min(Math.abs(posY-this.y),1000)),300):time;this.currentPage={x:posX,y:posY,pageX:x,pageY:y};this.scrollTo(posX,posY,time,easing);},next:function(time,easing){var x=this.currentPage.pageX,y=this.currentPage.pageY;x++;if(x>=this.pages.length&&this.hasVerticalScroll){x=0;y++;} this.goToPage(x,y,time,easing);},prev:function(time,easing){var x=this.currentPage.pageX,y=this.currentPage.pageY;x--;if(x<0&&this.hasVerticalScroll){x=0;y--;} this.goToPage(x,y,time,easing);},_initKeys:function(e){var keys={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var i;if(typeof this.options.keyBindings=='object'){for(i in this.options.keyBindings){if(typeof this.options.keyBindings[i]=='string'){this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0);}}} else{this.options.keyBindings={};} for(i in keys){this.options.keyBindings[i]=this.options.keyBindings[i]||keys[i];} utils.addEvent(window,'keydown',this);this.on('destroy',function(){utils.removeEvent(window,'keydown',this);});},_key:function(e){if(!this.enabled){return;} var snap=this.options.snap,newX=snap?this.currentPage.pageX:this.x,newY=snap?this.currentPage.pageY:this.y,now=utils.getTime(),prevTime=this.keyTime||0,acceleration=0.250,pos;if(this.options.useTransition&&this.isInTransition){pos=this.getComputedPosition();this._translate(Math.round(pos.x),Math.round(pos.y));this.isInTransition=false;} this.keyAcceleration=now-prevTime<200?Math.min(this.keyAcceleration+acceleration,50):0;switch(e.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){newX+=snap?1:this.wrapperWidth;} else{newY+=snap?1:this.wrapperHeight;} break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){newX-=snap?1:this.wrapperWidth;} else{newY-=snap?1:this.wrapperHeight;} break;case this.options.keyBindings.end:newX=snap?this.pages.length-1:this.maxScrollX;newY=snap?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:newX=0;newY=0;break;case this.options.keyBindings.left:newX+=snap?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:newY+=snap?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:newX-=snap?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:newY-=snap?1:5+this.keyAcceleration>>0;break;default:return;} if(snap){this.goToPage(newX,newY);return;} if(newX>0){newX=0;this.keyAcceleration=0;} else if(newX<this.maxScrollX){newX=this.maxScrollX;this.keyAcceleration=0;} if(newY>0){newY=0;this.keyAcceleration=0;} else if(newY<this.maxScrollY){newY=this.maxScrollY;this.keyAcceleration=0;} this.scrollTo(newX,newY,0);this.keyTime=now;},_animate:function(destX,destY,duration,easingFn){var that=this,startX=this.x,startY=this.y,startTime=utils.getTime(),destTime=startTime+duration;function step(){var now=utils.getTime(),newX,newY,easing;if(now>=destTime){that.isAnimating=false;that._translate(destX,destY);if(!that.resetPosition(that.options.bounceTime)){that._execEvent('scrollEnd');} return;} now=(now-startTime)/duration;easing=easingFn(now);newX=(destX-startX)*easing+startX;newY=(destY-startY)*easing+startY;that._translate(newX,newY);if(that.isAnimating){rAF(step);}} this.isAnimating=true;step();},handleEvent:function(e){if((e.type=='MSPointerDown'||e.type=='MSPointerMove'||e.type=='MSPointerCancel'||e.type=='MSPointerUp'||e.type=='pointerdown'||e.type=='pointermove'||e.type=='pointercancel'||e.type=='pointerup')&&(e.pointerType=="mouse"||e.pointerType==4))return;switch(e.type){case'touchstart':case'MSPointerDown':case'pointerdown':case'mousedown':this._start(e);break;case'touchmove':case'MSPointerMove':case'pointermove':case'mousemove':this._move(e);break;case'touchend':case'MSPointerUp':case'pointerup':case'mouseup':case'touchcancel':case'MSPointerCancel':case'pointercancel':case'mousecancel':this._end(e);break;case'orientationchange':case'resize':this._resize();break;case'transitionend':case'webkitTransitionEnd':case'oTransitionEnd':case'MSTransitionEnd':this._transitionEnd(e);break;case'DOMMouseScroll':case'mousewheel':this._wheel(e);break;case'keydown':this._key(e);break;case'click':if(!e._constructed){e.preventDefault();e.stopPropagation();} break;}}};function createDefaultScrollbar(direction,interactive,type){var scrollbar=document.createElement('div'),indicator=document.createElement('div');if(type===true){scrollbar.style.cssText='position:absolute;z-index:9999';indicator.style.cssText='-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px';} indicator.className='iScrollIndicator';if(direction=='h'){if(type===true){scrollbar.style.cssText+=';height:7px;left:2px;right:2px;bottom:0';indicator.style.height='100%';} scrollbar.className='iScrollHorizontalScrollbar';} else{if(type===true){scrollbar.style.cssText+=';width:7px;bottom:2px;top:2px;right:1px';indicator.style.width='100%';} scrollbar.className='iScrollVerticalScrollbar';} if(!interactive){scrollbar.style.pointerEvents='none';} scrollbar.appendChild(indicator);return scrollbar;}
function Indicator(scroller,options){this.wrapper=typeof options.el=='string'?document.querySelector(options.el):options.el;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=scroller;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,speedRatioX:0,speedRatioY:0};for(var i in options){this.options[i]=options[i];} this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){if(!this.options.disableTouch){utils.addEvent(this.indicator,'touchstart',this);utils.addEvent(window,'touchend',this);} if(!this.options.disablePointer){if(window.PointerEvent){utils.addEvent(this.indicator,'pointerdown',this);utils.addEvent(window,'pointerup',this);} else if(window.MSPointerEvent){utils.addEvent(this.indicator,'MSPointerDown',this);utils.addEvent(window,'MSPointerUp',this);}} if(!this.options.disableMouse){utils.addEvent(this.indicator,'mousedown',this);utils.addEvent(window,'mouseup',this);}}}
Indicator.prototype={handleEvent:function(e){switch(e.type){case'touchstart':case'MSPointerDown':case'pointerdown':case'mousedown':this._start(e);break;case'touchmove':case'MSPointerMove':case'pointermove':case'mousemove':this._move(e);break;case'touchend':case'MSPointerUp':case'pointerup':case'mouseup':case'touchcancel':case'MSPointerCancel':case'pointercancel':case'mousecancel':this._end(e);break;}},destroy:function(){if(this.options.interactive){utils.removeEvent(this.indicator,'touchstart',this);utils.removeEvent(this.indicator,'MSPointerDown',this);utils.removeEvent(this.indicator,'pointerdown',this);utils.removeEvent(this.indicator,'mousedown',this);utils.removeEvent(window,'touchmove',this);utils.removeEvent(window,'MSPointerMove',this);utils.removeEvent(window,'pointermove',this);utils.removeEvent(window,'mousemove',this);utils.removeEvent(window,'touchend',this);utils.removeEvent(window,'MSPointerUp',this);utils.removeEvent(window,'pointerup',this);utils.removeEvent(window,'mouseup',this);} if(this.options.defaultScrollbars){this.wrapper.parentNode.removeChild(this.wrapper);}},_start:function(e){var point=e.touches?e.touches[0]:e;e.preventDefault();e.stopPropagation();this.transitionTime(0);this.initiated=true;this.moved=false;this.lastPointX=point.pageX;this.lastPointY=point.pageY;this.startTime=utils.getTime();if(!this.options.disableTouch){utils.addEvent(window,'touchmove',this);} if(!this.options.disablePointer){if(window.PointerEvent){utils.addEvent(window,'pointermove',this);} else if(window.MSPointerEvent){utils.addEvent(window,'MSPointerMove',this);}} if(!this.options.disableMouse){utils.addEvent(window,'mousemove',this);} this.scroller._execEvent('beforeScrollStart');},_move:function(e){var point=e.touches?e.touches[0]:e,deltaX,deltaY,newX,newY,timestamp=utils.getTime();if(!this.moved){this.scroller._execEvent('scrollStart');} this.moved=true;deltaX=point.pageX-this.lastPointX;this.lastPointX=point.pageX;deltaY=point.pageY-this.lastPointY;this.lastPointY=point.pageY;newX=this.x+deltaX;newY=this.y+deltaY;this._pos(newX,newY);e.preventDefault();e.stopPropagation();},_end:function(e){if(!this.initiated){return;} this.initiated=false;e.preventDefault();e.stopPropagation();utils.removeEvent(window,'touchmove',this);utils.removeEvent(window,'MSPointerMove',this);utils.removeEvent(window,'pointermove',this);utils.removeEvent(window,'mousemove',this);if(this.scroller.options.snap){var snap=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var time=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(this.scroller.x-snap.x),1000),Math.min(Math.abs(this.scroller.y-snap.y),1000)),300);if(this.scroller.x!=snap.x||this.scroller.y!=snap.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=snap;this.scroller.scrollTo(snap.x,snap.y,time,this.scroller.options.bounceEasing);}} if(this.moved){this.scroller._execEvent('scrollEnd');}},transitionTime:function(time){time=time||0;this.indicatorStyle[utils.style.transitionDuration]=time+'ms';},transitionTimingFunction:function(easing){this.indicatorStyle[utils.style.transitionTimingFunction]=easing;},refresh:function(){this.transitionTime(0);if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?'block':'none';} else if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?'block':'none';} else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?'block':'none';} if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){utils.addClass(this.wrapper,'iScrollBothScrollbars');utils.removeClass(this.wrapper,'iScrollLoneScrollbar');if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right='8px';} else{this.wrapper.style.bottom='8px';}}} else{utils.removeClass(this.wrapper,'iScrollBothScrollbars');utils.addClass(this.wrapper,'iScrollLoneScrollbar');if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right='2px';} else{this.wrapper.style.bottom='2px';}}} var r=this.wrapper.offsetHeight;if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=Math.max(Math.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+'px';} else{this.indicatorWidth=this.indicator.clientWidth;} this.maxPosX=this.wrapperWidth-this.indicatorWidth;this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX));} if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=Math.max(Math.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+'px';} else{this.indicatorHeight=this.indicator.clientHeight;} this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY));} this.updatePosition();},updatePosition:function(){var x=Math.round(this.sizeRatioX*this.scroller.x)||0,y=Math.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(x<0){x=0;} else if(x>this.maxPosX){x=this.maxPosX;} if(y<0){y=0;} else if(y>this.maxPosY){y=this.maxPosY;}} this.x=x;this.y=y;if(this.scroller.options.useTransform){this.indicatorStyle[utils.style.transform]='translate('+x+'px,'+y+'px)'+this.scroller.translateZ;} else{this.indicatorStyle.left=x+'px';this.indicatorStyle.top=y+'px';}},_pos:function(x,y){if(x<0){x=0;} else if(x>this.maxPosX){x=this.maxPosX;} if(y<0){y=0;} else if(y>this.maxPosY){y=this.maxPosY;} x=this.options.listenX?Math.round(x/this.sizeRatioX):this.scroller.x;y=this.options.listenY?Math.round(y/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(x,y);}};IScroll.ease=utils.ease;return IScroll;})(window,document,Math);dojo.addOnLoad(function(){'';
Type.registerNamespace('tab');tab.TooltipBehaviorType=function(){};tab.TooltipBehaviorType.prototype = {unspecified:'unspecified',sticky:'sticky',smooth:'smooth',disabled:'disabled'}
tab.TooltipBehaviorType.registerEnum('tab.TooltipBehaviorType',false);tab.FormattingConverters=function(){}
tab.FormattingConverters.getCSSBorderStyle=function(borderStyle){var $0='solid';switch(borderStyle){case 'bs-dashed':$0='dashed';break;case 'bs-dotted':$0='dotted';break;case 'bs-double':$0='double';break;case 'bs-groove':$0='groove';break;case 'bs-hidden':$0='hidden';break;case 'bs-inset':$0='inset';break;case 'bs-outset':$0='outset';break;case 'bs-ridge':$0='ridge';break;case 'bs-solid':$0='solid';break;case 'bs-none':$0='none';break;default:break;}return $0;}
tab.FormattingConverters.$3=function($p0,$p1){var $0={};if(ss.isValue($p0)){$0=tab.FormattingConverters.$5($p0);if($p0.dj){var $1=tab.ColorModel.fromColorCode($p0.agi);$0['background-color']=($p1)?$1.toString():$1.toRgb();}}return $0;}
tab.FormattingConverters.$4=function($p0,$p1){var $0={'font-family':$p0.ms,'font-size':$p0.xa+'pt',color:$p0.agb};if(ss.isValue($p1)){$0['color']=$p1;}if($p0.ak3==='font-style-italic'){$0['font-style']='italic';}if($p0.ak4==='font-weight-bold'){$0['font-weight']='bold';}var $1=null;switch($p0.ak5){case 'text-decoration-overline':$1='overline';break;case 'text-decoration-strikethrough':$1='line-through';break;case 'text-decoration-underline':$1='underline';break;}if(ss.isValue($1)){$0['text-decoration']=$1;}if(ss.isValue($p0.aib)){switch($p0.aib){case 'text-wrap-off':$0['white-space']='nowrap';break;case 'text-wrap-truncate':$0['overflow-x']='hidden';break;}}return $0;}
tab.FormattingConverters.$5=function($p0){var $0={'border-width':$p0.abh.toString()+'px','border-color':$p0.agj,'border-style':tab.FormattingConverters.getCSSBorderStyle($p0.ak6)};return $0;}
tab.FormattingConverters.$6=function($p0){var $0='bottom';switch($p0){case 'v-align-bottom':$0='bottom';break;case 'v-align-top':$0='top';break;case 'v-align-center':$0='middle';break;default:break;}return $0;}
tab.FormattingConverters.$7=function($p0){var $0='start';switch($p0){case 'h-align-left':$0='start';break;case 'h-align-center':$0='center';break;case 'h-align-right':$0='end';break;default:break;}return $0;}
tab.FormattingConverters.cleanUpFontFamilyStyles=function(node){var $0=node.find('span');for(var $1=0;$1<$0.length;++$1){var $2=$0.eq($1);var $3=$2.css('font-family');if(!String.isNullOrEmpty($3)){var $4={};var $5=[];$5.push($3);if($3.startsWith("'")||$3.startsWith('"')){$3=$3.substr(1,$3.length-2);}$3=tab.FormattingConverters.$8($2,$5,$4,$3,tab.FormattingConverters.$2,'font-style','fontStyle');$3=tab.FormattingConverters.$8($2,$5,$4,$3,tab.FormattingConverters.$0,'font-weight','fontWeight');tab.FormattingConverters.$8($2,$5,$4,$3,tab.FormattingConverters.$1,'font-stretch','fontStretch');if($5.length>1){$4['font-family']=$5.join(',');$2.css($4);}}}}
tab.FormattingConverters.$8=function($p0,$p1,$p2,$p3,$p4,$p5,$p6){var $0=$p3.toLowerCase();var $enum1=ss.IEnumerator.getEnumerator($p4);while($enum1.moveNext()){var $1=$enum1.current;if($0.endsWith($1.first)){$p3=$p3.substr(0,$0.lastIndexOf($1.first)).trim();$p1.push("'"+$p3+"'");if(!tab.FormattingConverters.$9($p0,$p6)){$p2[$p5]=$1.second;}}}return $p3;}
tab.FormattingConverters.$9=function($p0,$p1){return ($p0.prop('style'))[$p1];}
tab.RelativeDateFilterPeriodType=function(){};tab.RelativeDateFilterPeriodType.prototype = {year:'year',quarter:'quarter',month:'month',week:'week',day:'day',hour:'hour',minute:'minute',second:'second'}
tab.RelativeDateFilterPeriodType.registerEnum('tab.RelativeDateFilterPeriodType',false);tab.RelativeDateFilterRangeType=function(){};tab.RelativeDateFilterRangeType.prototype = {curr:'curr',todate:'todate',last:'last',next:'next',lastn:'lastn',nextn:'nextn',other:'other',othern:'othern',invalid:'invalid'}
tab.RelativeDateFilterRangeType.registerEnum('tab.RelativeDateFilterRangeType',false);tab.ICategoricalSelectionWidget=function(){};tab.ICategoricalSelectionWidget.registerInterface('tab.ICategoricalSelectionWidget');tab.$create_EventHandlerEvent=function(){return {};}
tab.$create_GeometryWithRegions=function(){return {};}
tab.$create_VisibleGeometry=function(){return {};}
tab.IClient=function(){};tab.IClient.registerInterface('tab.IClient');tab.IApiStorytellingClient=function(){};tab.IApiStorytellingClient.registerInterface('tab.IApiStorytellingClient');tab.$create_PaneInfo=function(canDragH,canDragV,x,y,w,h){var $o={};$o.canDragH=canDragH;$o.canDragV=canDragV;$o.x=x;$o.y=y;$o.w=w;$o.h=h;return $o;}
tab.HitResultHitType=function(){};tab.HitResultHitType.prototype = {noHit:0,areaHit:1,nearHit:2,exactHit:3}
tab.HitResultHitType.registerEnum('tab.HitResultHitType',false);tab.HitResultObjectType=function(){};tab.HitResultObjectType.prototype = {none:0,mark:1,referenceLine:2,trendLine:3}
tab.HitResultObjectType.registerEnum('tab.HitResultObjectType',false);tab.VisualPartTargetState=function(){};tab.VisualPartTargetState.prototype = {normal:'normal',hover:'hover',press:'press',highlighted:'highlighted',selected:'selected'}
tab.VisualPartTargetState.registerEnum('tab.VisualPartTargetState',false);tab.NodeType=function(){};tab.NodeType.prototype = {root:0,pane:1,bin:2,mark:3,lineSegmentUnionRect:4,trendLineSegment:5}
tab.NodeType.registerEnum('tab.NodeType',false);tab.HitTargetType=function(){};tab.HitTargetType.prototype = {rectangle:0,circle:1,line:2,polygon:3}
tab.HitTargetType.registerEnum('tab.HitTargetType',false);tab.IHitTargetGeom=function(){};tab.IHitTargetGeom.registerInterface('tab.IHitTargetGeom');tab.ClipCase=function(){};tab.ClipCase.prototype = {clipNone:0,clipX:1,clipY:2,clipXY:3}
tab.ClipCase.registerEnum('tab.ClipCase',false);Type.registerNamespace('tableau');Type.registerNamespace('tableau.util');tab.IFlipboardNavigatorViewModel=function(){};tab.IFlipboardNavigatorViewModel.registerInterface('tab.IFlipboardNavigatorViewModel');tab.IStoryPointCaptionViewModel=function(){};tab.IStoryPointCaptionViewModel.registerInterface('tab.IStoryPointCaptionViewModel');tab.IFilterTypeViewModel=function(){};tab.IFilterTypeViewModel.registerInterface('tab.IFilterTypeViewModel');tab.$create_QFMetrics=function(){return {};}
tab.$create_vqlui$5=function(x,y,xStart,isRange,oImg){var $o={};$o.x=x;$o.y=y;$o.$0=xStart;$o.$1=isRange;$o.$2=oImg;return $o;}
tab.IRegionContentProvider=function(){};tab.IRegionContentProvider.registerInterface('tab.IRegionContentProvider');tab.ComboBoxTheme=function(){};tab.ComboBoxTheme.prototype = {standard:0,compact:1}
tab.ComboBoxTheme.registerEnum('tab.ComboBoxTheme',false);tab.ComboBoxMenuThemeChoice=function(){};tab.ComboBoxMenuThemeChoice.prototype = {standard:0,dropdown:1}
tab.ComboBoxMenuThemeChoice.registerEnum('tab.ComboBoxMenuThemeChoice',false);tab.$create_CatFilterContentItem=function(){return {};}
tab.IAccordionContent=function(){};tab.IAccordionContent.registerInterface('tab.IAccordionContent');tab.IMovable=function(){};tab.IMovable.registerInterface('tab.IMovable');tab.ISlider=function(){};tab.ISlider.registerInterface('tab.ISlider');tab.FilteringSearchWidgetStyle=function(){};tab.FilteringSearchWidgetStyle.prototype = {invalid:0,dropdown:1,inline:2}
tab.FilteringSearchWidgetStyle.registerEnum('tab.FilteringSearchWidgetStyle',false);tab.$create_OverlayImageInfo=function(){var $o={};return $o;}
tab.$create_SearchWidgetQfProperty=function(){return {};}
tab.$create_LinkBlurbPair=function(){return {};}
tab.$create_VizParameterInfo=function(){return {};}
tab.$create_ShareSettings=function(){return {};}
tab.$create_ScrollBound=function(){return {};}
tab.$create_MoverObj=function(){return {};}
tab.$create_ContinuousSliderParams=function(){return {};}
tab.$create_SliderParams=function(){return {};}
tab.$create_ScrollData=function(){return {};}
tab.$create_DomRectangle=function(){var $o={};return $o;}
tab.$create_TransformSpec=function(){return {};}
tab.IContentFetcher=function(){};tab.IContentFetcher.registerInterface('tab.IContentFetcher');tab.IContentFormatter=function(){};tab.IContentFormatter.registerInterface('tab.IContentFormatter');tab.ITiledGridModel=function(){};tab.ITiledGridModel.registerInterface('tab.ITiledGridModel');tab.ITiledWidgetUI=function(){};tab.ITiledWidgetUI.registerInterface('tab.ITiledWidgetUI');tab.ITooltipBehavior=function(){};tab.ITooltipBehavior.registerInterface('tab.ITooltipBehavior');tab.TooltipTrigger=function(){};tab.TooltipTrigger.prototype = {hover:0,click:1,dragSelect:2}
tab.TooltipTrigger.registerEnum('tab.TooltipTrigger',false);tab.ApiCrossDomainPresModelsFactory=function(){}
tab.ApiCrossDomainPresModelsFactory.newClientInfo=function(isAutoUpdate,isDownloadAllowed,workbookName,currentSheetName,publishedSheets,dashboardZones,story){var $0={};$0.isAutoUpdate=isAutoUpdate;$0.isDownloadAllowed=isDownloadAllowed;$0.workbookName=workbookName;$0.currentSheetName=currentSheetName;$0.publishedSheets=publishedSheets;$0.dashboardZones=dashboardZones;$0.story=story;return $0;}
tab.ApiCrossDomainPresModelsFactory.newAutoUpdateState=function(isAutoUpdate){var $0={};$0.isAutoUpdate=isAutoUpdate;return $0;}
tab.ApiCrossDomainPresModelsFactory.newCommandError=function(errorCode,additionalInformation){var $0={};$0.errorCode=errorCode;$0.additionalInformation=additionalInformation;return $0;}
tab.ApiCrossDomainPresModelsFactory.newSheetInfo=function(name,sheetType,minWidth,minHeight,maxWidth,maxHeight,repositoryUrl){var $0={};$0.maxHeight=maxHeight;$0.maxWidth=maxWidth;$0.minHeight=minHeight;$0.minWidth=minWidth;var $1={};$1.name=name;$1.sizeConstraints=$0;$1.repositoryUrl=repositoryUrl;$1.sheetType=sheetType;return $1;}
tab.ApiCrossDomainPresModelsFactory.newContainedSheetInfo=function(name,sheetType,zoneId,dashboardZones){var $0={};$0.name=name;$0.sheetType=sheetType;$0.zoneId=zoneId;$0.dashboardZones=dashboardZones;return $0;}
tab.ApiCrossDomainPresModelsFactory.newDashboardZone=function(name,zoneId,zoneType,height,width,x,y){var $0={};$0.name=name;$0.zoneId=zoneId;$0.zoneType=zoneType;$0.height=height;$0.width=width;$0.x=x;$0.y=y;return $0;}
tab.ApiCrossDomainPresModelsFactory.newStory=function(activeStoryPointIndex,storyPoints){var $0={};$0.activeStoryPointIndex=activeStoryPointIndex;$0.storyPoints=storyPoints;return $0;}
tab.ApiCrossDomainPresModelsFactory.newStoryPoint=function(caption,index,storyPointId,isUpdated,containedSheetInfo){var $0={};$0.caption=caption;$0.index=index;$0.storyPointId=storyPointId;$0.isUpdated=isUpdated;$0.containedSheetInfo=containedSheetInfo;return $0;}
tab.ApiCrossDomainPresModelsFactory.$0=function($p0,$p1,$p2,$p3,$p4,$p5){var $0={};$0.fieldName=$p0;$0.filterType=$p1;$0.caption=$p2;$0.dataSourceName=$p3;$0.fieldRole=$p4;$0.fieldAggregation=$p5;return $0;}
tab.ApiCrossDomainPresModelsFactory.newCategoricalFilter=function(fieldName,filterType,caption,dataSourceName,fieldRole,fieldAggregation,isExclude,appliedValues){var $0=tab.ApiCrossDomainPresModelsFactory.$0(fieldName,filterType,caption,dataSourceName,fieldRole,fieldAggregation);$0.isExclude=isExclude;$0.appliedValues=appliedValues;return $0;}
tab.ApiCrossDomainPresModelsFactory.newQuantitativeFilter=function(fieldName,filterType,caption,dataSourceName,fieldRole,fieldAggregation,domainMinValue,domainMaxValue,minValue,maxValue,includeNullValues){var $0=tab.ApiCrossDomainPresModelsFactory.$0(fieldName,filterType,caption,dataSourceName,fieldRole,fieldAggregation);$0.domainMinValue=domainMinValue;$0.domainMaxValue=domainMaxValue;$0.minValue=minValue;$0.maxValue=maxValue;$0.includeNullValues=includeNullValues;return $0;}
tab.ApiCrossDomainPresModelsFactory.newHierarchicalFilter=function(fieldName,filterType,caption,dataSourceName,fieldRole,fieldAggregation,levels){var $0=tab.ApiCrossDomainPresModelsFactory.$0(fieldName,filterType,caption,dataSourceName,fieldRole,fieldAggregation);$0.levels=levels;return $0;}
tab.ApiCrossDomainPresModelsFactory.newRelativeDateFilter=function(fieldName,filterType,caption,dataSourceName,fieldRole,fieldAggregation,periodType,rangeType,rangeN){var $0=tab.ApiCrossDomainPresModelsFactory.$0(fieldName,filterType,caption,dataSourceName,fieldRole,fieldAggregation);$0.periodType=periodType;$0.rangeType=rangeType;$0.rangeN=rangeN;return $0;}
tab.ApiCrossDomainPresModelsFactory.newDataSourcesForWorksheet=function(worksheetName,dataSources){var $0={};$0.worksheetName=worksheetName;$0.dataSources=dataSources;return $0;}
tab.ApiCrossDomainPresModelsFactory.newDataSource=function(name,fields,isPrimary){var $0={};$0.name=name;$0.fields=fields;$0.isPrimary=isPrimary;return $0;}
tab.ApiCrossDomainPresModelsFactory.newField=function(name,role,aggregation){var $0={};$0.name=name;$0.role=role;$0.aggregation=aggregation;return $0;}
tab.ApiCrossDomainPresModelsFactory.newCustomViewsInfo=function(customViewLoaded,defaultCustomViewId,currentView,customViews){var $0={};$0.customViewLoaded=customViewLoaded;$0.defaultCustomViewId=defaultCustomViewId;$0.currentView=currentView;$0.customViews=customViews;return $0;}
tab.ApiCrossDomainPresModelsFactory.newCustomView=function(id,name,urlId,url,startViewId,isPublic,owner){var $0={};$0.id=id;$0.name=name;$0.urlId=urlId;$0.url=url;$0.startViewId=startViewId;$0.isPublic=isPublic;$0.owner=owner;return $0;}
tab.ApiCrossDomainPresModelsFactory.newUser=function(id,friendlyName,username){var $0={};$0.id=id;$0.friendlyName=friendlyName;$0.username=username;return $0;}
tab.vqlui$D=function(){}
tab.vqlui$D.$0=function($p0,$p1,$p2){var $0=$p0.apr[$p1].s4;var $1=$p0.s5;var $2=[];var $enum1=ss.IEnumerator.getEnumerator($p0.apm.apo);while($enum1.moveNext()){var $4=$enum1.current;if($4.s3===$1){continue;}if(!String.isNullOrEmpty($p2)&&$4.s3!==$p2){continue;}var $5=[];var $enum2=ss.IEnumerator.getEnumerator($4.ao7);while($enum2.moveNext()){var $8=$enum2.current;if(ss.isValue($8.afl)){continue;}var $9=$8;if(ss.isValue($9.ao9)){var $enum3=ss.IEnumerator.getEnumerator($9.ao9);while($enum3.moveNext()){var $A=$enum3.current;var $B=tab.ApiCrossDomainPresModelsFactory.newField($A.mb,tab._ApiEnumConverter.convertFieldRole($A.aj4),tab._ApiEnumConverter.convertFieldAggregation($A.ag9));$5.add($B);}}else{var $C=tab.ApiCrossDomainPresModelsFactory.newField($8.mb,tab._ApiEnumConverter.convertFieldRole($8.aj5),tab._ApiEnumConverter.convertFieldAggregation($8.aha));$5.add($C);}}var $6=$4.s3===$0;var $7=tab.ApiCrossDomainPresModelsFactory.newDataSource($4.s3,$5,$6);$2.add($7);}var $3=tab.ApiCrossDomainPresModelsFactory.newDataSourcesForWorksheet($p1,$2);return $3;}
tab._ApiEnumConverter=function(){}
tab._ApiEnumConverter.convertDataType=function(dataType){if(dataType==='boolean'){return 'bool';}switch(dataType){case 'date':case 'datetime':return 'date';case 'integer':case 'real':case 'tuple':return 'number';case 'cstring':return 'string';case 'unknown':default:return 'string';}}
tab._ApiEnumConverter.convertFieldAggregation=function(aggregation){switch(aggregation){case 'attr':return 'ATTR';case 'average':return 'AVG';case 'count':return 'COUNT';case 'count-d':return 'COUNTD';case 'day':return 'DAY';case 'end':return 'END';case 'hour':return 'HOUR';case 'in-out':return 'INOUT';case 'kurtosis':return 'KURTOSIS';case 'max':return 'MAX';case 'mdy':return 'MDY';case 'median':return 'MEDIAN';case 'min':return 'MIN';case 'minute':return 'MINUTE';case 'month':return 'MONTH';case 'month-year':return 'MONTHYEAR';case 'none':return 'NONE';case 'percentile':return 'PERCENTILE';case 'qtr':return 'QTR';case 'quart1':return 'QUART1';case 'quart3':return 'QUART3';case 'second':return 'SECOND';case 'skewness':return 'SKEWNESS';case 'std-dev':return 'STDEV';case 'std-dev-p':return 'STDEVP';case 'sum':return 'SUM';case 'sum-xsqr':return 'SUM_XSQR';case 'trunc-day':return 'TRUNC_DAY';case 'trunc-hour':return 'TRUNC_HOUR';case 'trunc-month':return 'TRUNC_MONTH';case 'trunc-qtr':return 'TRUNC_QTR';case 'trunc-second':return 'TRUNC_SECOND';case 'trunc-week':return 'TRUNC_WEEK';case 'trunc-year':return 'TRUNC_YEAR';case 'user':return 'USER';case 'var':return 'VAR';case 'var-p':return 'VARP';case 'week':return 'WEEK';case 'weekday':return 'WEEKDAY';case 'year':return 'YEAR';default:throw new Error('Unknown AggType: '+aggregation);}}
tab._ApiEnumConverter.convertFieldRole=function(role){switch(role){case 'dimension':return 'dimension';case 'measure':return 'measure';case 'unknown':return 'unknown';default:throw new Error('Unknown FieldRole type: '+role);}}
tab._ApiEnumConverter.convertParameterDomainType=function(domainType){switch(domainType){case 'any':return 'all';case 'list':return 'list';case 'range':return 'range';default:throw new Error('Unknown ParameterTypesDomainType: '+domainType);}}
tab._ApiEnumConverter.convertPeriodType=function(periodType){switch(periodType){case 'year':return 'year';case 'day':return 'day';case 'hour':return 'hour';case 'minute':return 'minute';case 'month':return 'month';case 'quarter':return 'quarter';case 'second':return 'second';case 'week':return 'week';default:throw new Error('Unknown DatePeriodType: '+periodType);}}
tab._ApiEnumConverter.convertRangeType=function(filtersRelativeDateRangeType){switch(filtersRelativeDateRangeType){case 'curr':return 'curr';case 'last':return 'last';case 'lastn':return 'lastn';case 'next':return 'next';case 'nextn':return 'nextn';case 'todate':return 'todate';case 'invalid':default:throw new Error('Unknown or invalid FiltersRelativeDateRangeType: '+filtersRelativeDateRangeType);}}
tab._ApiEnumConverter.convertZoneType=function(zoneType){switch(zoneType){case 'color':case 'shape':case 'size':return 'legend';case 'map':return 'legend';case 'filter':return 'quickFilter';case 'viz':return 'worksheet';case 'paramctrl':return 'parameterControl';case 'empty':return 'blank';case 'title':return 'title';case 'text':return 'text';case 'bitmap':return 'image';case 'web':return 'webPage';case 'layout-basic':case 'layout-flow':case 'layout-free-form':return null;default:return 'blank';}}
tab.ApiEventHandler=function(client,storytellingClient,responder){this.$0=new tab.DisposableHolder();this.$4=responder;this.updateClients(client,storytellingClient);dojo.subscribe('newLayoutId',ss.Delegate.create(this,this.handleNewLayout));dojo.subscribe('layoutUpdated',ss.Delegate.create(this,this.onLayoutUpdated));}
tab.ApiEventHandler.$13=function($p0){var $0=new ss.StringBuilder();var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.current;if(!$0.isEmpty){$0.append('.');}$0.append('['+$1+']');}return $0.toString();}
tab.ApiEventHandler.$14=function(){var $0={};var $1=tab.ModelUtils.findContentDashboard();var $enum1=ss.IEnumerator.getEnumerator($1.get_zoneModels());while($enum1.moveNext()){var $4=$enum1.current;if($4.get_zoneType()==='filter'&&$4.get_worksheetName()===tsConfig.current_sheet_name){var $5=tab.JsonUtil.parseJson($4.get_zonePresModel().ts);$0[$5.param]=true;}}var $2={};var $3=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);if(ss.isValue($3)){var $6=$3.get_filters();var $enum2=ss.IEnumerator.getEnumerator($6);while($enum2.moveNext()){var $7=$enum2.current;var $8=tab.ApiEventHandler.$13($7.get_filterPresModel().name);if(Object.keyExists($0,$8)){var $9=$7.get_filterPresModel().fieldCaption;if($7.get_filterPresModel().type!=='H'){$2[$9]=$7.get_filterPresModel().type;}else{$9='';var $A=$7.get_filterPresModel().table[0].table;if(ss.isValue($A)&&ss.isValue($A.schema)&&ss.isValue($A.schema[0])&&ss.isValue($A.schema[0].name)){var $B=$A.schema[0].name;for(var $C=1;$C<$B.length;$C++){$9+='['+$B[$C]+']';$2[$9]=$7.get_filterPresModel().type;$9+='.';}}}}}}return $2;}
tab.ApiEventHandler.$1B=function($p0){var $0=$p0;if(ss.isValue($0['vq'])){return tab.ApiCrossDomainPresModelsFactory.newCommandError('invalidSelectionFieldName',$0['vq']);}else if(ss.isValue($0['uy'])){return tab.ApiCrossDomainPresModelsFactory.newCommandError('invalidSelectionValue',$0['uy']);}else if(ss.isValue($0['ux'])){return tab.ApiCrossDomainPresModelsFactory.newCommandError('invalidSelectionDate',$0['ux']);}return null;}
tab.ApiEventHandler.prototype={$1:null,$2:null,$3:null,$4:null,$5:false,$6:null,dispose:function(){this.$0.dispose();if(this.$3!=null){this.$3.dispose();this.$3=null;}},updateClients:function(newClient,newStorytellingClient){if(ss.isValue(this.$1)){if(tsConfig.allow_custom_views&&ss.isValue(this.$1.get_customViewsViewModel())){this.$1.get_customViewsViewModel().remove_dirtyChanged(ss.Delegate.create(this,this.onCustomViewUpdated));this.$1.get_customViewsViewModel().remove_customViewListChanged(ss.Delegate.create(this,this.onCustomViewListLoaded));this.$1.get_customViewsViewModel().remove_customViewDestroyed(ss.Delegate.create(this,this.onCustomViewDestroyed));this.$1.get_customViewsViewModel().remove_defaultCustomViewChanged(ss.Delegate.create(this,this.onCustomViewSetDefault));}}if(ss.isValue(this.$3)){this.$3.dispose();}this.$1=newClient;this.$2=newStorytellingClient;this.$3=new tab.ApiStorytellingHandler(newStorytellingClient,this.$4);_.defer(ss.Delegate.create(this,function(){
if(ss.isValue(this.$6)){var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $1_1=$enum1.current;if(ss.isValue($1_1)){dojo.unsubscribe($1_1);}}}this.$6=new Array(this.$1.get_viewControllers().length);var $1_0=0;this.$1.get_viewControllers().forEach(ss.Delegate.create(this,function($p2_0){
this.$6[$1_0]=$p2_0.get_viewSession().registerEventListener('selectionChanged',ss.Delegate.create(this,function($p3_0){
this.onSelectionChanged($p2_0.get_sheetName(),$p3_0);}));$1_0++;}));}));if(tsConfig.allow_custom_views&&ss.isValue(this.$1.get_customViewsViewModel())){this.$1.get_customViewsViewModel().add_dirtyChanged(ss.Delegate.create(this,this.onCustomViewUpdated));this.$1.get_customViewsViewModel().add_customViewListChanged(ss.Delegate.create(this,this.onCustomViewListLoaded));this.$1.get_customViewsViewModel().add_customViewDestroyed(ss.Delegate.create(this,this.onCustomViewDestroyed));this.$1.get_customViewsViewModel().add_defaultCustomViewChanged(ss.Delegate.create(this,this.onCustomViewSetDefault));}this.$5=false;var $0=tab.ApplicationModel.get_instance().get_workbook();if(ss.isValue($0)){$0.addNewDashboardHandler(ss.Delegate.create(this,this.onNewDashboard));}},handleEvent:function(e){var $0=e.data;if(ss.isNullOrUndefined($0)){return;}var $1=tab._ApiCommand.parse($0);if(ss.isNullOrUndefined($1.get_rawName())){return;}if($1.get_name()==='api.GetClientInfoCommand'){this.$2D($1);}else if($1.get_name()==='api.GetCurrentUrlCommand'){this.$2E($1);}else if($1.get_name()==='api.ClearFilterCommand'){this.$15($1);}else if($1.get_name()==='api.ApplyCategoricalFilterCommand'){this.$16($1);}else if($1.get_name()==='api.ApplyRangeFilterCommand'){this.$E($1);}else if($1.get_name()==='api.ApplyRelativeDateFilterCommand'){this.$F($1);}else if($1.get_name()==='api.ApplyHierarchicalFilterCommand'){this.$D($1);}else if($1.get_name()==='api.RefreshDataCommand'){this.$28($1);}else if($1.get_name()==='api.RevertAllCommand'){this.$29($1);}else if($1.get_name()==='api.SwitchActiveSheetCommand'){this.$2B($1);}else if($1.get_name()==='api.UpdateActiveSheetCommand'){this.$2C($1);}else if($1.get_name()==='api.SelectMarksCommand'){this.$1A($1);}else if($1.get_name()==='api.FetchSelectedMarksCommand'){this.$B($1);}else if($1.get_name()==='api.FetchParametersCommand'){this.$7($1);}else if($1.get_name()==='api.SetParameterValueCommand'){this.$8($1);}else if($1.get_name()==='api.InvokeCommandCommand'){this.$25($1);}else if($1.get_name()==='api.SetSheetSizeCommand'){this.$27($1);}else if($1.get_name()==='api.ShowHideToolbarCommand'){this.$2A($1);}else if($1.get_name()==='api.GetFiltersListCommand'){this.$9($1);}else if($1.get_name()==='api.GetOneFilterInfoCommand'){this.$A($1);}else if($1.get_name()==='api.GetDataSourceCommand'){this.$23($1);}else if($1.get_name()==='api.GetDataSourcesCommand'){this.$24($1);}else if($1.get_name()==='api.FetchCustomViewsCommand'){this.$1D($1);}else if($1.get_name()==='api.ShowCustomViewCommand'){this.$1E($1);}else if($1.get_name()==='api.UpdateCustomViewCommand'){this.$20($1);}else if($1.get_name()==='api.MakeCurrentCustomViewDefaultCommand'){this.$21($1);}else if($1.get_name()==='api.RemoveCustomViewCommand'){this.$1F($1);}else if($1.get_name()==='api.SaveNewCustomViewCommand'){this.$22($1);}else if($1.get_name()==='api.ActivateStoryPoint'){this.$3.activateStoryPoint($1);}else if($1.get_name()==='api.ActivatePreviousStoryPoint'){this.$3.activatePreviousStoryPoint($1);}else if($1.get_name()==='api.ActivateNextStoryPoint'){this.$3.activateNextStoryPoint($1);}else if($1.get_name()==='api.RevertStoryPoint'){this.$3.revertStoryPoint($1);}},handleNewLayout:function(presModel){var $0=presModel.oldSheetName;this.$4.sendCrossDomainEventNotification('api.TabSwitchEvent',$0,presModel.ss);},onSelectionChanged:function(sheetName,oSelectionInfo){if(ss.isNullOrUndefined(oSelectionInfo)||ss.isNullOrUndefined(oSelectionInfo.primarySheet)){return;}if(ss.isNullOrUndefined(oSelectionInfo.cmdResult)||ss.isNullOrUndefined(oSelectionInfo.cmdResult.mk)){return;}var $0=(oSelectionInfo.cmdResult.mk).split(':');if($0[0]==='tabdoc'){var $1=$0[1];if($0[1].startsWith('select')){this.$4.sendCrossDomainEventNotification('api.MarksSelectionChangedEvent',sheetName,null);}else if($1==='reset-filter'||$1==='clear-existing-filter'||$1==='range-filter'||$1==='categorical-filter'||$1==='categorical-filter-by-index'||$1==='hierarchical-filter'||$1==='relative-date-filter'){var $2=oSelectionInfo.cmdResult.amn;var $3=$2['afc'];if(ss.isNullOrUndefined($2['uy'])&&ss.isNullOrUndefined($2['r8'])&&ss.isValue($3)){var $4=null;var $5=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),oSelectionInfo.primarySheet);if(ss.isValue($5)){var $7=_.find($5.get_filters(),function($p1_0){
return $p1_0.get_globalFieldName()===$3;});if(ss.isValue($7)){$4=$7.get_filterPresModel().fieldCaption;}}var $6=[$3,$4||$3];this.$4.sendCrossDomainEventNotification('api.FilterChangedEvent',oSelectionInfo.primarySheet,tab.JsonUtil.toJson($6));}}}else if($0[0]==='tabsrv'&&$0[1].startsWith('select')){this.$4.sendCrossDomainEventNotification('api.MarksSelectionChangedEvent',sheetName,null);}},onLayoutUpdated:function(info){this.$4.sendCrossDomainEventNotification('api.VizInteractiveEvent',null,tsConfig.clientNumber);},onNewDashboard:function(dm){dm=tab.ModelUtils.findContentDashboard();this.$0.dispose();var $0=dm.get_zoneModels();$0.forEach(ss.Delegate.create(this,function($p1_0){
if($p1_0.get_zoneType()==='paramctrl'){var $1_0=$p1_0.get_model();$1_0.add_newParameterCtrl(ss.Delegate.create(this,this.onParameterChange));this.$0.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
$1_0.remove_newParameterCtrl(ss.Delegate.create(this,this.onParameterChange));})));}}));},onParameterChange:function(info){var $0=info.r2;this.$4.sendCrossDomainEventNotification('api.ParameterChangedEvent',null,$0);},onCustomViewDestroyed:function(sender,e){this.$4.sendCrossDomainEventNotification('api.CustomViewRemovedEvent',null,tab.JsonUtil.toJson(this.$1C(),false,''));this.$5=true;},onCustomViewUpdated:function(sender,e){this.$4.sendCrossDomainEventNotification('api.CustomViewUpdatedEvent',null,tab.JsonUtil.toJson(this.$1C(),false,''));this.$5=true;},onCustomViewSetDefault:function(sender,e){this.$4.sendCrossDomainEventNotification('api.CustomViewSetDefaultEvent',null,tab.JsonUtil.toJson(this.$1C(),false,''));this.$5=true;},onCustomViewListLoaded:function(sender,e){this.$4.sendCrossDomainEventNotification('api.CustomViewsListLoadedEvent',null,tab.JsonUtil.toJson(this.$1C(),false,''));this.$5=true;},$7:function($p0){var $0={};$0.commandName='get-parameter-models';$0.commandNamespace='tabdoc';this.$33($p0,$0,'api.FetchParametersCommand',tab.vqlui$9.$0);},$8:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1={};$1.commandName='set-parameter-value';$1.commandNamespace='tabdoc';$1.commandParams={};$1.commandParams['r2']=$0['api.setParameterName'];$1.commandParams['me']=$0['api.setParameterValue'];this.$33($p0,$1,'api.SetParameterValueCommand',tab.vqlui$9.$1);},$9:function($p0){var $0=function($p1_0,$p1_1){
$p1_1['ek']=$p1_0['api.ignoreDomain'].toString();};var $1=this.$30($p0,'get-filter-info',$0);this.$33($p0,$1,'api.GetFiltersListCommand',tab.vqlui$F.$0);},$A:function($p0){var $0=function($p1_0,$p1_1){
if(ss.isValue($p1_0['api.fieldCaption'])){$p1_1['r2']=$p1_0['api.fieldCaption'];}else{$p1_1['afc']=$p1_0['api.fieldName'];}if(ss.isValue($p1_0['api.filterHierarchicalLevels'])){$p1_1['aa7']=$p1_0['api.filterHierarchicalLevels'];}$p1_1['ek']=$p1_0['api.ignoreDomain'].toString();};var $1=this.$30($p0,'get-filter-info',$0);this.$33($p0,$1,'api.GetOneFilterInfoCommand',tab.vqlui$F.$2);},$B:function($p0){var $0=function($p1_0,$p1_1){
};var $1=this.$2F($p0,'get-selection',$0);this.$33($p0,$1,'api.FetchSelectedMarksCommand',ss.Delegate.create(this,this.$C));},$C:function($p0){var $0=$p0;var $1=$0.awy;var $2=$0.awz;var $3=new tab.DataDictionaryModel(null);$3.update($1);var $4=new tab.VizDataModel(null);$4.update($2);var $5={};var $6=[];$5.marks=$6;if(ss.isNullOrUndefined($3)||$3.get_isEmpty()){return $5;}$4.forEachTupleId(function($p1_0){
var $1_0={};$1_0.tupleId=$p1_0;var $1_1=[];$1_0.pairs=$1_1;$6.push($1_0);$4.forEachVizDataField(function($p2_0,$p2_1){
var $2_0=$p2_0.get_fieldCaption();var $2_1={};$2_1.fieldName=$p2_0.get_fieldCaption();$2_1.formattedValue=tab.VizDataLookup.lookupAlias($p1_0,$p2_0,$3);$2_1.valueDataType=tab._ApiEnumConverter.convertDataType($p2_0.get_dataType());var $2_2=null;if(!tab.VizDataLookup.isSpecial($p1_0,$p2_0,$3)&&$p2_0.get_hasDataValues()&&$p2_0.isTupleIdValid($p1_0)){$2_2=tab.VizDataLookup.lookupRawDataValue($p1_0,$p2_0,$3);}var $2_3=tab._ApiSerializer.serializeDataValue($2_2,$p2_0.get_dataType());$2_1.value=$2_3;$1_1.push($2_1);return true;});return true;});return $5;},$D:function($p0){var $0=ss.Delegate.create(this,function($p1_0,$p1_1){
$p1_1['r9']=$p1_0['api.fieldCaption'];if(ss.isValue($p1_0['api.filterReset'])&&$p1_0['api.filterReset']){$p1_1['akd']='filter-clear';}else{if(ss.isValue($p1_0['api.exclude'])){$p1_1['t']=$p1_0['api.exclude'];}var $1_0=this.$10($p1_0['api.filterUpdateType'].toString());$p1_1['akd']=$1_0;if(ss.isValue($p1_0['api.filterHierarchicalValues'])){$p1_1['uq']=$p1_0['api.filterHierarchicalValues'];}if(ss.isValue($p1_0['api.filterHierarchicalLevels'])){$p1_1['ace']=$p1_0['api.filterHierarchicalLevels'];}if(ss.isNullOrUndefined($p1_0['api.filterHierarchicalValues'])&&ss.isNullOrUndefined($p1_0['api.filterHierarchicalLevels'])){$p1_1['ace']='[]';}}});var $1=this.$2F($p0,'hierarchical-filter',$0);this.$33($p0,$1,'api.ApplyHierarchicalFilterCommand',tab.vqlui$F.$1);},$E:function($p0){var $0=function($p1_0,$p1_1){
$p1_1['r9']=$p1_0['api.fieldCaption'];if(ss.isValue($p1_0['api.filterReset'])&&$p1_0['api.filterReset']){$p1_1['akd']='filter-clear';}else{if(ss.isValue($p1_0['api.filterRangeMax'])){$p1_1['t6']=$p1_0['api.filterRangeMax'];}if(ss.isValue($p1_0['api.filterRangeMin'])){$p1_1['t5']=$p1_0['api.filterRangeMin'];}if(ss.isValue($p1_0['api.filterRangeNullOption'])){if($p1_0['api.filterRangeNullOption']==='NULL_VALUES'){$p1_1['aiw']='include-null';}else if($p1_0['api.filterRangeNullOption']==='NON_NULL_VALUES'){$p1_1['aiw']='include-non-null';}else{$p1_1['aiw']='include-all';}}}};var $1=this.$2F($p0,'range-filter',$0);this.$33($p0,$1,'api.ApplyRangeFilterCommand',tab.vqlui$F.$1);},$F:function($p0){var $0=function($p1_0,$p1_1){
$p1_1['r9']=$p1_0['api.fieldCaption'];if(ss.isValue($p1_0['api.filterReset'])&&$p1_0['api.filterReset']){$p1_1['akd']='filter-clear';}else{if(ss.isValue($p1_0['api.filterDateArchorValue'])){$p1_1['mz']=$p1_0['api.filterDateArchorValue'];}$p1_1['ai1']=($p1_0['api.filterPeriodType']).toLowerCase();$p1_1['ai3']=($p1_0['api.filterDateRangeType']).toLowerCase();if(ss.isValue($p1_0['api.filterDateRange'])){$p1_1['aa1']=$p1_0['api.filterDateRange'];}}};var $1=this.$2F($p0,'relative-date-filter',$0);this.$33($p0,$1,'api.ApplyRelativeDateFilterCommand',tab.vqlui$F.$1);},$10:function($p0){if($p0.toLowerCase()==='replace'){return 'filter-replace';}else if($p0.toLowerCase()==='all'){return 'filter-all';}else if($p0.toLowerCase()==='add'){return 'filter-add';}else if($p0.toLowerCase()==='remove'){return 'filter-remove';}else{return 'filter-replace';}},$11:function($p0){if($p0.toLowerCase()==='replace'){return 'select-replace';}else if($p0.toLowerCase()==='add'){return 'select-add';}else if($p0.toLowerCase()==='remove'){return 'select-remove';}return 'select-replace';},$12:function($p0){if($p0.toLowerCase()==='nullvalues'){return 'include-null';}else if($p0.toLowerCase()==='nonnullvalues'){return 'include-non-null';}else if($p0.toLowerCase()==='allvalues'){return 'include-all';}return 'include-all';},$15:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1=tab.ApiEventHandler.$14();var $2=$0['api.fieldCaption'];var $3=Object.keyExists($1,$2);var $4;if($3){if($1[$2]==='RD'){var $7=new tab.vqlui$C('api.localfailed','Clearing a relative date filter is not supported when an associated quick filter is on the Worksheet. Please call applyRelativeDateFilter instead.');this.$4.sendCrossDomainResponse($p0,$7.get_$1(),'api.ClearFilterCommand');return;}$4='reset-filter';}else{$4='clear-existing-filter';}var $5=function($p1_0,$p1_1){
$p1_1['r9']=$2;};var $6=this.$2F($p0,$4,$5);this.$33($p0,$6,'api.ClearFilterCommand',tab.vqlui$F.$1);},$16:function($p0){var $0=ss.Delegate.create(this,function($p1_0,$p1_1){
$p1_1['r9']=$p1_0['api.fieldCaption'];if(ss.isValue($p1_0['api.filterReset'])&&$p1_0['api.filterReset']){$p1_1['akd']='filter-clear';}else{if(ss.isValue($p1_0['api.exclude'])){$p1_1['t']=$p1_0['api.exclude'].toString();}var $1_0=this.$10($p1_0['api.filterUpdateType'].toString());$p1_1['akd']=$1_0;if(ss.isValue($p1_0['api.filterCategoricalValues'])){$p1_1['uq']=tab.JsonUtil.toJson($p1_0['api.filterCategoricalValues']);}else{$p1_1['uq']='[""]';}}});var $1=this.$2F($p0,'categorical-filter',$0);this.$33($p0,$1,'api.ApplyCategoricalFilterCommand',tab.vqlui$F.$1);},$17:function($p0,$p1){var $0=[];$0.add('[');for(var $1=0;$1<$p0.length;$1++){if($1>0){$0.add(',');}$0.add('{');$0.add('"'+'r9'+'":');$0.add('"'+$p0[$1]+'"');$0.add(',');$0.add('"'+'ur'+'":');$0.add($p1[$1]);$0.add('}');}$0.add(']');return $0;},$18:function($p0){var $0=[];$0.add('{');$0.add('"'+'akf'+'":');$0.add('"tuples"');$0.add(',');$0.add('"'+'acg'+'":');$0.add($p0);$0.add('}');return $0.join('');},$19:function($p0,$p1){var $0=[];$0.add('[');for(var $1=0;$1<$p0.length;$1++){if($1>0){$0.add(',');}$0.add('{');$0.add('"'+'r9'+'":');$0.add('"'+$p0[$1]+'"');$0.add(',');var $2=tab.JsonUtil.parseJson($p1[$1]);var $3=tab.JsonUtil.parseJson($2[0]);if(ss.isValue($3.max)){$0.add('"'+'my'+'":');$0.add('"'+$3.max.toString()+'"');}if(ss.isValue($3.min)){if(ss.isValue($3.max)){$0.add(',');}$0.add('"'+'mx'+'":');$0.add('"'+$3.min.toString()+'"');}if(ss.isValue($3.nullOption)){var $4=this.$12($3.nullOption.toString());$0.add(',');$0.add('"'+'aiw'+'":');$0.add('"'+$4+'"');}$0.add('}');}$0.add(']');return $0;},$1A:function($p0){var $0=ss.Delegate.create(this,function($p1_0,$p1_1){
if(tab.MiscUtil.isNullOrEmpty($p1_0)){$p1_1['akg']='select-replace';}else{$p1_1['akg']=this.$11($p1_0['api.filterUpdateType'].toString());if(ss.isValue($p1_0['api.categoricalFieldCaption'])&&ss.isValue($p1_0['api.categoricalMarkValues'])){var $1_0=tab.JsonUtil.parseJson($p1_0['api.categoricalFieldCaption']);var $1_1=tab.JsonUtil.parseJson($p1_0['api.categoricalMarkValues']);var $1_2=this.$17($1_0,$1_1);$p1_1['av4']=$1_2.join('');}if(ss.isValue($p1_0['api.hierarchicalFieldCaption'])&&ss.isValue($p1_0['api.hierarchicalMarkValues'])){var $1_3=tab.JsonUtil.parseJson($p1_0['api.hierarchicalFieldCaption']);var $1_4=tab.JsonUtil.parseJson($p1_0['api.hierarchicalMarkValues']);var $1_5=this.$17($1_3,$1_4);$p1_1['av6']=$1_5.join('');}if(ss.isValue($p1_0['api.rangeFieldCaption'])&&ss.isValue($p1_0['api.rangeMarkValues'])){var $1_6=tab.JsonUtil.parseJson($p1_0['api.rangeFieldCaption']);var $1_7=tab.JsonUtil.parseJson($p1_0['api.rangeMarkValues']);var $1_8=this.$19($1_6,$1_7);$p1_1['av8']=$1_8.join('');}if(ss.isValue($p1_0['api.tupleIds'])){var $1_9=[];$1_9.add('{');$1_9.add('"'+'akf'+'":');$1_9.add('"tuples"');$1_9.add(',');$1_9.add('"'+'acg'+'":');$1_9.add($p1_0['api.tupleIds']);$1_9.add('}');$p1_1['avy']=$1_9.join('');}}});var $1=this.$2F($p0,'select-by-value',$0);this.$33($p0,$1,'api.SelectMarksCommand',tab.ApiEventHandler.$1B);},$1C:function(){var $0=this.$1.get_customViewsViewModel();var $1=$0.get_currentCustomView();var $2=null;if(ss.isValue($1)){$2=tab._ApiSerializer.serializeCustomView($0.get_currentCustomView(),$0.buildUrl($0.get_currentCustomView(),true));}var $3=[];var $4=this.$1.get_customViewsViewModel().get_myCustomViews();var $enum1=ss.IEnumerator.getEnumerator($4);while($enum1.moveNext()){var $6=$enum1.current;var $7=$0.buildUrl($6,true);var $8=tab._ApiSerializer.serializeCustomView($6,$7);$3.push($8);}var $5=this.$1.get_customViewsViewModel().get_otherCustomViews();var $enum2=ss.IEnumerator.getEnumerator($5);while($enum2.moveNext()){var $9=$enum2.current;var $A=$0.buildUrl($9,true);var $B=tab._ApiSerializer.serializeCustomView($9,$A);$3.push($B);}return tab.ApiCrossDomainPresModelsFactory.newCustomViewsInfo(this.$5,$0.get_defaultCustomViewId(),$2,$3);},$1D:function($p0){this.$1.get_customViewsViewModel().updateCustomizedViews(ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=new tab.vqlui$C('api.success',this.$1C());this.$4.sendCrossDomainResponse($p0,$1_0.get_$1());}),ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$C('api.remotefailed',$p1_0);this.$4.sendCrossDomainResponse($p0,$1_0.get_$1(),'api.FetchCustomViewsCommand');}));},$1E:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1=null;if(ss.isValue($0['api.customViewParam'])){var $2=$0['api.customViewParam'];$1=tab._ApiSerializer.convertToCustomizedView($2);}this.$1.get_customViewsViewModel().select($1);},$1F:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1=$0['api.customViewParam'];var $2=tab._ApiSerializer.convertToCustomizedView($1);this.$1.get_customViewsViewModel().destroy($2,ss.Delegate.create(this,function(){
var $1_0=new tab.vqlui$C('api.success',this.$1C());this.$4.sendCrossDomainResponse($p0,$1_0.get_$1());}),ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$C('api.remotefailed',$p1_0);this.$4.sendCrossDomainResponse($p0,$1_0.get_$1(),'api.RemoveCustomViewCommand');}));},$20:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1=$0['api.customViewParam'];var $2=tab._ApiSerializer.convertToCustomizedView($1);this.$1.get_customViewsViewModel().update($2,ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$C('api.success',this.$1C());this.$4.sendCrossDomainResponse($p0,$1_0.get_$1());}),ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$C('api.remotefailed',$p1_0);this.$4.sendCrossDomainResponse($p0,$1_0.get_$1(),'api.UpdateCustomViewCommand');}));},$21:function($p0){this.$1.get_customViewsViewModel().makeCurrentDefault(ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$C('api.success',this.$1C());this.$4.sendCrossDomainResponse($p0,$1_0.get_$1());}),ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$C('api.remotefailed',$p1_0);this.$4.sendCrossDomainResponse($p0,$1_0.get_$1(),'api.MakeCurrentCustomViewDefaultCommand');}));},$22:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1=$0['api.customViewName'];this.$1.get_customViewsViewModel().save($1,ss.Delegate.create(this,function($p1_0){
var $1_0=this.$1C();$1_0.newView=tab._ApiSerializer.serializeCustomView($p1_0,this.$1.get_customViewsViewModel().buildUrl($p1_0));var $1_1=new tab.vqlui$C('api.success',$1_0);this.$4.sendCrossDomainResponse($p0,$1_1.get_$1());}),ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$C('api.remotefailed',$p1_0);this.$4.sendCrossDomainResponse($p0,$1_0.get_$1(),'api.SaveNewCustomViewCommand');}));},$23:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1=$0['api.dataSourceName'];var $2=$0['api.worksheetName'];var $3={};$3.commandName='get-schema';$3.commandNamespace='tabdoc';$3.commandParams={};var $4=function($p1_0){
var $1_0=$p1_0;var $1_1=tab.vqlui$D.$0($1_0,$2,$1);return $1_1.dataSources[0];};this.$33($p0,$3,'api.GetDataSourceCommand',$4);},$24:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1=$0['api.worksheetName'];var $2={};$2.commandName='get-schema';$2.commandNamespace='tabdoc';$2.commandParams={};var $3=function($p1_0){
var $1_0=$p1_0;var $1_1=tab.vqlui$D.$0($1_0,$1,null);return $1_1;};this.$33($p0,$2,'api.GetDataSourcesCommand',$3);},$25:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1=$0['api.invokeCommandName'];if($1==='showExportImageDialog'){this.$1.get_toolbarCommands().exportImage();}else if($1==='showExportDataDialog'){var $2=null;if(ss.isValue('api.invokeCommandParam')){$2=$0['api.invokeCommandParam'];}this.$1.get_toolbarCommands().exportData($2);}else if($1==='showExportCrosstabDialog'){var $3=null;if(ss.isValue('api.invokeCommandParam')){$3=$0['api.invokeCommandParam'];}this.$1.get_toolbarCommands().exportCrosstab($3);}else if($1==='showExportPDFDialog'){this.$1.get_toolbarCommands().exportPdf();}else if($1==='pauseAutomaticUpdates'){this.$1.get_toolbarCommands().$5();this.$26($p0);}else if($1==='resumeAutomaticUpdates'){this.$1.get_toolbarCommands().$6();this.$26($p0);}else if($1==='toggleAutomaticUpdates'){this.$1.get_toolbarCommands().$8();this.$26($p0);}else if($1==='showShareDialog'){this.$1.get_toolbarCommands().$E();}else if($1==='showDownloadWorkbookDialog'){var $4=this.$1.get_applicationPresModel().at1.at2;this.$1.get_toolbarCommands().$B($4.ap9.te);}else if($1==='selectedMarksKeepOnly'){this.$1.get_toolbarCommands().$F();}else if($1==='selectedMarksExclude'){this.$1.get_toolbarCommands().$10();}},$26:function($p0){var $0=tab.ApiCrossDomainPresModelsFactory.newAutoUpdateState(this.$1.get_toolbarCommands().$7());var $1=new tab.vqlui$C('api.success',$0);this.$4.sendCrossDomainResponse($p0,$1.get_$1(),'api.InvokeCommandCommand');},$27:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1={};$1.commandName='set-sheet-size';$1.commandNamespace='tabdoc';$1.commandParams={};$1.commandParams['sr']=$0['api.setSheetSizeName'];$1.commandParams['zx']=$0['api.minWidth'];$1.commandParams['zy']=$0['api.minHeight'];$1.commandParams['zz']=$0['api.maxWidth'];$1.commandParams['z0']=$0['api.maxHeight'];this.$33($p0,$1,'api.SetSheetSizeCommand');},$28:function($p0){this.$1.get_toolbarCommands().$C();var $0=new tab.vqlui$C('api.success','');this.$4.sendCrossDomainResponse($p0,$0.get_$1(),'api.RefreshDataCommand');},$29:function($p0){tab.WorksheetServerCommands.revert();var $0=new tab.vqlui$C('api.success','');this.$4.sendCrossDomainResponse($p0,$0.get_$1(),'api.RevertAllCommand');},$2A:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1=$0['api.showHideToolbarValue'];this.$1.set_toolbarDisplayed($1);this.$1.doResize();},$2B:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1={};$1.oldRepositoryUrl=$0['api.oldRepositoryUrl'];$1.repositoryUrl=$0['api.switchToRepositoryUrl'];$1.sheetName=$0['api.switchToSheetName'];$1.oldSheetName=tsConfig.current_sheet_name;$1.noUndo=true;$1.successCallback=ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$C('api.success','');this.$4.sendCrossDomainResponse($p0,$1_0.get_$1(),'api.SwitchActiveSheetCommand');});$1.errorCallback=ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$C('api.remotefailed',$p1_0);this.$4.sendCrossDomainResponse($p0,$1_0.get_$1(),'api.SwitchActiveSheetCommand');});dojo.publish('onTabSelect',[$1]);},$2C:function($p0){this.$1.doResize();},$2D:function($p0){if(tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapFailed()){return;}var $0=tab._ApiSerializer.serializeClientInfo(this.$1,this.$2);var $1=new tab.vqlui$C('api.success',$0);this.$4.sendCrossDomainResponse($p0,$1.get_$1(),'api.GetClientInfoCommand');},$2E:function($p0){var $0=tab.VizUriModel.createForViewingSheet(tsConfig.repositoryUrl).get_absoluteUri();var $1=new tab.vqlui$C('api.success',$0);this.$4.sendCrossDomainResponse($p0,$1.get_$1(),'api.GetCurrentUrlCommand');},$2F:function($p0,$p1,$p2){return this.$31($p0,tab.CommandUtils.newDocCommand($p1),$p2);},$30:function($p0,$p1,$p2){return this.$31($p0,tab.CommandUtils.newSrvCommand($p1),$p2);},$31:function($p0,$p1,$p2){var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1=this.$32($0);$p1.commandParams=$1;$p2($0,$1);return $p1;},$32:function($p0){var $0={};if(ss.isValue($p0['api.visualId'])){$0['anb']=tab.JsonUtil.toJson($p0['api.visualId']);}else{$0['st']=$p0['api.worksheetName'];if(ss.isValue($p0['api.dashboardName'])){$0['su']=$p0['api.dashboardName'];}}return $0;},$33:function($p0,$p1,$p2,$p3){$p1.noExceptionDialog=true;tab.ApiClientCommands.doApiCommand($p1,ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;if(ss.isValue($p3)){$1_0=$p3($p1_0);}var $1_1=new tab.vqlui$C('api.success',$1_0);this.$4.sendCrossDomainResponse($p0,$1_1.get_$1(),$p2);}),ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$C('api.remotefailed',$p1_0);this.$4.sendCrossDomainResponse($p0,$1_0.get_$1(),$p2);}));}}
tab.vqlui$C=function(result,pm){var $0={};$0['api.commandResult']=result;$0['api.commandData']=pm;this.$0=tab.JsonUtil.toJson($0,false,'');}
tab.vqlui$C.prototype={$0:null,get_$1:function(){return this.$0;}}
tab.vqlui$F=function(){}
tab.vqlui$F.$0=function($p0){var $0=JSON.parse($p0.toString());var $1=[];if(ss.isValue($0)){var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $3=$enum1.current;var $4=tab.vqlui$F.$5($3);if($4!=null){$1.add($4);}}}var $2={};$2.filters=$1;return $2;}
tab.vqlui$F.$1=function($p0){var $0=tab.vqlui$F.$3($p0);if($0!=null){return $0;}return $p0;}
tab.vqlui$F.$2=function($p0){var $0=tab.vqlui$F.$3($p0);if($0!=null){return $0;}var $1=JSON.parse($p0.toString());if(ss.isValue($1)){return tab.vqlui$F.$5($1);}return null;}
tab.vqlui$F.$3=function($p0){var $0=$p0;if(Object.keyExists($0,'ake')){if(ss.isValue($0['r8'])){return tab.ApiCrossDomainPresModelsFactory.newCommandError('invalidFilterFieldName',$0['r8']);}else if(ss.isValue($0['uy'])){return tab.ApiCrossDomainPresModelsFactory.newCommandError('invalidFilterFieldValue',$0['uy']);}else if(ss.isValue($0['aff'])){return tab.ApiCrossDomainPresModelsFactory.newCommandError('invalidAggregationFieldName',$0['r2']);}else{return tab.ApiCrossDomainPresModelsFactory.newCommandError('serverError',null);}}return null;}
tab.vqlui$F.$4=function($p0){switch($p0){case 'C':return 'categorical';case 'H':return 'hierarchical';case 'Q':return 'quantitative';case 'RD':return 'relativedate';default:throw new Error('Unknown filter type: '+$p0);}}
tab.vqlui$F.$5=function($p0){var $0=tab.vqlui$F.$4($p0.type);switch($0){case 'categorical':return tab.vqlui$F.$7($p0);case 'relativedate':return tab.vqlui$F.$9($p0);case 'hierarchical':return tab.vqlui$F.$D($p0);case 'quantitative':return tab.vqlui$F.$8($p0);default:throw new Error('Unknown FilterType: '+$0);}}
tab.vqlui$F.$6=function($p0,$p1){var $0=$p0.fieldName;var $1=$p0.fieldCaption;var $2=tab.vqlui$F.$4($p0.type);var $3=null;var $4=null;var $5=null;if(ss.isValue($p0.fieldDetailsJson)&&ss.isValue($p0.fieldDatasource)){$3=$p0.fieldDatasource;var $6=JSON.parse($p0.fieldDetailsJson);var $7=$6['genFieldColumnPresModel'];$4=tab._ApiEnumConverter.convertFieldRole($7.aj4);$5=tab._ApiEnumConverter.convertFieldAggregation($7.ag9);}return $p1($0,$2,$1,$3,$4,$5);}
tab.vqlui$F.$7=function($p0){var $0=($p0.exclude||false);var $1=null;if(ss.isValue($p0.table)){var $3=$p0.table;if(ss.isValue($3.tuples)){var $4=($p0.all||false)||($p0.allChecked||false);var $5=$3.tuples;var $6=[];var $enum1=ss.IEnumerator.getEnumerator($5);while($enum1.moveNext()){var $7=$enum1.current;if($4||(ss.isValue($7.s)&&$7.s)){var $8=$7.t[0];var $9=$7.d;$6.add(tab.vqlui$F.$A($p0,$8,$9));}}$1=$6;}}var $2=function($p1_0,$p1_1,$p1_2,$p1_3,$p1_4,$p1_5){
return tab.ApiCrossDomainPresModelsFactory.newCategoricalFilter($p1_0,$p1_1,$p1_2,$p1_3,$p1_4,$p1_5,$0,$1);};return tab.vqlui$F.$6($p0,$2);}
tab.vqlui$F.$8=function($p0){var $0=null;var $1=null;var $2=null;var $3=null;var $4=false;if(ss.isValue($p0.range)){var $6=$p0.range;if(ss.isValue($6.min)&&ss.isValue($6.min.v)){$0=tab.vqlui$F.$B($p0,$6.min,null);}if(ss.isValue($6.max)&&ss.isValue($6.max.v)){$1=tab.vqlui$F.$B($p0,$6.max,null);}}if(ss.isValue($p0.table)){var $7=$p0.table;if(ss.isValue($7.min)&&ss.isValue($7.min.v)){$2=tab.vqlui$F.$B($p0,$7.min,null);}if(ss.isValue($7.max)&&ss.isValue($7.max.v)){$3=tab.vqlui$F.$B($p0,$7.max,null);}if(ss.isValue($7.included)){var $8=$7.included;$4=($8==='include-all'||$8==='include-null'||$8==='include-range-or-null');}}var $5=function($p1_0,$p1_1,$p1_2,$p1_3,$p1_4,$p1_5){
return tab.ApiCrossDomainPresModelsFactory.newQuantitativeFilter($p1_0,$p1_1,$p1_2,$p1_3,$p1_4,$p1_5,$0,$1,$2,$3,$4);};return tab.vqlui$F.$6($p0,$5);}
tab.vqlui$F.$9=function($p0){var $0=null;var $1=null;var $2=null;var $3=$p0.table;if(ss.isValue($3)){if(ss.isValue($3.periodType)){$0=tab._ApiEnumConverter.convertPeriodType($3.periodType);}if(ss.isValue($3.rangeType)){$1=tab._ApiEnumConverter.convertRangeType($3.rangeType);}if(ss.isValue($3.rangeN)){$2=$3.rangeN;}}var $4=function($p1_0,$p1_1,$p1_2,$p1_3,$p1_4,$p1_5){
return tab.ApiCrossDomainPresModelsFactory.newRelativeDateFilter($p1_0,$p1_1,$p1_2,$p1_3,$p1_4,$p1_5,$0,$1,$2);};return tab.vqlui$F.$6($p0,$4);}
tab.vqlui$F.$A=function($p0,$p1,$p2){return tab.vqlui$F.$B($p0,$p1,$p2);}
tab.vqlui$F.$B=function($p0,$p1,$p2){var $0={};if(ss.isNullOrUndefined($p1)){return $0;}var $1=tab.vqlui$F.$C($p1.t);var $2=[$p1];if(ss.isValue($p0.range)){$2.push($p0.range.min,$p0.range.max);}if(ss.isValue($p0.table)){$2.push($p0.table.min,$p0.table.max);}var $3=tab.QuantitativeDateFilter.getDateTimeFormatMode($2,'none',$p0.date_format);$0.type=tab._ApiEnumConverter.convertDataType($1);var $4=($1==='date'||$1==='datetime')?$p0.date_format:$p0.format;$0.formattedValue=tableau.format.formatDataValue($p1,$p0.role,$4,null,$3);if(ss.isValue($p2)){$0.aliasedValue=$p2;}$0.value=tab._ApiSerializer.serializeDataValue($p1.v,$1);return $0;}
tab.vqlui$F.$C=function($p0){switch($p0){case tableau.types.DataType.DT_BOOLEAN:return 'boolean';case tableau.types.DataType.DT_DATE:return 'date';case tableau.types.DataType.DT_INTEGER:return 'integer';case tableau.types.DataType.DT_REAL:return 'real';case tableau.types.DataType.DT_STRING:return 'cstring';case tableau.types.DataType.DT_TIMESTAMP:return 'datetime';case tableau.types.DataType.DT_UNKNOWN:return 'unknown';}return 'unknown';}
tab.vqlui$F.$D=function($p0){var $0=0;if(ss.isValue($p0.levels)){$0=($p0.levels).length;}var $1=function($p1_0,$p1_1,$p1_2,$p1_3,$p1_4,$p1_5){
return tab.ApiCrossDomainPresModelsFactory.newHierarchicalFilter($p1_0,$p1_1,$p1_2,$p1_3,$p1_4,$p1_5,$0);};return tab.vqlui$F.$6($p0,$1);}
tab.vqlui$F.$E=function($p0,$p1,$p2){for(var $0=0;$0<$p0.length;$0++){var $1=$p0[$0];if(ss.isValue($1.table)){tab.vqlui$F.$F($1.table,$p1,$p2);}if(ss.isValue($1.children)){tab.vqlui$F.$E($1.children,$p1,$p2);}}}
tab.vqlui$F.$F=function($p0,$p1,$p2){if(ss.isValue($p0.tuples)){tab.vqlui$F.$10($p0.tuples,$p1,$p2);}}
tab.vqlui$F.$10=function($p0,$p1,$p2){for(var $0=0;$0<$p0.length;$0++){var $1=$p0[$0];if($1.s){var $2=tab.vqlui$F.$11($1);var $3=$2[$2.length-1];if(!ss.isValue($p2[$3])){$p2[$3]=0;$p1.add($3);}}}}
tab.vqlui$F.$11=function($p0){var $0=null;if(ss.isValue($p0.t)){$0=[];var $1=$p0.t;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;$0.add($2.v);}}return $0;}
tab.vqlui$9=function(){}
tab.vqlui$9.$0=function($p0){var $0=$p0;var $1=[];if(ss.isValue($0)){var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $3=$enum1.current;var $4=tab.vqlui$9.$3($3);if($4!=null&&$4.isValidPresModel){$1.add($4);}}}var $2={};$2.parameters=$1;return $2;}
tab.vqlui$9.$1=function($p0){var $0=$p0;if(ss.isValue($0.ed)&&!$0.ed){var $1={};$1.isValidPresModel=false;return $1;}else{var $2=$p0;if(ss.isValue($2)){return tab.vqlui$9.$3($2);}}return null;}
tab.vqlui$9.$2=function($p0){if($p0==='boolean'){return 'boolean';}switch($p0){case 'real':return 'float';case 'integer':case 'tuple':return 'integer';case 'date':return 'date';case 'datetime':return 'datetime';case 'cstring':default:return 'string';}}
tab.vqlui$9.$3=function($p0){if(!ss.isValue($p0.afj)||!ss.isValue($p0.r2)){return null;}var $0=$p0.aiy;var $1=[];for(var $3=0;$3<$p0.am1.length;$3++){var $4=$p0.am1[$3];var $5=$p0.uf[$3];$1.add(tab.vqlui$9.$5($0,$4,$5));}var $2={};$2.isValidPresModel=true;$2.parameterName=$p0.afj;$2.name=$p0.r2;$2.currentValue=tab.vqlui$9.$5($0,$p0.amw,$p0.l2);$2.dataType=tab.vqlui$9.$2($0);$2.allowableValuesType=tab._ApiEnumConverter.convertParameterDomainType($p0.aiz);$2.allowableValues=$1;$2.stepSize=tab.vqlui$9.$6($0,$p0.t9);$2.minValue=tab.vqlui$9.$4($0,$p0.t7,$p0.l4,null);$2.maxValue=tab.vqlui$9.$4($0,$p0.t8,$p0.l5,null);if($0==='date'||$0==='datetime'){$2.dateStepPeriod=tab._ApiEnumConverter.convertPeriodType($p0.ai1);}return $2;}
tab.vqlui$9.$4=function($p0,$p1,$p2,$p3){var $0={};$0.type=tab._ApiEnumConverter.convertDataType($p0);$0.value=tab._ApiSerializer.serializeDataValue($p1,$p0);if(!tab.MiscUtil.isNullOrEmpty($p3)){$0.aliasedValue=$p3;}if(!tab.MiscUtil.isNullOrEmpty($p2)){$0.formattedValue=$p2;}return $0;}
tab.vqlui$9.$5=function($p0,$p1,$p2){return tab.vqlui$9.$4($p0,tab.vqlui$9.$7($p1),$p2,tab.vqlui$9.$8($p1));}
tab.vqlui$9.$6=function($p0,$p1){if(ss.isValue($p1)){if($p0==='integer'||$p0==='date'||$p0==='datetime'){return parseInt($p1);}if($p0==='real'){return parseFloat($p1);}}return null;}
tab.vqlui$9.$7=function($p0){return $p0[0];}
tab.vqlui$9.$8=function($p0){if($p0.length<2){return null;}if(ss.isNullOrUndefined($p0[1])||!($p0[1]).length){return null;}return $p0[1];}
tab._ApiSerializer=function(){}
tab._ApiSerializer.serializeClientInfo=function(client,storytellingClient){var $0=client.get_applicationPresModel().at1.at2;var $1=client.get_toolbarCommands().$7();var $2=!String.isNullOrEmpty($0.ap9.te)||client.get_toolbarCommands().$9();var $3=tsConfig.current_sheet_name;var $4=tsConfig.current_workbook_name;var $5=tab._ApiSerializer.serializeDashboardZones($0.axu);var $6=tab._ApiSerializer.serializePublishedSheets(client.get_applicationPresModel().at1.arx);var $7=tab._ApiSerializer.serializeStory(storytellingClient);var $8=tab.ApiCrossDomainPresModelsFactory.newClientInfo($1,$2,$4,$3,$6,$5,$7);return $8;}
tab._ApiSerializer.serializeSheetInfo=function(sheetInfo,repositoryUrl){var $0;if(sheetInfo.ax){$0='story';}else if(sheetInfo.aw){$0='dashboard';}else{$0='worksheet';}var $1=tab.ApiCrossDomainPresModelsFactory.newSheetInfo(sheetInfo.sr,$0,sheetInfo.zx,sheetInfo.zy,sheetInfo.zz,sheetInfo.z0,repositoryUrl);return $1;}
tab._ApiSerializer.serializePublishedSheets=function(sheetsInfo){var $0={};var $enum1=ss.IEnumerator.getEnumerator(sheetsInfo);while($enum1.moveNext()){var $2=$enum1.current;$0[$2.sr]=$2;}var $1=[];for(var $3=0;$3<tsConfig.visible_sheets.length;$3++){var $4=$0[tsConfig.visible_sheets[$3]];var $5=tab._ApiSerializer.$0(tsConfig.repository_urls[$3]);var $6=tab._ApiSerializer.serializeSheetInfo($4,$5);$1.push($6);}return $1;}
tab._ApiSerializer.serializeDashboardZones=function(zones){var $0=[];if(ss.isNullOrUndefined(zones)||!Object.getKeyCount(zones)){return $0;}var $1=_.keys(zones);$1.sort(function($p1_0,$p1_1){
return parseInt($p1_0,10)-parseInt($p1_1,10);});var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;var $3=zones[$2];if(ss.isNullOrUndefined($3)){continue;}var $4=tab._ApiEnumConverter.convertZoneType($3.akp);if(!ss.isValue($4)){continue;}var $5=(ss.isValue($3.st))?$3.st:null;var $6=$3.v9;var $7=$3.wa;var $8=$3.wb;var $9=$3.wc;var $A=$3.aay;var $B=tab.ApiCrossDomainPresModelsFactory.newDashboardZone($5,$A,$4,$9,$8,$6,$7);$0.push($B);}return $0;}
tab._ApiSerializer.serializeStory=function(client){var $0=client.get_flipboardNavigatorViewModel();if(ss.isNullOrUndefined($0)){return null;}var $1=$0.get_currentPointIndex();var $2=tab._ApiSerializer.serializeStoryPoints($0.get_captions(),client);var $3=tab.ApiCrossDomainPresModelsFactory.newStory($1,$2);return $3;}
tab._ApiSerializer.serializeStoryPoints=function(captions,client){var $0=[];var $enum1=ss.IEnumerator.getEnumerator(captions);while($enum1.moveNext()){var $1=$enum1.current;var $2=tab._ApiSerializer.serializeStoryPoint($1,client);$0.push($2);}return $0;}
tab._ApiSerializer.serializeStoryPoint=function(captionViewModel,client){var $0=null;if(captionViewModel.get_isCurrentPoint()&&client.get_hasContainedSheet()){var $2=client.get_containedSheetName();var $3=client.get_containedSheetType();var $4=tab._ApiSerializer.serializeDashboardZones(client.get_containedDashboardZones());$0=tab.ApiCrossDomainPresModelsFactory.newContainedSheetInfo($2,$3,client.get_containedSheetZoneId(),$4);}var $1=tab.ApiCrossDomainPresModelsFactory.newStoryPoint(captionViewModel.get_caption(),captionViewModel.get_storyPointIndex(),captionViewModel.get_storyPointId(),captionViewModel.get_isCaptured(),$0);return $1;}
tab._ApiSerializer.serializeDataValue=function(rawValue,dataType){if(dataType==='boolean'){if(_.isBoolean(rawValue)){return rawValue;}return (ss.isValue(rawValue))?rawValue.toString().toLowerCase()==='true':false;}if(ss.isNullOrUndefined(rawValue)){return null;}switch(dataType){case 'date':case 'datetime':var $0=null;if(_.isDate(rawValue)){$0=rawValue;}else if(_.isNumber(rawValue)){if(isNaN(rawValue)){$0=null;}else{$0=new Date(tableau.types.JsDateFromOleDate(rawValue));}}else{$0=tab.DateUtil.parsePresModelDate(rawValue.toString());}if(ss.isNullOrUndefined($0)||isNaN($0)){return null;}return $0.getTime();case 'integer':if(_.isNumber(rawValue)){return (isNaN(rawValue))?null:rawValue;}var $1=parseInt(rawValue.toString(),10);return (isNaN($1))?null:$1;case 'real':if(_.isNumber(rawValue)){return (isNaN(rawValue))?null:rawValue;}var $2=parseFloat(rawValue.toString());return (isNaN($2))?null:$2;case 'cstring':case 'tuple':case 'unknown':default:return rawValue.toString();}}
tab._ApiSerializer.serializeCustomView=function(customizedView,url){return tab.ApiCrossDomainPresModelsFactory.newCustomView(customizedView.id,customizedView.name,customizedView.urlId,url,customizedView.startViewId,customizedView.isPublic,tab._ApiSerializer.serializeUser(customizedView.owner));}
tab._ApiSerializer.serializeUser=function(user){return tab.ApiCrossDomainPresModelsFactory.newUser(user.id,user.friendlyName,user.username);}
tab._ApiSerializer.convertToCustomizedView=function(apiCv){var $0=new tab.CustomizedView();$0.id=apiCv.id;$0.isPublic=apiCv.isPublic;$0.name=apiCv.name;$0.owner=tab._ApiSerializer.convertToUser(apiCv.owner);$0.startViewId=apiCv.startViewId;$0.urlId=apiCv.urlId;return $0;}
tab._ApiSerializer.convertToUser=function(apiUser){var $0=new tab.User();$0.friendlyName=apiUser.friendlyName;$0.id=apiUser.id;$0.username=apiUser.username;return $0;}
tab._ApiSerializer.$0=function($p0){var $0=tab.VizUriModel.createForViewingSheet($p0);$0.removeAllQueryParams();return $0.get_absoluteUri();}
tab.ApiStorytellingHandler=function(client,responder){this.$2=new tab.DisposableHolder();tab.Param.verifyValue(client,'client');tab.Param.verifyValue(responder,'responder');this.$0=client;this.$1=responder;var $0=ss.Delegate.create(this,function(){
var $1_0=client.get_flipboardNavigatorViewModel();if(ss.isValue($1_0)){$1_0.add_remoteUpdateComplete(ss.Delegate.create(this,this.$8));this.$2.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
$1_0.remove_remoteUpdateComplete(ss.Delegate.create(this,this.$8));})));}return ss.isValue($1_0);});if(!$0()){_.defer(ss.Delegate.create(this,function(){
if(this.$3){return;}$0();}));}}
tab.ApiStorytellingHandler.$A=function($p0,$p1){var $0=($.isArray($p1))?$p1:[$p1];var $1=_.any($0,function($p1_0){
return $p1_0===$p0.get_name();});if(!$1){throw new Error("Command '"+$p0.get_name()+"' is not valid for the handler.");}}
tab.ApiStorytellingHandler.prototype={$0:null,$1:null,$3:false,dispose:function(){this.$2.dispose();this.$3=true;},activateStoryPoint:function(command){this.$B(command,ss.Delegate.create(this,this.$5));},activatePreviousStoryPoint:function(command){this.$B(command,ss.Delegate.create(this,function($p1_0){
return this.$7($p1_0,function($p2_0){
return $p2_0.clickPrevious();});}));},activateNextStoryPoint:function(command){this.$B(command,ss.Delegate.create(this,function($p1_0){
return this.$7($p1_0,function($p2_0){
return $p2_0.clickNext();});}));},revertStoryPoint:function(command){this.$B(command,ss.Delegate.create(this,this.$4));},$4:function($p0){return this.$6($p0,'api.RevertStoryPoint',function($p1_0){
return $p1_0.revertStoryPoint();});},$5:function($p0){return this.$6($p0,'api.ActivateStoryPoint',function($p1_0){
return $p1_0.clickStoryPoint();});},$6:function($p0,$p1,$p2){tab.ApiStorytellingHandler.$A($p0,$p1);var $0=tab.JsonUtil.parseJson($p0.get_parameters());var $1=$0['api.storyPointIndex'];if(ss.isNullOrUndefined($1)||isNaN($1)){throw new Error('Missing index parameter.');}var $2=this.$9();if($1<0||$1>=$2.get_captions().length){throw new Error('The index is out of bounds.');}var $3=$.DeferredData();var $4=$2.get_captions()[$1];$p2($4).then(ss.Delegate.create(this,function($p1_0){
var $1_0=tab._ApiSerializer.serializeStoryPoint($p1_0,this.$0);$3.resolve($1_0);}),function($p1_0){
$3.reject($p1_0);});return $3.promise();},$7:function($p0,$p1){tab.ApiStorytellingHandler.$A($p0,['api.ActivateNextStoryPoint','api.ActivatePreviousStoryPoint']);var $0=this.$9();var $1=$.DeferredData();$p1($0).then(ss.Delegate.create(this,function($p1_0){
var $1_0=$0.get_captions()[$p1_0];var $1_1=tab._ApiSerializer.serializeStoryPoint($1_0,this.$0);$1.resolve($1_1);}),function($p1_0){
$1.reject($p1_0);});return $1.promise();},$8:function(){var $0=tab._ApiSerializer.serializeStory(this.$0);var $1=tab.JsonUtil.toJson($0);this.$1.sendCrossDomainEventNotification('api.StorytellingStateChangedEvent',null,$1);},$9:function(){var $0=this.$0.get_flipboardNavigatorViewModel();if(ss.isNullOrUndefined($0)){throw new Error('The active sheet is not a story.');}return $0;},$B:function($p0,$p1){try{$p1($p0).then(ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$C('api.success',$p1_0);this.$1.sendCrossDomainResponse($p0,$1_0.get_$1());}),ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$C('api.remotefailed',$p1_0);this.$1.sendCrossDomainResponse($p0,$1_0.get_$1());}));}catch($0){var $1=new tab.vqlui$C('api.localfailed',$0.message);this.$1.sendCrossDomainResponse($p0,$1.get_$1());}}}
tab.Application=function(){this.$8=[];tab.Application.add_starting(ss.Delegate.create(this,function(){
this.$2=tsConfig.sheetId;this.$8.add(dojo.subscribe('newLayoutId',ss.Delegate.create(this,this.$16)));this.$8.add(dojo.subscribe('onBootstrapSuccess',ss.Delegate.create(this,this.$14)));this.$8.add(dojo.subscribe('onTabSelect',ss.Delegate.create(this,this.$F)));tab.ApplicationModel.get_instance().get_workbook().add_dashboardDeleted(ss.Delegate.create(this,this.$D));var $1_0=new tab.LayoutSession(null,null);tab.CommandController.create($1_0);tab.CommandController.get().add_destroyView(ss.Delegate.create(this,function(){
this.$E();}));var $1_1=tab.Application.$C(false,$1_0);this.$3=$1_1;this.$4=$1_1;this.$3.startup();this.$11(this.$3,this.$4);if(tab.BrowserSupport.get_isIE()){this.$12();}this.$5=new tab.ModifierKeyState();spiff.SpiffBrowserViewport.getSpiffBrowserViewportFunc=function($p2_0){
tab.BrowserViewport.getViewport(function($p3_0){
var $3_0=new spiff.SpiffBrowserViewport($p3_0.get_dimensions(),ss.Delegate.create($p3_0,$p3_0.getVisibleRoom));$p2_0($3_0);});};}));}
tab.Application.add_starting=function(value){tab.Application.$9=ss.Delegate.combine(tab.Application.$9,value);}
tab.Application.remove_starting=function(value){tab.Application.$9=ss.Delegate.remove(tab.Application.$9,value);}
tab.Application.add_started=function(value){tab.Application.$A=ss.Delegate.combine(tab.Application.$A,value);}
tab.Application.remove_started=function(value){tab.Application.$A=ss.Delegate.remove(tab.Application.$A,value);}
tab.Application.get_instance=function(){if(ss.isNullOrUndefined(tab.Application.$0)){tab.Application.$0=new tab.Application();}return tab.Application.$0;}
tab.Application.get_isHostedInApiContext=function(){return !String.isNullOrEmpty(tsConfig.apiID);}
tab.Application.get_isStarted=function(){return tab.Application.$1;}
tab.Application.startup=function(){var $0={};$0['t']=tabBootstrap.MetricsController.getTiming();$0['d']='APPSTR';var $1=new tabBootstrap.MetricsEvent('gen',tabBootstrap.MetricsSuites.bootstrap,$0);tabBootstrap.MetricsController.get_instance().logEvent($1);if(ss.isValue(tab.Application.$1)&&tab.Application.$1){throw Error.createError('Application.Startup() can only be called once',null);}var $2=tab.Application.get_instance();if(ss.isValue(tab.Application.$9)){tab.Application.$9($2,ss.EventArgs.Empty);}if(ss.isValue(tab.Application.$A)){tab.Application.$A($2,ss.EventArgs.Empty);}spiff.DragDropManager.init();tabBootstrap.MetricsController.get_instance().initSessionInfo();tab.MetricsLogger.get_instance().attach();tab.Application.$1=true;}
tab.Application.$C=function($p0,$p1){var $0=Type.getType((tsConfig.is_mobile)?'tab.ApplicationViewModelMobile':'tab.ApplicationViewModelWeb');return new $0($p0,$p1);}
tab.Application.prototype={$2:null,$3:null,$4:null,$5:null,$6:null,$7:null,add_clientChanged:function(value){this.$B=ss.Delegate.combine(this.$B,value);},remove_clientChanged:function(value){this.$B=ss.Delegate.remove(this.$B,value);},$B:null,get_client:function(){return this.$3;},get_currentSheetName:function(){return this.$2;},dispose:function(){if(!ss.isValue(tab.Application.$0)){return;}if(ss.isValue(this.$6)){this.$6.dispose();this.$6=null;}this.$E();var $enum1=ss.IEnumerator.getEnumerator(this.$8);while($enum1.moveNext()){var $0=$enum1.current;dojo.unsubscribe($0);}this.$8.clear();this.$10();this.$5.dispose();if(ss.isValue(this.$7)){this.$7.destroy();this.$7=null;}spiff.GlobalTouchWatcher.dispose();tab.ApplicationModel.get_instance().get_workbook().remove_dashboardDeleted(ss.Delegate.create(this,this.$D));tab.Application.$0=null;},$D:function($p0){this.$E();},$E:function(){if(ss.isNullOrUndefined(this.$3)){return;}this.$3.destroyRecursive();this.$3=null;this.$4=null;},$F:function($p0){tab.SheetClientCommands.switchSheets($p0,tsConfig.embedded);},$10:function(){if(!tab.Application.get_isHostedInApiContext()){return;}if(ss.isValue(this.$6)){if(ss.isValue(window.removeEventListener)){window.removeEventListener('message',ss.Delegate.create(this,this.$15),true);}else{window.self.detachEvent('onmessage', ss.Delegate.create(this,this.$15));}this.$6=null;}},$11:function($p0,$p1){if(!tab.Application.get_isHostedInApiContext()){return;}this.$6=new tab.ApiEventHandler($p0,$p1,tabBootstrap.ViewerBootstrap.get_instance().apiResponder);if(ss.isValue(window.addEventListener)){window.addEventListener('message',ss.Delegate.create(this,this.$15),true);}else{window.self.attachEvent('onmessage', ss.Delegate.create(this,this.$15));}},$12:function(){if(!tab.Application.get_isHostedInApiContext()){return;}if(ss.isValue(window.addEventListener)){window.addEventListener('unload',ss.Delegate.create(this,this.$13),true);}else{window.self.attachEvent('onunload', ss.Delegate.create(this,this.$13));}},$13:function($p0){this.$10();},$14:function($p0){var $0=$('.tabbedNavigation');if($0.length>0){this.$7=new tableau.base.widget.TabbedNavigation({},$0[0]);this.$7.startup();}this.$2=$p0;if(ss.isValue(this.$6)){this.$6.updateClients(this.$3,this.$4);}},$15:function($p0){if(typeof ss === 'undefined'){return;}if(ss.isValue(this.$6)){this.$6.handleEvent($p0);}},$16:function($p0){this.$2=$p0.m7;this.$1A($p0);var $0=tab.CommandController.get().get_legacySession();this.$E();tabBootstrap.MetricsController.get_instance().initSessionInfo();var $1=tab.Application.$C(true,$0);this.$3=$1;this.$4=$1;this.$3.startup();if(ss.isValue(this.$B)){this.$B();}if(ss.isValue(this.$6)){this.$6.updateClients(this.$3,this.$4);}if(tabBootstrap.Utility.get_embedMode()==='embeddedInWg'||tabBootstrap.Utility.get_embedMode()==='notEmbedded'){this.$17($p0);}},$17:function($p0){if(tsConfig.is_authoring){this.$18($p0.ta,$p0.ss);}else{this.replaceWindowLocationForTabChangeWhileViewing($p0.ta);}},$18:function($p0,$p1){if(this.$19($p0)){var $0=tab.VizUriModel.createForAuthoringPublishedSheet($p0);$0.replaceState();}else{var $1=tab.VizUriModel.createForCurrentWindowLocation();if($1.get_isAuthorNewWorkbookUri()){}else if(tab.MiscUtil.isNullOrEmpty($p0)){var $2=tab.VizUriModel.createForAuthoringUnpublishedSheet(tsConfig.origin_repository_url,$p1);$2.replaceState();}}},replaceWindowLocationForTabChangeWhileViewing:function(newRepoUrl){if(this.$19(newRepoUrl)){var $0=tab.VizUriModel.createForCurrentWindowLocation();$0.updateForViewingSheet(newRepoUrl);$0.replaceState();}else{}},$19:function($p0){if(tab.MiscUtil.isNullOrEmpty($p0)||$p0.startsWith('ds:')){return false;}return true;},$1A:function($p0){tsConfig.current_sheet_name=$p0.ss;tsConfig.current_view_id=$p0.rp;if(!!$p0.d0){tsConfig.current_custom_view_id=$p0.xj;}else{tsConfig.current_custom_view_id=null;}tsConfig.layoutid=$p0.abl;tsConfig.embeddedTitle=$p0.m6;tsConfig.blogURI=$p0.tc;tsConfig.requestURI=$p0.tb;tsConfig.downloadURI=$p0.te;tsConfig.staticImage=$p0.m5;tsConfig.guid=$p0.m8;var $0=$p0.ta;if(!this.$19($0)){$0='';}else if(!$p0.d0){var $1=new tab.RepoPathObject($0);$0=String.format('{0}/{1}',$1.get_workbookId(),$1.get_sheetId());}tsConfig.repositoryUrl=$0;}}
tab.CategoricalSelection=function(widget){this._anchorIndex=-1;this._selectedIndexes=[];this._lastRangeSelectionIndex=-1;this.$0=widget;}
tab.CategoricalSelection.prototype={$0:null,changelist:null,_applyTimer:null,get_selectedIndexes:function(){return this._selectedIndexes;},clearRangeAnchor:function(){var $0=this.$0.fetchChildNodeByIndex(this._anchorIndex);if(!!$0){var $1=tableau.FilterItem.getCssNode($0);if(!!$1){dojo.removeClass($0,'anchorSelection');}}this._anchorIndex=this._lastRangeSelectionIndex=-1;},clearRangeAnchorAndSelection:function(){this.clearRangeAnchor();this._clearSelection();},refreshRangeAnchorAndSelection:function(){if(this._anchorIndex>=0){var $0=this.$0.fetchChildNodeByIndex(this._anchorIndex);if(!!$0){var $1=tableau.FilterItem.getCssNode($0);if(!!$1){dojo.addClass($1,'anchorSelection');}}else{this._anchorIndex=-1;}}for(var $2=this._selectedIndexes.length-1;$2>=0;--$2){var $3=this._selectedIndexes[$2];var $4=this.$0.fetchChildNodeByIndex($3);if(!!$4){this._selectItem($3);}else{this._selectedIndexes.splice($2,1);}}},onListItemClick:function(evt){var $0=tableau.FilterItem.getNodeFromEvent(evt);if(!!!$0){return;}var $1=tableau.util.isNodeMatch(evt.target,'input',{type:'checkbox'});$1=$1||tableau.util.isNodeMatch(evt.target,'input',{type:'radio'});if($1){tableau.FilterItem.syncCssToCheckState($0);this.$0.handleItemClick($0);}var $2=tableau.FilterItem.getIndex($0);if(ss.isNullOrUndefined($2)||$2<0){return;}if(tableau.FilterItem.isTypeInListItem($0)){this.$2(evt,$2);}else{if(!!!this.changelist){this.changelist=new tab.Changelist();}if($1){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&!this.$0.shouldDeferChanges()){var $3=[];var $4=this.$0.get_filterTable();if(!!$4&&$4.actual_size===$4.tuples.length){var $5=$4.tuples;var $6=this._getCheckedIndexes($5,$0,this.changelist);for(var $9=0,$A=$6.length;$9<$A;$9++){var $B=$6[$9];var $C=($5[$B].d||$5[$B].t[0].v);$3.push($C);}var $7=this.$0.get_quickFilter();var $8=new tab.CategoricalFilterData($7.get_oFilter().targetSheets,$7.get_field(),$7.get_oFilter().exclude,$3);tab.FilterClientCommands.updateCategoricalFilter($8);}}this.$1($0,evt,$2);if(this.$0.shouldDeferChanges()){this.$0.applyChangesByChangelist(this.changelist);this.changelist.reset();}else{this.notifyChange(this.getDoChangeFunc());}}this._updateRangeAnchor($2);}},$1:function($p0,$p1,$p2){var $0=new tab.RawChange();var $1=tableau.FilterItem.isChecked($p0);if(tableau.FilterItem.isTiled($p0)){if(!!$p1.shiftKey){this._updateCheckboxRangeFromAnchorByIndex($p2);var $2=(this._anchorIndex>-1)?this._anchorIndex:$p2;$0.setRange(new tab.IntegerRange($2,$p2),$1);this.changelist.addChange($0);}else{$0.setSingle($p2,$1);this.changelist.addChange($0);}}else{if(!!$p1.shiftKey&&this._anchorIndex>-1){this._updateCheckboxRangeFromAnchor($p2);}else{$0.setSingle($p2,$1);this.changelist.addChange($0);}}},$2:function($p0,$p1){if(!!$p0.shiftKey&&this._anchorIndex>=0){this._selectRangeFromAnchor($p1);}else if(spiff.EventUtil.isCtrlKey($p0)){this._toggleItemSelection($p1);this._updateRangeAnchor($p1);}else{this._clearSelection();this._updateRangeAnchor($p1);this._selectItem($p1);}},getDoChangeFunc:function(){var $0=ss.Delegate.create(this,function(){
this.$0.applyChangesByChangelist(this.changelist);this.changelist.reset();});return $0;},notifyChange:function(callback){if(!!this._applyTimer){window.clearTimeout(this._applyTimer);this._applyTimer=null;}this.$0.updateStateIfNeeded();this._applyTimer=window.setTimeout(callback,this.$0.get_applyDelay());},_getCheckedIndexes:function($p0,$p1,$p2){var $0=[];var $1=this.$0.get_quickFilter();var $2=$1.get_mode()==='checklist'||$1.get_mode()==='checkdropdown';var $3=$2||$1.get_mode()==='radiolist'||$1.get_mode()==='dropdown';var $4=null;if($2){$4=$p2.compileForChecklist(null);}for(var $5=0,$6=$p0.length;$5<$6;$5++){var $7=this.$0.fetchChildNodeByIndex($5);if(!!$7){if(tableau.FilterItem.isChecked($7)){$0.add($5);}}else if($3){var $8=$p0[$5].s;if(tableau.FilterItem.getIndex($p1)===$5){if(tableau.FilterItem.isChecked($p1)){$0.add($5);}}else if($2){if($4.select.contains($5)){$0.add($5);}else if(!$4.deselect.contains($5)&&$8){$0.add($5);}}}}return $0;},forEachSelected:function(itemCallback){if(ss.isNullOrUndefined(itemCallback)||typeof(itemCallback)!=='function'){return;}for(var $0=0,$1=this._selectedIndexes.length;$0<$1;$0++){var $2=this._selectedIndexes[$0];var $3=this.$0.fetchChildNodeByIndex($2);itemCallback($2,$3);}},_selectRangeFromAnchor:function($p0){var $0;var $1;var $2=this._anchorIndex;var $3;var $4;var $5=(this._lastRangeSelectionIndex>=0)?this._lastRangeSelectionIndex:$2;var $6=Math.min($2,$p0);var $7=Math.max($2,$p0);for($0=$p0;$0<=Math.min($2,$5);$0++){this._selectItem($0);}for($3=$5;$3<$6;$3++){this._deselectItem($3);}for($1=Math.max($2,$5);$1<=$p0;$1++){this._selectItem($1);}for($4=$7+1;$4<=$5;$4++){this._deselectItem($4);}this._lastRangeSelectionIndex=$p0;},_toggleItemSelection:function($p0){var $0=this.$0.fetchChildNodeByIndex($p0);if(tableau.FilterItem.isSelected($0)){this._deselectItem($p0);}else{this._selectItem($p0);}},_selectItem:function($p0){var $0=this.$0.fetchChildNodeByIndex($p0);var $1;tableau.FilterItem.setSelected($0,true);$1=tableau.util.binarySearch($p0,this._selectedIndexes);if(!$1.found){this._selectedIndexes.splice($1.index,0,$p0);}},_deselectItem:function($p0){var $0=this.$0.fetchChildNodeByIndex($p0);var $1;tableau.FilterItem.setSelected($0,false);$1=tableau.util.binarySearch($p0,this._selectedIndexes);if($1.found){this._selectedIndexes.splice($1.index,1);}},_clearSelection:function(){for(var $0=this._selectedIndexes.length-1;$0>=0;--$0){this._deselectItem(this._selectedIndexes[$0]);}this._selectedIndexes=[];},_updateCheckboxRangeFromAnchor:function($p0){var $0=Math.min(this._anchorIndex,$p0);var $1=Math.max(this._anchorIndex,$p0);var $2=this.$0.fetchChildNodeByIndex($0);var $3=this.$0.fetchChildNodeByIndex($1);var $4=tableau.FilterItem.isChecked(this.$0.fetchChildNodeByIndex($p0));var $5;while(!!$2&&$2!==$3){tableau.FilterItem.setChecked($2,$4);$5=new tab.RawChange();$5.setSingle(tableau.FilterItem.getIndex($2),$4);this.changelist.addChange($5);$2=$2.nextSibling;}tableau.FilterItem.setChecked($3,$4);$5=new tab.RawChange();$5.setSingle(tableau.FilterItem.getIndex($3),$4);this.changelist.addChange($5);},_updateCheckboxRangeFromAnchorByIndex:function($p0){var $0=Math.min(this._anchorIndex,$p0);var $1=Math.max(this._anchorIndex,$p0);var $2=tableau.FilterItem.isChecked(this.$0.fetchChildNodeByIndex($p0));var $3;var $4;for($3=$0;$3<=$1;++$3){$4=this.$0.fetchChildNodeByIndex($3);if(!!$4){this.$0.handleClickIfPending($4);tableau.FilterItem.setChecked($4,$2);}}},_updateRangeAnchor:function($p0){if(this.$0.isSingleSelect()){return;}if(this._anchorIndex===$p0&&$p0>=0){return;}var $0;if(this._anchorIndex>=0){$0=this.$0.fetchChildNodeByIndex(this._anchorIndex);if(!!$0){dojo.removeClass(tableau.FilterItem.getCssNode($0),'anchorSelection');}}this._anchorIndex=$p0;$0=this.$0.fetchChildNodeByIndex($p0);if(!!$0){dojo.addClass(tableau.FilterItem.getCssNode($0),'anchorSelection');}else{this._anchorIndex=-1;}this._lastRangeSelectionIndex=-1;}}
tab.ExportPdfDialog=function(sess,pngMode){tab.ExportPdfDialog.initializeBase(this,['',$(tab.ExportPdfDialog.dialogTemplate())]);this.$3_3=(pngMode)?'png':'pdf';this.$3_2=sess;this.dom=new tab.ExportPdfDialogTemplate(this.get_element());this.thumbnails=[];this.get_dialogElement().css({minWidth:'none',maxWidth:'none'});switch(this.$3_3){case 'png':this.set_titleUnescaped(tab.Strings.PdfExportTitlePNG);this.dom.getElementsBySelector('.pdf-only').hide();break;case 'pdf':this.set_titleUnescaped(tab.Strings.PdfExportTitlePDF);this.dom.getElementsBySelector('.png-only').hide();break;}this.$3_7=new spiff.StyledButton('cancel');this.$3_7.set_label(tab.Strings.DialogButtonCancel);this.$3_7.add_click(ss.Delegate.create(this,this.onCancel));this.$3_6=new spiff.StyledButton('export');this.$3_6.set_label(tab.Strings.DialogButtonExport);this.$3_6.add_click(ss.Delegate.create(this,this.onExport));this.dom.buttons.append(this.$3_6.get_element());this.dom.buttons.append(this.$3_7.get_element());this.set_vertOffset(100);this.set_closeButtonVisible(false);this.disableTextSelection();}
tab.ExportPdfDialog.dialogTemplate=function(){if(tab.ExportPdfDialog.$3_0==null){tab.ExportPdfDialog.$3_0=String.localeFormat(tab.ExportPdfDialogTemplate.template,tableau.format.escapeHTML(tab.Strings.PdfDialogPaperSize),tableau.format.escapeHTML(tab.Strings.PdfDialogImageSize),tableau.format.escapeHTML(tab.Strings.PdfDialogScalingLabel),tableau.format.escapeHTML(tab.Strings.PdfDialogSectionLayout),tableau.format.escapeHTML(tab.Strings.PdfExportPageOrientationPortrait),tableau.format.escapeHTML(tab.Strings.PdfExportPageOrientationLandscape),tableau.format.escapeHTML(tab.Strings.PdfDialogSectionContent),tableau.format.escapeHTML(tab.Strings.PdfDialogContentDashboardSheets),tableau.format.escapeHTML(tab.Strings.PdfDialogContentDashboard),tableau.format.escapeHTML(tab.Strings.PdfDialogContentTopSheets),tableau.format.escapeHTML(tab.Strings.PdfDialogContentWorksheet),tableau.format.escapeHTML(tab.Strings.PdfDialogSelectSheetToChangePrintScaling),tableau.format.escapeHTML(tab.Strings.PdfDialogContentStory));}return tab.ExportPdfDialog.$3_0;}
tab.ExportPdfDialog.scalingValueFromLayoutOptions=function(options){switch(options.ajj){case 'fit-pages':return String.format('fit{0}x{1}',options.aau,options.aav);case 'percent':return String.format('pct{0}',options.aat);case 'auto':default:return 'auto';}}
tab.ExportPdfDialog.scalingLabelFromLayoutOptions=function(options){switch(options.ajj){case 'fit-pages':if(!options.aau&&options.aav>0){return tab.Strings.PdfExportFitHigh(options.aav);}else if(!options.aav&&options.aau>0){return tab.Strings.PdfExportFitWide(options.aau);}else{return tab.Strings.PdfExportFitWideByHigh(options.aau,options.aav);}case 'percent':return tab.Strings.PdfExportPageScalePercent(options.aat);case 'auto':default:return tab.Strings.PdfExportPageScaleAuto;}}
tab.ExportPdfDialog.canSelectSheet=function(sheet){return sheet.ap||(ss.isValue(tsConfig.is_authoring)&&tsConfig.is_authoring);}
tab.ExportPdfDialog.prototype={dom:null,thumbnails:null,$3_1:null,$3_2:null,$3_3:null,$3_4:null,$3_5:false,$3_6:null,$3_7:null,get_thumbnailTemplates:function(){return this.thumbnails;},get_$3_8:function(){return this.dom.orientationBtns.find('.selected').val();},set_$3_8:function($p0){var $0=($p0==='printer')?'portrait':$p0;var $1=this.dom.orientationBtns;var $2=function($p1_0,$p1_1){
var $1_0=$($p1_1);if($1_0.attr('value')===$0){$1_0.addClass('selected');}else{$1_0.removeClass('selected');}};$1.each($2);return $p0;},get_$3_9:function(){return (this.$3_3==='png')?parseInt(this.dom.imageHeightBtn.val()):0;},set_$3_9:function($p0){if(this.$3_3==='png'){this.dom.imageHeightBtn.val($p0);}return $p0;},get_$3_A:function(){return (this.$3_3==='png')?parseInt(this.dom.imageWidthBtn.val()):0;},set_$3_A:function($p0){if(this.$3_3==='png'){this.dom.imageHeightBtn.val($p0);}return $p0;},get_$3_B:function(){return (this.$3_3==='png')?'letter':this.dom.sizeControl.val();},set_$3_B:function($p0){if(this.$3_3==='pdf'){this.dom.sizeControl.val($p0);}return $p0;},get_$3_C:function(){return this.dom.statusMsg.text();},set_$3_C:function($p0){this.dom.statusMsg.text($p0);return $p0;},get_$3_D:function(){return this.$3_1;},set_$3_D:function($p0){this.$3_1=$p0;this.initFromModel();return $p0;},get_$3_E:function(){return this.$3_4.get_presModel();},get_$3_F:function(){return this.$3_5;},set_$3_F:function($p0){this.$3_5=$p0;if($p0){this.get_body().find('select, input, button').attr('disabled','disabled');this.$3_6.set_disabled(true);}else{this.get_body().find('select, input, button').removeAttr('disabled');this.$3_6.set_disabled(false);}return $p0;},initialize:function(){this.initEventHandlers();},dispose:function(){this.get_body().undelegate('button','click').undelegate('select','change').undelegate('input','change');this.$3_7.dispose();this.$3_6.dispose();this.dom.dispose();tab.ExportPdfDialog.callBaseMethod(this, 'dispose');},show:function(){if(ss.isNullOrUndefined(this.get_$3_D())){this.$3_16();}this.initialize();tab.ExportPdfDialog.callBaseMethod(this, 'show');},$3_10:function(){if(this.get_body().find('.tab-pdfdlg-thumbnail-button').hasClass('selected')){this.$3_6.set_disabled(false);this.set_$3_C(null);this.$3_18();}else{this.$3_6.set_disabled(true);this.set_$3_C(tab.Strings.PrintPdfDialogContentRequired);this.$3_17();this.dom.spinner.hide();}},initEventHandlers:function(){this.get_body().find('select').change(ss.Delegate.create(this,this.updateSelection)).end().find('.tab-pdfdlg-group-orientation button').click(ss.Delegate.create(this,this.updateOrientation)).end().find('.png-only input').change(ss.Delegate.create(this,this.updateImageDimension)).end().find('.tab-pdfdlg-dashboard-content-mode button').click(ss.Delegate.create(this,this.handleContentModeSwitch)).end().find('.tab-pdfdlg-worksheet-content-mode button').click(ss.Delegate.create(this,this.handleContentModeSwitch)).end().find('.tab-pdfdlg-story-content-mode button').click(ss.Delegate.create(this,this.handleContentModeSwitch)).end();},appendOptionToSelect:function(label,value,select){var $0=String.localeFormat("<option value='{0}'>{1}</option>",tableau.format.escapeHTML(value),tableau.format.escapeHTML(label));select.append($($0));},appendEnumToSelect:function(label,value,select){this.appendOptionToSelect(label,value,select);},initFromModel:function(){this.$3_1B();this.$3_1A();this.$3_19();this.$3_1D(this.get_$3_E());var $0='this-sheet';if(this.get_$3_E().aw&&!this.get_$3_E().ax){$0='dashboard';}this.$3_1C($0);},onCancel:function(){this.close();},onExport:function(){this.$3_15();},updateScalingSelectFromSheet:function(sheet){var $0=this.dom.scalingSelector;var $1=tab.ExportPdfDialog.scalingValueFromLayoutOptions(sheet.ar3);var $2=$0.children(String.format("option[value='{0}']",$1));if($2.length>0){$0.val($1);}else{this.appendOptionToSelect(tab.ExportPdfDialog.scalingLabelFromLayoutOptions(sheet.ar3),$1,$0);}},updateSheetsFromScalingValue:function(val){var $0=new RegExp('pct([0-9]{1,3})');var $1=new RegExp('fit([0-9]{1,5})x([0-9]{1,5})');var $2;if($0.test(val)){$2=$0.exec(val);var $3=parseInt($2[1]);var $enum1=ss.IEnumerator.getEnumerator(this.$3_1.ar2);while($enum1.moveNext()){var $4=$enum1.current;$4.ar3.ajj='percent';$4.ar3.aat=$3;}}else if($1.test(val)){$2=$1.exec(val);var $5=parseInt($2[1]);var $6=parseInt($2[2]);var $enum2=ss.IEnumerator.getEnumerator(this.$3_1.ar2);while($enum2.moveNext()){var $7=$enum2.current;$7.ar3.ajj='fit-pages';$7.ar3.aau=$5;$7.ar3.aav=$6;}}else{var $enum3=ss.IEnumerator.getEnumerator(this.$3_1.ar2);while($enum3.moveNext()){var $8=$enum3.current;$8.ar3.ajj='auto';}}},updateImageDimension:function(evt){var $0=$(evt.currentTarget);var $1=$0.attr('value');var $2=this.$3_1.ar3;switch($0.attr('name')){case 'imageHeight':var $3=parseInt($1);$2.aaw=$3;var $enum1=ss.IEnumerator.getEnumerator(this.$3_1.ar2);while($enum1.moveNext()){var $5=$enum1.current;$5.ar3.aaw=$3;}break;case 'imageWidth':var $4=parseInt($1);$2.aax=$4;var $enum2=ss.IEnumerator.getEnumerator(this.$3_1.ar2);while($enum2.moveNext()){var $6=$enum2.current;$6.ar3.aax=$4;}break;}},updateSelection:function(evt){var $0=$(evt.currentTarget);var $1=$0.attr('value');switch($0.attr('name')){case 'scaling':this.updateSheetsFromScalingValue($1);break;case 'pageSize':var $2=$1;this.$3_1.ar3.ajl=$2;var $enum1=ss.IEnumerator.getEnumerator(this.$3_1.ar2);while($enum1.moveNext()){var $3=$enum1.current;$3.ar3.ajl=$2;}break;}},handleContentModeSwitch:function(evt){var $0=$(evt.currentTarget);$0.siblings().removeClass('selected').end().addClass('selected');switch($0.attr('name')){case 'dashboard-content':case 'worksheet-content':case 'story-content':this.$3_1C($0.attr('value'));break;}},updateOrientation:function(evt){var $0=evt.currentTarget.getAttribute('value');this.$3_1.ar3.ajk=$0;var $enum1=ss.IEnumerator.getEnumerator(this.$3_1.ar2);while($enum1.moveNext()){var $1=$enum1.current;$1.ar3.ajk=$0;}this.set_$3_8($0);},showThumbList:function(){this.dom.thumbListWrapper.show();this.dom.thumbList.show();},hideThumbList:function(){this.dom.thumbListWrapper.hide();this.dom.thumbList.hide();},setSingleSheetSelected:function(){var $0=this.get_$3_E();var $enum1=ss.IEnumerator.getEnumerator(this.thumbnails);while($enum1.moveNext()){var $1=$enum1.current;$1.selectAndShow($1.get_presModel()===$0);}},$3_11:function(){var $0={};$0.commandNamespace='tabsrv';$0.commandName='pdf-export-server';var $1={};$1['arz']=this.$3_1;$0.commandParams=$1;var $2=ss.Delegate.create(this,function($p1_0){
this.set_$3_F(false);this.$3_18();if(this.get_isShown()){var $1_0=$p1_0;var $1_1=tableau.types.ExportDialogType['PrintPDF'];var $1_2=this.$3_2.formatSessionTempfileReference($1_0.so,true,true);this.$3_2.openDownload($1_2,$1_1);this.close();}});var $3=ss.Delegate.create(this,function($p1_0){
this.$3_14();});tab.ServerCommands.executeServerCommand($0,'immediately',$2,$3);},$3_12:function(){var $0=tsConfig.visible_sheets;var $1={pdfExport:this.$3_1};var $2={};var $3=tableau.types.ExportDialogType['ExportImage'];var $enum1=ss.IEnumerator.getEnumerator(this.$3_1.ar2);while($enum1.moveNext()){var $8=$enum1.current;if($8.ao){var $9=$8.ar3;var $A=$0.indexOf($8.sr);if($A>=0){var $B='';urlPNG = this.session.formatExportURL('image/png', {});var $C=$9.aaw;var $D=$9.aax;$B+=String.format('?:dimensions={0},{1}',$C,$D);$2[$8.sr]=$B;}}}var $4=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$3_2.showDownloads($2,$3);this.close();});var $5=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$3_14();});var $6='tabsrv';var $7='pdf-export-options';this.$3_2.sendSessionCommand($6,$7,$1,$4,$5);},$3_13:function(){switch(this.$3_3){case 'png':this.$3_12();break;case 'pdf':this.$3_11();break;default:break;}},$3_14:function(){this.$3_17();this.set_$3_F(false);switch(this.$3_3){case 'png':this.set_$3_C(tab.Strings.PdfExportMessageErrorPng);break;case 'pdf':default:this.set_$3_C(tab.Strings.PdfExportMessageError);break;}this.dom.spinner.hide();this.dom.statusMsg.show();},$3_15:function(){this.set_$3_F(true);this.set_$3_C(tab.Strings.PdfExportMessageExporting);this.$3_17();this.$3_13();},$3_16:function(){var $0={};$0.commandNamespace='tabsrv';$0.commandName='pdf-export-options';this.set_$3_C(tab.Strings.PdfExportMessageSettings);this.set_$3_F(true);this.$3_17();var $1=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
if($p1_2.status!==200){return;}this.set_$3_D(tab.PresentationModel.fromCommand($p1_0,$0));this.$3_18();this.set_$3_F(false);});var $2=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.set_$3_C(tab.Strings.PdfExportMessageSettingsError);});this.$3_2.sendSessionCommand($0.commandNamespace,$0.commandName,{},$1,$2);},$3_17:function(){this.dom.spinner.show();this.dom.status.show();},$3_18:function(){this.dom.status.hide(250);},$3_19:function(){var $0=tsConfig.repository_urls;var $1=tsConfig.visible_sheets;this.thumbnails.clear();var $enum1=ss.IEnumerator.getEnumerator(this.$3_1.ar2);while($enum1.moveNext()){var $2=$enum1.current;var $3=$2.sr;if(ss.isNullOrUndefined($2.td)||!($2.td).length){if(tab.ExportPdfDialog.canSelectSheet($2)){var $5=$1.indexOf($3);if($5>=0){var $6=$0[$5];$2.td=this.$3_2.formatThumbnailReference($6);}}}var $4=new tab.SheetThumbnailTemplate($(tab.SheetThumbnailTemplate.template));$4.pdfDialog=this;$4.label.text($3);if(tab.ExportPdfDialog.canSelectSheet($2)){$4.icon.attr('style',String.format('background: url({0}) 0 0;',$2.td));}else{$4.get_domRoot().addClass('hidden');$4.icon.addClass('tab-pdfdlg-worksheet-icon');}this.dom.thumbList.append($4.get_domRoot());if($3===this.$3_1.sw){this.$3_4=$4;var $7=$2.ar3;this.set_$3_B($7.ajl);this.set_$3_8($7.ajk);this.updateScalingSelectFromSheet($2);this.set_$3_9($7.aaw);this.set_$3_A($7.aax);}$4.get_domRoot().data('PDFSheet',$2);this.thumbnails.add($4);}},$3_1A:function(){var $0=this.dom.scalingSelector;if($0.length>0){$0.empty();this.appendEnumToSelect(tab.Strings.PdfExportPageScaleAuto,'auto',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(25),'pct25',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(50),'pct50',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(60),'pct60',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(75),'pct75',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(80),'pct80',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(90),'pct90',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(100),'pct100',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(200),'pct200',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(400),'pct400',$0);this.appendOptionToSelect(tab.Strings.PdfExportFitOneHigh,'fit0x1',$0);this.appendOptionToSelect(tab.Strings.PdfExportFitTwoHigh,'fit0x2',$0);this.appendOptionToSelect(tab.Strings.PdfExportFitOneWide,'fit1x0',$0);this.appendOptionToSelect(tab.Strings.PdfExportFitTwoWide,'fit2x0',$0);}},$3_1B:function(){var $0=this.dom.sizeSelector;if($0.length>0){$0.empty();this.appendEnumToSelect(tab.Strings.PdfExportPageSizeLetter,'letter',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeLegal,'legal',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeNote,'note',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeFolio,'folio',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeTabloid,'tabloid',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeLedger,'ledger',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeStatement,'statement',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeExecutive,'executive',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeA3,'a3',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeA4,'a4',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeA5,'a5',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeB4,'b4',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeB5,'b5',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeQuarto,'quarto',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeUnspecified,'unspecified',$0);}},$3_1C:function($p0){this.$3_1E();switch($p0){case 'dashboard':case 'this-sheet':this.setSingleSheetSelected();break;case 'all':this.$3_1F();this.showThumbList();break;case 'all-dashboard':this.$3_20();this.showThumbList();break;}this.$3_10();},$3_1D:function($p0){var $0;if($p0.ax){$0='story';}else if($p0.aw){$0='dashboard';}else{$0='worksheet';}this.get_body().find('.tab-pdfdlg-'+$0+'-content-mode').show().css('visibility','visible').siblings().hide();},$3_1E:function(){var $enum1=ss.IEnumerator.getEnumerator(this.thumbnails);while($enum1.moveNext()){var $0=$enum1.current;$0.selectAndShow(false);}},$3_1F:function(){var $enum1=ss.IEnumerator.getEnumerator(this.thumbnails);while($enum1.moveNext()){var $0=$enum1.current;$0.selectAndShow(tab.ExportPdfDialog.canSelectSheet($0.get_presModel()));}},$3_20:function(){var $0=this.get_$3_E().ve;var $enum1=ss.IEnumerator.getEnumerator(this.thumbnails);while($enum1.moveNext()){var $1=$enum1.current;var $2=$0.contains($1.get_presModel().sr);$1.selectAndShow($2);}}}
tab.SheetThumbnailTemplate=function(root){tab.SheetThumbnailTemplate.initializeBase(this,[root]);this.button=this.getElementBySelector('.tab-pdfdlg-thumbnail-button');this.icon=this.getElementBySelector('.tab-pdfdlg-button-icon');this.label=this.getElementBySelector('.tab-pdfdlg-note');this.initEventHandlers();}
tab.SheetThumbnailTemplate.prototype={button:null,icon:null,label:null,pdfDialog:null,get_presModel:function(){return this.get_domRoot().data('PDFSheet');},set_presModel:function(value){this.get_domRoot().data('PDFSheet',value);return value;},get_isSelected:function(){return this.button.hasClass('selected');},set_isSelected:function(value){if(value){this.button.addClass('selected');}else{this.button.removeClass('selected');}this.get_presModel().ao=value;return value;},get_isVisible:function(){return this.get_domRoot().is(':visible');},set_isVisible:function(value){if(value){this.get_domRoot().show();}else{this.get_domRoot().hide();}return value;},selectAndShow:function(toShow){this.set_isSelected(toShow);this.set_isVisible(toShow);},initEventHandlers:function(){spiff.ClickHandler.targetAndClick(this.button,ss.Delegate.create(this,this.handleSheetToggled));},handleSheetToggled:function(e){if(!this.button.is(':disabled')){this.set_isSelected(!this.get_isSelected());}if(ss.isValue(this.pdfDialog)){this.pdfDialog.$3_10();}}}
tab.ExportPdfDialogTemplate=function(root){tab.ExportPdfDialogTemplate.initializeBase(this,[root]);this.orientationBtns=this.getElementsBySelector("button[name='orientation']");this.scalingSelector=this.getElementBySelector('#pdfdlgScaling');this.sizeSelector=this.getElementBySelector('#pdfdlgPageSize');this.imageHeightBtn=this.getElementBySelector("[name='imageHeight']");this.imageWidthBtn=this.getElementBySelector("[name='imageWidth']");this.sizeControl=this.getElementBySelector("[name='pageSize']");this.status=this.getElementBySelector('.tab-pdfdlg-status');this.statusMsg=this.getElementBySelector('.tab-dialog-status-msg');this.spinner=this.getElementBySelector('.tab-pdfdlg-spinner');this.thumbListWrapper=this.getElementBySelector('.tab-pdfdlg-sheets-container');this.thumbList=this.getElementBySelector('.tab-pdfdlg-sheet-list');this.buttons=this.getElementBySelector('.tab-dialog-actions');}
tab.ExportPdfDialogTemplate.prototype={orientationBtns:null,scalingSelector:null,sizeSelector:null,imageHeightBtn:null,imageWidthBtn:null,sizeControl:null,spinner:null,status:null,statusMsg:null,thumbListWrapper:null,thumbList:null,buttons:null,thumbs:function(){return this.thumbList.find('li');}}
tab.VizEvent=function(){}
tab.VizEvent.add_mobileVizExpandTransform=function(value){tab.VizEvent.$0=ss.Delegate.combine(tab.VizEvent.$0,value);}
tab.VizEvent.remove_mobileVizExpandTransform=function(value){tab.VizEvent.$0=ss.Delegate.remove(tab.VizEvent.$0,value);}
tab.VizEvent.add_mobileVizReduceTransform=function(value){tab.VizEvent.$1=ss.Delegate.combine(tab.VizEvent.$1,value);}
tab.VizEvent.remove_mobileVizReduceTransform=function(value){tab.VizEvent.$1=ss.Delegate.remove(tab.VizEvent.$1,value);}
tab.VizEvent.notifyMobileVizExpandTransform=function(){if(ss.isValue(tab.VizEvent.$0)){tab.VizEvent.$0();}}
tab.VizEvent.notifyMobileVizReduceTransform=function(){if(ss.isValue(tab.VizEvent.$1)){tab.VizEvent.$1();}}
tab.MarksRenderer=function(canvas,context){tab.MarksRenderer.initializeBase(this,[canvas,context]);}
tab.MarksRenderer.$F=function($p0,$p1){return tab.CanvasRenderer.bBoxMultipolygon($p0.hasPixelGeometry,$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('size',$p1),7,$p0.getMarkGeometry($p0.getMarkProperty('geometry',$p1)));}
tab.MarksRenderer.$10=function($p0,$p1,$p2,$p3){var $0;var $1=$p0.getMarkProperty('x',$p3);var $2=$p0.getMarkProperty('y',$p3);var $3=$p0.getMarkGeometry($p0.getMarkProperty('geometry',$p3));if(ss.isNullOrUndefined($3)){$0=tab.$create_PointF($p1,$p2);var $4=tab.$create_PointF($1,$2);return tab.GeometryUtil.isPointInCircle($0,tab.$create_Circle($4,7/2));}if(!$p0.hasPixelGeometry){var $5=$p0.getMarkProperty('size',$p3);if(!!$5){$p1=($p1-$1)/$5;$p2=($p2-$2)/$5;}}$0=tab.$create_PointF($p1,$p2);return tab.GeometryUtil.isPointInMultipolygon($3,$0);}
tab.MarksRenderer.$11=function($p0,$p1,$p2){var $0=$p0.getMarkGeometry($p0.getMarkProperty('geometry',$p2));if(ss.isNull($0)){return true;}return tab.GeometryUtil.multipolygonIntersectsDoubleRect($0,$p1);}
tab.MarksRenderer.$12=function($p0,$p1,$p2){var $0=$p0.getMarkGeometry($p0.getMarkProperty('geometry',$p2));if(ss.isNull($0)){return tab.GeometryUtil.polygonIntersectsRect($p1,tab.MarksRenderer.$F($p0,$p2));}return tab.GeometryUtil.multipolygonIntersectsPolygon($0,$p1);}
tab.MarksRenderer.$13=function($p0,$p1,$p2){var $0=$p0.getMarkGeometry($p0.getMarkProperty('geometry',$p2));if(ss.isNull($0)){return tab.GeometryUtil.circleIntersectsRect($p1,tab.MarksRenderer.$F($p0,$p2));}return tab.GeometryUtil.multipolygonIntersectsCircle($0,$p1);}
tab.MarksRenderer.$14=function($p0,$p1){var $0=$p0.getLeft($p1);var $1=$p0.getRight($p1);var $2=tab.$create_RectXY(0,0,0,0);if($0!==-1){var $3=tab.RectXYUtil.rectXYFromCorners(tab.$create_PointF($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1)),tab.$create_PointF(($p0.getMarkProperty('x_next',$0)+$p0.getMarkProperty('x_prev',$p1))/2,($p0.getMarkProperty('y_next',$0)+$p0.getMarkProperty('y_prev',$p1))/2));$2=tab.RectXYUtil.union($2,$3);var $4=tab.RectXYUtil.rectXYFromCorners(tab.$create_PointF(($p0.getMarkProperty('x1',$0)+$p0.getMarkProperty('x1',$p1))/2,($p0.getMarkProperty('y1',$0)+$p0.getMarkProperty('y1',$p1))/2),tab.$create_PointF($p0.getMarkProperty('x_prev',$p1),$p0.getMarkProperty('y_prev',$p1)));$2=tab.RectXYUtil.union($2,$4);$2=tab.RectXYUtil.outsetRect($2,10,10);}if($1!==-1){var $5=tab.RectXYUtil.rectXYFromCorners(tab.$create_PointF($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1)),tab.$create_PointF(($p0.getMarkProperty('x_prev',$1)+$p0.getMarkProperty('x_next',$p1))/2,($p0.getMarkProperty('y_prev',$1)+$p0.getMarkProperty('y_next',$p1))/2));$2=tab.RectXYUtil.union($2,$5);var $6=tab.RectXYUtil.rectXYFromCorners(tab.$create_PointF(($p0.getMarkProperty('x1',$1)+$p0.getMarkProperty('x1',$p1))/2,($p0.getMarkProperty('y1',$1)+$p0.getMarkProperty('y1',$p1))/2),tab.$create_PointF($p0.getMarkProperty('x_next',$p1),$p0.getMarkProperty('y_next',$p1)));$2=tab.RectXYUtil.union($2,$6);$2=tab.RectXYUtil.outsetRect($2,10,10);}if($0===-1&&$1===-1){var $7=tab.RectXYUtil.rectXYFromCorners(tab.$create_PointF($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1)),tab.$create_PointF($p0.getMarkProperty('x_next',$p1),$p0.getMarkProperty('y_next',$p1)));$2=tab.RectXYUtil.union($2,$7);}if($0===-1&&$1===-1){var $8=tab.RectXYUtil.rectXYFromCorners(tab.$create_PointF($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1)),tab.$create_PointF($p0.getMarkProperty('x_prev',$p1),$p0.getMarkProperty('y_prev',$p1)));$2=tab.RectXYUtil.union($2,$8);}$2=tab.RectXYUtil.encompassCircle($2,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1)),(5+20)/2));return $2;}
tab.MarksRenderer.$15=function($p0,$p1,$p2,$p3){var $0=$p0.getLeft($p3);var $1=$p0.getRight($p3);if($0!==-1){var $2=[];$2.add(tab.$create_PointF($p0.getMarkProperty('x1',$p3),$p0.getMarkProperty('y1',$p3)));$2.add(tab.$create_PointF(($p0.getMarkProperty('x1',$0)+$p0.getMarkProperty('x1',$p3))/2,($p0.getMarkProperty('y1',$0)+$p0.getMarkProperty('y1',$p3))/2));$2.add(tab.$create_PointF(($p0.getMarkProperty('x_next',$0)+$p0.getMarkProperty('x_prev',$p3))/2,($p0.getMarkProperty('y_next',$0)+$p0.getMarkProperty('y_prev',$p3))/2));$2.add(tab.$create_PointF($p0.getMarkProperty('x_prev',$p3),$p0.getMarkProperty('y_prev',$p3)));if(tab.GeometryUtil.isPointInPoly($2,tab.$create_PointF($p1,$p2),0)){return true;}}if($1!==-1){var $3=[];$3.add(tab.$create_PointF($p0.getMarkProperty('x1',$p3),$p0.getMarkProperty('y1',$p3)));$3.add(tab.$create_PointF(($p0.getMarkProperty('x1',$1)+$p0.getMarkProperty('x1',$p3))/2,($p0.getMarkProperty('y1',$1)+$p0.getMarkProperty('y1',$p3))/2));$3.add(tab.$create_PointF(($p0.getMarkProperty('x_prev',$1)+$p0.getMarkProperty('x_next',$p3))/2,($p0.getMarkProperty('y_prev',$1)+$p0.getMarkProperty('y_next',$p3))/2));$3.add(tab.$create_PointF($p0.getMarkProperty('x_next',$p3),$p0.getMarkProperty('y_next',$p3)));if(tab.GeometryUtil.isPointInPoly($3,tab.$create_PointF($p1,$p2),0)){return true;}}if($0===-1&&$1===-1){return true;}if($0===-1&&$1===-1){return true;}if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x1',$p3),$p0.getMarkProperty('y1',$p3)),(5)/2))){return true;}return false;}
tab.MarksRenderer.$16=function($p0,$p1,$p2,$p3){var $0=$p0.getLeft($p3);var $1=$p0.getRight($p3);if($0!==-1){var $2=[];$2.add(tab.$create_PointF($p0.getMarkProperty('x1',$p3),$p0.getMarkProperty('y1',$p3)));$2.add(tab.$create_PointF(($p0.getMarkProperty('x1',$0)+$p0.getMarkProperty('x1',$p3))/2,($p0.getMarkProperty('y1',$0)+$p0.getMarkProperty('y1',$p3))/2));$2.add(tab.$create_PointF(($p0.getMarkProperty('x_next',$0)+$p0.getMarkProperty('x_prev',$p3))/2,($p0.getMarkProperty('y_next',$0)+$p0.getMarkProperty('y_prev',$p3))/2));$2.add(tab.$create_PointF($p0.getMarkProperty('x_prev',$p3),$p0.getMarkProperty('y_prev',$p3)));if(tab.GeometryUtil.isPointInPoly($2,tab.$create_PointF($p1,$p2),10)){return true;}}if($1!==-1){var $3=[];$3.add(tab.$create_PointF($p0.getMarkProperty('x1',$p3),$p0.getMarkProperty('y1',$p3)));$3.add(tab.$create_PointF(($p0.getMarkProperty('x1',$1)+$p0.getMarkProperty('x1',$p3))/2,($p0.getMarkProperty('y1',$1)+$p0.getMarkProperty('y1',$p3))/2));$3.add(tab.$create_PointF(($p0.getMarkProperty('x_prev',$1)+$p0.getMarkProperty('x_next',$p3))/2,($p0.getMarkProperty('y_prev',$1)+$p0.getMarkProperty('y_next',$p3))/2));$3.add(tab.$create_PointF($p0.getMarkProperty('x_next',$p3),$p0.getMarkProperty('y_next',$p3)));if(tab.GeometryUtil.isPointInPoly($3,tab.$create_PointF($p1,$p2),10)){return true;}}if($0===-1&&$1===-1){return true;}if($0===-1&&$1===-1){return true;}if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x1',$p3),$p0.getMarkProperty('y1',$p3)),(5+20)/2))){return true;}return false;}
tab.MarksRenderer.$17=function($p0,$p1){return tab.$create_SizeF(0,0);}
tab.MarksRenderer.$18=function($p0,$p1,$p2,$p3){var $0=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToLineSegment($0,tab.$create_PointF($p1,$p2));}
tab.MarksRenderer.$19=function($p0,$p1,$p2){return tab.GeometryUtil.circleIntersectsRect(tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x1',$p2),$p0.getMarkProperty('y1',$p2)),(2)/2),$p1)||tab.GeometryUtil.circleIntersectsRect(tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x_next',$p2),$p0.getMarkProperty('y_next',$p2)),(2)/2),$p1)||tab.GeometryUtil.circleIntersectsRect(tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x1',$p2),$p0.getMarkProperty('y1',$p2)),(2)/2),$p1)||tab.GeometryUtil.circleIntersectsRect(tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x_prev',$p2),$p0.getMarkProperty('y_prev',$p2)),(2)/2),$p1);}
tab.MarksRenderer.$1A=function($p0,$p1,$p2){return tab.GeometryUtil.polygonIntersectsCircle($p1,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x1',$p2),$p0.getMarkProperty('y1',$p2)),(2)/2))||tab.GeometryUtil.polygonIntersectsCircle($p1,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x_next',$p2),$p0.getMarkProperty('y_next',$p2)),(2)/2))||tab.GeometryUtil.polygonIntersectsCircle($p1,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x1',$p2),$p0.getMarkProperty('y1',$p2)),(2)/2))||tab.GeometryUtil.polygonIntersectsCircle($p1,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x_prev',$p2),$p0.getMarkProperty('y_prev',$p2)),(2)/2));}
tab.MarksRenderer.$1B=function($p0,$p1,$p2){return tab.GeometryUtil.circleIntersectsCircle($p1,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x1',$p2),$p0.getMarkProperty('y1',$p2)),(2)/2))||tab.GeometryUtil.circleIntersectsCircle($p1,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x_next',$p2),$p0.getMarkProperty('y_next',$p2)),(2)/2))||tab.GeometryUtil.circleIntersectsCircle($p1,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x1',$p2),$p0.getMarkProperty('y1',$p2)),(2)/2))||tab.GeometryUtil.circleIntersectsCircle($p1,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x_prev',$p2),$p0.getMarkProperty('y_prev',$p2)),(2)/2));}
tab.MarksRenderer.$1C=function($p0,$p1){var $0=tab.$create_RectXY(0,0,0,0);var $1=$p0.getMarkLabelProperty('x',$p1);var $2=$p0.getMarkLabelProperty('y',$p1);var $3=$p0.getMarkLabelProperty('width',$p1);var $4=-$p0.getMarkLabelProperty('height',$p1);$1+=0;$2+=0;if($4<0){$2+=$4;$4=Math.abs($4);}$0=tab.$create_RectXY(parseInt($1),parseInt($2),parseInt($3),parseInt($4));return $0;}
tab.MarksRenderer.$1D=function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('size',$p3)/2;var $1=$p0.getMarkProperty('theta',$p3);var $2=$p0.getMarkProperty('theta1',$p3);if($1>$2){var $5=$1;$1=$2;$2=$5;}var $3=tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3));var $4=tab.$create_Circle($3,$0);if($2-$1>=1){return tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),$4);}$1=tab.CanvasRenderer.toCanvasAngle($1);$2=tab.CanvasRenderer.toCanvasAngle($2);$1=tab.GeometryUtil.normalizeAngle($1);$2=tab.GeometryUtil.normalizeAngle($2);return tab.GeometryUtil.isPointInWedge(tab.$create_PointF($p1,$p2),$4,$1,$2);}
tab.MarksRenderer.$1E=function($p0,$p1,$p2){var $0=$p0.getMarkProperty('size',$p2)/2;var $1=$p0.getMarkProperty('theta',$p2);var $2=$p0.getMarkProperty('theta1',$p2);if($1>$2){var $4=$1;$1=$2;$2=$4;}var $3=tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2));$1=tab.CanvasRenderer.toCanvasAngle($1);$2=tab.CanvasRenderer.toCanvasAngle($2);$1=tab.GeometryUtil.normalizeAngle($1);$2=tab.GeometryUtil.normalizeAngle($2);return tab.GeometryUtil.rectIntersectsWedge($p1,tab.$create_Circle($3,$0),$1,$2);}
tab.MarksRenderer.$1F=function($p0,$p1,$p2){var $0=$p0.getMarkProperty('size',$p2)/2;var $1=$p0.getMarkProperty('theta',$p2);var $2=$p0.getMarkProperty('theta1',$p2);if($1>$2){var $4=$1;$1=$2;$2=$4;}var $3=tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2));$1=tab.CanvasRenderer.toCanvasAngle($1);$2=tab.CanvasRenderer.toCanvasAngle($2);$1=tab.GeometryUtil.normalizeAngle($1);$2=tab.GeometryUtil.normalizeAngle($2);return tab.GeometryUtil.polygonIntersectsWedge($p1,tab.$create_Circle($3,$0),$1,$2);}
tab.MarksRenderer.$20=function($p0,$p1,$p2){var $0=$p0.getMarkProperty('size',$p2)/2;var $1=$p0.getMarkProperty('theta',$p2);var $2=$p0.getMarkProperty('theta1',$p2);if($1>$2){var $4=$1;$1=$2;$2=$4;}var $3=tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2));$1=tab.CanvasRenderer.toCanvasAngle($1);$2=tab.CanvasRenderer.toCanvasAngle($2);$1=tab.GeometryUtil.normalizeAngle($1);$2=tab.GeometryUtil.normalizeAngle($2);return tab.GeometryUtil.circleIntersectsWedge($p1,tab.$create_Circle($3,$0),$1,$2);}
tab.MarksRenderer.$21=function($p0,$p1){var $0=tab.$create_RectXY(0,0,0,0);var $1=$p0.getMarkProperty('size',$p1)/2;$0=tab.RectXYUtil.union($0,tab.CanvasRenderer.boundWedge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$1,$p0.getMarkProperty('theta',$p1),$p0.getMarkProperty('theta1',$p1)));if($p0.getMarkProperty('draw_border',$p1)){$0=tab.RectXYUtil.union($0,tab.CanvasRenderer.boundWedge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$1,$p0.getMarkProperty('theta',$p1),$p0.getMarkProperty('theta1',$p1)));}return $0;}
tab.MarksRenderer.$22=function($p0,$p1){var $0=tab.$create_RectXY(0,0,0,0);if(!(!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){if(!(!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){var $1=$p0.getMarkProperty('x',$p1);var $2=$p0.getMarkProperty('y',$p1);var $3=$p0.getMarkProperty('width',$p1);var $4=-$p0.getMarkProperty('height',$p1);$1+=-$p0.getMarkProperty('width',$p1)/2;$2+=$p0.getMarkProperty('height',$p1)/2;if($4<0){$2+=$4;$4=Math.abs($4);}$0=tab.$create_RectXY(parseInt($1),parseInt($2),parseInt($3),parseInt($4));}}if((!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){if((!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){var $5=$p0.getMarkProperty('x',$p1);var $6=$p0.getMarkProperty('y',$p1);var $7=$p0.getMarkProperty('clip_width',$p1);var $8=-$p0.getMarkProperty('clip_height',$p1);$5+=-$p0.getMarkProperty('clip_width',$p1)/2;$6+=$p0.getMarkProperty('clip_height',$p1)/2;if($8<0){$6+=$8;$8=Math.abs($8);}$0=tab.$create_RectXY(parseInt($5),parseInt($6),parseInt($7),parseInt($8));}}return $0;}
tab.MarksRenderer.$23=function($p0,$p1,$p2,$p3){if(!(!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3)+($p0.getMarkProperty('height',$p3)/2),$p0.getMarkProperty('x',$p3)+(-$p0.getMarkProperty('width',$p3)/2),-$p0.getMarkProperty('height',$p3),$p0.getMarkProperty('width',$p3),0,0,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}if((!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3)+($p0.getMarkProperty('clip_height',$p3)/2),$p0.getMarkProperty('x',$p3)+(-$p0.getMarkProperty('clip_width',$p3)/2),-$p0.getMarkProperty('clip_height',$p3),$p0.getMarkProperty('clip_width',$p3),0,0,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}return false;}
tab.MarksRenderer.$24=function($p0,$p1,$p2,$p3){if(!(!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3)+($p0.getMarkProperty('height',$p3)/2+10),$p0.getMarkProperty('x',$p3)+(-$p0.getMarkProperty('width',$p3)/2-10),-$p0.getMarkProperty('height',$p3)-(10*2),$p0.getMarkProperty('width',$p3)+(10*2),0,0,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}if((!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3)+($p0.getMarkProperty('clip_height',$p3)/2),$p0.getMarkProperty('x',$p3)+(-$p0.getMarkProperty('clip_width',$p3)/2),-$p0.getMarkProperty('clip_height',$p3),$p0.getMarkProperty('clip_width',$p3),0,0,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}return false;}
tab.MarksRenderer.$25=function($p0,$p1){var $0=tab.$create_SizeF(0,0);if(!(!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){$0=tab.$create_SizeF(10,10);}if((!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){$0=tab.$create_SizeF($p0.getMarkProperty('clip_width',$p1)/2,$p0.getMarkProperty('clip_height',$p1)/2);}return $0;}
tab.MarksRenderer.$26=function($p0,$p1,$p2,$p3){var $0=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToNearestSide($0,tab.$create_PointF($p1,$p2));}
tab.MarksRenderer.$27=function($p0,$p1){var $0=tab.$create_RectXY(0,0,0,0);var $1=(parseInt(($p0.getMarkProperty('size',$p1)+0.5))/2);if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){var $2=Math.min($p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y1',$p1));var $3=Math.max($p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y1',$p1));var $4=Math.min($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x1',$p1));var $5=Math.max($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x1',$p1));var $6=tab.CanvasRenderer.roundStartAndExtent($2,$3-$2,$p0.get_minBarHeight());var $7=tab.CanvasRenderer.roundStartAndExtent($4,$5-$4,$p0.get_minBarWidth());var $8=tab.$create_RectXY(parseInt($7.first),parseInt($6.first),parseInt($7.second),parseInt($6.second));$0=tab.RectXYUtil.union($0,$8);}if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){var $9=Math.min($p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y1',$p1));var $A=Math.max($p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y1',$p1));var $B=Math.min($p0.getMarkProperty('x',$p1)-$1,$p0.getMarkProperty('x',$p1)+$1);var $C=Math.max($p0.getMarkProperty('x',$p1)-$1,$p0.getMarkProperty('x',$p1)+$1);var $D=tab.CanvasRenderer.roundStartAndExtent($9,$A-$9,$p0.get_minBarHeight());var $E=tab.CanvasRenderer.roundStartAndExtent($B,$C-$B,$p0.get_minBarWidth());var $F=tab.$create_RectXY(parseInt($E.first),parseInt($D.first),parseInt($E.second),parseInt($D.second));$0=tab.RectXYUtil.union($0,$F);}if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){var $10=Math.min($p0.getMarkProperty('y',$p1)-$1,$p0.getMarkProperty('y',$p1)+$1);var $11=Math.max($p0.getMarkProperty('y',$p1)-$1,$p0.getMarkProperty('y',$p1)+$1);var $12=Math.min($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x1',$p1));var $13=Math.max($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x1',$p1));var $14=tab.CanvasRenderer.roundStartAndExtent($10,$11-$10,$p0.get_minBarHeight());var $15=tab.CanvasRenderer.roundStartAndExtent($12,$13-$12,$p0.get_minBarWidth());var $16=tab.$create_RectXY(parseInt($15.first),parseInt($14.first),parseInt($15.second),parseInt($14.second));$0=tab.RectXYUtil.union($0,$16);}if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){var $17=Math.min($p0.getMarkProperty('y',$p1)-$1,$p0.getMarkProperty('y',$p1)+$1);var $18=Math.max($p0.getMarkProperty('y',$p1)-$1,$p0.getMarkProperty('y',$p1)+$1);var $19=Math.min($p0.getMarkProperty('x',$p1)-$1,$p0.getMarkProperty('x',$p1)+$1);var $1A=Math.max($p0.getMarkProperty('x',$p1)-$1,$p0.getMarkProperty('x',$p1)+$1);var $1B=tab.CanvasRenderer.roundStartAndExtent($17,$18-$17,$p0.get_minBarHeight());var $1C=tab.CanvasRenderer.roundStartAndExtent($19,$1A-$19,$p0.get_minBarWidth());var $1D=tab.$create_RectXY(parseInt($1C.first),parseInt($1B.first),parseInt($1C.second),parseInt($1B.second));$0=tab.RectXYUtil.union($0,$1D);}return $0;}
tab.MarksRenderer.$28=function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('size',$p3)/2;var $1=$p0.getMarkProperty('size',$p3)/2;if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3),$p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y1',$p3)-($p0.getMarkProperty('y',$p3)),$p0.getMarkProperty('x1',$p3)-($p0.getMarkProperty('x',$p3)),0,0,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3),$p0.getMarkProperty('x',$p3)-$0,$p0.getMarkProperty('y1',$p3)-($p0.getMarkProperty('y',$p3)),$p0.getMarkProperty('x',$p3)+$0-($p0.getMarkProperty('x',$p3)-$0),0,0,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3)-$1,$p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)+$1-($p0.getMarkProperty('y',$p3)-$1),$p0.getMarkProperty('x1',$p3)-($p0.getMarkProperty('x',$p3)),0,0,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3)-$1,$p0.getMarkProperty('x',$p3)-$0,$p0.getMarkProperty('y',$p3)+$1-($p0.getMarkProperty('y',$p3)-$1),$p0.getMarkProperty('x',$p3)+$0-($p0.getMarkProperty('x',$p3)-$0),0,0,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}return false;}
tab.MarksRenderer.$29=function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('clip_width',$p3)/2;var $1=$p0.getMarkProperty('clip_height',$p3)/2;var $2=$p0.getMarkProperty('size',$p3)/2;var $3=$p0.getMarkProperty('size',$p3)/2;if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3),$p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y1',$p3)-($p0.getMarkProperty('y',$p3)),$p0.getMarkProperty('x1',$p3)-($p0.getMarkProperty('x',$p3)),0,0,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&!$p0.get_paneHasCellsX()&&!$p0.get_paneHasCellsY()){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3),$p0.getMarkProperty('x',$p3)-$2,$p0.getMarkProperty('y1',$p3)-($p0.getMarkProperty('y',$p3)),$p0.getMarkProperty('x',$p3)+$2-($p0.getMarkProperty('x',$p3)-$2),10,10,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&!$p0.get_paneHasCellsX()&&!$p0.get_paneHasCellsY()){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3)-$3,$p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)+$3-($p0.getMarkProperty('y',$p3)-$3),$p0.getMarkProperty('x1',$p3)-($p0.getMarkProperty('x',$p3)),10,10,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&$p0.get_paneHasCellsX()&&!$p0.get_paneHasCellsY()){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3),$p0.getMarkProperty('x',$p3)-$0,$p0.getMarkProperty('y1',$p3)-($p0.getMarkProperty('y',$p3)),$p0.getMarkProperty('x',$p3)+$0-($p0.getMarkProperty('x',$p3)-$0),10,0,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&!$p0.get_paneHasCellsX()&&$p0.get_paneHasCellsY()){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3)-$1,$p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)+$1-($p0.getMarkProperty('y',$p3)-$1),$p0.getMarkProperty('x1',$p3)-($p0.getMarkProperty('x',$p3)),0,10,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&!$p0.get_paneHasCellsX()&&!$p0.get_paneHasCellsY()){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3)-$3,$p0.getMarkProperty('x',$p3)-$2,$p0.getMarkProperty('y',$p3)+$3-($p0.getMarkProperty('y',$p3)-$3),$p0.getMarkProperty('x',$p3)+$2-($p0.getMarkProperty('x',$p3)-$2),10,10,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.get_paneHasCellsX()&&!$p0.get_paneHasCellsY()){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3)-$3,$p0.getMarkProperty('x',$p3)-$0,$p0.getMarkProperty('y',$p3)+$3-($p0.getMarkProperty('y',$p3)-$3),$p0.getMarkProperty('x',$p3)+$0-($p0.getMarkProperty('x',$p3)-$0),10,0,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&!$p0.get_paneHasCellsX()&&$p0.get_paneHasCellsY()){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3)-$1,$p0.getMarkProperty('x',$p3)-$2,$p0.getMarkProperty('y',$p3)+$1-($p0.getMarkProperty('y',$p3)-$1),$p0.getMarkProperty('x',$p3)+$2-($p0.getMarkProperty('x',$p3)-$2),0,10,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.get_paneHasCellsX()&&$p0.get_paneHasCellsY()){return tab.CanvasRenderer.isPointInExpandedRectHelperF($p0.getMarkProperty('y',$p3)-$1,$p0.getMarkProperty('x',$p3)-$0,$p0.getMarkProperty('y',$p3)+$1-($p0.getMarkProperty('y',$p3)-$1),$p0.getMarkProperty('x',$p3)+$0-($p0.getMarkProperty('x',$p3)-$0),0,0,$p0.get_minBarHeight(),$p0.get_minBarWidth(),$p1,$p2);}return false;}
tab.MarksRenderer.$2A=function($p0,$p1){var $0=tab.$create_SizeF(0,0);if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){$0=tab.$create_SizeF(0,0);}if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&!$p0.get_paneHasCellsX()&&!$p0.get_paneHasCellsY()){$0=tab.$create_SizeF(10/2,10);}if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&!$p0.get_paneHasCellsX()&&!$p0.get_paneHasCellsY()){$0=tab.$create_SizeF(10,10/2);}if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&$p0.get_paneHasCellsX()&&!$p0.get_paneHasCellsY()){$0=tab.$create_SizeF($p0.getMarkProperty('clip_width',$p1)/2,10);}if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&!$p0.get_paneHasCellsX()&&$p0.get_paneHasCellsY()){$0=tab.$create_SizeF(10,$p0.getMarkProperty('clip_height',$p1)/2);}if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&!$p0.get_paneHasCellsX()&&!$p0.get_paneHasCellsY()){$0=tab.$create_SizeF(10/2,10/2);}if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&!$p0.get_paneHasCellsX()&&$p0.get_paneHasCellsY()){$0=tab.$create_SizeF(10/2,$p0.getMarkProperty('clip_height',$p1));}if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.get_paneHasCellsX()&&!$p0.get_paneHasCellsY()){$0=tab.$create_SizeF($p0.getMarkProperty('clip_width',$p1)/2,10);}if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.get_paneHasCellsX()&&$p0.get_paneHasCellsY()){$0=tab.$create_SizeF($p0.getMarkProperty('clip_width',$p1)/2,$p0.getMarkProperty('clip_height',$p1)/2);}return $0;}
tab.MarksRenderer.$2B=function($p0,$p1,$p2,$p3){var $0=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToNearestSide($0,tab.$create_PointF($p1,$p2));}
tab.MarksRenderer.$2C=function($p0,$p1){var $0=$p0.getLeft($p1);var $1=$p0.getRight($p1);var $2=tab.$create_RectXY(0,0,0,0);$2=tab.RectXYUtil.encompassCircle($2,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1)),($p0.getMarkProperty('width',$p1)+20)/2));$2=tab.RectXYUtil.encompassCircle($2,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1)),($p0.getMarkProperty('width',$p1)+20)/2));if($0!==-1){$2=tab.CanvasRenderer.boundLineEdge($2,($p0.getMarkProperty('x',$0)+$p0.getMarkProperty('x',$p1))/2,($p0.getMarkProperty('y',$0)+$p0.getMarkProperty('y',$p1))/2,(($p0.getMarkProperty('width',$0)+$p0.getMarkProperty('width',$p1))/2)+20,$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1)+20);}if($1!==-1){$2=tab.CanvasRenderer.boundLineEdge($2,$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1)+20,($p0.getMarkProperty('x',$p1)+$p0.getMarkProperty('x',$1))/2,($p0.getMarkProperty('y',$p1)+$p0.getMarkProperty('y',$1))/2,(($p0.getMarkProperty('width',$p1)+$p0.getMarkProperty('width',$1))/2)+20);}return $2;}
tab.MarksRenderer.$2D=function($p0,$p1,$p2,$p3){var $0=$p0.getLeft($p3);var $1=$p0.getRight($p3);if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)),($p0.getMarkProperty('width',$p3))/2))){return true;}if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)),($p0.getMarkProperty('width',$p3))/2))){return true;}if($0!==-1){if(tab.CanvasRenderer.lineEdgeContains($p1,$p2,($p0.getMarkProperty('x',$0)+$p0.getMarkProperty('x',$p3))/2,($p0.getMarkProperty('y',$0)+$p0.getMarkProperty('y',$p3))/2,(($p0.getMarkProperty('width',$0)+$p0.getMarkProperty('width',$p3))/2),$p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3),$p0.getMarkProperty('width',$p3))){return true;}}if($1!==-1){if(tab.CanvasRenderer.lineEdgeContains($p1,$p2,$p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3),$p0.getMarkProperty('width',$p3),($p0.getMarkProperty('x',$p3)+$p0.getMarkProperty('x',$1))/2,($p0.getMarkProperty('y',$p3)+$p0.getMarkProperty('y',$1))/2,(($p0.getMarkProperty('width',$p3)+$p0.getMarkProperty('width',$1))/2))){return true;}}return false;}
tab.MarksRenderer.$2E=function($p0,$p1,$p2,$p3){var $0=$p0.getLeft($p3);var $1=$p0.getRight($p3);if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)),($p0.getMarkProperty('width',$p3)+20)/2))){return true;}if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)),($p0.getMarkProperty('width',$p3)+20)/2))){return true;}if($0!==-1){if(tab.CanvasRenderer.lineEdgeContains($p1,$p2,($p0.getMarkProperty('x',$0)+$p0.getMarkProperty('x',$p3))/2,($p0.getMarkProperty('y',$0)+$p0.getMarkProperty('y',$p3))/2,(($p0.getMarkProperty('width',$0)+$p0.getMarkProperty('width',$p3))/2)+20,$p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3),$p0.getMarkProperty('width',$p3)+20)){return true;}}if($1!==-1){if(tab.CanvasRenderer.lineEdgeContains($p1,$p2,$p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3),$p0.getMarkProperty('width',$p3)+20,($p0.getMarkProperty('x',$p3)+$p0.getMarkProperty('x',$1))/2,($p0.getMarkProperty('y',$p3)+$p0.getMarkProperty('y',$1))/2,(($p0.getMarkProperty('width',$p3)+$p0.getMarkProperty('width',$1))/2)+20)){return true;}}return false;}
tab.MarksRenderer.$2F=function($p0,$p1){return tab.$create_SizeF(0,0);}
tab.MarksRenderer.$30=function($p0,$p1,$p2,$p3){var $0=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToLineSegment($0,tab.$create_PointF($p1,$p2));}
tab.MarksRenderer.$31=function($p0,$p1){var $0=$p0.getMarkProperty('shape_id',$p1);switch($0){case 'shapeIDCircle':var $1=tab.$create_RectXY(0,0,0,0);var $2=Math.round($p0.getMarkProperty('x',$p1));var $3=Math.round($p0.getMarkProperty('y',$p1));var $4=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-0.5/12)))/2);var $5=2*$4;$1=tab.RectXYUtil.union($1,tab.$create_RectXY($2-$4,$3-$4,$5,$5));return $1;case 'shapeIDFilledCircle':var $6=tab.$create_RectXY(0,0,0,0);var $7=Math.round($p0.getMarkProperty('x',$p1));var $8=Math.round($p0.getMarkProperty('y',$p1));var $9=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-0.25/12)))/2);var $A=2*$9;$6=tab.RectXYUtil.union($6,tab.$create_RectXY($7-$9,$8-$9,$A,$A));return $6;case 'shapeIDUnscaledFilledCircle':var $B=tab.$create_RectXY(0,0,0,0);var $C=Math.round($p0.getMarkProperty('x',$p1));var $D=Math.round($p0.getMarkProperty('y',$p1));var $E=Math.ceil($p0.getMarkProperty('width',$p1)/2);var $F=2*$E;$B=tab.RectXYUtil.union($B,tab.$create_RectXY($C-$E,$D-$E,$F,$F));return $B;case 'shapeIDSquare':var $10=tab.$create_RectXY(0,0,0,0);var $11=Math.round($p0.getMarkProperty('x',$p1));var $12=Math.round($p0.getMarkProperty('y',$p1));var $13=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2);var $14=2*$13;$10=tab.RectXYUtil.union($10,tab.$create_RectXY($11-$13,$12-$13,$14,$14));return $10;case 'shapeIDFilledSquare':var $15=tab.$create_RectXY(0,0,0,0);var $16=Math.round($p0.getMarkProperty('x',$p1));var $17=Math.round($p0.getMarkProperty('y',$p1));var $18=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/2);var $19=2*$18;$15=tab.RectXYUtil.union($15,tab.$create_RectXY($16-$18,$17-$18,$19,$19));return $15;case 'shapeIDAsterisk':var $1A=tab.$create_RectXY(0,0,0,0);var $1B=Math.round($p0.getMarkProperty('x',$p1));var $1C=Math.round($p0.getMarkProperty('y',$p1));var $1D=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-0.5/12)))/2);var $1E=2*$1D;$1A=tab.RectXYUtil.union($1A,tab.$create_RectXY($1B-$1D,$1C-$1D,$1E,$1E));return $1A;case 'shapeIDPlus':var $1F=tab.$create_RectXY(0,0,0,0);var $20=Math.round($p0.getMarkProperty('x',$p1));var $21=Math.round($p0.getMarkProperty('y',$p1));var $22=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2);var $23=2*$22;$1F=tab.RectXYUtil.union($1F,tab.$create_RectXY($20-$22,$21-$22,$23,$23));return $1F;case 'shapeIDFilledPlus':var $24=tab.$create_RectXY(0,0,0,0);var $25=Math.round($p0.getMarkProperty('x',$p1));var $26=Math.round($p0.getMarkProperty('y',$p1));var $27=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/2);var $28=2*$27;$24=tab.RectXYUtil.union($24,tab.$create_RectXY($25-$27,$26-$27,$28,$28));return $24;case 'shapeIDTimes':var $29=tab.$create_RectXY(0,0,0,0);var $2A=Math.round($p0.getMarkProperty('x',$p1));var $2B=Math.round($p0.getMarkProperty('y',$p1));var $2C=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1.5/12)))/2);var $2D=2*$2C;$29=tab.RectXYUtil.union($29,tab.$create_RectXY($2A-$2C,$2B-$2C,$2D,$2D));return $29;case 'shapeIDFilledTimes':var $2E=tab.$create_RectXY(0,0,0,0);var $2F=Math.round($p0.getMarkProperty('x',$p1));var $30=Math.round($p0.getMarkProperty('y',$p1));var $31=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/2);var $32=2*$31;$2E=tab.RectXYUtil.union($2E,tab.$create_RectXY($2F-$31,$30-$31,$32,$32));return $2E;case 'shapeIDDiamond':var $33=tab.$create_RectXY(0,0,0,0);var $34=Math.round($p0.getMarkProperty('x',$p1));var $35=Math.round($p0.getMarkProperty('y',$p1));var $36=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(0.5/12)))/2);var $37=2*$36;$33=tab.RectXYUtil.union($33,tab.$create_RectXY($34-$36,$35-$36,$37,$37));return $33;case 'shapeIDFilledDiamond':var $38=tab.$create_RectXY(0,0,0,0);var $39=Math.round($p0.getMarkProperty('x',$p1));var $3A=Math.round($p0.getMarkProperty('y',$p1));var $3B=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(0.5/12)))/2);var $3C=2*$3B;$38=tab.RectXYUtil.union($38,tab.$create_RectXY($39-$3B,$3A-$3B,$3C,$3C));return $38;case 'shapeIDTriangle':var $3D=tab.$create_RectXY(0,0,0,0);var $3E=Math.round($p0.getMarkProperty('x',$p1));var $3F=Math.round($p0.getMarkProperty('y',$p1));var $40=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2);var $41=2*$40;$3D=tab.RectXYUtil.union($3D,tab.$create_RectXY($3E-$40,$3F-$40,$41,$41));return $3D;case 'shapeIDFilledTriangle':var $42=tab.$create_RectXY(0,0,0,0);var $43=Math.round($p0.getMarkProperty('x',$p1));var $44=Math.round($p0.getMarkProperty('y',$p1));var $45=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2);var $46=2*$45;$42=tab.RectXYUtil.union($42,tab.$create_RectXY($43-$45,$44-$45,$46,$46));return $42;case 'shapeIDDownTriangle':var $47=tab.$create_RectXY(0,0,0,0);var $48=Math.round($p0.getMarkProperty('x',$p1));var $49=Math.round($p0.getMarkProperty('y',$p1));var $4A=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2);var $4B=2*$4A;$47=tab.RectXYUtil.union($47,tab.$create_RectXY($48-$4A,$49-$4A,$4B,$4B));return $47;case 'shapeIDFilledDownTriangle':var $4C=tab.$create_RectXY(0,0,0,0);var $4D=Math.round($p0.getMarkProperty('x',$p1));var $4E=Math.round($p0.getMarkProperty('y',$p1));var $4F=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2);var $50=2*$4F;$4C=tab.RectXYUtil.union($4C,tab.$create_RectXY($4D-$4F,$4E-$4F,$50,$50));return $4C;case 'shapeIDLeftTriangle':var $51=tab.$create_RectXY(0,0,0,0);var $52=Math.round($p0.getMarkProperty('x',$p1));var $53=Math.round($p0.getMarkProperty('y',$p1));var $54=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2);var $55=2*$54;$51=tab.RectXYUtil.union($51,tab.$create_RectXY($52-$54,$53-$54,$55,$55));return $51;case 'shapeIDFilledLeftTriangle':var $56=tab.$create_RectXY(0,0,0,0);var $57=Math.round($p0.getMarkProperty('x',$p1));var $58=Math.round($p0.getMarkProperty('y',$p1));var $59=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2);var $5A=2*$59;$56=tab.RectXYUtil.union($56,tab.$create_RectXY($57-$59,$58-$59,$5A,$5A));return $56;case 'shapeIDRightTriangle':var $5B=tab.$create_RectXY(0,0,0,0);var $5C=Math.round($p0.getMarkProperty('x',$p1));var $5D=Math.round($p0.getMarkProperty('y',$p1));var $5E=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2);var $5F=2*$5E;$5B=tab.RectXYUtil.union($5B,tab.$create_RectXY($5C-$5E,$5D-$5E,$5F,$5F));return $5B;case 'shapeIDFilledRightTriangle':var $60=tab.$create_RectXY(0,0,0,0);var $61=Math.round($p0.getMarkProperty('x',$p1));var $62=Math.round($p0.getMarkProperty('y',$p1));var $63=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2);var $64=2*$63;$60=tab.RectXYUtil.union($60,tab.$create_RectXY($61-$63,$62-$63,$64,$64));return $60;case 'shapeIDFilledStar':var $65=tab.$create_RectXY(0,0,0,0);var $66=Math.round($p0.getMarkProperty('x',$p1));var $67=Math.round($p0.getMarkProperty('y',$p1));var $68=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))/2);var $69=2*$68;$65=tab.RectXYUtil.union($65,tab.$create_RectXY($66-$68,$67-$68,$69,$69));return $65;default:if($0>0){var $6A=Math.round($p0.getMarkProperty('x',$p1));var $6B=Math.round($p0.getMarkProperty('y',$p1));var $6C=Math.ceil($p0.getMarkProperty('size',$p1));var $6D=Math.ceil($6C/2);var $6E=tab.$create_RectXY($6A-$6D,$6B-$6D,$6C,$6C);return $6E;}break;}return tab.$create_RectXY(0,0,0,0);}
tab.MarksRenderer.$32=function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('shape_id',$p3);switch($0){case 'shapeIDCircle':if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)),($p0.getMarkProperty('width',$p3)*(1+(-0.5/12)))/2))){return true;}return false;case 'shapeIDFilledCircle':if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)),($p0.getMarkProperty('width',$p3)*(1+(-0.25/12)))/2))){return true;}return false;case 'shapeIDUnscaledFilledCircle':if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)),($p0.getMarkProperty('width',$p3))/2))){return true;}return false;case 'shapeIDSquare':var $1=(($p0.getMarkProperty('width',$p3)*(1+(-1.25/12)))/2);var $2=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$1,$p0.getMarkProperty('y',$p3)-$1,($p0.getMarkProperty('width',$p3)*(1+(-1.25/12))),($p0.getMarkProperty('width',$p3)*(1+(-1.25/12))));if(tab.DoubleRectXYUtil.inRect($2,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDFilledSquare':var $3=(($p0.getMarkProperty('width',$p3)*(1+(-0.75/12)))/2);var $4=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$3,$p0.getMarkProperty('y',$p3)-$3,($p0.getMarkProperty('width',$p3)*(1+(-0.75/12))),($p0.getMarkProperty('width',$p3)*(1+(-0.75/12))));if(tab.DoubleRectXYUtil.inRect($4,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDAsterisk':var $5=(($p0.getMarkProperty('width',$p3)*(1+(-0.5/12)))/2);var $6=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$5,$p0.getMarkProperty('y',$p3)-$5,($p0.getMarkProperty('width',$p3)*(1+(-0.5/12))),($p0.getMarkProperty('width',$p3)*(1+(-0.5/12))));if(tab.DoubleRectXYUtil.inRect($6,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDPlus':var $7=(($p0.getMarkProperty('width',$p3)*(1+(-1/12)))/2);var $8=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$7,$p0.getMarkProperty('y',$p3)-$7,($p0.getMarkProperty('width',$p3)*(1+(-1/12))),($p0.getMarkProperty('width',$p3)*(1+(-1/12))));if(tab.DoubleRectXYUtil.inRect($8,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDFilledPlus':var $9=(($p0.getMarkProperty('width',$p3)*(1+(-0.75/12)))/2);var $A=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$9,$p0.getMarkProperty('y',$p3)-$9,($p0.getMarkProperty('width',$p3)*(1+(-0.75/12))),($p0.getMarkProperty('width',$p3)*(1+(-0.75/12))));if(tab.DoubleRectXYUtil.inRect($A,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDTimes':var $B=(($p0.getMarkProperty('width',$p3)*(1+(-1.5/12)))/2);var $C=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$B,$p0.getMarkProperty('y',$p3)-$B,($p0.getMarkProperty('width',$p3)*(1+(-1.5/12))),($p0.getMarkProperty('width',$p3)*(1+(-1.5/12))));if(tab.DoubleRectXYUtil.inRect($C,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDFilledTimes':var $D=(($p0.getMarkProperty('width',$p3)*(1+(-0.75/12)))/2);var $E=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$D,$p0.getMarkProperty('y',$p3)-$D,($p0.getMarkProperty('width',$p3)*(1+(-0.75/12))),($p0.getMarkProperty('width',$p3)*(1+(-0.75/12))));if(tab.DoubleRectXYUtil.inRect($E,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDDiamond':var $F=(($p0.getMarkProperty('width',$p3)*(1+(0.5/12)))/2);var $10=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$F,$p0.getMarkProperty('y',$p3)-$F,($p0.getMarkProperty('width',$p3)*(1+(0.5/12))),($p0.getMarkProperty('width',$p3)*(1+(0.5/12))));if(tab.DoubleRectXYUtil.inRect($10,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDFilledDiamond':var $11=(($p0.getMarkProperty('width',$p3)*(1+(0.5/12)))/2);var $12=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$11,$p0.getMarkProperty('y',$p3)-$11,($p0.getMarkProperty('width',$p3)*(1+(0.5/12))),($p0.getMarkProperty('width',$p3)*(1+(0.5/12))));if(tab.DoubleRectXYUtil.inRect($12,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDTriangle':var $13=(($p0.getMarkProperty('width',$p3)*(1+(-1.25/12)))/2);var $14=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$13,$p0.getMarkProperty('y',$p3)-$13,($p0.getMarkProperty('width',$p3)*(1+(-1.25/12))),($p0.getMarkProperty('width',$p3)*(1+(-1.25/12))));if(tab.DoubleRectXYUtil.inRect($14,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDFilledTriangle':var $15=(($p0.getMarkProperty('width',$p3)*(1+(-1/12)))/2);var $16=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$15,$p0.getMarkProperty('y',$p3)-$15,($p0.getMarkProperty('width',$p3)*(1+(-1/12))),($p0.getMarkProperty('width',$p3)*(1+(-1/12))));if(tab.DoubleRectXYUtil.inRect($16,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDDownTriangle':var $17=(($p0.getMarkProperty('width',$p3)*(1+(-1.25/12)))/2);var $18=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$17,$p0.getMarkProperty('y',$p3)-$17,($p0.getMarkProperty('width',$p3)*(1+(-1.25/12))),($p0.getMarkProperty('width',$p3)*(1+(-1.25/12))));if(tab.DoubleRectXYUtil.inRect($18,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDFilledDownTriangle':var $19=(($p0.getMarkProperty('width',$p3)*(1+(-1/12)))/2);var $1A=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$19,$p0.getMarkProperty('y',$p3)-$19,($p0.getMarkProperty('width',$p3)*(1+(-1/12))),($p0.getMarkProperty('width',$p3)*(1+(-1/12))));if(tab.DoubleRectXYUtil.inRect($1A,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDLeftTriangle':var $1B=(($p0.getMarkProperty('width',$p3)*(1+(-1.25/12)))/2);var $1C=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$1B,$p0.getMarkProperty('y',$p3)-$1B,($p0.getMarkProperty('width',$p3)*(1+(-1.25/12))),($p0.getMarkProperty('width',$p3)*(1+(-1.25/12))));if(tab.DoubleRectXYUtil.inRect($1C,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDFilledLeftTriangle':var $1D=(($p0.getMarkProperty('width',$p3)*(1+(-1/12)))/2);var $1E=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$1D,$p0.getMarkProperty('y',$p3)-$1D,($p0.getMarkProperty('width',$p3)*(1+(-1/12))),($p0.getMarkProperty('width',$p3)*(1+(-1/12))));if(tab.DoubleRectXYUtil.inRect($1E,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDRightTriangle':var $1F=(($p0.getMarkProperty('width',$p3)*(1+(-1.25/12)))/2);var $20=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$1F,$p0.getMarkProperty('y',$p3)-$1F,($p0.getMarkProperty('width',$p3)*(1+(-1.25/12))),($p0.getMarkProperty('width',$p3)*(1+(-1.25/12))));if(tab.DoubleRectXYUtil.inRect($20,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDFilledRightTriangle':var $21=(($p0.getMarkProperty('width',$p3)*(1+(-1/12)))/2);var $22=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$21,$p0.getMarkProperty('y',$p3)-$21,($p0.getMarkProperty('width',$p3)*(1+(-1/12))),($p0.getMarkProperty('width',$p3)*(1+(-1/12))));if(tab.DoubleRectXYUtil.inRect($22,tab.$create_PointF($p1,$p2))){return true;}return false;case 'shapeIDFilledStar':var $23=(($p0.getMarkProperty('width',$p3)*(1+(1.1/12)))/2);var $24=tab.$create_DoubleRectXY($p0.getMarkProperty('x',$p3)-$23,$p0.getMarkProperty('y',$p3)-$23,($p0.getMarkProperty('width',$p3)*(1+(1.1/12))),($p0.getMarkProperty('width',$p3)*(1+(1.1/12))));if(tab.DoubleRectXYUtil.inRect($24,tab.$create_PointF($p1,$p2))){return true;}return false;default:break;}return true;}
tab.MarksRenderer.$33=function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('shape_id',$p3);switch($0){case 'shapeIDCircle':return true;case 'shapeIDFilledCircle':return true;case 'shapeIDUnscaledFilledCircle':return true;case 'shapeIDSquare':return true;case 'shapeIDFilledSquare':return true;case 'shapeIDAsterisk':return true;case 'shapeIDPlus':return true;case 'shapeIDFilledPlus':return true;case 'shapeIDTimes':return true;case 'shapeIDFilledTimes':return true;case 'shapeIDDiamond':return true;case 'shapeIDFilledDiamond':return true;case 'shapeIDTriangle':return true;case 'shapeIDFilledTriangle':return true;case 'shapeIDDownTriangle':return true;case 'shapeIDFilledDownTriangle':return true;case 'shapeIDLeftTriangle':return true;case 'shapeIDFilledLeftTriangle':return true;case 'shapeIDRightTriangle':return true;case 'shapeIDFilledRightTriangle':return true;case 'shapeIDFilledStar':return true;default:break;}return false;}
tab.MarksRenderer.$34=function($p0,$p1){var $0=tab.$create_SizeF(0,0);$0=tab.$create_SizeF(10,10);return $0;}
tab.MarksRenderer.$35=function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('shape_id',$p3);switch($0){case 'shapeIDCircle':var $1=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($1,tab.$create_PointF($p1,$p2));case 'shapeIDFilledCircle':var $2=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($2,tab.$create_PointF($p1,$p2));case 'shapeIDUnscaledFilledCircle':var $3=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($3,tab.$create_PointF($p1,$p2));case 'shapeIDSquare':var $4=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($4,tab.$create_PointF($p1,$p2));case 'shapeIDFilledSquare':var $5=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($5,tab.$create_PointF($p1,$p2));case 'shapeIDAsterisk':var $6=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($6,tab.$create_PointF($p1,$p2));case 'shapeIDPlus':var $7=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($7,tab.$create_PointF($p1,$p2));case 'shapeIDFilledPlus':var $8=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($8,tab.$create_PointF($p1,$p2));case 'shapeIDTimes':var $9=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($9,tab.$create_PointF($p1,$p2));case 'shapeIDFilledTimes':var $A=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($A,tab.$create_PointF($p1,$p2));case 'shapeIDDiamond':var $B=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($B,tab.$create_PointF($p1,$p2));case 'shapeIDFilledDiamond':var $C=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($C,tab.$create_PointF($p1,$p2));case 'shapeIDTriangle':var $D=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($D,tab.$create_PointF($p1,$p2));case 'shapeIDFilledTriangle':var $E=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($E,tab.$create_PointF($p1,$p2));case 'shapeIDDownTriangle':var $F=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($F,tab.$create_PointF($p1,$p2));case 'shapeIDFilledDownTriangle':var $10=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($10,tab.$create_PointF($p1,$p2));case 'shapeIDLeftTriangle':var $11=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($11,tab.$create_PointF($p1,$p2));case 'shapeIDFilledLeftTriangle':var $12=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($12,tab.$create_PointF($p1,$p2));case 'shapeIDRightTriangle':var $13=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($13,tab.$create_PointF($p1,$p2));case 'shapeIDFilledRightTriangle':var $14=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($14,tab.$create_PointF($p1,$p2));case 'shapeIDFilledStar':var $15=$p0.getMarkBounds($p3);return tab.GeometryUtil.getSquaredDistanceToCircumference($15,tab.$create_PointF($p1,$p2));default:break;}return tab.GeometryUtil.getSquaredDistanceToCenter($p0.getMarkBounds($p3),tab.$create_PointF($p1,$p2));}
tab.MarksRenderer.$36=function($p0,$p1,$p2){var $0=$p0.getMarkProperty('shape_id',$p2);switch($0){case 'shapeIDCircle':return tab.GeometryUtil.circleIntersectsRect(tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2)),($p0.getMarkProperty('width',$p2)*(1+(-0.5/12)))/2),$p1);case 'shapeIDFilledCircle':return tab.GeometryUtil.circleIntersectsRect(tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2)),($p0.getMarkProperty('width',$p2)*(1+(-0.25/12)))/2),$p1);case 'shapeIDUnscaledFilledCircle':return tab.GeometryUtil.circleIntersectsRect(tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2)),($p0.getMarkProperty('width',$p2))/2),$p1);case 'shapeIDSquare':return true;case 'shapeIDFilledSquare':return true;case 'shapeIDAsterisk':return true;case 'shapeIDPlus':return true;case 'shapeIDFilledPlus':return true;case 'shapeIDTimes':return true;case 'shapeIDFilledTimes':return true;case 'shapeIDDiamond':return true;case 'shapeIDFilledDiamond':return true;case 'shapeIDTriangle':return true;case 'shapeIDFilledTriangle':return true;case 'shapeIDDownTriangle':return true;case 'shapeIDFilledDownTriangle':return true;case 'shapeIDLeftTriangle':return true;case 'shapeIDFilledLeftTriangle':return true;case 'shapeIDRightTriangle':return true;case 'shapeIDFilledRightTriangle':return true;case 'shapeIDFilledStar':return true;default:break;}return true;}
tab.MarksRenderer.$37=function($p0,$p1,$p2){var $0=$p0.getMarkProperty('shape_id',$p2);switch($0){case 'shapeIDCircle':return tab.GeometryUtil.circleIntersectsCircle(tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2)),($p0.getMarkProperty('width',$p2)*(1+(-0.5/12)))/2),$p1);case 'shapeIDFilledCircle':return tab.GeometryUtil.circleIntersectsCircle(tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2)),($p0.getMarkProperty('width',$p2)*(1+(-0.25/12)))/2),$p1);case 'shapeIDUnscaledFilledCircle':return tab.GeometryUtil.circleIntersectsCircle(tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2)),($p0.getMarkProperty('width',$p2))/2),$p1);case 'shapeIDSquare':var $1=tab.$create_RectXY(0,0,0,0);var $2=Math.round($p0.getMarkProperty('x',$p2));var $3=Math.round($p0.getMarkProperty('y',$p2));var $4=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1.25/12)))/2);var $5=2*$4;$1=tab.RectXYUtil.union($1,tab.$create_RectXY($2-$4,$3-$4,$5,$5));return tab.GeometryUtil.circleIntersectsRect($p1,$1);case 'shapeIDFilledSquare':var $6=tab.$create_RectXY(0,0,0,0);var $7=Math.round($p0.getMarkProperty('x',$p2));var $8=Math.round($p0.getMarkProperty('y',$p2));var $9=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-0.75/12)))/2);var $A=2*$9;$6=tab.RectXYUtil.union($6,tab.$create_RectXY($7-$9,$8-$9,$A,$A));return tab.GeometryUtil.circleIntersectsRect($p1,$6);case 'shapeIDAsterisk':var $B=tab.$create_RectXY(0,0,0,0);var $C=Math.round($p0.getMarkProperty('x',$p2));var $D=Math.round($p0.getMarkProperty('y',$p2));var $E=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-0.5/12)))/2);var $F=2*$E;$B=tab.RectXYUtil.union($B,tab.$create_RectXY($C-$E,$D-$E,$F,$F));return tab.GeometryUtil.circleIntersectsRect($p1,$B);case 'shapeIDPlus':var $10=tab.$create_RectXY(0,0,0,0);var $11=Math.round($p0.getMarkProperty('x',$p2));var $12=Math.round($p0.getMarkProperty('y',$p2));var $13=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1/12)))/2);var $14=2*$13;$10=tab.RectXYUtil.union($10,tab.$create_RectXY($11-$13,$12-$13,$14,$14));return tab.GeometryUtil.circleIntersectsRect($p1,$10);case 'shapeIDFilledPlus':var $15=tab.$create_RectXY(0,0,0,0);var $16=Math.round($p0.getMarkProperty('x',$p2));var $17=Math.round($p0.getMarkProperty('y',$p2));var $18=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-0.75/12)))/2);var $19=2*$18;$15=tab.RectXYUtil.union($15,tab.$create_RectXY($16-$18,$17-$18,$19,$19));return tab.GeometryUtil.circleIntersectsRect($p1,$15);case 'shapeIDTimes':var $1A=tab.$create_RectXY(0,0,0,0);var $1B=Math.round($p0.getMarkProperty('x',$p2));var $1C=Math.round($p0.getMarkProperty('y',$p2));var $1D=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1.5/12)))/2);var $1E=2*$1D;$1A=tab.RectXYUtil.union($1A,tab.$create_RectXY($1B-$1D,$1C-$1D,$1E,$1E));return tab.GeometryUtil.circleIntersectsRect($p1,$1A);case 'shapeIDFilledTimes':var $1F=tab.$create_RectXY(0,0,0,0);var $20=Math.round($p0.getMarkProperty('x',$p2));var $21=Math.round($p0.getMarkProperty('y',$p2));var $22=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-0.75/12)))/2);var $23=2*$22;$1F=tab.RectXYUtil.union($1F,tab.$create_RectXY($20-$22,$21-$22,$23,$23));return tab.GeometryUtil.circleIntersectsRect($p1,$1F);case 'shapeIDDiamond':var $24=tab.$create_RectXY(0,0,0,0);var $25=Math.round($p0.getMarkProperty('x',$p2));var $26=Math.round($p0.getMarkProperty('y',$p2));var $27=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(0.5/12)))/2);var $28=2*$27;$24=tab.RectXYUtil.union($24,tab.$create_RectXY($25-$27,$26-$27,$28,$28));return tab.GeometryUtil.circleIntersectsRect($p1,$24);case 'shapeIDFilledDiamond':var $29=tab.$create_RectXY(0,0,0,0);var $2A=Math.round($p0.getMarkProperty('x',$p2));var $2B=Math.round($p0.getMarkProperty('y',$p2));var $2C=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(0.5/12)))/2);var $2D=2*$2C;$29=tab.RectXYUtil.union($29,tab.$create_RectXY($2A-$2C,$2B-$2C,$2D,$2D));return tab.GeometryUtil.circleIntersectsRect($p1,$29);case 'shapeIDTriangle':var $2E=tab.$create_RectXY(0,0,0,0);var $2F=Math.round($p0.getMarkProperty('x',$p2));var $30=Math.round($p0.getMarkProperty('y',$p2));var $31=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1.25/12)))/2);var $32=2*$31;$2E=tab.RectXYUtil.union($2E,tab.$create_RectXY($2F-$31,$30-$31,$32,$32));return tab.GeometryUtil.circleIntersectsRect($p1,$2E);case 'shapeIDFilledTriangle':var $33=tab.$create_RectXY(0,0,0,0);var $34=Math.round($p0.getMarkProperty('x',$p2));var $35=Math.round($p0.getMarkProperty('y',$p2));var $36=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1/12)))/2);var $37=2*$36;$33=tab.RectXYUtil.union($33,tab.$create_RectXY($34-$36,$35-$36,$37,$37));return tab.GeometryUtil.circleIntersectsRect($p1,$33);case 'shapeIDDownTriangle':var $38=tab.$create_RectXY(0,0,0,0);var $39=Math.round($p0.getMarkProperty('x',$p2));var $3A=Math.round($p0.getMarkProperty('y',$p2));var $3B=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1.25/12)))/2);var $3C=2*$3B;$38=tab.RectXYUtil.union($38,tab.$create_RectXY($39-$3B,$3A-$3B,$3C,$3C));return tab.GeometryUtil.circleIntersectsRect($p1,$38);case 'shapeIDFilledDownTriangle':var $3D=tab.$create_RectXY(0,0,0,0);var $3E=Math.round($p0.getMarkProperty('x',$p2));var $3F=Math.round($p0.getMarkProperty('y',$p2));var $40=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1/12)))/2);var $41=2*$40;$3D=tab.RectXYUtil.union($3D,tab.$create_RectXY($3E-$40,$3F-$40,$41,$41));return tab.GeometryUtil.circleIntersectsRect($p1,$3D);case 'shapeIDLeftTriangle':var $42=tab.$create_RectXY(0,0,0,0);var $43=Math.round($p0.getMarkProperty('x',$p2));var $44=Math.round($p0.getMarkProperty('y',$p2));var $45=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1.25/12)))/2);var $46=2*$45;$42=tab.RectXYUtil.union($42,tab.$create_RectXY($43-$45,$44-$45,$46,$46));return tab.GeometryUtil.circleIntersectsRect($p1,$42);case 'shapeIDFilledLeftTriangle':var $47=tab.$create_RectXY(0,0,0,0);var $48=Math.round($p0.getMarkProperty('x',$p2));var $49=Math.round($p0.getMarkProperty('y',$p2));var $4A=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1/12)))/2);var $4B=2*$4A;$47=tab.RectXYUtil.union($47,tab.$create_RectXY($48-$4A,$49-$4A,$4B,$4B));return tab.GeometryUtil.circleIntersectsRect($p1,$47);case 'shapeIDRightTriangle':var $4C=tab.$create_RectXY(0,0,0,0);var $4D=Math.round($p0.getMarkProperty('x',$p2));var $4E=Math.round($p0.getMarkProperty('y',$p2));var $4F=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1.25/12)))/2);var $50=2*$4F;$4C=tab.RectXYUtil.union($4C,tab.$create_RectXY($4D-$4F,$4E-$4F,$50,$50));return tab.GeometryUtil.circleIntersectsRect($p1,$4C);case 'shapeIDFilledRightTriangle':var $51=tab.$create_RectXY(0,0,0,0);var $52=Math.round($p0.getMarkProperty('x',$p2));var $53=Math.round($p0.getMarkProperty('y',$p2));var $54=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1/12)))/2);var $55=2*$54;$51=tab.RectXYUtil.union($51,tab.$create_RectXY($52-$54,$53-$54,$55,$55));return tab.GeometryUtil.circleIntersectsRect($p1,$51);case 'shapeIDFilledStar':var $56=tab.$create_RectXY(0,0,0,0);var $57=Math.round($p0.getMarkProperty('x',$p2));var $58=Math.round($p0.getMarkProperty('y',$p2));var $59=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(1.1/12)))/2);var $5A=2*$59;$56=tab.RectXYUtil.union($56,tab.$create_RectXY($57-$59,$58-$59,$5A,$5A));return tab.GeometryUtil.circleIntersectsRect($p1,$56);default:var $5B=Math.round($p0.getMarkProperty('x',$p2));var $5C=Math.round($p0.getMarkProperty('y',$p2));var $5D=Math.ceil($p0.getMarkProperty('size',$p2));var $5E=Math.ceil($5D/2);var $5F=tab.$create_RectXY($5B-$5E,$5C-$5E,$5D,$5D);return tab.GeometryUtil.circleIntersectsRect($p1,$5F);}}
tab.MarksRenderer.$38=function($p0,$p1,$p2){var $0=$p0.getMarkProperty('shape_id',$p2);switch($0){case 'shapeIDCircle':return tab.GeometryUtil.polygonIntersectsCircle($p1,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2)),($p0.getMarkProperty('width',$p2)*(1+(-0.5/12)))/2));case 'shapeIDFilledCircle':return tab.GeometryUtil.polygonIntersectsCircle($p1,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2)),($p0.getMarkProperty('width',$p2)*(1+(-0.25/12)))/2));case 'shapeIDUnscaledFilledCircle':return tab.GeometryUtil.polygonIntersectsCircle($p1,tab.$create_Circle(tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2)),($p0.getMarkProperty('width',$p2))/2));case 'shapeIDSquare':var $1=tab.$create_RectXY(0,0,0,0);var $2=Math.round($p0.getMarkProperty('x',$p2));var $3=Math.round($p0.getMarkProperty('y',$p2));var $4=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1.25/12)))/2);var $5=2*$4;$1=tab.RectXYUtil.union($1,tab.$create_RectXY($2-$4,$3-$4,$5,$5));return tab.GeometryUtil.polygonIntersectsRect($p1,$1);case 'shapeIDFilledSquare':var $6=tab.$create_RectXY(0,0,0,0);var $7=Math.round($p0.getMarkProperty('x',$p2));var $8=Math.round($p0.getMarkProperty('y',$p2));var $9=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-0.75/12)))/2);var $A=2*$9;$6=tab.RectXYUtil.union($6,tab.$create_RectXY($7-$9,$8-$9,$A,$A));return tab.GeometryUtil.polygonIntersectsRect($p1,$6);case 'shapeIDAsterisk':var $B=tab.$create_RectXY(0,0,0,0);var $C=Math.round($p0.getMarkProperty('x',$p2));var $D=Math.round($p0.getMarkProperty('y',$p2));var $E=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-0.5/12)))/2);var $F=2*$E;$B=tab.RectXYUtil.union($B,tab.$create_RectXY($C-$E,$D-$E,$F,$F));return tab.GeometryUtil.polygonIntersectsRect($p1,$B);case 'shapeIDPlus':var $10=tab.$create_RectXY(0,0,0,0);var $11=Math.round($p0.getMarkProperty('x',$p2));var $12=Math.round($p0.getMarkProperty('y',$p2));var $13=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1/12)))/2);var $14=2*$13;$10=tab.RectXYUtil.union($10,tab.$create_RectXY($11-$13,$12-$13,$14,$14));return tab.GeometryUtil.polygonIntersectsRect($p1,$10);case 'shapeIDFilledPlus':var $15=tab.$create_RectXY(0,0,0,0);var $16=Math.round($p0.getMarkProperty('x',$p2));var $17=Math.round($p0.getMarkProperty('y',$p2));var $18=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-0.75/12)))/2);var $19=2*$18;$15=tab.RectXYUtil.union($15,tab.$create_RectXY($16-$18,$17-$18,$19,$19));return tab.GeometryUtil.polygonIntersectsRect($p1,$15);case 'shapeIDTimes':var $1A=tab.$create_RectXY(0,0,0,0);var $1B=Math.round($p0.getMarkProperty('x',$p2));var $1C=Math.round($p0.getMarkProperty('y',$p2));var $1D=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1.5/12)))/2);var $1E=2*$1D;$1A=tab.RectXYUtil.union($1A,tab.$create_RectXY($1B-$1D,$1C-$1D,$1E,$1E));return tab.GeometryUtil.polygonIntersectsRect($p1,$1A);case 'shapeIDFilledTimes':var $1F=tab.$create_RectXY(0,0,0,0);var $20=Math.round($p0.getMarkProperty('x',$p2));var $21=Math.round($p0.getMarkProperty('y',$p2));var $22=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-0.75/12)))/2);var $23=2*$22;$1F=tab.RectXYUtil.union($1F,tab.$create_RectXY($20-$22,$21-$22,$23,$23));return tab.GeometryUtil.polygonIntersectsRect($p1,$1F);case 'shapeIDDiamond':var $24=tab.$create_RectXY(0,0,0,0);var $25=Math.round($p0.getMarkProperty('x',$p2));var $26=Math.round($p0.getMarkProperty('y',$p2));var $27=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(0.5/12)))/2);var $28=2*$27;$24=tab.RectXYUtil.union($24,tab.$create_RectXY($25-$27,$26-$27,$28,$28));return tab.GeometryUtil.polygonIntersectsRect($p1,$24);case 'shapeIDFilledDiamond':var $29=tab.$create_RectXY(0,0,0,0);var $2A=Math.round($p0.getMarkProperty('x',$p2));var $2B=Math.round($p0.getMarkProperty('y',$p2));var $2C=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(0.5/12)))/2);var $2D=2*$2C;$29=tab.RectXYUtil.union($29,tab.$create_RectXY($2A-$2C,$2B-$2C,$2D,$2D));return tab.GeometryUtil.polygonIntersectsRect($p1,$29);case 'shapeIDTriangle':var $2E=tab.$create_RectXY(0,0,0,0);var $2F=Math.round($p0.getMarkProperty('x',$p2));var $30=Math.round($p0.getMarkProperty('y',$p2));var $31=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1.25/12)))/2);var $32=2*$31;$2E=tab.RectXYUtil.union($2E,tab.$create_RectXY($2F-$31,$30-$31,$32,$32));return tab.GeometryUtil.polygonIntersectsRect($p1,$2E);case 'shapeIDFilledTriangle':var $33=tab.$create_RectXY(0,0,0,0);var $34=Math.round($p0.getMarkProperty('x',$p2));var $35=Math.round($p0.getMarkProperty('y',$p2));var $36=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1/12)))/2);var $37=2*$36;$33=tab.RectXYUtil.union($33,tab.$create_RectXY($34-$36,$35-$36,$37,$37));return tab.GeometryUtil.polygonIntersectsRect($p1,$33);case 'shapeIDDownTriangle':var $38=tab.$create_RectXY(0,0,0,0);var $39=Math.round($p0.getMarkProperty('x',$p2));var $3A=Math.round($p0.getMarkProperty('y',$p2));var $3B=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1.25/12)))/2);var $3C=2*$3B;$38=tab.RectXYUtil.union($38,tab.$create_RectXY($39-$3B,$3A-$3B,$3C,$3C));return tab.GeometryUtil.polygonIntersectsRect($p1,$38);case 'shapeIDFilledDownTriangle':var $3D=tab.$create_RectXY(0,0,0,0);var $3E=Math.round($p0.getMarkProperty('x',$p2));var $3F=Math.round($p0.getMarkProperty('y',$p2));var $40=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1/12)))/2);var $41=2*$40;$3D=tab.RectXYUtil.union($3D,tab.$create_RectXY($3E-$40,$3F-$40,$41,$41));return tab.GeometryUtil.polygonIntersectsRect($p1,$3D);case 'shapeIDLeftTriangle':var $42=tab.$create_RectXY(0,0,0,0);var $43=Math.round($p0.getMarkProperty('x',$p2));var $44=Math.round($p0.getMarkProperty('y',$p2));var $45=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1.25/12)))/2);var $46=2*$45;$42=tab.RectXYUtil.union($42,tab.$create_RectXY($43-$45,$44-$45,$46,$46));return tab.GeometryUtil.polygonIntersectsRect($p1,$42);case 'shapeIDFilledLeftTriangle':var $47=tab.$create_RectXY(0,0,0,0);var $48=Math.round($p0.getMarkProperty('x',$p2));var $49=Math.round($p0.getMarkProperty('y',$p2));var $4A=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1/12)))/2);var $4B=2*$4A;$47=tab.RectXYUtil.union($47,tab.$create_RectXY($48-$4A,$49-$4A,$4B,$4B));return tab.GeometryUtil.polygonIntersectsRect($p1,$47);case 'shapeIDRightTriangle':var $4C=tab.$create_RectXY(0,0,0,0);var $4D=Math.round($p0.getMarkProperty('x',$p2));var $4E=Math.round($p0.getMarkProperty('y',$p2));var $4F=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1.25/12)))/2);var $50=2*$4F;$4C=tab.RectXYUtil.union($4C,tab.$create_RectXY($4D-$4F,$4E-$4F,$50,$50));return tab.GeometryUtil.polygonIntersectsRect($p1,$4C);case 'shapeIDFilledRightTriangle':var $51=tab.$create_RectXY(0,0,0,0);var $52=Math.round($p0.getMarkProperty('x',$p2));var $53=Math.round($p0.getMarkProperty('y',$p2));var $54=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(-1/12)))/2);var $55=2*$54;$51=tab.RectXYUtil.union($51,tab.$create_RectXY($52-$54,$53-$54,$55,$55));return tab.GeometryUtil.polygonIntersectsRect($p1,$51);case 'shapeIDFilledStar':var $56=tab.$create_RectXY(0,0,0,0);var $57=Math.round($p0.getMarkProperty('x',$p2));var $58=Math.round($p0.getMarkProperty('y',$p2));var $59=Math.ceil(($p0.getMarkProperty('width',$p2)*(1+(1.1/12)))/2);var $5A=2*$59;$56=tab.RectXYUtil.union($56,tab.$create_RectXY($57-$59,$58-$59,$5A,$5A));return tab.GeometryUtil.polygonIntersectsRect($p1,$56);default:var $5B=Math.round($p0.getMarkProperty('x',$p2));var $5C=Math.round($p0.getMarkProperty('y',$p2));var $5D=Math.ceil($p0.getMarkProperty('size',$p2));var $5E=Math.ceil($5D/2);var $5F=tab.$create_RectXY($5B-$5E,$5C-$5E,$5D,$5D);return tab.GeometryUtil.polygonIntersectsRect($p1,$5F);}}
tab.MarksRenderer.$3B=function($p0,$p1,$p2){if($p1.get_isWrappedDomain()){var $0=$p1.getMarkBounds($p2);var $1=$p1.pixelToDomainX($0.x);var $2=$p1.pixelToDomainX($0.x+$0.w);var $3=$p1.getMarkInstances($1,$2);for(var $4=$3.first;$4<=$3.second;++$4){$p0.save();$p0.translate($p1.getWorldOffset($4),0);$p0.save();var $5=tab.CanvasRenderer.get_multipolyLineSizeOffset();tab.CanvasRenderer.createMultipolygonPath($p0,$p1.hasPixelGeometry,$p1.getMarkProperty('x',$p2),$p1.getMarkProperty('y',$p2),$p1.getMarkProperty('size',$p2),7,$p1.getMarkGeometry($p1.getMarkProperty('geometry',$p2)));$p0.set_lineWidth(1.75-$5);$p0.set_strokeStyle(($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone']);$p0.stroke();$p0.restore();$p0.restore();}}else{$p0.save();var $6=tab.CanvasRenderer.get_multipolyLineSizeOffset();tab.CanvasRenderer.createMultipolygonPath($p0,$p1.hasPixelGeometry,$p1.getMarkProperty('x',$p2),$p1.getMarkProperty('y',$p2),$p1.getMarkProperty('size',$p2),7,$p1.getMarkGeometry($p1.getMarkProperty('geometry',$p2)));$p0.set_lineWidth(1.75-$6);$p0.set_strokeStyle(($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone']);$p0.stroke();$p0.restore();}}
tab.MarksRenderer.$3C=function($p0,$p1,$p2){if($p1.get_isWrappedDomain()){var $0=$p1.getMarkBounds($p2);var $1=$p1.pixelToDomainX($0.x);var $2=$p1.pixelToDomainX($0.x+$0.w);var $3=$p1.getMarkInstances($1,$2);for(var $4=$3.first;$4<=$3.second;++$4){$p0.save();$p0.translate($p1.getWorldOffset($4),0);$p0.save();var $5=tab.CanvasRenderer.get_multipolyLineSizeOffset();tab.CanvasRenderer.createMultipolygonPath($p0,$p1.hasPixelGeometry,$p1.getMarkProperty('x',$p2),$p1.getMarkProperty('y',$p2),$p1.getMarkProperty('size',$p2),7,$p1.getMarkGeometry($p1.getMarkProperty('geometry',$p2)));$p0.set_lineWidth(2.5-$5);$p0.set_strokeStyle(($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone']);$p0.stroke();$p0.restore();$p0.restore();}}else{$p0.save();var $6=tab.CanvasRenderer.get_multipolyLineSizeOffset();tab.CanvasRenderer.createMultipolygonPath($p0,$p1.hasPixelGeometry,$p1.getMarkProperty('x',$p2),$p1.getMarkProperty('y',$p2),$p1.getMarkProperty('size',$p2),7,$p1.getMarkGeometry($p1.getMarkProperty('geometry',$p2)));$p0.set_lineWidth(2.5-$6);$p0.set_strokeStyle(($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone']);$p0.stroke();$p0.restore();}}
tab.MarksRenderer.$3F=function($p0,$p1,$p2){var $0=$p1.getMarkIndexFromTupleID($p2);var $1=false;if($0-1>0&&!$p1.isMarkEndPrimitive($0-1)){$1=$1||$p1.isMarkHighlighted($0-1);}if(($0+1)<$p1.get_markCount()&&!$p1.isMarkEndPrimitive($0)){$1=$1||$p1.isMarkHighlighted($0+1);}var $2;var $3=$p1.getMarkProperty('x',$0);var $4=$p1.getMarkProperty('y',$0);if($p1.isMarkSelected($0)){$2=($p1.getMarkProperty('selected_halo_color',$0))['colorOverrideOpaque'];var $5=$p1.getMarkProperty('draw_border',$0);var $6=(!!$5)?2:0;var $7=(5+2)+$6;tab.CanvasRenderer.renderCircle($p0,0+$3,0+$4,$7,$2,4);$2=($p1.getMarkProperty('color',$0))['colorOverrideOpaque'];if($p1.get_isWrappedDomain()){var $8=$p1.getMarkBounds($0);var $9=$p1.pixelToDomainX($8.x);var $A=$p1.pixelToDomainX($8.x+$8.w);var $B=$p1.getMarkInstances($9,$A);for(var $C=$B.first;$C<=$B.second;++$C){$p0.save();$p0.translate($p1.getWorldOffset($C),0);var $D=(5+2);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$D,$2);$p0.restore();}}else{var $E=(5+2);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$E,$2);}$3=$p1.getMarkProperty('x1',$0);$4=$p1.getMarkProperty('y1',$0);$2=($p1.getMarkProperty('selected_halo_color',$0))['colorOverrideOpaque'];var $F=$p1.getMarkProperty('draw_border',$0);var $10=(!!$F)?2:0;var $11=(5+2)+$10;tab.CanvasRenderer.renderCircle($p0,0+$3,0+$4,$11,$2,4);$2=($p1.getMarkProperty('color',$0))['colorOverrideOpaque'];if($p1.get_isWrappedDomain()){var $12=$p1.getMarkBounds($0);var $13=$p1.pixelToDomainX($12.x);var $14=$p1.pixelToDomainX($12.x+$12.w);var $15=$p1.getMarkInstances($13,$14);for(var $16=$15.first;$16<=$15.second;++$16){$p0.save();$p0.translate($p1.getWorldOffset($16),0);var $17=(5+2);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$17,$2);$p0.restore();}}else{var $18=(5+2);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$18,$2);}}else if($p1.isMarkHighlighted($0)&&!$1){$2=($p1.getMarkProperty('selected_multi_prim_halo_color',$0))['colorOverrideNone'];if($p1.get_isWrappedDomain()){var $19=$p1.getMarkBounds($0);var $1A=$p1.pixelToDomainX($19.x);var $1B=$p1.pixelToDomainX($19.x+$19.w);var $1C=$p1.getMarkInstances($1A,$1B);for(var $1D=$1C.first;$1D<=$1C.second;++$1D){$p0.save();$p0.translate($p1.getWorldOffset($1D),0);var $1E=$p1.getMarkProperty('draw_border',$0);var $1F=(!!$1E)?2:0;var $20=(5+2)+$1F;tab.CanvasRenderer.renderCircle($p0,0+$3,0+$4,$20,$2,4);$p0.restore();}}else{var $21=$p1.getMarkProperty('draw_border',$0);var $22=(!!$21)?2:0;var $23=(5+2)+$22;tab.CanvasRenderer.renderCircle($p0,0+$3,0+$4,$23,$2,4);}$2=($p1.getMarkProperty('color',$0))['colorOverrideNone'];if($p1.get_isWrappedDomain()){var $24=$p1.getMarkBounds($0);var $25=$p1.pixelToDomainX($24.x);var $26=$p1.pixelToDomainX($24.x+$24.w);var $27=$p1.getMarkInstances($25,$26);for(var $28=$27.first;$28<=$27.second;++$28){$p0.save();$p0.translate($p1.getWorldOffset($28),0);var $29=(5+2);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$29,$2);$p0.restore();}}else{var $2A=(5+2);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$2A,$2);}$3=$p1.getMarkProperty('x1',$0);$4=$p1.getMarkProperty('y1',$0);$2=($p1.getMarkProperty('selected_multi_prim_halo_color',$0))['colorOverrideNone'];if($p1.get_isWrappedDomain()){var $2B=$p1.getMarkBounds($0);var $2C=$p1.pixelToDomainX($2B.x);var $2D=$p1.pixelToDomainX($2B.x+$2B.w);var $2E=$p1.getMarkInstances($2C,$2D);for(var $2F=$2E.first;$2F<=$2E.second;++$2F){$p0.save();$p0.translate($p1.getWorldOffset($2F),0);var $30=$p1.getMarkProperty('draw_border',$0);var $31=(!!$30)?2:0;var $32=(5+2)+$31;tab.CanvasRenderer.renderCircle($p0,0+$3,0+$4,$32,$2,4);$p0.restore();}}else{var $33=$p1.getMarkProperty('draw_border',$0);var $34=(!!$33)?2:0;var $35=(5+2)+$34;tab.CanvasRenderer.renderCircle($p0,0+$3,0+$4,$35,$2,4);}$2=($p1.getMarkProperty('color',$0))['colorOverrideNone'];if($p1.get_isWrappedDomain()){var $36=$p1.getMarkBounds($0);var $37=$p1.pixelToDomainX($36.x);var $38=$p1.pixelToDomainX($36.x+$36.w);var $39=$p1.getMarkInstances($37,$38);for(var $3A=$39.first;$3A<=$39.second;++$3A){$p0.save();$p0.translate($p1.getWorldOffset($3A),0);var $3B=(5+2);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$3B,$2);$p0.restore();}}else{var $3C=(5+2);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$3C,$2);}}else{$2=(($p1.get_drawBorder())?$p1.get_borderColor():tab.SceneUtils.blackColor)['colorOverrideNone'];if($p1.get_isWrappedDomain()){var $3D=$p1.getMarkBounds($0);var $3E=$p1.pixelToDomainX($3D.x);var $3F=$p1.pixelToDomainX($3D.x+$3D.w);var $40=$p1.getMarkInstances($3E,$3F);for(var $41=$40.first;$41<=$40.second;++$41){$p0.save();$p0.translate($p1.getWorldOffset($41),0);var $42=(5);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$42,$2);$p0.restore();}}else{var $43=(5);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$43,$2);}$3=$p1.getMarkProperty('x1',$0);$4=$p1.getMarkProperty('y1',$0);$2=(($p1.get_drawBorder())?$p1.get_borderColor():tab.SceneUtils.blackColor)['colorOverrideNone'];if($p1.get_isWrappedDomain()){var $44=$p1.getMarkBounds($0);var $45=$p1.pixelToDomainX($44.x);var $46=$p1.pixelToDomainX($44.x+$44.w);var $47=$p1.getMarkInstances($45,$46);for(var $48=$47.first;$48<=$47.second;++$48){$p0.save();$p0.translate($p1.getWorldOffset($48),0);var $49=(5);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$49,$2);$p0.restore();}}else{var $4A=(5);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$4A,$2);}}}
tab.MarksRenderer.$40=function($p0,$p1,$p2){var $0=(($p1.get_drawBorder())?$p1.get_borderColor():tab.SceneUtils.blackColor)['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=(7);tab.CanvasRenderer.renderFilledCircle($p0,0+$1,0+$2,$8,$0);$p0.restore();}}else{var $9=(7);tab.CanvasRenderer.renderFilledCircle($p0,0+$1,0+$2,$9,$0);}$1=$p1.getMarkProperty('x1',$p2);$2=$p1.getMarkProperty('y1',$p2);if($p1.get_isWrappedDomain()){var $A=$p1.getMarkBounds($p2);var $B=$p1.pixelToDomainX($A.x);var $C=$p1.pixelToDomainX($A.x+$A.w);var $D=$p1.getMarkInstances($B,$C);for(var $E=$D.first;$E<=$D.second;++$E){$p0.save();$p0.translate($p1.getWorldOffset($E),0);var $F=(7);tab.CanvasRenderer.renderFilledCircle($p0,0+$1,0+$2,$F,$0);$p0.restore();}}else{var $10=(7);tab.CanvasRenderer.renderFilledCircle($p0,0+$1,0+$2,$10,$0);}}
tab.MarksRenderer.$46=function($p0,$p1,$p2){if($p1.get_isWrappedDomain()){var $0=$p1.getMarkBounds($p2);var $1=$p1.pixelToDomainX($0.x);var $2=$p1.pixelToDomainX($0.x+$0.w);var $3=$p1.getMarkInstances($1,$2);for(var $4=$3.first;$4<=$3.second;++$4){$p0.save();$p0.translate($p1.getWorldOffset($4),0);var $5=$p1.getMarkProperty('size',$p2)/2;var $6=$p1.getMarkProperty('draw_border',$p2);var $7=(!!$6)?1:0;var $8=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $9=$p1.getMarkProperty('theta',$p2);var $A=$p1.getMarkProperty('theta1',$p2);var $B=$9>$A;if(Math.abs($9-$A)>=1){tab.CanvasRenderer.renderCircle($p0,$p1.getMarkProperty('x',$p2),$p1.getMarkProperty('y',$p2),($5+$7)*2,$8,1);}else{tab.CanvasRenderer.renderWedge($p0,$p1.getMarkProperty('x',$p2),$p1.getMarkProperty('y',$p2),$5,$9,$A,$8,1+$7,$B);}$p0.restore();}}else{var $C=$p1.getMarkProperty('size',$p2)/2;var $D=$p1.getMarkProperty('draw_border',$p2);var $E=(!!$D)?1:0;var $F=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $10=$p1.getMarkProperty('theta',$p2);var $11=$p1.getMarkProperty('theta1',$p2);var $12=$10>$11;if(Math.abs($10-$11)>=1){tab.CanvasRenderer.renderCircle($p0,$p1.getMarkProperty('x',$p2),$p1.getMarkProperty('y',$p2),($C+$E)*2,$F,1);}else{tab.CanvasRenderer.renderWedge($p0,$p1.getMarkProperty('x',$p2),$p1.getMarkProperty('y',$p2),$C,$10,$11,$F,1+$E,$12);}}}
tab.MarksRenderer.$47=function($p0,$p1,$p2){if($p1.get_isWrappedDomain()){var $0=$p1.getMarkBounds($p2);var $1=$p1.pixelToDomainX($0.x);var $2=$p1.pixelToDomainX($0.x+$0.w);var $3=$p1.getMarkInstances($1,$2);for(var $4=$3.first;$4<=$3.second;++$4){$p0.save();$p0.translate($p1.getWorldOffset($4),0);var $5=$p1.getMarkProperty('size',$p2)/2;var $6=$p1.getMarkProperty('draw_border',$p2);var $7=(!!$6)?1:0;var $8=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $9=$p1.getMarkProperty('theta',$p2);var $A=$p1.getMarkProperty('theta1',$p2);var $B=$9>$A;if(Math.abs($9-$A)>=1){tab.CanvasRenderer.renderCircle($p0,$p1.getMarkProperty('x',$p2),$p1.getMarkProperty('y',$p2),($5+$7)*2,$8,2);}else{tab.CanvasRenderer.renderWedge($p0,$p1.getMarkProperty('x',$p2),$p1.getMarkProperty('y',$p2),$5,$9,$A,$8,2+$7,$B);}$p0.restore();}}else{var $C=$p1.getMarkProperty('size',$p2)/2;var $D=$p1.getMarkProperty('draw_border',$p2);var $E=(!!$D)?1:0;var $F=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $10=$p1.getMarkProperty('theta',$p2);var $11=$p1.getMarkProperty('theta1',$p2);var $12=$10>$11;if(Math.abs($10-$11)>=1){tab.CanvasRenderer.renderCircle($p0,$p1.getMarkProperty('x',$p2),$p1.getMarkProperty('y',$p2),($C+$E)*2,$F,2);}else{tab.CanvasRenderer.renderWedge($p0,$p1.getMarkProperty('x',$p2),$p1.getMarkProperty('y',$p2),$C,$10,$11,$F,2+$E,$12);}}}
tab.MarksRenderer.$4A=function($p0,$p1,$p2){if(!(!!$p1.get_clipCase()&&$p1.get_useCellClipForSelection())){if($p1.get_isWrappedDomain()){var $0=$p1.getMarkBounds($p2);var $1=$p1.pixelToDomainX($0.x);var $2=$p1.pixelToDomainX($0.x+$0.w);var $3=$p1.getMarkInstances($1,$2);for(var $4=$3.first;$4<=$3.second;++$4){$p0.save();$p0.translate($p1.getWorldOffset($4),0);var $5=-$p1.getMarkProperty('width',$p2)/2;var $6=$p1.getMarkProperty('height',$p2)/2-1;var $7=$p1.getMarkProperty('x',$p2)+$5;var $8=$p1.getMarkProperty('y',$p2)+$6;var $9=$p1.getMarkProperty('x',$p2)+$p1.getMarkProperty('width',$p2)+$5;var $A=$p1.getMarkProperty('y',$p2)+$6;var $B=1;var $C=$9-$7;var $D=[$7,$8+$B-1,$7+$C,$8+$B-1];$p0.set_lineCap('square');$p0.set_lineWidth($B);$p0.set_strokeStyle(($p1.getMarkProperty('color',$p2))['colorOverrideOpaque']);tab.CanvasRenderer.strokePath($p0,$D,false,true);$p0.restore();}}else{var $E=-$p1.getMarkProperty('width',$p2)/2;var $F=$p1.getMarkProperty('height',$p2)/2-1;var $10=$p1.getMarkProperty('x',$p2)+$E;var $11=$p1.getMarkProperty('y',$p2)+$F;var $12=$p1.getMarkProperty('x',$p2)+$p1.getMarkProperty('width',$p2)+$E;var $13=$p1.getMarkProperty('y',$p2)+$F;var $14=1;var $15=$12-$10;var $16=[$10,$11+$14-1,$10+$15,$11+$14-1];$p0.set_lineCap('square');$p0.set_lineWidth($14);$p0.set_strokeStyle(($p1.getMarkProperty('color',$p2))['colorOverrideOpaque']);tab.CanvasRenderer.strokePath($p0,$16,false,true);}}if((!!$p1.get_clipCase()&&$p1.get_useCellClipForSelection())){if($p1.get_isWrappedDomain()){var $17=$p1.getMarkBounds($p2);var $18=$p1.pixelToDomainX($17.x);var $19=$p1.pixelToDomainX($17.x+$17.w);var $1A=$p1.getMarkInstances($18,$19);for(var $1B=$1A.first;$1B<=$1A.second;++$1B){$p0.save();$p0.translate($p1.getWorldOffset($1B),0);var $1C=parseInt(1);var $1D=$p1.getMarkProperty('draw_border',$p2);var $1E=(!!$1D)?1:0;var $1F=$p1.getMarkProperty('x',$p2)-$p1.getMarkProperty('clip_width',$p2)/2;var $20=$p1.getMarkProperty('x',$p2)+$p1.getMarkProperty('clip_width',$p2)/2;var $21=$p1.getMarkProperty('y',$p2)-$p1.getMarkProperty('clip_height',$p2)/2;var $22=$p1.getMarkProperty('y',$p2)+$p1.getMarkProperty('clip_height',$p2)/2;var $23=Math.min($1F,$20);var $24=Math.min($21,$22);var $25=Math.abs($20-$1F);var $26=Math.abs($22-$21);var $27=tab.CanvasRenderer.roundStartAndExtent($24,$26,$p1.get_minBarHeight());var $28=tab.CanvasRenderer.roundStartAndExtent($23,$25,$p1.get_minBarWidth());$23=$28.first-$1C+($1C-1);$24=$27.first-$1C+($1C-1);$25=$28.second+$1C+$1E;$26=$27.second+$1C+$1E;if(!!false){$25=$26=Math.min($25,$26);}if(!$p1.get_isWrappedDomain()){var $29=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($29,tab.$create_RectXY(parseInt($23),parseInt($24),parseInt($25),parseInt($26)))){return;}if($29.x>=$23){var $2A=$29.x+$1C-1;$25-=$2A-$23;$23=$2A;}if($29.x+$29.w<=$23+$25){$25=$29.x+$29.w-$23-1;}if($29.y>=$24){var $2B=$29.y+$1C-1;$26-=$2B-$24;$24=$2B;}if($29.y+$29.h<=$24+$26){$26=$29.y+$29.h-$24-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$23,$24,$25,$26,($p1.getMarkProperty('color',$p2))['colorOverrideNone'],$1C,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);$p0.restore();}}else{var $2C=parseInt(1);var $2D=$p1.getMarkProperty('draw_border',$p2);var $2E=(!!$2D)?1:0;var $2F=$p1.getMarkProperty('x',$p2)-$p1.getMarkProperty('clip_width',$p2)/2;var $30=$p1.getMarkProperty('x',$p2)+$p1.getMarkProperty('clip_width',$p2)/2;var $31=$p1.getMarkProperty('y',$p2)-$p1.getMarkProperty('clip_height',$p2)/2;var $32=$p1.getMarkProperty('y',$p2)+$p1.getMarkProperty('clip_height',$p2)/2;var $33=Math.min($2F,$30);var $34=Math.min($31,$32);var $35=Math.abs($30-$2F);var $36=Math.abs($32-$31);var $37=tab.CanvasRenderer.roundStartAndExtent($34,$36,$p1.get_minBarHeight());var $38=tab.CanvasRenderer.roundStartAndExtent($33,$35,$p1.get_minBarWidth());$33=$38.first-$2C+($2C-1);$34=$37.first-$2C+($2C-1);$35=$38.second+$2C+$2E;$36=$37.second+$2C+$2E;if(!!false){$35=$36=Math.min($35,$36);}if(!$p1.get_isWrappedDomain()){var $39=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($39,tab.$create_RectXY(parseInt($33),parseInt($34),parseInt($35),parseInt($36)))){return;}if($39.x>=$33){var $3A=$39.x+$2C-1;$35-=$3A-$33;$33=$3A;}if($39.x+$39.w<=$33+$35){$35=$39.x+$39.w-$33-1;}if($39.y>=$34){var $3B=$39.y+$2C-1;$36-=$3B-$34;$34=$3B;}if($39.y+$39.h<=$34+$36){$36=$39.y+$39.h-$34-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$33,$34,$35,$36,($p1.getMarkProperty('color',$p2))['colorOverrideNone'],$2C,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);}}}
tab.MarksRenderer.$4B=function($p0,$p1,$p2){if(!(!!$p1.get_clipCase()&&$p1.get_useCellClipForSelection())){if($p1.get_isWrappedDomain()){var $0=$p1.getMarkBounds($p2);var $1=$p1.pixelToDomainX($0.x);var $2=$p1.pixelToDomainX($0.x+$0.w);var $3=$p1.getMarkInstances($1,$2);for(var $4=$3.first;$4<=$3.second;++$4){$p0.save();$p0.translate($p1.getWorldOffset($4),0);var $5=-$p1.getMarkProperty('width',$p2)/2;var $6=$p1.getMarkProperty('height',$p2)/2-1;var $7=$p1.getMarkProperty('x',$p2)+$5;var $8=$p1.getMarkProperty('y',$p2)+$6;var $9=$p1.getMarkProperty('x',$p2)+$p1.getMarkProperty('width',$p2)+$5;var $A=$p1.getMarkProperty('y',$p2)+$6;var $B=2;var $C=$9-$7;var $D=[$7,$8+$B-1,$7+$C,$8+$B-1];$p0.set_lineCap('square');$p0.set_lineWidth($B);$p0.set_strokeStyle(($p1.getMarkProperty('color',$p2))['colorOverrideOpaque']);tab.CanvasRenderer.strokePath($p0,$D,false,true);$p0.restore();}}else{var $E=-$p1.getMarkProperty('width',$p2)/2;var $F=$p1.getMarkProperty('height',$p2)/2-1;var $10=$p1.getMarkProperty('x',$p2)+$E;var $11=$p1.getMarkProperty('y',$p2)+$F;var $12=$p1.getMarkProperty('x',$p2)+$p1.getMarkProperty('width',$p2)+$E;var $13=$p1.getMarkProperty('y',$p2)+$F;var $14=2;var $15=$12-$10;var $16=[$10,$11+$14-1,$10+$15,$11+$14-1];$p0.set_lineCap('square');$p0.set_lineWidth($14);$p0.set_strokeStyle(($p1.getMarkProperty('color',$p2))['colorOverrideOpaque']);tab.CanvasRenderer.strokePath($p0,$16,false,true);}}if((!!$p1.get_clipCase()&&$p1.get_useCellClipForSelection())){if($p1.get_isWrappedDomain()){var $17=$p1.getMarkBounds($p2);var $18=$p1.pixelToDomainX($17.x);var $19=$p1.pixelToDomainX($17.x+$17.w);var $1A=$p1.getMarkInstances($18,$19);for(var $1B=$1A.first;$1B<=$1A.second;++$1B){$p0.save();$p0.translate($p1.getWorldOffset($1B),0);var $1C=parseInt(2);var $1D=$p1.getMarkProperty('draw_border',$p2);var $1E=(!!$1D)?1:0;var $1F=$p1.getMarkProperty('x',$p2)-$p1.getMarkProperty('clip_width',$p2)/2;var $20=$p1.getMarkProperty('x',$p2)+$p1.getMarkProperty('clip_width',$p2)/2;var $21=$p1.getMarkProperty('y',$p2)-$p1.getMarkProperty('clip_height',$p2)/2;var $22=$p1.getMarkProperty('y',$p2)+$p1.getMarkProperty('clip_height',$p2)/2;var $23=Math.min($1F,$20);var $24=Math.min($21,$22);var $25=Math.abs($20-$1F);var $26=Math.abs($22-$21);var $27=tab.CanvasRenderer.roundStartAndExtent($24,$26,$p1.get_minBarHeight());var $28=tab.CanvasRenderer.roundStartAndExtent($23,$25,$p1.get_minBarWidth());$23=$28.first-$1C+($1C-1);$24=$27.first-$1C+($1C-1);$25=$28.second+$1C+$1E;$26=$27.second+$1C+$1E;if(!!false){$25=$26=Math.min($25,$26);}if(!$p1.get_isWrappedDomain()){var $29=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($29,tab.$create_RectXY(parseInt($23),parseInt($24),parseInt($25),parseInt($26)))){return;}if($29.x>=$23){var $2A=$29.x+$1C-1;$25-=$2A-$23;$23=$2A;}if($29.x+$29.w<=$23+$25){$25=$29.x+$29.w-$23-1;}if($29.y>=$24){var $2B=$29.y+$1C-1;$26-=$2B-$24;$24=$2B;}if($29.y+$29.h<=$24+$26){$26=$29.y+$29.h-$24-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$23,$24,$25,$26,($p1.getMarkProperty('color',$p2))['colorOverrideNone'],$1C,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);$p0.restore();}}else{var $2C=parseInt(2);var $2D=$p1.getMarkProperty('draw_border',$p2);var $2E=(!!$2D)?1:0;var $2F=$p1.getMarkProperty('x',$p2)-$p1.getMarkProperty('clip_width',$p2)/2;var $30=$p1.getMarkProperty('x',$p2)+$p1.getMarkProperty('clip_width',$p2)/2;var $31=$p1.getMarkProperty('y',$p2)-$p1.getMarkProperty('clip_height',$p2)/2;var $32=$p1.getMarkProperty('y',$p2)+$p1.getMarkProperty('clip_height',$p2)/2;var $33=Math.min($2F,$30);var $34=Math.min($31,$32);var $35=Math.abs($30-$2F);var $36=Math.abs($32-$31);var $37=tab.CanvasRenderer.roundStartAndExtent($34,$36,$p1.get_minBarHeight());var $38=tab.CanvasRenderer.roundStartAndExtent($33,$35,$p1.get_minBarWidth());$33=$38.first-$2C+($2C-1);$34=$37.first-$2C+($2C-1);$35=$38.second+$2C+$2E;$36=$37.second+$2C+$2E;if(!!false){$35=$36=Math.min($35,$36);}if(!$p1.get_isWrappedDomain()){var $39=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($39,tab.$create_RectXY(parseInt($33),parseInt($34),parseInt($35),parseInt($36)))){return;}if($39.x>=$33){var $3A=$39.x+$2C-1;$35-=$3A-$33;$33=$3A;}if($39.x+$39.w<=$33+$35){$35=$39.x+$39.w-$33-1;}if($39.y>=$34){var $3B=$39.y+$2C-1;$36-=$3B-$34;$34=$3B;}if($39.y+$39.h<=$34+$36){$36=$39.y+$39.h-$34-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$33,$34,$35,$36,($p1.getMarkProperty('color',$p2))['colorOverrideNone'],$2C,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);}}}
tab.MarksRenderer.$4E=function($p0,$p1,$p2){var $0=(parseInt(($p1.getMarkProperty('size',$p2)+0.5))/2);var $1=1;if($p1.get_scaleMarksInX()&&$p1.get_scaleMarksInY()){if($p1.get_isWrappedDomain()){var $2=$p1.getMarkBounds($p2);var $3=$p1.pixelToDomainX($2.x);var $4=$p1.pixelToDomainX($2.x+$2.w);var $5=$p1.getMarkInstances($3,$4);for(var $6=$5.first;$6<=$5.second;++$6){$p0.save();$p0.translate($p1.getWorldOffset($6),0);var $7=parseInt($1);var $8=$p1.getMarkProperty('draw_border',$p2);var $9=(!!$8)?1:0;var $A=$p1.getMarkProperty('x',$p2);var $B=$p1.getMarkProperty('x1',$p2);var $C=$p1.getMarkProperty('y',$p2);var $D=$p1.getMarkProperty('y1',$p2);var $E=Math.min($A,$B);var $F=Math.min($C,$D);var $10=Math.abs($B-$A);var $11=Math.abs($D-$C);var $12=tab.CanvasRenderer.roundStartAndExtent($F,$11,$p1.get_minBarHeight());var $13=tab.CanvasRenderer.roundStartAndExtent($E,$10,$p1.get_minBarWidth());$E=$13.first-$7+($7-1);$F=$12.first-$7+($7-1);$10=$13.second+$7+$9;$11=$12.second+$7+$9;if(!!false){$10=$11=Math.min($10,$11);}if(!$p1.get_isWrappedDomain()){var $14=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($14,tab.$create_RectXY(parseInt($E),parseInt($F),parseInt($10),parseInt($11)))){return;}if($14.x>=$E){var $15=$14.x+$7-1;$10-=$15-$E;$E=$15;}if($14.x+$14.w<=$E+$10){$10=$14.x+$14.w-$E-1;}if($14.y>=$F){var $16=$14.y+$7-1;$11-=$16-$F;$F=$16;}if($14.y+$14.h<=$F+$11){$11=$14.y+$14.h-$F-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$E,$F,$10,$11,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$7,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);$p0.restore();}}else{var $17=parseInt($1);var $18=$p1.getMarkProperty('draw_border',$p2);var $19=(!!$18)?1:0;var $1A=$p1.getMarkProperty('x',$p2);var $1B=$p1.getMarkProperty('x1',$p2);var $1C=$p1.getMarkProperty('y',$p2);var $1D=$p1.getMarkProperty('y1',$p2);var $1E=Math.min($1A,$1B);var $1F=Math.min($1C,$1D);var $20=Math.abs($1B-$1A);var $21=Math.abs($1D-$1C);var $22=tab.CanvasRenderer.roundStartAndExtent($1F,$21,$p1.get_minBarHeight());var $23=tab.CanvasRenderer.roundStartAndExtent($1E,$20,$p1.get_minBarWidth());$1E=$23.first-$17+($17-1);$1F=$22.first-$17+($17-1);$20=$23.second+$17+$19;$21=$22.second+$17+$19;if(!!false){$20=$21=Math.min($20,$21);}if(!$p1.get_isWrappedDomain()){var $24=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($24,tab.$create_RectXY(parseInt($1E),parseInt($1F),parseInt($20),parseInt($21)))){return;}if($24.x>=$1E){var $25=$24.x+$17-1;$20-=$25-$1E;$1E=$25;}if($24.x+$24.w<=$1E+$20){$20=$24.x+$24.w-$1E-1;}if($24.y>=$1F){var $26=$24.y+$17-1;$21-=$26-$1F;$1F=$26;}if($24.y+$24.h<=$1F+$21){$21=$24.y+$24.h-$1F-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$1E,$1F,$20,$21,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$17,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);}}if(!$p1.get_scaleMarksInX()&&$p1.get_scaleMarksInY()){if($p1.get_isWrappedDomain()){var $27=$p1.getMarkBounds($p2);var $28=$p1.pixelToDomainX($27.x);var $29=$p1.pixelToDomainX($27.x+$27.w);var $2A=$p1.getMarkInstances($28,$29);for(var $2B=$2A.first;$2B<=$2A.second;++$2B){$p0.save();$p0.translate($p1.getWorldOffset($2B),0);var $2C=parseInt($1);var $2D=$p1.getMarkProperty('draw_border',$p2);var $2E=(!!$2D)?1:0;var $2F=$p1.getMarkProperty('x',$p2)-$0;var $30=$p1.getMarkProperty('x',$p2)+$0;var $31=$p1.getMarkProperty('y',$p2);var $32=$p1.getMarkProperty('y1',$p2);var $33=Math.min($2F,$30);var $34=Math.min($31,$32);var $35=Math.abs($30-$2F);var $36=Math.abs($32-$31);var $37=tab.CanvasRenderer.roundStartAndExtent($34,$36,$p1.get_minBarHeight());var $38=tab.CanvasRenderer.roundStartAndExtent($33,$35,$p1.get_minBarWidth());$33=$38.first-$2C+($2C-1);$34=$37.first-$2C+($2C-1);$35=$38.second+$2C+$2E;$36=$37.second+$2C+$2E;if(!!false){$35=$36=Math.min($35,$36);}if(!$p1.get_isWrappedDomain()){var $39=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($39,tab.$create_RectXY(parseInt($33),parseInt($34),parseInt($35),parseInt($36)))){return;}if($39.x>=$33){var $3A=$39.x+$2C-1;$35-=$3A-$33;$33=$3A;}if($39.x+$39.w<=$33+$35){$35=$39.x+$39.w-$33-1;}if($39.y>=$34){var $3B=$39.y+$2C-1;$36-=$3B-$34;$34=$3B;}if($39.y+$39.h<=$34+$36){$36=$39.y+$39.h-$34-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$33,$34,$35,$36,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$2C,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);$p0.restore();}}else{var $3C=parseInt($1);var $3D=$p1.getMarkProperty('draw_border',$p2);var $3E=(!!$3D)?1:0;var $3F=$p1.getMarkProperty('x',$p2)-$0;var $40=$p1.getMarkProperty('x',$p2)+$0;var $41=$p1.getMarkProperty('y',$p2);var $42=$p1.getMarkProperty('y1',$p2);var $43=Math.min($3F,$40);var $44=Math.min($41,$42);var $45=Math.abs($40-$3F);var $46=Math.abs($42-$41);var $47=tab.CanvasRenderer.roundStartAndExtent($44,$46,$p1.get_minBarHeight());var $48=tab.CanvasRenderer.roundStartAndExtent($43,$45,$p1.get_minBarWidth());$43=$48.first-$3C+($3C-1);$44=$47.first-$3C+($3C-1);$45=$48.second+$3C+$3E;$46=$47.second+$3C+$3E;if(!!false){$45=$46=Math.min($45,$46);}if(!$p1.get_isWrappedDomain()){var $49=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($49,tab.$create_RectXY(parseInt($43),parseInt($44),parseInt($45),parseInt($46)))){return;}if($49.x>=$43){var $4A=$49.x+$3C-1;$45-=$4A-$43;$43=$4A;}if($49.x+$49.w<=$43+$45){$45=$49.x+$49.w-$43-1;}if($49.y>=$44){var $4B=$49.y+$3C-1;$46-=$4B-$44;$44=$4B;}if($49.y+$49.h<=$44+$46){$46=$49.y+$49.h-$44-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$43,$44,$45,$46,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$3C,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);}}if($p1.get_scaleMarksInX()&&!$p1.get_scaleMarksInY()){if($p1.get_isWrappedDomain()){var $4C=$p1.getMarkBounds($p2);var $4D=$p1.pixelToDomainX($4C.x);var $4E=$p1.pixelToDomainX($4C.x+$4C.w);var $4F=$p1.getMarkInstances($4D,$4E);for(var $50=$4F.first;$50<=$4F.second;++$50){$p0.save();$p0.translate($p1.getWorldOffset($50),0);var $51=parseInt($1);var $52=$p1.getMarkProperty('draw_border',$p2);var $53=(!!$52)?1:0;var $54=$p1.getMarkProperty('x',$p2);var $55=$p1.getMarkProperty('x1',$p2);var $56=$p1.getMarkProperty('y',$p2)-$0;var $57=$p1.getMarkProperty('y',$p2)+$0;var $58=Math.min($54,$55);var $59=Math.min($56,$57);var $5A=Math.abs($55-$54);var $5B=Math.abs($57-$56);var $5C=tab.CanvasRenderer.roundStartAndExtent($59,$5B,$p1.get_minBarHeight());var $5D=tab.CanvasRenderer.roundStartAndExtent($58,$5A,$p1.get_minBarWidth());$58=$5D.first-$51+($51-1);$59=$5C.first-$51+($51-1);$5A=$5D.second+$51+$53;$5B=$5C.second+$51+$53;if(!!false){$5A=$5B=Math.min($5A,$5B);}if(!$p1.get_isWrappedDomain()){var $5E=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($5E,tab.$create_RectXY(parseInt($58),parseInt($59),parseInt($5A),parseInt($5B)))){return;}if($5E.x>=$58){var $5F=$5E.x+$51-1;$5A-=$5F-$58;$58=$5F;}if($5E.x+$5E.w<=$58+$5A){$5A=$5E.x+$5E.w-$58-1;}if($5E.y>=$59){var $60=$5E.y+$51-1;$5B-=$60-$59;$59=$60;}if($5E.y+$5E.h<=$59+$5B){$5B=$5E.y+$5E.h-$59-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$58,$59,$5A,$5B,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$51,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);$p0.restore();}}else{var $61=parseInt($1);var $62=$p1.getMarkProperty('draw_border',$p2);var $63=(!!$62)?1:0;var $64=$p1.getMarkProperty('x',$p2);var $65=$p1.getMarkProperty('x1',$p2);var $66=$p1.getMarkProperty('y',$p2)-$0;var $67=$p1.getMarkProperty('y',$p2)+$0;var $68=Math.min($64,$65);var $69=Math.min($66,$67);var $6A=Math.abs($65-$64);var $6B=Math.abs($67-$66);var $6C=tab.CanvasRenderer.roundStartAndExtent($69,$6B,$p1.get_minBarHeight());var $6D=tab.CanvasRenderer.roundStartAndExtent($68,$6A,$p1.get_minBarWidth());$68=$6D.first-$61+($61-1);$69=$6C.first-$61+($61-1);$6A=$6D.second+$61+$63;$6B=$6C.second+$61+$63;if(!!false){$6A=$6B=Math.min($6A,$6B);}if(!$p1.get_isWrappedDomain()){var $6E=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($6E,tab.$create_RectXY(parseInt($68),parseInt($69),parseInt($6A),parseInt($6B)))){return;}if($6E.x>=$68){var $6F=$6E.x+$61-1;$6A-=$6F-$68;$68=$6F;}if($6E.x+$6E.w<=$68+$6A){$6A=$6E.x+$6E.w-$68-1;}if($6E.y>=$69){var $70=$6E.y+$61-1;$6B-=$70-$69;$69=$70;}if($6E.y+$6E.h<=$69+$6B){$6B=$6E.y+$6E.h-$69-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$68,$69,$6A,$6B,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$61,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);}}if(!$p1.get_scaleMarksInX()&&!$p1.get_scaleMarksInY()){if($p1.get_isWrappedDomain()){var $71=$p1.getMarkBounds($p2);var $72=$p1.pixelToDomainX($71.x);var $73=$p1.pixelToDomainX($71.x+$71.w);var $74=$p1.getMarkInstances($72,$73);for(var $75=$74.first;$75<=$74.second;++$75){$p0.save();$p0.translate($p1.getWorldOffset($75),0);var $76=parseInt($1);var $77=$p1.getMarkProperty('draw_border',$p2);var $78=(!!$77)?1:0;var $79=$p1.getMarkProperty('x',$p2)-$0;var $7A=$p1.getMarkProperty('x',$p2)+$0;var $7B=$p1.getMarkProperty('y',$p2)-$0;var $7C=$p1.getMarkProperty('y',$p2)+$0;var $7D=Math.min($79,$7A);var $7E=Math.min($7B,$7C);var $7F=Math.abs($7A-$79);var $80=Math.abs($7C-$7B);var $81=tab.CanvasRenderer.roundStartAndExtent($7E,$80,$p1.get_minBarHeight());var $82=tab.CanvasRenderer.roundStartAndExtent($7D,$7F,$p1.get_minBarWidth());$7D=$82.first-$76+($76-1);$7E=$81.first-$76+($76-1);$7F=$82.second+$76+$78;$80=$81.second+$76+$78;if(!!true){$7F=$80=Math.min($7F,$80);}if(!$p1.get_isWrappedDomain()){var $83=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($83,tab.$create_RectXY(parseInt($7D),parseInt($7E),parseInt($7F),parseInt($80)))){return;}if($83.x>=$7D){var $84=$83.x+$76-1;$7F-=$84-$7D;$7D=$84;}if($83.x+$83.w<=$7D+$7F){$7F=$83.x+$83.w-$7D-1;}if($83.y>=$7E){var $85=$83.y+$76-1;$80-=$85-$7E;$7E=$85;}if($83.y+$83.h<=$7E+$80){$80=$83.y+$83.h-$7E-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$7D,$7E,$7F,$80,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$76,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);$p0.restore();}}else{var $86=parseInt($1);var $87=$p1.getMarkProperty('draw_border',$p2);var $88=(!!$87)?1:0;var $89=$p1.getMarkProperty('x',$p2)-$0;var $8A=$p1.getMarkProperty('x',$p2)+$0;var $8B=$p1.getMarkProperty('y',$p2)-$0;var $8C=$p1.getMarkProperty('y',$p2)+$0;var $8D=Math.min($89,$8A);var $8E=Math.min($8B,$8C);var $8F=Math.abs($8A-$89);var $90=Math.abs($8C-$8B);var $91=tab.CanvasRenderer.roundStartAndExtent($8E,$90,$p1.get_minBarHeight());var $92=tab.CanvasRenderer.roundStartAndExtent($8D,$8F,$p1.get_minBarWidth());$8D=$92.first-$86+($86-1);$8E=$91.first-$86+($86-1);$8F=$92.second+$86+$88;$90=$91.second+$86+$88;if(!!true){$8F=$90=Math.min($8F,$90);}if(!$p1.get_isWrappedDomain()){var $93=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($93,tab.$create_RectXY(parseInt($8D),parseInt($8E),parseInt($8F),parseInt($90)))){return;}if($93.x>=$8D){var $94=$93.x+$86-1;$8F-=$94-$8D;$8D=$94;}if($93.x+$93.w<=$8D+$8F){$8F=$93.x+$93.w-$8D-1;}if($93.y>=$8E){var $95=$93.y+$86-1;$90-=$95-$8E;$8E=$95;}if($93.y+$93.h<=$8E+$90){$90=$93.y+$93.h-$8E-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$8D,$8E,$8F,$90,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$86,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);}}}
tab.MarksRenderer.$4F=function($p0,$p1,$p2){var $0=(parseInt(($p1.getMarkProperty('size',$p2)+0.5))/2);var $1=2;if($p1.get_scaleMarksInX()&&$p1.get_scaleMarksInY()){if($p1.get_isWrappedDomain()){var $2=$p1.getMarkBounds($p2);var $3=$p1.pixelToDomainX($2.x);var $4=$p1.pixelToDomainX($2.x+$2.w);var $5=$p1.getMarkInstances($3,$4);for(var $6=$5.first;$6<=$5.second;++$6){$p0.save();$p0.translate($p1.getWorldOffset($6),0);var $7=parseInt($1);var $8=$p1.getMarkProperty('draw_border',$p2);var $9=(!!$8)?1:0;var $A=$p1.getMarkProperty('x',$p2);var $B=$p1.getMarkProperty('x1',$p2);var $C=$p1.getMarkProperty('y',$p2);var $D=$p1.getMarkProperty('y1',$p2);var $E=Math.min($A,$B);var $F=Math.min($C,$D);var $10=Math.abs($B-$A);var $11=Math.abs($D-$C);var $12=tab.CanvasRenderer.roundStartAndExtent($F,$11,$p1.get_minBarHeight());var $13=tab.CanvasRenderer.roundStartAndExtent($E,$10,$p1.get_minBarWidth());$E=$13.first-$7+($7-1);$F=$12.first-$7+($7-1);$10=$13.second+$7+$9;$11=$12.second+$7+$9;if(!!false){$10=$11=Math.min($10,$11);}if(!$p1.get_isWrappedDomain()){var $14=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($14,tab.$create_RectXY(parseInt($E),parseInt($F),parseInt($10),parseInt($11)))){return;}if($14.x>=$E){var $15=$14.x+$7-1;$10-=$15-$E;$E=$15;}if($14.x+$14.w<=$E+$10){$10=$14.x+$14.w-$E-1;}if($14.y>=$F){var $16=$14.y+$7-1;$11-=$16-$F;$F=$16;}if($14.y+$14.h<=$F+$11){$11=$14.y+$14.h-$F-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$E,$F,$10,$11,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$7,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);$p0.restore();}}else{var $17=parseInt($1);var $18=$p1.getMarkProperty('draw_border',$p2);var $19=(!!$18)?1:0;var $1A=$p1.getMarkProperty('x',$p2);var $1B=$p1.getMarkProperty('x1',$p2);var $1C=$p1.getMarkProperty('y',$p2);var $1D=$p1.getMarkProperty('y1',$p2);var $1E=Math.min($1A,$1B);var $1F=Math.min($1C,$1D);var $20=Math.abs($1B-$1A);var $21=Math.abs($1D-$1C);var $22=tab.CanvasRenderer.roundStartAndExtent($1F,$21,$p1.get_minBarHeight());var $23=tab.CanvasRenderer.roundStartAndExtent($1E,$20,$p1.get_minBarWidth());$1E=$23.first-$17+($17-1);$1F=$22.first-$17+($17-1);$20=$23.second+$17+$19;$21=$22.second+$17+$19;if(!!false){$20=$21=Math.min($20,$21);}if(!$p1.get_isWrappedDomain()){var $24=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($24,tab.$create_RectXY(parseInt($1E),parseInt($1F),parseInt($20),parseInt($21)))){return;}if($24.x>=$1E){var $25=$24.x+$17-1;$20-=$25-$1E;$1E=$25;}if($24.x+$24.w<=$1E+$20){$20=$24.x+$24.w-$1E-1;}if($24.y>=$1F){var $26=$24.y+$17-1;$21-=$26-$1F;$1F=$26;}if($24.y+$24.h<=$1F+$21){$21=$24.y+$24.h-$1F-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$1E,$1F,$20,$21,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$17,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);}}if(!$p1.get_scaleMarksInX()&&$p1.get_scaleMarksInY()){if($p1.get_isWrappedDomain()){var $27=$p1.getMarkBounds($p2);var $28=$p1.pixelToDomainX($27.x);var $29=$p1.pixelToDomainX($27.x+$27.w);var $2A=$p1.getMarkInstances($28,$29);for(var $2B=$2A.first;$2B<=$2A.second;++$2B){$p0.save();$p0.translate($p1.getWorldOffset($2B),0);var $2C=parseInt($1);var $2D=$p1.getMarkProperty('draw_border',$p2);var $2E=(!!$2D)?1:0;var $2F=$p1.getMarkProperty('x',$p2)-$0;var $30=$p1.getMarkProperty('x',$p2)+$0;var $31=$p1.getMarkProperty('y',$p2);var $32=$p1.getMarkProperty('y1',$p2);var $33=Math.min($2F,$30);var $34=Math.min($31,$32);var $35=Math.abs($30-$2F);var $36=Math.abs($32-$31);var $37=tab.CanvasRenderer.roundStartAndExtent($34,$36,$p1.get_minBarHeight());var $38=tab.CanvasRenderer.roundStartAndExtent($33,$35,$p1.get_minBarWidth());$33=$38.first-$2C+($2C-1);$34=$37.first-$2C+($2C-1);$35=$38.second+$2C+$2E;$36=$37.second+$2C+$2E;if(!!false){$35=$36=Math.min($35,$36);}if(!$p1.get_isWrappedDomain()){var $39=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($39,tab.$create_RectXY(parseInt($33),parseInt($34),parseInt($35),parseInt($36)))){return;}if($39.x>=$33){var $3A=$39.x+$2C-1;$35-=$3A-$33;$33=$3A;}if($39.x+$39.w<=$33+$35){$35=$39.x+$39.w-$33-1;}if($39.y>=$34){var $3B=$39.y+$2C-1;$36-=$3B-$34;$34=$3B;}if($39.y+$39.h<=$34+$36){$36=$39.y+$39.h-$34-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$33,$34,$35,$36,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$2C,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);$p0.restore();}}else{var $3C=parseInt($1);var $3D=$p1.getMarkProperty('draw_border',$p2);var $3E=(!!$3D)?1:0;var $3F=$p1.getMarkProperty('x',$p2)-$0;var $40=$p1.getMarkProperty('x',$p2)+$0;var $41=$p1.getMarkProperty('y',$p2);var $42=$p1.getMarkProperty('y1',$p2);var $43=Math.min($3F,$40);var $44=Math.min($41,$42);var $45=Math.abs($40-$3F);var $46=Math.abs($42-$41);var $47=tab.CanvasRenderer.roundStartAndExtent($44,$46,$p1.get_minBarHeight());var $48=tab.CanvasRenderer.roundStartAndExtent($43,$45,$p1.get_minBarWidth());$43=$48.first-$3C+($3C-1);$44=$47.first-$3C+($3C-1);$45=$48.second+$3C+$3E;$46=$47.second+$3C+$3E;if(!!false){$45=$46=Math.min($45,$46);}if(!$p1.get_isWrappedDomain()){var $49=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($49,tab.$create_RectXY(parseInt($43),parseInt($44),parseInt($45),parseInt($46)))){return;}if($49.x>=$43){var $4A=$49.x+$3C-1;$45-=$4A-$43;$43=$4A;}if($49.x+$49.w<=$43+$45){$45=$49.x+$49.w-$43-1;}if($49.y>=$44){var $4B=$49.y+$3C-1;$46-=$4B-$44;$44=$4B;}if($49.y+$49.h<=$44+$46){$46=$49.y+$49.h-$44-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$43,$44,$45,$46,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$3C,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);}}if($p1.get_scaleMarksInX()&&!$p1.get_scaleMarksInY()){if($p1.get_isWrappedDomain()){var $4C=$p1.getMarkBounds($p2);var $4D=$p1.pixelToDomainX($4C.x);var $4E=$p1.pixelToDomainX($4C.x+$4C.w);var $4F=$p1.getMarkInstances($4D,$4E);for(var $50=$4F.first;$50<=$4F.second;++$50){$p0.save();$p0.translate($p1.getWorldOffset($50),0);var $51=parseInt($1);var $52=$p1.getMarkProperty('draw_border',$p2);var $53=(!!$52)?1:0;var $54=$p1.getMarkProperty('x',$p2);var $55=$p1.getMarkProperty('x1',$p2);var $56=$p1.getMarkProperty('y',$p2)-$0;var $57=$p1.getMarkProperty('y',$p2)+$0;var $58=Math.min($54,$55);var $59=Math.min($56,$57);var $5A=Math.abs($55-$54);var $5B=Math.abs($57-$56);var $5C=tab.CanvasRenderer.roundStartAndExtent($59,$5B,$p1.get_minBarHeight());var $5D=tab.CanvasRenderer.roundStartAndExtent($58,$5A,$p1.get_minBarWidth());$58=$5D.first-$51+($51-1);$59=$5C.first-$51+($51-1);$5A=$5D.second+$51+$53;$5B=$5C.second+$51+$53;if(!!false){$5A=$5B=Math.min($5A,$5B);}if(!$p1.get_isWrappedDomain()){var $5E=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($5E,tab.$create_RectXY(parseInt($58),parseInt($59),parseInt($5A),parseInt($5B)))){return;}if($5E.x>=$58){var $5F=$5E.x+$51-1;$5A-=$5F-$58;$58=$5F;}if($5E.x+$5E.w<=$58+$5A){$5A=$5E.x+$5E.w-$58-1;}if($5E.y>=$59){var $60=$5E.y+$51-1;$5B-=$60-$59;$59=$60;}if($5E.y+$5E.h<=$59+$5B){$5B=$5E.y+$5E.h-$59-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$58,$59,$5A,$5B,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$51,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);$p0.restore();}}else{var $61=parseInt($1);var $62=$p1.getMarkProperty('draw_border',$p2);var $63=(!!$62)?1:0;var $64=$p1.getMarkProperty('x',$p2);var $65=$p1.getMarkProperty('x1',$p2);var $66=$p1.getMarkProperty('y',$p2)-$0;var $67=$p1.getMarkProperty('y',$p2)+$0;var $68=Math.min($64,$65);var $69=Math.min($66,$67);var $6A=Math.abs($65-$64);var $6B=Math.abs($67-$66);var $6C=tab.CanvasRenderer.roundStartAndExtent($69,$6B,$p1.get_minBarHeight());var $6D=tab.CanvasRenderer.roundStartAndExtent($68,$6A,$p1.get_minBarWidth());$68=$6D.first-$61+($61-1);$69=$6C.first-$61+($61-1);$6A=$6D.second+$61+$63;$6B=$6C.second+$61+$63;if(!!false){$6A=$6B=Math.min($6A,$6B);}if(!$p1.get_isWrappedDomain()){var $6E=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($6E,tab.$create_RectXY(parseInt($68),parseInt($69),parseInt($6A),parseInt($6B)))){return;}if($6E.x>=$68){var $6F=$6E.x+$61-1;$6A-=$6F-$68;$68=$6F;}if($6E.x+$6E.w<=$68+$6A){$6A=$6E.x+$6E.w-$68-1;}if($6E.y>=$69){var $70=$6E.y+$61-1;$6B-=$70-$69;$69=$70;}if($6E.y+$6E.h<=$69+$6B){$6B=$6E.y+$6E.h-$69-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$68,$69,$6A,$6B,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$61,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);}}if(!$p1.get_scaleMarksInX()&&!$p1.get_scaleMarksInY()){if($p1.get_isWrappedDomain()){var $71=$p1.getMarkBounds($p2);var $72=$p1.pixelToDomainX($71.x);var $73=$p1.pixelToDomainX($71.x+$71.w);var $74=$p1.getMarkInstances($72,$73);for(var $75=$74.first;$75<=$74.second;++$75){$p0.save();$p0.translate($p1.getWorldOffset($75),0);var $76=parseInt($1);var $77=$p1.getMarkProperty('draw_border',$p2);var $78=(!!$77)?1:0;var $79=$p1.getMarkProperty('x',$p2)-$0;var $7A=$p1.getMarkProperty('x',$p2)+$0;var $7B=$p1.getMarkProperty('y',$p2)-$0;var $7C=$p1.getMarkProperty('y',$p2)+$0;var $7D=Math.min($79,$7A);var $7E=Math.min($7B,$7C);var $7F=Math.abs($7A-$79);var $80=Math.abs($7C-$7B);var $81=tab.CanvasRenderer.roundStartAndExtent($7E,$80,$p1.get_minBarHeight());var $82=tab.CanvasRenderer.roundStartAndExtent($7D,$7F,$p1.get_minBarWidth());$7D=$82.first-$76+($76-1);$7E=$81.first-$76+($76-1);$7F=$82.second+$76+$78;$80=$81.second+$76+$78;if(!!true){$7F=$80=Math.min($7F,$80);}if(!$p1.get_isWrappedDomain()){var $83=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($83,tab.$create_RectXY(parseInt($7D),parseInt($7E),parseInt($7F),parseInt($80)))){return;}if($83.x>=$7D){var $84=$83.x+$76-1;$7F-=$84-$7D;$7D=$84;}if($83.x+$83.w<=$7D+$7F){$7F=$83.x+$83.w-$7D-1;}if($83.y>=$7E){var $85=$83.y+$76-1;$80-=$85-$7E;$7E=$85;}if($83.y+$83.h<=$7E+$80){$80=$83.y+$83.h-$7E-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$7D,$7E,$7F,$80,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$76,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);$p0.restore();}}else{var $86=parseInt($1);var $87=$p1.getMarkProperty('draw_border',$p2);var $88=(!!$87)?1:0;var $89=$p1.getMarkProperty('x',$p2)-$0;var $8A=$p1.getMarkProperty('x',$p2)+$0;var $8B=$p1.getMarkProperty('y',$p2)-$0;var $8C=$p1.getMarkProperty('y',$p2)+$0;var $8D=Math.min($89,$8A);var $8E=Math.min($8B,$8C);var $8F=Math.abs($8A-$89);var $90=Math.abs($8C-$8B);var $91=tab.CanvasRenderer.roundStartAndExtent($8E,$90,$p1.get_minBarHeight());var $92=tab.CanvasRenderer.roundStartAndExtent($8D,$8F,$p1.get_minBarWidth());$8D=$92.first-$86+($86-1);$8E=$91.first-$86+($86-1);$8F=$92.second+$86+$88;$90=$91.second+$86+$88;if(!!true){$8F=$90=Math.min($8F,$90);}if(!$p1.get_isWrappedDomain()){var $93=$p1.get_paneRect();if(!tab.RectXYUtil.intersectsWith($93,tab.$create_RectXY(parseInt($8D),parseInt($8E),parseInt($8F),parseInt($90)))){return;}if($93.x>=$8D){var $94=$93.x+$86-1;$8F-=$94-$8D;$8D=$94;}if($93.x+$93.w<=$8D+$8F){$8F=$93.x+$93.w-$8D-1;}if($93.y>=$8E){var $95=$93.y+$86-1;$90-=$95-$8E;$8E=$95;}if($93.y+$93.h<=$8E+$90){$90=$93.y+$93.h-$8E-1;}}$p0.set_lineJoin('miter');tab.CanvasRenderer.renderBarOutline($p0,$8D,$8E,$8F,$90,($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'],$86,$p1.get_minBarWidth(),$p1.get_minBarHeight(),false);}}}
tab.MarksRenderer.$52=function($p0,$p1,$p2){var $0=$p1.getMarkIndexFromTupleID($p2);var $1=false;if($0-1>0&&!$p1.isMarkEndPrimitive($0-1)){$1=$1||$p1.isMarkHighlighted($0-1);}if(($0+1)<$p1.get_markCount()&&!$p1.isMarkEndPrimitive($0)){$1=$1||$p1.isMarkHighlighted($0+1);}var $2;var $3=$p1.getMarkProperty('x',$0);var $4=$p1.getMarkProperty('y',$0);if($p1.isMarkSelected($0)){$2=($p1.getMarkProperty('selected_halo_color',$0))['colorOverrideOpaque'];var $5=$p1.getMarkProperty('draw_border',$0);var $6=(!!$5)?2:0;var $7=($p1.getMarkProperty('width',$0)+4+4)+$6;tab.CanvasRenderer.renderCircle($p0,0+$3,0+$4,$7,$2,4);$2=($p1.getMarkProperty('color',$0))['colorOverrideOpaque'];if($p1.get_isWrappedDomain()){var $8=$p1.getMarkBounds($0);var $9=$p1.pixelToDomainX($8.x);var $A=$p1.pixelToDomainX($8.x+$8.w);var $B=$p1.getMarkInstances($9,$A);for(var $C=$B.first;$C<=$B.second;++$C){$p0.save();$p0.translate($p1.getWorldOffset($C),0);var $D=($p1.getMarkProperty('width',$0)+4+4);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$D,$2);$p0.restore();}}else{var $E=($p1.getMarkProperty('width',$0)+4+4);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$E,$2);}}else if($p1.isMarkHighlighted($0)&&!$1){$2=($p1.getMarkProperty('selected_multi_prim_halo_color',$0))['colorOverrideNone'];if($p1.get_isWrappedDomain()){var $F=$p1.getMarkBounds($0);var $10=$p1.pixelToDomainX($F.x);var $11=$p1.pixelToDomainX($F.x+$F.w);var $12=$p1.getMarkInstances($10,$11);for(var $13=$12.first;$13<=$12.second;++$13){$p0.save();$p0.translate($p1.getWorldOffset($13),0);var $14=$p1.getMarkProperty('draw_border',$0);var $15=(!!$14)?2:0;var $16=($p1.getMarkProperty('width',$0)+4+4)+$15;tab.CanvasRenderer.renderCircle($p0,0+$3,0+$4,$16,$2,4);$p0.restore();}}else{var $17=$p1.getMarkProperty('draw_border',$0);var $18=(!!$17)?2:0;var $19=($p1.getMarkProperty('width',$0)+4+4)+$18;tab.CanvasRenderer.renderCircle($p0,0+$3,0+$4,$19,$2,4);}$2=($p1.getMarkProperty('color',$0))['colorOverrideNone'];if($p1.get_isWrappedDomain()){var $1A=$p1.getMarkBounds($0);var $1B=$p1.pixelToDomainX($1A.x);var $1C=$p1.pixelToDomainX($1A.x+$1A.w);var $1D=$p1.getMarkInstances($1B,$1C);for(var $1E=$1D.first;$1E<=$1D.second;++$1E){$p0.save();$p0.translate($p1.getWorldOffset($1E),0);var $1F=($p1.getMarkProperty('width',$0)+4+4);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$1F,$2);$p0.restore();}}else{var $20=($p1.getMarkProperty('width',$0)+4+4);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$20,$2);}}else{$2=($p1.getMarkProperty('color',$0))['colorOverrideNone'];if($p1.get_isWrappedDomain()){var $21=$p1.getMarkBounds($0);var $22=$p1.pixelToDomainX($21.x);var $23=$p1.pixelToDomainX($21.x+$21.w);var $24=$p1.getMarkInstances($22,$23);for(var $25=$24.first;$25<=$24.second;++$25){$p0.save();$p0.translate($p1.getWorldOffset($25),0);var $26=($p1.getMarkProperty('width',$0)+4);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$26,$2);$p0.restore();}}else{var $27=($p1.getMarkProperty('width',$0)+4);tab.CanvasRenderer.renderFilledCircle($p0,0+$3,0+$4,$27,$2);}}}
tab.MarksRenderer.$53=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=($p1.getMarkProperty('width',$p2)+8);tab.CanvasRenderer.renderFilledCircle($p0,0+$1,0+$2,$8,$0);$p0.restore();}}else{var $9=($p1.getMarkProperty('width',$p2)+8);tab.CanvasRenderer.renderFilledCircle($p0,0+$1,0+$2,$9,$0);}}
tab.MarksRenderer.$54=function($p0,$p1,$p2){var $0=tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2));var $1=$p0.getMarkProperty('width',$p2)/2;var $2=tab.$create_PointF($0.x+$1,$0.y+$1);var $3=tab.$create_Circle($2,$1);return tab.GeometryUtil.circleIntersectsRect($3,$p1);}
tab.MarksRenderer.$55=function($p0,$p1,$p2){var $0=tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2));var $1=$p0.getMarkProperty('width',$p2)/2;var $2=tab.$create_PointF($0.x+$1,$0.y+$1);var $3=tab.$create_Circle($2,$1);return tab.GeometryUtil.polygonIntersectsCircle($p1,$3);}
tab.MarksRenderer.$56=function($p0,$p1,$p2){var $0=tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2));var $1=$p0.getMarkProperty('width',$p2)/2;var $2=tab.$create_PointF($0.x+$1,$0.y+$1);var $3=tab.$create_Circle($2,$1);return tab.CircleUtil.intersectsWith($3,$p1);}
tab.MarksRenderer.$59=function($p0,$p1,$p2){var $0=$p1.getMarkIndexFromTupleID($p2);var $1=$p1.getMarkProperty('shape_id',$0);switch($1){case 'shapeIDCircle':tab.MarksRenderer.$5C($p0,$p1,$0);break;case 'shapeIDFilledCircle':tab.MarksRenderer.$5F($p0,$p1,$0);break;case 'shapeIDUnscaledFilledCircle':tab.MarksRenderer.$62($p0,$p1,$0);break;case 'shapeIDSquare':tab.MarksRenderer.$65($p0,$p1,$0);break;case 'shapeIDFilledSquare':tab.MarksRenderer.$68($p0,$p1,$0);break;case 'shapeIDAsterisk':tab.MarksRenderer.$6B($p0,$p1,$0);break;case 'shapeIDPlus':tab.MarksRenderer.$6E($p0,$p1,$0);break;case 'shapeIDFilledPlus':tab.MarksRenderer.$71($p0,$p1,$0);break;case 'shapeIDTimes':tab.MarksRenderer.$74($p0,$p1,$0);break;case 'shapeIDFilledTimes':tab.MarksRenderer.$77($p0,$p1,$0);break;case 'shapeIDDiamond':tab.MarksRenderer.$7A($p0,$p1,$0);break;case 'shapeIDFilledDiamond':tab.MarksRenderer.$7D($p0,$p1,$0);break;case 'shapeIDTriangle':tab.MarksRenderer.$80($p0,$p1,$0);break;case 'shapeIDFilledTriangle':tab.MarksRenderer.$83($p0,$p1,$0);break;case 'shapeIDDownTriangle':tab.MarksRenderer.$86($p0,$p1,$0);break;case 'shapeIDFilledDownTriangle':tab.MarksRenderer.$89($p0,$p1,$0);break;case 'shapeIDLeftTriangle':tab.MarksRenderer.$8C($p0,$p1,$0);break;case 'shapeIDFilledLeftTriangle':tab.MarksRenderer.$8F($p0,$p1,$0);break;case 'shapeIDRightTriangle':tab.MarksRenderer.$92($p0,$p1,$0);break;case 'shapeIDFilledRightTriangle':tab.MarksRenderer.$95($p0,$p1,$0);break;case 'shapeIDFilledStar':tab.MarksRenderer.$98($p0,$p1,$0);break;default:if($p1.doesCustomImageExist($0)){tab.CanvasRenderer.renderCustomShape($p0,$p1,$0,'hoverOverlay','colorOverrideNone');}else{tab.MarksRenderer.$5C($p0,$p1,$0);}break;}}
tab.MarksRenderer.$5A=function($p0,$p1,$p2){var $0=$p1.getMarkIndexFromTupleID($p2);var $1=$p1.getMarkProperty('shape_id',$0);switch($1){case 'shapeIDCircle':tab.MarksRenderer.$5D($p0,$p1,$0);break;case 'shapeIDFilledCircle':tab.MarksRenderer.$60($p0,$p1,$0);break;case 'shapeIDUnscaledFilledCircle':tab.MarksRenderer.$63($p0,$p1,$0);break;case 'shapeIDSquare':tab.MarksRenderer.$66($p0,$p1,$0);break;case 'shapeIDFilledSquare':tab.MarksRenderer.$69($p0,$p1,$0);break;case 'shapeIDAsterisk':tab.MarksRenderer.$6C($p0,$p1,$0);break;case 'shapeIDPlus':tab.MarksRenderer.$6F($p0,$p1,$0);break;case 'shapeIDFilledPlus':tab.MarksRenderer.$72($p0,$p1,$0);break;case 'shapeIDTimes':tab.MarksRenderer.$75($p0,$p1,$0);break;case 'shapeIDFilledTimes':tab.MarksRenderer.$78($p0,$p1,$0);break;case 'shapeIDDiamond':tab.MarksRenderer.$7B($p0,$p1,$0);break;case 'shapeIDFilledDiamond':tab.MarksRenderer.$7E($p0,$p1,$0);break;case 'shapeIDTriangle':tab.MarksRenderer.$81($p0,$p1,$0);break;case 'shapeIDFilledTriangle':tab.MarksRenderer.$84($p0,$p1,$0);break;case 'shapeIDDownTriangle':tab.MarksRenderer.$87($p0,$p1,$0);break;case 'shapeIDFilledDownTriangle':tab.MarksRenderer.$8A($p0,$p1,$0);break;case 'shapeIDLeftTriangle':tab.MarksRenderer.$8D($p0,$p1,$0);break;case 'shapeIDFilledLeftTriangle':tab.MarksRenderer.$90($p0,$p1,$0);break;case 'shapeIDRightTriangle':tab.MarksRenderer.$93($p0,$p1,$0);break;case 'shapeIDFilledRightTriangle':tab.MarksRenderer.$96($p0,$p1,$0);break;case 'shapeIDFilledStar':tab.MarksRenderer.$99($p0,$p1,$0);break;default:if($p1.doesCustomImageExist($0)){tab.CanvasRenderer.renderCustomShape($p0,$p1,$0,'pressedOverlay','colorOverrideNone');}else{tab.MarksRenderer.$5D($p0,$p1,$0);}break;}}
tab.MarksRenderer.$5C=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=$p1.getMarkProperty('draw_border',$p2);var $9=(!!$8)?2:0;var $A=(($p1.getMarkProperty('width',$p2)*(1+(-0.5/12)))+2)+$9;tab.CanvasRenderer.renderCircle($p0,0+$1,0+$2,$A,$0,1);$p0.restore();}}else{var $B=$p1.getMarkProperty('draw_border',$p2);var $C=(!!$B)?2:0;var $D=(($p1.getMarkProperty('width',$p2)*(1+(-0.5/12)))+2)+$C;tab.CanvasRenderer.renderCircle($p0,0+$1,0+$2,$D,$0,1);}}
tab.MarksRenderer.$5D=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=$p1.getMarkProperty('draw_border',$p2);var $9=(!!$8)?2:0;var $A=(($p1.getMarkProperty('width',$p2)*(1+(-0.5/12)))+3)+$9;tab.CanvasRenderer.renderCircle($p0,0+$1,0+$2,$A,$0,2);$p0.restore();}}else{var $B=$p1.getMarkProperty('draw_border',$p2);var $C=(!!$B)?2:0;var $D=(($p1.getMarkProperty('width',$p2)*(1+(-0.5/12)))+3)+$C;tab.CanvasRenderer.renderCircle($p0,0+$1,0+$2,$D,$0,2);}}
tab.MarksRenderer.$5F=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=$p1.getMarkProperty('draw_border',$p2);var $9=(!!$8)?2:0;var $A=($p1.getMarkProperty('width',$p2)*(1+(-0.25/12)))+$9;tab.CanvasRenderer.renderCircle($p0,0+$1,0+$2,$A,$0,1);$p0.restore();}}else{var $B=$p1.getMarkProperty('draw_border',$p2);var $C=(!!$B)?2:0;var $D=($p1.getMarkProperty('width',$p2)*(1+(-0.25/12)))+$C;tab.CanvasRenderer.renderCircle($p0,0+$1,0+$2,$D,$0,1);}}
tab.MarksRenderer.$60=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=$p1.getMarkProperty('draw_border',$p2);var $9=(!!$8)?2:0;var $A=(($p1.getMarkProperty('width',$p2)*(1+(-0.25/12)))+1)+$9;tab.CanvasRenderer.renderCircle($p0,0+$1,0+$2,$A,$0,2);$p0.restore();}}else{var $B=$p1.getMarkProperty('draw_border',$p2);var $C=(!!$B)?2:0;var $D=(($p1.getMarkProperty('width',$p2)*(1+(-0.25/12)))+1)+$C;tab.CanvasRenderer.renderCircle($p0,0+$1,0+$2,$D,$0,2);}}
tab.MarksRenderer.$62=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=$p1.getMarkProperty('draw_border',$p2);var $9=(!!$8)?2:0;var $A=($p1.getMarkProperty('width',$p2))+$9;tab.CanvasRenderer.renderCircle($p0,0+$1,0+$2,$A,$0,1);$p0.restore();}}else{var $B=$p1.getMarkProperty('draw_border',$p2);var $C=(!!$B)?2:0;var $D=($p1.getMarkProperty('width',$p2))+$C;tab.CanvasRenderer.renderCircle($p0,0+$1,0+$2,$D,$0,1);}}
tab.MarksRenderer.$63=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=$p1.getMarkProperty('draw_border',$p2);var $9=(!!$8)?2:0;var $A=($p1.getMarkProperty('width',$p2)+1)+$9;tab.CanvasRenderer.renderCircle($p0,0+$1,0+$2,$A,$0,2);$p0.restore();}}else{var $B=$p1.getMarkProperty('draw_border',$p2);var $C=(!!$B)?2:0;var $D=($p1.getMarkProperty('width',$p2)+1)+$C;tab.CanvasRenderer.renderCircle($p0,0+$1,0+$2,$D,$0,2);}}
tab.MarksRenderer.$65=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+3);tab.CanvasRenderer.renderRectangle($p0,$1+0,$2+0,$8,$8,$0,1);$p0.restore();}}else{var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+3);tab.CanvasRenderer.renderRectangle($p0,$1+0,$2+0,$9,$9,$0,1);}}
tab.MarksRenderer.$66=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+4);tab.CanvasRenderer.renderRectangle($p0,$1+0,$2+0,$8,$8,$0,2);$p0.restore();}}else{var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+4);tab.CanvasRenderer.renderRectangle($p0,$1+0,$2+0,$9,$9,$0,2);}}
tab.MarksRenderer.$68=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=(($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))+1);tab.CanvasRenderer.renderRectangle($p0,$1+0,$2+0,$8,$8,$0,1);$p0.restore();}}else{var $9=(($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))+1);tab.CanvasRenderer.renderRectangle($p0,$1+0,$2+0,$9,$9,$0,1);}}
tab.MarksRenderer.$69=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=(($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))+2);tab.CanvasRenderer.renderRectangle($p0,$1+0,$2+0,$8,$8,$0,2);$p0.restore();}}else{var $9=(($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))+2);tab.CanvasRenderer.renderRectangle($p0,$1+0,$2+0,$9,$9,$0,2);}}
tab.MarksRenderer.$6B=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-0.5/12)))+2)/2;var $A=0.9*$9;var $B=(($p1.getMarkProperty('width',$p2)*(1+(-0.5/12)))+6)/4;var $C=2.5;var $D=1.5;$8.add((-$C)+$1);$8.add((0)+$2);$8.add((-$A)+$1);$8.add(($B-$C)+$2);$8.add(($D-$A)+$1);$8.add($B+$2);$8.add((-$D)+$1);$8.add($C+$2);$8.add((-$D)+$1);$8.add($9+$2);$8.add($D+$1);$8.add($9+$2);$8.add($D+$1);$8.add($C+$2);$8.add(($A-$D)+$1);$8.add($B+$2);$8.add($A+$1);$8.add(($B-$C)+$2);$8.add($C+$1);$8.add((0)+$2);$8.add($A+$1);$8.add(($C-$B)+$2);$8.add(($A-$D)+$1);$8.add((-$B)+$2);$8.add($D+$1);$8.add((-$C)+$2);$8.add($D+$1);$8.add((-$9)+$2);$8.add((-$D)+$1);$8.add((-$9)+$2);$8.add((-$D)+$1);$8.add((-$C)+$2);$8.add(($D-$A)+$1);$8.add((-$B)+$2);$8.add((-$A)+$1);$8.add(($C-$B)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $E=[];var $F=(($p1.getMarkProperty('width',$p2)*(1+(-0.5/12)))+2)/2;var $10=0.9*$F;var $11=(($p1.getMarkProperty('width',$p2)*(1+(-0.5/12)))+6)/4;var $12=2.5;var $13=1.5;$E.add((-$12)+$1);$E.add((0)+$2);$E.add((-$10)+$1);$E.add(($11-$12)+$2);$E.add(($13-$10)+$1);$E.add($11+$2);$E.add((-$13)+$1);$E.add($12+$2);$E.add((-$13)+$1);$E.add($F+$2);$E.add($13+$1);$E.add($F+$2);$E.add($13+$1);$E.add($12+$2);$E.add(($10-$13)+$1);$E.add($11+$2);$E.add($10+$1);$E.add(($11-$12)+$2);$E.add($12+$1);$E.add((0)+$2);$E.add($10+$1);$E.add(($12-$11)+$2);$E.add(($10-$13)+$1);$E.add((-$11)+$2);$E.add($13+$1);$E.add((-$12)+$2);$E.add($13+$1);$E.add((-$F)+$2);$E.add((-$13)+$1);$E.add((-$F)+$2);$E.add((-$13)+$1);$E.add((-$12)+$2);$E.add(($13-$10)+$1);$E.add((-$11)+$2);$E.add((-$10)+$1);$E.add(($12-$11)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$E,true,true);}}
tab.MarksRenderer.$6C=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-0.5/12)))+4)/2;var $A=0.9*$9;var $B=(($p1.getMarkProperty('width',$p2)*(1+(-0.5/12)))+8)/4;var $C=3;var $D=2;$8.add((-$C)+$1);$8.add((0)+$2);$8.add((-$A)+$1);$8.add(($B-$C)+$2);$8.add(($D-$A)+$1);$8.add($B+$2);$8.add((-$D)+$1);$8.add($C+$2);$8.add((-$D)+$1);$8.add($9+$2);$8.add($D+$1);$8.add($9+$2);$8.add($D+$1);$8.add($C+$2);$8.add(($A-$D)+$1);$8.add($B+$2);$8.add($A+$1);$8.add(($B-$C)+$2);$8.add($C+$1);$8.add((0)+$2);$8.add($A+$1);$8.add(($C-$B)+$2);$8.add(($A-$D)+$1);$8.add((-$B)+$2);$8.add($D+$1);$8.add((-$C)+$2);$8.add($D+$1);$8.add((-$9)+$2);$8.add((-$D)+$1);$8.add((-$9)+$2);$8.add((-$D)+$1);$8.add((-$C)+$2);$8.add(($D-$A)+$1);$8.add((-$B)+$2);$8.add((-$A)+$1);$8.add(($C-$B)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $E=[];var $F=(($p1.getMarkProperty('width',$p2)*(1+(-0.5/12)))+4)/2;var $10=0.9*$F;var $11=(($p1.getMarkProperty('width',$p2)*(1+(-0.5/12)))+8)/4;var $12=3;var $13=2;$E.add((-$12)+$1);$E.add((0)+$2);$E.add((-$10)+$1);$E.add(($11-$12)+$2);$E.add(($13-$10)+$1);$E.add($11+$2);$E.add((-$13)+$1);$E.add($12+$2);$E.add((-$13)+$1);$E.add($F+$2);$E.add($13+$1);$E.add($F+$2);$E.add($13+$1);$E.add($12+$2);$E.add(($10-$13)+$1);$E.add($11+$2);$E.add($10+$1);$E.add(($11-$12)+$2);$E.add($12+$1);$E.add((0)+$2);$E.add($10+$1);$E.add(($12-$11)+$2);$E.add(($10-$13)+$1);$E.add((-$11)+$2);$E.add($13+$1);$E.add((-$12)+$2);$E.add($13+$1);$E.add((-$F)+$2);$E.add((-$13)+$1);$E.add((-$F)+$2);$E.add((-$13)+$1);$E.add((-$12)+$2);$E.add(($13-$10)+$1);$E.add((-$11)+$2);$E.add((-$10)+$1);$E.add(($12-$11)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$E,true,true);}}
tab.MarksRenderer.$6E=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1/12)))+2)/2;var $A=1.5;$8.add((-$A)+$1);$8.add((-$9)+$2);$8.add((-$A)+$1);$8.add((-$A)+$2);$8.add((-$9)+$1);$8.add((-$A)+$2);$8.add((-$9)+$1);$8.add($A+$2);$8.add((-$A)+$1);$8.add($A+$2);$8.add((-$A)+$1);$8.add($9+$2);$8.add($A+$1);$8.add($9+$2);$8.add($A+$1);$8.add($A+$2);$8.add($9+$1);$8.add($A+$2);$8.add($9+$1);$8.add((-$A)+$2);$8.add($A+$1);$8.add((-$A)+$2);$8.add($A+$1);$8.add((-$9)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=(($p1.getMarkProperty('width',$p2)*(1+(-1/12)))+2)/2;var $D=1.5;$B.add((-$D)+$1);$B.add((-$C)+$2);$B.add((-$D)+$1);$B.add((-$D)+$2);$B.add((-$C)+$1);$B.add((-$D)+$2);$B.add((-$C)+$1);$B.add($D+$2);$B.add((-$D)+$1);$B.add($D+$2);$B.add((-$D)+$1);$B.add($C+$2);$B.add($D+$1);$B.add($C+$2);$B.add($D+$1);$B.add($D+$2);$B.add($C+$1);$B.add($D+$2);$B.add($C+$1);$B.add((-$D)+$2);$B.add($D+$1);$B.add((-$D)+$2);$B.add($D+$1);$B.add((-$C)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$6F=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1/12)))+3)/2;var $A=2;$8.add((-$A)+$1);$8.add((-$9)+$2);$8.add((-$A)+$1);$8.add((-$A)+$2);$8.add((-$9)+$1);$8.add((-$A)+$2);$8.add((-$9)+$1);$8.add($A+$2);$8.add((-$A)+$1);$8.add($A+$2);$8.add((-$A)+$1);$8.add($9+$2);$8.add($A+$1);$8.add($9+$2);$8.add($A+$1);$8.add($A+$2);$8.add($9+$1);$8.add($A+$2);$8.add($9+$1);$8.add((-$A)+$2);$8.add($A+$1);$8.add((-$A)+$2);$8.add($A+$1);$8.add((-$9)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=(($p1.getMarkProperty('width',$p2)*(1+(-1/12)))+3)/2;var $D=2;$B.add((-$D)+$1);$B.add((-$C)+$2);$B.add((-$D)+$1);$B.add((-$D)+$2);$B.add((-$C)+$1);$B.add((-$D)+$2);$B.add((-$C)+$1);$B.add($D+$2);$B.add((-$D)+$1);$B.add($D+$2);$B.add((-$D)+$1);$B.add($C+$2);$B.add($D+$1);$B.add($C+$2);$B.add($D+$1);$B.add($D+$2);$B.add($C+$1);$B.add($D+$2);$B.add($C+$1);$B.add((-$D)+$2);$B.add($D+$1);$B.add((-$D)+$2);$B.add($D+$1);$B.add((-$C)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$71=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))/2;var $A=($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))/6;$8.add((-$A)+$1);$8.add((-$9)+$2);$8.add((-$A)+$1);$8.add((-$A)+$2);$8.add((-$9)+$1);$8.add((-$A)+$2);$8.add((-$9)+$1);$8.add($A+$2);$8.add((-$A)+$1);$8.add($A+$2);$8.add((-$A)+$1);$8.add($9+$2);$8.add($A+$1);$8.add($9+$2);$8.add($A+$1);$8.add($A+$2);$8.add($9+$1);$8.add($A+$2);$8.add($9+$1);$8.add((-$A)+$2);$8.add($A+$1);$8.add((-$A)+$2);$8.add($A+$1);$8.add((-$9)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))/2;var $D=($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))/6;$B.add((-$D)+$1);$B.add((-$C)+$2);$B.add((-$D)+$1);$B.add((-$D)+$2);$B.add((-$C)+$1);$B.add((-$D)+$2);$B.add((-$C)+$1);$B.add($D+$2);$B.add((-$D)+$1);$B.add($D+$2);$B.add((-$D)+$1);$B.add($C+$2);$B.add($D+$1);$B.add($C+$2);$B.add($D+$1);$B.add($D+$2);$B.add($C+$1);$B.add($D+$2);$B.add($C+$1);$B.add((-$D)+$2);$B.add($D+$1);$B.add((-$D)+$2);$B.add($D+$1);$B.add((-$C)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$72=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))+1)/2;var $A=(($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))+3)/6;$8.add((-$A)+$1);$8.add((-$9)+$2);$8.add((-$A)+$1);$8.add((-$A)+$2);$8.add((-$9)+$1);$8.add((-$A)+$2);$8.add((-$9)+$1);$8.add($A+$2);$8.add((-$A)+$1);$8.add($A+$2);$8.add((-$A)+$1);$8.add($9+$2);$8.add($A+$1);$8.add($9+$2);$8.add($A+$1);$8.add($A+$2);$8.add($9+$1);$8.add($A+$2);$8.add($9+$1);$8.add((-$A)+$2);$8.add($A+$1);$8.add((-$A)+$2);$8.add($A+$1);$8.add((-$9)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=(($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))+1)/2;var $D=(($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))+3)/6;$B.add((-$D)+$1);$B.add((-$C)+$2);$B.add((-$D)+$1);$B.add((-$D)+$2);$B.add((-$C)+$1);$B.add((-$D)+$2);$B.add((-$C)+$1);$B.add($D+$2);$B.add((-$D)+$1);$B.add($D+$2);$B.add((-$D)+$1);$B.add($C+$2);$B.add($D+$1);$B.add($C+$2);$B.add($D+$1);$B.add($D+$2);$B.add($C+$1);$B.add($D+$2);$B.add($C+$1);$B.add((-$D)+$2);$B.add($D+$1);$B.add((-$D)+$2);$B.add($D+$1);$B.add((-$C)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$74=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1.5/12)))+4)/2;var $A=2;$8.add((-$9+$A)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add((-$9+$A)+$2);$8.add((-$A)+$1);$8.add((0)+$2);$8.add((-$9)+$1);$8.add(($9-$A)+$2);$8.add((-$9+$A)+$1);$8.add($9+$2);$8.add((0)+$1);$8.add($A+$2);$8.add(($9-$A)+$1);$8.add($9+$2);$8.add($9+$1);$8.add(($9-$A)+$2);$8.add($A+$1);$8.add((0)+$2);$8.add($9+$1);$8.add((-$9+$A)+$2);$8.add(($9-$A)+$1);$8.add((-$9)+$2);$8.add((0)+$1);$8.add((-$A)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=(($p1.getMarkProperty('width',$p2)*(1+(-1.5/12)))+4)/2;var $D=2;$B.add((-$C+$D)+$1);$B.add((-$C)+$2);$B.add((-$C)+$1);$B.add((-$C+$D)+$2);$B.add((-$D)+$1);$B.add((0)+$2);$B.add((-$C)+$1);$B.add(($C-$D)+$2);$B.add((-$C+$D)+$1);$B.add($C+$2);$B.add((0)+$1);$B.add($D+$2);$B.add(($C-$D)+$1);$B.add($C+$2);$B.add($C+$1);$B.add(($C-$D)+$2);$B.add($D+$1);$B.add((0)+$2);$B.add($C+$1);$B.add((-$C+$D)+$2);$B.add(($C-$D)+$1);$B.add((-$C)+$2);$B.add((0)+$1);$B.add((-$D)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$75=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1.5/12)))+4)/2;var $A=3;$8.add((-$9+$A)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add((-$9+$A)+$2);$8.add((-$A)+$1);$8.add((0)+$2);$8.add((-$9)+$1);$8.add(($9-$A)+$2);$8.add((-$9+$A)+$1);$8.add($9+$2);$8.add((0)+$1);$8.add($A+$2);$8.add(($9-$A)+$1);$8.add($9+$2);$8.add($9+$1);$8.add(($9-$A)+$2);$8.add($A+$1);$8.add((0)+$2);$8.add($9+$1);$8.add((-$9+$A)+$2);$8.add(($9-$A)+$1);$8.add((-$9)+$2);$8.add((0)+$1);$8.add((-$A)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=(($p1.getMarkProperty('width',$p2)*(1+(-1.5/12)))+4)/2;var $D=3;$B.add((-$C+$D)+$1);$B.add((-$C)+$2);$B.add((-$C)+$1);$B.add((-$C+$D)+$2);$B.add((-$D)+$1);$B.add((0)+$2);$B.add((-$C)+$1);$B.add(($C-$D)+$2);$B.add((-$C+$D)+$1);$B.add($C+$2);$B.add((0)+$1);$B.add($D+$2);$B.add(($C-$D)+$1);$B.add($C+$2);$B.add($C+$1);$B.add(($C-$D)+$2);$B.add($D+$1);$B.add((0)+$2);$B.add($C+$1);$B.add((-$C+$D)+$2);$B.add(($C-$D)+$1);$B.add((-$C)+$2);$B.add((0)+$1);$B.add((-$D)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$77=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))/2;var $A=($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))/4;$8.add((-$A)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add((-$A)+$2);$8.add((-$A)+$1);$8.add((0)+$2);$8.add((-$9)+$1);$8.add($A+$2);$8.add((-$A)+$1);$8.add($9+$2);$8.add((0)+$1);$8.add($A+$2);$8.add($A+$1);$8.add($9+$2);$8.add($9+$1);$8.add($A+$2);$8.add($A+$1);$8.add((0)+$2);$8.add($9+$1);$8.add((-$A)+$2);$8.add($A+$1);$8.add((-$9)+$2);$8.add((0)+$1);$8.add((-$A)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))/2;var $D=($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))/4;$B.add((-$D)+$1);$B.add((-$C)+$2);$B.add((-$C)+$1);$B.add((-$D)+$2);$B.add((-$D)+$1);$B.add((0)+$2);$B.add((-$C)+$1);$B.add($D+$2);$B.add((-$D)+$1);$B.add($C+$2);$B.add((0)+$1);$B.add($D+$2);$B.add($D+$1);$B.add($C+$2);$B.add($C+$1);$B.add($D+$2);$B.add($D+$1);$B.add((0)+$2);$B.add($C+$1);$B.add((-$D)+$2);$B.add($D+$1);$B.add((-$C)+$2);$B.add((0)+$1);$B.add((-$D)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$78=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))/2;var $A=($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))/4;$8.add((-$A)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add((-$A)+$2);$8.add((-$A)+$1);$8.add((0)+$2);$8.add((-$9)+$1);$8.add($A+$2);$8.add((-$A)+$1);$8.add($9+$2);$8.add((0)+$1);$8.add($A+$2);$8.add($A+$1);$8.add($9+$2);$8.add($9+$1);$8.add($A+$2);$8.add($A+$1);$8.add((0)+$2);$8.add($9+$1);$8.add((-$A)+$2);$8.add($A+$1);$8.add((-$9)+$2);$8.add((0)+$1);$8.add((-$A)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))/2;var $D=($p1.getMarkProperty('width',$p2)*(1+(-0.75/12)))/4;$B.add((-$D)+$1);$B.add((-$C)+$2);$B.add((-$C)+$1);$B.add((-$D)+$2);$B.add((-$D)+$1);$B.add((0)+$2);$B.add((-$C)+$1);$B.add($D+$2);$B.add((-$D)+$1);$B.add($C+$2);$B.add((0)+$1);$B.add($D+$2);$B.add($D+$1);$B.add($C+$2);$B.add($C+$1);$B.add($D+$2);$B.add($D+$1);$B.add((0)+$2);$B.add($C+$1);$B.add((-$D)+$2);$B.add($D+$1);$B.add((-$C)+$2);$B.add((0)+$1);$B.add((-$D)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$7A=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(0.5/12)))+3)/2;$8.add((0)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add((0)+$2);$8.add((0)+$1);$8.add($9+$2);$8.add($9+$1);$8.add((0)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $A=[];var $B=(($p1.getMarkProperty('width',$p2)*(1+(0.5/12)))+3)/2;$A.add((0)+$1);$A.add((-$B)+$2);$A.add((-$B)+$1);$A.add((0)+$2);$A.add((0)+$1);$A.add($B+$2);$A.add($B+$1);$A.add((0)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$A,true,true);}}
tab.MarksRenderer.$7B=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(0.5/12)))+4)/2;$8.add((0)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add((0)+$2);$8.add((0)+$1);$8.add($9+$2);$8.add($9+$1);$8.add((0)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $A=[];var $B=(($p1.getMarkProperty('width',$p2)*(1+(0.5/12)))+4)/2;$A.add((0)+$1);$A.add((-$B)+$2);$A.add((-$B)+$1);$A.add((0)+$2);$A.add((0)+$1);$A.add($B+$2);$A.add($B+$1);$A.add((0)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$A,true,true);}}
tab.MarksRenderer.$7D=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=($p1.getMarkProperty('width',$p2)*(1+(0.5/12)))/2;$8.add((0)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add((0)+$2);$8.add((0)+$1);$8.add($9+$2);$8.add($9+$1);$8.add((0)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $A=[];var $B=($p1.getMarkProperty('width',$p2)*(1+(0.5/12)))/2;$A.add((0)+$1);$A.add((-$B)+$2);$A.add((-$B)+$1);$A.add((0)+$2);$A.add((0)+$1);$A.add($B+$2);$A.add($B+$1);$A.add((0)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$A,true,true);}}
tab.MarksRenderer.$7E=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(0.5/12)))+2)/2;$8.add((0)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add((0)+$2);$8.add((0)+$1);$8.add($9+$2);$8.add($9+$1);$8.add((0)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $A=[];var $B=(($p1.getMarkProperty('width',$p2)*(1+(0.5/12)))+2)/2;$A.add((0)+$1);$A.add((-$B)+$2);$A.add((-$B)+$1);$A.add((0)+$2);$A.add((0)+$1);$A.add($B+$2);$A.add($B+$1);$A.add((0)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$A,true,true);}}
tab.MarksRenderer.$80=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+3)/2;var $A=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+6)/2;$8.add((0)+$1);$8.add((-$A)+$2);$8.add((-$9)+$1);$8.add($9+$2);$8.add($9+$1);$8.add($9+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+3)/2;var $D=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+6)/2;$B.add((0)+$1);$B.add((-$D)+$2);$B.add((-$C)+$1);$B.add($C+$2);$B.add($C+$1);$B.add($C+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$81=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+4)/2;var $A=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+8)/2;$8.add((0)+$1);$8.add((-$A)+$2);$8.add((-$9)+$1);$8.add($9+$2);$8.add($9+$1);$8.add($9+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+4)/2;var $D=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+8)/2;$B.add((0)+$1);$B.add((-$D)+$2);$B.add((-$C)+$1);$B.add($C+$2);$B.add($C+$1);$B.add($C+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$83=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=($p1.getMarkProperty('width',$p2)*(1+(-1/12)))/2;$8.add((0)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add($9+$2);$8.add($9+$1);$8.add($9+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $A=[];var $B=($p1.getMarkProperty('width',$p2)*(1+(-1/12)))/2;$A.add((0)+$1);$A.add((-$B)+$2);$A.add((-$B)+$1);$A.add($B+$2);$A.add($B+$1);$A.add($B+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$A,true,true);}}
tab.MarksRenderer.$84=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1/12)))+1)/2;$8.add((0)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add($9+$2);$8.add($9+$1);$8.add($9+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $A=[];var $B=(($p1.getMarkProperty('width',$p2)*(1+(-1/12)))+1)/2;$A.add((0)+$1);$A.add((-$B)+$2);$A.add((-$B)+$1);$A.add($B+$2);$A.add($B+$1);$A.add($B+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$A,true,true);}}
tab.MarksRenderer.$86=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+2.5)/2;var $A=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+6)/2;$8.add((0)+$1);$8.add($A+$2);$8.add((-$9)+$1);$8.add((-$9)+$2);$8.add($9+$1);$8.add((-$9)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+2.5)/2;var $D=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+6)/2;$B.add((0)+$1);$B.add($D+$2);$B.add((-$C)+$1);$B.add((-$C)+$2);$B.add($C+$1);$B.add((-$C)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$87=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+4)/2;var $A=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+8)/2;$8.add((0)+$1);$8.add($A+$2);$8.add((-$9)+$1);$8.add((-$9)+$2);$8.add($9+$1);$8.add((-$9)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+4)/2;var $D=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+8)/2;$B.add((0)+$1);$B.add($D+$2);$B.add((-$C)+$1);$B.add((-$C)+$2);$B.add($C+$1);$B.add((-$C)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$89=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=($p1.getMarkProperty('width',$p2)*(1+(-1/12)))/2;$8.add((0)+$1);$8.add($9+$2);$8.add((-$9)+$1);$8.add((-$9)+$2);$8.add($9+$1);$8.add((-$9)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $A=[];var $B=($p1.getMarkProperty('width',$p2)*(1+(-1/12)))/2;$A.add((0)+$1);$A.add($B+$2);$A.add((-$B)+$1);$A.add((-$B)+$2);$A.add($B+$1);$A.add((-$B)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$A,true,true);}}
tab.MarksRenderer.$8A=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1/12)))+1)/2;$8.add((0)+$1);$8.add($9+$2);$8.add((-$9)+$1);$8.add((-$9)+$2);$8.add($9+$1);$8.add((-$9)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $A=[];var $B=(($p1.getMarkProperty('width',$p2)*(1+(-1/12)))+1)/2;$A.add((0)+$1);$A.add($B+$2);$A.add((-$B)+$1);$A.add((-$B)+$2);$A.add($B+$1);$A.add((-$B)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$A,true,true);}}
tab.MarksRenderer.$8C=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+3)/2;var $A=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+6)/2;$8.add((-$A)+$1);$8.add((0)+$2);$8.add($9+$1);$8.add((-$9)+$2);$8.add($9+$1);$8.add($9+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+3)/2;var $D=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+6)/2;$B.add((-$D)+$1);$B.add((0)+$2);$B.add($C+$1);$B.add((-$C)+$2);$B.add($C+$1);$B.add($C+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$8D=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+4)/2;var $A=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+8)/2;$8.add((-$A)+$1);$8.add((0)+$2);$8.add($9+$1);$8.add((-$9)+$2);$8.add($9+$1);$8.add($9+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+4)/2;var $D=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+8)/2;$B.add((-$D)+$1);$B.add((0)+$2);$B.add($C+$1);$B.add((-$C)+$2);$B.add($C+$1);$B.add($C+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$8F=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=($p1.getMarkProperty('width',$p2)*(1+(-1/12)))/2;$8.add((-$9)+$1);$8.add((0)+$2);$8.add($9+$1);$8.add((-$9)+$2);$8.add($9+$1);$8.add($9+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $A=[];var $B=($p1.getMarkProperty('width',$p2)*(1+(-1/12)))/2;$A.add((-$B)+$1);$A.add((0)+$2);$A.add($B+$1);$A.add((-$B)+$2);$A.add($B+$1);$A.add($B+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$A,true,true);}}
tab.MarksRenderer.$90=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1/12)))+1)/2;$8.add((-$9)+$1);$8.add((0)+$2);$8.add($9+$1);$8.add((-$9)+$2);$8.add($9+$1);$8.add($9+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $A=[];var $B=(($p1.getMarkProperty('width',$p2)*(1+(-1/12)))+1)/2;$A.add((-$B)+$1);$A.add((0)+$2);$A.add($B+$1);$A.add((-$B)+$2);$A.add($B+$1);$A.add($B+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$A,true,true);}}
tab.MarksRenderer.$92=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+3)/2;var $A=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+6)/2;$8.add((-$9)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add($9+$2);$8.add($A+$1);$8.add((0)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+3)/2;var $D=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+6)/2;$B.add((-$C)+$1);$B.add((-$C)+$2);$B.add((-$C)+$1);$B.add($C+$2);$B.add($D+$1);$B.add((0)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$93=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+4)/2;var $A=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+8)/2;$8.add((-$9)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add($9+$2);$8.add($A+$1);$8.add((0)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $B=[];var $C=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+4)/2;var $D=(($p1.getMarkProperty('width',$p2)*(1+(-1.25/12)))+8)/2;$B.add((-$C)+$1);$B.add((-$C)+$2);$B.add((-$C)+$1);$B.add($C+$2);$B.add($D+$1);$B.add((0)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$B,true,true);}}
tab.MarksRenderer.$95=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=($p1.getMarkProperty('width',$p2)*(1+(-1/12)))/2;$8.add((-$9)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add($9+$2);$8.add($9+$1);$8.add((0)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $A=[];var $B=($p1.getMarkProperty('width',$p2)*(1+(-1/12)))/2;$A.add((-$B)+$1);$A.add((-$B)+$2);$A.add((-$B)+$1);$A.add($B+$2);$A.add($B+$1);$A.add((0)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$A,true,true);}}
tab.MarksRenderer.$96=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=(($p1.getMarkProperty('width',$p2)*(1+(-1/12)))+1)/2;$8.add((-$9)+$1);$8.add((-$9)+$2);$8.add((-$9)+$1);$8.add($9+$2);$8.add($9+$1);$8.add((0)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $A=[];var $B=(($p1.getMarkProperty('width',$p2)*(1+(-1/12)))+1)/2;$A.add((-$B)+$1);$A.add((-$B)+$2);$A.add((-$B)+$1);$A.add($B+$2);$A.add($B+$1);$A.add((0)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$A,true,true);}}
tab.MarksRenderer.$98=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=($p1.getMarkProperty('width',$p2)*(1+(1.1/12)))+2;var $A=$9*0.3877;var $B=$9/2;$8.add((0)+$1);$8.add((-$B+($9*0.0246))+$2);$8.add((-$B+($9*0.3817))+$1);$8.add((-$B+$A)+$2);$8.add((-$B)+$1);$8.add((-$B+$A)+$2);$8.add((-$B+($9*0.3088))+$1);$8.add((-$B+($9*0.612))+$2);$8.add((-$B+($9*0.1909))+$1);$8.add((-$B+($9*0.9751))+$2);$8.add((0)+$1);$8.add((-$B+($9*0.7507))+$2);$8.add((-$B+($9*0.8085))+$1);$8.add((-$B+($9*0.9751))+$2);$8.add((-$B+($9*0.6905))+$1);$8.add((-$B+($9*0.612))+$2);$8.add($B+$1);$8.add((-$B+$A)+$2);$8.add((-$B+($9*0.6176))+$1);$8.add((-$B+$A)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $C=[];var $D=($p1.getMarkProperty('width',$p2)*(1+(1.1/12)))+2;var $E=$D*0.3877;var $F=$D/2;$C.add((0)+$1);$C.add((-$F+($D*0.0246))+$2);$C.add((-$F+($D*0.3817))+$1);$C.add((-$F+$E)+$2);$C.add((-$F)+$1);$C.add((-$F+$E)+$2);$C.add((-$F+($D*0.3088))+$1);$C.add((-$F+($D*0.612))+$2);$C.add((-$F+($D*0.1909))+$1);$C.add((-$F+($D*0.9751))+$2);$C.add((0)+$1);$C.add((-$F+($D*0.7507))+$2);$C.add((-$F+($D*0.8085))+$1);$C.add((-$F+($D*0.9751))+$2);$C.add((-$F+($D*0.6905))+$1);$C.add((-$F+($D*0.612))+$2);$C.add($F+$1);$C.add((-$F+$E)+$2);$C.add((-$F+($D*0.6176))+$1);$C.add((-$F+$E)+$2);$p0.set_lineWidth(1);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$C,true,true);}}
tab.MarksRenderer.$99=function($p0,$p1,$p2){var $0=($p1.getMarkProperty('selected_halo_color',$p2))['colorOverrideNone'];var $1=$p1.getMarkProperty('x',$p2);var $2=$p1.getMarkProperty('y',$p2);if($p1.get_isWrappedDomain()){var $3=$p1.getMarkBounds($p2);var $4=$p1.pixelToDomainX($3.x);var $5=$p1.pixelToDomainX($3.x+$3.w);var $6=$p1.getMarkInstances($4,$5);for(var $7=$6.first;$7<=$6.second;++$7){$p0.save();$p0.translate($p1.getWorldOffset($7),0);var $8=[];var $9=($p1.getMarkProperty('width',$p2)*(1+(1.1/12)))+4;var $A=$9*0.3877;var $B=$9/2;$8.add((0)+$1);$8.add((-$B+($9*0.0246))+$2);$8.add((-$B+($9*0.3817))+$1);$8.add((-$B+$A)+$2);$8.add((-$B)+$1);$8.add((-$B+$A)+$2);$8.add((-$B+($9*0.3088))+$1);$8.add((-$B+($9*0.612))+$2);$8.add((-$B+($9*0.1909))+$1);$8.add((-$B+($9*0.9751))+$2);$8.add((0)+$1);$8.add((-$B+($9*0.7507))+$2);$8.add((-$B+($9*0.8085))+$1);$8.add((-$B+($9*0.9751))+$2);$8.add((-$B+($9*0.6905))+$1);$8.add((-$B+($9*0.612))+$2);$8.add($B+$1);$8.add((-$B+$A)+$2);$8.add((-$B+($9*0.6176))+$1);$8.add((-$B+$A)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$8,true,true);$p0.restore();}}else{var $C=[];var $D=($p1.getMarkProperty('width',$p2)*(1+(1.1/12)))+4;var $E=$D*0.3877;var $F=$D/2;$C.add((0)+$1);$C.add((-$F+($D*0.0246))+$2);$C.add((-$F+($D*0.3817))+$1);$C.add((-$F+$E)+$2);$C.add((-$F)+$1);$C.add((-$F+$E)+$2);$C.add((-$F+($D*0.3088))+$1);$C.add((-$F+($D*0.612))+$2);$C.add((-$F+($D*0.1909))+$1);$C.add((-$F+($D*0.9751))+$2);$C.add((0)+$1);$C.add((-$F+($D*0.7507))+$2);$C.add((-$F+($D*0.8085))+$1);$C.add((-$F+($D*0.9751))+$2);$C.add((-$F+($D*0.6905))+$1);$C.add((-$F+($D*0.612))+$2);$C.add($F+$1);$C.add((-$F+$E)+$2);$C.add((-$F+($D*0.6176))+$1);$C.add((-$F+$E)+$2);$p0.set_lineWidth(2);$p0.set_strokeStyle($0);$p0.set_lineJoin('miter');tab.CanvasRenderer.strokePath($p0,$C,true,true);}}
tab.MarksRenderer.prototype={$39:function($p0,$p1){var $0=$p0.get_markCount();var $1=$p0.get_hasSelection();var $2=$p0.get_hasBrushing();var $3='colorOverrideNone';this.get_currentContext().save();switch($p1){case 'normalUnderPass':if($p0.get_hasBackground()&&$p0.get_hasHalos()){if(($1||$2)){$3='colorOverrideFog';}else{$3='colorOverrideNone';}for(var $4=0;$4<$0;$4++){if(!$p0.markNeedsDraw($4)){continue;}if($p0.getMarkState($4)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $5=$p0.getMarkBounds($4);var $6=$p0.pixelToDomainX($5.x);var $7=$p0.pixelToDomainX($5.x+$5.w);var $8=$p0.getMarkInstances($6,$7);for(var $9=$8.first;$9<=$8.second;++$9){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($9),0);this.$3A($p0,$4,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$3A($p0,$4,'normalUnder',$3);}}if(($1||$2)){$3='colorOverrideNone';for(var $A=0;$A<$0;$A++){if(!$p0.markNeedsDraw($A)){continue;}if($p0.getMarkState($A)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $B=$p0.getMarkBounds($A);var $C=$p0.pixelToDomainX($B.x);var $D=$p0.pixelToDomainX($B.x+$B.w);var $E=$p0.getMarkInstances($C,$D);for(var $F=$E.first;$F<=$E.second;++$F){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($F),0);this.$3A($p0,$A,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$3A($p0,$A,'normalUnder',$3);}}}}break;case 'normalOnPass':if(($1||$2)){$3='colorOverrideFog';}else{$3='colorOverrideNone';}for(var $10=0;$10<$0;$10++){if(!$p0.markNeedsDraw($10)){continue;}if($p0.getMarkState($10)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $11=$p0.getMarkBounds($10);var $12=$p0.pixelToDomainX($11.x);var $13=$p0.pixelToDomainX($11.x+$11.w);var $14=$p0.getMarkInstances($12,$13);for(var $15=$14.first;$15<=$14.second;++$15){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($15),0);this.$3A($p0,$10,'normalOn',$3);this.get_currentContext().restore();}}else{this.$3A($p0,$10,'normalOn',$3);}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if(($1||$2)){$3='colorOverrideNone';for(var $16=0;$16<$0;$16++){if(!$p0.markNeedsDraw($16)){continue;}if($p0.getMarkState($16)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $17=$p0.getMarkBounds($16);var $18=$p0.pixelToDomainX($17.x);var $19=$p0.pixelToDomainX($17.x+$17.w);var $1A=$p0.getMarkInstances($18,$19);for(var $1B=$1A.first;$1B<=$1A.second;++$1B){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($1B),0);this.$3A($p0,$16,'normalOn',$3);this.get_currentContext().restore();}}else{this.$3A($p0,$16,'normalOn',$3);}}}break;case 'selectedUnderPass':if(($1||$2)){$3='colorOverrideOpaque';for(var $1C=0;$1C<$0;$1C++){if(!$p0.markNeedsDraw($1C)){continue;}if($p0.getMarkState($1C)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $1D=$p0.getMarkBounds($1C);var $1E=$p0.pixelToDomainX($1D.x);var $1F=$p0.pixelToDomainX($1D.x+$1D.w);var $20=$p0.getMarkInstances($1E,$1F);for(var $21=$20.first;$21<=$20.second;++$21){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($21),0);this.$3A($p0,$1C,'selectedUnder',$3);this.get_currentContext().restore();}}else{this.$3A($p0,$1C,'selectedUnder',$3);}}}break;case 'selectedOnPass':if(($1||$2)){$3='colorOverrideOpaque';for(var $22=0;$22<$0;$22++){if(!$p0.markNeedsDraw($22)){continue;}if($p0.getMarkState($22)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $23=$p0.getMarkBounds($22);var $24=$p0.pixelToDomainX($23.x);var $25=$p0.pixelToDomainX($23.x+$23.w);var $26=$p0.getMarkInstances($24,$25);for(var $27=$26.first;$27<=$26.second;++$27){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($27),0);this.$3A($p0,$22,'normalOn',$3);this.get_currentContext().restore();}}else{this.$3A($p0,$22,'normalOn',$3);}}}break;}this.get_currentContext().restore();},$3A:function($p0,$p1,$p2,$p3){if(!!$p0.get_clipCase()){this.get_currentContext().save();this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p2){case 'normalUnder':case 'selectedUnder':case 'normalOn':tab.CanvasRenderer.createMultipolygonPath(this.get_currentContext(),$p0.hasPixelGeometry,$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('size',$p1),7,$p0.getMarkGeometry($p0.getMarkProperty('geometry',$p1)));break;default:break;}var $0=($p2!=='normalOn')?0:tab.CanvasRenderer.get_multipolyLineSizeOffset();switch($p2){case 'normalUnder':this.strokeCurrentPath(2-$0,($p0.getMarkProperty('halo_color',$p1))[$p3]);break;case 'selectedUnder':this.strokeCurrentPath(2-$0,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);break;case 'normalOn':this.fillCurrentPath(($p0.getMarkProperty('color',$p1))[$p3]);if($p0.getMarkProperty('draw_border',$p1)){this.strokeCurrentPath(1-$0,($p0.getMarkProperty('border_color',$p1))[$p3]);}break;default:break;}if(!!$p0.get_clipCase()){this.get_currentContext().restore();}},$3D:function($p0,$p1){var $0=$p0.get_hasSelection();var $1=$p0.get_hasBrushing();var $2='colorOverrideNone';var $3=$p0.get_lineDrawState();this.get_currentContext().save();switch($p1){case 'normalUnderPass':break;case 'normalOnPass':if($0||$1){$2='colorOverrideFog';}else{$2='colorOverrideNone';}var $enum1=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum1.moveNext()){var $4=$enum1.current;if($4.get_lineState()!=='lineStateNormal'){continue;}var $5;if($p0.get_isWrappedDomain()){$5=$p0.getMarkInstances($4.minXDomain,$4.maxXDomain);}else{$5=new ss.Tuple(0,0);}for(var $6=$5.first;$6<=$5.second;++$6){if(!!$6){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($6),0);}for(var $7=$4.startIndex;$7<=$4.endIndex;$7++){if(!$p0.markNeedsDraw($7)){continue;}this.$3E($p0,$7,$4.startIndex,'edgeOn',$2);}if(!!$6){this.get_currentContext().restore();}}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if($0||$1){$2='colorOverrideNone';var $enum2=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum2.moveNext()){var $8=$enum2.current;if($8.get_lineState()!=='lineStateHighlighted'){continue;}var $9;if($p0.get_isWrappedDomain()){$9=$p0.getMarkInstances($8.minXDomain,$8.maxXDomain);}else{$9=new ss.Tuple(0,0);}for(var $A=$9.first;$A<=$9.second;++$A){if(!!$A){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($A),0);}for(var $B=$8.startIndex;$B<=$8.endIndex;$B++){if(!$p0.markNeedsDraw($B)){continue;}this.$3E($p0,$B,$8.startIndex,'edgeOn',$2);}if(!!$A){this.get_currentContext().restore();}}}var $enum3=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum3.moveNext()){var $C=$enum3.current;if($C.get_lineState()!=='lineStateHighlighted'){continue;}var $D;if($p0.get_isWrappedDomain()){$D=$p0.getMarkInstances($C.minXDomain,$C.maxXDomain);}else{$D=new ss.Tuple(0,0);}for(var $E=$D.first;$E<=$D.second;++$E){if(!!$E){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($E),0);}if(!$C.get_allHighlighted()){for(var $F=$C.startIndex;$F<=$C.endIndex;$F++){if(!$p0.markNeedsDraw($F)){continue;}if($p0.isMarkHighlighted($F)){this.$3E($p0,$F,$C.startIndex,'highlightedUnder1',$2);this.$3E($p0,$F,$C.startIndex,'highlightedUnder',$2);}}for(var $10=$C.startIndex;$10<=$C.endIndex;$10++){if(!$p0.markNeedsDraw($10)){continue;}if($p0.isMarkHighlighted($10)){this.$3E($p0,$10,$C.startIndex,'highlightedOn1',$2);this.$3E($p0,$10,$C.startIndex,'highlightedOn',$2);}}}if(!!$E){this.get_currentContext().restore();}}}}break;case 'selectedUnderPass':break;case 'selectedOnPass':if($0||$1){$2='colorOverrideOpaque';var $enum4=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum4.moveNext()){var $11=$enum4.current;if($11.get_lineState()!=='lineStateSelected'){continue;}var $12;if($p0.get_isWrappedDomain()){$12=$p0.getMarkInstances($11.minXDomain,$11.maxXDomain);}else{$12=new ss.Tuple(0,0);}for(var $13=$12.first;$13<=$12.second;++$13){if(!!$13){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($13),0);}for(var $14=$11.startIndex;$14<=$11.endIndex;$14++){if(!$p0.markNeedsDraw($14)){continue;}this.$3E($p0,$14,$11.startIndex,'edgeOn',$2);}if(!!$13){this.get_currentContext().restore();}}}var $enum5=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum5.moveNext()){var $15=$enum5.current;if($15.get_lineState()!=='lineStateSelected'){continue;}var $16;if($p0.get_isWrappedDomain()){$16=$p0.getMarkInstances($15.minXDomain,$15.maxXDomain);}else{$16=new ss.Tuple(0,0);}for(var $17=$16.first;$17<=$16.second;++$17){if(!!$17){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($17),0);}if(!$15.get_allHighlighted()){for(var $18=$15.startIndex;$18<=$15.endIndex;$18++){if(!$p0.markNeedsDraw($18)){continue;}if($p0.isMarkHighlighted($18)&&!$p0.isMarkSelected($18)){this.$3E($p0,$18,$15.startIndex,'highlightedUnder1',$2);this.$3E($p0,$18,$15.startIndex,'highlightedUnder',$2);}}for(var $19=$15.startIndex;$19<=$15.endIndex;$19++){if(!$p0.markNeedsDraw($19)){continue;}if($p0.isMarkHighlighted($19)&&!$p0.isMarkSelected($19)){this.$3E($p0,$19,$15.startIndex,'highlightedOn1',$2);this.$3E($p0,$19,$15.startIndex,'highlightedOn',$2);}}}if(!!$17){this.get_currentContext().restore();}}}var $enum6=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum6.moveNext()){var $1A=$enum6.current;if($1A.get_lineState()!=='lineStateSelected'){continue;}var $1B;if($p0.get_isWrappedDomain()){$1B=$p0.getMarkInstances($1A.minXDomain,$1A.maxXDomain);}else{$1B=new ss.Tuple(0,0);}for(var $1C=$1B.first;$1C<=$1B.second;++$1C){if(!!$1C){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($1C),0);}for(var $1D=$1A.startIndex;$1D<=$1A.endIndex;$1D++){if(!$p0.markNeedsDraw($1D)){continue;}if($p0.isMarkSelected($1D)){this.$3E($p0,$1D,$1A.startIndex,'selectedUnder1',$2);this.$3E($p0,$1D,$1A.startIndex,'selectedUnder',$2);}}for(var $1E=$1A.startIndex;$1E<=$1A.endIndex;$1E++){if(!$p0.markNeedsDraw($1E)){continue;}if($p0.isMarkSelected($1E)){this.$3E($p0,$1E,$1A.startIndex,'selectedOn1',$2);this.$3E($p0,$1E,$1A.startIndex,'selectedOn',$2);}}if(!!$1C){this.get_currentContext().restore();}}}}break;}this.get_currentContext().restore();},$3E:function($p0,$p1,$p2,$p3,$p4){var $0=$p0.getLeft($p1);var $1=$p0.getRight($p1);if(!!$p0.get_clipCase()){this.get_currentContext().save();this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p3){case 'edgeOn':if($p0.getRight($p1)!==-1){var $2=[];$2.add(Math.round($p0.getMarkProperty('x1',$p1)));$2.add($p0.getMarkProperty('y1',$p1));$2.add(Math.round($p0.getMarkProperty('x1',$1)));$2.add($p0.getMarkProperty('y1',$1));$2.add(Math.round($p0.getMarkProperty('x_prev',$1)));$2.add($p0.getMarkProperty('y_prev',$1));$2.add(Math.round($p0.getMarkProperty('x_next',$p1)));$2.add($p0.getMarkProperty('y_next',$p1));this.get_currentContext().set_lineJoin('miter');this.renderFilledPolygon($2,($p0.getMarkProperty('color',$p2))[$p4]);}if($p0.get_drawBorder()&&$p0.getRight($p1)!==-1){var $3=[];$3.add($p0.getMarkProperty('x1',$p1));$3.add($p0.getMarkProperty('y1',$p1));$3.add($p0.getMarkProperty('x1',$1));$3.add($p0.getMarkProperty('y1',$1));this.renderLine($3,1,($p0.getMarkProperty('border_color',$p1))[$p4],true);}if($p0.get_drawBorder()&&$p0.getRight($p1)!==-1){var $4=[];$4.add($p0.getMarkProperty('x_next',$p1));$4.add($p0.getMarkProperty('y_next',$p1));$4.add($p0.getMarkProperty('x_prev',$1));$4.add($p0.getMarkProperty('y_prev',$1));this.renderLine($4,1,($p0.getMarkProperty('border_color',$p1))[$p4],true);}if($p0.get_drawBorder()&&($p0.getLeft($p1)!==-1&&$p0.getRight($p1)!==-1)){var $5=[];$5.add($p0.getMarkProperty('x_prev',$p1));$5.add($p0.getMarkProperty('y_prev',$p1));$5.add($p0.getMarkProperty('x_next',$p1));$5.add($p0.getMarkProperty('y_next',$p1));this.renderLine($5,1,($p0.getMarkProperty('border_color',$p1))[$p4],true);}if($p0.get_drawBorder()&&$p0.getLeft($p1)===-1){var $6=[];$6.add($p0.getMarkProperty('x1',$p1));$6.add($p0.getMarkProperty('y1',$p1));$6.add($p0.getMarkProperty('x_next',$p1));$6.add($p0.getMarkProperty('y_next',$p1));this.renderLine($6,1,($p0.getMarkProperty('border_color',$p1))[$p4],true);}if($p0.get_drawBorder()&&$p0.getRight($p1)===-1){var $7=[];$7.add($p0.getMarkProperty('x1',$p1));$7.add($p0.getMarkProperty('y1',$p1));$7.add($p0.getMarkProperty('x_prev',$p1));$7.add($p0.getMarkProperty('y_prev',$p1));this.renderLine($7,1,($p0.getMarkProperty('border_color',$p1))[$p4],true);}if(!$p0.get_drawBorder()&&$p0.getRight($p1)!==-1){var $8=[];$8.add($p0.getMarkProperty('x1',$p1));$8.add($p0.getMarkProperty('y1',$p1));$8.add($p0.getMarkProperty('x1',$1));$8.add($p0.getMarkProperty('y1',$1));this.renderLine($8,1,($p0.getMarkProperty('color',$p2))[$p4],true);}if(!$p0.get_drawBorder()&&$p0.getRight($p1)!==-1){var $9=[];$9.add($p0.getMarkProperty('x_next',$p1));$9.add($p0.getMarkProperty('y_next',$p1));$9.add($p0.getMarkProperty('x_prev',$1));$9.add($p0.getMarkProperty('y_prev',$1));this.renderLine($9,1,($p0.getMarkProperty('color',$p2))[$p4],true);}if(!$p0.get_drawBorder()&&($p0.getLeft($p1)!==-1&&$p0.getRight($p1)!==-1)){var $A=[];$A.add($p0.getMarkProperty('x_prev',$p1));$A.add($p0.getMarkProperty('y_prev',$p1));$A.add($p0.getMarkProperty('x_next',$p1));$A.add($p0.getMarkProperty('y_next',$p1));this.renderLine($A,1,($p0.getMarkProperty('color',$p2))[$p4],true);}if(!$p0.get_drawBorder()&&$p0.getLeft($p1)===-1){var $B=[];$B.add($p0.getMarkProperty('x1',$p1));$B.add($p0.getMarkProperty('y1',$p1));$B.add($p0.getMarkProperty('x_next',$p1));$B.add($p0.getMarkProperty('y_next',$p1));this.renderLine($B,1,($p0.getMarkProperty('color',$p2))[$p4],true);}if(!$p0.get_drawBorder()&&$p0.getRight($p1)===-1){var $C=[];$C.add($p0.getMarkProperty('x1',$p1));$C.add($p0.getMarkProperty('y1',$p1));$C.add($p0.getMarkProperty('x_prev',$p1));$C.add($p0.getMarkProperty('y_prev',$p1));this.renderLine($C,1,($p0.getMarkProperty('color',$p2))[$p4],true);}break;case 'selectedOn':tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+$p0.getMarkProperty('x1',$p1),0+$p0.getMarkProperty('y1',$p1),5,($p0.getMarkProperty('color',$p1))[$p4]);break;case 'selectedUnder':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x1',$p1),0+$p0.getMarkProperty('y1',$p1),5,($p0.getMarkProperty('selected_halo_color',$p1))[$p4],4);break;case 'selectedOn1':tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),5,($p0.getMarkProperty('color',$p1))[$p4]);break;case 'selectedUnder1':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),5,($p0.getMarkProperty('selected_halo_color',$p1))[$p4],4);break;case 'highlightedOn':tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+$p0.getMarkProperty('x1',$p1),0+$p0.getMarkProperty('y1',$p1),5,($p0.getMarkProperty('color',$p1))[$p4]);break;case 'highlightedUnder':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x1',$p1),0+$p0.getMarkProperty('y1',$p1),5,($p0.getMarkProperty('selected_multi_prim_halo_color',$p1))[$p4],4);break;case 'highlightedOn1':tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),5,($p0.getMarkProperty('color',$p1))[$p4]);break;case 'highlightedUnder1':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),5,($p0.getMarkProperty('selected_multi_prim_halo_color',$p1))[$p4],4);break;default:break;}if(!!$p0.get_clipCase()){this.get_currentContext().restore();}},$41:function($p0,$p1){var $0=$p0.get_markCount();var $1=$p0.get_hasSelection();var $2=$p0.get_hasBrushing();var $3='colorOverrideNone';this.get_currentContext().save();var $4=this.setupContextForTextRendering($p0);switch($p1){case 'normalUnderPass':if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}var $5=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $6=0;$6<$0;$6++){if(!$p0.markHasLabel($6)||!$p0.markLabelNeedsDraw($6,$5)){continue;}if($p0.getMarkLabelState($6)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $7=$p0.getMarkBounds($6);var $8=$p0.pixelToDomainX($7.x);var $9=$p0.pixelToDomainX($7.x+$7.w);var $A=$p0.getMarkInstances($8,$9);for(var $B=$A.first;$B<=$A.second;++$B){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($B),0);this.$42($p0,$6,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$42($p0,$6,'normalUnder',$3);}}$3='colorOverrideNone';var $C=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $D=0;$D<$0;$D++){if(!$p0.markHasLabel($D)||!$p0.markLabelNeedsDraw($D,$C)){continue;}if($p0.getMarkLabelState($D)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $E=$p0.getMarkBounds($D);var $F=$p0.pixelToDomainX($E.x);var $10=$p0.pixelToDomainX($E.x+$E.w);var $11=$p0.getMarkInstances($F,$10);for(var $12=$11.first;$12<=$11.second;++$12){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($12),0);this.$42($p0,$D,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$42($p0,$D,'normalUnder',$3);}}$3='colorOverrideNone';var $13=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $14=0;$14<$0;$14++){if(!$p0.markHasLabel($14)||!$p0.markLabelNeedsDraw($14,$13)){continue;}if($p0.getMarkLabelState($14)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $15=$p0.getMarkBounds($14);var $16=$p0.pixelToDomainX($15.x);var $17=$p0.pixelToDomainX($15.x+$15.w);var $18=$p0.getMarkInstances($16,$17);for(var $19=$18.first;$19<=$18.second;++$19){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($19),0);this.$42($p0,$14,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$42($p0,$14,'normalUnder',$3);}}break;case 'normalOnPass':if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}var $1A=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $1B=0;$1B<$0;$1B++){if(!$p0.markHasLabel($1B)||!$p0.markLabelNeedsDraw($1B,$1A)){continue;}if($p0.getMarkLabelState($1B)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $1C=$p0.getMarkBounds($1B);var $1D=$p0.pixelToDomainX($1C.x);var $1E=$p0.pixelToDomainX($1C.x+$1C.w);var $1F=$p0.getMarkInstances($1D,$1E);for(var $20=$1F.first;$20<=$1F.second;++$20){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($20),0);var $21=this.get_currentContext().get_textAlign()==='end';var $22=$p0.getMarkLabelProperty('text_run_offset',$1B);var $23=$p0.getMarkLabelProperty('text_run_count',$1B);var $24=$23>1;for(var $25=0;$25<$23;$25++){var $26=$25+$22;if($21){$26=$22+$23-$25-1;}this.$43($p0,$1B,$26,$24,'normalOn',$3,$4);}this.clearPrevTextRunInfo();this.get_currentContext().restore();}}else{var $27=this.get_currentContext().get_textAlign()==='end';var $28=$p0.getMarkLabelProperty('text_run_offset',$1B);var $29=$p0.getMarkLabelProperty('text_run_count',$1B);var $2A=$29>1;for(var $2B=0;$2B<$29;$2B++){var $2C=$2B+$28;if($27){$2C=$28+$29-$2B-1;}this.$43($p0,$1B,$2C,$2A,'normalOn',$3,$4);}this.clearPrevTextRunInfo();}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if($1||$2){$3='colorOverrideNone';var $2D=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $2E=0;$2E<$0;$2E++){if(!$p0.markHasLabel($2E)||!$p0.markLabelNeedsDraw($2E,$2D)){continue;}if($p0.getMarkLabelState($2E)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $2F=$p0.getMarkBounds($2E);var $30=$p0.pixelToDomainX($2F.x);var $31=$p0.pixelToDomainX($2F.x+$2F.w);var $32=$p0.getMarkInstances($30,$31);for(var $33=$32.first;$33<=$32.second;++$33){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($33),0);var $34=this.get_currentContext().get_textAlign()==='end';var $35=$p0.getMarkLabelProperty('text_run_offset',$2E);var $36=$p0.getMarkLabelProperty('text_run_count',$2E);var $37=$36>1;for(var $38=0;$38<$36;$38++){var $39=$38+$35;if($34){$39=$35+$36-$38-1;}this.$43($p0,$2E,$39,$37,'highlightedOn',$3,$4);}this.clearPrevTextRunInfo();this.get_currentContext().restore();}}else{var $3A=this.get_currentContext().get_textAlign()==='end';var $3B=$p0.getMarkLabelProperty('text_run_offset',$2E);var $3C=$p0.getMarkLabelProperty('text_run_count',$2E);var $3D=$3C>1;for(var $3E=0;$3E<$3C;$3E++){var $3F=$3E+$3B;if($3A){$3F=$3B+$3C-$3E-1;}this.$43($p0,$2E,$3F,$3D,'highlightedOn',$3,$4);}this.clearPrevTextRunInfo();}}}break;case 'selectedUnderPass':if($1||$2){$3='colorOverrideOpaque';var $40=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $41=0;$41<$0;$41++){if(!$p0.markHasLabel($41)||!$p0.markLabelNeedsDraw($41,$40)){continue;}if($p0.getMarkLabelState($41)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $42=$p0.getMarkBounds($41);var $43=$p0.pixelToDomainX($42.x);var $44=$p0.pixelToDomainX($42.x+$42.w);var $45=$p0.getMarkInstances($43,$44);for(var $46=$45.first;$46<=$45.second;++$46){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($46),0);this.$42($p0,$41,'selectedUnder',$3);this.get_currentContext().restore();}}else{this.$42($p0,$41,'selectedUnder',$3);}}}break;case 'selectedOnPass':if($1||$2){$3='colorOverrideOpaque';var $47=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $48=0;$48<$0;$48++){if(!$p0.markHasLabel($48)||!$p0.markLabelNeedsDraw($48,$47)){continue;}if($p0.getMarkLabelState($48)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $49=$p0.getMarkBounds($48);var $4A=$p0.pixelToDomainX($49.x);var $4B=$p0.pixelToDomainX($49.x+$49.w);var $4C=$p0.getMarkInstances($4A,$4B);for(var $4D=$4C.first;$4D<=$4C.second;++$4D){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($4D),0);var $4E=this.get_currentContext().get_textAlign()==='end';var $4F=$p0.getMarkLabelProperty('text_run_offset',$48);var $50=$p0.getMarkLabelProperty('text_run_count',$48);var $51=$50>1;for(var $52=0;$52<$50;$52++){var $53=$52+$4F;if($4E){$53=$4F+$50-$52-1;}this.$43($p0,$48,$53,$51,'normalOn',$3,$4);}this.clearPrevTextRunInfo();this.get_currentContext().restore();}}else{var $54=this.get_currentContext().get_textAlign()==='end';var $55=$p0.getMarkLabelProperty('text_run_offset',$48);var $56=$p0.getMarkLabelProperty('text_run_count',$48);var $57=$56>1;for(var $58=0;$58<$56;$58++){var $59=$58+$55;if($54){$59=$55+$56-$58-1;}this.$43($p0,$48,$59,$57,'normalOn',$3,$4);}this.clearPrevTextRunInfo();}}}break;}this.get_currentContext().restore();},$42:function($p0,$p1,$p2,$p3){if(!!$p0.get_clipCase()){this.get_currentContext().save();this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p2){case 'normalUnder':if($p0.get_hasBackground()&&$p0.get_hasHalos()){var $0=$p0.getMarkLabelProperty('x',$p1);var $1=$p0.getMarkLabelProperty('y',$p1);var $2=$p0.getMarkLabelProperty('width',$p1);var $3=-$p0.getMarkLabelProperty('height',$p1);if($3<0){$1+=$3;$3=Math.abs($3);}var $4=0;var $5=0;var $6;if($p0.isMarkImpliedSelected($p1)){$6=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$6=($p0.getMarkLabelProperty('halo_color',$p1))[$p3];}tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$0+$4,$1+$5,$2,$3,$6,0,0,false);}if($p0.isMarkDebug($p1)){var $7=$p0.getMarkLabelProperty('x',$p1);var $8=$p0.getMarkLabelProperty('y',$p1);var $9=$p0.getMarkLabelProperty('width',$p1);var $A=-$p0.getMarkLabelProperty('height',$p1);if($A<0){$8+=$A;$A=Math.abs($A);}var $B=0;var $C=0;var $D;if($p0.isMarkImpliedSelected($p1)){$D=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$D=($p0.getMarkProperty('halo_color',$p1))[$p3];}tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$7+$B,$8+$C,$9,$A,$D,0,0,false);}break;case 'normalOn':break;case 'highlightedUnder':if($p0.get_hasBackground()&&$p0.get_hasHalos()){var $E=$p0.getMarkLabelProperty('x',$p1);var $F=$p0.getMarkLabelProperty('y',$p1);var $10=$p0.getMarkLabelProperty('width',$p1);var $11=-$p0.getMarkLabelProperty('height',$p1);if($11<0){$F+=$11;$11=Math.abs($11);}var $12=0;var $13=0;var $14;if($p0.isMarkImpliedSelected($p1)){$14=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$14=($p0.getMarkLabelProperty('halo_color',$p1))[$p3];}tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$E+$12,$F+$13,$10,$11,$14,0,0,false);}if($p0.isMarkDebug($p1)){var $15=$p0.getMarkLabelProperty('x',$p1);var $16=$p0.getMarkLabelProperty('y',$p1);var $17=$p0.getMarkLabelProperty('width',$p1);var $18=-$p0.getMarkLabelProperty('height',$p1);if($18<0){$16+=$18;$18=Math.abs($18);}var $19=0;var $1A=0;var $1B;if($p0.isMarkImpliedSelected($p1)){$1B=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$1B=($p0.getMarkProperty('halo_color',$p1))[$p3];}tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$15+$19,$16+$1A,$17,$18,$1B,0,0,false);}break;case 'highlightedOn':break;case 'selectedUnder':break;default:break;}if(!!$p0.get_clipCase()){this.get_currentContext().restore();}},$43:function($p0,$p1,$p2,$p3,$p4,$p5,$p6){if(!!$p0.get_clipCase()){this.get_currentContext().save();this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p4){case 'normalUnder':break;case 'normalOn':var $0=$p0.getTextRunProperty('text_style_id',$p2);$p6($0);var $1=$p0.$3A($0,$p1,$p5);var $2=$p0.getTextRunProperty('text_run',$p2);var $3=$p0.getMarkLabelProperty('x',$p1)+$p0.getTextRunProperty('text_run_x',$p2);var $4=$p0.getMarkLabelProperty('y',$p1)+$p0.getTextRunProperty('text_run_y',$p2);var $5=(this.get_currentContext().get_isTextAngleHorizontal())?$p0.getMarkLabelProperty('width',$p1):$p0.getMarkLabelProperty('height',$p1);this.renderText($2,$3,$4,$5,$1,$p3);break;case 'highlightedUnder':break;case 'highlightedOn':var $6=$p0.getTextRunProperty('text_style_id',$p2);$p6($6);var $7=$p0.$3A($6,$p1,$p5);var $8=$p0.getTextRunProperty('text_run',$p2);var $9=$p0.getMarkLabelProperty('x',$p1)+$p0.getTextRunProperty('text_run_x',$p2);var $A=$p0.getMarkLabelProperty('y',$p1)+$p0.getTextRunProperty('text_run_y',$p2);var $B=(this.get_currentContext().get_isTextAngleHorizontal())?$p0.getMarkLabelProperty('width',$p1):$p0.getMarkLabelProperty('height',$p1);this.renderText($8,$9,$A,$B,$7,$p3);break;case 'selectedUnder':break;default:break;}if(!!$p0.get_clipCase()){this.get_currentContext().restore();}},$44:function($p0,$p1){var $0=$p0.get_markCount();var $1=$p0.get_hasSelection();var $2=$p0.get_hasBrushing();var $3=$p0.get_lineDrawState();var $4='colorOverrideNone';this.get_currentContext().save();switch($p1){case 'normalUnderPass':if($p0.get_hasBackground()&&$p0.get_hasHalos()){if($1||$2){$4='colorOverrideFog';}else{$4='colorOverrideNone';}var $enum1=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum1.moveNext()){var $5=$enum1.current;var $6;if($p0.get_isWrappedDomain()){$6=$p0.getMarkInstances($5.minXDomain,$5.maxXDomain);}else{$6=new ss.Tuple(0,0);}for(var $7=$6.first;$7<=$6.second;++$7){if(!!$7){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($7),0);}for(var $8=$5.startIndex;$8<=$5.endIndex;$8++){if(!$p0.markNeedsDraw($8)){continue;}this.$45($p0,$8,'normalUnder',$4);}if(!!$7){this.get_currentContext().restore();}}}}break;case 'normalOnPass':if($1||$2){$4='colorOverrideFog';}else{$4='colorOverrideNone';}var $enum2=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum2.moveNext()){var $9=$enum2.current;if($9.get_lineState()!=='lineStateNormal'){continue;}var $A;if($p0.get_isWrappedDomain()){$A=$p0.getMarkInstances($9.minXDomain,$9.maxXDomain);}else{$A=new ss.Tuple(0,0);}for(var $B=$A.first;$B<=$A.second;++$B){if(!!$B){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($B),0);}for(var $C=$9.startIndex;$C<=$9.endIndex;$C++){if(!$p0.markNeedsDraw($C)){continue;}this.$45($p0,$C,'normalOn',$4);}if(!!$B){this.get_currentContext().restore();}}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if($1||$2){var $enum3=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum3.moveNext()){var $D=$enum3.current;if($D.get_lineState()!=='lineStateHighlighted'){continue;}var $E;if($p0.get_isWrappedDomain()){$E=$p0.getMarkInstances($D.minXDomain,$D.maxXDomain);}else{$E=new ss.Tuple(0,0);}for(var $F=$E.first;$F<=$E.second;++$F){if(!!$F){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($F),0);}$4='colorOverrideFog';for(var $10=$D.startIndex;$10<=$D.endIndex;$10++){if(!$p0.markNeedsDraw($10)){continue;}if($p0.getMarkState($10)!=='markStateNormal'){continue;}this.$45($p0,$10,'normalOn',$4);}$4='colorOverrideNone';for(var $11=$D.startIndex;$11<=$D.endIndex;$11++){if(!$p0.markNeedsDraw($11)){continue;}if($p0.getMarkState($11)!=='markStateHighlighted'){continue;}this.$45($p0,$11,'highlightedOn',$4);}if(!!$F){this.get_currentContext().restore();}}}}break;case 'selectedUnderPass':break;case 'selectedOnPass':if($1||$2){var $enum4=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum4.moveNext()){var $12=$enum4.current;if($12.get_lineState()!=='lineStateSelected'){continue;}var $13;if($p0.get_isWrappedDomain()){$13=$p0.getMarkInstances($12.minXDomain,$12.maxXDomain);}else{$13=new ss.Tuple(0,0);}for(var $14=$13.first;$14<=$13.second;++$14){if(!!$14){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($14),0);}$4='colorOverrideFog';for(var $15=$12.startIndex;$15<=$12.endIndex;$15++){if(!$p0.markNeedsDraw($15)){continue;}if($p0.getMarkState($15)!=='markStateNormal'){continue;}this.$45($p0,$15,'normalOn',$4);}$4='colorOverrideNone';for(var $16=$12.startIndex;$16<=$12.endIndex;$16++){if(!$p0.markNeedsDraw($16)){continue;}if($p0.getMarkState($16)!=='markStateHighlighted'){continue;}this.$45($p0,$16,'highlightedOn',$4);}$4='colorOverrideOpaque';for(var $17=$12.startIndex;$17<=$12.endIndex;$17++){if(!$p0.markNeedsDraw($17)){continue;}if($p0.getMarkState($17)!=='markStateSelected'){continue;}this.$45($p0,$17,'selectedUnder',$4);}for(var $18=$12.startIndex;$18<=$12.endIndex;$18++){if(!$p0.markNeedsDraw($18)){continue;}if($p0.getMarkState($18)!=='markStateSelected'){continue;}this.$45($p0,$18,'selectedOn',$4);}if(!!$14){this.get_currentContext().restore();}}}}break;}this.get_currentContext().restore();},$45:function($p0,$p1,$p2,$p3){this.get_currentContext().save();if(!!$p0.get_clipCase()){this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p2){case 'normalUnder':var $0=$p0.getMarkProperty('size',$p1)/2;var $1=$p0.getMarkProperty('theta',$p1);var $2=$p0.getMarkProperty('theta1',$p1);var $3=$1>$2;var $4=($p0.getMarkProperty('halo_color',$p1))[$p3];if(Math.abs($1-$2)>=1){tab.CanvasRenderer.renderCircle(this.get_currentContext(),$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$0*2,$4,4);}else{tab.CanvasRenderer.renderWedge(this.get_currentContext(),$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$0,$1,$2,$4,4,$3);}break;case 'normalOn':var $5=$p0.getMarkProperty('size',$p1)/2;var $6=$p0.getMarkProperty('theta',$p1);var $7=$p0.getMarkProperty('theta1',$p1);if($6>$7){var $B=$6;$6=$7;$7=$B;}var $8=$p0.getMarkProperty('x',$p1);var $9=$p0.getMarkProperty('y',$p1);var $A=($p0.getMarkProperty('color',$p1))[$p3];if($p0.getMarkProperty('alpha',$p1)>=1){var $C=tab.CanvasRenderer.toCanvasAngle($6);var $D=tab.CanvasRenderer.toCanvasAngle($7);if(Math.abs($D-$C)>=tab.CanvasRenderer.angleEpsilon){this.get_currentContext().beginPath();this.get_currentContext().set_lineCap('butt');this.get_currentContext().set_lineWidth(1.5);this.get_currentContext().set_strokeStyle($A);this.get_currentContext().moveTo($8,$9);this.get_currentContext().lineTo($8+(Math.cos($C)*$5),$9+(Math.sin($C)*$5));this.get_currentContext().stroke();}}if(Math.abs($6-$7)>=1){tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),$8,$9,$5*2,$A);}else{this.renderFilledWedge($8,$9,$5,$6,$7,$A);}if($p0.getMarkProperty('draw_border',$p1)){var $E=$p0.getMarkProperty('theta',$p1);var $F=$p0.getMarkProperty('theta1',$p1);var $10=$E>$F;var $11=($p0.getMarkProperty('border_color',$p1))[$p3];if(Math.abs($E-$F)>=1){tab.CanvasRenderer.renderCircle(this.get_currentContext(),$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$5*2,$11,1);}else{tab.CanvasRenderer.renderWedge(this.get_currentContext(),$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$5,$E,$F,$11,1,$10);}}break;case 'highlightedUnder':var $12=$p0.getMarkProperty('size',$p1)/2;var $13=$p0.getMarkProperty('theta',$p1);var $14=$p0.getMarkProperty('theta1',$p1);var $15=$13>$14;var $16=($p0.getMarkProperty('halo_color',$p1))[$p3];if(Math.abs($13-$14)>=1){tab.CanvasRenderer.renderCircle(this.get_currentContext(),$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$12*2,$16,4);}else{tab.CanvasRenderer.renderWedge(this.get_currentContext(),$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$12,$13,$14,$16,4,$15);}break;case 'highlightedOn':var $17=$p0.getMarkProperty('size',$p1)/2;var $18=$p0.getMarkProperty('theta',$p1);var $19=$p0.getMarkProperty('theta1',$p1);if($18>$19){var $1D=$18;$18=$19;$19=$1D;}var $1A=$p0.getMarkProperty('x',$p1);var $1B=$p0.getMarkProperty('y',$p1);var $1C=($p0.getMarkProperty('color',$p1))[$p3];if($p0.getMarkProperty('alpha',$p1)>=1){var $1E=tab.CanvasRenderer.toCanvasAngle($18);var $1F=tab.CanvasRenderer.toCanvasAngle($19);if(Math.abs($1F-$1E)>=tab.CanvasRenderer.angleEpsilon){this.get_currentContext().beginPath();this.get_currentContext().set_lineCap('butt');this.get_currentContext().set_lineWidth(1.5);this.get_currentContext().set_strokeStyle($1C);this.get_currentContext().moveTo($1A,$1B);this.get_currentContext().lineTo($1A+(Math.cos($1E)*$17),$1B+(Math.sin($1E)*$17));this.get_currentContext().stroke();}}if(Math.abs($18-$19)>=1){tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),$1A,$1B,$17*2,$1C);}else{this.renderFilledWedge($1A,$1B,$17,$18,$19,$1C);}if($p0.getMarkProperty('draw_border',$p1)){var $20=$p0.getMarkProperty('theta',$p1);var $21=$p0.getMarkProperty('theta1',$p1);var $22=$20>$21;var $23=($p0.getMarkProperty('border_color',$p1))[$p3];if(Math.abs($20-$21)>=1){tab.CanvasRenderer.renderCircle(this.get_currentContext(),$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$17*2,$23,1);}else{tab.CanvasRenderer.renderWedge(this.get_currentContext(),$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$17,$20,$21,$23,1,$22);}}break;case 'selectedUnder':var $24=$p0.getMarkProperty('size',$p1)/2;var $25=$p0.getMarkProperty('theta',$p1);var $26=$p0.getMarkProperty('theta1',$p1);var $27=$25>$26;var $28=($p0.getMarkProperty('selected_halo_color',$p1))[$p3];if(Math.abs($25-$26)>=1){tab.CanvasRenderer.renderCircle(this.get_currentContext(),$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$24*2,$28,4);}else{tab.CanvasRenderer.renderWedge(this.get_currentContext(),$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$24,$25,$26,$28,4,$27);}break;case 'selectedOn':var $29=$p0.getMarkProperty('size',$p1)/2;var $2A=$p0.getMarkProperty('theta',$p1);var $2B=$p0.getMarkProperty('theta1',$p1);if($2A>$2B){var $2F=$2A;$2A=$2B;$2B=$2F;}var $2C=$p0.getMarkProperty('x',$p1);var $2D=$p0.getMarkProperty('y',$p1);var $2E=($p0.getMarkProperty('color',$p1))[$p3];if($p0.getMarkProperty('alpha',$p1)>=1){var $30=tab.CanvasRenderer.toCanvasAngle($2A);var $31=tab.CanvasRenderer.toCanvasAngle($2B);if(Math.abs($31-$30)>=tab.CanvasRenderer.angleEpsilon){this.get_currentContext().beginPath();this.get_currentContext().set_lineCap('butt');this.get_currentContext().set_lineWidth(1.5);this.get_currentContext().set_strokeStyle($2E);this.get_currentContext().moveTo($2C,$2D);this.get_currentContext().lineTo($2C+(Math.cos($30)*$29),$2D+(Math.sin($30)*$29));this.get_currentContext().stroke();}}if(Math.abs($2A-$2B)>=1){tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),$2C,$2D,$29*2,$2E);}else{this.renderFilledWedge($2C,$2D,$29,$2A,$2B,$2E);}if($p0.getMarkProperty('draw_border',$p1)){var $32=$p0.getMarkProperty('theta',$p1);var $33=$p0.getMarkProperty('theta1',$p1);var $34=$32>$33;var $35=($p0.getMarkProperty('border_color',$p1))[$p3];if(Math.abs($32-$33)>=1){tab.CanvasRenderer.renderCircle(this.get_currentContext(),$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$29*2,$35,1);}else{tab.CanvasRenderer.renderWedge(this.get_currentContext(),$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$29,$32,$33,$35,1,$34);}}break;default:break;}this.get_currentContext().restore();},$48:function($p0,$p1){var $0=$p0.get_markCount();var $1=$p0.get_hasSelection();var $2=$p0.get_hasBrushing();var $3='colorOverrideNone';this.get_currentContext().save();var $4=this.setupContextForTextRendering($p0);switch($p1){case 'normalUnderPass':if($p0.get_hasBackground()&&$p0.get_hasHalos()){if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}for(var $5=0;$5<$0;$5++){if(!$p0.markNeedsDraw($5)){continue;}if($p0.getMarkState($5)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $6=$p0.getMarkBounds($5);var $7=$p0.pixelToDomainX($6.x);var $8=$p0.pixelToDomainX($6.x+$6.w);var $9=$p0.getMarkInstances($7,$8);for(var $A=$9.first;$A<=$9.second;++$A){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($A),0);this.$49($p0,$5,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$49($p0,$5,'normalUnder',$3);}}for(var $B=0;$B<$0;$B++){if(!$p0.markNeedsDraw($B)){continue;}if($p0.getMarkState($B)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $C=$p0.getMarkBounds($B);var $D=$p0.pixelToDomainX($C.x);var $E=$p0.pixelToDomainX($C.x+$C.w);var $F=$p0.getMarkInstances($D,$E);for(var $10=$F.first;$10<=$F.second;++$10){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($10),0);this.$49($p0,$B,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$49($p0,$B,'normalUnder',$3);}}}break;case 'normalOnPass':if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}for(var $11=0;$11<$0;$11++){if(!$p0.markNeedsDraw($11)){continue;}if($p0.getMarkState($11)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $12=$p0.getMarkBounds($11);var $13=$p0.pixelToDomainX($12.x);var $14=$p0.pixelToDomainX($12.x+$12.w);var $15=$p0.getMarkInstances($13,$14);for(var $16=$15.first;$16<=$15.second;++$16){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($16),0);var $17=this.get_currentContext().get_textAlign()==='end';var $18=$p0.getMarkProperty('text_run_offset',$11);var $19=$p0.getMarkProperty('text_run_count',$11);var $1A=$19>1;for(var $1B=0;$1B<$19;$1B++){var $1C=$1B+$18;if($17){$1C=$18+$19-$1B-1;}this.$43($p0,$11,$1C,$1A,'normalOn',$3,$4);}this.clearPrevTextRunInfo();this.get_currentContext().restore();}}else{var $1D=this.get_currentContext().get_textAlign()==='end';var $1E=$p0.getMarkProperty('text_run_offset',$11);var $1F=$p0.getMarkProperty('text_run_count',$11);var $20=$1F>1;for(var $21=0;$21<$1F;$21++){var $22=$21+$1E;if($1D){$22=$1E+$1F-$21-1;}this.$43($p0,$11,$22,$20,'normalOn',$3,$4);}this.clearPrevTextRunInfo();}}break;case 'highlightedUnderPass':if($1||$2){if(!($p0.get_hasBackground()&&$p0.get_hasHalos())){$3='colorOverrideNone';for(var $23=0;$23<$0;$23++){if(!$p0.markNeedsDraw($23)){continue;}if($p0.getMarkState($23)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $24=$p0.getMarkBounds($23);var $25=$p0.pixelToDomainX($24.x);var $26=$p0.pixelToDomainX($24.x+$24.w);var $27=$p0.getMarkInstances($25,$26);for(var $28=$27.first;$28<=$27.second;++$28){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($28),0);this.$49($p0,$23,'highlightedUnder',$3);this.get_currentContext().restore();}}else{this.$49($p0,$23,'highlightedUnder',$3);}}}}break;case 'highlightedOnPass':if($1||$2){$3='colorOverrideNone';for(var $29=0;$29<$0;$29++){if(!$p0.markNeedsDraw($29)){continue;}if($p0.getMarkState($29)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $2A=$p0.getMarkBounds($29);var $2B=$p0.pixelToDomainX($2A.x);var $2C=$p0.pixelToDomainX($2A.x+$2A.w);var $2D=$p0.getMarkInstances($2B,$2C);for(var $2E=$2D.first;$2E<=$2D.second;++$2E){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($2E),0);var $2F=this.get_currentContext().get_textAlign()==='end';var $30=$p0.getMarkProperty('text_run_offset',$29);var $31=$p0.getMarkProperty('text_run_count',$29);var $32=$31>1;for(var $33=0;$33<$31;$33++){var $34=$33+$30;if($2F){$34=$30+$31-$33-1;}this.$43($p0,$29,$34,$32,'normalOn',$3,$4);}this.clearPrevTextRunInfo();this.get_currentContext().restore();}}else{var $35=this.get_currentContext().get_textAlign()==='end';var $36=$p0.getMarkProperty('text_run_offset',$29);var $37=$p0.getMarkProperty('text_run_count',$29);var $38=$37>1;for(var $39=0;$39<$37;$39++){var $3A=$39+$36;if($35){$3A=$36+$37-$39-1;}this.$43($p0,$29,$3A,$38,'normalOn',$3,$4);}this.clearPrevTextRunInfo();}}}break;case 'selectedUnderPass':if($1||$2){$3='colorOverrideOpaque';for(var $3B=0;$3B<$0;$3B++){if(!$p0.markNeedsDraw($3B)){continue;}if($p0.getMarkState($3B)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $3C=$p0.getMarkBounds($3B);var $3D=$p0.pixelToDomainX($3C.x);var $3E=$p0.pixelToDomainX($3C.x+$3C.w);var $3F=$p0.getMarkInstances($3D,$3E);for(var $40=$3F.first;$40<=$3F.second;++$40){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($40),0);this.$49($p0,$3B,'selectedUnder',$3);this.get_currentContext().restore();}}else{this.$49($p0,$3B,'selectedUnder',$3);}}}break;case 'selectedOnPass':if($1||$2){$3='colorOverrideOpaque';for(var $41=0;$41<$0;$41++){if(!$p0.markNeedsDraw($41)){continue;}if($p0.getMarkState($41)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $42=$p0.getMarkBounds($41);var $43=$p0.pixelToDomainX($42.x);var $44=$p0.pixelToDomainX($42.x+$42.w);var $45=$p0.getMarkInstances($43,$44);for(var $46=$45.first;$46<=$45.second;++$46){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($46),0);var $47=this.get_currentContext().get_textAlign()==='end';var $48=$p0.getMarkProperty('text_run_offset',$41);var $49=$p0.getMarkProperty('text_run_count',$41);var $4A=$49>1;for(var $4B=0;$4B<$49;$4B++){var $4C=$4B+$48;if($47){$4C=$48+$49-$4B-1;}this.$43($p0,$41,$4C,$4A,'normalOn',$3,$4);}this.clearPrevTextRunInfo();this.get_currentContext().restore();}}else{var $4D=this.get_currentContext().get_textAlign()==='end';var $4E=$p0.getMarkProperty('text_run_offset',$41);var $4F=$p0.getMarkProperty('text_run_count',$41);var $50=$4F>1;for(var $51=0;$51<$4F;$51++){var $52=$51+$4E;if($4D){$52=$4E+$4F-$51-1;}this.$43($p0,$41,$52,$50,'normalOn',$3,$4);}this.clearPrevTextRunInfo();}}}break;}this.get_currentContext().restore();},$49:function($p0,$p1,$p2,$p3){if(!!$p0.get_clipCase()){this.get_currentContext().save();this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p2){case 'normalUnder':if(!(!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){var $0=$p0.getMarkProperty('x',$p1);var $1=$p0.getMarkProperty('y',$p1);var $2=$p0.getMarkProperty('width',$p1);var $3=-$p0.getMarkProperty('height',$p1);if($3<0){$1+=$3;$3=Math.abs($3);}var $4=-$p0.getMarkProperty('width',$p1)/2;var $5=$p0.getMarkProperty('height',$p1)/2;var $6;if($p0.isMarkImpliedSelected($p1)){$6=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$6=($p0.getMarkProperty('halo_color',$p1))[$p3];}tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$0+$4,$1+$5,$2,$3,$6,0,0,false);}if((!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){var $7=$p0.getMarkProperty('x',$p1);var $8=$p0.getMarkProperty('y',$p1);var $9=$p0.getMarkProperty('clip_width',$p1);var $A=-$p0.getMarkProperty('clip_height',$p1);if($A<0){$8+=$A;$A=Math.abs($A);}var $B=-$p0.getMarkProperty('clip_width',$p1)/2;var $C=$p0.getMarkProperty('clip_height',$p1)/2;var $D;if($p0.isMarkImpliedSelected($p1)){$D=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$D=($p0.getMarkProperty('halo_color',$p1))[$p3];}tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$7+$B,$8+$C,$9,$A,$D,0,0,false);}break;case 'normalOn':break;case 'highlightedUnder':if($p0.get_hasHaloHighlightColor()&&!(!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){var $E=$p0.getMarkProperty('x',$p1);var $F=$p0.getMarkProperty('y',$p1);var $10=$p0.getMarkProperty('width',$p1);var $11=-$p0.getMarkProperty('height',$p1);if($11<0){$F+=$11;$11=Math.abs($11);}var $12=-$p0.getMarkProperty('width',$p1)/2;var $13=$p0.getMarkProperty('height',$p1)/2;var $14;if($p0.isMarkImpliedSelected($p1)){$14=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$14=($p0.getMarkProperty('highlighted_halo_color',$p1))[$p3];}tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$E+$12,$F+$13,$10,$11,$14,0,0,false);}if($p0.get_hasHaloHighlightColor()&&(!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){var $15=$p0.getMarkProperty('x',$p1);var $16=$p0.getMarkProperty('y',$p1);var $17=$p0.getMarkProperty('clip_width',$p1);var $18=-$p0.getMarkProperty('clip_height',$p1);if($18<0){$16+=$18;$18=Math.abs($18);}var $19=-$p0.getMarkProperty('clip_width',$p1)/2;var $1A=$p0.getMarkProperty('clip_height',$p1)/2;var $1B;if($p0.isMarkImpliedSelected($p1)){$1B=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$1B=($p0.getMarkProperty('highlighted_halo_color',$p1))[$p3];}tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$15+$19,$16+$1A,$17,$18,$1B,0,0,false);}break;case 'selectedUnder':if(!(!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){var $1C=$p0.getMarkProperty('x',$p1);var $1D=$p0.getMarkProperty('y',$p1);var $1E=$p0.getMarkProperty('width',$p1);var $1F=-$p0.getMarkProperty('height',$p1);if($1F<0){$1D+=$1F;$1F=Math.abs($1F);}var $20=-$p0.getMarkProperty('width',$p1)/2;var $21=$p0.getMarkProperty('height',$p1)/2;var $22;if($p0.isMarkImpliedSelected($p1)){$22=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$22=($p0.getMarkProperty('selected_halo_color',$p1))[$p3];}tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$1C+$20,$1D+$21,$1E,$1F,$22,0,0,false);}if((!!$p0.get_clipCase()&&$p0.get_useCellClipForSelection())){var $23=$p0.getMarkProperty('x',$p1);var $24=$p0.getMarkProperty('y',$p1);var $25=$p0.getMarkProperty('clip_width',$p1);var $26=-$p0.getMarkProperty('clip_height',$p1);if($26<0){$24+=$26;$26=Math.abs($26);}var $27=-$p0.getMarkProperty('clip_width',$p1)/2;var $28=$p0.getMarkProperty('clip_height',$p1)/2;var $29;if($p0.isMarkImpliedSelected($p1)){$29=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$29=($p0.getMarkProperty('selected_halo_color',$p1))[$p3];}tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$23+$27,$24+$28,$25,$26,$29,0,0,false);}break;default:break;}if(!!$p0.get_clipCase()){this.get_currentContext().restore();}},$4C:function($p0,$p1){var $0=$p0.get_markCount();var $1=$p0.get_hasSelection();var $2=$p0.get_hasBrushing();var $3='colorOverrideNone';this.get_currentContext().save();this.get_currentContext().set_lineJoin('miter');switch($p1){case 'normalUnderPass':if($p0.get_hasBackground()&&$p0.get_hasHalos()){if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}for(var $4=0;$4<$0;$4++){if(!$p0.markNeedsDraw($4)){continue;}if($p0.getMarkState($4)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $5=$p0.getMarkBounds($4);var $6=$p0.pixelToDomainX($5.x);var $7=$p0.pixelToDomainX($5.x+$5.w);var $8=$p0.getMarkInstances($6,$7);for(var $9=$8.first;$9<=$8.second;++$9){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($9),0);this.$4D($p0,$4,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$4D($p0,$4,'normalUnder',$3);}}$3='colorOverrideNone';for(var $A=0;$A<$0;$A++){if(!$p0.markNeedsDraw($A)){continue;}if($p0.getMarkState($A)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $B=$p0.getMarkBounds($A);var $C=$p0.pixelToDomainX($B.x);var $D=$p0.pixelToDomainX($B.x+$B.w);var $E=$p0.getMarkInstances($C,$D);for(var $F=$E.first;$F<=$E.second;++$F){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($F),0);this.$4D($p0,$A,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$4D($p0,$A,'normalUnder',$3);}}}break;case 'normalOnPass':if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}for(var $10=0;$10<$0;$10++){if(!$p0.markNeedsDraw($10)){continue;}if($p0.getMarkState($10)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $11=$p0.getMarkBounds($10);var $12=$p0.pixelToDomainX($11.x);var $13=$p0.pixelToDomainX($11.x+$11.w);var $14=$p0.getMarkInstances($12,$13);for(var $15=$14.first;$15<=$14.second;++$15){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($15),0);this.$4D($p0,$10,'normalOn',$3);this.get_currentContext().restore();}}else{this.$4D($p0,$10,'normalOn',$3);}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if($1||$2){$3='colorOverrideNone';for(var $16=0;$16<$0;$16++){if(!$p0.markNeedsDraw($16)){continue;}if($p0.getMarkState($16)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $17=$p0.getMarkBounds($16);var $18=$p0.pixelToDomainX($17.x);var $19=$p0.pixelToDomainX($17.x+$17.w);var $1A=$p0.getMarkInstances($18,$19);for(var $1B=$1A.first;$1B<=$1A.second;++$1B){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($1B),0);this.$4D($p0,$16,'highlightedOn',$3);this.get_currentContext().restore();}}else{this.$4D($p0,$16,'highlightedOn',$3);}}}break;case 'selectedUnderPass':if($1||$2){$3='colorOverrideOpaque';for(var $1C=0;$1C<$0;$1C++){if(!$p0.markNeedsDraw($1C)){continue;}if($p0.getMarkState($1C)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $1D=$p0.getMarkBounds($1C);var $1E=$p0.pixelToDomainX($1D.x);var $1F=$p0.pixelToDomainX($1D.x+$1D.w);var $20=$p0.getMarkInstances($1E,$1F);for(var $21=$20.first;$21<=$20.second;++$21){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($21),0);this.$4D($p0,$1C,'selectedUnder',$3);this.get_currentContext().restore();}}else{this.$4D($p0,$1C,'selectedUnder',$3);}}}break;case 'selectedOnPass':if($1||$2){$3='colorOverrideOpaque';this.get_currentContext().save();if($p0.get_clipCase()!==3){this.get_currentContext().setClip($p0.getInsetPaneClipRect(2));}for(var $22=0;$22<$0;$22++){if(!$p0.markNeedsDraw($22)){continue;}if($p0.getMarkState($22)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $23=$p0.getMarkBounds($22);var $24=$p0.pixelToDomainX($23.x);var $25=$p0.pixelToDomainX($23.x+$23.w);var $26=$p0.getMarkInstances($24,$25);for(var $27=$26.first;$27<=$26.second;++$27){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($27),0);this.$4D($p0,$22,'selectedOn',$3);this.get_currentContext().restore();}}else{this.$4D($p0,$22,'selectedOn',$3);}}this.get_currentContext().restore();}break;}this.get_currentContext().restore();},$4D:function($p0,$p1,$p2,$p3){this.get_currentContext().save();if(!!$p0.get_clipCase()){this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p2){case 'normalUnder':var $0=(parseInt(($p0.getMarkProperty('size',$p1)+0.5))/2);var $1=$p0.getMarkProperty('x',$p1);var $2=$p0.getMarkProperty('x1',$p1);var $3=$p0.getMarkProperty('y',$p1);var $4=$p0.getMarkProperty('y1',$p1);var $5=Math.min($1,$2);var $6=Math.min($3,$4);var $7=Math.abs($2-$1)+0;var $8=Math.abs($4-$3)+0;if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$5,$6,$7,$8,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $9=$p0.getMarkProperty('x',$p1)-$0;var $A=$p0.getMarkProperty('x',$p1)+$0;var $B=$p0.getMarkProperty('y',$p1);var $C=$p0.getMarkProperty('y1',$p1);var $D=Math.min($9,$A);var $E=Math.min($B,$C);var $F=Math.abs($A-$9)+0;var $10=Math.abs($C-$B)+0;if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$D,$E,$F,$10,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $11=$p0.getMarkProperty('x',$p1);var $12=$p0.getMarkProperty('x1',$p1);var $13=$p0.getMarkProperty('y',$p1)-$0;var $14=$p0.getMarkProperty('y',$p1)+$0;var $15=Math.min($11,$12);var $16=Math.min($13,$14);var $17=Math.abs($12-$11)+0;var $18=Math.abs($14-$13)+0;if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$15,$16,$17,$18,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $19=$p0.getMarkProperty('x',$p1)-$0;var $1A=$p0.getMarkProperty('x',$p1)+$0;var $1B=$p0.getMarkProperty('y',$p1)-$0;var $1C=$p0.getMarkProperty('y',$p1)+$0;var $1D=Math.min($19,$1A);var $1E=Math.min($1B,$1C);var $1F=Math.abs($1A-$19)+0;var $20=Math.abs($1C-$1B)+0;if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$1D,$1E,$1F,$20,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),true);}break;case 'normalOn':var $21=(parseInt(($p0.getMarkProperty('size',$p1)+0.5))/2);var $22=$p0.getMarkProperty('x',$p1);var $23=$p0.getMarkProperty('x1',$p1);var $24=$p0.getMarkProperty('y',$p1);var $25=$p0.getMarkProperty('y1',$p1);var $26=Math.min($22,$23);var $27=Math.min($24,$25);var $28=Math.abs($23-$22)+0;var $29=Math.abs($25-$24)+0;if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){var $2A=0;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$26-$2A,$27-$2A,$28+(2*$2A),$29+(2*$2A),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $2B=$p0.getMarkProperty('x',$p1);var $2C=$p0.getMarkProperty('x1',$p1);var $2D=$p0.getMarkProperty('y',$p1);var $2E=$p0.getMarkProperty('y1',$p1);var $2F=Math.min($2B,$2C);var $30=Math.min($2D,$2E);var $31=Math.abs($2C-$2B)+0;var $32=Math.abs($2E-$2D)+0;if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$2F,$30,$31,$32,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $33=$p0.getMarkProperty('x',$p1)-$21;var $34=$p0.getMarkProperty('x',$p1)+$21;var $35=$p0.getMarkProperty('y',$p1);var $36=$p0.getMarkProperty('y1',$p1);var $37=Math.min($33,$34);var $38=Math.min($35,$36);var $39=Math.abs($34-$33)+0;var $3A=Math.abs($36-$35)+0;if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){var $3B=0;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$37-$3B,$38-$3B,$39+(2*$3B),$3A+(2*$3B),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $3C=$p0.getMarkProperty('x',$p1)-$21;var $3D=$p0.getMarkProperty('x',$p1)+$21;var $3E=$p0.getMarkProperty('y',$p1);var $3F=$p0.getMarkProperty('y1',$p1);var $40=Math.min($3C,$3D);var $41=Math.min($3E,$3F);var $42=Math.abs($3D-$3C)+0;var $43=Math.abs($3F-$3E)+0;if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$40,$41,$42,$43,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $44=$p0.getMarkProperty('x',$p1);var $45=$p0.getMarkProperty('x1',$p1);var $46=$p0.getMarkProperty('y',$p1)-$21;var $47=$p0.getMarkProperty('y',$p1)+$21;var $48=Math.min($44,$45);var $49=Math.min($46,$47);var $4A=Math.abs($45-$44)+0;var $4B=Math.abs($47-$46)+0;if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){var $4C=0;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$48-$4C,$49-$4C,$4A+(2*$4C),$4B+(2*$4C),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $4D=$p0.getMarkProperty('x',$p1);var $4E=$p0.getMarkProperty('x1',$p1);var $4F=$p0.getMarkProperty('y',$p1)-$21;var $50=$p0.getMarkProperty('y',$p1)+$21;var $51=Math.min($4D,$4E);var $52=Math.min($4F,$50);var $53=Math.abs($4E-$4D)+0;var $54=Math.abs($50-$4F)+0;if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$51,$52,$53,$54,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $55=$p0.getMarkProperty('x',$p1)-$21;var $56=$p0.getMarkProperty('x',$p1)+$21;var $57=$p0.getMarkProperty('y',$p1)-$21;var $58=$p0.getMarkProperty('y',$p1)+$21;var $59=Math.min($55,$56);var $5A=Math.min($57,$58);var $5B=Math.abs($56-$55)+0;var $5C=Math.abs($58-$57)+0;if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){var $5D=0;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$59-$5D,$5A-$5D,$5B+(2*$5D),$5C+(2*$5D),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),true);}var $5E=$p0.getMarkProperty('x',$p1)-$21;var $5F=$p0.getMarkProperty('x',$p1)+$21;var $60=$p0.getMarkProperty('y',$p1)-$21;var $61=$p0.getMarkProperty('y',$p1)+$21;var $62=Math.min($5E,$5F);var $63=Math.min($60,$61);var $64=Math.abs($5F-$5E)+0;var $65=Math.abs($61-$60)+0;if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$62,$63,$64,$65,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight(),true);}break;case 'highlightedUnder':var $66=(parseInt(($p0.getMarkProperty('size',$p1)+0.5))/2);var $67=$p0.getMarkProperty('x',$p1);var $68=$p0.getMarkProperty('x1',$p1);var $69=$p0.getMarkProperty('y',$p1);var $6A=$p0.getMarkProperty('y1',$p1);var $6B=Math.min($67,$68);var $6C=Math.min($69,$6A);var $6D=Math.abs($68-$67)+0;var $6E=Math.abs($6A-$69)+0;if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$6B,$6C,$6D,$6E,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $6F=$p0.getMarkProperty('x',$p1)-$66;var $70=$p0.getMarkProperty('x',$p1)+$66;var $71=$p0.getMarkProperty('y',$p1);var $72=$p0.getMarkProperty('y1',$p1);var $73=Math.min($6F,$70);var $74=Math.min($71,$72);var $75=Math.abs($70-$6F)+0;var $76=Math.abs($72-$71)+0;if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$73,$74,$75,$76,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $77=$p0.getMarkProperty('x',$p1);var $78=$p0.getMarkProperty('x1',$p1);var $79=$p0.getMarkProperty('y',$p1)-$66;var $7A=$p0.getMarkProperty('y',$p1)+$66;var $7B=Math.min($77,$78);var $7C=Math.min($79,$7A);var $7D=Math.abs($78-$77)+0;var $7E=Math.abs($7A-$79)+0;if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$7B,$7C,$7D,$7E,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $7F=$p0.getMarkProperty('x',$p1)-$66;var $80=$p0.getMarkProperty('x',$p1)+$66;var $81=$p0.getMarkProperty('y',$p1)-$66;var $82=$p0.getMarkProperty('y',$p1)+$66;var $83=Math.min($7F,$80);var $84=Math.min($81,$82);var $85=Math.abs($80-$7F)+0;var $86=Math.abs($82-$81)+0;if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$83,$84,$85,$86,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),true);}break;case 'highlightedOn':var $87=(parseInt(($p0.getMarkProperty('size',$p1)+0.5))/2);var $88=$p0.getMarkProperty('x',$p1);var $89=$p0.getMarkProperty('x1',$p1);var $8A=$p0.getMarkProperty('y',$p1);var $8B=$p0.getMarkProperty('y1',$p1);var $8C=Math.min($88,$89);var $8D=Math.min($8A,$8B);var $8E=Math.abs($89-$88)+0;var $8F=Math.abs($8B-$8A)+0;if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){var $90=0;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$8C-$90,$8D-$90,$8E+(2*$90),$8F+(2*$90),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $91=$p0.getMarkProperty('x',$p1);var $92=$p0.getMarkProperty('x1',$p1);var $93=$p0.getMarkProperty('y',$p1);var $94=$p0.getMarkProperty('y1',$p1);var $95=Math.min($91,$92);var $96=Math.min($93,$94);var $97=Math.abs($92-$91)+0;var $98=Math.abs($94-$93)+0;if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$95,$96,$97,$98,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $99=$p0.getMarkProperty('x',$p1)-$87;var $9A=$p0.getMarkProperty('x',$p1)+$87;var $9B=$p0.getMarkProperty('y',$p1);var $9C=$p0.getMarkProperty('y1',$p1);var $9D=Math.min($99,$9A);var $9E=Math.min($9B,$9C);var $9F=Math.abs($9A-$99)+0;var $A0=Math.abs($9C-$9B)+0;if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){var $A1=0;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$9D-$A1,$9E-$A1,$9F+(2*$A1),$A0+(2*$A1),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $A2=$p0.getMarkProperty('x',$p1)-$87;var $A3=$p0.getMarkProperty('x',$p1)+$87;var $A4=$p0.getMarkProperty('y',$p1);var $A5=$p0.getMarkProperty('y1',$p1);var $A6=Math.min($A2,$A3);var $A7=Math.min($A4,$A5);var $A8=Math.abs($A3-$A2)+0;var $A9=Math.abs($A5-$A4)+0;if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$A6,$A7,$A8,$A9,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $AA=$p0.getMarkProperty('x',$p1);var $AB=$p0.getMarkProperty('x1',$p1);var $AC=$p0.getMarkProperty('y',$p1)-$87;var $AD=$p0.getMarkProperty('y',$p1)+$87;var $AE=Math.min($AA,$AB);var $AF=Math.min($AC,$AD);var $B0=Math.abs($AB-$AA)+0;var $B1=Math.abs($AD-$AC)+0;if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){var $B2=0;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$AE-$B2,$AF-$B2,$B0+(2*$B2),$B1+(2*$B2),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $B3=$p0.getMarkProperty('x',$p1);var $B4=$p0.getMarkProperty('x1',$p1);var $B5=$p0.getMarkProperty('y',$p1)-$87;var $B6=$p0.getMarkProperty('y',$p1)+$87;var $B7=Math.min($B3,$B4);var $B8=Math.min($B5,$B6);var $B9=Math.abs($B4-$B3)+0;var $BA=Math.abs($B6-$B5)+0;if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$B7,$B8,$B9,$BA,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $BB=$p0.getMarkProperty('x',$p1)-$87;var $BC=$p0.getMarkProperty('x',$p1)+$87;var $BD=$p0.getMarkProperty('y',$p1)-$87;var $BE=$p0.getMarkProperty('y',$p1)+$87;var $BF=Math.min($BB,$BC);var $C0=Math.min($BD,$BE);var $C1=Math.abs($BC-$BB)+0;var $C2=Math.abs($BE-$BD)+0;if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){var $C3=0;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$BF-$C3,$C0-$C3,$C1+(2*$C3),$C2+(2*$C3),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),true);}var $C4=$p0.getMarkProperty('x',$p1)-$87;var $C5=$p0.getMarkProperty('x',$p1)+$87;var $C6=$p0.getMarkProperty('y',$p1)-$87;var $C7=$p0.getMarkProperty('y',$p1)+$87;var $C8=Math.min($C4,$C5);var $C9=Math.min($C6,$C7);var $CA=Math.abs($C5-$C4)+0;var $CB=Math.abs($C7-$C6)+0;if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$C8,$C9,$CA,$CB,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight(),true);}break;case 'selectedUnder':var $CC=(parseInt(($p0.getMarkProperty('size',$p1)+0.5))/2);var $CD=1;var $CE=$p0.getMarkProperty('x',$p1);var $CF=$p0.getMarkProperty('x1',$p1);var $D0=$p0.getMarkProperty('y',$p1);var $D1=$p0.getMarkProperty('y1',$p1);var $D2=Math.min($CE,$CF);var $D3=Math.min($D0,$D1);var $D4=Math.abs($CF-$CE)+0;var $D5=Math.abs($D1-$D0)+0;if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&!$p0.clippedByPane($D2,$D3,$D4,$D5)){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$D2,$D3,$D4,$D5,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $D6=$p0.getMarkProperty('x',$p1);var $D7=$p0.getMarkProperty('x1',$p1);var $D8=$p0.getMarkProperty('y',$p1);var $D9=$p0.getMarkProperty('y1',$p1);var $DA=Math.min($D6,$D7);var $DB=Math.min($D8,$D9);var $DC=Math.abs($D7-$D6)+0;var $DD=Math.abs($D9-$D8)+0;if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&$p0.clippedByPane($DA,$DB,$DC,$DD)){var $DE=2;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$DA-$DE,$DB-$DE,$DC+(2*$DE),$DD+(2*$DE),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $DF=$p0.getMarkProperty('x',$p1);var $E0=$p0.getMarkProperty('x1',$p1);var $E1=$p0.getMarkProperty('y',$p1);var $E2=$p0.getMarkProperty('y1',$p1);var $E3=Math.min($DF,$E0);var $E4=Math.min($E1,$E2);var $E5=Math.abs($E0-$DF)+$CD;var $E6=Math.abs($E2-$E1)+$CD;if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$E3,$E4,$E5,$E6,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $E7=$p0.getMarkProperty('x',$p1)-$CC;var $E8=$p0.getMarkProperty('x',$p1)+$CC;var $E9=$p0.getMarkProperty('y',$p1);var $EA=$p0.getMarkProperty('y1',$p1);var $EB=Math.min($E7,$E8);var $EC=Math.min($E9,$EA);var $ED=Math.abs($E8-$E7)+0;var $EE=Math.abs($EA-$E9)+0;if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&!$p0.clippedByPane($EB,$EC,$ED,$EE)){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$EB,$EC,$ED,$EE,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $EF=$p0.getMarkProperty('x',$p1)-$CC;var $F0=$p0.getMarkProperty('x',$p1)+$CC;var $F1=$p0.getMarkProperty('y',$p1);var $F2=$p0.getMarkProperty('y1',$p1);var $F3=Math.min($EF,$F0);var $F4=Math.min($F1,$F2);var $F5=Math.abs($F0-$EF)+0;var $F6=Math.abs($F2-$F1)+0;if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&$p0.clippedByPane($F3,$F4,$F5,$F6)){var $F7=2;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$F3-$F7,$F4-$F7,$F5+(2*$F7),$F6+(2*$F7),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $F8=$p0.getMarkProperty('x',$p1)-$CC;var $F9=$p0.getMarkProperty('x',$p1)+$CC;var $FA=$p0.getMarkProperty('y',$p1);var $FB=$p0.getMarkProperty('y1',$p1);var $FC=Math.min($F8,$F9);var $FD=Math.min($FA,$FB);var $FE=Math.abs($F9-$F8)+$CD;var $FF=Math.abs($FB-$FA)+$CD;if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$FC,$FD,$FE,$FF,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $100=$p0.getMarkProperty('x',$p1);var $101=$p0.getMarkProperty('x1',$p1);var $102=$p0.getMarkProperty('y',$p1)-$CC;var $103=$p0.getMarkProperty('y',$p1)+$CC;var $104=Math.min($100,$101);var $105=Math.min($102,$103);var $106=Math.abs($101-$100)+0;var $107=Math.abs($103-$102)+0;if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&!$p0.clippedByPane($104,$105,$106,$107)){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$104,$105,$106,$107,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $108=$p0.getMarkProperty('x',$p1);var $109=$p0.getMarkProperty('x1',$p1);var $10A=$p0.getMarkProperty('y',$p1)-$CC;var $10B=$p0.getMarkProperty('y',$p1)+$CC;var $10C=Math.min($108,$109);var $10D=Math.min($10A,$10B);var $10E=Math.abs($109-$108)+0;var $10F=Math.abs($10B-$10A)+0;if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.clippedByPane($10C,$10D,$10E,$10F)){var $110=2;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$10C-$110,$10D-$110,$10E+(2*$110),$10F+(2*$110),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $111=$p0.getMarkProperty('x',$p1);var $112=$p0.getMarkProperty('x1',$p1);var $113=$p0.getMarkProperty('y',$p1)-$CC;var $114=$p0.getMarkProperty('y',$p1)+$CC;var $115=Math.min($111,$112);var $116=Math.min($113,$114);var $117=Math.abs($112-$111)+$CD;var $118=Math.abs($114-$113)+$CD;if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$115,$116,$117,$118,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $119=$p0.getMarkProperty('x',$p1)-$CC;var $11A=$p0.getMarkProperty('x',$p1)+$CC;var $11B=$p0.getMarkProperty('y',$p1)-$CC;var $11C=$p0.getMarkProperty('y',$p1)+$CC;var $11D=Math.min($119,$11A);var $11E=Math.min($11B,$11C);var $11F=Math.abs($11A-$119)+0;var $120=Math.abs($11C-$11B)+0;if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&!$p0.clippedByPane($11D,$11E,$11F,$120)){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$11D,$11E,$11F,$120,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),true);}var $121=$p0.getMarkProperty('x',$p1)-$CC;var $122=$p0.getMarkProperty('x',$p1)+$CC;var $123=$p0.getMarkProperty('y',$p1)-$CC;var $124=$p0.getMarkProperty('y',$p1)+$CC;var $125=Math.min($121,$122);var $126=Math.min($123,$124);var $127=Math.abs($122-$121)+0;var $128=Math.abs($124-$123)+0;if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.clippedByPane($125,$126,$127,$128)){var $129=2;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$125-$129,$126-$129,$127+(2*$129),$128+(2*$129),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),true);}var $12A=$p0.getMarkProperty('x',$p1)-$CC;var $12B=$p0.getMarkProperty('x',$p1)+$CC;var $12C=$p0.getMarkProperty('y',$p1)-$CC;var $12D=$p0.getMarkProperty('y',$p1)+$CC;var $12E=Math.min($12A,$12B);var $12F=Math.min($12C,$12D);var $130=Math.abs($12B-$12A)+$CD;var $131=Math.abs($12D-$12C)+$CD;if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$12E,$12F,$130,$131,($p0.getMarkProperty('border_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight(),true);}break;case 'selectedOn':var $132=(parseInt(($p0.getMarkProperty('size',$p1)+0.5))/2);var $133=$p0.getMarkProperty('x',$p1);var $134=$p0.getMarkProperty('x1',$p1);var $135=$p0.getMarkProperty('y',$p1);var $136=$p0.getMarkProperty('y1',$p1);var $137=Math.min($133,$134);var $138=Math.min($135,$136);var $139=Math.abs($134-$133)+0;var $13A=Math.abs($136-$135)+0;if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){var $13B=0;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$137-$13B,$138-$13B,$139+(2*$13B),$13A+(2*$13B),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $13C=$p0.getMarkProperty('x',$p1);var $13D=$p0.getMarkProperty('x1',$p1);var $13E=$p0.getMarkProperty('y',$p1);var $13F=$p0.getMarkProperty('y1',$p1);var $140=Math.min($13C,$13D);var $141=Math.min($13E,$13F);var $142=Math.abs($13D-$13C)+0;var $143=Math.abs($13F-$13E)+0;if($p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$140,$141,$142,$143,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $144=$p0.getMarkProperty('x',$p1)-$132;var $145=$p0.getMarkProperty('x',$p1)+$132;var $146=$p0.getMarkProperty('y',$p1);var $147=$p0.getMarkProperty('y1',$p1);var $148=Math.min($144,$145);var $149=Math.min($146,$147);var $14A=Math.abs($145-$144)+0;var $14B=Math.abs($147-$146)+0;if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()){var $14C=0;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$148-$14C,$149-$14C,$14A+(2*$14C),$14B+(2*$14C),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $14D=$p0.getMarkProperty('x',$p1)-$132;var $14E=$p0.getMarkProperty('x',$p1)+$132;var $14F=$p0.getMarkProperty('y',$p1);var $150=$p0.getMarkProperty('y1',$p1);var $151=Math.min($14D,$14E);var $152=Math.min($14F,$150);var $153=Math.abs($14E-$14D)+0;var $154=Math.abs($150-$14F)+0;if(!$p0.get_scaleMarksInX()&&$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$151,$152,$153,$154,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $155=$p0.getMarkProperty('x',$p1);var $156=$p0.getMarkProperty('x1',$p1);var $157=$p0.getMarkProperty('y',$p1)-$132;var $158=$p0.getMarkProperty('y',$p1)+$132;var $159=Math.min($155,$156);var $15A=Math.min($157,$158);var $15B=Math.abs($156-$155)+0;var $15C=Math.abs($158-$157)+0;if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){var $15D=0;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$159-$15D,$15A-$15D,$15B+(2*$15D),$15C+(2*$15D),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $15E=$p0.getMarkProperty('x',$p1);var $15F=$p0.getMarkProperty('x1',$p1);var $160=$p0.getMarkProperty('y',$p1)-$132;var $161=$p0.getMarkProperty('y',$p1)+$132;var $162=Math.min($15E,$15F);var $163=Math.min($160,$161);var $164=Math.abs($15F-$15E)+0;var $165=Math.abs($161-$160)+0;if($p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$162,$163,$164,$165,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight(),false);}var $166=$p0.getMarkProperty('x',$p1)-$132;var $167=$p0.getMarkProperty('x',$p1)+$132;var $168=$p0.getMarkProperty('y',$p1)-$132;var $169=$p0.getMarkProperty('y',$p1)+$132;var $16A=Math.min($166,$167);var $16B=Math.min($168,$169);var $16C=Math.abs($167-$166)+0;var $16D=Math.abs($169-$168)+0;if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()){var $16E=0;tab.CanvasRenderer.renderFilledBar(this.get_currentContext(),$16A-$16E,$16B-$16E,$16C+(2*$16E),$16D+(2*$16E),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight(),true);}var $16F=$p0.getMarkProperty('x',$p1)-$132;var $170=$p0.getMarkProperty('x',$p1)+$132;var $171=$p0.getMarkProperty('y',$p1)-$132;var $172=$p0.getMarkProperty('y',$p1)+$132;var $173=Math.min($16F,$170);var $174=Math.min($171,$172);var $175=Math.abs($170-$16F)+0;var $176=Math.abs($172-$171)+0;if(!$p0.get_scaleMarksInX()&&!$p0.get_scaleMarksInY()&&$p0.get_drawBorder()){tab.CanvasRenderer.renderBarOutline(this.get_currentContext(),$173,$174,$175,$176,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight(),true);}break;default:break;}this.get_currentContext().restore();},$50:function($p0,$p1){var $0=$p0.get_hasSelection();var $1=$p0.get_hasBrushing();var $2='colorOverrideNone';var $3=$p0.get_lineDrawState();this.get_currentContext().save();switch($p1){case 'normalUnderPass':if($p0.get_hasBackground()&&$p0.get_hasHalos()){if($0||$1){$2='colorOverrideFog';}else{$2='colorOverrideNone';}var $enum1=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum1.moveNext()){var $4=$enum1.current;if($4.get_lineState()!=='lineStateNormal'){continue;}var $5;if($p0.get_isWrappedDomain()){$5=$p0.getMarkInstances($4.minXDomain,$4.maxXDomain);}else{$5=new ss.Tuple(0,0);}for(var $6=$5.first;$6<=$5.second;++$6){if(!!$6){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($6),0);}for(var $7=$4.startIndex;$7<=$4.endIndex;$7++){if(!$p0.markNeedsDraw($7)){continue;}if($p0.getLeft($7)!==-1||$p0.getRight($7)!==-1){this.$51($p0,$7,'normalUnder',$2);}}for(var $8=$4.startIndex;$8<=$4.endIndex;$8++){if(!$p0.markNeedsDraw($8)){continue;}this.$51($p0,$8,'edgeUnder',$2);if(($p0.getLeft($8)===-1&&$p0.getRight($8)===-1)||$p0.shouldShowMarker($8)){this.$51($p0,$8,'blobUnder',$2);}}if(!!$6){this.get_currentContext().restore();}}}var $enum2=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum2.moveNext()){var $9=$enum2.current;if($9.get_lineState()!=='lineStateHighlighted'){continue;}var $A;if($p0.get_isWrappedDomain()){$A=$p0.getMarkInstances($9.minXDomain,$9.maxXDomain);}else{$A=new ss.Tuple(0,0);}for(var $B=$A.first;$B<=$A.second;++$B){if(!!$B){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($B),0);}for(var $C=$9.startIndex;$C<=$9.endIndex;$C++){if(!$p0.markNeedsDraw($C)){continue;}if($p0.getLeft($C)!==-1||$p0.getRight($C)!==-1){this.$51($p0,$C,'normalUnder',$2);}}for(var $D=$9.startIndex;$D<=$9.endIndex;$D++){if(!$p0.markNeedsDraw($D)){continue;}this.$51($p0,$D,'edgeUnder',$2);if(($p0.getLeft($D)===-1&&$p0.getRight($D)===-1)||$p0.shouldShowMarker($D)){this.$51($p0,$D,'blobUnder',$2);}}if(!!$B){this.get_currentContext().restore();}}}}break;case 'normalOnPass':if($0||$1){$2='colorOverrideFog';}else{$2='colorOverrideNone';}var $enum3=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum3.moveNext()){var $E=$enum3.current;if($E.get_lineState()!=='lineStateNormal'){continue;}var $F;if($p0.get_isWrappedDomain()){$F=$p0.getMarkInstances($E.minXDomain,$E.maxXDomain);}else{$F=new ss.Tuple(0,0);}for(var $10=$F.first;$10<=$F.second;++$10){if(!!$10){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($10),0);}if($p0.get_hasGlobalTransparency()){this.beginOffScreenRender();$p0.set_forceOpaqueColors(true);if(!!$10){this.get_currentContext().translate($p0.getWorldOffset($10),0);}}for(var $11=$E.startIndex;$11<=$E.endIndex;$11++){if(!$p0.markNeedsDraw($11)){continue;}if($p0.getLeft($11)!==-1||$p0.getRight($11)!==-1){this.$51($p0,$11,'normalOn',$2);}else{this.$51($p0,$11,'blobOn',$2);}}for(var $12=$E.startIndex;$12<=$E.endIndex;$12++){if(!$p0.markNeedsDraw($12)){continue;}this.$51($p0,$12,'edgeOn',$2);}if($p0.get_hasGlobalTransparency()){$p0.set_forceOpaqueColors(false);this.endOffScreenRender($p0.get_globalAlpha());}for(var $13=$E.startIndex;$13<=$E.endIndex;$13++){if(!$p0.markNeedsDraw($13)){continue;}if($p0.shouldShowMarker($13)){this.$51($p0,$13,'blobOn',$2);}}if(!!$10){this.get_currentContext().restore();}}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if($0||$1){$2='colorOverrideNone';var $enum4=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum4.moveNext()){var $14=$enum4.current;if($14.get_lineState()!=='lineStateHighlighted'){continue;}var $15;if($p0.get_isWrappedDomain()){$15=$p0.getMarkInstances($14.minXDomain,$14.maxXDomain);}else{$15=new ss.Tuple(0,0);}for(var $16=$15.first;$16<=$15.second;++$16){if(!!$16){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($16),0);}if($p0.get_hasGlobalTransparency()){this.beginOffScreenRender();$p0.set_forceOpaqueColors(true);if(!!$16){this.get_currentContext().translate($p0.getWorldOffset($16),0);}}for(var $17=$14.startIndex;$17<=$14.endIndex;$17++){if(!$p0.markNeedsDraw($17)){continue;}if(!($p0.getMarkState($17)==='markStateHighlighted')){$2='colorOverrideFog';}if(!($p0.getMarkState($17)==='markStateHighlighted'&&!$14.get_allHighlighted())){if($p0.getLeft($17)!==-1||$p0.getRight($17)!==-1){this.$51($p0,$17,'normalOn',$2);}else{this.$51($p0,$17,'blobOn',$2);}}$2='colorOverrideNone';}for(var $18=$14.startIndex;$18<=$14.endIndex;$18++){if(!$p0.markNeedsDraw($18)){continue;}if($p0.getMarkState($18)!=='markStateHighlighted'||$p0.getMarkState($18+1)!=='markStateHighlighted'){$2='colorOverrideFog';}this.$51($p0,$18,'edgeOn',$2);$2='colorOverrideNone';}if($p0.get_hasGlobalTransparency()){$p0.set_forceOpaqueColors(false);this.endOffScreenRender($p0.get_globalAlpha());}for(var $19=$14.startIndex;$19<=$14.endIndex;$19++){if(!$p0.markNeedsDraw($19)){continue;}if(!($p0.getMarkState($19)==='markStateHighlighted')){$2='colorOverrideFog';}if(!($p0.getMarkState($19)==='markStateHighlighted'&&!$14.get_allHighlighted())){if($p0.shouldShowMarker($19)){this.$51($p0,$19,'blobOn',$2);}}$2='colorOverrideNone';}for(var $1A=$14.startIndex;$1A<=$14.endIndex;$1A++){if(!$p0.markNeedsDraw($1A)){continue;}if($p0.getMarkState($1A)==='markStateHighlighted'&&!$14.get_allHighlighted()){this.$51($p0,$1A,'highlightedUnder',$2);}}for(var $1B=$14.startIndex;$1B<=$14.endIndex;$1B++){if(!$p0.markNeedsDraw($1B)){continue;}if($p0.getMarkState($1B)==='markStateHighlighted'&&!$14.get_allHighlighted()){this.$51($p0,$1B,'highlightedOn',$2);}}if(!!$16){this.get_currentContext().restore();}}}}break;case 'selectedUnderPass':if($0||$1){$2='colorOverrideNone';var $enum5=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum5.moveNext()){var $1C=$enum5.current;if($1C.get_lineState()!=='lineStateSelected'){continue;}var $1D;if($p0.get_isWrappedDomain()){$1D=$p0.getMarkInstances($1C.minXDomain,$1C.maxXDomain);}else{$1D=new ss.Tuple(0,0);}for(var $1E=$1D.first;$1E<=$1D.second;++$1E){if(!!$1E){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($1E),0);}for(var $1F=$1C.startIndex;$1F<=$1C.endIndex;$1F++){if(!$p0.markNeedsDraw($1F)){continue;}this.$51($p0,$1F,'selectedUnder1',$2);this.$51($p0,$1F,'selectedEdgeUnder',$2);}if(!!$1E){this.get_currentContext().restore();}}}}break;case 'selectedOnPass':if($0||$1){$2='colorOverrideOpaque';var $enum6=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum6.moveNext()){var $20=$enum6.current;if($20.get_lineState()!=='lineStateSelected'){continue;}var $21;if($p0.get_isWrappedDomain()){$21=$p0.getMarkInstances($20.minXDomain,$20.maxXDomain);}else{$21=new ss.Tuple(0,0);}for(var $22=$21.first;$22<=$21.second;++$22){if(!!$22){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($22),0);}for(var $23=$20.startIndex;$23<=$20.endIndex;$23++){if(!$p0.markNeedsDraw($23)){continue;}if($p0.getLeft($23)!==-1||$p0.getRight($23)!==-1){this.$51($p0,$23,'normalOn',$2);}else{this.$51($p0,$23,'blobOn',$2);}}for(var $24=$20.startIndex;$24<=$20.endIndex;$24++){if(!$p0.markNeedsDraw($24)){continue;}this.$51($p0,$24,'edgeOn',$2);}for(var $25=$20.startIndex;$25<=$20.endIndex;$25++){if(!$p0.markNeedsDraw($25)){continue;}if($p0.shouldShowMarker($25)){this.$51($p0,$25,'blobOn',$2);}}if(!$20.get_allHighlighted()){for(var $26=$20.startIndex;$26<=$20.endIndex;$26++){if(!$p0.markNeedsDraw($26)){continue;}if($p0.getMarkState($26)==='markStateHighlighted'){this.$51($p0,$26,'highlightedUnder',$2);}}for(var $27=$20.startIndex;$27<=$20.endIndex;$27++){if(!$p0.markNeedsDraw($27)){continue;}if($p0.getMarkState($27)==='markStateHighlighted'){this.$51($p0,$27,'highlightedOn',$2);}}}for(var $28=$20.startIndex;$28<=$20.endIndex;$28++){if(!$p0.markNeedsDraw($28)){continue;}if($p0.getMarkState($28)==='markStateSelected'){this.$51($p0,$28,'selectedUnder',$2);}}for(var $29=$20.startIndex;$29<=$20.endIndex;$29++){if(!$p0.markNeedsDraw($29)){continue;}if($p0.getMarkState($29)==='markStateSelected'){this.$51($p0,$29,'highlightedOn',$2);}}if(!!$22){this.get_currentContext().restore();}}}}break;}this.get_currentContext().restore();},$51:function($p0,$p1,$p2,$p3){var $0=$p0.getLeft($p1);var $1=$p0.getRight($p1);if(!!$p0.get_clipCase()){this.get_currentContext().save();this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p2){case 'normalUnder':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('halo_color',$p1))[$p3],4);break;case 'normalOn':tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('color',$p1))[$p3]);break;case 'blobUnder':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1)+3,($p0.getMarkProperty('halo_color',$p1))[$p3],4);break;case 'blobOn':tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1)+3,($p0.getMarkProperty('color',$p1))[$p3]);break;case 'highlightedUnder':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1)+4,($p0.getMarkProperty('selected_multi_prim_halo_color',$p1))[$p3],4);break;case 'highlightedOn':tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1)+4,($p0.getMarkProperty('color',$p1))[$p3]);break;case 'selectedUnder':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1)+4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4);break;case 'selectedUnder1':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('selected_multi_prim_halo_color',$p1))[$p3],4);break;case 'edgeUnder':if($p0.getRight($p1)!==-1){this.renderLineEdge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x',$1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y',$1),$p0.getMarkProperty('width',$p1),$p0.getMarkProperty('width',$1),($p0.getMarkProperty('halo_color',$p1))[$p3],4);}break;case 'selectedEdgeUnder':if($p0.getRight($p1)!==-1){this.renderLineEdge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x',$1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y',$1),$p0.getMarkProperty('width',$p1),$p0.getMarkProperty('width',$1),($p0.getMarkProperty('selected_multi_prim_halo_color',$p1))[$p3],4);}break;case 'edgeOn':if($p0.getRight($p1)!==-1){if($p0.isLineSegmentVisible($p1,$1)){var $2=$p3;if($p0.isLineSegmentFiltered($p1,$1)){$p3='colorOverrideFog';}this.renderFilledLineEdge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x',$1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y',$1),$p0.getMarkProperty('width',$p1),$p0.getMarkProperty('width',$1),($p0.getMarkProperty('color',$p1))[$p3],($p0.getMarkProperty('color',$1))[$p3]);}}break;default:break;}if(!!$p0.get_clipCase()){this.get_currentContext().restore();}},$57:function($p0,$p1){var $0=$p0.get_markCount();var $1=$p0.get_hasSelection();var $2=$p0.get_hasBrushing();var $3='colorOverrideNone';this.get_currentContext().save();switch($p1){case 'normalUnderPass':if($p0.get_hasBackground()&&$p0.get_hasHalos()){if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}for(var $4=0;$4<$0;$4++){if(!$p0.markNeedsDraw($4)){continue;}if($p0.getMarkState($4)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $5=$p0.getMarkBounds($4);var $6=$p0.pixelToDomainX($5.x);var $7=$p0.pixelToDomainX($5.x+$5.w);var $8=$p0.getMarkInstances($6,$7);for(var $9=$8.first;$9<=$8.second;++$9){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($9),0);this.$58($p0,$4,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$58($p0,$4,'normalUnder',$3);}}if($1||$2){$3='colorOverrideNone';for(var $A=0;$A<$0;$A++){if(!$p0.markNeedsDraw($A)){continue;}if($p0.getMarkState($A)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $B=$p0.getMarkBounds($A);var $C=$p0.pixelToDomainX($B.x);var $D=$p0.pixelToDomainX($B.x+$B.w);var $E=$p0.getMarkInstances($C,$D);for(var $F=$E.first;$F<=$E.second;++$F){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($F),0);this.$58($p0,$A,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$58($p0,$A,'normalUnder',$3);}}}}break;case 'normalOnPass':if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}for(var $10=0;$10<$0;$10++){if(!$p0.markNeedsDraw($10)){continue;}if($p0.getMarkState($10)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $11=$p0.getMarkBounds($10);var $12=$p0.pixelToDomainX($11.x);var $13=$p0.pixelToDomainX($11.x+$11.w);var $14=$p0.getMarkInstances($12,$13);for(var $15=$14.first;$15<=$14.second;++$15){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($15),0);this.$58($p0,$10,'normalOn',$3);if($p0.get_drawBorder()){this.$58($p0,$10,'border',$3);}this.get_currentContext().restore();}}else{this.$58($p0,$10,'normalOn',$3);if($p0.get_drawBorder()){this.$58($p0,$10,'border',$3);}}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if($1||$2){$3='colorOverrideNone';for(var $16=0;$16<$0;$16++){if(!$p0.markNeedsDraw($16)){continue;}if($p0.getMarkState($16)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $17=$p0.getMarkBounds($16);var $18=$p0.pixelToDomainX($17.x);var $19=$p0.pixelToDomainX($17.x+$17.w);var $1A=$p0.getMarkInstances($18,$19);for(var $1B=$1A.first;$1B<=$1A.second;++$1B){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($1B),0);this.$58($p0,$16,'normalOn',$3);if($p0.get_drawBorder()){this.$58($p0,$16,'border',$3);}this.get_currentContext().restore();}}else{this.$58($p0,$16,'normalOn',$3);if($p0.get_drawBorder()){this.$58($p0,$16,'border',$3);}}}}break;case 'selectedUnderPass':if($1||$2){$3='colorOverrideOpaque';for(var $1C=0;$1C<$0;$1C++){if(!$p0.markNeedsDraw($1C)){continue;}if($p0.getMarkState($1C)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $1D=$p0.getMarkBounds($1C);var $1E=$p0.pixelToDomainX($1D.x);var $1F=$p0.pixelToDomainX($1D.x+$1D.w);var $20=$p0.getMarkInstances($1E,$1F);for(var $21=$20.first;$21<=$20.second;++$21){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($21),0);this.$58($p0,$1C,'selectedUnder',$3);this.get_currentContext().restore();}}else{this.$58($p0,$1C,'selectedUnder',$3);}}}break;case 'selectedOnPass':if($1||$2){$3='colorOverrideOpaque';for(var $22=0;$22<$0;$22++){if(!$p0.markNeedsDraw($22)){continue;}if($p0.getMarkState($22)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $23=$p0.getMarkBounds($22);var $24=$p0.pixelToDomainX($23.x);var $25=$p0.pixelToDomainX($23.x+$23.w);var $26=$p0.getMarkInstances($24,$25);for(var $27=$26.first;$27<=$26.second;++$27){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($27),0);this.$58($p0,$22,'normalOn',$3);if($p0.get_drawBorder()){this.$58($p0,$22,'border',$3);}this.get_currentContext().restore();}}else{this.$58($p0,$22,'normalOn',$3);if($p0.get_drawBorder()){this.$58($p0,$22,'border',$3);}}}}break;}this.get_currentContext().restore();},$58:function($p0,$p1,$p2,$p3){this.get_currentContext().save();if(!!$p0.get_clipCase()){this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}var $0=$p0.getMarkProperty('shape_id',$p1);switch($0){case 'shapeIDCircle':this.$5B($p0,$p1,$p2,$p3);break;case 'shapeIDFilledCircle':this.$5E($p0,$p1,$p2,$p3);break;case 'shapeIDUnscaledFilledCircle':this.$61($p0,$p1,$p2,$p3);break;case 'shapeIDSquare':this.$64($p0,$p1,$p2,$p3);break;case 'shapeIDFilledSquare':this.$67($p0,$p1,$p2,$p3);break;case 'shapeIDAsterisk':this.$6A($p0,$p1,$p2,$p3);break;case 'shapeIDPlus':this.$6D($p0,$p1,$p2,$p3);break;case 'shapeIDFilledPlus':this.$70($p0,$p1,$p2,$p3);break;case 'shapeIDTimes':this.$73($p0,$p1,$p2,$p3);break;case 'shapeIDFilledTimes':this.$76($p0,$p1,$p2,$p3);break;case 'shapeIDDiamond':this.$79($p0,$p1,$p2,$p3);break;case 'shapeIDFilledDiamond':this.$7C($p0,$p1,$p2,$p3);break;case 'shapeIDTriangle':this.$7F($p0,$p1,$p2,$p3);break;case 'shapeIDFilledTriangle':this.$82($p0,$p1,$p2,$p3);break;case 'shapeIDDownTriangle':this.$85($p0,$p1,$p2,$p3);break;case 'shapeIDFilledDownTriangle':this.$88($p0,$p1,$p2,$p3);break;case 'shapeIDLeftTriangle':this.$8B($p0,$p1,$p2,$p3);break;case 'shapeIDFilledLeftTriangle':this.$8E($p0,$p1,$p2,$p3);break;case 'shapeIDRightTriangle':this.$91($p0,$p1,$p2,$p3);break;case 'shapeIDFilledRightTriangle':this.$94($p0,$p1,$p2,$p3);break;case 'shapeIDFilledStar':this.$97($p0,$p1,$p2,$p3);break;default:tab.CanvasRenderer.renderCustomShape(this.get_currentContext(),$p0,$p1,$p2,$p3);break;}this.get_currentContext().restore();},$5B:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),($p0.getMarkProperty('width',$p1)*(1+(-0.5/12))),($p0.getMarkProperty('halo_color',$p1))[$p3],4);break;case 'normalOn':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),($p0.getMarkProperty('width',$p1)*(1+(-0.5/12))),($p0.getMarkProperty('color',$p1))[$p3],2);break;case 'selectedUnder':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),($p0.getMarkProperty('width',$p1)*(1+(-0.5/12))),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4);break;default:break;}},$5E:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),($p0.getMarkProperty('width',$p1)*(1+(-0.25/12))),($p0.getMarkProperty('halo_color',$p1))[$p3],4);break;case 'normalOn':tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),($p0.getMarkProperty('width',$p1)*(1+(-0.25/12))),($p0.getMarkProperty('color',$p1))[$p3]);break;case 'selectedUnder':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),($p0.getMarkProperty('width',$p1)*(1+(-0.25/12))),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4);break;case 'border':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),($p0.getMarkProperty('width',$p1)*(1+(-0.25/12))),($p0.getMarkProperty('border_color',$p1))[$p3],1);break;default:break;}},$61:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('halo_color',$p1))[$p3],4);break;case 'normalOn':tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('color',$p1))[$p3]);break;case 'selectedUnder':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4);break;case 'border':tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+$p0.getMarkProperty('x',$p1),0+$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('border_color',$p1))[$p3],1);break;default:break;}},$64:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':tab.CanvasRenderer.renderRectangle(this.get_currentContext(),$p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,($p0.getMarkProperty('width',$p1)*(1+(-1.25/12))),($p0.getMarkProperty('width',$p1)*(1+(-1.25/12))),($p0.getMarkProperty('halo_color',$p1))[$p3],4);break;case 'normalOn':tab.CanvasRenderer.renderRectangle(this.get_currentContext(),$p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,($p0.getMarkProperty('width',$p1)*(1+(-1.25/12))),($p0.getMarkProperty('width',$p1)*(1+(-1.25/12))),($p0.getMarkProperty('color',$p1))[$p3],2);break;case 'selectedUnder':tab.CanvasRenderer.renderRectangle(this.get_currentContext(),$p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,($p0.getMarkProperty('width',$p1)*(1+(-1.25/12))),($p0.getMarkProperty('width',$p1)*(1+(-1.25/12))),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4);break;default:break;}},$67:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':tab.CanvasRenderer.renderRectangle(this.get_currentContext(),$p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,($p0.getMarkProperty('width',$p1)*(1+(-0.75/12))),($p0.getMarkProperty('width',$p1)*(1+(-0.75/12))),($p0.getMarkProperty('halo_color',$p1))[$p3],4);break;case 'normalOn':this.renderFilledRectangle($p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,($p0.getMarkProperty('width',$p1)*(1+(-0.75/12))),($p0.getMarkProperty('width',$p1)*(1+(-0.75/12))),($p0.getMarkProperty('color',$p1))[$p3]);break;case 'selectedUnder':tab.CanvasRenderer.renderRectangle(this.get_currentContext(),$p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,($p0.getMarkProperty('width',$p1)*(1+(-0.75/12))),($p0.getMarkProperty('width',$p1)*(1+(-0.75/12))),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4);break;case 'border':tab.CanvasRenderer.renderRectangle(this.get_currentContext(),$p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,($p0.getMarkProperty('width',$p1)*(1+(-0.75/12))),($p0.getMarkProperty('width',$p1)*(1+(-0.75/12))),($p0.getMarkProperty('border_color',$p1))[$p3],1);break;default:break;}},$6A:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(-0.5/12)))/2;var $1=0.9*$0;var $2=($p0.getMarkProperty('width',$p1)*(1+(-0.5/12)))/4;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $3=[];$3.add(0);$3.add(-$0);$3.add(0);$3.add($0);this.renderLine($3,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $4=[];$4.add(-$1);$4.add(-$2);$4.add($1);$4.add($2);this.renderLine($4,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $5=[];$5.add($1);$5.add(-$2);$5.add(-$1);$5.add($2);this.renderLine($5,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();break;case 'normalOn':var $6=($p0.getMarkProperty('width',$p1)*(1+(-0.5/12)))/2;var $7=0.9*$6;var $8=($p0.getMarkProperty('width',$p1)*(1+(-0.5/12)))/4;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $9=[];$9.add(0);$9.add(-$6);$9.add(0);$9.add($6);this.renderLine($9,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $A=[];$A.add(-$7);$A.add(-$8);$A.add($7);$A.add($8);this.renderLine($A,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $B=[];$B.add($7);$B.add(-$8);$B.add(-$7);$B.add($8);this.renderLine($B,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();break;case 'selectedUnder':var $C=($p0.getMarkProperty('width',$p1)*(1+(-0.5/12)))/2;var $D=0.9*$C;var $E=($p0.getMarkProperty('width',$p1)*(1+(-0.5/12)))/4;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $F=[];$F.add(0);$F.add(-$C);$F.add(0);$F.add($C);this.renderLine($F,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $10=[];$10.add(-$D);$10.add(-$E);$10.add($D);$10.add($E);this.renderLine($10,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $11=[];$11.add($D);$11.add(-$E);$11.add(-$D);$11.add($E);this.renderLine($11,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();break;default:break;}},$6D:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $1=[];$1.add(0);$1.add(-$0);$1.add(0);$1.add($0);this.renderLine($1,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $2=[];$2.add(-$0);$2.add(0);$2.add($0);$2.add(0);this.renderLine($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();break;case 'normalOn':var $3=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $4=[];$4.add(0);$4.add(-$3);$4.add(0);$4.add($3);this.renderLine($4,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $5=[];$5.add(-$3);$5.add(0);$5.add($3);$5.add(0);this.renderLine($5,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();break;case 'selectedUnder':var $6=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $7=[];$7.add(0);$7.add(-$6);$7.add(0);$7.add($6);this.renderLine($7,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $8=[];$8.add(-$6);$8.add(0);$8.add($6);$8.add(0);this.renderLine($8,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();break;default:break;}},$70:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/2;var $1=($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/6;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $2=[];$2.add((-$1));$2.add((-$0));$2.add((-$1));$2.add((-$1));$2.add((-$0));$2.add((-$1));$2.add((-$0));$2.add($1);$2.add((-$1));$2.add($1);$2.add((-$1));$2.add($0);$2.add($1);$2.add($0);$2.add($1);$2.add($1);$2.add($0);$2.add($1);$2.add($0);$2.add((-$1));$2.add($1);$2.add((-$1));$2.add($1);$2.add((-$0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $3=($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/2;var $4=($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/6;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $5=[];$5.add((-$4));$5.add((-$3));$5.add((-$4));$5.add((-$4));$5.add((-$3));$5.add((-$4));$5.add((-$3));$5.add($4);$5.add((-$4));$5.add($4);$5.add((-$4));$5.add($3);$5.add($4);$5.add($3);$5.add($4);$5.add($4);$5.add($3);$5.add($4);$5.add($3);$5.add((-$4));$5.add($4);$5.add((-$4));$5.add($4);$5.add((-$3));this.renderFilledPolygon($5,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $6=($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/2;var $7=($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/6;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $8=[];$8.add((-$7));$8.add((-$6));$8.add((-$7));$8.add((-$7));$8.add((-$6));$8.add((-$7));$8.add((-$6));$8.add($7);$8.add((-$7));$8.add($7);$8.add((-$7));$8.add($6);$8.add($7);$8.add($6);$8.add($7);$8.add($7);$8.add($6);$8.add($7);$8.add($6);$8.add((-$7));$8.add($7);$8.add((-$7));$8.add($7);$8.add((-$6));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($8,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$73:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(-1.5/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $1=[];$1.add(-$0);$1.add(-$0);$1.add($0);$1.add($0);this.renderLine($1,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $2=[];$2.add(-$0);$2.add($0);$2.add($0);$2.add(-$0);this.renderLine($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();break;case 'normalOn':var $3=($p0.getMarkProperty('width',$p1)*(1+(-1.5/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $4=[];$4.add(-$3);$4.add(-$3);$4.add($3);$4.add($3);this.renderLine($4,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $5=[];$5.add(-$3);$5.add($3);$5.add($3);$5.add(-$3);this.renderLine($5,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();break;case 'selectedUnder':var $6=($p0.getMarkProperty('width',$p1)*(1+(-1.5/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $7=[];$7.add(-$6);$7.add(-$6);$7.add($6);$7.add($6);this.renderLine($7,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $8=[];$8.add(-$6);$8.add($6);$8.add($6);$8.add(-$6);this.renderLine($8,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();break;default:break;}},$76:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/2;var $1=($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/4;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $2=[];$2.add((-$1));$2.add((-$0));$2.add((-$0));$2.add((-$1));$2.add((-$1));$2.add((0));$2.add((-$0));$2.add($1);$2.add((-$1));$2.add($0);$2.add((0));$2.add($1);$2.add($1);$2.add($0);$2.add($0);$2.add($1);$2.add($1);$2.add((0));$2.add($0);$2.add((-$1));$2.add($1);$2.add((-$0));$2.add((0));$2.add((-$1));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $3=($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/2;var $4=($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/4;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $5=[];$5.add((-$4));$5.add((-$3));$5.add((-$3));$5.add((-$4));$5.add((-$4));$5.add((0));$5.add((-$3));$5.add($4);$5.add((-$4));$5.add($3);$5.add((0));$5.add($4);$5.add($4);$5.add($3);$5.add($3);$5.add($4);$5.add($4);$5.add((0));$5.add($3);$5.add((-$4));$5.add($4);$5.add((-$3));$5.add((0));$5.add((-$4));this.renderFilledPolygon($5,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $6=($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/2;var $7=($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/4;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $8=[];$8.add((-$7));$8.add((-$6));$8.add((-$6));$8.add((-$7));$8.add((-$7));$8.add((0));$8.add((-$6));$8.add($7);$8.add((-$7));$8.add($6);$8.add((0));$8.add($7);$8.add($7);$8.add($6);$8.add($6);$8.add($7);$8.add($7);$8.add((0));$8.add($6);$8.add((-$7));$8.add($7);$8.add((-$6));$8.add((0));$8.add((-$7));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($8,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$79:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(0.5/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $1=[];$1.add((0));$1.add((-$0));$1.add((-$0));$1.add((0));$1.add((0));$1.add($0);$1.add($0);$1.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($1,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $2=($p0.getMarkProperty('width',$p1)*(1+(0.5/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $3=[];$3.add((0));$3.add((-$2));$3.add((-$2));$3.add((0));$3.add((0));$3.add($2);$3.add($2);$3.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($3,2,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $4=($p0.getMarkProperty('width',$p1)*(1+(0.5/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $5=[];$5.add((0));$5.add((-$4));$5.add((-$4));$5.add((0));$5.add((0));$5.add($4);$5.add($4);$5.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($5,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$7C:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(0.5/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $1=[];$1.add((0));$1.add((-$0));$1.add((-$0));$1.add((0));$1.add((0));$1.add($0);$1.add($0);$1.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($1,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $2=($p0.getMarkProperty('width',$p1)*(1+(0.5/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $3=[];$3.add((0));$3.add((-$2));$3.add((-$2));$3.add((0));$3.add((0));$3.add($2);$3.add($2);$3.add((0));this.renderFilledPolygon($3,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $4=($p0.getMarkProperty('width',$p1)*(1+(0.5/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $5=[];$5.add((0));$5.add((-$4));$5.add((-$4));$5.add((0));$5.add((0));$5.add($4);$5.add($4);$5.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($5,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$7F:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $1=[];$1.add((0));$1.add((-$0));$1.add((-$0));$1.add($0);$1.add($0);$1.add($0);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($1,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $2=($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $3=[];$3.add((0));$3.add((-$2));$3.add((-$2));$3.add($2);$3.add($2);$3.add($2);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($3,2,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $4=($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $5=[];$5.add((0));$5.add((-$4));$5.add((-$4));$5.add($4);$5.add($4);$5.add($4);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($5,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$82:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $1=[];$1.add((0));$1.add((-$0));$1.add((-$0));$1.add($0);$1.add($0);$1.add($0);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($1,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $2=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $3=[];$3.add((0));$3.add((-$2));$3.add((-$2));$3.add($2);$3.add($2);$3.add($2);this.renderFilledPolygon($3,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $4=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $5=[];$5.add((0));$5.add((-$4));$5.add((-$4));$5.add($4);$5.add($4);$5.add($4);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($5,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$85:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $1=[];$1.add((0));$1.add($0);$1.add((-$0));$1.add((-$0));$1.add($0);$1.add((-$0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($1,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $2=($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $3=[];$3.add((0));$3.add($2);$3.add((-$2));$3.add((-$2));$3.add($2);$3.add((-$2));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($3,2,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $4=($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $5=[];$5.add((0));$5.add($4);$5.add((-$4));$5.add((-$4));$5.add($4);$5.add((-$4));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($5,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$88:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $1=[];$1.add((0));$1.add($0);$1.add((-$0));$1.add((-$0));$1.add($0);$1.add((-$0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($1,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $2=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $3=[];$3.add((0));$3.add($2);$3.add((-$2));$3.add((-$2));$3.add($2);$3.add((-$2));this.renderFilledPolygon($3,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $4=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $5=[];$5.add((0));$5.add((($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2));$5.add((-$4));$5.add((-$4));$5.add($4);$5.add((-$4));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($5,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$8B:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $1=[];$1.add((-$0));$1.add((0));$1.add($0);$1.add((-$0));$1.add($0);$1.add($0);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($1,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $2=($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $3=[];$3.add((-$2));$3.add((0));$3.add($2);$3.add((-$2));$3.add($2);$3.add($2);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($3,2,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $4=($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $5=[];$5.add((-$4));$5.add((0));$5.add($4);$5.add((-$4));$5.add($4);$5.add($4);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($5,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$8E:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $1=[];$1.add((-$0));$1.add((0));$1.add($0);$1.add((-$0));$1.add($0);$1.add($0);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($1,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $2=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $3=[];$3.add((-$2));$3.add((0));$3.add($2);$3.add((-$2));$3.add($2);$3.add($2);this.renderFilledPolygon($3,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $4=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $5=[];$5.add((-$4));$5.add((0));$5.add($4);$5.add((-$4));$5.add($4);$5.add($4);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($5,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$91:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $1=[];$1.add((-$0));$1.add((-$0));$1.add((-$0));$1.add($0);$1.add($0);$1.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($1,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $2=($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $3=[];$3.add((-$2));$3.add((-$2));$3.add((-$2));$3.add($2);$3.add($2);$3.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($3,2,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $4=($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $5=[];$5.add((-$4));$5.add((-$4));$5.add((-$4));$5.add($4);$5.add($4);$5.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($5,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$94:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $1=[];$1.add((-$0));$1.add((-$0));$1.add((-$0));$1.add($0);$1.add($0);$1.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($1,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $2=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $3=[];$3.add((-$2));$3.add((-$2));$3.add((-$2));$3.add($2);$3.add($2);$3.add((0));this.renderFilledPolygon($3,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $4=($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $5=[];$5.add((-$4));$5.add((-$4));$5.add((-$4));$5.add($4);$5.add($4);$5.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($5,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$97:function($p0,$p1,$p2,$p3){switch($p2){case 'normalUnder':var $0=($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))/2;var $1=($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.3877;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $2=[];$2.add((0));$2.add(((-$0)+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.0246)));$2.add((-$0+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.3817)));$2.add((-$0+$1));$2.add((-$0));$2.add((-$0+$1));$2.add((-$0+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.3088)));$2.add((-$0+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.612)));$2.add((-$0+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.1909)));$2.add((-$0+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.9751)));$2.add((0));$2.add((-$0+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.7507)));$2.add((-$0+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.8085)));$2.add((-$0+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.9751)));$2.add((-$0+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.6905)));$2.add((-$0+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.612)));$2.add($0);$2.add((-$0+$1));$2.add((-$0+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.6176)));$2.add((-$0+$1));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $3=($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))/2;var $4=($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.3877;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $5=[];$5.add((0));$5.add((-$3+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.0246)));$5.add((-$3+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.3817)));$5.add((-$3+$4));$5.add((-$3));$5.add((-$3+$4));$5.add((-$3+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.3088)));$5.add((-$3+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.612)));$5.add((-$3+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.1909)));$5.add((-$3+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.9751)));$5.add((0));$5.add((-$3+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.7507)));$5.add((-$3+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.8085)));$5.add((-$3+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.9751)));$5.add((-$3+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.6905)));$5.add((-$3+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.612)));$5.add($3);$5.add((-$3+$4));$5.add((-$3+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.6176)));$5.add((-$3+$4));this.renderFilledPolygon($5,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $6=($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))/2;var $7=($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.3877;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $8=[];$8.add((0));$8.add((-$6+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.0246)));$8.add((-$6+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.3817)));$8.add((-$6+$7));$8.add((-$6));$8.add((-$6+$7));$8.add((-$6+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.3088)));$8.add((-$6+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.612)));$8.add((-$6+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.1909)));$8.add((-$6+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.9751)));$8.add((0));$8.add((-$6+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.7507)));$8.add((-$6+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.8085)));$8.add((-$6+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.9751)));$8.add((-$6+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.6905)));$8.add((-$6+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.612)));$8.add($6);$8.add((-$6+$7));$8.add((-$6+(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))*0.6176)));$8.add((-$6+$7));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($8,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$9A:function($p0,$p1,$p2,$p3,$p4,$p5){switch($p2){case 'normalUnder':var $0=$p4.abv;if($p0.isTupleVisible($p4.acf[$p1])){if((!$p1||!$p0.isTupleVisible($p4.acf[$p1-1]))&&($p1+1>=$p4.ad3.length||!$p0.isTupleVisible($p4.acf[$p1+1]))){var $1=(($p4.acu[$p1]/2)+2.5);if($p4.fc){var $2=$p0.thisDomainToPixelY($p4.ad3[$p1]);var $3=$p0.thisDomainToPixelY($p4.ad4[$p1]);var $4=$p0.thisDomainToPixelX($p4.ad5[$p1]);var $5=[($4-$1),$2,($4-$1),$3,($4+$1),$3,($4+$1),$2];this.renderFilledPolygon($5,$p0.getOneColorAlpha($0,$p3,$p5));}else{var $6=$p0.thisDomainToPixelX($p4.ad3[$p1]);var $7=$p0.thisDomainToPixelX($p4.ad4[$p1]);var $8=$p0.thisDomainToPixelY($p4.ad5[$p1]);var $9=[$6,($8-$1),$7,($8-$1),$7,($8+$1),$6,($8+$1)];this.renderFilledPolygon($9,$p0.getOneColorAlpha($0,$p3,$p5));}}else{if($p1+1<$p4.acf.length&&$p0.isTupleVisible($p4.acf[$p1+1])){if($p4.fc){var $A=$p0.thisDomainToPixelY($p4.ad3[$p1]);var $B=$p0.thisDomainToPixelY($p4.ad4[$p1]);var $C=$p0.thisDomainToPixelY($p4.ad3[$p1+1]);var $D=$p0.thisDomainToPixelY($p4.ad4[$p1+1]);var $E=$p0.thisDomainToPixelX($p4.ad5[$p1]);var $F=$p0.thisDomainToPixelX($p4.ad5[$p1+1]);var $10=[$E,$B,$F,$D,$F,$C,$E,$A];this.renderFilledPolygon($10,$p0.getOneColorAlpha($0,$p3,$p5));}else{var $11=$p0.thisDomainToPixelX($p4.ad3[$p1]);var $12=$p0.thisDomainToPixelX($p4.ad4[$p1]);var $13=$p0.thisDomainToPixelX($p4.ad3[$p1+1]);var $14=$p0.thisDomainToPixelX($p4.ad4[$p1+1]);var $15=$p0.thisDomainToPixelY($p4.ad5[$p1]);var $16=$p0.thisDomainToPixelY($p4.ad5[$p1+1]);var $17=[$12,$15,$14,$16,$13,$16,$11,$15];this.renderFilledPolygon($17,$p0.getOneColorAlpha($0,$p3,$p5));}}}}break;}},$9B:function($p0,$p1,$p2,$p3){var $0='colorOverrideNone';var $1=255;if(!(Type.canCast($p2,Object))){return;}var $2=$p2;var $3=0;var $4=1;var $5=2;var $6=$3;var $enum1=ss.IEnumerator.getEnumerator($2.act);while($enum1.moveNext()){var $7=$enum1.current;if($p0.isTupleSelected($7)){$6=$5;break;}if($6!==$4&&$p0.isTupleHighlighted($7)){$6=$4;}}if($6!==$5){var $enum2=ss.IEnumerator.getEnumerator($2.acf);while($enum2.moveNext()){var $8=$enum2.current;if($p0.isTupleSelected($8)){$6=$5;break;}if($6!==$4&&$p0.isTupleHighlighted($8)){$6=$4;}}}switch($p1){case 'normalUnderPass':if($6===$3&&$p3==='background'){if($p0.get_hasSelection()||$p0.get_hasBrushing()){$0='colorOverrideFog';}else{$0='colorOverrideNone';}var $9=$2.acf.length;for(var $A=0;$A<$9;$A++){this.$9A($p0,$A,'normalUnder',$0,$2,$1);}}break;case 'highlightedUnderPass':if($6===$4&&$p3==='background'){var $B=$2.acf.length;for(var $C=0;$C<$B;$C++){if($p0.isTupleHighlighted($2.acf[$C])&&((!$C||!$p0.isTupleVisible($2.acf[$C-1]))&&($C+1>=$2.ad3.length||!$p0.isTupleVisible($2.acf[$C+1]))||($C+1<$2.acf.length&&$p0.isTupleVisible($2.acf[$C+1])&&$p0.isTupleHighlighted($2.acf[$C+1])))){$0='colorOverrideNone';}else{$0='colorOverrideFog';}this.$9A($p0,$C,'normalUnder',$0,$2,$1);}}break;case 'selectedUnderPass':if($6===$5&&$p3==='background'){$0='colorOverrideReplaceAlpha';$1=(0.3*255);var $D=$2.acf.length;for(var $E=0;$E<$D;$E++){this.$9A($p0,$E,'normalUnder',$0,$2,$1);}}break;}},$9C:function($p0,$p1,$p2,$p3,$p4,$p5){switch($p2){case 'border':if($p0.isTupleVisible($p4.acf[$p1])){var $0=parseInt(((($p4.acu[$p1])-1)/2));if($p4.fc){var $1=parseInt($p0.thisDomainToPixelX($p4.ad5[$p1]));var $2=parseInt($p0.thisDomainToPixelY($p4.ad3[$p1]));var $3=parseInt($p0.thisDomainToPixelY($p4.ad4[$p1]));var $4=($2-0.5);var $5=($3+1.5);var $6=($1-0.5-$0);var $7=($1+1.5+$0);var $8=($2+1.5);var $9=($3-0.5);var $A=($1-0.5);var $B=($1+1.5);var $C=[$6,$4,$7,$4,$7,$8,$B,$8,$B,$9,$7,$9,$7,$5,$6,$5,$6,$9,$A,$9,$A,$8,$6,$8];this.renderLineLoop($C,1,$p0.getOneColorAlpha($p4.abv,$p3,$p5));}else{var $D=parseInt($p0.thisDomainToPixelY($p4.ad5[$p1]));var $E=parseInt($p0.thisDomainToPixelX($p4.ad4[$p1]));var $F=parseInt($p0.thisDomainToPixelX($p4.ad3[$p1]));var $10=($D-0.5-$0);var $11=($D+1.5+$0);var $12=($E-0.5);var $13=($F+1.5);var $14=($D-0.5);var $15=($D+1.5);var $16=($E+1.5);var $17=($F-0.5);var $18=[$12,$10,$16,$10,$16,$14,$17,$14,$17,$10,$13,$10,$13,$11,$17,$11,$17,$15,$16,$15,$16,$11,$12,$11];this.renderLineLoop($18,1,$p0.getOneColorAlpha($p4.abv,$p3,$p5));}}break;case 'normalUnder':if($p0.isTupleVisible($p4.acf[$p1])){var $19=parseInt(((($p4.acu[$p1])-1)/2));var $1A=$p4.acs[$p1];if($p4.fc){var $1B=parseInt($p0.thisDomainToPixelX($p4.ad5[$p1]));var $1C=parseInt($p0.thisDomainToPixelY($p4.ad3[$p1]));var $1D=parseInt($p0.thisDomainToPixelY($p4.ad4[$p1]));var $1E=[($1B-$19),($1C+0.5),($1B+$19+1),($1C+0.5)];this.renderLine($1E,1,$p0.getOneColorAlpha($1A,$p3,$p5),false);var $1F=[($1B-$19),($1D+0.5),($1B+$19+1),($1D+0.5)];this.renderLine($1F,1,$p0.getOneColorAlpha($1A,$p3,$p5),false);var $20=[($1B+0.5),($1C+1),($1B+0.5),$1D];this.renderLine($20,1,$p0.getOneColorAlpha($1A,$p3,$p5),false);}else{var $21=parseInt($p0.thisDomainToPixelY($p4.ad5[$p1]));var $22=parseInt($p0.thisDomainToPixelX($p4.ad4[$p1]));var $23=parseInt($p0.thisDomainToPixelX($p4.ad3[$p1]));var $24=[($22+0.5),($21-$19),($22+0.5),($21+$19+1)];this.renderLine($24,1,$p0.getOneColorAlpha($1A,$p3,$p5),false);var $25=[($23+0.5),($21-$19),($23+0.5),($21+$19+1)];this.renderLine($25,1,$p0.getOneColorAlpha($1A,$p3,$p5),false);var $26=[($22+1),($21+0.5),$23,($21+0.5)];this.renderLine($26,1,$p0.getOneColorAlpha($1A,$p3,$p5),false);}}break;}},$9D:function($p0,$p1,$p2,$p3){var $0='colorOverrideNone';var $1=255;if(!(Type.canCast($p2,Object))){return;}var $2=$p2;switch($p1){case 'normalUnderPass':if(!$2.fb&&$p3==='background'){if($p0.get_hasSelection()||$p0.get_hasBrushing()){$0='colorOverrideFog';}else{$0='colorOverrideNone';}var $3=$2.acf.length;for(var $4=0;$4<$3;$4++){if(!$p0.isTupleHighlighted($2.acf[$4])&&!$p0.isTupleSelected($2.acf[$4])){this.$9C($p0,$4,'border',$0,$2,$1);this.$9C($p0,$4,'normalUnder',$0,$2,$1);}}}break;case 'normalOnPass':if($2.fb&&$p3==='underLabel'){if($p0.get_hasSelection()||$p0.get_hasBrushing()){$0='colorOverrideFog';}else{$0='colorOverrideNone';}var $5=$2.acf.length;for(var $6=0;$6<$5;$6++){if(!$p0.isTupleHighlighted($2.acf[$6])&&!$p0.isTupleSelected($2.acf[$6])){this.$9C($p0,$6,'border',$0,$2,$1);this.$9C($p0,$6,'normalUnder',$0,$2,$1);}}}break;case 'selectedUnderPass':if(!$2.fb&&$p3==='background'){var $7=$2.acf.length;for(var $8=0;$8<$7;$8++){if($p0.isTupleSelected($2.acf[$8])){$0='colorOverrideReplaceAlpha';$1=(0.25*255);this.$9C($p0,$8,'border',$0,$2,$1);$0='colorOverrideReplaceAlpha';$1=($2.ab1/255*255);this.$9C($p0,$8,'normalUnder',$0,$2,$1);}}}break;case 'selectedOnPass':if($2.fb&&$p3==='underLabel'){var $9=$2.acf.length;for(var $A=0;$A<$9;$A++){if($p0.isTupleSelected($2.acf[$A])){$0='colorOverrideReplaceAlpha';$1=(0.25*255);this.$9C($p0,$A,'border',$0,$2,$1);$0='colorOverrideReplaceAlpha';$1=($2.ab1/255*255);this.$9C($p0,$A,'normalUnder',$0,$2,$1);}}}break;case 'highlightedUnderPass':if(!$2.fb&&$p3==='background'){$0='colorOverrideNone';var $B=$2.acf.length;for(var $C=0;$C<$B;$C++){if($p0.isTupleHighlighted($2.acf[$C])){this.$9C($p0,$C,'border',$0,$2,$1);this.$9C($p0,$C,'normalUnder',$0,$2,$1);}}}break;case 'highlightedOnPass':if($2.fb&&$p3==='underLabel'){$0='colorOverrideNone';var $D=$2.acf.length;for(var $E=0;$E<$D;$E++){if($p0.isTupleHighlighted($2.acf[$E])){this.$9C($p0,$E,'border',$0,$2,$1);this.$9C($p0,$E,'normalUnder',$0,$2,$1);}}}break;}}}
tab.BrowserViewport=function(dimensions){this.$1=dimensions;}
tab.BrowserViewport.get_$4=function(){return tab.Logger.lazyGetLogger(tab.BrowserViewport);}
tab.BrowserViewport.get_$5=function(){var $0=new tab.WindowHelper(window.self);return tab.$create_Rect($0.get_pageXOffset(),$0.get_pageYOffset(),$0.get_clientWidth(),$0.get_clientHeight());}
tab.BrowserViewport.get_$6=function(){try{var $0=new tab.WindowHelper(window.parent);return tab.$create_Rect($0.get_pageXOffset(),$0.get_pageYOffset(),$0.get_clientWidth(),$0.get_clientHeight());}catch($1){return tab.BrowserViewport.get_$5();}}
tab.BrowserViewport.getViewport=function(callback){tab.Param.verifyValue(callback,'callback');if(tabBootstrap.Utility.get_embedMode()==='embeddedNotInWg'){if(ss.isNullOrUndefined(tab.BrowserViewport.$2)){callback(new tab.BrowserViewport(tab.BrowserViewport.get_$5()));}else{tab.BrowserViewport.$0=callback;tab.BrowserViewport.$A();}}else{callback(new tab.BrowserViewport(tab.BrowserViewport.get_$6()));}}
tab.BrowserViewport.$7=function($p0){if(tabBootstrap.Utility.get_embedMode()==='embeddedNotInWg'){if(ss.isValue(tab.BrowserViewport.$2)){$p0.y+=tab.BrowserViewport.$2.y;$p0.x+=tab.BrowserViewport.$2.x;}}else{try{var $0=window.self;while($0.frameElement!=null){var $1=$($0.frameElement).offset();$p0.y+=$1.top;$p0.x+=$1.left;$0=$0.parent;}}catch($2){}}}
tab.BrowserViewport.$8=function($p0){if(typeof ss === 'undefined'){return;}var $0=$p0.data;if(ss.isNullOrUndefined($0)){return;}var $1=$0.split(',');if(!ss.isValue($1)||$1.length<=0){return;}switch($1[0]){case 'layoutInfoResp':if($1.length===5){var $2=tab.$create_Rect(parseInt($1[1],10),parseInt($1[2],10),parseInt($1[3],10),parseInt($1[4],10));tab.BrowserViewport.$9($2);}break;case 'vizOffsetResp':if($1.length===3){tab.BrowserViewport.$2=tab.$create_Point(parseInt($1[1],10),parseInt($1[2],10));}break;}}
tab.BrowserViewport.$9=function($p0){var $0=new tab.BrowserViewport($p0);if(ss.isValue(tab.BrowserViewport.$0)){tab.BrowserViewport.$0($0);}}
tab.BrowserViewport.$A=function(){if(tab.BrowserSupport.get_postMessage()){window.parent.postMessage('layoutInfoReq','*');}else{tab.BrowserViewport.$9(tab.BrowserViewport.get_$5());}}
tab.BrowserViewport.$B=function(){if(tab.BrowserViewport.$3){if(ss.isValue(window.removeEventListener)){window.removeEventListener('message',tab.BrowserViewport.$8,true);}else{window.self.detachEvent('onmessage', tab.BrowserViewport.$8);}tab.BrowserViewport.$3=false;}}
tab.BrowserViewport.$C=function(){if(ss.isValue(window.addEventListener)){window.addEventListener('unload',tab.BrowserViewport.$D,true);}else{window.self.attachEvent('onunload', tab.BrowserViewport.$D);}}
tab.BrowserViewport.$D=function($p0){tab.BrowserViewport.$B();}
tab.BrowserViewport.prototype={$1:null,get_dimensions:function(){return this.$1;},translatePositionToViewport:function(p){var $0=tab.$create_Point(p.x,p.y);tab.BrowserViewport.$7($0);$0.y-=this.$1.t;$0.x-=this.$1.l;return $0;},getVisibleRoom:function(position,padding){padding=padding||0;var $0=this.translatePositionToViewport(position);var $1=function($p1_0){
return Math.max(0,$p1_0-padding);};var $2=$1(Math.min(this.get_dimensions().w-$0.x,($(window).width()+$(window).scrollLeft())-position.x));var $3=$1(Math.min($0.x,position.x));var $4=$1(Math.min($0.y,position.y));var $5=$1(Math.min(this.get_dimensions().h-$0.y,($(window).height()+$(window).scrollTop())-position.y));return spiff.$create_VisibleRoom($4,$5,$3,$2);},getDocumentViewport:function(point){var $0=this.getVisibleRoom(point);return tab.$create_Rect(point.x-$0.roomLeft,point.y-$0.roomAbove,$0.roomLeft+$0.roomRight,$0.roomAbove+$0.roomBelow);}}
tab.ExportHelper=function(){this.$0={};}
tab.ExportHelper.prototype={$0:null,get_sheetScrollPositions:function(){return this.$0;},setSheetScrollPositions:function(viewControllers){this.$0={};var $enum1=ss.IEnumerator.getEnumerator(viewControllers);while($enum1.moveNext()){var $0=$enum1.current;this.$0[$0.get_sheetName()]=$0.get_viewWidget().get_scrollPosition();}},triggerExportPdfUI:function(){var $0=spiff.ObjectRegistry.newExportPDFDialog(tab.ExportPdfDialog,tab.CommandController.get().get_legacySession());$0.add_closed(function(){
$0.dispose();$0=null;});$0.show();}}
tab.QfButtonUtil=function(){}
tab.QfButtonUtil.enableResetButton=function(button){if(button==null){return;}dojo.removeClass(button.iconNode,'wcIconFiltered');dojo.removeClass(button.iconNode,'wcIconNonfiltered');dojo.addClass(button.iconNode,'wcIconFiltered');button.attr('label','Click to show all values');button.setDisabled(false);var $0=$(button.domNode.firstChild.firstChild);$($0.get(0)).removeAttr('style');}
tab.QfButtonUtil.disableResetButton=function(button){if(button==null){return;}dojo.removeClass(button.iconNode,'wcIconFiltered');dojo.addClass(button.iconNode,'wcIconNonfiltered');button.attr('label','Showing all values');button.setDisabled(true);dojo.removeClass(button.domNode,'dijitButtonHover');dojo.removeClass(button.domNode,'dijitHover');var $0=$(button.domNode.firstChild.firstChild);$($0.get(0)).css('background','transparent');}
tab.ImageUtil=function(){}
tab.ImageUtil.scaleImage=function(img,newWidth,newHeight,oldWidth,oldHeight){var $0=document.createElement('canvas');$0.width=newWidth;$0.height=newHeight;if(newWidth>0&&newHeight>0){var $1=document.createElement('canvas');$1.width=oldWidth;$1.height=oldHeight;var $2=$1.getContext('2d');$2.drawImage(img,0,0);var $3=$2.getImageData(0,0,oldWidth,oldHeight);var $4=$0.getContext('2d');var $5=$4.createImageData(newWidth,newHeight);tab.ImageUtil.bilinearDownSampleAlgorithm($3,$5);$4.putImageData($5,0,0);}return $0;}
tab.ImageUtil.bilinearDownSampleAlgorithm=function(input,output){var $0=input.width/output.width;var $1=input.height/output.height;var $2=$0;var $3=$1;var $4=input.data;var $5=output.data;var $6=new Array($5.length);for(var $16=0;$16<$6.length;$16++){$6[$16]=0;}var $7=1/($0*$1);var $8=0;var $9=0;var $A=false;var $B,$C;$B=$C=0;var $D=$7;var $E=0;var $F=0;var $10=0;var $11=4*output.width;var $12,$13,$14,$15;for(var $17=0;$17<input.height;$17++){$2=$0;for(var $18=0;$18<input.width;$18++){$12=$4[$8];$13=$4[$8+1];$14=$4[$8+2];$15=$4[$8+3];$D=$7;if($A){$D=$B;$F=$C;if($2<1){$F*=$2;}$6[$9+$11]+=$12*$F;$6[$9+$11+1]+=$13*$F;$6[$9+$11+2]+=$14*$F;$6[$9+$11+3]+=$15*$F;}if($2<1){$E=$D*(1-$2);$D*=$2;if($A){$10=$C*(1-$2);$6[$9+$11+4]+=$12*$10;$6[$9+$11+5]+=$13*$10;$6[$9+$11+6]+=$14*$10;$6[$9+$11+7]+=$15*$10;}$6[$9+4]+=$12*$E;$6[$9+5]+=$13*$E;$6[$9+6]+=$14*$E;$6[$9+7]+=$15*$E;}$6[$9++]+=$12*$D;$6[$9++]+=$13*$D;$6[$9++]+=$14*$D;$6[$9++]+=$15*$D;$8+=4;$2-=1;if($2<tab.FloatUtil.epsilon){$2+=$0;}else{$9-=4;}}$3-=1;if($3<tab.FloatUtil.epsilon){$3+=$1;}else{$9-=$11;}if($3<1){$A=true;$B=$3/($0*$1);$C=(1-$3)/($0*$1);}else{$A=false;}}for(var $19=0;$19<$6.length;$19++){$5[$19]=$6[$19]+0.5;}}
tab.CanvasUtil=function(){}
tab.CanvasUtil.sizeCanvasWithHighDPISupport=function(canvas,context,effectiveSize){var $0=tab.RenderUtil.calculatePixelRatio();tab.CanvasUtil.setCanvasSizeAndDensify(canvas,$0,effectiveSize);if(!tab.FloatUtil.isEqual($0,1)){tab.CanvasUtil.scaleCanvasDrawing(context,$0);}}
tab.CanvasUtil.setCanvasSizeAndDensify=function(canvasEl,pixelRatio,effectiveSize){if(ss.isValue(canvasEl)){var $0=tab.$create_Size((effectiveSize.w*pixelRatio),(effectiveSize.h*pixelRatio));tab.CanvasUtil.densifyCanvasUsingSize(canvasEl,$0,effectiveSize);}}
tab.CanvasUtil.densifyCanvasUsingSize=function(canvasEl,actual,effective){if(ss.isValue(canvasEl)&&ss.isValue(actual)&&ss.isValue(effective)){canvasEl.width=actual.w;canvasEl.height=actual.h;canvasEl.style.width=tab.CanvasUtil.$0(effective.w);canvasEl.style.height=tab.CanvasUtil.$0(effective.h);}}
tab.CanvasUtil.scaleCanvasDrawing=function(context,pixelRatio){if(ss.isValue(context)){context.scale(pixelRatio,pixelRatio);}}
tab.CanvasUtil.isOverCanvasSizeLimit=function(effectiveWidth,effectiveHeight,pixelRatio){var $0=Math.floor((pixelRatio*effectiveWidth*pixelRatio*effectiveHeight)+0.5);return $0>tabBootstrap.ViewerBootstrap.get_canvasPixelLimit();}
tab.CanvasUtil.canvasDensified=function(canvas){return !!canvas.style.height&&canvas.style.height!==tab.CanvasUtil.$0(canvas.height);}
tab.CanvasUtil.$0=function($p0){return $p0+'px';}
tab.Metrics=function(){}
tab.Metrics.get_scrollW=function(){return tab.Metrics.get_$0();}
tab.Metrics.get_minScrollWidth=function(){if(dojo.isSafari||tab.BrowserSupport.get_isMac()){return 60;}return tab.Metrics.get_scrollW()*2;}
tab.Metrics.get_scrollH=function(){return tab.Metrics.get_$0();}
tab.Metrics.get_minScrollHeight=function(){if(dojo.isSafari||tab.BrowserSupport.get_isMac()){return 60;}return tab.Metrics.get_scrollH()*2;}
tab.Metrics.get_$0=function(){return tab.MiscUtil.lazyInitStaticField(tab.Metrics,'_scrollBarSize',function(){
return tabBootstrap.LayoutMetrics.getScrollbarSize();});}
tab.LocalSearch=function(){}
tab.LocalSearch.searchQueryMatchesText=function(query,text){var $0=query.length;var $1;if(query.charAt(0)==='"'&&query.charAt($0-1)==='"'){return query.substr(1,$0-2)===text;}else if(query.charAt(0)!=='*'&&query.charAt($0-1)==='*'){return !text.indexOf(query.substr(0,$0-1));}else if(query.charAt(0)==='*'&&query.charAt($0-1)!=='*'){$1=text.lastIndexOf(query.substr(1,$0-1));return $1>=0&&$1===text.length-($0-1);}else if(query.charAt(0)==='*'&&query.charAt($0-1)==='*'){return text.indexOf(query.substr(1,$0-2))>=0;}else{return text.indexOf(query)>=0;}}
tab.LocalSearch.findMatches=function(query,filter,tupleFormatter,resultTransformer){var $0=query.toLowerCase();var $1=[];var $2=filter.table.tuples;if(ss.isNullOrUndefined(resultTransformer)){resultTransformer=function($p1_0,$p1_1,$p1_2){
return $p1_0;};}for(var $3=0;$3<$2.length;$3++){var $4=tupleFormatter($2[$3]);if(tab.LocalSearch.searchQueryMatchesText($0,$4.toLowerCase())){$1.push(resultTransformer($2[$3],$4,$3));}}return $1;}
tab.DisplayList2DUtils=function(){}
tab.DisplayList2DUtils.rectXYFromDrawRect=function(points){return tab.$create_RectXY(points[0],points[1],points[2]-points[0],points[3]-points[1]);}
tab.GeometryUtil=function(){}
tab.GeometryUtil.isPointInPoly=function(poly,p,inflatePixels){if(ss.isValue(inflatePixels)&&!!inflatePixels){return tab.GeometryUtil.polygonIntersectsDoubleRect(poly,tab.$create_DoubleRectXY(p.x-inflatePixels,p.y-inflatePixels,inflatePixels*2,inflatePixels*2));}var $0=0;for(var $1=0;$1<poly.length;++$1){if(tab.GeometryUtil.$6(poly,$1).y<=p.y){if(tab.GeometryUtil.$6(poly,$1+1).y>p.y){if(tab.GeometryUtil.$5(tab.GeometryUtil.$6(poly,$1),tab.GeometryUtil.$6(poly,$1+1),p)>0){++$0;}}}else{if(tab.GeometryUtil.$6(poly,$1+1).y<=p.y){if(tab.GeometryUtil.$5(tab.GeometryUtil.$6(poly,$1),tab.GeometryUtil.$6(poly,$1+1),p)<0){--$0;}}}}if(!$0){return false;}return true;}
tab.GeometryUtil.isPointInMultipolygon=function(multipolygon,p){var $0=false;var $enum1=ss.IEnumerator.getEnumerator(multipolygon.a0j);while($enum1.moveNext()){var $1=$enum1.current;var $2=0;var $enum2=ss.IEnumerator.getEnumerator($1.a0l);while($enum2.moveNext()){var $3=$enum2.current;var $4=tab.GeometryUtil.$7($3.ad2);var $5=tab.GeometryUtil.isPointInPoly($4,p);if(!$2){if($5){$0=true;}else{break;}}else{if($5){$0=false;break;}}$2++;}if($0){return $0;}}return $0;}
tab.GeometryUtil.multipolygonIntersectsDoubleRect=function(multipolygon,rect){var $enum1=ss.IEnumerator.getEnumerator(multipolygon.a0j);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($0.a0l);while($enum2.moveNext()){var $1=$enum2.current;var $2=tab.GeometryUtil.$7($1.ad2);if(tab.GeometryUtil.polygonIntersectsDoubleRect($2,rect)){return true;}}}return false;}
tab.GeometryUtil.multipolygonIntersectsPolygon=function(multipolygon,polygonB){var $enum1=ss.IEnumerator.getEnumerator(multipolygon.a0j);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($0.a0l);while($enum2.moveNext()){var $1=$enum2.current;var $2=tab.GeometryUtil.$7($1.ad2);if(tab.GeometryUtil.$1($2,polygonB)){return true;}}}return false;}
tab.GeometryUtil.polygonIntersectsRect=function(pointList,rect){return tab.GeometryUtil.$1(pointList,tab.GeometryUtil.$8(rect));}
tab.GeometryUtil.polygonIntersectsDoubleRect=function(pointList,rect){return tab.GeometryUtil.$1(pointList,tab.GeometryUtil.$9(rect));}
tab.GeometryUtil.$1=function($p0,$p1){if(!$p0.length||!$p1.length){return false;}if(tab.GeometryUtil.isPointInPoly($p1,$p0[0])){return true;}if(tab.GeometryUtil.isPointInPoly($p0,$p1[0])){return true;}for(var $0=0,$1=$p0.length;$0<$1;$0++){var $2=tab.GeometryUtil.$6($p0,$0);var $3=tab.GeometryUtil.$6($p0,$0+1);for(var $4=0,$5=$p1.length;$4<$5;$4++){var $6=tab.GeometryUtil.$6($p1,$4);var $7=tab.GeometryUtil.$6($p1,$4+1);if(tab.GeometryUtil.$2($2,$3,$6,$7)){return true;}}}return false;}
tab.GeometryUtil.$2=function($p0,$p1,$p2,$p3){var $0=(($p3.x-$p2.x)*($p0.y-$p3.y))-(($p3.y-$p2.y)*($p0.x-$p3.x));var $1=(($p3.x-$p2.x)*($p1.y-$p3.y))-(($p3.y-$p2.y)*($p1.x-$p3.x));var $2=(($p1.x-$p0.x)*($p2.y-$p1.y))-(($p1.y-$p0.y)*($p2.x-$p1.x));var $3=(($p1.x-$p0.x)*($p3.y-$p1.y))-(($p1.y-$p0.y)*($p3.x-$p1.x));if(!!$0&&!!$1&&!!$2&&!!$3){var $4=$0>0!==$1>0;var $5=$2>0!==$3>0;return $4&&$5;}else{var $6=[$0,$1,$2,$3];return tab.GeometryUtil.$3($6,[$p0,$p1,$p2,$p3]);}}
tab.GeometryUtil.$3=function($p0,$p1){var $0=[$p1[2],$p1[2],$p1[0],$p1[0]];var $1=[$p1[3],$p1[3],$p1[1],$p1[1]];for(var $2=0,$3=4;$2<$3;$2++){if(!$p0[$2]){var $4=$p1[$2];var $5=$0[$2];var $6=$1[$2];if($4.x>=Math.min($5.x,$6.x)&&$4.x<=Math.max($5.x,$6.x)&&$4.y>=Math.min($5.y,$6.y)&&$4.y<=Math.max($5.y,$6.y)){return true;}}}return false;}
tab.GeometryUtil.multipolygonIntersectsCircle=function(multipolygon,circle){var $enum1=ss.IEnumerator.getEnumerator(multipolygon.a0j);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($0.a0l);while($enum2.moveNext()){var $1=$enum2.current;var $2=tab.GeometryUtil.$7($1.ad2);if(tab.GeometryUtil.polygonIntersectsCircle($2,circle)){return true;}}}return false;}
tab.GeometryUtil.circleIntersectsCircle=function(c1,c2){var $0=Math.pow(c1.center.x-c2.center.x,2)+Math.pow(c1.center.y-c2.center.y,2);return Math.pow(c1.radius+c2.radius,2)>=$0;}
tab.GeometryUtil.polygonIntersectsCircle=function(pointList,circle){if(!pointList.length||!circle.radius){return false;}if(tab.GeometryUtil.isPointInPoly(pointList,circle.center)){return true;}if(tab.GeometryUtil.isPointInCircle(pointList[0],circle)){return true;}var $0=circle.radius*circle.radius;for(var $1=0,$2=pointList.length;$1<$2;$1++){var $3=tab.GeometryUtil.$6(pointList,$1);var $4=tab.GeometryUtil.$6(pointList,$1+1);var $5=$4.y-$3.y;var $6=$4.x-$3.x;var $7=($6*$6)+($5*$5);var $8=(((circle.center.x-$3.x)*$6)+((circle.center.y-$3.y)*$5))/$7;$8=Math.min(1,Math.max(0,$8));var $9=$3.x+($8*$6);var $A=$3.y+($8*$5);$6=$9-circle.center.x;$5=$A-circle.center.y;$7=($6*$6)+($5*$5);if($0>$7){return true;}}return false;}
tab.GeometryUtil.circleIntersectsRect=function(circle,rect){if(circle.radius<=0){return false;}var $0=tab.GeometryUtil.$8(rect);var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $4=$enum1.current;if(tab.GeometryUtil.isPointInCircle($4,circle)){return true;}}if(tab.RectXYUtil.inRectPointF(rect,circle.center)){return true;}var $1=rect.w/2;var $2=rect.h/2;var $3=tab.$create_PointF(rect.x+$1,rect.y+$2);if(circle.center.y<rect.y||circle.center.y>rect.y+rect.h){return circle.center.x>rect.x&&circle.center.x<rect.x+rect.w&&Math.abs($3.y-circle.center.y)<$2+circle.radius;}if(circle.center.x<rect.x||circle.center.x>rect.x+rect.w){return circle.center.y>rect.y&&circle.center.y<rect.y+rect.h&&Math.abs($3.x-circle.center.x)<$1+circle.radius;}return false;}
tab.GeometryUtil.normalizeAngle=function(radians){var $0=radians%tab.GeometryUtil.twoPI;if($0<0){$0+=tab.GeometryUtil.twoPI;}return $0;}
tab.GeometryUtil.isInBetweenAngles=function(target,angle1,angle2){var $0=false;if(angle1>angle2){var $1=angle1;angle1=angle2;angle2=$1;$0=true;}if(angle1<=target&&angle2>=target){return !$0;}return $0;}
tab.GeometryUtil.isPointInCircle=function(p,circle){var $0=Math.pow(p.x-circle.center.x,2)+Math.pow(p.y-circle.center.y,2);var $1=circle.radius*circle.radius;var $2=$0<$1;return $2;}
tab.GeometryUtil.isPointInWedge=function(p,wedgeCircle,startangle,endangle){if(!tab.GeometryUtil.isPointInCircle(p,wedgeCircle)){return false;}var $0=p.x-wedgeCircle.center.x;var $1=p.y-wedgeCircle.center.y;var $2=Math.atan2($1,$0);$2=tab.GeometryUtil.normalizeAngle($2);return tab.GeometryUtil.isInBetweenAngles($2,startangle,endangle);}
tab.GeometryUtil.rectIntersectsWedge=function(rect,wedgeCircle,startangle,endangle){var $0=tab.GeometryUtil.$8(rect);var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $2=$enum1.current;if(tab.GeometryUtil.isPointInWedge($2,wedgeCircle,startangle,endangle)){return true;}}if(tab.RectXYUtil.inRectPointF(rect,wedgeCircle.center)){return true;}var $1=tab.GeometryUtil.$4(wedgeCircle,startangle,endangle);return tab.GeometryUtil.polygonIntersectsRect($1,rect);}
tab.GeometryUtil.polygonIntersectsWedge=function(pointList,wedgeCircle,startangle,endangle){if(!pointList.length){return false;}if(tab.GeometryUtil.isPointInWedge(pointList[0],wedgeCircle,startangle,endangle)){return true;}if(tab.GeometryUtil.isPointInPoly(pointList,wedgeCircle.center)){return true;}var $0=tab.GeometryUtil.$4(wedgeCircle,startangle,endangle);return tab.GeometryUtil.$1($0,pointList);}
tab.GeometryUtil.circleIntersectsWedge=function(circle,wedgeCircle,startangle,endangle){if(circle.radius<=0){return false;}if(tab.GeometryUtil.isPointInWedge(circle.center,wedgeCircle,startangle,endangle)){return true;}if(tab.GeometryUtil.isPointInCircle(wedgeCircle.center,circle)){return true;}var $0=tab.GeometryUtil.$4(wedgeCircle,startangle,endangle);return tab.GeometryUtil.polygonIntersectsCircle($0,circle);}
tab.GeometryUtil.$4=function($p0,$p1,$p2){while($p1>$p2){$p2+=tab.GeometryUtil.twoPI;}var $0=$p1;var $1=[];var $2=tab.$create_PointF($p0.center.x+(Math.cos($0)*$p0.radius),$p0.center.y+(Math.sin($0)*$p0.radius));$1.add($p0.center);$1.add($2);while($0<$p2){var $3=Math.min($0+tab.GeometryUtil.$0,$p2);$2=tab.$create_PointF($p0.center.x+(Math.cos($3)*$p0.radius),$p0.center.y+(Math.sin($3)*$p0.radius));$1.add($2);$0=$3;}return $1;}
tab.GeometryUtil.areRectanglesIntersecting=function(rect1,rect2){return tab.RectXYUtil.intersectsWith(rect1,rect2);}
tab.GeometryUtil.getSquaredDistanceToCenter=function(bound,selectionPoint){var $0=bound.x+(bound.w/2);var $1=bound.y+(bound.h/2);var $2=$0-selectionPoint.x;var $3=$1-selectionPoint.y;return ($2*$2)+($3*$3);}
tab.GeometryUtil.getSquaredDistanceToNearestSide=function(bound,selectionPoint){var $0=bound.y;var $1=bound.y+bound.h;var $2=bound.x;var $3=bound.x+bound.w;var $4,$5;if(selectionPoint.x<$2){$4=$2-selectionPoint.x;}else if(selectionPoint.x>$3){$4=selectionPoint.x-$3;}else{$4=0;}if(selectionPoint.y<$0){$5=$0-selectionPoint.y;}else if(selectionPoint.y>$1){$5=selectionPoint.y-$1;}else{$5=0;}return ($4*$4)+($5*$5);}
tab.GeometryUtil.getSquaredDistanceToCircumference=function(bound,selectionPoint){var $0=Math.sqrt(tab.GeometryUtil.getSquaredDistanceToCenter(bound,selectionPoint))-(Math.min(bound.w,bound.h)/2);$0=Math.max($0,0);return $0*$0;}
tab.GeometryUtil.getSquaredDistanceToLineSegment=function(bound,selectionPoint){return tab.GeometryUtil.getSquaredDistanceToNearestSide(bound,selectionPoint);}
tab.GeometryUtil.$5=function($p0,$p1,$p2){return ((($p1.x-$p0.x)*($p2.y-$p0.y))-(($p2.x-$p0.x)*($p1.y-$p0.y)));}
tab.GeometryUtil.$6=function($p0,$p1){var $0=$p1%$p0.length;return $p0[$0];}
tab.GeometryUtil.$7=function($p0){var $0=[];for(var $1=0;$1<$p0.length;$1=$1+2){$0.add(tab.$create_PointF($p0[$1],$p0[$1+1]));}return $0;}
tab.GeometryUtil.$8=function($p0){var $0=[];$0.add(tab.$create_PointF($p0.x,$p0.y));$0.add(tab.$create_PointF($p0.x+$p0.w,$p0.y));$0.add(tab.$create_PointF($p0.x+$p0.w,$p0.y+$p0.h));$0.add(tab.$create_PointF($p0.x,$p0.y+$p0.h));return $0;}
tab.GeometryUtil.$9=function($p0){var $0=[];$0.add(tab.$create_PointF($p0.x,$p0.y));$0.add(tab.$create_PointF($p0.x+$p0.w,$p0.y));$0.add(tab.$create_PointF($p0.x+$p0.w,$p0.y+$p0.h));$0.add(tab.$create_PointF($p0.x,$p0.y+$p0.h));return $0;}
tab.HitTestResult=function(objectId,objType,hitType){this.id=objectId;this.$0=objType;this.$1=hitType;this.$2=!!hitType;}
tab.HitTestResult.getIdsFromHitTestResults=function(objectHitsInfo){var $0=new tab.UintSet();var $enum1=ss.IEnumerator.getEnumerator(objectHitsInfo);while($enum1.moveNext()){var $1=$enum1.current;$0.add($1.get_id());}return $0.get_values();}
tab.HitTestResult.hasExactHit=function(hitInfoArray){var $enum1=ss.IEnumerator.getEnumerator(hitInfoArray);while($enum1.moveNext()){var $0=$enum1.current;if($0.get_hitType()===3){return true;}}return false;}
tab.HitTestResult.tieBreakHits=function(firstResult,secondResult){var $0=new tab.HitTestResult(0,0,0);var $1=new tab.HitTestResult(0,0,0);var $enum1=ss.IEnumerator.getEnumerator(firstResult);while($enum1.moveNext()){var $2=$enum1.current;if($2.get_hitType()===3){return $2;}if(!!$2.get_hitType()&&!$0.get_hitType()){$0=$2;}}var $enum2=ss.IEnumerator.getEnumerator(secondResult);while($enum2.moveNext()){var $3=$enum2.current;if($3.get_hitType()===3){return $3;}if(!!$3.get_hitType()&&!$1.get_hitType()){$1=$3;}}if(!!$0.get_hitType()){return $0;}if(!!$1.get_hitType()){return $1;}return new tab.HitTestResult(0,0,0);}
tab.HitTestResult.prototype={id:0,$0:0,$1:0,$2:false,get_id:function(){return this.id;},get_hitObjectType:function(){return this.$0;},get_hitType:function(){return this.$1;},get_shouldRenderOverlay:function(){return this.$2;},get_visualPart:function(){switch(this.$0){case 2:return 'ref-lines';case 3:return 'trend-lines';case 1:return 'marks';default:return 'misc';}},doNotRenderOverlay:function(){this.$2=false;}}
tab.HitTestDebugger=function(){var $0=$('.tab-tvView .tabCanvas');this.$3=$0.get(0);this.$2=this.$3.style.position;this.$3.style.position='absolute';this.$4=document.createElement('canvas');this.$4.width=this.$3.width;this.$4.height=this.$3.height;this.$4.style.position='absolute';this.$5=this.$3.parentNode;this.$5.appendChild(this.$4);}
tab.HitTestDebugger.get_instance=function(){if(ss.isNullOrUndefined(tab.HitTestDebugger.$0)){tab.HitTestDebugger.$0=new tab.HitTestDebugger();}return tab.HitTestDebugger.$0;}
tab.HitTestDebugger.prototype={$2:null,$3:null,$4:null,$5:null,get_context2D:function(){return this.$4.getContext('2d');},debugDrawBoundingBoxesHierarchy:function(root){this.clear();this.$6(root);},debugDrawBoundingBoxesHierarchies:function(roots){this.clear();var $enum1=ss.IEnumerator.getEnumerator(roots);while($enum1.moveNext()){var $0=$enum1.current;this.$6($0);}},clear:function(){this.get_context2D().clearRect(0,0,this.$4.width,this.$4.height);},done:function(){this.$3.style.position=this.$2;this.$5.removeChild(this.$4);},$6:function($p0){var $0=[];$0.enqueue($p0);while($0.length>0){var $1=$0.dequeue();if($1.get_nodeType()===2){var $3=$1.get_boundingBox();this.get_context2D().save();if(!(tab.HitTestDebugger.$1%2)){this.get_context2D().fillStyle='rgba(120, 255, 20, 0.1)';}else{this.get_context2D().fillStyle='rgba(20, 255, 120, 0.1)';}this.get_context2D().fillRect($3.x,$3.y,$3.w,$3.h);this.get_context2D().restore();++tab.HitTestDebugger.$1;}if($1.get_nodeType()===3||$1.get_nodeType()===5){var $4=$1.get_boundingBox();this.get_context2D().save();this.get_context2D().fillStyle='rgba(255, 0, 0, 0.2)';this.get_context2D().fillRect($4.x,$4.y,$4.w,$4.h);this.get_context2D().restore();}if($1.get_nodeType()===4){var $5=$1.get_boundingBox();this.get_context2D().save();this.get_context2D().fillStyle='rgba(0, 0, 255, 0.2)';this.get_context2D().fillRect($5.x,$5.y,$5.w,$5.h);this.get_context2D().restore();}var $2=$1.get_children();$2.forEach(function($p1_0){
$0.enqueue($p1_0);});}}}
tab.VisualPartsHitTest=function(){}
tab.VisualPartsHitTest.hitTestRefLines=function(drawItems,selectionRect,isSingleSelect){var $0=new tab.HitTestResult(0,0,0);var $1=tab.VisualPartsHitTest.getRefParts(drawItems,'refpart-geom');$0=tab.VisualPartsHitTest.$0($1,selectionRect,isSingleSelect,$0);if($0.get_hitType()===3){return $0;}var $2=tab.VisualPartsHitTest.getRefParts(drawItems,'refpart-text');$0=tab.VisualPartsHitTest.$0($2,selectionRect,isSingleSelect,$0);return $0;}
tab.VisualPartsHitTest.$0=function($p0,$p1,$p2,$p3){for(var $0=$p0.length-1;$0>=0;$0--){var $1=$p0[$0];var $2=tab.VisualPartsHitTest.$1($1.au0,$p1,$p2,$1.abi);if($2.get_hitType()===3){return $2;}if($2.get_hitType()===2&&!$p3.get_hitType()){$p3=$2;}}return $p3;}
tab.VisualPartsHitTest.hitTestTrendLines=function(trendLineHitTestStructures,selectionRect,isSingleSelect){var $0=new tab.HitTestResult(0,0,0);for(var $1=trendLineHitTestStructures.length-1;$1>=0;$1--){var $2=new tab.HitTester(trendLineHitTestStructures[$1]);var $3=$2.hitTestTrendLine(selectionRect,isSingleSelect);if($3.get_hitType()===3){return $3;}if($3.get_hitType()===2&&!$0.get_hitType()){$0=$3;}}return $0;}
tab.VisualPartsHitTest.$1=function($p0,$p1,$p2,$p3){var $0=tab.RectXYUtil.dialate($p1,tab.VisualPartsHitTest.visualPartNearHitTestExpansionPixels);var $1=1;var $2=new tab.HitTestResult($p3,2,0);var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $3=$enum1.current;switch($3.ag5){case 'avg':var $4=$3;if(ss.isValue($4.acx)){$1=$4.acx;}break;case 'au5':case 'au2':var $5=$3;var $6=ss.isValue($5.k5)&&!$5.k5;var $7=tab.$create_PointF($5.zf[0],$5.zf[1]);var $8=tab.$create_PointF($5.zf[2],$5.zf[3]);var $9=tab.RectXYUtil.rectXYFromCorners($7,$8);if($3.ag5==='au5'){if($1<3){$9=tab.RectXYUtil.dialate($9,1);}}var $A=$p2&&tab.RectXYUtil.intersectsWith($0,$9);var $B=(!$p2||$A)&&tab.RectXYUtil.intersectsWith($p1,$9);if($B){$2=new tab.HitTestResult($p3,2,3);if($6){$2.doNotRenderOverlay();}return $2;}if($A){$2=new tab.HitTestResult($p3,2,2);if($6){$2.doNotRenderOverlay();}}break;default:break;}}return $2;}
tab.VisualPartsHitTest.$2=function($p0,$p1,$p2,$p3){var $0=tab.RectXYUtil.dialate($p1,tab.VisualPartsHitTest.visualPartNearHitTestExpansionPixels);var $1=new tab.HitTestResult($p3,2,0);var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $2=$enum1.current;switch($2.ag5){case 'au2':var $3=$2;var $4=tab.DisplayList2DUtils.rectXYFromDrawRect($3.zf);var $5=$p2&&tab.RectXYUtil.intersectsWith($0,$4);var $6=(!$p2||$5)&&tab.RectXYUtil.intersectsWith($p1,$4);if($6){return new tab.HitTestResult($p3,2,3);}if($5){$1=new tab.HitTestResult($p3,2,2);}break;default:break;}}return $1;}
tab.VisualPartsHitTest.getRefParts=function(drawItems,refPart){var $0=[];var $enum1=ss.IEnumerator.getEnumerator(drawItems);while($enum1.moveNext()){var $1=$enum1.current;if($1.ag5==='au8'&&refPart==='refpart-clip-rect'){$0.add($1);}else if($1.ag5==='auv'){var $2=$1;var $3=_.find($2.au0,function($p1_0){
return $p1_0.ag5==='avb';});if(refPart==='refpart-text'&&ss.isValue($3)){$0.add($1);}else if(refPart==='refpart-geom'&&ss.isNullOrUndefined($3)){$0.add($1);}}}return $0;}
tab.LineMarkDrawState=function(paneDrawInfo){this.$0=[];this.$1(paneDrawInfo);}
tab.LineMarkDrawState.prototype={$0:null,get_lineAttributes:function(){return this.$0;},$1:function($p0){this.$0.clear();var $0=$p0.get_markCount();var $1=new tab.LineAttribute(0);for(var $2=0;$2<$0;$2++){if($p0.get_isWrappedDomain()){var $4=$p0.getMarkBounds($2);var $5=$4.x;var $6=$4.x+$4.w;$1.minXDomain=Math.min($1.minXDomain,$p0.pixelToDomainX($5));$1.maxXDomain=Math.max($1.maxXDomain,$p0.pixelToDomainX($6));}var $3=$p0.getMarkState($2);if($3==='markStateSelected'){$1.selectedCount++;if($p0.isMarkHighlighted($2)){$1.highlightedCount++;}}else if($3==='markStateHighlighted'){$1.highlightedCount++;}if($p0.isMarkEndPrimitive($2)){$1.endIndex=$2;this.$0.add($1);$1=new tab.LineAttribute($2+1);}}}}
tab.LineAttribute=function(startIndex){this.startIndex=startIndex;this.endIndex=-1;this.selectedCount=0;this.highlightedCount=0;this.minXDomain=0;this.maxXDomain=0;}
tab.LineAttribute.prototype={startIndex:0,endIndex:0,selectedCount:0,highlightedCount:0,minXDomain:0,maxXDomain:0,get_allHighlighted:function(){return this.highlightedCount>=(this.endIndex-this.startIndex+1);},get_lineState:function(){if(this.selectedCount>0){return 'lineStateSelected';}else if(this.highlightedCount>0){return 'lineStateHighlighted';}else{return 'lineStateNormal';}}}
tab.HitTargetColliders=function(){}
tab.HitTargetNode=function(boundingBox,nodeType,objectId,labelBoundingBox,worldOffset){this.$1=boundingBox;if(ss.isNullOrUndefined(labelBoundingBox)||tab.RectXYUtil.isEmpty(labelBoundingBox)){this.$4=null;}else{this.$4=labelBoundingBox;}if(ss.isNullOrUndefined(objectId)){this.$3=-1;}else{this.$3=objectId;}if(ss.isNullOrUndefined(worldOffset)){this.$5=-1;}else{this.$5=worldOffset;}this.$2=nodeType;this.$0=[];}
tab.HitTargetNode.findPaneNode=function(node){if(ss.isNullOrUndefined(node)){return null;}while(!!node.$2){if(node.get_nodeType()===1){return node;}node=node.get_parent();}return null;}
tab.HitTargetNode.createRootNode=function(){return new tab.HitTargetNode(tab.$create_RectXY(0,0,9999999,9999999),0);}
tab.HitTargetNode.prototype={$0:null,$1:null,$2:0,$3:0,$4:null,$5:0,$6:null,$7:null,$8:0,get_objectId:function(){return this.$3;},get_worldOffset:function(){return this.$5;},get_nodeType:function(){return this.$2;},get_boundingBox:function(){return this.$1;},get_labelBox:function(){return this.$4;},get_children:function(){return this.$0;},get_parent:function(){return this.$6;},set_parent:function(value){this.$6=value;return value;},get_paneKey:function(){return this.$7;},set_paneKey:function(value){this.$7=value;return value;},get_paneIndex:function(){return this.$8;},set_paneIndex:function(value){this.$8=value;return value;},addNode:function(node){this.$0.add(node);node.set_parent(this);},addNodes:function(nodes){this.$0.addRange(nodes);var $enum1=ss.IEnumerator.getEnumerator(nodes);while($enum1.moveNext()){var $0=$enum1.current;$0.set_parent(this);}},resetChildren:function(){this.$0.clear();}}
tab.HitTester=function(root){this.$0=root;}
tab.HitTester.$3=function($p0,$p1,$p2,$p3,$p4){switch($p4){case 'area':return tab.MarksRenderer.$15($p0,$p1.x-$p3,$p1.y,$p2);case 'line':return tab.MarksRenderer.$2D($p0,$p1.x-$p3,$p1.y,$p2);case 'multipolygon':return tab.MarksRenderer.$10($p0,$p1.x-$p3,$p1.y,$p2);case 'pie':return tab.MarksRenderer.$1D($p0,$p1.x-$p3,$p1.y,$p2);case 'shape':return tab.MarksRenderer.$32($p0,$p1.x-$p3,$p1.y,$p2);case 'bar':case 'square':return tab.MarksRenderer.$28($p0,$p1.x-$p3,$p1.y,$p2);case 'text':return tab.MarksRenderer.$23($p0,$p1.x-$p3,$p1.y,$p2);default:var $0=tab.$create_RectXY($p1.x-Math.round($p3),$p1.y,$p1.w,$p1.h);return tab.RectXYUtil.intersectsWith($0,$p0.getMarkBounds($p2));}}
tab.HitTester.$4=function($p0,$p1,$p2,$p3,$p4){switch($p4){case 'line':return tab.MarksRenderer.$2E($p0,$p1.x-$p3,$p1.y,$p2);case 'shape':return tab.MarksRenderer.$33($p0,$p1.x-$p3,$p1.y,$p2);case 'bar':case 'square':return tab.MarksRenderer.$29($p0,$p1.x-$p3,$p1.y,$p2);case 'text':return tab.MarksRenderer.$24($p0,$p1.x-$p3,$p1.y,$p2);case 'area':return tab.MarksRenderer.$16($p0,$p1.x-$p3,$p1.y,$p2);default:return false;}}
tab.HitTester.rectangleAreaHit=function(paneDrawInfo,markBoundingBox,selection,markIndex,t,primitiveType){var $0=(t.get_isNull())?selection:tab.RectXYUtil.offsetRectF(selection,tab.$create_PointF(-t.get_translateX(),-t.get_translateY()));switch(primitiveType){case 'area':return tab.MarksRenderer.$19(paneDrawInfo,$0,markIndex);case 'line':return tab.MarksRenderer.$54(paneDrawInfo,$0,markIndex);case 'multipolygon':var $1=t.transformRect(selection);return tab.MarksRenderer.$11(paneDrawInfo,$1,markIndex);case 'pie':return tab.MarksRenderer.$1E(paneDrawInfo,$0,markIndex);case 'shape':return tab.MarksRenderer.$36(paneDrawInfo,$0,markIndex);default:return tab.RectXYUtil.intersectsWith(selection,markBoundingBox);}}
tab.HitTester.circleAreaHit=function(paneDrawInfo,markBoundingBox,selection,markIndex,t,primitiveType){var $0=(t.get_isNull())?selection:tab.CircleUtil.offsetCircle(selection,tab.$create_PointF(-t.get_translateX(),-t.get_translateY()));switch(primitiveType){case 'area':return tab.MarksRenderer.$1B(paneDrawInfo,$0,markIndex);case 'line':return tab.MarksRenderer.$56(paneDrawInfo,$0,markIndex);case 'multipolygon':var $1=t.transformCircle(selection);return tab.MarksRenderer.$13(paneDrawInfo,$1,markIndex);case 'pie':return tab.MarksRenderer.$20(paneDrawInfo,$0,markIndex);case 'shape':return tab.MarksRenderer.$37(paneDrawInfo,$0,markIndex);default:return tab.GeometryUtil.circleIntersectsRect(selection,markBoundingBox);}}
tab.HitTester.polyAreaHit=function(paneDrawInfo,markBoundingBox,offsetSelectionPts,markIndex,t,primitiveType){switch(primitiveType){case 'area':return tab.MarksRenderer.$1A(paneDrawInfo,offsetSelectionPts,markIndex);case 'line':return tab.MarksRenderer.$55(paneDrawInfo,offsetSelectionPts,markIndex);case 'multipolygon':return tab.MarksRenderer.$12(paneDrawInfo,offsetSelectionPts,markIndex);case 'pie':return tab.MarksRenderer.$1F(paneDrawInfo,offsetSelectionPts,markIndex);case 'shape':return tab.MarksRenderer.$38(paneDrawInfo,offsetSelectionPts,markIndex);default:var $0=markBoundingBox;if(!t.get_isNull()){$0=tab.$create_RectXY(markBoundingBox.x-Math.round(t.get_translateX()),markBoundingBox.y,markBoundingBox.w,markBoundingBox.h);}return tab.GeometryUtil.polygonIntersectsRect(offsetSelectionPts,$0);}}
tab.HitTester.getTransformInfo=function(pdi,node){if(pdi.get_markType()==='multipolygon'&&!pdi.hasPixelGeometry){var $1=node.get_objectId();var $2=pdi.getMarkProperty('x',$1);var $3=pdi.getMarkProperty('y',$1);var $4=pdi.getMarkProperty('size',$1);return tab.Transform.pixelToDomain($2,$3,$4);}var $0=pdi.getWorldOffset(node.get_worldOffset());return tab.Transform.worldOffset($0);}
tab.HitTester.prototype={$0:null,hitTestTrendLine:function(selectionRect,isSingleSelect){var $0=new tab.HitTestResult(0,0,0);if(isSingleSelect){var $1=tab.RectXYUtil.dialate(selectionRect,tab.VisualPartsHitTest.visualPartNearHitTestExpansionPixels);var $2=this.$1($1);if(ss.isValue($2)){$0=new tab.HitTestResult($2,3,2);}}if($0.get_hitType()===2||!isSingleSelect){var $3=this.$1(selectionRect);if(ss.isValue($3)){$0=new tab.HitTestResult($3,3,3);}}return $0;},$1:function($p0){var $0=[];$0.push(this.$0);while($0.length>0){var $1=$0.pop();var $2=tab.RectXYUtil.intersectsWith($1.get_boundingBox(),$p0);if($2){if($1.get_nodeType()===4||!$1.get_nodeType()){var $3=$1.get_children();$3.forEach(function($p1_0){
$0.push($p1_0);});}else if($1.get_nodeType()===5){return $1.get_objectId();}}}return null;},hitTestPanes:function(selectionRect){var $0=[];var $1=[];$1.push(this.$0);while($1.length>0){var $2=$1.pop();var $3=tab.RectXYUtil.intersectsWith($2.get_boundingBox(),selectionRect);if($3){if($2.get_nodeType()===1){$0.add($2.get_paneKey());}else{var $4=$2.get_children();$4.forEach(function($p1_0){
$1.push($p1_0);});}}}return $0;},hitTest:function(selectionRect,isSingleSelect,sceneInfo){if(tab.RectXYUtil.isEmpty(selectionRect)){return new Array(0);}var $0=this.hitTestBoundingBoxes(selectionRect,isSingleSelect,sceneInfo);return (isSingleSelect)?this.hitTestSingle(selectionRect,sceneInfo,$0):this.$2(selectionRect,sceneInfo,$0);},hitTestSingle:function(selectionRect,sceneInfo,intersectedBBoxes){var $0=selectionRect.x+(selectionRect.w/2);var $1=selectionRect.y+(selectionRect.h/2);var $2=null;var $3=0;var $4={};var $5=[];for(var $A=intersectedBBoxes.length-1;$A>=0;$A--){var $B=intersectedBBoxes[$A];if($B.get_objectId()<0){continue;}var $C=tab.HitTargetNode.findPaneNode($B);if(ss.isNullOrUndefined($C)){continue;}if(ss.isNullOrUndefined($4[$C.get_paneIndex()])){$4[$C.get_paneIndex()]=[];$5.add($C);}$4[$C.get_paneIndex()].add($B);}var $6=[];var $7=[];var $8=[];var $9={};var $enum1=ss.IEnumerator.getEnumerator($5);while($enum1.moveNext()){var $D=$enum1.current;var $E=sceneInfo.getPaneDrawInfoFromKey($D.get_paneKey());var $enum2=ss.IEnumerator.getEnumerator($4[$D.get_paneIndex()]);while($enum2.moveNext()){var $F=$enum2.current;var $10=$E.getMarkState($F.get_objectId());var $11=$E.getWorldOffset($F.get_worldOffset());var $12=$E.getMarkProperty('tuple_id',$F.get_objectId());var $13=false;if(ss.isValue($F.get_labelBox())){$13=tab.RectXYUtil.intersectsWithMoreThanSharedEdge($F.get_labelBox(),selectionRect);}if($13){$7.push($12);$9[$12]=$10;}else if(!$7.length){var $14=tab.HitTester.$3($E,selectionRect,$F.get_objectId(),$11,$E.get_markType());if($14){$6.push($12);$9[$12]=$10;}else if(!$6.length){var $15=tab.HitTester.$4($E,selectionRect,$F.get_objectId(),$11,$E.get_markType());if($15){var $16;switch($E.get_markType()){case 'line':$16=tab.MarksRenderer.$30($E,$0,$1,$F.get_objectId());break;case 'bar':case 'square':$16=tab.MarksRenderer.$2B($E,$0,$1,$F.get_objectId());break;case 'shape':$16=tab.MarksRenderer.$35($E,$0,$1,$F.get_objectId());break;case 'text':$16=tab.MarksRenderer.$26($E,$0,$1,$F.get_objectId());break;case 'area':$16=tab.MarksRenderer.$18($E,$0,$1,$F.get_objectId());break;default:$16=tab.GeometryUtil.getSquaredDistanceToCenter($F.get_boundingBox(),tab.$create_PointF($0,$1));break;}$8.push(new ss.Tuple($12,$16));$9[$12]=$10;}else{}}}}}if($7.length>0){$2=this.$5($7,$9);$3=3;}else if($6.length>0){$2=this.$5($6,$9);$3=3;}if($2==null&&$8.length>0){$2=this.$6($8,$9);$3=2;}return (ss.isValue($2))?[new tab.HitTestResult($2,1,$3)]:new Array(0);},$2:function($p0,$p1,$p2){var $0=[];for(var $1=$p2.length-1;$1>=0;$1--){var $2=$p2[$1];var $3=$2.get_objectId();if($3<0){continue;}var $4=tab.HitTargetNode.findPaneNode($2);if(ss.isNullOrUndefined($4)){continue;}var $5=$p1.getPaneDrawInfoFromKey($4.get_paneKey());var $6=tab.HitTester.getTransformInfo($5,$2);var $7=tab.HitTester.rectangleAreaHit($5,$2.get_boundingBox(),$p0,$3,$6,$5.get_markType());if($7){$0.push(new tab.HitTestResult($5.getMarkProperty('tuple_id',$3),1,1));}}return $0;},hitTestBoundingBoxes:function(selectionRect,isSingleSelect,sceneInfo){if(tab.RectXYUtil.isEmpty(selectionRect)){return [];}var $0=[];var $1=[];var $2={};$1.push(this.$0);while($1.length>0){var $3=$1.pop();var $4=selectionRect;if(isSingleSelect&&ss.isValue(sceneInfo)&&$3.get_nodeType()===3){var $6=tab.HitTargetNode.findPaneNode($3);if(ss.isValue($6)){var $7=$6.get_paneKey();if(Object.keyExists($2,$7)){$4=$2[$7];}else{var $8=sceneInfo.getPaneDrawInfoFromKey($6.get_paneKey());if(ss.isValue($8)){var $9;switch($8.get_markType()){case 'bar':case 'square':$9=tab.MarksRenderer.$2A($8,$3.get_objectId());break;case 'shape':$9=tab.MarksRenderer.$34($8,$3.get_objectId());break;case 'text':$9=tab.MarksRenderer.$25($8,$3.get_objectId());break;case 'area':$9=tab.MarksRenderer.$17($8,$3.get_objectId());break;default:$9=tab.$create_SizeF(0,0);break;}if(!tab.SizeUtil.isEmpty($9)){$4=tab.RectXYUtil.outsetRectSizeF($4,$9);}}$2[$7]=$4;}}}var $5=tab.RectXYUtil.intersectsWithMoreThanSharedEdge($3.get_boundingBox(),$4);if(!$5&&isSingleSelect&&ss.isValue($3.get_labelBox())){$5=tab.RectXYUtil.intersectsWithMoreThanSharedEdge($3.get_labelBox(),selectionRect);}if($5){if($3.get_nodeType()===3){$0.add($3);}else{var $A=$3.get_children();$A.forEach(function($p1_0){
$1.push($p1_0);});}}}return $0;},$5:function($p0,$p1){var $0=null;$p0.sort(function($p1_0,$p1_1){
return ($p1_0>$p1_1)?-1:1;});var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.current;if(!Object.keyExists($p1,$1)){continue;}if($p1[$1]==='markStateInvisible'){continue;}if(!ss.isValue($0)){$0=$1;}else if(this.$7($p1[$1])>this.$7($p1[$0])){$0=$1;}}return $0;},$6:function($p0,$p1){var $0=null;var $1=null;$p0.sort(function($p1_0,$p1_1){
return ($p1_0.first>$p1_1.first)?-1:1;});var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $2=$enum1.current;var $3=$2.first;var $4=$2.second;if(!Object.keyExists($p1,$3)){continue;}if($p1[$3]==='markStateInvisible'){continue;}if(ss.isNull($0)){$0=$3;$1=$4;}else if($4<$1){$0=$3;$1=$4;}else if(($4===$1)&&(this.$7($p1[$3])>this.$7($p1[$0]))){$0=$3;$1=$4;}}return $0;},$7:function($p0){switch($p0){case 'markStateInvisible':return 0;case 'markStateNormal':return 1;case 'markStateHighlighted':return 2;case 'markStateSelected':return 3;default:return -1;}}}
tab.HitTestStructureBuilder=function(){}
tab.HitTestStructureBuilder.buildBinnedHitTestStructure=function(sceneInfo,binCount){var $0=tab.HitTargetNode.createRootNode();var $1=sceneInfo.get_scene().auq;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;var $3=tab.HitTestStructureBuilder.$0($2);var $enum2=ss.IEnumerator.getEnumerator($3);while($enum2.moveNext()){var $4=$enum2.current;var $5=sceneInfo.$24($4);var $6=$5.get_mapExtentOrPaneRect();var $7=new tab.HitTargetNode($6,1);var $8=tab.SceneInfo.getPaneMarksKey($4);$7.set_paneKey($8);$7.set_paneIndex($4.z6);$0.addNode($7);var $9=Math.ceil($6.w/binCount);for(var $B=0;$B<binCount;++$B){var $C=($B*$9)+$6.x;var $D=$6.y;var $E=$9;var $F=$6.h;var $10=new tab.HitTargetNode(tab.$create_RectXY($C,$D,$E,$F),2);$7.addNode($10);}var $A=tab.HitTestStructureBuilder.buildMarkBounds($5);var $enum3=ss.IEnumerator.getEnumerator($A);while($enum3.moveNext()){var $11=$enum3.current;var $enum4=ss.IEnumerator.getEnumerator($7.get_children());while($enum4.moveNext()){var $12=$enum4.current;if(tab.RectXYUtil.intersectsWith($11.get_boundingBox(),$12.get_boundingBox())){$12.addNode($11);}}}}}return $0;}
tab.HitTestStructureBuilder.buildLinearHitTestStructure=function(sceneInfo){var $0=tab.HitTargetNode.createRootNode();var $1=sceneInfo.get_scene().auq;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;var $3=tab.HitTestStructureBuilder.$0($2);var $enum2=ss.IEnumerator.getEnumerator($3);while($enum2.moveNext()){var $4=$enum2.current;var $5=sceneInfo.$24($4);if(!ss.isValue($5)){continue;}var $6=$5.get_mapExtentOrPaneRect();var $7=new tab.HitTargetNode($6,1);var $8=tab.SceneInfo.getPaneMarksKey($4);$7.set_paneKey($8);$7.set_paneIndex($4.z6);$0.addNode($7);var $9=tab.HitTestStructureBuilder.buildMarkBounds($5);$7.addNodes($9);}}return $0;}
tab.HitTestStructureBuilder.buildTrendLineHitTestStructure=function(trendLineDrawPath,lineWidth,objectId){var $0=trendLineDrawPath.ad2;var $1=trendLineDrawPath.ak1;var $2=Math.floor($0.length/2);if($2<2){return new tab.HitTargetNode(tab.$create_RectXY(0,0,0,0),0);}var $3=[];var $4=0;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $6=$enum1.current;switch($6){case 'moveto':$4+=2;break;case 'lineto':if(ss.isValue($0[$4+3])){var $7=[$0[$4],$0[$4+1],$0[$4+2],$0[$4+3]];var $8=Math.min($7[0],$7[2]);var $9=Math.min($7[1],$7[3]);var $A=Math.max($7[0],$7[2])-$8;var $B=Math.max($7[1],$7[3])-$9;var $C=tab.$create_RectXY($8,$9,$A,$B);$C=tab.RectXYUtil.dialate($C,parseInt(lineWidth));var $D=new tab.HitTargetNode($C,5,objectId);$3.add($D);}$4+=2;break;case 'curveto':$4+=6;break;default:break;}}var $5=tab.HitTestStructureBuilder.$1($3,4);return $5;}
tab.HitTestStructureBuilder.buildMarkBounds=function(paneDrawInfo){var $0=[];var $1=paneDrawInfo.get_markCount();for(var $2=0;$2<$1;++$2){var $3=paneDrawInfo.getMarkBounds($2);var $4=(paneDrawInfo.markHasLabel($2))?paneDrawInfo.getMarkLabelBounds($2):null;if(paneDrawInfo.get_isWrappedDomain()){var $5=paneDrawInfo.pixelToDomainX($3.x);var $6=paneDrawInfo.pixelToDomainX($3.x+$3.w);var $7=paneDrawInfo.getMarkInstances($5,$6);for(var $8=$7.first;$8<=$7.second;++$8){var $9=tab.$create_Point(parseInt(paneDrawInfo.getWorldOffset($8)),0);var $A=tab.RectXYUtil.offsetRect($3,$9);var $B=(ss.isValue($4))?tab.RectXYUtil.offsetRect($4,$9):null;$0.add(new tab.HitTargetNode($A,3,$2,$B,$8));}}else{$0.add(new tab.HitTargetNode($3,3,$2,$4,0));}}return $0;}
tab.HitTestStructureBuilder.print=function(node,lv){var $0='';var $1=lv;while($1>0){$0+=' ';--$1;}console.log($0 + node.get_objectId());if(node.get_nodeType()!==3){node.get_children().forEach(function($p1_0){
tab.HitTestStructureBuilder.print($p1_0,lv+1);});}}
tab.HitTestStructureBuilder.$0=function($p0){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p0.auf);while($enum1.moveNext()){var $1=$enum1.current;if($1.aj8==='marks'){$0.add($1.avw);}}return $0;}
tab.HitTestStructureBuilder.$1=function($p0,$p1){var $0=$p0;while($0.length>1){var $2=[];for(var $3=0;$3<$0.length;$3+=$p1){var $4=$p1;var $5=$0.length-$3;if($5<$p1){$4=$5;}var $6=[];var $7=null;for(var $9=0;$9<$4;++$9){var $A=$0[$3+$9];$6.add($A);if(!$9){$7=tab.$create_RectXY($A.get_boundingBox().x,$A.get_boundingBox().y,$A.get_boundingBox().w,$A.get_boundingBox().h);}else{$7=tab.RectXYUtil.union($7,$6[$9].get_boundingBox());}}var $8=new tab.HitTargetNode($7,4);$8.addNodes($6);$2.add($8);}$0=$2;}if($0.length!==1){}var $1=tab.HitTargetNode.createRootNode();$1.addNodes($0);return $1;}
tab.RectangleGeom=function(geom){this.$0=geom;}
tab.RectangleGeom.prototype={$0:null,get_type:function(){return 0;},get_geom:function(){return this.$0;}}
tab.ModifierKeyState=function(){this.$0=true;$(document).bind('keydown.ModifierKeyState keyup.ModifierKeyState mouseover.ModifierKeyState',ss.Delegate.create(this,this.$4));$(window).bind('focus.ModifierKeyState',ss.Delegate.create(this,function(){
this.$1();}));$(window).bind('blur.ModifierKeyState',ss.Delegate.create(this,function(){
this.$2();}));this.$3();}
tab.ModifierKeyState.prototype={$0:false,dispose:function(){$(document).unbind('.ModifierKeyState');$(window).unbind('.ModifierKeyState');},$1:function(){this.$5(true);},$2:function(){this.$5(false);},$3:function(){if(('focus' in window.self)){window.focus();}},$4:function($p0){if(!this.$0&&!tab.BrowserSupport.get_isIE()){if(tab.BrowserSupport.get_isFF()&&ss.isValue(document.activeElement)){document.activeElement.blur();}this.$3();}dojo.publish(tab.EventMap.modifierKeysChanged,[$p0]);},$5:function($p0){if($p0===this.$0){return;}this.$0=$p0;}}
tab.PaneDrawInfo=function(pdMarksKey,scene,pane,paneMarks,pdMarks,colorDict){this.$20={};this.$1F={};this.$2E={};this.$1E=scene;this.$27=paneMarks;this.$37=false;this.$2D=pdMarksKey;this.$22=tab.RecordCast.rectPresModelAsRectXY(pane.aqb);this.$21=tab.PaneDrawInfo.$49(pane);this.$24=pdMarks.aku;this.$26=tab.PaneDrawInfo.$48(this.$27);this.$25=pdMarks.zw['pane_flags'];var $0=tab.PaneDrawInfo.$4A(pdMarks);var $enum1=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum1.moveNext()){var $3=$enum1.current;this.$1F[$3]=$0[$3];this.$20[$3]='';}this.$1D=Object.keyExists($0,'wrap_domain')&&$0['wrap_domain'][0];var $enum2=ss.IEnumerator.getEnumerator(Object.keys(pdMarks.ant));while($enum2.moveNext()){var $4=$enum2.current;this.$1F[$4]=tab.PaneDrawInfo.$4E(pdMarks.ant[$4],this.$27.z1,this.get_markCount());}this.hasPixelGeometry=this.get_scaleMarksInX()&&this.get_scaleMarksInY();var $1=tab.ColorModel.fromArgbInt(pdMarks.zw['background_color']);this.$29=tab.PaneDrawInfo.getFogBlendFactor($1);this.$2A=tab.PaneDrawInfo.applyFogToBackgroundColor($1,this.$29);this.$56(this.$1F);this.$2B=tab.PaneDrawInfo.buildColorTable(colorDict,this.$1F,this.$2A,this.$29);this.$38={};if(this.$55()){this.$2C=tab.PaneDrawInfo.buildOpaqueColorTable(this.$2B);this.$51(this.$1F);}var $2=new Array(this.get_markCount());for(var $5=0;$5<$2.length;$5++){$2[$5]=-1;}this.$1F['label_index']=$2;if(this.get_markType()==='line'||this.get_markType()==='area'){this.$58();}if(this.get_markType()==='line'){this.$5E();}this.$5C(pdMarks,false);if(ss.isValue(this.$22)&&ss.isValue(this.$22.w)&&ss.isValue(this.$21)&&ss.isValue(this.$21.w)&&!!this.$21.w){this.$1C=this.$22.w/this.$21.w;}this.$28=this.$5B();this.$23=tab.PaneDrawInfo.$47(paneMarks,this.$21,this.$22);this.$59();this.$5A();}
tab.PaneDrawInfo.getFogBlendFactor=function(backgroundColor){var $0=0.185;var $1=0.275;var $2=75;var $3=backgroundColor.get_r()<=$2&&backgroundColor.get_g()<=$2&&backgroundColor.get_b()<=$2;return ($3)?$1:$0;}
tab.PaneDrawInfo.fogColorTransform=function(color,foggedBackgroundColor,fogBlendFactor){var $0=parseInt(foggedBackgroundColor.get_r()+(color.get_r()*fogBlendFactor));var $1=parseInt(foggedBackgroundColor.get_g()+(color.get_g()*fogBlendFactor));var $2=parseInt(foggedBackgroundColor.get_b()+(color.get_b()*fogBlendFactor));return new tab.ColorModel($0,$1,$2,color.get_a());}
tab.PaneDrawInfo.parseDataTable=function(encodingColumns){var $0={};var $enum1=ss.IEnumerator.getEnumerator(Object.keys(encodingColumns));while($enum1.moveNext()){var $1=$enum1.current;$0[$1]=encodingColumns[$1].vs;}return $0;}
tab.PaneDrawInfo.applyFogToBackgroundColor=function(backgroundColor,fogBlendFactor){var $0=245;if(backgroundColor.get_r()>=$0&&backgroundColor.get_g()>=$0&&backgroundColor.get_b()>=$0){backgroundColor=new tab.ColorModel($0,$0,$0,backgroundColor.get_a());}var $1=parseInt((1-fogBlendFactor)*backgroundColor.get_r());var $2=parseInt((1-fogBlendFactor)*backgroundColor.get_g());var $3=parseInt((1-fogBlendFactor)*backgroundColor.get_b());return new tab.ColorModel($1,$2,$3,backgroundColor.get_a());}
tab.PaneDrawInfo.buildColorTable=function(colorDict,markData,foggedBGColor,fogBlendFactor){if(ss.isNullOrUndefined(colorDict)||ss.isNullOrUndefined(markData)||!Object.keyExists(markData,tab.PaneDrawInfo.$B)){return null;}var $0=1;if(Object.keyExists(markData,'alpha')&&markData['alpha'].length===1){$0=markData['alpha'][0];}var $1=[];var $2={};var $3=markData[tab.PaneDrawInfo.$B];var $4=$3.length;for(var $5=0;$5<$4;$5++){var $6=$3[$5];if(Object.keyExists($2,$6)){$3[$5]=$2[$6];}else{var $7=tab.ColorModel.fromArgbInt(colorDict.aco[$6]);$7=new tab.ColorModel($7.get_r(),$7.get_g(),$7.get_b(),$0);$1.add(tab.PaneDrawInfo.$4F($7,foggedBGColor,fogBlendFactor));$3[$5]=$1.length-1;$2[$6]=$3[$5];}}return $1;}
tab.PaneDrawInfo.buildOpaqueColorTable=function(colorTable){if(ss.isNullOrUndefined(colorTable)){return null;}var $0=new Array(colorTable.length);for(var $1=0,$2=colorTable.length;$1<$2;$1++){$0[$1]=tab.PaneDrawInfo.$50(colorTable[$1]);}return $0;}
tab.PaneDrawInfo.$3E=function($p0,$p1,$p2,$p3){return (($p0-$p1)*$p3)+$p2;}
tab.PaneDrawInfo.$3F=function($p0,$p1,$p2){return tab.PaneDrawInfo.$3E($p0,$p1.x,$p2.x,$p2.w/$p1.w);}
tab.PaneDrawInfo.$40=function($p0,$p1,$p2){return tab.PaneDrawInfo.$3E($p0,$p1.y,$p2.y,$p2.h/$p1.h);}
tab.PaneDrawInfo.$41=function($p0,$p1,$p2){return (($p0/$p1.w)*$p2.w);}
tab.PaneDrawInfo.$42=function($p0,$p1,$p2){return (($p0/$p1.h)*$p2.h);}
tab.PaneDrawInfo.$43=function($p0,$p1,$p2){var $0=3;var $1=$p2.w/$p1.w;var $2=$p2.h/$p1.h;var $3=$p0.a0j;var $4=$3.length;for(var $5=0;$5<$4;$5++){var $6=$3[$5].a0l;var $7=$6.length;for(var $8=0;$8<$7;$8++){var $9=$6[$8].ad2;var $A=$9.length;if($A<2){continue;}var $B=null;var $C=null;var $D=0;for(var $E=0;$E<$A;$E=$E+2){var $F=tab.PaneDrawInfo.$3E($9[$E],$p1.x,$p2.x,$1);var $10=tab.PaneDrawInfo.$3E($9[$E+1],$p1.y,$p2.y,$2);var $11=parseInt(($F*$0))<<0;var $12=parseInt(($10*$0))<<0;if($11===$B&&$12===$C){continue;}$B=$11;$C=$12;$9[$D]=$F;$9[$D+1]=$10;$D+=2;}if(($D+$D)<$A){$9.splice($D,$A-$D);}else{$9.length=$D;}}}}
tab.PaneDrawInfo.$44=function($p0){var $0=$p0.a0j;var $1=$0.length;for(var $2=0;$2<$1;$2++){var $3=$0[$2].a0l;var $4=$3.length;var $5=false;for(var $6=0;$6<$4;$6++){var $7=$3[$6].ad2;var $8=$7.length;var $9=0;for(var $A=0;$A<$8;$A=$A+2){var $B=tab.PaneDrawInfo.$45($7[$A]);if($B&&$5){$9=$A;break;}$5=$B;}if(!!$9){$3[$6].ad2=tab.PaneDrawInfo.$46($7,$9);}}}}
tab.PaneDrawInfo.$45=function($p0){var $0=$p0-1;return $0<1E-05&&$0>-1E-05;}
tab.PaneDrawInfo.$46=function($p0,$p1){var $0=$p0.length;var $1=tab.FloatUtil.isEqual($p0[0],$p0[$0-2])&&tab.FloatUtil.isEqual($p0[1],$p0[$0-1]);if($1){$p0.pop();$p0.pop();}var $2=$p0.slice($p1).concat($p0.slice(0,$p1));return $2;}
tab.PaneDrawInfo.$47=function($p0,$p1,$p2){var $0=$p0.aqr;if(ss.isNullOrUndefined($0)||!$0.aeh||!$0.aei){return null;}return tab.$create_RectXY(parseInt(tab.PaneDrawInfo.$3F($0.aeg,$p1,$p2)),parseInt(tab.PaneDrawInfo.$40($0.aef,$p1,$p2)),parseInt(tab.PaneDrawInfo.$41($0.aeh,$p1,$p2)),parseInt(tab.PaneDrawInfo.$42($0.aei,$p1,$p2)));}
tab.PaneDrawInfo.$48=function($p0){return ($p0.z2-$p0.z1);}
tab.PaneDrawInfo.$49=function($p0){if(ss.isValue($p0.auf)){var $enum1=ss.IEnumerator.getEnumerator($p0.auf);while($enum1.moveNext()){var $0=$enum1.current;var $1=$0.avw;if(ss.isValue($1)&&ss.isValue($1.aqq)){return tab.RecordCast.doubleRectPresModelAsDoubleRectXY($1.aqq);}}}return null;}
tab.PaneDrawInfo.$4A=function($p0){var $0={};var $1=[$p0.zw,$p0.ad7,$p0.li];var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;var $3=$2;if(ss.isValue($3)){var $enum2=ss.IEnumerator.getEnumerator(Object.keys($3));while($enum2.moveNext()){var $4=$enum2.current;$0[$4]=[$3[$4]];}}}return $0;}
tab.PaneDrawInfo.$4B=function($p0,$p1){var $0=new ss.StringBuilder();if(Object.keyExists($p0,'font_style')&&parseInt($p0['font_style'].vs[$p1])===1){$0.append('italic ');}if(Object.keyExists($p0,'font_weight')&&parseInt($p0['font_weight'].vs[$p1])===1){$0.append('bold ');}var $1=parseInt($p0['font_size'].vs[$p1]);var $2=$p0['font'].vs[$p1];$0.append($1+'pt '+$2);return $0.toString();}
tab.PaneDrawInfo.$4C=function($p0){var $0=0;if($p0===1){}else if($p0===2){$0=-Math.PI*0.5;}else if($p0===3){$0=Math.PI*0.5;}else{}return $0;}
tab.PaneDrawInfo.$4D=function($p0,$p1,$p2){if(Object.keyExists($p1,$p0)){var $0=$p1[$p0];for(var $1=0;$1<$0.length;++$1){$0[$1]=$p2($0[$1]);}$p1[$p0]=$0;}}
tab.PaneDrawInfo.$4E=function($p0,$p1,$p2){var $0=new Array($p2);for(var $1=0;$1<$p2;$1++){$0[$1]=$p0.vs[$p1+$1];}return $0;}
tab.PaneDrawInfo.$4F=function($p0,$p1,$p2){var $0={};$0['colorOverrideOpaque']=$p0.toRgb();$0['colorOverrideNone']=$p0.toRgba();$0['colorOverrideFog']=tab.PaneDrawInfo.fogColorTransform($p0,$p1,$p2).toRgba();return $0;}
tab.PaneDrawInfo.$50=function($p0){var $0={};var $1;$1=tab.ColorModel.fromColorCode($p0['colorOverrideNone']);$0['colorOverrideNone']=$1.toRgb();$1=tab.ColorModel.fromColorCode($p0['colorOverrideFog']);$0['colorOverrideFog']=$1.toRgb();$1=tab.ColorModel.fromColorCode($p0['colorOverrideOpaque']);$0['colorOverrideOpaque']=$1.toRgb();return $0;}
tab.PaneDrawInfo.prototype={hasPixelGeometry:false,$1C:0,$1D:false,$1E:null,$1F:null,$21:null,$22:null,$23:null,$24:null,$25:0,$26:0,$27:null,$28:0,$29:0,$2A:null,$2B:null,$2C:null,$2D:null,$2E:null,$2F:null,$30:null,$31:null,$32:null,$33:null,$34:null,$35:null,$36:null,$37:false,$38:null,$39:null,get_hasLabels:function(){return ss.isValue(this.$2F);},get_hasSelection:function(){return this.$1E.get_$F();},get_hasBrushing:function(){return this.$1E.get_$10();},get_markCount:function(){return this.$26;},get_markType:function(){return this.$24;},get_lineDrawState:function(){if(ss.isNull(this.$39)){this.$39=new tab.LineMarkDrawState(this);}return this.$39;},get_hasBackground:function(){return Object.keyExists(this.$1F,'pane_has_background')&&this.$1F['pane_has_background'][0];},get_hasHalos:function(){return Object.keyExists(this.$1F,'has_halos')&&this.$1F['has_halos'][0];},get_fogBlendFactor:function(){return this.$29;},get_foggedBackgroundColor:function(){return this.$2A;},get_forceOpaqueColors:function(){return this.$37;},set_forceOpaqueColors:function(value){this.$37=value;return value;},get_hasHaloHighlightColor:function(){return Object.keyExists(this.$1F,'highlighted_halo_color')&&ss.isValue(this.$1F['highlighted_halo_color']);},get_hasFoldedAxis:function(){return Object.keyExists(this.$1F,'has_folded_axis')&&this.$1F['has_folded_axis'][0];},get_drawBorder:function(){return Object.keyExists(this.$1F,'draw_border')&&this.$1F['draw_border'][0];},get_borderColor:function(){return (Object.keyExists(this.$1F,'border_color'))?this.$1F['border_color'][0]:null;},get_minBarWidth:function(){return (Object.keyExists(this.$1F,'min_bar_width'))?this.$1F['min_bar_width'][0]:0;},get_minBarHeight:function(){return (Object.keyExists(this.$1F,'min_bar_height'))?this.$1F['min_bar_height'][0]:0;},get_textStyleColumns:function(){return this.$31;},get_isWrappedDomain:function(){return this.$1D;},get_paneRect:function(){return this.$22;},get_mapExtents:function(){return this.$23;},get_mapExtentOrPaneRect:function(){return (this.get_mapExtents()||this.get_paneRect());},get_clipCase:function(){return this.$28;},get_paneDescriptorKey:function(){return this.$27.m1;},get_hasGlobalTransparency:function(){return this.get_globalAlpha()<1;},get_globalAlpha:function(){if(Object.keyExists(this.$1F,'alpha')&&this.$1F['alpha'].length===1){return this.$1F['alpha'][0];}else{return 1;}},get_allowHighQualityCustomImageScaling:function(){if(ss.isValue(this.$1E.get_$11())){return this.$1E.get_$11().get_allowHighQualityImageScaling();}return false;},get_scaleMarksInX:function(){return (!!(this.$25&tab.PaneDrawInfo.$19['enable-scale-x']));},get_scaleMarksInY:function(){return (!!(this.$25&tab.PaneDrawInfo.$19['enable-scale-y']));},get_useCellClipForSelection:function(){return (!!(this.$25&tab.PaneDrawInfo.$19['clip-to-cell-for-selection']));},get_paneHasCellsX:function(){return (!!(this.$25&tab.PaneDrawInfo.$19['has-cells-x']));},get_paneHasCellsY:function(){return (!!(this.$25&tab.PaneDrawInfo.$19['has-cells-y']));},doesCustomImageExist:function(markIndex){var $0=this.getMarkProperty('shape_id',markIndex);if(ss.isValue($0)){return ss.isValue(this.getImageForMark($0));}return false;},getImageForMark:function(shapeId){var $0=null;if(ss.isValue(this.$1E.get_$11())){$0=this.$1E.get_$11().getImageElement(shapeId);}return $0;},getCachedShapeForMark:function(shapeId,layer,colorOverrideMode,color,width,height,cacheableCanvasGenerator){var $0=null;if(ss.isValue(this.$1E.get_$11())){$0=this.$1E.get_$11().getCachedCanvas(shapeId,layer,colorOverrideMode,color,width,height,cacheableCanvasGenerator);}return $0;},addLabelInfo:function(pdMarksPM,paneMarksPM){this.$2F={};var $0=tab.PaneDrawInfo.$4A(pdMarksPM);var $enum1=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum1.moveNext()){var $4=$enum1.current;this.$2F[$4]=$0[$4];}var $1=tab.PaneDrawInfo.$48(paneMarksPM);var $enum2=ss.IEnumerator.getEnumerator(Object.keys(pdMarksPM.ant));while($enum2.moveNext()){var $5=$enum2.current;this.$2F[$5]=tab.PaneDrawInfo.$4E(pdMarksPM.ant[$5],paneMarksPM.z1,$1);}this.$56(this.$2F);var $2=[];if(ss.isValue(this.$2F['tuple_id'])){var $6=this.$2F['tuple_id'];for(var $7=0;$7<$6.length;$7++){var $8=this.$1F['tuple_id'].indexOf($6[$7]);if($8!==-1){this.$1F['label_index'][$8]=$7;}$2.add($8);}}var $3={};for(var $9=0;$9<$2.length;++$9){$3[this.$54($2[$9])]=tab.MarksRenderer.$1C(this,$2[$9]);}this.$1E.$28($3);this.$5C(pdMarksPM,true);},getTextRunProperty:function(columnName,index){if(!ss.isValue(this.$30)||!ss.isValue(this.$30[columnName])){return null;}return this.$30[columnName][index];},markHasLabel:function(index){return this.$5D(index)!==-1;},getOneColor:function(color,mode){return this.getOneColorAlpha(color,mode,255);},getOneColorAlpha:function(color,mode,alpha){if(!Object.keyExists(this.$38,color)){var $1=tab.ColorModel.fromArgbInt(color);this.$38[color]=tab.PaneDrawInfo.$4F($1,this.$2A,this.$29);}var $0=this.$38[color];if(mode==='colorOverrideReplaceAlpha'){var $2=tab.ColorModel.fromArgbInt(color);return tab.ColorModel.fromColorModelPlusAlpha($2,alpha/255).toRgba();}return $0[mode];},getMarkColors:function(index){var $0;if(Object.keyExists(this.$1F,tab.PaneDrawInfo.$B)){var $1=this.$52(tab.PaneDrawInfo.$B,index);var $2;$2=(this.$37&&ss.isValue(this.$2C))?this.$2C:this.$2B;$0=$2[$1];}else{var $3=(this.$37&&Object.keyExists(this.$1F,'opaque_color'))?'opaque_color':'color';$0=this.$52($3,index);}if(this.isMarkFiltered(index)){var $4={};$4['colorOverrideFog']=$0['colorOverrideFog'];$4['colorOverrideNone']=$0['colorOverrideFog'];$4['colorOverrideOpaque']=$0['colorOverrideFog'];$0=$4;}return $0;},getMarkProperty:function(columnName,index){if(columnName==='color'){return this.getMarkColors(index);}return this.$52(columnName,index);},getMarkGeometry:function(geometryIndex){if(ss.isNullOrUndefined(this.$2E)||ss.isNullOrUndefined(this.$2E[geometryIndex])){return null;}return this.$2E[geometryIndex];},doesMarkHaveProperty:function(columnName){return ss.isValue(this.$1F)&&ss.isValue(this.$1F[columnName]);},isMarkPropertyConstant:function(columnName){if(columnName==='color'&&Object.keyExists(this.$1F,tab.PaneDrawInfo.$B)){columnName=tab.PaneDrawInfo.$B;}return Object.keyExists(this.$20,columnName);},computeDirtyMarks:function(dirtyRect){this.$32={};var $0=tab.RectXYUtil.completelyContains(dirtyRect,this.$22);for(var $1=0;$1<this.$26;$1++){if(!this.isMarkVisible($1)){continue;}if($0){this.$32[$1]=true;continue;}if(this.get_markType()==='line'||this.get_markType()==='area'){this.$32[$1]=true;}else{var $2=this.getMarkBounds($1);var $3=this.getWorldOffsetMarkBounds($2);if(tab.RectXYUtil.intersectsWithAny(dirtyRect,$3)){this.$32[$1]=true;}}}},clearDirtyMarks:function(){this.$32=null;},markNeedsDraw:function(index){return ss.isValue(this.$32)&&Object.keyExists(this.$32,index);},markLabelNeedsDraw:function(index,dirtyRect){if(!this.isMarkVisible(index)){return false;}var $0=this.getSloppyMarkLabelBounds(index);var $1=this.getWorldOffsetMarkBounds($0);var $2=tab.RectXYUtil.intersectsWithAny(dirtyRect,$1);return $2;},refreshMarkState:function(){this.$33=new Array(this.$26);this.$34={};for(var $0=0;$0<this.$26;$0++){this.$33[$0]=this.$5F($0);if(this.$3D($0)){this.$34[$0]=true;}}if(this.$3B()){this.$39=new tab.LineMarkDrawState(this);}},clearMarkState:function(){this.$33=null;this.$39=null;this.$34=null;},getMarkState:function(index){if(ss.isValue(this.$33)&&this.$33.length>index){return this.$33[index];}return this.$5F(index);},getMarkLabelState:function(index){if(this.$3B()){var $0=this.get_lineDrawState().get_lineAttributes();var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;if($1.startIndex<=index&&index<=$1.endIndex){switch($1.get_lineState()){case 'lineStateHighlighted':return (this.$3C(index))?'markStateHighlighted':this.getMarkState(index);case 'lineStateSelected':if(this.get_markType()==='pie'&&!this.$3C(index)){return this.getMarkState(index);}return 'markStateSelected';case 'lineStateNormal':return 'markStateNormal';}return 'markStateNormal';}}}return this.getMarkState(index);},getMarkLabelProperty:function(columnName,markIndex){if(this.$24==='text'){return this.getMarkProperty(columnName,markIndex);}var $0=this.$5D(markIndex);if($0===-1){return null;}if(!ss.isValue(this.$2F)||!ss.isValue(this.$2F[columnName])){return null;}var $1=this.$2F[columnName];if($1.length===1){return $1[0];}if($0<$1.length){return $1[$0];}return null;},getLeft:function(markIndex){return this.$35[markIndex];},getRight:function(markIndex){return this.$36[markIndex];},getMarkBounds:function(markIndex){return this.$1E.getMarkBoundingBox(this.$54(markIndex));},getMarkIndexFromTupleID:function(tupleId){return this.$1F['tuple_id'].indexOf(tupleId);},getMarkLabelBounds:function(markIndex){return this.$1E.$19(this.$54(markIndex));},getSloppyMarkLabelBounds:function(markIndex){return this.$1E.$1A(this.$54(markIndex));},getInsetPaneClipRect:function(inset){return tab.RectXYUtil.dialate(this.$22,parseInt(-inset));},clippedByPane:function(x,y,width,height){var $0=tab.$create_RectXY(parseInt(x),parseInt(y),parseInt(width),parseInt(height));$0=tab.RectXYUtil.dialate($0,1);return !tab.RectXYUtil.completelyContains(this.$22,$0);},pixelToDomainX:function(pixelX){return ((((pixelX-this.$22.x)/this.$22.w)*this.$21.w)+this.$21.x);},getWorldOffset:function(instance){return this.$1C*instance;},getMarkInstances:function(minXDomain,maxXDomain){var $0=0;var $1=0;if(this.get_isWrappedDomain()){var $2=this.$27.aqq.aeg;var $3=$2+this.$27.aqq.aeh;$0=$2-maxXDomain;$1=$3-minXDomain;}return new ss.Tuple(parseInt($0),parseInt($1));},getWorldOffsetMarkBounds:function(bounds){var $0=[];if(!this.get_isWrappedDomain()){$0.push(bounds);}else{var $1=this.pixelToDomainX(bounds.x);var $2=this.pixelToDomainX(bounds.x+bounds.w);var $3=this.getMarkInstances($1,$2);for(var $4=$3.first;$4<=$3.second;++$4){var $5=tab.$create_Point(parseInt(this.getWorldOffset($4)),0);var $6=tab.RectXYUtil.offsetRect(bounds,$5);$0.push($6);}}return $0;},isTupleSelected:function(tupleID){return !!tupleID&&this.$1E.$1E(tupleID);},isMarkSelected:function(index){var $0=this.$54(index);return this.isTupleSelected($0);},isMarkImpliedSelected:function(index){var $0=this.$54(index);return !!$0&&this.$1E.$20($0);},isTupleHighlighted:function(tupleID){return !!tupleID&&this.$1E.$1F(tupleID);},isMarkHighlighted:function(index){var $0=this.$54(index);return this.isTupleHighlighted($0);},isMarkVisible:function(index){var $0=this.$54(index);return this.isTupleVisible($0);},isTupleVisible:function(tupleID){return !!tupleID&&this.$1E.$21(tupleID);},isMarkFiltered:function(index){var $0=this.$54(index);return !!$0&&this.$1E.$22($0);},isLineSegmentVisible:function(index0,index1){return this.getMarkState(index0)!=='markStateInvisible'&&this.getMarkState(index1)!=='markStateInvisible';},isLineSegmentFiltered:function(index0,index1){return this.isMarkFiltered(index0)||this.isMarkFiltered(index1);},isMarkEndPrimitive:function(index){var $0=this.$53(index);return (!!($0&tab.PaneDrawInfo.$1A['endprimitive']));},isMarkEnd:function(index){var $0=this.$53(index);return (!!($0&tab.PaneDrawInfo.$1A['end']));},isMarkClosedPrimitive:function(index){var $0=this.$53(index);return (!!($0&tab.PaneDrawInfo.$1A['closedprimitive']));},isMarkDebug:function(index){var $0=this.$53(index);return (!!($0&tab.PaneDrawInfo.$1A['debug']));},shouldShowMarker:function(index){if(this.$34==null){return this.$3D(index);}return Object.keyExists(this.$34,index);},$3A:function($p0,$p1,$p2){var $0;if($p1>=0&&!this.isMarkPropertyConstant('color')&&this.get_markType()==='text'){$0=this.getMarkProperty('color',$p1);}else{$0=this.get_textStyleColumns()['text_style_color'][$p0];}if(this.isMarkFiltered($p1)){$p2='colorOverrideFog';}return $0[$p2];},thisDomainToPixelX:function(x){return tab.PaneDrawInfo.$3F(x,this.$21,this.$22);},thisDomainToPixelY:function(y){return tab.PaneDrawInfo.$40(y,this.$21,this.$22);},$3B:function(){return (this.$24==='line'||this.$24==='area'||this.$24==='pie');},$3C:function($p0){return this.getMarkLabelProperty('label_one_per_group',$p0);},$3D:function($p0){var $0=this.$53($p0);return (!!($0&tab.PaneDrawInfo.$1A['marked']))||((!!($0&tab.PaneDrawInfo.$1A['markediflabel']))&&this.markHasLabel($p0)&&!this.$3C($p0));},$51:function($p0){if(Object.keyExists($p0,'color')){var $0=$p0['color'];var $1=new Array($0.length);for(var $2=0;$2<$0.length;++$2){$1[$2]=tab.PaneDrawInfo.$50($0[$2]);}$p0['opaque_color']=$1;}},$52:function($p0,$p1){var $0=this.$1F[$p0];if(ss.isNullOrUndefined($0)){return null;}if($0.length===1){$p1=0;}if($p1<$0.length){return $0[$p1];}return null;},$53:function($p0){return this.getMarkProperty('mark_flags',$p0);},$54:function($p0){var $0=this.$52('tuple_id',$p0);if(ss.isNullOrUndefined($0)){$0=0;}return $0;},$55:function(){return (this.$24==='line')&&this.get_hasGlobalTransparency();},$56:function($p0){var $0=Object.keyExists($p0,'alpha')&&$p0['alpha'].length===1;var $1=1;if($0){$1=$p0['alpha'][0]/255;}_.each(tab.PaneDrawInfo.$14,ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=$0&&(String.equals($p1_0,'color',true)||String.equals($p1_0,'text_style_color',true));tab.PaneDrawInfo.$4D($p1_0,$p0,ss.Delegate.create(this,function($p2_0){
var $2_0=tab.ColorModel.fromArgbInt($p2_0);if($1_0){$2_0=new tab.ColorModel($2_0.get_r(),$2_0.get_g(),$2_0.get_b(),$1);}return tab.PaneDrawInfo.$4F($2_0,this.$2A,this.$29);}));}));tab.PaneDrawInfo.$4D('shape_id',$p0,function($p1_0){
return tab.PaneDrawInfo.shapeMapping[$p1_0.toString()]||$p1_0.toString();});tab.PaneDrawInfo.$4D('alpha',$p0,function($p1_0){
return $p1_0/255;});if(ss.isValue(this.$22)&&ss.isValue(this.$21)&&!!this.$21.w&&!!this.$21.h){tab.PaneDrawInfo.$4D('geometry',$p0,ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;if(!Object.keyExists(this.$2E,$1_0)){var $1_1=this.$1E.$18(this.$2D,$1_0);if(ss.isValue($1_1)&&this.hasPixelGeometry){if(this.$1E.hasSharedData(this.$2D)){$1_1=tab.MiscUtil.cloneObject($1_1);}tab.PaneDrawInfo.$44($1_1);tab.PaneDrawInfo.$43($1_1,this.$21,this.$22);}this.$2E[$1_0]=$1_1;}return $p1_0;}));var $enum1=ss.IEnumerator.getEnumerator(Object.keys(tab.PaneDrawInfo.$1B));while($enum1.moveNext()){var $2=$enum1.current;var $3=1;var $4=0;var $5=$2+'_int';if(tab.PaneDrawInfo.$15.contains($2)){var $6=100*Math.max(1,this.$22.w);$3=this.$21.w/$6;$4=this.$21.x;}else if(tab.PaneDrawInfo.$17.contains($2)){var $7=100*Math.max(1,this.$22.h);$3=this.$21.h/$7;$4=this.$21.y;}else{$3=(tab.PaneDrawInfo.$1B[$2].y-tab.PaneDrawInfo.$1B[$2].x)/32767;$4=tab.PaneDrawInfo.$1B[$2].x;}tab.PaneDrawInfo.$4D($5,$p0,function($p1_0){
return ($p1_0*$3)+$4;});if(Object.keyExists($p0,$5)){$p0[$2]=$p0[$5];delete $p0[$5];}}var $enum2=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.$15);while($enum2.moveNext()){var $8=$enum2.current;tab.PaneDrawInfo.$4D($8,$p0,ss.Delegate.create(this,function($p1_0){
return tab.PaneDrawInfo.$3F($p1_0,this.$21,this.$22);}));}var $enum3=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.$16);while($enum3.moveNext()){var $9=$enum3.current;tab.PaneDrawInfo.$4D($9,$p0,ss.Delegate.create(this,function($p1_0){
return tab.PaneDrawInfo.$41($p1_0,this.$21,this.$22);}));}var $enum4=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.$17);while($enum4.moveNext()){var $A=$enum4.current;tab.PaneDrawInfo.$4D($A,$p0,ss.Delegate.create(this,function($p1_0){
return tab.PaneDrawInfo.$40($p1_0,this.$21,this.$22);}));}var $enum5=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.$18);while($enum5.moveNext()){var $B=$enum5.current;tab.PaneDrawInfo.$4D($B,$p0,ss.Delegate.create(this,function($p1_0){
return tab.PaneDrawInfo.$42($p1_0,this.$21,this.$22);}));}}},$57:function($p0,$p1){var $0={};if(Object.keyExists($p0,'font')){var $1=$p0['font'];var $2=$1.vs.length;var $3=new Array($2);for(var $4=0;$4<$2;++$4){$3[$4]=tab.PaneDrawInfo.$4B($p0,$4);}$0['font']=$3;var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $5=$enum1.current;if(!tab.PaneDrawInfo.$13.contains($5)){var $6=$p0[$5];var $7=new Array($6.vs.length);for(var $8=0;$8<$7.length;$8++){$7[$8]=$6.vs[$8];}$0[$5]=$7;}}if($p1){var $9=this.getMarkProperty('alpha',0);if(ss.isValue($9)){$0['alpha']=[$9*255];}}this.$56($0);tab.PaneDrawInfo.$4D('text_orientation',$0,function($p1_0){
return tab.PaneDrawInfo.$4C($p1_0);});tab.PaneDrawInfo.$4D('text_alignment',$0,function($p1_0){
var $1_0='start';var $1_1=$p1_0;if($1_1===2){$1_0='end';}return $1_0;});}return $0;},$58:function(){this.$35=new Array(this.get_markCount());for(var $1=0;$1<this.$35.length;++$1){this.$35[$1]=-1;}this.$36=new Array(this.get_markCount());for(var $2=0;$2<this.$36.length;++$2){this.$36[$2]=-1;}var $0=0;for(var $3=0;$3<this.get_markCount();$3++){if(!this.isMarkEnd($3)){this.$36[$3]=$3+1;this.$35[$3+1]=$3;}if(this.isMarkClosedPrimitive($3)){this.$36[$3]=$0;this.$35[$0]=$3;}if(this.isMarkEndPrimitive($3)){$0=$3+1;}}},$59:function(){var $0={};for(var $1=0;$1<this.get_markCount();++$1){$0[this.$54($1)]=tab.PaneTable2DRenderer.getMarkBoundingBox($1,this);}this.$1E.$27($0);if(this.get_markType()==='pie'){var $2={};var $3=new tab.LineMarkDrawState(this);var $enum1=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum1.moveNext()){var $4=$enum1.current;var $5=tab.PaneTable2DRenderer.getMarkBoundingBox($4.startIndex,this);for(var $6=$4.startIndex+1;$6<=$4.endIndex;++$6){$5=tab.RectXYUtil.union($5,tab.PaneTable2DRenderer.getMarkBoundingBox($6,this));}for(var $7=$4.startIndex;$7<=$4.endIndex;++$7){$2[this.$54($7)]=$5;}}this.$1E.$29($2);}},$5A:function(){if(this.$24==='shape'&&ss.isValue(this.$1E.get_$11())&&this.$1E.get_$11().get_imageKeys().length>0){var $0=[];var $1=[];for(var $2=0;$2<this.$26;++$2){if(!Object.keyExists(tab.PaneDrawInfo.shapeMapping,this.getMarkProperty('shape_id',$2))){$0[$2]=Math.round(this.getMarkProperty('x',$2)-(this.getMarkProperty('width',$2)/2)+1);$1[$2]=Math.round(this.getMarkProperty('y',$2)-(this.getMarkProperty('height',$2)/2)+1);}}if($0.length>0){this.$1F['left']=$0;this.$1F['top']=$1;}}},$5B:function(){var $0=0;var $1=!!(this.$25&tab.PaneDrawInfo.$19['clip-to-cell-x']);var $2=!!(this.$25&tab.PaneDrawInfo.$19['clip-to-cell-y']);if($1&&$2){$0=3;}else if($1){$0=1;}else if($2){$0=2;}return $0;},$5C:function($p0,$p1){if(ss.isValue($p0.anu)){this.$30={};var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0.anu));while($enum1.moveNext()){var $0=$enum1.current;var $1=$p0.anu[$0];var $2=new Array($1.vs.length);for(var $3=0;$3<$2.length;$3++){$2[$3]=$1.vs[$3];}this.$30[$0]=$2;}this.$56(this.$30);}if(ss.isValue($p0.anv)){this.$31=this.$57($p0.anv,!$p1);}},$5D:function($p0){return (Object.keyExists(this.$1F,'label_index'))?this.$1F['label_index'][$p0]:-1;},$5E:function(){var $0=this.get_markCount();for(var $1=0;$1<$0;$1++){var $2=this.getRight($1);if($2!==-1){var $3=this.getMarkProperty('width',$1);var $4=this.getMarkProperty('width',$2);if(tab.FloatUtil.isEqual($3,$4)&&Math.round($3)%2===1){var $5=this.getMarkProperty('x',$1);var $6=this.getMarkProperty('y',$1);var $7=tab.$create_PointF($5,$6);var $8=this.getMarkProperty('x',$2);var $9=this.getMarkProperty('y',$2);var $A=tab.$create_PointF($8,$9);tab.CanvasRenderer.modifyLineEndpoints($7,$A,$3);this.$1F['x'][$1]=$7.x;this.$1F['y'][$1]=$7.y;if(this.getRight($2)===-1){this.$1F['x'][$2]=$A.x;this.$1F['y'][$2]=$A.y;}}}}},$5F:function($p0){var $0=this.$54($p0);if(!this.isTupleVisible($0)){return 'markStateInvisible';}else if(this.isTupleSelected($0)){return 'markStateSelected';}else if(this.isTupleHighlighted($0)){return 'markStateHighlighted';}return 'markStateNormal';}}
tab.CanvasRenderer=function(canvasElt,context){this.$1=canvasElt;this.$2=context;this.$5=false;this.$7=tab.$create_Point(0,0);if(tab.BrowserSupport.get_isSafari()&&!tab.BrowserSupport.get_isMobile()){this.$1.style['webkitFontSmoothing']='antialiased';}}
tab.CanvasRenderer.get_multipolyLineSizeOffset=function(){return (tab.BrowserSupport.get_isChrome())?0.4:0;}
tab.CanvasRenderer.bBoxMultipolygon=function(hasPixelGeometry,x,y,scale,placeholdersize,multipolygon){var $0;if(ss.isNullOrUndefined(multipolygon)){var $2=placeholdersize/2;var $3=Math.floor(placeholdersize+1);var $4=tab.$create_PointF(x-$2,y-$2);$0=tab.$create_BBoxRectF($4.x,$4.y,$4.x+$3,$4.y+$3);}else{$0=tab.$create_BBoxRectF(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);tab.CanvasRenderer.boundsMultipolygon(multipolygon,$0);}if(hasPixelGeometry){return tab.RectXYUtil.rectXYFromBBoxRectF($0);}var $1=tab.Transform.domainToPixel(x,y,scale);return $1.transformBounds($0);}
tab.CanvasRenderer.modifyLineEndpoints=function(start,end,lineWidth){if(Math.round(lineWidth)%2===1){var $0=end.x-start.x;var $1=end.y-start.y;if(!!$0||!!$1){var $2=($0*$0)+($1*$1);$2=Math.sqrt($2);var $3=Math.abs(0.5*($0/$2));var $4=Math.abs(0.5*($1/$2));start.x+=$4;start.y+=$3;end.x+=$4;end.y+=$3;}}}
tab.CanvasRenderer.customShapeColor=function(pdInfo,markIndex,layer,colorOverrideMode){switch(layer){case 'highlightedUnder':case 'normalUnder':return (pdInfo.getMarkProperty('halo_color',markIndex))[colorOverrideMode];case 'selectedOn':case 'highlightedOn':case 'normalOn':return (pdInfo.getMarkProperty('color',markIndex))[colorOverrideMode];case 'selectedUnder':case 'hoverOverlay':case 'pressedOverlay':return (pdInfo.getMarkProperty('selected_halo_color',markIndex))[colorOverrideMode];}return 'rgba(255,255,255,1)';}
tab.CanvasRenderer.getRenderContext=function(canvasElt){return new tab.TabRenderContext2D(canvasElt.getContext('2d'));}
tab.CanvasRenderer.addMultipolygonPath=function(ctx,multipolygon){var $0=multipolygon.a0j;var $1=$0.length;for(var $2=0;$2<$1;$2++){var $3=$0[$2].a0l;var $4=$3.length;for(var $5=0;$5<$4;$5++){var $6=$3[$5].ad2;var $7=$6.length;if($7<2){continue;}ctx.moveTo($6[0],$6[1]);for(var $8=2;$8<$7;$8=$8+2){ctx.lineTo($6[$8],$6[$8+1]);}}}}
tab.CanvasRenderer.boundsMultipolygon=function(multipolygon,bounds){var $0=bounds.minX;var $1=bounds.minY;var $2=bounds.maxX;var $3=bounds.maxY;var $4=multipolygon.a0j;var $5=$4.length;for(var $6=0;$6<$5;$6++){var $7=$4[$6].a0l;var $8=$7.length;for(var $9=0;$9<$8;$9++){var $A=$7[$9].ad2;var $B=$A.length;for(var $C=0;$C<$B;$C=$C+2){var $D=$A[$C];var $E=$A[$C+1];$0=Math.min($0,$D);$1=Math.min($1,$E);$2=Math.max($2,$D);$3=Math.max($3,$E);}}}bounds.minX=$0;bounds.minY=$1;bounds.maxX=$2;bounds.maxY=$3;}
tab.CanvasRenderer.fillPath=function(context,points,close){var $0=Math.floor(points.length/2);if($0<2){return;}context.beginPath();context.moveTo(points[0],points[1]);for(var $1=2;$1<($0*2);$1+=2){context.lineTo(points[$1],points[$1+1]);}if(close){context.closePath();}context.fill();}
tab.CanvasRenderer.strokePath=function(context,points,close,adjust){var $0=Math.floor(points.length/2);if($0<2){return;}context.beginPath();for(var $2=0;$2<($0*2)-2;$2+=2){var $3=tab.$create_PointF(points[$2],points[$2+1]);var $4=tab.$create_PointF(points[$2+2],points[$2+3]);if($0<=2&&adjust){tab.CanvasRenderer.modifyLineEndpoints($3,$4,context.get_lineWidth());}if(!$2){context.moveTo($3.x,$3.y);}tab.CanvasRenderer.$A(context,$3,$4);}if(close){context.closePath();var $5=$0*2;var $6=tab.$create_PointF(points[$5-2],points[$5-1]);var $7=tab.$create_PointF(points[0],points[1]);if($0<=2&&adjust){tab.CanvasRenderer.modifyLineEndpoints($6,$7,context.get_lineWidth());}tab.CanvasRenderer.$A(context,$6,$7);}var $1=context.get_lineCap();if(context.get_linePattern()==='dashed'||context.get_linePattern()==='dotted'){context.set_lineCap('butt');}context.stroke();if(context.get_linePattern()==='dashed'||context.get_linePattern()==='dotted'){context.set_lineCap($1);}}
tab.CanvasRenderer.toCanvasAngle=function(theta){return ((theta*tab.CanvasRenderer.twoPI)-tab.CanvasRenderer.halfPI);}
tab.CanvasRenderer.toCanvasLineCap=function(tableauCap){switch(tableauCap){case 'flat':return 'butt';case 'square':return 'square';case 'round':return 'round';case 'triangle':break;}return 'butt';}
tab.CanvasRenderer.toCanvasLineJoin=function(tableauJoin){switch(tableauJoin){case 'bevel':return 'bevel';case 'miter':return 'miter';case 'round':return 'round';}return 'miter';}
tab.CanvasRenderer.lineEdgeContains=function(hitX,hitY,x0,y0,width0,x1,y1,width1){var $0=[];tab.CanvasRenderer.$9(x0,y0,width0,x1,y1,width1,$0);return tab.GeometryUtil.isPointInPoly($0,tab.$create_PointF(hitX,hitY));}
tab.CanvasRenderer.boundLineEdge=function(bound,x0,y0,width0,x1,y1,width1){var $0=[];tab.CanvasRenderer.$9(x0,y0,width0,x1,y1,width1,$0);var $1=$0[0].x;var $2=$0[0].x;var $3=$0[0].y;var $4=$0[0].y;var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $5=$enum1.current;$1=Math.min($1,$5.x);$3=Math.min($3,$5.y);$2=Math.max($2,$5.x);$4=Math.max($4,$5.y);}return tab.RectXYUtil.union(bound,tab.$create_RectXY(parseInt($1),parseInt($3),parseInt(($2-$1))+1,parseInt(($4-$3))+1));}
tab.CanvasRenderer.boundWedge=function(x,y,radius,theta1,theta2){if(theta1>theta2){var $7=theta1;theta1=theta2;theta2=$7;}if(theta2-theta1>=1){var $8=Math.ceil(2*radius);return tab.$create_RectXY(Math.floor(x-radius),Math.floor(y-radius),$8,$8);}var $0=tab.CanvasRenderer.toCanvasAngle(theta1);var $1=tab.CanvasRenderer.toCanvasAngle(theta2);var $2=[];$2.add(tab.$create_PointF(x,y));$2.add(tab.$create_PointF(x+(radius*Math.cos($0)),y+(radius*Math.sin($0))));$2.add(tab.$create_PointF(x+(radius*Math.cos($1)),y+(radius*Math.sin($1))));$0=tab.GeometryUtil.normalizeAngle($0);$1=tab.GeometryUtil.normalizeAngle($1);if(tab.GeometryUtil.isInBetweenAngles(0,$0,$1)){$2.add(tab.$create_PointF(x+radius,y));}if(tab.GeometryUtil.isInBetweenAngles(tab.CanvasRenderer.halfPI,$0,$1)){$2.add(tab.$create_PointF(x,y+radius));}if(tab.GeometryUtil.isInBetweenAngles(tab.CanvasRenderer.onePI,$0,$1)){$2.add(tab.$create_PointF(x-radius,y));}if(tab.GeometryUtil.isInBetweenAngles(tab.CanvasRenderer.oneAndHalfPI,$0,$1)){$2.add(tab.$create_PointF(x,y-radius));}var $3=Number.POSITIVE_INFINITY;var $4=Number.POSITIVE_INFINITY;var $5=Number.NEGATIVE_INFINITY;var $6=Number.NEGATIVE_INFINITY;var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $9=$enum1.current;$3=Math.min($3,$9.x);$4=Math.min($4,$9.y);$5=Math.max($5,$9.x);$6=Math.max($6,$9.y);}return tab.RectXYUtil.rectXYFromMinAndMax($3,$4,$5,$6);}
tab.CanvasRenderer.roundStartAndExtent=function(start,extent,minSize){var $0=Math.round(start+extent);start=Math.round(start);extent=Math.max(Math.abs($0-start),minSize);return new ss.Tuple(start,extent);}
tab.CanvasRenderer.isPointInExpandedRectHelperF=function(top,left,height,width,expandHeight,expandWidth,minHeight,minWidth,x,y){if(height<0){top+=height;height=Math.abs(height);}if(width<0){left+=width;width=Math.abs(width);}var $0=tab.CanvasRenderer.roundStartAndExtent(top-expandHeight,height+expandHeight+expandHeight,minHeight+expandHeight+expandHeight);var $1=tab.CanvasRenderer.roundStartAndExtent(left-expandWidth,width+expandWidth+expandWidth,minWidth+expandWidth+expandWidth);var $2=tab.$create_RectXY(parseInt($1.first),parseInt($0.first),parseInt($1.second),parseInt($0.second));if(tab.RectXYUtil.inRectPointF($2,tab.$create_PointF(x,y))){return true;}return false;}
tab.CanvasRenderer.renderCustomShape=function(tabContext,pdInfo,markIndex,layer,colorOverrideMode){var $0=pdInfo.getMarkProperty('shape_id',markIndex);if(ss.isValue($0)){var $1=pdInfo.getImageForMark($0);if(!ss.isValue($1)){tab.CanvasRenderer.renderCircle(tabContext,pdInfo.getMarkProperty('x',markIndex),pdInfo.getMarkProperty('y',markIndex),pdInfo.getMarkProperty('width',markIndex),tab.CanvasRenderer.customShapeColor(pdInfo,markIndex,layer,colorOverrideMode),2);return;}if(!$1.complete){return;}var $2=pdInfo.isMarkPropertyConstant('color');var $3=pdInfo.get_allowHighQualityCustomImageScaling();var $4=pdInfo.getMarkProperty('width',markIndex);var $5=pdInfo.getMarkProperty('height',markIndex);var $6=pdInfo.getMarkProperty('left',markIndex);var $7=pdInfo.getMarkProperty('top',markIndex);var $8;var $9;if($1.naturalWidth>$1.naturalHeight){var $D=$1.naturalWidth/$1.naturalHeight;$8=$4;$9=$5/$D;$7+=parseInt((($5-$9)/2));}else{var $E=$1.naturalHeight/$1.naturalWidth;$8=$4/$E;$9=$5;$6+=parseInt((($4-$8)/2));}var $A=tab.CanvasRenderer.$8(pdInfo,markIndex,layer,colorOverrideMode);layer=(layer==='normalOn'&&colorOverrideMode==='colorOverrideOpaque')?'selectedOn':layer;var $B=null;switch(layer){case 'normalUnder':case 'highlightedUnder':case 'selectedUnder':$B=function(){
return tab.ShapeUtil.generateSelectedUnderCustomShape($1,$A,tab.ShapeManager.selectionBorderSize,$8,$9,$3);};break;case 'normalOn':if($2){if(colorOverrideMode==='colorOverrideFog'){$B=function(){
return tab.ShapeUtil.applyFoggingToImage($1,pdInfo.get_foggedBackgroundColor(),pdInfo.get_fogBlendFactor(),$8,$9,$3);};}}else{$B=function(){
return tab.ShapeUtil.colorTransformImage($1,$A,$8,$9,$3);};}break;case 'highlightedOn':if(!$2){$B=function(){
return tab.ShapeUtil.colorTransformImage($1,$A,$8,$9,$3);};}break;case 'selectedOn':if(!$2){$B=function(){
$A=tab.ColorModel.fromColorModelPlusAlpha($A,255);return tab.ShapeUtil.colorTransformImage($1,$A,$8,$9,$3);};}break;case 'hoverOverlay':$B=function(){
return tab.ShapeUtil.generateOverlayForShape($1,$A,tab.ShapeManager.selectionBorderSize,$8,$9,$3);};break;case 'pressedOverlay':$B=function(){
return tab.ShapeUtil.generateOverlayForShape($1,$A,tab.ShapeManager.selectionBorderSize*2,$8,$9,$3);};break;}if(!ss.isValue($B)){$B=function(){
return tab.ShapeUtil.generateCanvasAndPrescaleAsNeeded($1,$8,$9,$3);};}var $C=pdInfo.getCachedShapeForMark($0,layer,colorOverrideMode,$A.toString(),$8,$9,$B);if(ss.isValue($C)){switch(layer){case 'normalUnder':case 'highlightedUnder':case 'selectedUnder':case 'hoverOverlay':tabContext.drawImage3($C,$6-tab.ShapeManager.selectionBorderSize,$7-tab.ShapeManager.selectionBorderSize,$C.width,$C.height);break;case 'pressedOverlay':tabContext.drawImage3($C,$6-(tab.ShapeManager.selectionBorderSize*2),$7-(tab.ShapeManager.selectionBorderSize*2),$C.width,$C.height);break;case 'normalOn':tabContext.set_alpha($A.get_a());tabContext.drawImage3($C,$6,$7,$8,$9);break;default:tabContext.drawImage3($C,$6,$7,$8,$9);break;}}else{}}}
tab.CanvasRenderer.$8=function($p0,$p1,$p2,$p3){var $0=tab.CanvasRenderer.customShapeColor($p0,$p1,$p2,$p3);var $1=tab.ColorModel.fromColorCode($0);$1=tab.ColorModel.fromColorModelPlusAlpha($1,$1.get_a()*255);return $1;}
tab.CanvasRenderer.renderBarOutline=function(context,x,y,width,height,color,strokeWidth,minWidth,minHeight,isSquare){context.set_lineWidth(strokeWidth);context.set_strokeStyle(color);var $0=(!(Math.round(strokeWidth)%2))?0:0.5;var $1=tab.CanvasRenderer.roundStartAndExtent(y,height,minHeight);var $2=tab.CanvasRenderer.roundStartAndExtent(x,width,minWidth);if(isSquare){$2.second=$1.second=Math.min($2.second,$1.second);}context.strokeRect($2.first+$0,$1.first+$0,$2.second,$1.second);}
tab.CanvasRenderer.renderFilledBar=function(context,x,y,width,height,color,minWidth,minHeight,isSquare){context.set_shapeFillStyle(color);var $0=tab.CanvasRenderer.roundStartAndExtent(y,height,minHeight);var $1=tab.CanvasRenderer.roundStartAndExtent(x,width,minWidth);if(isSquare){$1.second=$0.second=Math.min($1.second,$0.second);}context.fillRect($1.first,$0.first,$1.second,$0.second);}
tab.CanvasRenderer.renderRectangle=function(context,x,y,width,height,color,strokeWidth){var $0=width/2;var $1=height/2;context.set_lineJoin('miter');context.set_lineWidth(strokeWidth);context.set_strokeStyle(color);context.strokeRect(x-$0,y-$1,width,height);}
tab.CanvasRenderer.renderCircle=function(context,x,y,diameter,color,strokeWidth){context.beginPath();context.arc(x,y,diameter/2,0,tab.CanvasRenderer.twoPI,true);context.closePath();context.set_lineWidth(strokeWidth);context.set_strokeStyle(color);context.stroke();}
tab.CanvasRenderer.renderFilledCircle=function(context,x,y,diameter,color){context.beginPath();context.arc(x,y,diameter/2,0,tab.CanvasRenderer.twoPI,true);context.closePath();context.set_shapeFillStyle(color);context.fill();}
tab.CanvasRenderer.renderWedge=function(context,x,y,radius,theta1,theta2,color,strokeWidth,anticlockwise){var $0=tab.CanvasRenderer.toCanvasAngle(theta1);var $1=tab.CanvasRenderer.toCanvasAngle(theta2);if(Math.abs($1-$0)<tab.CanvasRenderer.angleEpsilon){return;}if(ss.isNullOrUndefined(anticlockwise)){anticlockwise=false;}var $2=false;if(Math.abs(theta2-theta1)>=1){$2=true;}context.beginPath();if(!$2){context.moveTo(x,y);}$0=tab.CanvasRenderer.$E($0);$1=tab.CanvasRenderer.$E($1);context.arc(x,y,radius,$0,$1,anticlockwise);context.closePath();context.set_lineWidth(strokeWidth);context.set_strokeStyle(color);context.stroke();}
tab.CanvasRenderer.createMultipolygonPath=function(ctx,hasPixelGeometry,x,y,scale,placeholderSize,multipolygon){ctx.save();ctx.beginPath();if(ss.isNull(multipolygon)){ctx.arc(x,y,placeholderSize/2,0,tab.CanvasRenderer.twoPI,true);}else{if(!hasPixelGeometry){ctx.translate(x,y);ctx.scale(scale,scale);}tab.CanvasRenderer.addMultipolygonPath(ctx,multipolygon);}ctx.closePath();ctx.restore();}
tab.CanvasRenderer.$9=function($p0,$p1,$p2,$p3,$p4,$p5,$p6){var $0=Math.atan2($p4-$p1,$p3-$p0);var $1=Math.cos($0);var $2=Math.sin($0);$p2/=2;$p5/=2;var $3=$p2*$2;var $4=$p5*$2;var $5=$p2*$1;var $6=$p5*$1;$p6.add(tab.$create_PointF($p0+$3,$p1-$5));$p6.add(tab.$create_PointF($p3+$4,$p4-$6));$p6.add(tab.$create_PointF($p3-$4,$p4+$6));$p6.add(tab.$create_PointF($p0-$3,$p1+$5));}
tab.CanvasRenderer.$A=function($p0,$p1,$p2){if(tab.BrowserSupport.get_canvasLinePattern()){$p0.lineTo($p2.x,$p2.y);}else{switch($p0.get_linePattern()){case 'dashed':tab.CanvasRenderer.$B($p0,$p1,$p2,tab.TabRenderContext2D.defaultLineDashDashed[0],tab.TabRenderContext2D.defaultLineDashDashed[1]);break;case 'dotted':tab.CanvasRenderer.$B($p0,$p1,$p2,tab.TabRenderContext2D.defaultLineDashDotted[0],tab.TabRenderContext2D.defaultLineDashDotted[1]);break;case 'solid':default:$p0.lineTo($p2.x,$p2.y);break;}}}
tab.CanvasRenderer.$B=function($p0,$p1,$p2,$p3,$p4){var $0=$p0.get_lineWidth();$p3=$0*$p3;$p4=$0*$p4;$p0.moveTo($p1.x,$p1.y);var $1=false;var $2=$p3;var $3=$p1.x;var $4=$p1.y;var $5=$p2.x-$p1.x;var $6=$p2.y-$p1.y;var $7=($5*$5)+($6*$6);$7=Math.sqrt($7);var $8=$5/$7;var $9=$6/$7;while($7>0){var $A=($7>$2)?$2:$7;var $B=$3+($A*$8);var $C=$4+($A*$9);if($1){$p0.moveTo($B,$C);}else{$p0.lineTo($B,$C);}$7-=$A;$2-=$A;if(!$2){$1=!$1;$2=($1)?$p4:$p3;}$3=$B;$4=$C;}}
tab.CanvasRenderer.$C=function($p0,$p1){var $0=tab.DomUtil.parseWidthFromStyle($p0.style);$0=(isNaN($0))?$p1:$0;return $0;}
tab.CanvasRenderer.$D=function($p0,$p1){var $0=tab.DomUtil.parseHeightFromStyle($p0.style);$0=(isNaN($0))?$p1:$0;return $0;}
tab.CanvasRenderer.$E=function($p0){return parseInt(($p0*100000))/100000;}
tab.CanvasRenderer.prototype={$1:null,$2:null,$3:null,$4:null,$5:false,$6:null,$7:null,get_renderOffset:function(){return this.$7;},set_renderOffset:function(value){this.$7=value;this.get_currentContext().translate(-this.$7.x,-this.$7.y);return value;},get_currentCanvas:function(){return (this.$5)?this.$3:this.$1;},get_currentContext:function(){return (this.$5)?this.$4:this.$2;},get_visibleRect:function(){var $0=tab.CanvasRenderer.$C(this.get_currentCanvas(),this.get_currentCanvas().width);var $1=tab.CanvasRenderer.$D(this.get_currentCanvas(),this.get_currentCanvas().height);return tab.$create_RectXY(this.$7.x,this.$7.y,$0,$1);},clear:function(){var $0=this.get_visibleRect();this.get_currentContext().clearRect($0.x,$0.y,$0.w,$0.h);},reset:function(){this.$5=false;this.$4=null;this.$3=null;this.get_currentContext().reset();this.set_renderOffset(tab.$create_Point(0,0));this.clearPrevTextRunInfo();},setRenderOffsetNoTranslate:function(offset){this.$7=offset;},isRectVisible:function(rect){return tab.RectXYUtil.intersectsWith(rect,this.get_visibleRect());},beginOffScreenRender:function(){if(this.$5){return;}if(ss.isNullOrUndefined(this.$3)){this.$3=document.createElement('canvas');var $1=tab.$create_Size(this.$1.width,this.$1.height);var $2=tab.$create_Size(tab.CanvasRenderer.$C(this.$1,0),tab.CanvasRenderer.$D(this.$1,0));tab.CanvasUtil.densifyCanvasUsingSize(this.$3,$1,$2);}if(ss.isNullOrUndefined(this.$4)){this.$4=tab.CanvasRenderer.getRenderContext(this.$3);}else{this.$4.reset();}var $0=this.$1.width/tab.CanvasRenderer.$C(this.$1,this.$1.width);if($0!==1){tab.CanvasUtil.scaleCanvasDrawing(this.$4,$0);}this.$4.translate(-this.get_renderOffset().x,-this.get_renderOffset().y);this.$5=true;this.clear();},endOffScreenRender:function(alpha){if(!this.$5){return;}this.$5=false;this.$2.save();this.$2.set_alpha(alpha);this.$2.setTransform(1,0,0,1,0,0);this.$2.drawImage1(this.$3,0,0);this.$2.restore();},renderFilledRectangle:function(x,y,width,height,color){var $0=width/2;var $1=height/2;var $2=this.get_currentContext();$2.set_shapeFillStyle(color);$2.fillRect(x-$0,y-$1,width,height);},renderFilledWedge:function(x,y,radius,theta1,theta2,color,anticlockwise){var $0=tab.CanvasRenderer.toCanvasAngle(theta1);var $1=tab.CanvasRenderer.toCanvasAngle(theta2);if(Math.abs($1-$0)<tab.CanvasRenderer.angleEpsilon){return;}if(ss.isNullOrUndefined(anticlockwise)){anticlockwise=false;}var $2=this.get_currentContext();$2.beginPath();$2.moveTo(x,y);$0=tab.CanvasRenderer.$E($0);$1=tab.CanvasRenderer.$E($1);$2.arc(x,y,radius,$0,$1,anticlockwise);$2.closePath();$2.set_shapeFillStyle(color);$2.fill();},renderLine:function(points,strokeWidth,color,adjust){var $0=this.get_currentContext();$0.set_linePattern('solid');$0.set_lineWidth(strokeWidth);$0.set_strokeStyle(color);tab.CanvasRenderer.strokePath($0,points,false,adjust);},renderLineLoop:function(points,strokeWidth,color){var $0=this.get_currentContext();$0.set_linePattern('solid');$0.set_lineWidth(strokeWidth);$0.set_strokeStyle(color);tab.CanvasRenderer.strokePath($0,points,true,false);},renderLineEdge:function(x0,x1,y0,y1,width0,width1,haloColor,strokeWidth){var $0=this.get_currentContext();$0.set_linePattern('solid');$0.set_lineWidth(strokeWidth);$0.set_strokeStyle(haloColor);var $1=Math.atan2(y1-y0,x1-x0);var $2=Math.cos($1);var $3=Math.sin($1);width0/=2;width1/=2;var $4=width0*$3;var $5=width1*$3;var $6=width0*$2;var $7=width1*$2;$0.beginPath();$0.moveTo(x0+$4,y0-$6);$0.lineTo(x1+$5,y1-$7);$0.lineTo(x1-$5,y1+$7);$0.lineTo(x0-$4,y0+$6);$0.closePath();$0.stroke();},renderFilledLineEdge:function(x0,x1,y0,y1,width0,width1,color0,color1){var $0;var $1=this.get_currentContext();if(color0===color1){$0=color0;}else{var $2=$1.createLinearGradient(x0,y0,x1,y1);$2.addColorStop(0,color0);$2.addColorStop(1,color1);$0=$2;}if(width0===width1){$1.set_lineWidth(width0);$1.set_linePattern('solid');$1.set_strokeStyle($0);$1.beginPath();$1.moveTo(x0,y0);$1.lineTo(x1,y1);$1.closePath();$1.stroke();}else{var $3=Math.atan2(y1-y0,x1-x0);var $4=Math.cos($3);var $5=Math.sin($3);width0/=2;width1/=2;var $6=width0*$5;var $7=width1*$5;var $8=width0*$4;var $9=width1*$4;$1.beginPath();$1.moveTo(x0+$6,y0-$8);$1.lineTo(x1+$7,y1-$9);$1.lineTo(x1-$7,y1+$9);$1.lineTo(x0-$6,y0+$8);$1.closePath();$1.set_shapeFillStyle($0);$1.fill();}},renderPolygon:function(points,strokeWidth,color){var $0=this.get_currentContext();$0.set_lineWidth(strokeWidth);$0.set_strokeStyle(color);tab.CanvasRenderer.strokePath($0,points,true,true);},renderFilledPolygon:function(points,color){var $0=this.get_currentContext();$0.set_shapeFillStyle(color);tab.CanvasRenderer.fillPath($0,points,true);},setupContextForTextRendering:function(paneDrawInfo){var $0='black';if(ss.isValue(paneDrawInfo.get_textStyleColumns())&&Object.keyExists(paneDrawInfo.get_textStyleColumns(),'text_style_color')){$0=paneDrawInfo.$3A(0,-1,'colorOverrideNone');}this.get_currentContext().set_shapeFillStyle($0);var $1=this.createStyleSettersAndSetDominantStyle(paneDrawInfo.get_textStyleColumns());return $1;},createStyleSettersAndSetDominantStyle:function(styleDict){if(ss.isNullOrUndefined(styleDict)){return function($p1_0){
};}var $0=[];var $enum1=ss.IEnumerator.getEnumerator(Object.keys(styleDict));while($enum1.moveNext()){var $2=$enum1.current;var $3=styleDict[$2];var $4=true;var $5=$3[0];for(var $6=1;$6<$3.length&&$4;++$6){if($5!==$3[$6]){$4=false;}}if($4){this.setTextStyleProprty($2,$5);}else{$0.add($2);}}$0.remove('text_style_color');var $1=ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1_0=$enum1.current;var $1_1=styleDict[$1_0];this.setTextStyleProprty($1_0,$1_1[$p1_0]);}});return $1;},setTextStyleProprty:function(styleKey,styleVal){switch(styleKey){case 'font':this.get_currentContext().set_font(styleVal);break;case 'text_orientation':this.get_currentContext().set_textAngle(styleVal);break;case 'text_alignment':this.get_currentContext().set_textAlign(styleVal);break;case 'alpha':case 'text_style_color':break;case 'text_decoration':this.get_currentContext().set_shouldUnderlineText(styleVal);break;default:break;}},renderText:function(text,x,y,maxWidth,color,multiRunText){if(multiRunText&&ss.isValue(this.$6)&&this.$6.$3(x,y)){var $0=this.$6.$4(x,y);x=$0.x;y=$0.y;}else{this.clearPrevTextRunInfo();}if(ss.isValue(color)){this.get_currentContext().set_textFillStyle(color);}if(maxWidth>0){if(!multiRunText){text=text.trimEnd();}this.get_currentContext().fillText2(text,x,y,maxWidth);}else{this.get_currentContext().fillText1(text,x,y);}if(multiRunText){var $1=this.get_currentContext().measureText(text).width;var $2=this.get_currentContext().get_textAlign()==='end';var $3=this.get_currentContext().get_textAngle();var $4;if($3>1){$4='down';}else if($3<-1){$4='up';}else{$4='horizontal';}this.$6=new tab.vqlui$7(x,y,$1,$2,$4);}else{this.clearPrevTextRunInfo();}},clearPrevTextRunInfo:function(){this.$6=null;},strokeCurrentPath:function(strokeWidth,color){var $0=this.get_currentContext();$0.set_lineWidth(strokeWidth);$0.set_strokeStyle(color);$0.stroke();},fillCurrentPath:function(color){var $0=this.get_currentContext();$0.set_shapeFillStyle(color);$0.fill();},clipRect:function(cellClipCase,x,y,width,height){var $0=100000;switch(cellClipCase){case 0:return;case 1:y=-$0;height=2*$0;break;case 2:x=-$0;width=2*$0;break;}var $1=tab.CanvasRenderer.roundStartAndExtent(y,height,0);var $2=tab.CanvasRenderer.roundStartAndExtent(x,width,0);this.get_currentContext().setClip(tab.$create_RectXY(parseInt($2.first),parseInt($1.first),parseInt($2.second),parseInt($1.second)));}}
tab.vqlui$7=function(x,y,width,endAligned,orientation){this.x=x;this.y=y;this.$0=width;this.$1=endAligned;this.$2=orientation;}
tab.vqlui$7.prototype={x:0,y:0,$0:0,$1:false,$2:null,$3:function($p0,$p1){var $0;if(this.$2==='horizontal'){$0=Math.round(this.y)===Math.round($p1);}else{$0=Math.round(this.x)===Math.round($p0);}return $0;},$4:function($p0,$p1){var $0=this.$0;var $1=$p0;var $2=$p1;switch(this.$2){case 'horizontal':if(this.$1){$0=-$0;}$1=this.x+$0;break;case 'up':if(!this.$1){$0=-$0;}$2=this.y+$0;break;case 'down':if(this.$1){$0=-$0;}$2=this.y+$0;break;default:break;}return tab.$create_PointF($1,$2);}}
tab.DisplayList2DRenderer=function(canvas,context){tab.DisplayList2DRenderer.initializeBase(this,[canvas,context]);}
tab.DisplayList2DRenderer.setTextProperties=function(context,textStyle,fontSize){context.set_textFillStyle(textStyle.agb);var $0=new ss.StringBuilder();if(textStyle.ak3==='font-style-italic'){$0.append('italic ');}if(textStyle.ak4==='font-weight-bold'){$0.append('bold ');}if(ss.isValue(textStyle.ak5)&&textStyle.ak5==='text-decoration-underline'){context.set_shouldUnderlineText(true);}if(ss.isNullOrUndefined(fontSize)||fontSize<=0){fontSize=textStyle.xa;}$0.append(fontSize+'pt '+textStyle.ms);context.set_font($0.toString());context.set_textBaseline(tab.FormattingConverters.$6(textStyle.akz));}
tab.DisplayList2DRenderer.$18=function($p0,$p1){var $0=$p1;$p0.set_textFillStyle(tab.ColorModel.convertColorForCanvas($0.agb));if(ss.isValue($0.ac6)){var $5=$0.ac6*Math.PI/180;$p0.set_textAngle($5);}else{$p0.set_textAngle(0);}var $1=new ss.StringBuilder();if($0.bi){$1.append('italic ');}if($0.bh){$1.append('bold ');}if($0.bn){}var $2=tab.TabRenderContext2D.defaultTextAlign;if($p0.get_isTextAngleHorizontal()){var $6=($0.ah5||'h-align-left');if($6==='h-align-right'){$2='end';}}else{var $7=($0.aif||'v-align-top');if(($p0.get_textAngle()<0&&$7==='v-align-top')||($p0.get_textAngle()>0&&$7==='v-align-bottom')){$2='end';}}$p0.set_textAlign($2);$p0.set_shouldUnderlineText(($0.bm||false));var $3=($0.ms||'Arial');var $4=($0.ac5||8);$1.append($4+'pt '+$3);$p0.set_font($1.toString());}
tab.DisplayList2DRenderer.$19=function($p0,$p1,$p2){var $0=$p1;if($0.zf.length!==4){return;}var $1=$0.zf[2]-$0.zf[0];var $2=$0.zf[3]-$0.zf[1];var $3=$0.zf[0]+($1/2);var $4=$0.zf[1]+($2/2);var $5=(($1<$2)?$1:$2)/2;var $6=($1<$2)?1:$1/$2;var $7=($2<$1)?1:$2/$1;$p0.save();$p0.beginPath();$p0.translate($3,$4);$p0.scale($6,$7);$p0.arc(0,0,$5,0,tab.CanvasRenderer.twoPI,false);$p0.closePath();if($p2){$p0.fill();}else{$p0.stroke();}$p0.restore();}
tab.DisplayList2DRenderer.$1A=function($p0,$p1,$p2){var $0=$p1.ad2;if(!$p2&&Math.round($p0.get_lineWidth())%2===1){$0=$0.clone();for(var $5=0,$6=$0.length;$5<$6;++$5){$0[$5]+=0.5;}}var $1=$p1.ak1;var $2=Math.floor($0.length/2);if($2<2){return;}var $3=$p0.get_lineCap();if($p0.get_linePattern()!=='solid'){$p0.set_lineCap('butt');}$p0.beginPath();var $4=0;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $7=$enum1.current;switch($7){case 'moveto':$p0.moveTo($0[$4],$0[$4+1]);$4+=2;break;case 'lineto':$p0.lineTo($0[$4],$0[$4+1]);$4+=2;break;case 'curveto':$p0.bezierCurveTo($0[$4],$0[$4+1],$0[$4+2],$0[$4+3],$0[$4+4],$0[$4+5]);$4+=6;break;default:break;}}if($p2){$p0.fill();}else{$p0.stroke();}$p0.set_lineCap($3);}
tab.DisplayList2DRenderer.$1B=function($p0){switch($p0.ag5){case 'avg':case 'avh':case 'avj':case 'au8':case 'avi':case 'avk':case 'auz':case 'auy':case 'avl':return true;}return false;}
tab.DisplayList2DRenderer.$1C=function($p0,$p1){if(!$p1){return $p0;}var $0=tab.DisplayList2DRenderer.$1D($p0);if(!$0.length){return $p0;}var $1=$p0.clone();var $2=function($p1_0,$p1_1){
var $1_0=$1[$p1_0];$1[$p1_0]=$1[$p1_1];$1[$p1_1]=$1_0;};var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $3=$enum1.current;for(var $4=0;$4<$3.length/2;++$4){var $5=$3.length-1-$4;$2($3[$4].first,$3[$5].first);$2($3[$4].second,$3[$5].second);}}return $1;}
tab.DisplayList2DRenderer.$1D=function($p0){var $0=[];var $1=-99999999;var $2=false;var $3=-1;var $4=[];for(var $5=0;$5<$p0.length;$5++){var $6=$p0[$5];if($6.ag5==='avi'){var $7=$6;$2=ss.isValue($7.ah5)&&$7.ah5==='h-align-right';$3=$5;}else if($2&&$6.ag5==='avb'){var $8=$6;var $9=$8.zf[1];if($9!==$1){if($4.length>=2){$0.push($4);}$4=[];}$4.push(new ss.Tuple($3,$5));$1=$9;}}if($4.length>=2){$0.push($4);}return $0;}
tab.DisplayList2DRenderer.prototype={renderVisualListHelper:function(vlvm,imageDict){var $0=vlvm.get_visualListPM().au0;this.renderDrawItems($0,vlvm,imageDict,null);},renderDrawItems:function(items,vlvm,imageDict,mapClipRect){var $0=this.get_currentContext();var $1=$0.get_numberSavedStates();var $2=4;for(var $3=0;$3<items.length;++$3){var $4=items[$3];if(true&&$3<$2&&$4.ag5==='avk'){}else if($4.ag5==='auv'){var $5=$4;this.$1F(vlvm,$5,imageDict,mapClipRect);}else{this.$1E($0,$4,imageDict,null,mapClipRect,false);}}while($0.get_numberSavedStates()>$1){$0.restore();}},renderVisualList:function(vlvm,imageDict){if(ss.isValue(vlvm.get_defaultBackgroundColor())){this.get_currentContext().set_shapeFillStyle(vlvm.get_defaultBackgroundColor());this.get_currentContext().fillRect(this.get_visibleRect().x,this.get_visibleRect().y,this.get_visibleRect().w,this.get_visibleRect().h);}this.renderVisualListHelper(vlvm,imageDict);},renderDrawItemList:function(items){this.renderDrawItems(items,null,null,null);},$17:function($p0){var $0=$p0.get_visualListPM().aj8;var $enum1=ss.IEnumerator.getEnumerator($p0.get_visualListPM().au0);while($enum1.moveNext()){var $1=$enum1.current;if($1.ag5==='avg'||($1.ag5==='avh')){this.renderDrawItemDefaultOptions(this.get_currentContext(),$1);}else if($1.ag5==='au5'){var $2=this.get_currentCanvas().width;var $3=this.get_currentCanvas().height;var $4=$1;var $5=$4.zf;if(tab.DisplayList2DRenderer.$14.contains($0)){if(Math.abs($5[3]-$5[1])>=$3){var $6={};$6.ag5=$1.ag5;$6.zf=[0,0,0,$3];this.renderDrawItemDefaultOptions(this.get_currentContext(),$6);$6.zf[0]+=$2-1;$6.zf[2]+=$2-1;this.renderDrawItemDefaultOptions(this.get_currentContext(),$6);return;}}else if(tab.DisplayList2DRenderer.$15.contains($0)){if(Math.abs($5[2]-$5[0])>=this.get_currentCanvas().width){var $7={};$7.ag5=$1.ag5;$7.zf=[0,0,$2,0];this.renderDrawItemDefaultOptions(this.get_currentContext(),$7);$7.zf[1]+=$3-1;$7.zf[3]+=$3-1;this.renderDrawItemDefaultOptions(this.get_currentContext(),$7);return;}}}}},renderDrawItemDefaultOptions:function(context,item){this.$1E(context,item,null,null,null,false);},$1E:function($p0,$p1,$p2,$p3,$p4,$p5){if(!ss.isValue($p0)||!ss.isValue($p1)){return;}switch($p1.ag5){case 'avg':var $0=$p1;$p0.set_lineJoin((ss.isValue($0.ajb))?tab.CanvasRenderer.toCanvasLineJoin($0.ajb):tab.TabRenderContext2D.defaultLineJoin);$p0.set_lineCap((ss.isValue($0.aja))?tab.CanvasRenderer.toCanvasLineCap($0.aja):tab.TabRenderContext2D.defaultLineCap);$p0.set_linePattern(($0.ai9||tab.TabRenderContext2D.defaultLinePattern));$p0.set_strokeStyle((tab.ColorModel.convertColorForCanvas($0.agb)||'rgb(0,0,0)'));$p0.set_lineWidth(($0.acx||1));break;case 'avh':var $1=$p1;$p0.set_shapeFillStyle(tab.ColorModel.convertColorForCanvas($1.agb));break;case 'avj':var $2=$p1;var $3=$2.aqx;var $4=$2.aqy;var $5=$p0.createLinearGradient($3.v9,$3.wa,$4.v9,$4.wa);$5.addColorStop(0,tab.ColorModel.convertColorForCanvas($2.agg));$5.addColorStop(1,tab.ColorModel.convertColorForCanvas($2.agh));$p0.set_shapeFillStyle($5);break;case 'au1':var $6=$p1;if($6.zf.length!==4){return;}var $7=tab.DisplayList2DUtils.rectXYFromDrawRect($6.zf);$p0.strokeRect($7.x,$7.y,$7.w,$7.h);break;case 'au2':var $8=$p1;if($8.zf.length!==4){return;}var $9=tab.DisplayList2DUtils.rectXYFromDrawRect($8.zf);$p0.fillRect($9.x,$9.y,$9.w,$9.h);break;case 'au3':tab.DisplayList2DRenderer.$19($p0,$p1,false);break;case 'au4':tab.DisplayList2DRenderer.$19($p0,$p1,true);break;case 'au5':var $A=$p1;var $B=$A.zf;tab.CanvasRenderer.strokePath($p0,$B,false,true);break;case 'au6':var $C=$p1;tab.CanvasRenderer.strokePath($p0,$C.zf,true,true);break;case 'au7':var $D=$p1;tab.CanvasRenderer.fillPath($p0,$D.zf,true);break;case 'ava':tab.DisplayList2DRenderer.$1A($p0,$p1,true);break;case 'au9':tab.DisplayList2DRenderer.$1A($p0,$p1,false);break;case 'au8':var $E=$p1;if($E.zf.length===4){if(true&&$E.zf[2]-$E.zf[0]===2){break;}$p0.setClip(tab.$create_RectXY($E.zf[0],$E.zf[1],$E.zf[2]-$E.zf[0],$E.zf[3]-$E.zf[1]));}break;case 'avb':var $F=$p1;if($F.zf.length!==2){return;}var $10=$F.zf[0];var $11=$F.zf[1];var $12=-1;if(ss.isValue($p3)&&!!$p3.w&&!!$p3.h){var $13;var $14;if($p0.get_isTextAngleHorizontal()){$13=($p3.x>$10)?$10:$10-$p3.x;$14=$p3.w;}else{$13=($p3.y>$11)?$11:$11-$p3.y;$14=$p3.h;}$12=Math.max($13,$14-$13);}this.renderText($F.sg,$10,$11,$12,null,$p5);break;case 'avi':tab.DisplayList2DRenderer.$18($p0,$p1);break;case 'avk':var $15=$p1;if(ss.isValue($15.ady)&&$15.ady.length===2){$p0.translate($15.ady[0],$15.ady[1]);}if(ss.isValue($15.adz)&&$15.adz.length===2){$p0.scale($15.adz[0],$15.adz[1]);}if(ss.isValue($15.ac1)){$p0.rotate($15.ac1*Math.PI/180);}break;case 'auz':var $16=new tab.vqlui$A($p0);$p0.restore();$16.$B($p0);break;case 'auy':$p0.save();break;case 'avl':var $17=$p1;$p0.set_shouldAntialias($17.a);break;case 'avc':var $18=$p1;if(ss.isValue($p2)&&Object.keyExists($p2,$18.m9)){var $19=$p2[$18.m9];if(ss.isValue($19)&&$19.complete){$p0.save();if(ss.isValue($p4)){$p0.setClip($p4);}$p0.set_alpha($18.ac8);$p0.drawImage4($19,$18.ad0[0],$18.ad0[1],$18.ad0[2]-$18.ad0[0],$18.ad0[3]-$18.ad0[1]);$p0.restore();}}else{}break;default:break;}},$1F:function($p0,$p1,$p2,$p3){var $0=ss.isValue($p0)&&$p0.get_visualListPM().aj8==='annotations';this.clearPrevTextRunInfo();var $1=this.get_currentContext();var $2=false;$p1.yk=($p1.yk||0);$p1.yl=($p1.yl||0);$p1.ym=($p1.ym||0);$p1.yn=($p1.yn||0);var $3=tab.$create_RectXY($p1.yk,$p1.yl,$p1.ym,$p1.yn);var $4=tab.RectXYUtil.offsetRect($1.get_dirtyRect(),this.get_renderOffset());if($p1.ym>0&&$p1.yn>0&&(!this.isRectVisible($3)||!tab.RectXYUtil.intersectsWith($4,$3))){$2=true;}var $5=this.$20($p0,$p1,$2);var $6=tab.DisplayList2DRenderer.$1C($p1.au0,$0);if($5.get_$3()==='hover'){var $8=this.get_renderOffset();var $9=tab.$create_Point(($p1.yo||0)-$8.x,($p1.yp||0)-$8.y);var $A=tab.$create_Point($p1.yk-$9.x,$p1.yl-$9.y);var $B={};$B.zf=[$A.x,$A.y,$A.x+$p1.ym,$A.y+$p1.yn];$B.ag5='au2';this.$1E($1,$B,$p2,$3,$p3,$0);}var $7=$5.get_$3()==='selected'||$5.get_$3()==='highlighted';var $enum1=ss.IEnumerator.getEnumerator($6);while($enum1.moveNext()){var $C=$enum1.current;if($5.get_$3()!=='normal'&&$C.ag5==='avh'){var $D=$C;$5.$0=tab.ColorModel.convertColorForCanvas($D.agb);}else{var $E=null;if($7&&$C.ag5==='avi'){var $F=$C;$5.$1=tab.ColorModel.convertColorForCanvas($F.agb);$E=$1.get_textFillStyle();}if(!$2||tab.DisplayList2DRenderer.$1B($C)){this.$1E($1,$C,$p2,$3,$p3,$0);}if($E!=null){$1.set_textFillStyle($E);}}}if($5.get_$3()!=='normal'){$1.set_shapeFillStyle($5.$0);if($7){$1.set_textFillStyle($5.$1);}}},$20:function($p0,$p1,$p2){var $0='normal';if(!$p2&&ss.isValue($p0)){if($p0.isSelected($p1)){$0='selected';}else if($p0.isBrushed($p1)){$0='highlighted';}else if($p0.isHovered($p1)){$0='hover';}}var $1=new tab.vqlui$8($0);if($0==='normal'){return $1;}var $2=this.get_currentContext();$1.$0=$2.get_shapeFillStyle();$1.$1=$2.get_textFillStyle();switch($0){case 'selected':$2.set_textFillStyle('rgb(255,255,255)');$2.set_shapeFillStyle('rgb(46,106,197)');break;case 'highlighted':$2.set_textFillStyle('rgb(0,0,0)');$2.set_shapeFillStyle('rgb(255,255,204)');break;case 'hover':$2.set_shapeFillStyle('rgb(239,239,239)');break;}if($0==='selected'||$0==='highlighted'){var $3=ss.isValue($p1.yo)||ss.isValue($p1.yp);if($3){$p1.yo=($p1.yo||0);$p1.yp=($p1.yp||0);$2.translate(-$p1.yo,-$p1.yp);}$2.fillRect($p1.yk,$p1.yl,$p1.ym,$p1.yn);if($3){$2.translate($p1.yo,$p1.yp);}}return $1;}}
tab.vqlui$8=function(state){this.$2=state;}
tab.vqlui$8.prototype={$0:null,$1:null,$2:null,get_$3:function(){return this.$2;}}
tab.vqlui$A=function(context){this.$0=context.get_alpha();this.$3=context.get_lineJoin();this.$4=context.get_lineCap();this.$2=context.get_linePattern();this.$5=context.get_strokeStyle();this.$1=context.get_lineWidth();this.$8=context.get_textAngle();this.$9=context.get_font();this.$6=context.get_shapeFillStyle();this.$7=context.get_textFillStyle();this.$A=context.get_textAlign();}
tab.vqlui$A.prototype={$0:0,$1:0,$2:null,$3:null,$4:null,$5:null,$6:null,$7:null,$8:0,$9:null,$A:null,$B:function($p0){$p0.set_alpha(this.$0);$p0.set_lineJoin(this.$3);$p0.set_lineCap(this.$4);$p0.set_linePattern(this.$2);$p0.set_strokeStyle(this.$5);$p0.set_lineWidth(this.$1);$p0.set_textAngle(this.$8);$p0.set_font(this.$9);$p0.set_shapeFillStyle(this.$6);$p0.set_textFillStyle(this.$7);$p0.set_textAlign(this.$A);}}
tab.FontNormalizer=function(){this.normalizeFont=(tab.BrowserSupport.get_isIE())?tab.FontNormalizer.$2:tab.FontNormalizer.$3;}
tab.FontNormalizer.instance=function(){if(tab.FontNormalizer.$0==null){tab.FontNormalizer.$0=new tab.FontNormalizer();tab.FontNormalizer.$4();}return tab.FontNormalizer.$0;}
tab.FontNormalizer.$2=function($p0){var $0=$p0.split(' ');var $1;var $2=false;for(var $3=0;$3<$0.length;++$3){$1=tab.FontNormalizer.$1[$0[$3]];if(!ss.isUndefined($1)){$2=true;$0[$3]=$1;}}if($2){return $0.join(' ');}return $p0;}
tab.FontNormalizer.$3=function($p0){return $p0;}
tab.FontNormalizer.$4=function(){if(tab.FontNormalizer.$1!=null){return;}if(tab.BrowserSupport.get_isIE()){tab.FontNormalizer.$1={};tab.FontNormalizer.$1['\u83ef\u5eb7\u4e2d\u660e\u9ad4']='DLCMingMedium';tab.FontNormalizer.$1['\u83ef\u5eb7\u7c97\u660e\u9ad4']='DLCMingBold';tab.FontNormalizer.$1['\u7d30\u660e\u9ad4']='Ming Light';tab.FontNormalizer.$1['\u65b0\u7d30\u660e\u9ad4']='PMingLiU';tab.FontNormalizer.$1['\u7d30\u660e\u9ad4-ExtB']='MingLiU-ExtB';tab.FontNormalizer.$1['\u65b0\u7d30\u660e\u9ad4-ExtB']='PMingLiU-ExtB';tab.FontNormalizer.$1['MS\u5b8b\u4f53']='MS Song';tab.FontNormalizer.$1['\u65b0\u5b8b\u4f53']='NSimSun';tab.FontNormalizer.$1['\u4e2d\u6613\u5b8b\u4f53']='SimSun';tab.FontNormalizer.$1['\u5b8b\u4f53']='SimSun';tab.FontNormalizer.$1['\u5b8b\u4f53-18030']='SimSun-18030';tab.FontNormalizer.$1['\u65b0\u5b8b\u4f53-18030']='NSimSun-18030';tab.FontNormalizer.$1['\u5b8b\u4f53\u2013\u65b9\u6b63\u8d85\u5927\u5b57\u7b26\u96c6']='SimSun (Founder Extended)';tab.FontNormalizer.$1['\u5b8b\u9ad4ExtA']='SimSun-ExtA';tab.FontNormalizer.$1['\u5b8b\u9ad4ExtB']='SimSun-ExtB';tab.FontNormalizer.$1['\u534e\u6587\u5b8b\u4f53']='STSong';tab.FontNormalizer.$1['\u534e\u6587\u4e2d\u5b8b']='STZhongsong';tab.FontNormalizer.$1['\uff2d\uff33']='MS';tab.FontNormalizer.$1['\u660e\u671d']='Mincho';tab.FontNormalizer.$1['\uff30\u660e\u671d']='PMincho';tab.FontNormalizer.$1['\u5e73\u6210\u660e\u671d']='Heisei Minch\u014d';tab.FontNormalizer.$1['\u30ea\u30e5\u30a6\u30df\u30f3']='Ry\u00ad\u016bbund\u014d Minch\u014d';tab.FontNormalizer.$1['\u5c0f\u585a\u660e\u671d']='Kozuka Minch\u014d';tab.FontNormalizer.$1['\ubc14\ud0d5']='Batang';tab.FontNormalizer.$1['\ubc14\ud0d5\uccb4']='BatangChe';tab.FontNormalizer.$1['\uad81\uc11c']='Gungsuh';tab.FontNormalizer.$1['\uad81\uc11c\uccb4']='GungsuhChe';tab.FontNormalizer.$1['\u534e\u6587\u7ec6\u9ed1']='STHeiti Light';tab.FontNormalizer.$1['\u5fae\u8edf\u6b63\u9ed1\u9ad4']='Microsoft JhengHei';tab.FontNormalizer.$1['\u5fae\u8f6f\u96c5\u9ed1']='Microsoft YaHei';tab.FontNormalizer.$1['MS\u9ed1\u4f53']='MS Hei';tab.FontNormalizer.$1['\u8499\u7eb3\u9ed1\u4f53']='MHei';tab.FontNormalizer.$1['\u4e2d\u6613\u9ed1\u4f53']='SimHei';tab.FontNormalizer.$1['\u30e1\u30a4\u30ea\u30aa']='Meiryo';tab.FontNormalizer.$1['\u30b4\u30b7\u30c3\u30af']='Gothic';tab.FontNormalizer.$1['\uff30\u30b4\u30b7\u30c3\u30af']='PGothic';tab.FontNormalizer.$1['\ub3cb\uc6c0']='Dotum';tab.FontNormalizer.$1['\ub3cb\uc6c0\uccb4']='DotumChe';tab.FontNormalizer.$1['\uad74\ub9bc']='Gulim';tab.FontNormalizer.$1['\uad74\ub9bc\uccb4']='GulimChe';tab.FontNormalizer.$1['\ub9d1\uc740']='Malgun';tab.FontNormalizer.$1['\uace0\ub515']='Gothic';tab.FontNormalizer.$1['\uc0c8\uad74\ub9bc']='New Gulim';tab.FontNormalizer.$1['\u6a19\u6977\u9ad4']='KaiU';tab.FontNormalizer.$1['\u4e2d\u6613\u6977\u4f53']='SimKai';tab.FontNormalizer.$1['\u6977\u4f53_GB2312']='SimKai';tab.FontNormalizer.$1['\u534e\u6587\u6977\u4f53']='STKaiti';tab.FontNormalizer.$1['\u4e2d\u6613\u96b6\u4e66']='SimLi';tab.FontNormalizer.$1['\u96b6\u4e66']='SimLi';tab.FontNormalizer.$1['\u4e2d\u6613\u4eff\u5b8b']='SimFang';tab.FontNormalizer.$1['\u4eff\u5b8b']='SimFang';tab.FontNormalizer.$1['\u5e7c\u5706']='SimYou';tab.FontNormalizer.$1['\u534e\u6587\u884c\u6977']='HuaWen Xingkai';tab.FontNormalizer.$1['\u534e\u6587\u5f69\u4e91']='HuaWen CaiYun';tab.FontNormalizer.$1['\u65b9\u6b63\u8212\u4f53']='FangZheng ShuTi';tab.FontNormalizer.$1['\u65b9\u6b63\u542f\u4f53']='FangZheng QiTi';tab.FontNormalizer.$1['\u6c49\u4eea\u96ea\u541b\u4f53']='HanYi XueJun';tab.FontNormalizer.$1['\u83ef\u5eb7\u5c11\u5973\u9ad4']='HuaKang ShaoNu';tab.FontNormalizer.$1['\u83ef\u5eb7\u5a03\u5a03\u9ad4']='HuaKang WuaWua';}}
tab.FontNormalizer.prototype={normalizeFont:null}
tab.PaneTable2DRenderer=function(canvas,context){tab.PaneTable2DRenderer.initializeBase(this,[canvas,context]);this.$F=new tab.DisplayList2DRenderer(canvas,context);}
tab.PaneTable2DRenderer.getMarkBoundingBox=function(index,paneDrawInfo){var $0=tab.$create_RectXY(0,0,0,0);if(!ss.isValue(paneDrawInfo)||index<0){return $0;}var $1=paneDrawInfo.get_markType();switch($1){case 'shape':return tab.MarksRenderer.$31(paneDrawInfo,index);case 'bar':case 'square':return tab.MarksRenderer.$27(paneDrawInfo,index);case 'pie':return tab.MarksRenderer.$21(paneDrawInfo,index);case 'text':return tab.MarksRenderer.$22(paneDrawInfo,index);case 'label':return tab.MarksRenderer.$1C(paneDrawInfo,index);case 'line':return tab.MarksRenderer.$2C(paneDrawInfo,index);case 'area':return tab.MarksRenderer.$14(paneDrawInfo,index);case 'multipolygon':return tab.MarksRenderer.$F(paneDrawInfo,index);}var $2=paneDrawInfo.getMarkProperty('x',index);var $3=paneDrawInfo.getMarkProperty('y',index);var $4=paneDrawInfo.getMarkProperty('width',index);var $5=paneDrawInfo.getMarkProperty('height',index);$0.x=Math.floor($2-($4/2)+0.5);$0.y=Math.floor($3-($5/2)+0.5);$0.w=Math.ceil($4);$0.h=Math.ceil($5);return $0;}
tab.PaneTable2DRenderer.renderHoverOverlay=function(tupleId,pdInfo,overlayCanvas){if(ss.isNullOrUndefined(overlayCanvas)||ss.isNullOrUndefined(pdInfo)){return;}var $0=tabBootstrap.MetricsController.get_instance().createContext('RenderHoverOverlay',tabBootstrap.MetricsSuites.debug);var $1=pdInfo.getMarkIndexFromTupleID(tupleId);var $2=!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.responsiveUi);switch(pdInfo.get_markType()){case 'area':tab.MarksRenderer.$3F(overlayCanvas,pdInfo,tupleId);break;case 'bar':case 'square':if($2){tab.MarksRenderer.$4E(overlayCanvas,pdInfo,$1);}break;case 'line':tab.MarksRenderer.$52(overlayCanvas,pdInfo,tupleId);break;case 'multipolygon':if($2){tab.MarksRenderer.$3B(overlayCanvas,pdInfo,$1);}break;case 'pie':if($2){tab.MarksRenderer.$46(overlayCanvas,pdInfo,$1);}break;case 'shape':if($2){tab.MarksRenderer.$59(overlayCanvas,pdInfo,tupleId);}break;case 'text':if($2){tab.MarksRenderer.$4A(overlayCanvas,pdInfo,$1);}break;}$0.close();}
tab.PaneTable2DRenderer.renderPressedOverlay=function(tupleId,pdInfo,overlayCanvas){if(ss.isNullOrUndefined(overlayCanvas)||ss.isNullOrUndefined(pdInfo)){return;}var $0=tabBootstrap.MetricsController.get_instance().createContext('RenderPressedOverlay',tabBootstrap.MetricsSuites.debug);var $1=pdInfo.getMarkIndexFromTupleID(tupleId);switch(pdInfo.get_markType()){case 'area':tab.MarksRenderer.$40(overlayCanvas,pdInfo,$1);break;case 'bar':case 'square':tab.MarksRenderer.$4F(overlayCanvas,pdInfo,$1);break;case 'line':tab.MarksRenderer.$53(overlayCanvas,pdInfo,$1);break;case 'multipolygon':tab.MarksRenderer.$3C(overlayCanvas,pdInfo,$1);break;case 'pie':tab.MarksRenderer.$47(overlayCanvas,pdInfo,$1);break;case 'shape':tab.MarksRenderer.$5A(overlayCanvas,pdInfo,tupleId);break;case 'text':tab.MarksRenderer.$4B(overlayCanvas,pdInfo,$1);break;}$0.close();}
tab.PaneTable2DRenderer.$14=function($p0,$p1,$p2){$p0[0]=$p1.x;$p0[1]=$p1.y;$p0[2]=$p2.x;$p0[3]=$p2.y;}
tab.PaneTable2DRenderer.$15=function($p0,$p1,$p2,$p3){var $0=$p2==='au5'||$p2==='au9'||$p2==='au1'||$p2==='au2';if($p1==='selected'&&$0){if(tab.FeatureFlags.isEnabled('AOSelectionRed')){return tab.ColorModel.convertColorForCanvas('rgba(255,0,0,255)');}else{if(tab.ColorModel.isFullyTransparent($p0)){return tab.ColorModel.convertColorForCanvas('rgba(0,0,0,255)');}else{return $p0.toString();}}}if($p1==='hover'&&$0){var $1=77;var $2=new tab.ColorModel(255,255,255,0.45);var $3=new tab.ColorModel(0,0,0,0.45);var $4=(tab.ColorModel.isDark($p0,$1))?$2:$3;return ($p0.get_a()<1)?$4.toString():tab.ColorModel.alphaBlend($4,$p0).toString();}if($p1==='normal'&&ss.isValue($p3)){return tab.PaneDrawInfo.fogColorTransform($p0,$p3.second,$p3.first).toString();}return $p0.toString();}
tab.PaneTable2DRenderer.prototype={$F:null,$10:null,drawReferenceLineAndTrendLineGroup:function(items,targetState,context,drawAll,applyFog){var $0=false;var $1=null;var $2=null;var $3=null;var $enum1=ss.IEnumerator.getEnumerator(items);while($enum1.moveNext()){var $4=$enum1.current;var $5=$4.ag5==='au2'||$4.ag5==='avb';var $6=targetState==='hover'||targetState==='selected';var $7=true;if($5&&$6){var $9=tab.ColorModel.fromColorCode(context.get_shapeFillStyle());if($9.get_a()<1){if(targetState==='hover'){continue;}$7=false;}}var $8=$4.ag5==='avg'||$4.ag5==='avh'||$4.ag5==='avi';if(drawAll||$8){if(($8||!$7)&&$0){context.set_strokeStyle($1.toString());context.set_shapeFillStyle($2.toString());context.set_textFillStyle($3.toString());$0=false;}if((ss.isValue(applyFog)||targetState!=='normal')&&!$0&&!$8&&$7){$1=tab.ColorModel.fromColorCode(context.get_strokeStyle());$2=tab.ColorModel.fromColorCode(context.get_shapeFillStyle());$3=tab.ColorModel.fromColorCode(context.get_textFillStyle());var $A=tab.PaneTable2DRenderer.$15($1,targetState,$4.ag5,applyFog);var $B=tab.PaneTable2DRenderer.$15($2,targetState,$4.ag5,applyFog);var $C=tab.PaneTable2DRenderer.$15($3,targetState,$4.ag5,applyFog);$0=($A!==$1.toString())||($B!==$2.toString())||($C!==$3.toString());if($0){context.set_strokeStyle($A);context.set_shapeFillStyle($B);context.set_textFillStyle($C);}}this.renderVisualParts(context,$4);}}if($0){context.set_strokeStyle($1.toString());context.set_shapeFillStyle($2.toString());context.set_textFillStyle($3.toString());}},renderScene:function(paneTableVm){this.$10=paneTableVm.get_scene();var $0=this.$10.get_scene();if(!ss.isValue($0)){return;}this.$F.setRenderOffsetNoTranslate(this.get_renderOffset());var $1=this.get_currentContext().get_numberSavedStates();var $2=paneTableVm.get_mapServerModel().get_useFastMaps();if(!$2){this.$17(paneTableVm.get_vizRegionMap(),paneTableVm.get_drawFirstParts());}var $3=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());var $4=3;$3=tab.RectXYUtil.outsetRect($3,$4,$4);this.$10.prepareForDraw($3);this.$19($0.auq,$2);this.$10.cleanupFromDraw();this.$17(paneTableVm.get_vizRegionMap(),paneTableVm.get_drawLastParts());while(this.get_currentContext().get_numberSavedStates()>$1){this.get_currentContext().restore();}},renderViewportBorders:function(paneTableVm){this.$10=paneTableVm.get_scene();var $0=this.$10.get_scene();if(ss.isNullOrUndefined($0)){return;}var $1=this.$16($0.auq);if(ss.isNullOrUndefined($1)){return;}var $2=$1.au0.clone();var $3=this.get_currentCanvas().width-1;var $4=this.get_currentCanvas().height-1;var $5=tab.$create_Point(0,0);var $6=tab.$create_Point($3,0);var $7=tab.$create_Point(0,$4);var $8=tab.$create_Point($3,$4);var $9=false;var $A=false;for(var $B=$2.length-1;$B>=0;--$B){var $C=$2[$B];if($C.ag5==='au8'||$C.ag5==='avk'){$2.removeAt($B);}else if($C.ag5==='au5'){var $D=tab.MiscUtil.cloneObject($C);$2[$B]=$D;if($D.zf[1]===$D.zf[3]){if($9){tab.PaneTable2DRenderer.$14($D.zf,$7,$8);}else{tab.PaneTable2DRenderer.$14($D.zf,$5,$6);}$9=true;}else{if($A){tab.PaneTable2DRenderer.$14($D.zf,$6,$8);}else{tab.PaneTable2DRenderer.$14($D.zf,$5,$7);}$A=true;}}}this.get_currentContext().save();this.$1D($2,null,'pane-borders');this.get_currentContext().restore();},renderAxisRulers:function(paneTableVm,docSize,scrollPos){var $0=paneTableVm.get_vizRegionMap()['axis-rules'];if(ss.isValue($0)){var $1=function($p1_0,$p1_1){
var $1_0={};$1_0.ag5='au5';$1_0.zf=new Array(4);tab.PaneTable2DRenderer.$14($1_0.zf,$p1_0,$p1_1);return $1_0;};var $2=tab.RenderUtil.calculatePixelRatio();var $3=this.get_currentCanvas().height-1;var $4=[];var $enum1=ss.IEnumerator.getEnumerator($0.get_visualListPM().au0);while($enum1.moveNext()){var $5=$enum1.current;if($5.ag5==='avg'){$4.add($5);}else if($5.ag5==='au5'){var $6=$5;if($6.zf[0]===$6.zf[2]){$4.add($1(tab.$create_Point(0,-scrollPos.y),tab.$create_Point(0,Math.round($2*docSize.h)-scrollPos.y)));}else if($6.zf[1]===$6.zf[3]){$4.add($1(tab.$create_Point(-scrollPos.x,$3),tab.$create_Point(Math.round($2*docSize.w)-scrollPos.x,$3)));}}}this.get_currentContext().save();this.$1D($4,null,'axis-rules');this.get_currentContext().restore();}},$16:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($0.auf);while($enum2.moveNext()){var $1=$enum2.current;if($1.aj8==='pane-borders'){return $1;}}}return null;},$17:function($p0,$p1){if(!ss.isValue($p0)){return;}var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $0=$enum1.current;var $1=$p0[$0];if(!tab.PaneTableViewModel.blackListVisualParts.contains($0)&&$0!=='axis-rules'){if(ss.isValue($1)){this.get_currentContext().save();var $2=this.$10.get_imageDictionary();this.$F.renderVisualListHelper($1,$2);this.get_currentContext().restore();}}}},$18:function($p0,$p1){if(!ss.isValue($p0)){return;}this.get_currentContext().save();this.$1D($p0.au0,$p1,$p0.aj8);this.get_currentContext().restore();},$19:function($p0,$p1){if(!ss.isValue($p0)){return;}if(!$p1){this.$1A($p0,'background');}this.$1C($p0);this.$1A($p0,'foreground');},$1A:function($p0,$p1){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;if(!this.$1E($0)){continue;}var $enum2=ss.IEnumerator.getEnumerator($0.auf);while($enum2.moveNext()){var $1=$enum2.current;if($p1===this.$21($1.aj8)){this.$18($1,this.$1B($0));}}}},$1B:function($p0){var $0=_.find($p0.auf,function($p1_0){
return $p1_0.aj8==='marks';});if(ss.isValue($0)){return this.$10.$24($0.avw);}return null;},$1C:function($p0){var $enum1=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.renderPassOrder);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.drawRoleOrder);while($enum2.moveNext()){var $1=$enum2.current;var $enum3=ss.IEnumerator.getEnumerator($p0);while($enum3.moveNext()){var $2=$enum3.current;if(!this.$1E($2)){continue;}var $3=null;var $enum4=ss.IEnumerator.getEnumerator($2.auf);while($enum4.moveNext()){var $4=$enum4.current;if($4.aj8==='marks'){$3=this.$10.$24($4.avw);break;}}if($3==null){continue;}if($1==='marks'||$1==='label'){var $enum5=ss.IEnumerator.getEnumerator($2.auf);while($enum5.moveNext()){var $5=$enum5.current;if($5.aj8==='marks'){if($1==='marks'){this.get_currentContext().save();var $6=$3.get_mapExtentOrPaneRect();this.get_currentContext().setClip($6);this.$1F($3,$0);this.get_currentContext().restore();break;}else if($1==='label'){if($3.get_hasLabels()){this.get_currentContext().save();var $7=$3.get_mapExtentOrPaneRect();this.get_currentContext().setClip($7);this.$20($3,$0);this.get_currentContext().restore();break;}}}}}else{var $enum6=ss.IEnumerator.getEnumerator($2.aus);while($enum6.moveNext()){var $8=$enum6.current;switch($8.ag5){case 'aut':var $9=new tab.MarksRenderer(this.get_currentCanvas(),this.get_currentContext());$9.setRenderOffsetNoTranslate(this.get_renderOffset());$9.$9B($3,$0,$8,$1);break;case 'auu':var $A=new tab.MarksRenderer(this.get_currentCanvas(),this.get_currentContext());$A.setRenderOffsetNoTranslate(this.get_renderOffset());$A.$9D($3,$0,$8,$1);break;}}}}}}},$1D:function($p0,$p1,$p2){if(!ss.isValue($p0)){return;}var $0=this.$10.get_imageDictionary();if($p2!=='ref-lines'&&$p2!=='ref-bands'&&$p2!=='trend-lines'){var $1=null;if($p2==='decoration'){if(ss.isValue($p1)){$1=$p1.get_mapExtents();}}this.$F.renderDrawItems($p0,null,$0,$1);}else{var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $2=$enum1.current;if($2.ag5==='auv'){var $3=$2;var $4=false;var $5=false;switch($p2){case 'ref-lines':$4=this.$10.get_$15().get_refLineSelection().isMarkSelected($3.abi);$5=!$4&&(!this.$10.get_$15().get_refLineSelection().get_isEmpty()||!this.$10.get_$15().get_trendLineSelection().get_isEmpty());break;case 'ref-bands':$5=(!this.$10.get_$15().get_refLineSelection().get_isEmpty()||!this.$10.get_$15().get_trendLineSelection().get_isEmpty())&&!this.$10.get_$15().get_refLineSelection().isMarkSelected($3.abi);break;case 'trend-lines':$4=this.$10.get_$15().get_trendLineSelection().isMarkSelected($3.abi);$5=!$4&&(this.$10.get_$10()||this.$10.get_$F());break;}var $6=($4)?'selected':'normal';var $7=null;if($5){if(ss.isValue($p1)&&ss.isValue($p1.get_fogBlendFactor())&&ss.isValue($p1.get_foggedBackgroundColor())){$7=new ss.Tuple($p1.get_fogBlendFactor(),$p1.get_foggedBackgroundColor());}else{var $8=tab.ColorModel.fromColorCode('rgba(255,255,255,255)');var $9=tab.PaneDrawInfo.getFogBlendFactor($8);var $A=tab.PaneDrawInfo.applyFogToBackgroundColor($8,$9);$7=new ss.Tuple($9,$A);}}this.drawReferenceLineAndTrendLineGroup($3.au0,$6,this.get_currentContext(),true,$7);}else{this.renderVisualParts(this.get_currentContext(),$2);}}}},renderVisualParts:function(context,item){this.$F.renderDrawItemDefaultOptions(context,item);},$1E:function($p0){return this.isRectVisible(tab.RecordCast.rectPresModelAsRectXY($p0.aqb));},$1F:function($p0,$p1){if(!$p0.get_markCount()){return;}var $0=new tab.MarksRenderer(this.get_currentCanvas(),this.get_currentContext());$0.setRenderOffsetNoTranslate(this.get_renderOffset());var $1=$p0.get_markType();switch($1){case 'shape':$0.$57($p0,$p1);break;case 'square':case 'bar':$0.$4C($p0,$p1);break;case 'pie':$0.$44($p0,$p1);break;case 'line':$0.$50($p0,$p1);break;case 'area':$0.$3D($p0,$p1);break;case 'text':$0.$48($p0,$p1);break;case 'multipolygon':$0.$39($p0,$p1);break;}},$20:function($p0,$p1){if(!ss.isValue($p0)){return;}if(!$p0.get_markCount()){return;}var $0=new tab.MarksRenderer(this.get_currentCanvas(),this.get_currentContext());$0.setRenderOffsetNoTranslate(this.get_renderOffset());$0.$41($p0,$p1);},$21:function($p0){switch($p0){case 'background':case 'decoration':case 'ref-bands':case 'cell-borders':return 'background';case 'mark-trails':case 'marks':case 'mark-labels':return 'marks';case 'borders':case 'trend-lines':case 'ref-lines':case 'pane-borders':case 'annotations':case 'axis-rules':return 'foreground';}return 'background';}}
tab.RenderUtil=function(){}
tab.RenderUtil.calculatePixelRatio=function(forCanvas){var $0=1;if(ss.isValue(tsConfig.highDpi)&&tsConfig.highDpi){if(ss.isValue(tsConfig.pixelRatio)){$0=tsConfig.pixelRatio;}else{if(ss.isValue(forCanvas)&&!forCanvas){$0=tab.BrowserSupport.get_devicePixelRatio();}else{$0=tab.BrowserSupport.get_devicePixelRatio()/tab.BrowserSupport.get_backingStoragePixelRatio();}}}return $0;}
tab.RenderUtil.manualFadeAnimation=function(element,fromOpacity,toOpacity,fps,animationLengthMilliseconds,exponentialSlowDown){var $0=fromOpacity;var $1=toOpacity;var $2=(animationLengthMilliseconds/1000)*fps;var $3=(toOpacity-fromOpacity)/$2;var $4=1000/fps;var $5=null;$5=function(){
if($0>$1){element.css('filter','alpha(opacity='+$1+')');element.css('opacity',($1/100).toString());return;}element.css('filter','alpha(opacity='+$0+')');element.css('opacity',($0/100).toString());$0+=$3;if(ss.isValue(exponentialSlowDown)){$4+=$4;}window.setTimeout($5,$4);};window.setTimeout($5,$4);}
tab.TabRenderContext2D=function(baseContext){this.$1=baseContext;this.$2=[];this.$3=tab.FontNormalizer.instance();this.reset();this.clearDirtyRect();}
tab.TabRenderContext2D.$E=function($p0){var $0=$p0.split(' ');var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;var $2=parseFloat($1);if(isFinite($2)){return $2;}}return 8;}
tab.TabRenderContext2D.prototype={$1:null,$2:null,$3:null,$4:null,$5:0,$6:null,$7:null,$8:false,$9:false,$A:0,$B:0,$C:null,get_textAngle:function(){return this.$5;},set_textAngle:function(value){this.$5=value;return value;},get_isTextAngleHorizontal:function(){return Math.abs(this.get_textAngle())<0.01;},get_numberSavedStates:function(){return this.$B;},get_alpha:function(){return this.$1.globalAlpha;},set_alpha:function(value){if(value!==this.$1.globalAlpha){this.$1.globalAlpha=value;}return value;},get_compositeOperation:function(){return this.$1.globalCompositeOperation;},set_compositeOperation:function(value){this.$1.globalCompositeOperation=value;return value;},get_font:function(){return this.$1.font;},set_font:function(value){var $0=this.$3.normalizeFont(value);if($0!==this.$1.font){this.$1.font=$0;}this.$A=tab.TabRenderContext2D.$E($0);return value;},get_lineCap:function(){return this.$1.lineCap;},set_lineCap:function(value){if(value!==this.$1.lineCap){this.$1.lineCap=value;}return value;},get_lineJoin:function(){return this.$1.lineJoin;},set_lineJoin:function(value){if(value!==this.$1.lineJoin){this.$1.lineJoin=value;}return value;},get_lineWidth:function(){return this.$1.lineWidth;},set_lineWidth:function(value){if(value!==this.$1.lineWidth){this.$1.lineWidth=value;this.$13();}return value;},get_linePattern:function(){return this.$4;},set_linePattern:function(value){if(value!==this.$4){this.$4=value;this.$13();}return value;},get_miterLimit:function(){return this.$1.miterLimit;},set_miterLimit:function(value){if(value!==this.$1.miterLimit){this.$1.miterLimit=value;}return value;},get_shadowBlur:function(){return this.$1.shadowBlur;},set_shadowBlur:function(value){this.$1.shadowBlur=value;return value;},get_shadowColor:function(){return this.$1.shadowColor;},set_shadowColor:function(value){this.$1.shadowColor=value;return value;},get_shadowOffsetX:function(){return this.$1.shadowOffsetX;},set_shadowOffsetX:function(value){this.$1.shadowOffsetX=value;return value;},get_shadowOffsetY:function(){return this.$1.shadowOffsetY;},set_shadowOffsetY:function(value){this.$1.shadowOffsetY=value;return value;},get_strokeStyle:function(){return this.$1.strokeStyle;},set_strokeStyle:function(value){if(value!==this.$1.strokeStyle){this.$1.strokeStyle=value;}return value;},get_shapeFillStyle:function(){return this.$6;},set_shapeFillStyle:function(value){this.$6=value;this.$12(value);return value;},get_shouldAntialias:function(){return this.$8;},set_shouldAntialias:function(value){this.$8=value;return value;},get_shouldUnderlineText:function(){return this.$9;},set_shouldUnderlineText:function(value){this.$9=value;return value;},get_textFillStyle:function(){return this.$7;},set_textFillStyle:function(value){this.$7=value;return value;},get_textAlign:function(){return this.$1.textAlign;},set_textAlign:function(value){this.$1.textAlign=value;return value;},get_textBaseline:function(){return this.$1.textBaseline;},set_textBaseline:function(value){this.$1.textBaseline=value;return value;},get_dirtyRect:function(){return this.$C;},set_dirtyRect:function(value){this.$C=value;return value;},get_$D:function(){var $0=this.$1.canvas;var $1=tab.$create_Size($0.width,$0.height);return $1;},clearDirtyRect:function(){this.set_dirtyRect(tab.$create_RectXY(0,0,0,0));},setDefaultPropertyValues:function(){this.set_alpha(1);this.set_strokeStyle('rgb(0,0,0)');this.set_linePattern(tab.TabRenderContext2D.defaultLinePattern);this.set_lineWidth(1);this.set_lineJoin(tab.TabRenderContext2D.defaultLineJoin);this.set_lineCap(tab.TabRenderContext2D.defaultLineCap);this.set_shapeFillStyle('rgb(0,0,0)');this.set_textFillStyle('rgb(0,0,0)');this.set_textBaseline(tab.TabRenderContext2D.defaultTextBaseline);this.set_textAlign(tab.TabRenderContext2D.defaultTextAlign);this.set_textAngle(0);this.set_font(8+'pt '+'Arial');this.$8=true;this.$9=false;},setClip:function(clipRect){this.beginPath();this.rect(clipRect.x,clipRect.y,clipRect.w,clipRect.h);this.$F();},arc:function(x,y,radius,startAngle,endAngle,anticlockwise){this.$1.arc(x,y,radius,startAngle,endAngle,anticlockwise);},arcTo:function(x1,y1,x2,y2,radius){this.$1.arcTo(x1,y1,x2,y2,radius);},beginPath:function(){this.$1.beginPath();},bezierCurveTo:function(cp1x,cp1y,cp2x,cp2y,x,y){this.$1.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);},clearRect:function(x,y,w,h){this.$1.clearRect(x,y,w,h);},closePath:function(){this.$1.closePath();},createImageData1:function(imagedata){return this.$1.createImageData(imagedata);},createImageData2:function(sw,sh){return this.$1.createImageData(sw,sh);},createLinearGradient:function(x0,y0,x1,y1){return this.$1.createLinearGradient(x0,y0,x1,y1);},createPattern1:function(canvas,repetition){return this.$1.createPattern(canvas,repetition);},createPattern2:function(image,repetition){return this.$1.createPattern(image,repetition);},createRadialGradient:function(x0,y0,r0,x1,y1,r1){return this.$1.createRadialGradient(x0,y0,r0,x1,y1,r1);},drawImage1:function(image,dx,dy){this.$1.drawImage(image,dx,dy);},drawImage2:function(image,dx,dy){this.$1.drawImage(image,dx,dy);},drawImage3:function(image,dx,dy,dw,dh){this.$1.drawImage(image,dx,dy,dw,dh);},drawImage4:function(image,dx,dy,dw,dh){this.$1.drawImage(image,dx,dy,dw,dh);},drawImage5:function(image,sx,sy,sw,sh,dx,dy,dw,dh){this.$1.drawImage(image,sx,sy,sw,sh,dx,dy,dw,dh);},drawImage6:function(image,sx,sy,sw,sh,dx,dy,dw,dh){this.$1.drawImage(image,sx,sy,sw,sh,dx,dy,dw,dh);},fill:function(){this.$1.fill();},fillRect:function(x,y,w,h){this.$1.fillRect(x,y,w,h);},fillText1:function(text,x,y){if(this.$10()){var $0=ss.Delegate.create(this,function($p1_0){
this.$1.fillText($p1_0,0,0);});this.$11($0,text,x,y);}else{this.$1.fillText(text,x,y);}},fillText2:function(text,x,y,maxWidth){if(this.$10()){var $0=ss.Delegate.create(this,function($p1_0){
this.$1.fillText($p1_0,0,0,maxWidth);});this.$11($0,text,x,y);}else{this.$1.fillText(text,x,y,maxWidth);}},getImageData:function(sx,sy,sw,sh){return this.$1.getImageData(sx,sy,sw,sh);},isPointInPath:function(x,y){return this.$1.isPointInPath(x,y);},lineTo:function(x,y){this.$1.lineTo(x,y);},measureText:function(text){return this.$1.measureText(text);},moveTo:function(x,y){this.$1.moveTo(x,y);},putImageData1:function(imagedata,dx,dy){this.$1.putImageData(imagedata,dx,dy);},putImageData2:function(imagedata,dx,dy,dirtyX,dirtyY,dirtyWidth,dirtyHeight){this.$1.putImageData(imagedata,dx,dy,dirtyX,dirtyY,dirtyWidth,dirtyHeight);},quadraticCurveTo:function(cpx,cpy,x,y){this.$1.quadraticCurveTo(cpx,cpy,x,y);},rect:function(x,y,w,h){this.$1.rect(x,y,w,h);},reset:function(){while(this.$B>0){this.restore();}this.setDefaultPropertyValues();this.setTransform(1,0,0,1,0,0);this.save();},restore:function(){this.$1.restore();var $0=this.$2.pop();$0.$6(this);--this.$B;},rotate:function(angle){this.$1.rotate(angle);},save:function(){var $0=new tab.vqlui$E(this.$4,this.$5,this.$6,this.$7,this.$8,this.$9);this.$2.push($0);this.$1.save();++this.$B;},scale:function(x,y){this.$1.scale(x,y);},setTransform:function(m11,m12,m21,m22,dx,dy){this.$1.setTransform(m11,m12,m21,m22,dx,dy);},stroke:function(){this.$1.stroke();},strokeRect:function(x,y,w,h){this.$1.strokeRect(x,y,w,h);},strokeText1:function(text,x,y){},strokeText2:function(text,x,y,maxWidth){},transform:function(m11,m12,m21,m22,dx,dy){this.$1.transform(m11,m12,m21,m22,dx,dy);},translate:function(x,y){this.$1.translate(x,y);},$F:function(){this.$1.clip();},$10:function(){return !this.get_isTextAngleHorizontal()||this.$6==null||this.$6!==this.$7||this.$9;},$11:function($p0,$p1,$p2,$p3){this.$1.save();this.translate($p2,$p3);if(!this.get_isTextAngleHorizontal()){this.rotate(this.get_textAngle());}this.$12(this.$7);$p0($p1);if(this.$9){var $0=this.measureText($p1).width;var $1=Math.round(Math.max(1,(this.$A-5)/10));var $2=Math.round((this.$A-5)/10);var $3=0;if(this.get_textAlign()==='center'){$3-=$0/2;}else if(this.get_textAlign()==='end'){$3-=$0;}this.$1.fillRect($3,$2,$0,$1);}this.$1.restore();},$12:function($p0){if($p0!==this.$1.fillStyle){this.$1.fillStyle=$p0;}},$13:function(){var $0=null;switch(this.$4){case 'solid':$0=[];break;case 'dashed':$0=[tab.TabRenderContext2D.defaultLineDashDashed[0]*this.$1.lineWidth,tab.TabRenderContext2D.defaultLineDashDashed[1]*this.$1.lineWidth];break;case 'dotted':$0=[tab.TabRenderContext2D.defaultLineDashDotted[0]*this.$1.lineWidth,tab.TabRenderContext2D.defaultLineDashDotted[1]*this.$1.lineWidth];break;}if((typeof(this.$1.setLineDash)==='function')){this.$1.setLineDash($0);}else if(('mozDash' in this.$1)){this.$1.mozDash=$0;}else if(('webkitLineDash' in this.$1)){this.$1.webkitLineDash=$0;}}}
tab.vqlui$E=function(linePattern,textAngle,shapeFill,textFill,shouldAntialias,shouldUnderlineText){this.$0=linePattern;this.$1=textAngle;this.$2=shapeFill;this.$3=textFill;this.$4=shouldAntialias;this.$5=shouldUnderlineText;}
tab.vqlui$E.prototype={$0:null,$1:0,$2:null,$3:null,$4:false,$5:false,$6:function($p0){$p0.set_linePattern(this.$0);$p0.set_textAngle(this.$1);$p0.set_shapeFillStyle(this.$2);$p0.set_textFillStyle(this.$3);$p0.set_shouldAntialias(this.$4);$p0.set_shouldUnderlineText(this.$5);}}
tab.SceneInfo=function(){this.$0={};this.$1={};this.$2={};this.$3={};this.$4={};this.$A={};this.$B={};this.$C={};}
tab.SceneInfo.getPaneMarksKey=function(paneMarksPM){var $0=paneMarksPM.am6;return paneMarksPM.m1+'_'+$0['columnIndex']+'_'+$0['rowIndex']+'_'+paneMarksPM.z6;}
tab.SceneInfo.prototype={$5:null,$6:null,$7:false,$8:null,$9:null,$D:null,get_scene:function(){return this.$5;},get_$E:function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1));while($enum1.moveNext()){var $0=$enum1.current;if(this.$1[$0].get_hasLabels()){return true;}}return false;},get_$F:function(){return ss.isValue(this.$9)&&this.$9.get_hasPaneTableObjectSelection();},get_$10:function(){return this.$7||(ss.isValue(this.$6)&&this.$6.get_hasPaneTableObjectSelection())||(ss.isValue(this.$8)&&!this.$8.get_isEmpty());},get_imageDictionary:function(){return this.$0;},get_$11:function(){return tab.ApplicationModel.get_instance().get_shapeManager();},get_$12:function(){return this.$A;},set_$12:function($p0){this.$A=($p0||{});return $p0;},get_$13:function(){return this.$B;},set_$13:function($p0){this.$B=($p0||{});return $p0;},get_$14:function(){return this.$6;},get_$15:function(){return this.$9;},get_$16:function(){return this.$8;},$17:function($p0,$p1,$p2,$p3,$p4,$p5,$p6){Object.clearKeys(this.$2);Object.clearKeys(this.$4);Object.clearKeys(this.$3);Object.clearKeys(this.$1);Object.clearKeys(this.$C);this.$5=$p0;this.set_$12($p5);this.set_$13($p6);if(ss.isValue($p0)&&ss.isValue($p0.avs)){var $0=Object.keys($p0.avs);var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;var $2=$p0.avs[$1].u7;if(ss.isValue($2)){var $3=$2.length;var $4=new Array($3);for(var $5=0;$5<$3;$5++){var $6=$2[$5];var $7=null;if(!tab.MiscUtil.isNullOrEmpty($6)){$7=JSON.parse($6);$7=tab.RleDecoder.decode($7);}$4[$5]=$7;}this.$C[$1]=$4;}}this.$D={};if(ss.isValue($p0.auq)){var $enum2=ss.IEnumerator.getEnumerator($p0.auq);while($enum2.moveNext()){var $8=$enum2.current;var $enum3=ss.IEnumerator.getEnumerator($8.auf);while($enum3.moveNext()){var $9=$enum3.current;if(ss.isValue($9.avw)){var $A=$9.avw.m1;var $B=0;if(Object.keyExists(this.$D,$A)){$B=this.$D[$A];}this.$D[$A]=$B+1;}}}var $enum4=ss.IEnumerator.getEnumerator($p0.auq);while($enum4.moveNext()){var $C=$enum4.current;var $enum5=ss.IEnumerator.getEnumerator($C.auf);while($enum5.moveNext()){var $D=$enum5.current;if(ss.isValue($D.avw)){var $E=$D.avw;var $F=$E.m1;var $10=this.$5.avs[$F];var $11=new tab.PaneDrawInfo($F,this,$C,$E,$10,$p4);var $12=tab.SceneInfo.getPaneMarksKey($E);this.$1[$12]=$11;}}}}}if(ss.isValue($p1)){this.$9=$p1;this.$8=$p2;}if(ss.isValue($p3)){this.$6=$p3;}},hasSharedData:function(pdMarksKey){if(ss.isNullOrUndefined(this.$D)||!Object.keyExists(this.$D,pdMarksKey)){return false;}return this.$D[pdMarksKey]>1;},getMarkBoundingBox:function(tupleID){if(Object.keyExists(this.$2,tupleID)){return this.$2[tupleID];}else{return tab.$create_RectXY(0,0,0,0);}},$18:function($p0,$p1){if(Object.keyExists(this.$C,$p0)&&$p1>=0&&$p1<this.$C[$p0].length){return this.$C[$p0][$p1];}return null;},prepareForDraw:function(dirtyRect){this.$2B(dirtyRect);this.$2D();},cleanupFromDraw:function(){this.$2C();},$19:function($p0){if(Object.keyExists(this.$3,$p0)){return this.$3[$p0];}else{return tab.$create_RectXY(0,0,0,0);}},$1A:function($p0){var $0=1;var $1=this.$19($p0);if(tab.RectXYUtil.isNull($1)){return $1;}return tab.RectXYUtil.outsetRect($1,$0,$0);},$1B:function($p0){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.current;var $2=this.$1C($1);$0.addRange($2);}return $0;},$1C:function($p0){var $0=false;var $1=[];var $2=[];var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1));while($enum1.moveNext()){var $3=$enum1.current;var $4=this.$1[$3].get_markType();if($4==='area'||$4==='line'){$0=true;}$2.add(this.$1[$3].get_paneRect());}var $enum2=ss.IEnumerator.getEnumerator(this.$5.auq);while($enum2.moveNext()){var $5=$enum2.current;if($5.aus.length>0){$0=true;break;}}if($0){$1.addRange($2);}else{var $6=this.$2A($p0);var $7=this.$25($p0);if(ss.isValue($7)){var $8=$7.getWorldOffsetMarkBounds($6);$1.addRange($8);var $9=this.$1A($p0);if(!tab.RectXYUtil.isNull($9)){$1.add($9);}}}return $1;},$1D:function($p0,$p1){if(ss.isValue($p0)&&ss.isValue($p0.ag4)){var $dict1=$p0.ag4;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.key;if(!Object.keyExists(this.$0,$1)){var $2=$0.value;var $3=document.createElement('img');$3.src='data:image/jpeg;base64,'+$2;this.$0[$1]=$3;var $4=null;$4=function(){
if(ss.isValue($p1)){$p1();}$3.removeEventListener('load',$4,false);};$3.addEventListener('load',$4,false);}}var $enum3=ss.IEnumerator.getEnumerator(Object.keys(this.$0));while($enum3.moveNext()){var $5=$enum3.current;if(!Object.keyExists($p0.ag4,$5)){delete this.$0[$5];}}}},$1E:function($p0){return this.get_$F()&&this.$9.get_tupleSelection().isMarkSelected($p0);},$1F:function($p0){return this.get_$10()&&((ss.isValue(this.$6)&&this.$6.get_tupleSelection().isMarkSelected($p0))||this.$20($p0));},$20:function($p0){return ss.isValue(this.$8)&&this.$8.isMarkSelected($p0);},$21:function($p0){return !Object.keyExists(this.$A,$p0.toString());},$22:function($p0){return Object.keyExists(this.$B,$p0.toString());},$23:function($p0){if(ss.isValue($p0)&&ss.isValue($p0.auq)){var $enum1=ss.IEnumerator.getEnumerator($p0.auq);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($0.auf);while($enum2.moveNext()){var $1=$enum2.current;if(ss.isValue($1.avw)){var $2=$1.avw;var $3=tab.SceneInfo.getPaneMarksKey($2);if(ss.isValue(Object.keyExists(this.$1,$3))){var $4=this.$1[$3];var $5=$2.m1;var $6=$p0.avs[$5];$4.addLabelInfo($6,$2);}}}}}},$24:function($p0){var $0=null;if(ss.isValue($p0)){$0=this.$1[tab.SceneInfo.getPaneMarksKey($p0)];}return $0;},getPaneDrawInfoFromKey:function(paneMarksKey){return this.$1[paneMarksKey];},$25:function($p0){var $0=-1;var $1='';var $2=this.$5.avs;var $dict1=$2;for(var $key2 in $dict1){var $4={key:$key2,value:$dict1[$key2]};var $5=$4.value.ant['tuple_id'];var $6=$5.vs;$0=$6.indexOf($p0);if($0!==-1){$1=$4.key;break;}}var $3=null;if($0!==-1&&!tab.MiscUtil.isNullOrEmpty($1)){var $enum3=ss.IEnumerator.getEnumerator(this.$5.auq);while($enum3.moveNext()){var $7=$enum3.current;var $8=_.find($7.auf,function($p1_0){
return ss.isValue($p1_0.avw);});if(ss.isValue($8)){var $9=$8.avw;if($1===$9.m1&&$0>=$9.z1&&$0<$9.z2){$3=$9;}}}}if(ss.isValue($3)){return this.$24($3);}return null;},$26:function($p0){this.$7=$p0;},$27:function($p0){var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $0=$enum1.current;this.$2[$0]=$p0[$0];}},$28:function($p0){var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $0=$enum1.current;this.$3[$0]=$p0[$0];}},$29:function($p0){var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $0=$enum1.current;this.$4[$0]=$p0[$0];}},$2A:function($p0){var $0=3;var $1=this.$4[$p0];if(ss.isNullOrUndefined($1)){$1=this.getMarkBoundingBox($p0);}if(tab.RectXYUtil.isNull($1)){return $1;}return tab.RectXYUtil.outsetRect($1,$0,$0);},$2B:function($p0){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1));while($enum1.moveNext()){var $0=$enum1.current;var $1=this.$1[$0];$1.computeDirtyMarks($p0);}},$2C:function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1));while($enum1.moveNext()){var $0=$enum1.current;var $1=this.$1[$0];$1.clearDirtyMarks();}},$2D:function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1));while($enum1.moveNext()){var $0=$enum1.current;var $1=this.$1[$0];$1.refreshMarkState();}},$2E:function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1));while($enum1.moveNext()){var $0=$enum1.current;var $1=this.$1[$0];$1.clearMarkState();}}}
tab.ShapeUtil=function(){}
tab.ShapeUtil.generateSelectedUnderCustomShape=function(image,color,borderSize,scaleWidth,scaleHeight,allowHighQualityScaling){var $0=tab.ShapeUtil.colorTransformImage(image,color,scaleWidth,scaleHeight,allowHighQualityScaling);var $1=document.createElement('canvas');var $2=borderSize*2;$1.width=Math.ceil(scaleWidth+$2);$1.height=Math.ceil(scaleHeight+$2);var $3=$1.getContext('2d');$3.drawImage($0,0,0,scaleWidth,scaleHeight);$3.drawImage($0,borderSize,0,scaleWidth,scaleHeight);$3.drawImage($0,$2,0,scaleWidth,scaleHeight);$3.drawImage($0,$2,borderSize,scaleWidth,scaleHeight);$3.drawImage($0,$2,$2,scaleWidth,scaleHeight);$3.drawImage($0,borderSize,$2,scaleWidth,scaleHeight);$3.drawImage($0,0,$2,scaleWidth,scaleHeight);$3.drawImage($0,0,borderSize,scaleWidth,scaleHeight);return $1;}
tab.ShapeUtil.generateOverlayForShape=function(image,color,overlayBorderSize,scaleWidth,scaleHeight,allowHighQualityScaling){var $0=tab.ShapeUtil.generateSelectedUnderCustomShape(image,color,overlayBorderSize,scaleWidth,scaleHeight,allowHighQualityScaling);var $1=$0.getContext('2d');$1.globalCompositeOperation='destination-out';$1.drawImage(image,overlayBorderSize,overlayBorderSize,scaleWidth,scaleHeight);return $0;}
tab.ShapeUtil.colorTransformImage=function(image,color,width,height,allowHighQualityScaling){var $0=tab.ShapeUtil.generateCanvasAndPrescaleAsNeeded(image,width,height,allowHighQualityScaling);var $1=$0.getContext('2d');var $2=$1.getImageData(0,0,$0.width,$0.height);for(var $3=0;$3<$2.data.length;$3+=4){if($2.data[$3+3]>0){$2.data[$3]=color.get_r();$2.data[$3+1]=color.get_g();$2.data[$3+2]=color.get_b();}}$1.putImageData($2,0,0);return $0;}
tab.ShapeUtil.applyFoggingToImage=function(image,fogBackgroundColor,fogBlendAlpha,width,height,allowHighQualityScaling){var $0=tab.ShapeUtil.generateCanvasAndPrescaleAsNeeded(image,width,height,allowHighQualityScaling);var $1=$0.getContext('2d');var $2=$1.getImageData(0,0,$0.width,$0.height);for(var $3=0;$3<$2.data.length;$3+=4){if($2.data[$3+3]>0){$2.data[$3]=fogBackgroundColor.get_r()+($2.data[$3]*fogBlendAlpha);$2.data[$3+1]=fogBackgroundColor.get_g()+($2.data[$3+1]*fogBlendAlpha);$2.data[$3+2]=fogBackgroundColor.get_b()+($2.data[$3+2]*fogBlendAlpha);}}$1.putImageData($2,0,0);return $0;}
tab.ShapeUtil.generateCanvasAndPrescaleAsNeeded=function(image,finalWidth,finalHeight,allowHighQualityScaling){if(!ss.isValue(image)){return document.createElement('canvas');}if(image.width>finalWidth*2&&image.height>finalHeight*2){if(allowHighQualityScaling){return tab.ImageUtil.scaleImage(image,Math.floor(finalWidth),Math.floor(finalHeight),image.naturalWidth,image.naturalHeight);}else{var $0=document.createElement('canvas');$0.width=image.naturalWidth/2;$0.height=image.naturalHeight/2;var $1=$0.getContext('2d');$1.drawImage(image,0,0,$0.width,$0.height);return $0;}}else{var $2=document.createElement('canvas');$2.width=image.naturalWidth;$2.height=image.naturalHeight;var $3=$2.getContext('2d');$3.drawImage(image,0,0,$2.width,$2.height);return $2;}}
tab.ResolveSelectAction=function(){}
tab.ResolveSelectAction.fromNormalizedEvent=function(pseudoEvent,isMultiSelect,selectingMarks){var $0=tableau.util.getSelectAction(pseudoEvent);if(ss.isValue(isMultiSelect)&&isMultiSelect&&$0==='toggle'){$0='range';}else if(!!!isMultiSelect&&!!selectingMarks&&$0==='range'){$0='simple';}return $0;}
tableau.util=function(){}
tableau.util.assetUrl=function(res,useLocal){var $0=(useLocal)?tsConfig.local_static_asset_prefix:tsConfig.external_static_asset_prefix;if(res.charAt(0)==='/'){var $1=$0.length-1;if($0.charAt($1)==='/'){return $0.substring(0,$1-1)+res;}else{return $0+res;}}else{return $0+'/'+res;}}
tableau.util.selectText=function(field,start,end){if(ss.isNullOrUndefined(field)){return;}if((typeof(field.createTextRange)==='function')){var $0=field.createTextRange();$0.collapse(true);$0.moveStart('character',start);$0.moveEnd('character',end-start);$0.select();}else if((typeof(field.setSelectionRange)==='function')){field.setSelectionRange(start,end);}else if((typeof(field.selectionStart)==='function')){field.selectionStart=start;field.selectionEnd=end;}field.focus();}
tableau.util.isPrintableNonNumericKeyPressed=function(e){return tableau.util.isPrintableNonNumericInput(e.which,e.shiftKey,e.ctrlKey);}
tableau.util.isPrintableNonNumericInput=function(charCode,shiftKey,ctlKey){var $0=(charCode>=91&&charCode<=105);var $1=(charCode>=112&&charCode<=123);var $2=charCode<47;var $3=!shiftKey&&!ctlKey&&(charCode>=48&&charCode<=57);return !$0&&!$2&&!$3&&!$1;}
tableau.util.preventNonNumericInput=function(e){if(tableau.util.isPrintableNonNumericKeyPressed(e)){e.preventDefault();e.stopPropagation();}}
tableau.util.isElementVisible=function(node){node=dojo.byId(node);return dojo.style(node,'display')!=='none';}
tableau.util.overElement=function(node,e){node=dojo.byId(node);var $0=tab.$create_Point(e.pageX,e.pageY);var $1=dojo.coords(node,true);var $2=$1.y;var $3=$2+$1.h;var $4=$1.x;var $5=$4+$1.w;return ($0.x>=$4&&$0.x<=$5&&$0.y>=$2&&$0.y<=$3);}
tableau.util.disableTextSelection=function(element){if((typeof(element.onselectstart)==='function')){var $0=function($p1_0){
dojo.stopEvent($p1_0);};element.onselectstart=$0;}else if(('MozUserSelect' in element.style)){element.style['MozUserSelect']='none';}element.style.cursor='default';}
tableau.util.getSelectAction=function(e){var $0='simple';var $1=spiff.EventUtil.isCtrlKey(e);if(e.shiftKey){$0='range';}if($1){$0='toggle';}return $0;}
tableau.util.resize=function(node,bbox){if((typeof(node.resize)==='function')){node.resize(tab.$create_Rect(bbox.x,bbox.y,bbox.w,bbox.h));}else{if(('domNode' in node)){node=node.domNode;}dojo.marginBox(node,tab.$create_Rect(bbox.x,bbox.y,bbox.w,bbox.h));}}
tableau.util.findElementByTagName=function(rootNode,tagName,attrMap){rootNode=(rootNode||dojo.body());if(tableau.util.isNodeMatch(rootNode,tagName,attrMap)){return rootNode;}var $0=rootNode.getElementsByTagName(tagName);var $1=$0.length;for(var $2=0;$2<$1;$2+=1){if(tableau.util.isNodeMatch($0[$2],tagName,attrMap)){return $0[$2];}}return null;}
tableau.util.findDirectParentByClassName=function(startNode,className,endNode){if(ss.isNullOrUndefined(startNode)||tab.MiscUtil.isNullOrEmpty(className)){return null;}endNode=(endNode||document.body);var $0=startNode.parentNode;while(!ss.isNullOrUndefined($0)&&$0!==endNode){if(!tab.MiscUtil.isNullOrEmpty($0.className)){if($0.className.toLowerCase()===className.toLowerCase()){return $0;}$0=$0.parentNode;}}return null;}
tableau.util.isNodeMatch=function(node,tagName,attrMap){if(ss.isNullOrUndefined(node)||node.tagName.toLowerCase()!==tagName.toLowerCase()){return false;}if(ss.isNullOrUndefined(attrMap)){return true;}var $enum1=ss.IEnumerator.getEnumerator(Object.keys(attrMap));while($enum1.moveNext()){var $0=$enum1.current;if(($0 in attrMap)&&node[$0]!==attrMap[$0]){return false;}}return true;}
tableau.util.binarySearch=function(value,array,startIndex,endIndex,comparer){var $0=(tab.MiscUtil.isValidIndex(startIndex||-1,array))?startIndex:0;var $1=(tab.MiscUtil.isValidIndex(endIndex||-1,array))?endIndex:(array.length-1);if(ss.isNullOrUndefined(comparer)){comparer=tableau.util.$1;}var $2={};while($0<=$1){var $3=Math.floor($0+(($1-$0)/2));var $4=comparer(array[$3],value);if(!$4){$2.found=true;$2.index=$3;return $2;}else if($4<0){$0=$3+1;}else{$1=$3-1;}}$2.found=false;$2.index=$0;return $2;}
tableau.util.$1=function($p0,$p1){if($p0===$p1){return 0;}else if($p0 > $p1){return -1;}else{return 1;}}
tableau.util.showAlertDialog=function(content,title,isContentSelectable){var $0={};$0.content=content;$0.title=title;$0.buttons='None';var $1=new tableau.base.widget.Dialog($0);if(isContentSelectable){tableau.util.$2($1);}$1.show();$1.layout();}
tableau.util.showConfirmationDialog=function(content,title,isContentSelectable,onYes,onNo){var $0={};$0.content=content;$0.title=title;$0.buttons='YesNo';$0.onYes=onYes;$0.onNo=onNo;var $1=new tableau.base.widget.Dialog($0);if(isContentSelectable){tableau.util.$2($1);}$1.show();$1.layout();}
tableau.util.$2=function($p0){spiff.Widget.enableTextSelectionOnElement($($p0.containerNode));}
tableau.util.transform=function(node,spec){var $0='';var $1=tab.$create_TransformSpec();$1.scaleX=1;$1.scaleY=1;$1.translateX=0;$1.translateY=0;$1.time=0;spec=dojo.mixin($1,(spec||tab.$create_TransformSpec()));if(!!spec.scale){spec.scaleX=spec.scaleY=spec.scale;}if(tableau.util.has3D){$0=(['translate3d(',spec.translateX.toString(),'px,',spec.translateY.toString(),'px, 0px)']).join('');}else{$0=(['translate(',spec.translateX.toString(),'px,',spec.translateY.toString(),'px)']).join('');}$0+=([' scale(',spec.scaleX.toString(),', ',spec.scaleY.toString(),')']).join('');if(tab.BrowserSupport.get_cssTransform()&&ss.isValue(tab.BrowserSupport.get_cssTransitionName())){node.style['transitionProperty']='transform';node.style['transitionTimingFunction']='cubic-bezier(0, 0, 0.25, 1)';node.style['transitionDuration']=spec.time+'ms';node.style['transform']=$0;node.style['webkitTransitionProperty']='-webkit-transform';node.style['webkitTransitionTimingFunction']='cubic-bezier(0, 0, 0.25, 1)';node.style['webkitTransitionDuration']=spec.time+'ms';node.style['webkitTransform']=$0;node.style['MozTransitionProperty']='-moz-transform';node.style['MozTransitionTimingFunction']='cubic-bezier(0, 0, 0.25, 1)';node.style['MozTransitionDuration']=spec.time+'ms';node.style['MozTransform']=$0;}else if(tab.BrowserSupport.get_isIE()){if(tab.BrowserSupport.get_browserVersion()>8){node.style['msTransform']=$0;}else if(spec.scaleX===1&&spec.scaleY===1){dojo.marginBox(node,{t:spec.translateY,l:spec.translateX});}}}
tableau.util.defer=function(action){if(!tableau.util.bIsAnimationShown){tableau.util.$0.add(action);}else{action();}}
tableau.util.performDeferredCalls=function(){var $0=tableau.util.$0.length;for(var $1=0;$1<$0;$1++){window.setTimeout(tableau.util.$0[$1],$1);}tableau.util.$0.clear();tableau.util.bIsAnimationShown=true;}
tableau.util.localizeDojoLabeledControls=function(controlStringKeyPairs){var $0=controlStringKeyPairs;var $1=$0.length;for(var $2=0;$2<$1;$2++){var $3=$0[$2].first;var $4=$0[$2].second;if(ss.isValue($3)){$3.attr('label',tab.Strings.getString($4));}}}
tableau.util.createCheckBox=function(clickHandler,label,checkClass,tabIndex,isChecked,disposables){var $0=$('<span>').addClass(checkClass).append($("<input type='checkbox' "+((isChecked)?'checked':'')+'>').attr('tabindex',tabIndex.toString())).append($('<label>').text(label));disposables.add(spiff.ClickHandler.targetAndClick($0.find('input'),clickHandler));disposables.add(spiff.ClickHandler.targetAndClick($0.find('label'),clickHandler));return $0;}
tableau.util.createMobileCheckBox=function(changeHandler,label,checkClass,tabIndex,isChecked,disposables){var $0=$('<label>').addClass(checkClass);var $1=$('<div>').addClass('tabAuthCheckbox');$1.toggleClass('checked',isChecked).attr('tabindex',tabIndex.toString());$0.append($1);disposables.add(spiff.ClickHandler.targetAndClick($0,function($p1_0){
$1.toggleClass('checked');changeHandler($1.hasClass('checked'));}));$0.append($('<span>').text(label));return $0;}
tableau.util.parseUri=function(uri){var $0=document.createElement('a');if(ss.isNullOrUndefined(uri)){return null;}$0.href=uri;var $1={href:uri,host:$0.host,hostname:$0.hostname,pathname:$0.pathname,port:$0.port,protocol:$0.protocol,search:$0.search};return $1;}
tableau.util.setupTitleEllipsis=function(domTitleBar){var $0=domTitleBar.find('div');var $1=$0.children('span');var $2=null;var $3=$0.width();var $4=10;$3-=$4;for(var $5=0;$5<$1.length;$5++){var $6=$1[$5];var $7=$($6).width();$2=$6;if($7>$3){break;}$3-=$7;}if(ss.isValue($2)){$0.css('font-family',$2.style.fontFamily);$0.css('font-size',$2.style.fontSize);$0.css('line-height',$2.style.lineHeight);$0.css('color',$2.style.color);$0.css('font-weight',$2.style.fontWeight);$0.css('font-style',$2.style.fontStyle);$0.css('text-decoration',$2.style.textDecoration);}$0.css('text-overflow','ellipsis');$0.css('overflow','hidden');}
tableau.util.NoClickDelay=function(el){this.$0=el;this.$2=this;if(tab.BrowserSupport.get_touch()){this.$0.addEventListener('touchstart',this.$2,false);}}
tableau.util.NoClickDelay.prototype={$0:null,$1:false,$2:null,handleEvent:function(e){switch(e.type){case 'touchstart':this.$3(e);break;case 'touchmove':this.$4(e);break;case 'touchend':this.$5(e);break;}},$3:function($p0){$p0.preventDefault();this.$1=false;this.$0.addEventListener('touchmove',this.$2,false);this.$0.addEventListener('touchend',this.$2,false);},$4:function($p0){this.$1=true;},$5:function($p0){this.$0.removeEventListener('touchmove',this.$2,false);this.$0.removeEventListener('touchend',this.$2,false);if(!this.$1){var $0=document.elementFromPoint($p0.changedTouches[0].clientX,$p0.changedTouches[0].clientY);if($0.nodeType===3){$0=$0.parentNode;}var $1=document.createEvent('MouseEvents');$1.initEvent('click',true,true);$0.dispatchEvent($1);}}}
tab.URIUtil=function(){}
tab.URIUtil.absolutizeURI=function(uri){if(ss.isValue(uri)){uri=uri.trim();}if(String.isNullOrEmpty(uri)){return uri;}var $0=new RegExp('^([a-zA-Z0-9]+):(?!\\d+(/|$))');var $1=uri.match($0);if(ss.isValue($1)&&$1[1]!=='http'&&$1[1]!=='https'){return uri;}var $2='http://';var $3=new RegExp('^https:|^/?/?[a-zA-Z0-9.-]+:443(/|$)');if($3.test(uri)){$2='https://';}var $4=new RegExp('^(https?:)?/?/?');uri=uri.replace($4,$2);return uri;}
tab.ViewState2=function(){}
tab.ViewState2.prototype={newActive:null,oldActive:null,data:null}
tab.WidgetUtil=function(){}
tab.WidgetUtil.newMenuItemsFromCommands=function(items,c,createItemData,commandPermission){if(ss.isNullOrUndefined(c)){return;}var $0=tab.CommandsPresModelWrapper.create(c);if(!ss.isValue($0.get_commandItems())){return;}var $1=true;var $enum1=ss.IEnumerator.getEnumerator($0.get_commandItems());while($enum1.moveNext()){var $2=$enum1.current;var $3=null;var $4=tab.CommandItemWrapper.create($2);var $5=true;if(ss.isValue($4.get_command())&&ss.isValue(commandPermission)){var $7=tab.$create_CommandModel();$7.command=tab.CommandSerializer.deserialize($4.get_command());tab.UbertipSerializer.setCommandType($7);$5=commandPermission.test($7);}if(!$5||(ss.isValue($4.get_isVisible())&&!$4.get_isVisible())){continue;}switch($4.get_commandsType()){case 'item':$3=spiff.MenuItem.newItem(createItemData($2),$4.get_name());$3.set_description($4.get_description());break;case 'separator':if(!$1){$3=spiff.MenuItem.newDivider();}break;case 'subcommands':var $6=[];tab.WidgetUtil.newMenuItemsFromCommands($6,$4.get_commands(),createItemData,commandPermission);if($6.length>0){$3=spiff.MenuItem.newItem(null,$4.get_name(),spiff.MenuItemCheckState.none,new spiff.Menu($6));}break;}if(ss.isValue($3)){$3.set_enabled(!ss.isValue($4.get_enabled())||$4.get_enabled());if($4.get_isRadioOn()){$3.set_checkState(spiff.MenuItemCheckState.radio);}else if($4.get_isChecked()){$3.set_checkState(spiff.MenuItemCheckState.check);}items.add($3);$1=$3.get_isDivider();}}if(items.length>0&&items[items.length-1].get_isDivider()){items.removeAt(items.length-1);}}
tab.WidgetUtil.createDropdownMenuCommands=function(commandModel){var $0=tab.CommandSerializer.deserialize(tab.CommandItemWrapper.create(commandModel).get_command());var $1=function(){
tab.ServerCommands.executeServerCommand($0,'immediately');};return $1;}
tab.ViewController=function(sheetName,session,id){this.id=-1;this.$0=new tab.DisposableHolder();this.sheetName=sheetName;this.viewSession=session;this.id=id;this.$3();}
tab.ViewController.prototype={controller:null,sheetName:'',viewSession:null,active:false,imageCacheVersion:0,viewModified:false,viewWidget:null,get_cacheVersion:function(){return this.imageCacheVersion;},get_viewWidget:function(){return this.viewWidget;},get_viewSession:function(){return this.viewSession;},get_sheetName:function(){return this.sheetName;},get_id:function(){return this.id;},dispose:function(){this.destroy();},destroy:function(){this.viewWidget=null;this.$0.dispose();},setTiledViewer:function(tv){this.viewWidget=tv;},$1:function($p0){if(ss.isNullOrUndefined($p0)){return;}var $0=$p0.layoutStatus;var $1=$p0.primarySheet;if(ss.isNullOrUndefined($0)){return;}if(ss.isValue($0.ba)&&$1===this.sheetName){this.viewModified=$0.ba;}if(!tab.CommandController.get().get_processingRenderModeChange()&&!tab.CommandController.get().get_processingStoryPointChange()){this.incrementCacheVersion();var $2=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.sheetName);if($2.get_isVisualValid()){this.viewWidget.doTiledViewerRefreshImages($2.get_cacheUrlInfo());this.get_viewSession().fireRefreshLegacyLegendImages($2.get_cacheUrlInfo());}}},$2:function($p0){if(!ss.isValue($p0)){return;}if(ss.isValue($p0.data)){if(ss.isValue($p0.data.layoutStatus)){if(ss.isValue($p0.data.layoutStatus.ba)){this.viewModified=$p0.data.layoutStatus.ba;}}else{}}if($p0.oldActive===this.viewWidget){this.active=false;}else if($p0.newActive===this.viewWidget){this.active=true;}},incrementCacheVersion:function(){this.imageCacheVersion+=1;},$3:function(){var $0=this.viewSession;this.$0.add(new tab.SubscriptionDisposable($0.registerEventListener('activeViewChanged',ss.Delegate.create(this,this.$2))));this.$0.add(new tab.SubscriptionDisposable($0.registerEventListener('selectionChanged',ss.Delegate.create(this,this.$1))));}}
tab.ApplicationViewModel=function(skipInit,layoutSession){this._connections=[];this._subscriptions=[];tab.ApplicationViewModel.initializeBase(this,[$(null)]);this.session=layoutSession;this.skipInit=skipInit;var $0=tabBootstrap.ViewerBootstrap.get_instance();if(ss.isNullOrUndefined($0)){throw new Error('tabBootstrap.ViewerBootstrap is undefined');}this.ts=new Date().getTime();if($0.get_hasBootstrapCompleted()){tab.XhrUtil.set_currentTabName(tsConfig.current_sheet_name);}tab.XhrUtil.guid=tsConfig.guid;tab.XhrUtil.parentID=tsConfig.parentID;this.$1_25();this.$1_8=new tab.ViewingToolbarCommands(this);this.$1_E=false;this.enableTextSelection();}
tab.ApplicationViewModel.$1_1E=function($p0,$p1){var $0=tab.ZoneViewModel.calculateZoneZIndex($p0);$($p1).css('z-index',$0.toString());}
tab.ApplicationViewModel.prototype={session:null,skipInit:false,$1_0:null,$1_1:null,$1_2:null,$1_3:null,$1_4:null,ts:0,$1_5:null,$1_6:false,$1_7:null,$1_8:null,$1_9:null,$1_A:null,$1_B:null,$1_C:null,$1_D:0,$1_E:false,$1_F:false,$1_10:false,get_flipboardNavigatorViewModel:function(){if(ss.isValue(this.$1_A)&&ss.isValue(this.$1_A.get_dashboardViewModel())){return this.$1_A.get_dashboardViewModel().get_flipboardNavigatorViewModel();}return null;},get_hasContainedSheet:function(){return ss.isValue(this.get_containedSheetZoneId());},get_containedSheetName:function(){var $0=this.get_$1_12();if(ss.isNullOrUndefined($0)||ss.isNullOrUndefined($0.get_dashboardViewModel())||ss.isNullOrUndefined($0.get_dashboardViewModel().get_dashboardModel())){return null;}return $0.get_dashboardViewModel().get_dashboardModel().get_sheetName();},get_containedSheetZoneId:function(){var $0=this.get_$1_12();if(ss.isNullOrUndefined($0)||ss.isNull($0.get_flipboardModel())){return null;}return $0.get_flipboardModel().get_zoneId();},get_containedSheetType:function(){var $0=this.get_$1_12();if(ss.isNullOrUndefined($0)||ss.isNullOrUndefined($0.get_flipboardModel())||ss.isNullOrUndefined($0.get_flipboardModel().get_storyPointModel())){return 'worksheet';}return ($0.get_flipboardModel().get_storyPointModel().get_isBackingSheetDashboard())?'dashboard':'worksheet';},get_containedDashboardZones:function(){var $0=this.get_$1_12();if(ss.isNullOrUndefined($0)||ss.isNullOrUndefined($0.get_dashboardViewModel())||ss.isNullOrUndefined($0.get_dashboardViewModel().get_dashboardModel())||ss.isNullOrUndefined($0.get_dashboardViewModel().get_dashboardModel().get_dashboardPresModel())){return null;}return $0.get_dashboardViewModel().get_dashboardModel().get_dashboardPresModel().axu;},get_autoUpdate:function(){return tab.ApplicationModel.get_instance().get_autoUpdate();},set_autoUpdate:function(value){tab.ApplicationModel.get_instance().set_autoUpdate(value);return value;},get_isDashboard:function(){return this.get_$1_13().get_isDashboard();},get_vizSize:function(){return tab.ApplicationModel.get_instance().get_workbook().get_outerDashboardPortSize();},get_session:function(){return this.session;},get_vFilterList:function(){return null;},get_clientContentSize:function(){return tabBootstrap.ViewerBootstrap.get_instance().getWebClientContentSize();},get_applicationPresModel:function(){return tab.ApplicationModel.get_instance().get_appPresModel();},get_requestURI:function(){return tsConfig.requestURI;},get_viewControllers:function(){if(ss.isValue(this.get_$1_14())){return this.get_$1_14().viewControllersList;}return [];},get_toolbarDisplayed:function(){return tabBootstrap.ViewerBootstrap.get_instance().toolbarDisplayed;},set_toolbarDisplayed:function(value){tabBootstrap.ViewerBootstrap.get_instance().toolbarDisplayed=value;if(value){if(!ss.isValue(this.get_toolbarContainer())){this.$1_23();}this.get_toolbarContainer().show();}else{this.get_toolbarContainer().hide();}return value;},get_invalid:function(){return tab.ApplicationModel.get_instance().get_invalid();},set_invalid:function(value){tab.ApplicationModel.get_instance().set_invalid(value);return value;},get_skipInit:function(){return this.skipInit;},get_toolbarCommands:function(){return this.$1_8;},get_toolbar:function(){return this.$1_1;},get_customViewsViewModel:function(){return (ss.isValue(this.$1_1))?this.$1_1.get_$1():null;},get_$1_11:function(){return tab.Logger.getLoggerWithName((tab.ApplicationViewModel).get_name()+tsConfig.layoutid.toString());},get_$1_12:function(){if(ss.isValue(this.$1_A)&&ss.isValue(this.$1_A.get_dashboardViewModel())){return this.$1_A.get_dashboardViewModel().get_flipboardViewModel();}return null;},get_$1_13:function(){if(ss.isValue(this.$1_A)){return this.$1_A.get_dashboardViewModel();}return null;},get_$1_14:function(){if(ss.isValue(this.$1_A)){return this.$1_A.get_contentDashboardViewModel();}return null;},get_domNode:function(){return this.$1_B.get_dom().domNode;},get_$1_15:function(){return this.$1_B.get_dom().watermarkParent;},get_$1_16:function(){return this.$1_B.get_dom().viewCount;},get_$1_17:function(){return this.$1_B.get_dom().interpunct;},get_$1_18:function(){return this.$1_B.get_dom().sharePerspective;},get_$1_19:function(){return this.$1_B.get_dom().placeholder;},get_$1_1A:function(){return this.$1_B.get_dom().watermarkLink;},get_$1_1B:function(){return this.$1_B.get_dom().watermarkImage;},get_$1_1C:function(){return this.$1_B.get_toolbarIsBottom();},get_toolbarContainer:function(){return this.$1_B.get_toolbarContainer();},get_containerNode:function(){return this.$1_B.get_containerNode();},getLegacyMenus:function(){return this.$1_0;},startup:function(){this.$1_A=new tab.ApplicationViewModelReal(tab.ApplicationModel.get_instance());this.$1_B=spiff.ObjectRegistry.newView(tab.ApplicationView,this.$1_A);this.$1_A.add_applicationUpdate(ss.Delegate.create(this,this.$1_30));this._connections.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_A.remove_applicationUpdate(ss.Delegate.create(this,this.$1_30));})));this.$1_21();this.resize(false);},destroyRecursive:function(){this.destroy();},destroy:function(){if(ss.isValue(this.$1_5)){window.clearTimeout(this.$1_5);this.$1_5=null;}if(ss.isValue(this.$1_2)){this.$1_2.destroyRecursive(false);}if(ss.isValue(this.$1_1)){this.$1_1.dispose();this.$1_1=null;this.$1_8.dispose();this.$1_8=null;}var $enum1=ss.IEnumerator.getEnumerator(this._connections);while($enum1.moveNext()){var $0=$enum1.current;$0.dispose();}this._connections.clear();var $enum2=ss.IEnumerator.getEnumerator(this._subscriptions);while($enum2.moveNext()){var $1=$enum2.current;dojo.unsubscribe($1);}if(ss.isValue(this.$1_A)){this.$1_A.dispose();this.$1_A=null;}$('body').unbind(this.createNamespacedEventName('mouseenter')).unbind(this.createNamespacedEventName('mouseleave'));this.$1_B.dispose();this.$1_0=null;this.$1_2=null;this.$1_3=null;this.$1_4=null;this.$1_B=null;this.$1_C=null;this.dispose();},showShareDialog:function(){this.$1_3.css({opacity:1});this.$1_2.show();},saveSharedView:function(button){if(!this.$1_38()){var $0={};$0.button=button;this.$1_29($0);return;}tab.XhrUtil.guid=null;if(tsConfig.statefulURL){var $1=this.$1_2C();if($1==='null'||$1==null){$1='';}this.get_session().saveSharedView(button,$1,ss.Delegate.create(this,this.$1_29));}},doResize:function(){if(tsConfig.is_mobile){this.$1_46();}else{this.$1_45(!this.$1_6);}},$1_1D:function(){return this.makeExportPdfDialog(this.get_session());},createTapToInteractTransition:function(animateTransition,initialDelay){},createTapToInteractTouchHandler:function(tapToInteractElem){},makeAuthorByline:function(){return new tab.AuthorByline(tsConfig.workbook_repo_url);},resize:function(forceUpdate){if(tableau.base.widget.FilterPanel.measuringMetrics){return;}if(!forceUpdate&&ss.isValue(this.$1_7)){var $0=tabBootstrap.ViewerBootstrap.get_instance().getWebClientContentSize();if($0.w===this.$1_7.w&&$0.h===this.$1_7.h){this.$1_10=false;return;}if(this.$1_10){this.$1_7=$0;this.$1_10=false;return;}this.$1_10=true;}else{this.$1_10=false;}this.doResize();},doMeasureMetrics:function(){},$1_1F:function(){tab.CommandController.get().resetInvalidationHandlers();tab.CommandController.get().add_onUrlActionsResponse(tab.ActionUtils.launchActionUrls);this._connections.add(new tab.CallOnDispose(function(){
tab.CommandController.get().remove_onUrlActionsResponse(tab.ActionUtils.launchActionUrls);}));tab.CommandController.get().add_onInvalidation(ss.Delegate.create(this,this.$1_44));this._connections.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
tab.CommandController.get().remove_onInvalidation(ss.Delegate.create(this,this.$1_44));})));tab.CommandController.get().add_onBootstrapSuccess(ss.Delegate.create(this,this.$1_43));this._connections.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
tab.CommandController.get().remove_onBootstrapSuccess(ss.Delegate.create(this,this.$1_43));})));},$1_20:function($p0){if(ss.isValue($p0.target)){if($p0.target===this.get_domNode().get(0)||$p0.target===this.get_containerNode().get(0)||(ss.isValue(this.$1_1)&&$p0.target===this.$1_1.get_element().get(0))||$($p0.target).hasClass('wcLayoutContainer')){var $0=tab.ModelUtils.findActiveOrDefaultVisual();if(ss.isValue($0)){tab.SelectionClientCommands.clearAllSelections($0.get_visualId());}this.$1_34();$p0.preventDefault();}}},$1_21:function(){$('.tabbedNavigationWrapper').after(this.get_domNode());var $0=new tab.vqlui$B();this.get_domNode().bind(this.createNamespacedEventName('contextmenu'),ss.Delegate.create(this,this.$1_3D)).bind(this.createNamespacedEventName('mousedown'),ss.Delegate.create($0,$0.$7)).bind(this.createNamespacedEventName('mouseup'),ss.Delegate.create($0,$0.$8));this._connections.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_domNode().unbind(this.createNamespacedEventName('contextmenu')).unbind(this.createNamespacedEventName('mousedown')).unbind(this.createNamespacedEventName('mouseup'));})));$0.add_$5(ss.Delegate.create(this,this.$1_20));this._connections.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
$0.remove_$5(ss.Delegate.create(this,this.$1_20));})));this.$1_B.onAddedToDom();$('body').bind(this.createNamespacedEventName('mouseenter'),ss.Delegate.create(this,this.$1_26)).bind(this.createNamespacedEventName('mouseleave'),ss.Delegate.create(this,this.$1_27));this.session.get_waitHandler().unlock();this.doMeasureMetrics();this.$1_2=new tableau.base.widget.ShareDialog({id:'share_dialog'});this.$1_3=this.get_domNode().find('#share_dialog').replaceWith(this.$1_2.domNode);this.$1_23();this.$1_31();tab.BaseSession.linkTarget=tsConfig.linktarget;this._subscriptions.add(dojo.subscribe('onDoLaunchAuthoring',ss.Delegate.create(this,this.$1_28)));this._subscriptions.add(dojo.subscribe('newGuid',ss.Delegate.create(this,this.$1_29)));this.$1_1F();if(this.$1_22()){this.$1_24();}},$1_22:function(){return tsConfig.show_byline;},$1_23:function(){this.$1_B.get_unusedToolbarContainer().hide();if(this.get_toolbarDisplayed()){this.get_toolbarContainer().show();}else{this.get_toolbarContainer().hide();}if(!(tab.FeatureParamsLookup.getBoolDefaultFalse(tab.FeatureParam.newBrowserToolbar)||false)){this.get_toolbarContainer().addClass('tab-toolbar-container');this.get_toolbarContainer().css('visibility','hidden');this.$1_1=this.makeViewingToolbar(!this.get_$1_1C());this.$1_1.createItems();this.get_toolbarContainer().append(this.$1_1.get_element());this.$1_1.bindEvents();}this._subscriptions.add(dojo.subscribe('modifiedSheetsChanged',ss.Delegate.create(this,this.$1_2F)));if((tab.FeatureParamsLookup.getBoolDefaultFalse(tab.FeatureParam.newBrowserToolbar)||false)){}else{}},$1_24:function(){this.$1_C=this.makeAuthorByline();this.get_$1_15().append(this.$1_C.get_element());},$1_25:function(){if(tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){this._subscriptions.add(this.session.registerEventListener('activeViewChanged',ss.Delegate.create(this,this.$1_33)));}},$1_26:function($p0){this.get_domNode().addClass('mousePresent');},$1_27:function($p0){this.get_domNode().removeClass('mousePresent');},$1_28:function($p0){this.get_session().launchEditing(this.$1_9);},$1_29:function($p0){var $0=$p0;if(!ss.isValue($0)){return;}if($0.button==='link'){this.$1_3C();}else if($0.button==='facebook'){tab.Social.facebookPopup(tsConfig.facebookAppID,this.$1_39(),this.$1_2B(),tsConfig.shareDescription,tsConfig.facebookDescription,this.$1_2A());}else if($0.button==='twitter'){tab.Social.twitterPopup(this.$1_39(),tsConfig.shareDescription);}else if($0.button==='mail'){tab.Social.mailTo(this.$1_39(),tsConfig.shareDescription);}},$1_2A:function(){if(ss.isValue(tsConfig.facebookRedirectURI)){return tsConfig.facebookRedirectURI;}return 'http://facebook.com';},$1_2B:function(){var $0=tab.XhrUtil.guid;if(this.$1_38()&&ss.isValue($0)){var $1=this.$1_3B();var $2=$1.split('/');$2[$2.length-1]='thumb.png';var $3=$2.join('/');$3+='?vizqlid='+this.get_session().get_id();return $3;}return tsConfig.baseViewThumbLink;},$1_2C:function(){if(!String.isNullOrEmpty(tsConfig.primaryContentUrl)){return tsConfig.primaryContentUrl;}if(window.self===window.top){return null;}var $0=tableau.util.parseUri(document.referrer);if(!ss.isValue($0)||(ss.isValue($0['hostname'])&&$0['hostname']===window.location.hostname)){return null;}return document.referrer;},$1_2D:function(){return tab.ApplicationModel.get_instance().get_workbook().get_isCurrentDashboardModified();},$1_2E:function(){if(!this.$1_38()||!this.$1_2D()){return;}if(this.$1_3F()){this.get_$1_17().css('display','');}if(this.$1_E){return;}this.$1_E=true;var $0='Share your perspective';this.get_$1_18().html($0);this.get_$1_18().fadeIn();},$1_2F:function($p0){if(this.$1_38()){this.$1_2E();}},$1_30:function(){if(ss.isNullOrUndefined(this.get_$1_13())){return;}if(this.$1_3F()){this.$1_40();}if(ss.isValue(this.get_$1_14())&&Object.getKeyCount(this.get_$1_14().viewControllersBySheet)===1){this.$1_35(0);}this.$1_31();var $0=tab.DomUtil.getContentBox(this.get_$1_19().get(0));this.$1_36($0);if(!this.get_skipInit()&&!this.$1_F){this.$1_3C();this.session.get_waitHandler().onNextHide(ss.Delegate.create(this,this.$1_4A));if(!(tab.FeatureParamsLookup.getBoolDefaultFalse(tab.FeatureParam.newBrowserToolbar)||false)){this.session.performPostLoadOperations(tsConfig.current_sheet_name,ss.Delegate.create(this,this.$1_42));}this.$1_32();}this.$1_F=true;this.resize(false);dojo.publish('layoutUpdated',null);},$1_31:function(){if(ss.isNullOrUndefined(this.get_$1_14())){return;}var $0=this.$1_0;this.$1_0=this.get_$1_14().get_legacyMenus();if(ss.isValue(this.$1_1)&&tsConfig.toolbarvis){var $1=ss.isValue(this.$1_0)&&(ss.isNullOrUndefined($0)||!_.isEqual(this.$1_0,$0));if($1){this.$1_1.updateMenus(this.$1_0);}this.$1_1.setAutoUpdate(this.get_autoUpdate());var $2=tab.DomUtil.getContentBox(this.get_$1_19().get(0));if(tsConfig.isPublic&&!tsConfig.showRefreshData){this.$1_1.hideRefreshButtons();}if(!this.get_$1_1C()&&this.$1_3E()){this.$1_1.setStyle('background-color','transparent');}else{this.$1_1.setStyles(this.get_$1_13().get_formats());this.$1_1.setStyle('max-width',$2.w+'px');}this.$1_1.layout();}},$1_32:function(){if(tsConfig.showLytebox){$('#primaryContent').attr('src',this.$1_2C());}},$1_33:function($p0){if(tsConfig.is_authoring||tsConfig.isPublic){return;}var $0=$p0;if(this.get_viewControllers().length<=1){return;}this.$1_9=(ss.isValue($0)&&ss.isValue($0.newActive))?$0.newActive.get_sheetid():null;},$1_34:function(){if(this.get_viewControllers().length<=1){return;}this.$1_35();},$1_35:function($p0,$p1){var $0={data:$p1,oldActive:null,newActive:null};var $1=null;var $2=null;if(ss.isValue(this.$1_4)){$1=this.$1_4;$0['oldActive']=$1.get_viewWidget();}if(ss.isValue($p0)){$2=this.get_viewControllers()[$p0];$0['newActive']=$2.get_viewWidget();}if($2===$1){return;}this.$1_4=$2;if(ss.isValue(this.$1_1)){this.$1_1.updateActiveView((ss.isValue($2))?$2.get_viewSession():null);}if(this.get_autoUpdate()||!this.get_invalid()){var $3=$p1;if(ss.isValue($3)&&ss.isValue($3.layoutStatus)&&ss.isValue(this.$1_1)&&tsConfig.toolbarvis){this.$1_1.updateMenus($3.layoutStatus.atx);}this.session.fireEvent('activeViewChanged',$0);}},$1_36:function($p0){var $0=(ss.isValue(tabBootstrap.ViewerBootstrap.get_instance().location))?tabBootstrap.ViewerBootstrap.get_instance().location.toString():'';if(!tsConfig.watermarkdisplay){return;}if((tab.FeatureParamsLookup.getBoolDefaultFalse(tab.FeatureParam.newBrowserToolbar)||false)){this.get_$1_15().css({display:'none'});return;}this.get_$1_15().css({display:'block',width:$p0.w+'px'});this.get_$1_1A().prop('href',tsConfig.watermarklink+'?ref='+$0.split('?')[0]);this.get_$1_1B().prop('src',tsConfig.watermarklogo);if(ss.isValue(this.$1_C)&&this.$1_22()){this.$1_C.displayAuthorByline(this.get_$1_15().width());}},$1_37:function(){var $0=tab.$create_VizParameterInfo();$0.toolbar=tsConfig.toolbarvis;$0.toolbar_default=tsConfig.toolbarvisDefault;$0.show_tabs=this.$1_3E();$0.show_tabs_default=tsConfig.showTabsDefault;$0.show_view_count=this.$1_3F();$0.show_view_count_default=tsConfig.showViewCountDefault;return $0;},$1_38:function(){if(!tsConfig.isPublic||!tsConfig.statefulURL){return false;}if(tsConfig.fromWg||tsConfig.previewMode){return this.$1_2D();}return true;},$1_39:function(){return tab.ShareDialogUtil.getShareUrl(this.$1_3A(),this.$1_37());},$1_3A:function(){var $0=(tsConfig.single_frame)?window.location:window.parent.location;var $1=tab.XhrUtil.guid;var $2=$0.protocol+'//'+$0.hostname+'/shared/';if(this.$1_38()&&!tab.MiscUtil.isNullOrEmpty($1)){return $2+$1;}if(!tab.MiscUtil.isNullOrEmpty(tsConfig.guid)){return $2+tsConfig.guid;}return tsConfig.requestURI;},$1_3B:function(){var $0=tab.XhrUtil.guid;var $1=tsConfig.staticImage;if(!ss.isValue($1)){return '';}if(this.$1_38()&&ss.isValue($0)){var $2=$1.indexOf('/images/')+8;var $3=$1.substr(0,$2);$1=$3+$0.substr(0,2)+'/'+$0+'/1_rss.png';}return $1;},$1_3C:function(){var $0=tab.$create_ShareSettings();$0.request=this.$1_3A();$0.blog=this.$1_2C();$0.title=tsConfig.embeddedTitle;$0.beaker=tsConfig.isPublic;$0.search=tabBootstrap.ViewerBootstrap.get_instance().location.search;$0.static_image=this.$1_3B();$0.width=this.get_vizSize().w;$0.height=this.get_vizSize().h;$0.controller_id=tsConfig.repositoryUrl;$0.watermark_link=tsConfig.watermarklink;$0.toolbar_bottom=this.get_$1_1C();$0.watermark_image=tsConfig.watermarklogo;$0.server_name=tsConfig.serverName;$0.server_logo=tsConfig.serverLogo;$0.tabs_allowed=tsConfig.tabs_allowed;$0.is_stateful_url=this.$1_38();$0.api_url='/javascripts/api/viz_v1.js';$0.site_root=tsConfig.site_root;$0.vizParameterInfo=this.$1_37();tab.ShareDialogUtil.setupShareDialog($0);},$1_3D:function($p0){var $0=$($p0.target);if(!$0.filter('input[type=text]').length&&!$0.filter('textarea').length){$p0.preventDefault();$p0.stopPropagation();}},$1_3E:function(){return tabBootstrap.ViewerBootstrap.get_instance().shouldShowTabs();},$1_3F:function(){return tsConfig.isPublic&&tsConfig.showViewCount&&this.$1_D>tsConfig.viewCountThreshold;},$1_40:function(){var $0=tableau.format.formatIntAuto(this.$1_D,'t',',','3:0');this.get_$1_16().html($0+' views');},$1_41:function($p0){this.$1_D=$p0;if(this.$1_3F()){this.$1_40();this.$1_2E();}},$1_42:function($p0){var $0=$p0;if(ss.isValue($0['viewCount'])){this.$1_41(parseInt($0['viewCount'],10));}},$1_43:function($p0,$p1){tsConfig.layoutid=$p0.layoutId;var $0=$p0.newSessionId;if(!tab.MiscUtil.isNullOrEmpty($0)){tsConfig.sessionid=$0;}var $1=$p0.workbookLocale;if(!String.isNullOrEmpty($1)){tsConfig.workbookLocale=$1;}var $2=$p0.newClientNum;if(!String.isNullOrEmpty($2)){tsConfig.clientNumber=$2;tabBootstrap.Utility.addToUrlHash(tabBootstrap.Utility.CLIENTNO,$2);}this.session.set_layoutId($p0.layoutId.toString());this._subscriptions.add(this.session.registerEventListener('activeViewChanged',ss.Delegate.create(this,this.$1_33)));tsConfig.current_sheet_name=$p0.sheetName;tab.XhrUtil.set_currentTabName(tsConfig.current_sheet_name.toString());tsConfig.workbook_allow_subscriptions=$p0.allowSubscriptions;if(!(tab.FeatureParamsLookup.getBoolDefaultFalse(tab.FeatureParam.newBrowserToolbar)||false)&&ss.isValue(this.get_toolbar())&&tsConfig.workbook_allow_subscriptions&&tsConfig.allow_subscriptions&&!tsConfig.is_guest){this.$1_1.showSubscribeButton();}var $3=$p0.worldUpdate.atz;var $4=tab.ApplicationModel.get_instance();var $5=tabBootstrap.MetricsController.get_instance().createContext('MDLINI',tabBootstrap.MetricsSuites.bootstrap);$4.update($3);$5.close();$p1.checkpointAppPresModel();var $6=this.session.getBootstrapRequestLayoutModelSuccessFunction($p0.sheetName);$6($3);var $7=tabBootstrap.MetricsController.get_instance().createContext('MDLEVT',tabBootstrap.MetricsSuites.bootstrap);tab.Model.fireDeferredEvents(tab.CommandController.handleBootstrapException);$7.close();},$1_44:function($p0){var $0=$p0.layoutStatus;if(ss.isValue($p0.primarySheet)){var $1=this.get_$1_14().viewControllersBySheet['v_'+$p0.primarySheet];if(ss.isValue($1)){this.$1_35($1.get_id(),$p0);}}this.set_invalid((ss.isNullOrUndefined($0.a9))?false:$0.a9);if(ss.isValue($0.atr)&&$0.atr.length>0){var $2=[];var $enum1=ss.IEnumerator.getEnumerator($0.atr);while($enum1.moveNext()){var $4=$enum1.current;if(!$2.contains($4.sr)&&$4.am9.length>0){$2.add($4.sr);}}var $3=this.get_viewControllers();var $enum2=ss.IEnumerator.getEnumerator($2);while($enum2.moveNext()){var $5=$enum2.current;var $6=_.find($3,function($p1_0){
return $p1_0.get_sheetName()===$5;});if(ss.isValue($6)){$6.get_viewSession().fireSelectionChanged($p0);}}}},$1_45:function($p0){var $0=($p0)?0:1000;if(ss.isValue(this.$1_5)){window.clearTimeout(this.$1_5);this.$1_5=null;}this.$1_5=window.setTimeout(ss.Delegate.create(this,this.$1_46),$0);},$1_46:function(){if(!this.session.get_waitHandler().isBusy()&&(!this.$1_6||ss.isValue(tsConfig.layoutid))&&ss.isValue(this.$1_A)){this.$1_47();return;}if(ss.isValue(this.$1_5)){window.clearTimeout(this.$1_5);this.$1_5=null;}this.$1_5=window.setTimeout(ss.Delegate.create(this,this.$1_46),100);},$1_47:function(){this.$1_7=tabBootstrap.ViewerBootstrap.get_instance().getWebClientContentSize();var $0=tabBootstrap.ViewerBootstrap.get_instance().getWebClientContentSize();var $1=tabBootstrap.ViewerBootstrap.get_instance().get_tabsHeight();var $2=tab.$create_Rect(0,$1,$0.w,$0.h);if(!this.get_$1_1C()&&!tsConfig.is_authoring){$2.t+=tabBootstrap.ViewerBootstrap.get_instance().toolbarHeight;}tab.DomUtil.setContentBox(this.get_$1_19().get(0),$2);this.$1_48($2);tab.CommandController.get().refreshLayout();if((tab.FeatureParamsLookup.getBoolDefaultFalse(tab.FeatureParam.newBrowserToolbar)||false)&&tsConfig.toolbarContainerVis){this.get_toolbarContainer().css('visibility','visible');if(this.get_$1_1C()||!this.$1_3E()){this.get_toolbarContainer().css('max-width',$2.w+'px');}}if(!(tab.FeatureParamsLookup.getBoolDefaultFalse(tab.FeatureParam.newBrowserToolbar)||false)&&ss.isValue(this.$1_1)&&tsConfig.toolbarContainerVis){this.get_toolbarContainer().css('visibility','visible');if(this.get_$1_1C()||!this.$1_3E()){this.$1_1.setStyle('max-width',$2.w+'px');}}this.$1_36($2);if(tsConfig.isPublic&&!(tab.FeatureParamsLookup.getBoolDefaultFalse(tab.FeatureParam.newBrowserToolbar)||false)&&ss.isValue(this.$1_1)&&tsConfig.toolbarContainerVis){this.get_$1_15().css('visibility','visible');}this.$1_6=true;},$1_48:function($p0){if(!tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()||(this.skipInit&&!this.$1_6)){return;}var $0=$.extend(true,{},tabBootstrap.ViewerBootstrap.get_instance().metricsUsedForInitialLayout);var $1={};$1.wb=$p0.w;$1.wc=$p0.h;var $2={};$2.ay3=$0.toPresModel();tab.SheetClientCommands.setPortSize($1,$2);},$1_49:function(){var $0={};$0['t']=tabBootstrap.MetricsController.getTiming();$0['d']='APPINT';var $1=new tabBootstrap.MetricsEvent('gen',tabBootstrap.MetricsSuites.bootstrap,$0);tabBootstrap.MetricsController.get_instance().logEvent($1);tab.BrowserSupport.doPostMessageWithContext('tableau.responsive');},$1_4A:function(){var $0=450;this.$1_49();var $1=$('#staticImage');var $2=$('#loadingGlassPane');var $3=$('#loadingSpinner');var $4=$('#tapToInteract');this.createTapToInteractTouchHandler($4);if(tsConfig.animateTransition){$3.fadeOut($0,function(){
$(this).hide();});$1.fadeOut($0,function(){
$(this).hide();});$2.fadeOut($0,function(){
$(this).css('cursor','default');$(this).hide();});if($2.size()>0){this.createTapToInteractTransition(tsConfig.animateTransition,$0);}}else{$3.css('display','none');$1.css('display','none');$2.css('display','none');this.createTapToInteractTransition(tsConfig.animateTransition,0);}}}
tab.vqlui$B=function(){}
tab.vqlui$B.prototype={$2:0,$3:0,$4:null,add_$5:function($p0){this.$6=ss.Delegate.combine(this.$6,$p0);},remove_$5:function($p0){this.$6=ss.Delegate.remove(this.$6,$p0);},$6:null,$7:function($p0){this.$4=Date.get_now();this.$2=$p0.pageX;this.$3=$p0.pageY;},$8:function($p0){this.$9($p0);},$9:function($p0){var $0=Date.get_now()-this.$4;var $1=Math.abs($p0.pageX-this.$2);var $2=Math.abs($p0.pageY-this.$3);if($0<=600&&$1<=10&&$2<=10&&ss.isValue(this.$6)){this.$6($p0);}}}
tab.ApplicationViewModelReal=function(applicationModel){tab.ApplicationViewModelReal.initializeBase(this);this.$1_0=applicationModel;this.$1_0.add_newWorkbook(ss.Delegate.create(this,this.handleNewWorkbook));if(ss.isValue(this.$1_0.get_workbook())){this.handleNewWorkbook(this.$1_0.get_workbook());}this.$1_0.add_applicationUpdate(ss.Delegate.create(this,this.handleApplicationUpdate));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_applicationUpdate(ss.Delegate.create(this,this.handleApplicationUpdate));})));this.$1_2=new tab.ToolbarViewModel(this.$1_0.get_toolbar());}
tab.ApplicationViewModelReal.prototype={$1_0:null,$1_1:null,$1_2:null,add_applicationUpdate:function(value){this.$1_3=ss.Delegate.combine(this.$1_3,value);},remove_applicationUpdate:function(value){this.$1_3=ss.Delegate.remove(this.$1_3,value);},$1_3:null,get_dashboardViewModel:function(){return this.$1_1.get_dashboardViewModel();},get_contentDashboardViewModel:function(){return this.$1_1.get_contentDashboardViewModel();},get_workbookViewModel:function(){return this.$1_1;},get_toolbarViewModel:function(){return this.$1_2;},dispose:function(){if(ss.isValue(this.$1_2)){this.$1_2.dispose();}this.$1_4();this.$1_0.remove_newWorkbook(ss.Delegate.create(this,this.handleNewWorkbook));tab.ApplicationViewModelReal.callBaseMethod(this, 'dispose');},handleNewWorkbook:function(workbookModel){this.$1_4();this.$1_1=new tab.WorkbookViewModel(workbookModel);},$1_4:function(){if(ss.isValue(this.$1_1)){this.$1_1.dispose();this.$1_1=null;}},handleApplicationUpdate:function(){this.raiseActionEvent(this.$1_3);}}
tab.ConfirmationViewModel=function(){this.$1_1=tab.Strings.ConfirmationButtonConfirm;this.$1_2=tab.Strings.ConfirmationButtonDeny;this.$1_3=tab.Strings.ConfirmationTitle;tab.ConfirmationViewModel.initializeBase(this);}
tab.ConfirmationViewModel.create=function(messageHtml,callback){var $0=new tab.ConfirmationViewModel();$0.set_messageHtml(messageHtml);$0.disposeOnHide();$0.add_hidden(callback);$0.disposables.add(new tab.CallOnDispose(function(){
$0.remove_hidden(callback);}));return $0;}
tab.ConfirmationViewModel.showConfirmation=function(messageHtml,callback){var $0=tab.ConfirmationViewModel.create(messageHtml,callback);$0.show();}
tab.ConfirmationViewModel.showNotification=function(messageHtml,callback){var $0=tab.ConfirmationViewModel.create(messageHtml,callback);$0.set_showDenyButton(false);$0.set_confirmText(tab.Strings.DialogButtonOK);$0.show();}
tab.ConfirmationViewModel.prototype={$1_0:null,$1_4:true,$1_5:true,$1_6:false,$1_7:null,add_shown:function(value){this.$1_8=ss.Delegate.combine(this.$1_8,value);},remove_shown:function(value){this.$1_8=ss.Delegate.remove(this.$1_8,value);},$1_8:null,add_hidden:function(value){this.$1_9=ss.Delegate.combine(this.$1_9,value);},remove_hidden:function(value){this.$1_9=ss.Delegate.remove(this.$1_9,value);},$1_9:null,get_messageHtml:function(){return this.$1_0;},set_messageHtml:function(value){this.$1_0=value;return value;},get_visible:function(){return this.$1_6;},get_confirmText:function(){return this.$1_1;},set_confirmText:function(value){this.$1_1=value;return value;},get_denyText:function(){return this.$1_2;},set_denyText:function(value){this.$1_2=value;return value;},get_titleText:function(){return this.$1_3;},set_titleText:function(value){this.$1_3=value;return value;},get_showConfirmButton:function(){return this.$1_4;},set_showConfirmButton:function(value){this.$1_4=value;return value;},get_showDenyButton:function(){return this.$1_5;},set_showDenyButton:function(value){this.$1_5=value;return value;},dispose:function(){this.$1_7=null;this.$1_8=null;this.$1_9=null;tab.ConfirmationViewModel.callBaseMethod(this, 'dispose');},show:function(){if(this.$1_6){return;}if(ss.isNullOrUndefined(this.$1_7)){this.$1_7=spiff.ObjectRegistry.newView(tab.ConfirmationView,this);}this.$1_6=true;this.raiseActionEvent(this.$1_8);},disposeOnHide:function(){var $0=ss.Delegate.create(this,function(){
this.dispose();});this.add_hidden($0);this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_hidden($0);})));},confirm:function(){this.$1_A('confirm');},deny:function(){this.$1_A('deny');},cancel:function(){this.$1_A('cancel');},$1_A:function($p0){if(!this.$1_6){return;}this.$1_6=false;if(ss.isValue(this.$1_9)){this.$1_9($p0);}}}
tab.CategoricalFilterViewModel=function(filterModel){tab.CategoricalFilterViewModel.initializeBase(this);this.$1_0=filterModel;this.$1_0.add_filterUpdated(ss.Delegate.create(this,this.handleUpdateFilterContent));}
tab.CategoricalFilterViewModel.prototype={$1_0:null,get_filterType:function(){return this.$1_0.get_filterType();},get_categoricalFilterModel:function(){return this.$1_0;},get_mode:function(){return this.$1_0.get_mode();},get_pattern:function(){return this.$1_0.get_pattern();},get_isAllMode:function(){return this.$1_0.get_isAllMode();},get_allItemsAreChecked:function(){return this.$1_0.get_allItemsAreChecked();},get_noItemsAreChecked:function(){return this.$1_0.get_noItemsAreChecked();},get_exclude:function(){return this.$1_0.get_exclude();},get_isTiled:function(){return this.$1_0.get_isTiled();},get_isSearchable:function(){return this.$1_0.get_isSearchable();},get_summary:function(){return this.$1_0.get_summary();},get_underlyingDataSourceIsCube:function(){return this.$1_0.get_underlyingDataSourceIsCube();},get_condition:function(){return this.$1_0.get_condition();},get_limit:function(){return this.$1_0.get_limit();},get_rangeType:function(){return this.$1_0.get_rangeType();},get_catFilterTable:function(){return this.$1_0.get_catFilterTable();},get_domainActualSize:function(){return this.$1_0.get_domainActualSize();},get_tuples:function(){return this.$1_0.get_tuples();},handleUpdateFilterContent:function(){},dispose:function(){this.$1_0.remove_filterUpdated(ss.Delegate.create(this,this.handleUpdateFilterContent));this.$1_0=null;tab.CategoricalFilterViewModel.callBaseMethod(this, 'dispose');}}
tab.DownloadViewModel=function(toolbarViewModel){tab.DownloadViewModel.initializeBase(this);this.$1_0=toolbarViewModel;}
tab.DownloadViewModel.prototype={$1_0:null,get_viewType:function(){return tab.DownloadView;},get_viewModel:function(){return this;},get_toolbarIsBottom:function(){return this.$1_0.get_toolbarIsBottom();},get_shouldShowDownloadWorkbook:function(){return !tsConfig.is_mobile;},get_downloadWorkbookEnabled:function(){return !tsConfig.is_mobile&&((!tsConfig.previewMode&&!String.isNullOrEmpty(tsConfig.downloadURI))||tsConfig.is_metrics_view);},get_downloadAppUrl:function(){var $0=(ss.isValue(tabBootstrap.ViewerBootstrap.get_instance().location))?tabBootstrap.ViewerBootstrap.get_instance().location.toString():'';return 'http://publicrevizit.tableausoftware.com/s/download'+'?source=viz_toolbar&ref='+$0.split('?')[0];},get_shouldShowPdf:function(){return this.$1_2('print');},get_shouldShowImage:function(){return this.$1_2('exportimage');},get_exportDataEnabled:function(){return this.$1_2('exportdata');},get_exportCrosstabEnabled:function(){return this.$1_2('exportcrosstab');},disposeViewModel:function(){this.dispose();},downloadWorkbook:function(){tab.ToolbarServerCommands.downloadWorkbook();},exportImage:function(){var $0=new tab.ExportHelper();$0.setSheetScrollPositions(tab.Application.get_instance().get_client().get_viewControllers());tab.ToolbarServerCommands.exportImage($0);},exportData:function(){tab.ToolbarServerCommands.exportData();},exportCrosstab:function(){tab.ToolbarServerCommands.exportCrosstab();},exportPdf:function(){tab.ToolbarServerCommands.exportPdf(new tab.ExportHelper());},updateUberPopupViewModel:function(vm){},$1_2:function($p0){if(ss.isNullOrUndefined(this.$1_0.get_downloadableItems())){return false;}var $0=_.find(this.$1_0.get_downloadableItems(),function($p1_0){
return $p1_0.ajq===$p0;});if(ss.isNullOrUndefined($0)){return false;}var $enum1=ss.IEnumerator.getEnumerator($0.ajs);while($enum1.moveNext()){var $1=$enum1.current;if($1==='grayed'){return false;}}return true;}}
tab.ReferenceLineConstantValueEditorViewModel=function(){tab.ReferenceLineConstantValueEditorViewModel.initializeBase(this);}
tab.ReferenceLineConstantValueEditorViewModel.add_showReferenceLineConstantValueEditor=function(value){tab.ReferenceLineConstantValueEditorViewModel.$1_1=ss.Delegate.combine(tab.ReferenceLineConstantValueEditorViewModel.$1_1,value);}
tab.ReferenceLineConstantValueEditorViewModel.remove_showReferenceLineConstantValueEditor=function(value){tab.ReferenceLineConstantValueEditorViewModel.$1_1=ss.Delegate.remove(tab.ReferenceLineConstantValueEditorViewModel.$1_1,value);}
tab.ReferenceLineConstantValueEditorViewModel.constantLinePillDropped=function(referenceLinePresModel){if(ss.isValue(referenceLinePresModel)){var $0=new tab.ReferenceLineConstantValueEditorViewModel();$0.$1_0=referenceLinePresModel;tab.ReferenceLineConstantValueEditorViewModel.$1_1($0);}}
tab.ReferenceLineConstantValueEditorViewModel.prototype={$1_0:null,get_constantValue:function(){return this.$1_0.l2;},get_refLineId:function(){return this.$1_0.rq;}}
tab.StoryPointCaptionViewModel=function(flipboardNavigatorModel,storyPointIndex){tab.StoryPointCaptionViewModel.initializeBase(this);this.$1_0=flipboardNavigatorModel;this.$1_1=storyPointIndex;this.$1_0.add_newFlipboardNav(ss.Delegate.create(this,this.handleNewFlipboardNav));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_newFlipboardNav(ss.Delegate.create(this,this.handleNewFlipboardNav));})));}
tab.StoryPointCaptionViewModel.prototype={$1_0:null,$1_1:0,add_updatePoint:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_updatePoint:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,get_$1_3:function(){return this.$1_0.get_storyPoints()[this.$1_1];},get_isCurrentPoint:function(){return this.$1_1===this.$1_0.get_currentPointIndex();},get_isCaptured:function(){return this.get_$1_3().bz;},get_caption:function(){return this.get_$1_3().nd;},get_storyPointId:function(){return this.get_$1_3().abq;},get_storyPointIndex:function(){return this.$1_1;},get_isFirstPoint:function(){return !this.get_storyPointIndex();},get_isLastPoint:function(){return this.$1_1===this.$1_0.get_storyPoints().length-1;},get_storyPointStyle:function(){if(this.get_isCurrentPoint()){return this.get_selectedStoryPointStyle();}else{return this.get_unselectedStoryPointStyle();}},get_selectedStoryPointStyle:function(){return this.$1_0.get_flipboardNavPresModel().azg;},get_unselectedStoryPointStyle:function(){return this.$1_0.get_flipboardNavPresModel().azh;},handleNewFlipboardNav:function(){this.raiseActionEvent(this.$1_2);},clickStoryPoint:function(){var $0=$.DeferredData();if(this.get_isCurrentPoint()){$0.resolve(this);}else{var $1=ss.Delegate.create(this,function(){
$0.resolve(this);});var $2=function(){
$0.reject(arguments[0]);};var $3=tab.StoryClientCommands.setActiveStoryPoint(this.$1_1,this.$1_0);$3.then($1,$2);}return $0.promise();},revertStoryPoint:function(){var $0=$.DeferredData();if(this.get_isCaptured()){$0.resolve(this);}else{var $1=ss.Delegate.create(this,function(){
$0.resolve(this);});var $2=function(){
$0.reject(arguments[0]);};var $3=tab.StoryClientCommands.revertStoryPoint(tab.ModelUtils.findContentDashboard().get_sheetPath(),this.get_$1_3().abq);$3.then($1,$2);}return $0.promise();}}
tab.HierarchicalFilterViewModel=function(filterModel){tab.HierarchicalFilterViewModel.initializeBase(this);this.$1_0=filterModel;}
tab.HierarchicalFilterViewModel.prototype={$1_0:null,get_filterType:function(){return this.$1_0.get_filterType();},get_hierarchicalFilterModel:function(){return this.$1_0;},get_hierarchyTables:function(){return this.$1_0.get_hierarchyTables();},get_levels:function(){return this.$1_0.get_levels();},get_isSearchable:function(){return this.$1_0.get_isSearchable();}}
tab.QuantitativeFilterViewModel=function(filterModel){tab.QuantitativeFilterViewModel.initializeBase(this);this.$1_0=filterModel;}
tab.QuantitativeFilterViewModel.prototype={$1_0:null,get_filterType:function(){return this.$1_0.get_filterType();},get_quantitativeFilterModel:function(){return this.$1_0;},get_range:function(){return this.$1_0.get_range();},get_data:function(){return this.$1_0.get_data();},get_dateFormat:function(){return this.$1_0.get_dateFormat();},get_editingFormat:function(){return this.$1_0.get_editingFormat();},get_format:function(){return this.$1_0.get_format();},get_calendarControlStartOfWeek:function(){return this.$1_0.get_calendarControlStartOfWeek();},get_dataSourceStartOfWeek:function(){return this.$1_0.get_dataSourceStartOfWeek();},get_quantitativeFilterTable:function(){return this.$1_0.get_quantitativeFilterTable();},get_column:function(){return this.get_quantitativeFilterTable().column;},get_included:function(){return this.get_quantitativeFilterTable().included;},get_min:function(){return this.get_quantitativeFilterTable().min;},get_max:function(){return this.get_quantitativeFilterTable().max;}}
tab.RelativeDateFilterViewModel=function(filterModel){tab.RelativeDateFilterViewModel.initializeBase(this);this.$1_0=filterModel;}
tab.RelativeDateFilterViewModel.prototype={$1_0:null,get_filterType:function(){return this.$1_0.get_filterType();},get_relativeDateFilterModel:function(){return this.$1_0;},get_defaultFormat:function(){return this.$1_0.get_defaultFormat();},get_fiscalYearStart:function(){return this.$1_0.get_fiscalYearStart();},get_noTime:function(){return this.$1_0.get_noTime();},get_isRelativeDatePick:function(){return this.$1_0.get_isRelativeDatePick();},get_text:function(){return this.$1_0.get_text();},get_relativeDateTable:function(){return this.$1_0.get_relativeDateTable();},get_periodType:function(){return this.get_relativeDateTable().periodType;},get_rangeType:function(){return this.get_relativeDateTable().rangeType;},get_rangeN:function(){return this.get_relativeDateTable().rangeN;},get_anchor:function(){return (ss.isValue(this.get_relativeDateTable().anchor))?this.get_relativeDateTable().anchor:null;}}
tab.FlipboardNavigatorViewModel=function(flipboardNavigatorModel){this.$1_1=[];tab.FlipboardNavigatorViewModel.initializeBase(this);this.$1_0=flipboardNavigatorModel;this.$1_0.add_newFlipboardNav(ss.Delegate.create(this,this.handleNewFlipboardNav));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_newFlipboardNav(ss.Delegate.create(this,this.handleNewFlipboardNav));})));this.$1_0.get_zone().add_resizeZone(ss.Delegate.create(this,this.$1_6));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.get_zone().remove_resizeZone(ss.Delegate.create(this,this.$1_6));})));this.$1_8();}
tab.FlipboardNavigatorViewModel.prototype={$1_0:null,$1_2:false,add_resizeZone:function(value){this.$1_3=ss.Delegate.combine(this.$1_3,value);},remove_resizeZone:function(value){this.$1_3=ss.Delegate.remove(this.$1_3,value);},$1_3:null,add_updateActivePoint:function(value){this.$1_4=ss.Delegate.combine(this.$1_4,value);},remove_updateActivePoint:function(value){this.$1_4=ss.Delegate.remove(this.$1_4,value);},$1_4:null,add_remoteUpdateComplete:function(value){this.$1_5=ss.Delegate.combine(this.$1_5,value);},remove_remoteUpdateComplete:function(value){this.$1_5=ss.Delegate.remove(this.$1_5,value);},$1_5:null,get_currentPointIndex:function(){return this.$1_0.get_currentPointIndex();},get_numberOfPoints:function(){return this.$1_0.get_storyPoints().length;},get_storyPointHeight:function(){return this.$1_0.get_flipboardNavPresModel().azg.wc;},get_storyPointWidth:function(){return this.$1_0.get_flipboardNavPresModel().azg.wb;},get_previousDisabled:function(){return this.get_currentPointIndex()<=0;},get_nextDisabled:function(){return this.get_currentPointIndex()>=this.get_numberOfPoints()-1;},get_showArrows:function(){return this.$1_0.get_flipboardNavPresModel().b1;},get_captions:function(){return this.$1_1;},handleNewFlipboardNav:function(){if(ss.isValue(this.$1_4)){this.$1_4(this.get_currentPointIndex());}if(!this.$1_2){var $0=tab.CommandController.get();var $1=null;$1=ss.Delegate.create(this,function(){
$0.remove_postRemoteCommand($1);this.$1_2=false;this.raiseActionEvent(this.$1_5);});$0.add_postRemoteCommand($1);this.$1_2=true;}},$1_6:function(){this.raiseActionEvent(this.$1_3);},$1_7:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$1_1);while($enum1.moveNext()){var $0=$enum1.current;$0.dispose();}this.$1_1.clear();},$1_8:function(){for(var $0=0;$0<this.get_numberOfPoints();$0++){this.$1_1.add(new tab.StoryPointCaptionViewModel(this.$1_0,$0));}},clickNext:function(){var $0=$.DeferredData();if(this.get_nextDisabled()){$0.resolve(this.get_currentPointIndex());}else{this.$1_9($0,ss.Delegate.create(this,function(){
return tab.StoryClientCommands.nextStoryPoint(this.$1_0);}));}return $0.promise();},clickPrevious:function(){var $0=$.DeferredData();if(this.get_previousDisabled()){$0.resolve(this.get_currentPointIndex());}else{this.$1_9($0,ss.Delegate.create(this,function(){
return tab.StoryClientCommands.previousStoryPoint(this.$1_0);}));}return $0.promise();},dispose:function(){this.$1_7();tab.FlipboardNavigatorViewModel.callBaseMethod(this, 'dispose');},$1_9:function($p0,$p1){var $0=ss.Delegate.create(this,function(){
$p0.resolve(this.get_currentPointIndex());});var $1=function(){
$p0.reject(arguments[0]);};$p1().then($0,$1);}}
tab.FlipboardViewModel=function(flipboardModel,parentZone){tab.FlipboardViewModel.initializeBase(this);this.$1_0=flipboardModel;this.$1_1=parentZone;this.$1_0.add_invalidateZone(ss.Delegate.create(this,this.$1_6));this.$1_0.get_storyPointModel().add_newStoryPoint(ss.Delegate.create(this,this.$1_5));this.$1_0.get_storyPointModel().add_dashboardDisposal(ss.Delegate.create(this,this.$1_7));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_invalidateZone(ss.Delegate.create(this,this.$1_6));this.$1_0.get_storyPointModel().remove_newStoryPoint(ss.Delegate.create(this,this.$1_5));this.$1_0.get_storyPointModel().remove_dashboardDisposal(ss.Delegate.create(this,this.$1_7));})));if(ss.isValue(this.get_flipboardModel().get_dashboardModel())){this.$1_5();}}
tab.FlipboardViewModel.prototype={$1_0:null,$1_1:null,$1_2:null,add_newStoryPoint:function(value){this.$1_3=ss.Delegate.combine(this.$1_3,value);},remove_newStoryPoint:function(value){this.$1_3=ss.Delegate.remove(this.$1_3,value);},$1_3:null,get_flipboardModel:function(){return this.$1_0;},get_dashboardViewModel:function(){return this.$1_2;},get_$1_4:function(){return this.get_flipboardModel().get_dashboardModel().get_dashboardPresModel();},get_parentZone:function(){return this.$1_1;},$1_5:function(){this.$1_7();if(ss.isValue(this.get_$1_4())){this.$1_2=new tab.DashboardViewModel(this.get_flipboardModel().get_dashboardModel());this.raiseActionEvent(this.$1_3);}},$1_6:function(){this.$1_1.forceZoneValidState(false);},dispose:function(){this.$1_7();tab.FlipboardViewModel.callBaseMethod(this, 'dispose');},$1_7:function(){if(ss.isValue(this.get_dashboardViewModel())){this.$1_2.dispose();this.$1_2=null;}}}
tab.ParameterControlViewModel=function(parameterCtrlModel){tab.ParameterControlViewModel.initializeBase(this);this.$1_0=parameterCtrlModel;this.$1_0.add_newParameterCtrl(ss.Delegate.create(this,this.$1_3));this.$1_0.get_zoneModel().add_resizeZone(ss.Delegate.create(this,this.$1_4));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_newParameterCtrl(ss.Delegate.create(this,this.$1_3));})));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.get_zoneModel().remove_resizeZone(ss.Delegate.create(this,this.$1_4));})));}
tab.ParameterControlViewModel.prototype={$1_0:null,add_newParameterControl:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_newParameterControl:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,add_resized:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_resized:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,get_parameterCtrlModel:function(){return this.$1_0;},get_frame:function(){return this.$1_0.get_frame();},get_zone:function(){return this.$1_0.get_zone();},get_viewSession:function(){return tab.ModelUtils.getViewSession(this.get_zone().sr);},get_layoutSession:function(){return tab.CommandController.get().get_legacySession();},get_hasBorder:function(){return this.$1_0.get_zoneModel().get_hasBorder();},$1_3:function($p0){this.raiseActionEvent(this.$1_1);},$1_4:function(){this.raiseActionEvent(this.$1_2);}}
tab.QuickFilterDisplayViewModel=function(quickFilterDisplayModel,filterModel){tab.QuickFilterDisplayViewModel.initializeBase(this);this.$1_0=quickFilterDisplayModel;this.$1_0.add_quickFilterDisplayUpdated(ss.Delegate.create(this,this.handleUpdateQuickFilterDisplay));this.$1_0.get_zoneModel().add_resizeZone(ss.Delegate.create(this,this.$1_7));this.$1_1=filterModel;this.$1_1.add_filterUpdated(ss.Delegate.create(this,this.$1_8));this.$1_9();}
tab.QuickFilterDisplayViewModel.prototype={$1_0:null,$1_1:null,$1_2:true,$1_3:null,add_updateQuickFilterDisplay:function(value){this.$1_4=ss.Delegate.combine(this.$1_4,value);},remove_updateQuickFilterDisplay:function(value){this.$1_4=ss.Delegate.remove(this.$1_4,value);},$1_4:null,add_updateQuickFilterContent:function(value){this.$1_5=ss.Delegate.combine(this.$1_5,value);},remove_updateQuickFilterContent:function(value){this.$1_5=ss.Delegate.remove(this.$1_5,value);},$1_5:null,add_resized:function(value){this.$1_6=ss.Delegate.combine(this.$1_6,value);},remove_resized:function(value){this.$1_6=ss.Delegate.remove(this.$1_6,value);},$1_6:null,get_quickFilterDisplayModel:function(){return this.$1_0;},get_frame:function(){return this.$1_0.get_frame();},get_zone:function(){return this.$1_0.get_zone();},get_quickFilterDisplayPresModel:function(){return this.$1_0.get_quickFilterDisplayPresModel();},get_viewSession:function(){return tab.ModelUtils.getViewSession(this.get_zone().sr);},get_layoutSession:function(){return tab.CommandController.get().get_legacySession();},get_hasBorder:function(){return this.$1_0.get_zoneModel().get_hasBorder();},get_filterPresModel:function(){return this.$1_1.get_filterPresModel();},get_filterTypeViewModel:function(){return this.$1_3;},get_needToUpdate:function(){return this.$1_2;},set_needToUpdate:function(value){this.$1_2=value;return value;},get_visualId:function(){return tab.ModelUtils.getVisualId(this.get_zone().sr);},handleUpdateQuickFilterDisplay:function(presModel){this.$1_2=true;_.defer(ss.Delegate.create(this,function(){
this.raiseActionEvent(this.$1_4);}));},$1_7:function(){this.raiseActionEvent(this.$1_6);},$1_8:function(){this.$1_2=true;_.defer(ss.Delegate.create(this,function(){
this.raiseActionEvent(this.$1_5);}));},$1_9:function(){this.$1_A();switch(this.$1_1.get_filterType()){case 'Categorical':this.$1_3=new tab.CategoricalFilterViewModel(this.$1_1);break;case 'Hierarchical':this.$1_3=new tab.HierarchicalFilterViewModel(this.$1_1);break;case 'Quantitative':this.$1_3=new tab.QuantitativeFilterViewModel(this.$1_1);break;case 'RelativeDate':case 'RelativeDatePick':this.$1_3=new tab.RelativeDateFilterViewModel(this.$1_1);break;}},$1_A:function(){if(ss.isValue(this.$1_3)){this.$1_3.dispose();this.$1_3=null;}},dispose:function(){this.$1_0.remove_quickFilterDisplayUpdated(ss.Delegate.create(this,this.handleUpdateQuickFilterDisplay));this.$1_0.get_zoneModel().remove_resizeZone(ss.Delegate.create(this,this.$1_7));this.$1_0=null;this.$1_1.remove_filterUpdated(ss.Delegate.create(this,this.$1_8));this.$1_1=null;this.$1_A();tab.QuickFilterDisplayViewModel.callBaseMethod(this, 'dispose');}}
tab.ShareViewModel=function(toolbarViewModel){tab.ShareViewModel.initializeBase(this);this.$1_1=toolbarViewModel;this.$1_2=!this.get_$1_3();this.saveSharedView();}
tab.ShareViewModel.$1_8=function(){return (tsConfig.facebookRedirectURI||tab.ShareViewModel.$1_0);}
tab.ShareViewModel.$1_9=function($p0,$p1,$p2,$p3){var $0=($p1!==$p2);var $1=$p0;var $2=':'+$p3+'='+(($p1)?'yes':'no');var $3=new RegExp(':'+$p3+'=[^&]+');if(!!$1.match($3)){if($0){$1=$1.replace($3,$2);}else{$1=$1.replace($3,'');$1=$1.replace(new RegExp('&&'),'&');$1=$1.replace(new RegExp('\\?&'),'?');$1=$1.replace(new RegExp('&$'),'');$1=$1.replace(new RegExp('\\?$'),'');}}else{if($0){if(!!$1.match(new RegExp('[?]'))){$1=$1+'&'+$2;}else{$1=$1+'?'+$2;}}}return $1;}
tab.ShareViewModel.prototype={$1_1:null,$1_2:true,get_viewType:function(){return tab.ShareView;},get_viewModel:function(){return this;},get_toolbarIsBottom:function(){return this.$1_1.get_toolbarIsBottom();},get_allowSharingDifferentViews:function(){if(!tsConfig.isPublic||!tsConfig.statefulURL){return false;}if(this.get_$1_3()){return true;}return tab.ApplicationModel.get_instance().get_workbook().get_isCurrentDashboardModified();},get_shouldShareOriginalView:function(){return this.$1_2;},set_shouldShareOriginalView:function(value){this.$1_2=value;return value;},get_shouldShowSocialShareOptions:function(){return tsConfig.isPublic;},get_linkLabel:function(){return tab.Strings.ToolbarSendTitle;},get_embedLabel:function(){return tab.Strings.ToolbarEmbedTitle;},get_currentViewLabel:function(){return tab.Strings.ToolbarCurrentView;},get_originalViewLabel:function(){return tab.Strings.ToolbarOriginalView;},get_$1_3:function(){return !tab.MiscUtil.isNullOrEmpty(tsConfig.guid);},disposeViewModel:function(){this.dispose();},saveSharedView:function(){if(!this.get_allowSharingDifferentViews()){return;}tab.XhrUtil.guid=null;if(tsConfig.statefulURL){var $0=this.$1_5();if($0==='null'||$0==null){$0='';}tab.CommandController.get().get_legacySession().saveSharedView('',$0,function(){
});}},generateShareUrl:function(){var $0=tsConfig.requestURI;if(!this.get_shouldShareOriginalView()&&this.get_allowSharingDifferentViews()){var $1=tab.XhrUtil.guid;var $2=(tsConfig.single_frame)?window.location:window.parent.location;var $3=$2.protocol+'//'+$2.hostname+tab.ShareViewModel.currentViewPath;if(!tab.MiscUtil.isNullOrEmpty($1)){$0=$3+$1;}else if(!tab.MiscUtil.isNullOrEmpty(tsConfig.guid)){$0=$3+tsConfig.guid;}}$0=tab.ShareViewModel.$1_9($0,tsConfig.toolbarvis,tsConfig.toolbarvisDefault,'toolbar');$0=tab.ShareViewModel.$1_9($0,tabBootstrap.ViewerBootstrap.get_instance().shouldShowTabs(),tsConfig.showTabsDefault,'tabs');$0=tab.ShareViewModel.$1_9($0,tsConfig.isPublic&&tsConfig.showViewCount,tsConfig.showViewCountDefault,'display_count');$0=tab.ShareViewModel.$1_9($0,tab.MiscUtil.sanatizeBoolean(tsConfig.showVizHome),true,'showVizHome');return $0;},generateEmbedUrl:function(){var $0=(tsConfig.single_frame)?window.location:window.parent.location;var $1=tableau.format.escapeHTML;var $2=this.$1_5();var $3=tsConfig.embeddedTitle;var $4=this.$1_4();var $5=tabBootstrap.ViewerBootstrap.get_instance().location.search;var $6='/javascripts/api/viz_v1.js';var $7=tsConfig.repositoryUrl;var $8=tsConfig.site_root;var $9=this.$1_6();if($6.indexOf('http://')===-1&&$6.indexOf('https://')===-1){$6=$0.protocol+'//'+$0.host+$6;}var $A="width='"+$9.w+"' height='"+$9.h+"'";var $B="<script type='text/javascript' src='"+$6+"'></script>";var $C="<object class='tableauViz' "+$A+" style='display:none;'>";var $D=[];$D.add('embed');$D.add('preview');$D.add('show_tabs');$D.add('loadOrderID');$C+="<param name='host_url' value='"+$1(encodeURIComponent(($0.protocol+'//'+$0.host+'/')))+"' /> ";$D.add('host_url');if(!this.get_allowSharingDifferentViews()){$C+="<param name='site_root' value='"+$1($8)+"' />";$C+="<param name='name' value='"+$1($7)+"' />";$D.add('site_root');$D.add('name');$C+="<param name='tabs' value='"+((tabBootstrap.ViewerBootstrap.get_instance().shouldShowTabs())?'yes':'no')+"' />";$D.add('tabs');}else{var $12=this.generateShareUrl().split('?')[0];$C+="<param name='path' value='"+$1($12.replaceAll($0.protocol+'//'+$0.host+'/',''))+"' /> ";$D.add('path');}$C+="<param name='toolbar' value='"+((tsConfig.toolbarvis)?'yes':'no')+"' />";$D.add('toolbar');if(tsConfig.isPublic){if(!tab.MiscUtil.isNullOrEmpty($4)){var $13=$4.replaceAll('_rss.png','.png');$C+="<param name='static_image' value='"+$1($13)+"' /> ";}$C+="<param name='animate_transition' value='yes' />";$C+="<param name='display_static_image' value='yes' />";$C+="<param name='display_spinner' value='yes' />";$C+="<param name='display_overlay' value='yes' />";$C+="<param name='display_count' value='yes' />";$D.add('animate_transition');$D.add('display_static_image');$D.add('display_spinner');$D.add('display_overlay');$D.add('display_count');}if($5.length>0){var $14=$5.substr(1).split('&');for(var $15=0;$15<$14.length;$15++){var $16=$14[$15].match(new RegExp('^:([^=]+)=(.+)'));var $17;var $18;if(!!$16&&$16.length===3){$17=$16[1];$18=$16[2];}else{$17='filter';$18=$14[$15];}if(!tab.MiscUtil.isNullOrEmpty($17)&&!$D.contains($17)){$C+="<param name='"+$1($17)+"' value='"+$1($18)+"' />";}}}$C+='</object>';var $E=$2||'#';var $F='';if(!tab.MiscUtil.isNullOrEmpty($4)){$F="<noscript><a href='"+$1($E)+"'>"+"<img alt='"+$1($3)+" ' src='"+$1($4)+"' style='border: none' /></a></noscript>";}var $10=String.format("<div class='tableauPlaceholder' style='width: {0}px; height: {1}px;'>{2}{3}</div>",$9.w,$9.h,$F,$C);var $11=$B+$10;return $11;},updateUberPopupViewModel:function(vm){},doFacebookShareAction:function(){tab.Social.facebookPopup(tsConfig.facebookAppID,this.generateShareUrl(),this.$1_7(),tsConfig.shareDescription,tsConfig.facebookDescription,tab.ShareViewModel.$1_8());},doTwitterShareAction:function(){tab.Social.twitterPopup(this.generateShareUrl(),tsConfig.shareDescription);},$1_4:function(){var $0=tab.XhrUtil.guid;var $1=tsConfig.staticImage;if(!ss.isValue($1)){return '';}if(!this.get_shouldShareOriginalView()&&this.get_allowSharingDifferentViews()&&ss.isValue($0)){var $2=$1.indexOf('/images/')+8;var $3=$1.substr(0,$2);$1=$3+$0.substr(0,2)+'/'+$0+'/1_rss.png';}return $1;},$1_5:function(){if(!String.isNullOrEmpty(tsConfig.primaryContentUrl)){return tsConfig.primaryContentUrl;}if(window.self===window.top){return null;}var $0=tableau.util.parseUri(document.referrer);if(!ss.isValue($0)||(ss.isValue($0['hostname'])&&$0['hostname']===window.location.hostname)){return null;}return document.referrer;},$1_6:function(){var $0=tab.ApplicationModel.get_instance().get_workbook().get_outerDashboardPortSize().w;var $1=tab.ApplicationModel.get_instance().get_workbook().get_outerDashboardPortSize().h;$0+=4;$1+=4;if(tsConfig.isPublic){$1+=65;}else if(tsConfig.toolbarvis){$1+=32;}if(tabBootstrap.ViewerBootstrap.get_instance().shouldShowTabs()){$1+=26;}return tab.$create_Size($0,$1);},$1_7:function(){var $0=tab.XhrUtil.guid;if(!this.get_shouldShareOriginalView()&&this.get_allowSharingDifferentViews()&&ss.isValue($0)){var $1=this.$1_4();var $2=$1.split('/');$2[$2.length-1]='thumb.png';var $3=$2.join('/');$3+='?vizqlid='+tab.CommandController.get().get_legacySession().get_id();return $3;}return tsConfig.baseViewThumbLink;}}
tab.QuantitativeColorLegendViewModel=function(quantColorLegendModel,worksheetId,zoneVM){tab.QuantitativeColorLegendViewModel.initializeBase(this,[tab.ModelUtils.getVisualId(worksheetId),zoneVM]);this.$1_8=quantColorLegendModel;this.$1_8.add_legendChanged(ss.Delegate.create(this,this.$1_9));}
tab.QuantitativeColorLegendViewModel.prototype={$1_8:null,get_quantColorLegendModel:function(){return this.$1_8;},get_quantColorLegendPresModel:function(){return this.$1_8.get_quantColorLegendPresModel();},get_titleHtml:function(){return this.get_quantColorLegendPresModel().tm;},get_titleInline:function(){var $0=this.get_$1_4();if(!this.get_quantColorLegendPresModel().asg.df&&!$0.h&&$0.w>0){return true;}else{return this.get_quantColorLegendPresModel().asg.df;}},get_regionType:function(){return 'color';},get_rampColorSamplesAsColorModels:function(){var $0=new Array(0);var $1=this.get_quantColorLegendPresModel().agz;if(ss.isValue($1)){var $2=this.get_quantColorLegendPresModel().aa2/255;$0=new Array($1.length);for(var $3=0;$3<$1.length;++$3){$0[$3]=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode($1[$3]),$2).toString();}}return $0;},get_borderWidth:function(){var $0=this.get_quantColorLegendPresModel().ayq.abh;if(this.get_quantColorLegendPresModel().ayq.ak6==='bs-none'){$0=0;}return $0;},get_titleHeight:function(){return this.get_quantColorLegendPresModel().asg.aqh.wc;},get_titleWidth:function(){return this.get_quantColorLegendPresModel().asg.aqh.wb;},dispose:function(){this.$1_8.remove_legendChanged(ss.Delegate.create(this,this.$1_9));tab.QuantitativeColorLegendViewModel.callBaseMethod(this, 'dispose');},$1_9:function(){this.notifyPropertyChanged('ModelChanged');}}
tab.ImageZoneViewModel=function(imageZoneModel){tab.ImageZoneViewModel.initializeBase(this);this.$1_0=imageZoneModel;this.$1_0.add_newImageZone(ss.Delegate.create(this,this.handleNewImageZone));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_newImageZone(ss.Delegate.create(this,this.handleNewImageZone));})));}
tab.ImageZoneViewModel.prototype={$1_0:null,add_newImageZone:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_newImageZone:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,get_imageZoneModel:function(){return this.$1_0;},get_zonePresModel:function(){return this.$1_0.get_zone();},get_imageZonePresModel:function(){return this.$1_0.get_presModel();},get_imageUrl:function(){var $0=tab.CommandController.get().get_legacySession();var $1=$0.formatDashboardTempfileReference(this.get_imageZonePresModel().sq,true,false);return $1;},handleNewImageZone:function(){if(ss.isValue(this.$1_1)){this.$1_1();}}}
tab.LegendBaseViewModel=function(visualId,zoneVM){tab.LegendBaseViewModel.initializeBase(this);this.$1_0=visualId;this.$1_1=zoneVM;this.$1_1.add_propertyChanged(ss.Delegate.create(this,this.$1_6));this.$1_1.add_resizeZone(ss.Delegate.create(this,this.$1_7));this.$1_6(this.$1_1,new spiff.PropertyChangedEventArgs('newZoneParent'));}
tab.LegendBaseViewModel.prototype={$1_0:null,$1_1:null,$1_2:null,get_$1_3:function(){var $0=null;if(ss.isValue(this.$1_1)){$0=tab.$create_Size(this.$1_1.get_width(),this.$1_1.get_height());}return $0;},get_$1_4:function(){var $0=null;if(ss.isValue(this.$1_1)){$0=this.$1_1.get_titleSize();$0.h=Math.max(0,$0.h-(2*this.get_borderWidth()));$0.w=Math.max(0,$0.w-(2*this.get_borderWidth()));}else{$0=tab.$create_Size(0,0);}return $0;},get_$1_5:function(){return this.$1_1.get_zoneId();},get_visualModel:function(){if(ss.isNullOrUndefined(this.$1_2)){this.$1_2=tab.ModelUtils.getVisualModelFromVisualId(this.get_visualId());}return this.$1_2;},get_parentZoneVM:function(){return this.$1_1;},get_visualId:function(){return this.$1_0;},get_hasTitle:function(){return !!this.get_titleWidth()||!!this.get_titleHeight();},dispose:function(){if(ss.isValue(this.$1_1)){this.$1_1.remove_propertyChanged(ss.Delegate.create(this,this.$1_6));this.$1_1.remove_resizeZone(ss.Delegate.create(this,this.$1_7));}tab.LegendBaseViewModel.callBaseMethod(this, 'dispose');},$1_6:function($p0,$p1){this.notifyPropertyChanged($p1.get_propertyName());},$1_7:function(){this.notifyPropertyChanged('ParentZoneSizeChanged');}}
tab.ToolbarButtonViewModel=function(text,iconClass,command){tab.ToolbarButtonViewModel.initializeBase(this);this.$1_2=text;this.$1_3=iconClass;this.command=command;this.$1_5=ss.isValue(command);if(!tsConfig.is_mobile){this.disposables.add(spiff.EventUtil.bindWithDispose($(window),'resize',ss.Delegate.create(this,this.$1_C)));}}
tab.ToolbarButtonViewModel.shouldShowButton=function(itemWrapper){switch(itemWrapper.get_iconRes()){case 'share':return tsConfig.showShareOptions;default:return true;}}
tab.ToolbarButtonViewModel.createSeparator=function(){var $0=new tab.ToolbarButtonViewModel('-',null,null);$0.$1_6=true;return $0;}
tab.ToolbarButtonViewModel.createFromCommandItem=function(commandItem,iconClassPrefix,toolbarViewModel){var $0=tab.CommandItemWrapper.create(commandItem);tab.Param.verifyValue(commandItem,'commandItem');var $1=new tab.ToolbarButtonViewModel($0.get_name(),iconClassPrefix+$0.get_iconRes(),null);$1.command=tab.CommandSerializer.deserialize($0.get_command());$1.$1_5=ss.isNullOrUndefined($0.get_enabled())||$0.get_enabled();$1.flyoverVM=tab.ToolbarButtonViewModel.$1_10(commandItem,toolbarViewModel);return $1;}
tab.ToolbarButtonViewModel.$1_F=function($p0){return new spiff.UberPopupShowOptions($p0,spiff.UberPopupHorizontalAlign.right,spiff.UberPopupRelativeViewportEdge.right,spiff.UberPopupTheme.minimalist);}
tab.ToolbarButtonViewModel.$1_10=function($p0,$p1){var $0=tab.CommandItemWrapper.create($p0);tab.Param.verifyValue($p0,'commandItem');switch($0.get_iconRes()){case 'download':return new tab.DownloadViewModel($p1);case 'share':return new tab.ShareViewModel($p1);default:return null;}}
tab.ToolbarButtonViewModel.prototype={command:null,flyoverVM:null,$1_2:null,$1_3:null,$1_4:null,$1_5:false,$1_6:false,$1_7:false,$1_8:null,$1_9:null,add_flyoverShown:function(value){this.$1_A=ss.Delegate.combine(this.$1_A,value);},remove_flyoverShown:function(value){this.$1_A=ss.Delegate.remove(this.$1_A,value);},$1_A:null,add_flyoverHidden:function(value){this.$1_B=ss.Delegate.combine(this.$1_B,value);},remove_flyoverHidden:function(value){this.$1_B=ss.Delegate.remove(this.$1_B,value);},$1_B:null,get_buttonCommand:function(){return this.command;},get_flyoverViewModel:function(){return this.flyoverVM;},get_enabled:function(){return this.$1_5;},set_enabled:function(value){if(!this.$1_6&&this.$1_5!==value){this.$1_5=value;this.notifyPropertyChanged('enabled');}return value;},get_iconText:function(){return this.$1_4;},set_iconText:function(value){if(!this.$1_6&&!String.equals(this.$1_4,value,false)){this.$1_4=value;this.notifyPropertyChanged('iconText');}return value;},get_iconClass:function(){return this.$1_3;},set_iconClass:function(value){if(!this.$1_6&&!String.equals(this.$1_3,value,false)){this.$1_3=value;this.notifyPropertyChanged('iconClass');}return value;},get_isActive:function(){return this.$1_7;},set_isActive:function(value){if(!this.$1_6&&this.$1_7!==value){this.$1_7=value;this.notifyPropertyChanged('isActive');}return value;},get_text:function(){return this.$1_2;},set_text:function(value){if(!this.$1_6&&!String.equals(this.$1_2,value,false)){this.$1_2=value;this.notifyPropertyChanged('text');}return value;},get_isSeparator:function(){return this.$1_6;},dispose:function(){this.$1_E();tab.ToolbarButtonViewModel.callBaseMethod(this, 'dispose');},execute:function(){if(ss.isValue(this.command)){this.set_isActive(true);tab.ServerCommands.executeServerCommand(this.command,'immediately',ss.Delegate.create(this,function(){
this.set_isActive(false);}),ss.Delegate.create(this,function(){
this.set_isActive(false);}));}},showUberPopup:function(relativeElement){if(ss.isValue(this.flyoverVM)){this.$1_E();this.$1_8=spiff.UberPopupViewModel.createForContent(this.flyoverVM);if(ss.isValue(this.$1_A)){this.$1_8.add_shown(this.$1_A);}if(ss.isValue(this.$1_B)){this.$1_8.add_hidden(ss.Delegate.create(this,this.$1_D));}this.$1_9=relativeElement;this.$1_8.show(tab.ToolbarButtonViewModel.$1_F(relativeElement));}},$1_C:function($p0){if(ss.isValue(this.$1_8)&&ss.isValue(this.$1_9)){this.$1_8.show(tab.ToolbarButtonViewModel.$1_F(this.$1_9));}},$1_D:function(){this.$1_B();this.$1_E();this.$1_9=null;},$1_E:function(){if(ss.isValue(this.$1_8)){this.$1_8.remove_shown(this.$1_A);this.$1_8.remove_hidden(ss.Delegate.create(this,this.$1_D));this.$1_8.dispose();this.$1_8=null;}}}
tab.ToolbarViewModel=function(model){this.$1_4=[];this.$1_5=[];tab.ToolbarViewModel.initializeBase(this);this.$1_3=model;if(ss.isValue(this.$1_3.get_vizCommandItems())){this.$1_D();}this.$1_3.add_newToolbar(ss.Delegate.create(this,this.$1_D));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_3.remove_newToolbar(ss.Delegate.create(this,this.$1_D));})));tab.StartupUtils.callAfterBootstrap(ss.Delegate.create(this,function(){
tab.CommandController.get().get_legacySession().performPostLoadOperations(tsConfig.current_sheet_name,ss.Delegate.create(this,this.$1_B));}));}
tab.ToolbarViewModel.prototype={$1_3:null,$1_6:0,add_newToolbar:function(value){this.$1_7=ss.Delegate.combine(this.$1_7,value);},remove_newToolbar:function(value){this.$1_7=ss.Delegate.remove(this.$1_7,value);},$1_7:null,add_viewCountLoaded:function(value){this.$1_8=ss.Delegate.combine(this.$1_8,value);},remove_viewCountLoaded:function(value){this.$1_8=ss.Delegate.remove(this.$1_8,value);},$1_8:null,get_toolbarIsBottom:function(){return ((tsConfig.isPublic||tsConfig.embedded)&&!tsConfig.forceToolbarTop);},get_shouldShowPublicWatermarkItems:function(){return tsConfig.isPublic&&tsConfig.watermarkdisplay;},get_shouldShowAuthorByLine:function(){return tsConfig.isPublic&&tsConfig.show_byline;},get_shouldShowViewCount:function(){return tsConfig.isPublic&&tsConfig.showViewCount&&this.$1_6>tsConfig.viewCountThreshold;},get_publicLogoLink:function(){var $0=(ss.isValue(tabBootstrap.ViewerBootstrap.get_instance().location))?tabBootstrap.ViewerBootstrap.get_instance().location.toString():'';return tsConfig.watermarklink+'?ref='+$0.split('?')[0];},get_authorProfileLink:function(){var $0=window.location;var $1=String.format('{0}//{1}/profile/app/rdr/repo?workbook={2}',$0.protocol,$0.hostname,tsConfig.workbook_repo_url);return String.format('<a class="tab-toolbarAuthorByText" target="_blank" href="{0}">{1}</a>',tableau.format.escapeHTML($1),tableau.format.escapeHTML(tab.Strings.ToolbarMoreByAuthor));},get_viewCountText:function(){var $0=tableau.format.formatIntAuto(this.$1_6,'t',',','3:0');return tab.Strings.ToolbarViewCount($0);},get_downloadableItems:function(){return this.$1_3.get_downloadableItems();},get_vizItems:function(){return this.$1_4;},get_nonVizItems:function(){return this.$1_5;},dispose:function(){tab.ToolbarViewModel.callBaseMethod(this, 'dispose');this.$1_A();},$1_9:function($p0,$p1){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;var $1=tab.CommandItemWrapper.create($0);tab.Param.verifyValue($0,'commandItem');switch($1.get_commandsType()){case 'separator':$p1.add(tab.ToolbarButtonViewModel.createSeparator());break;case 'item':if(tab.ToolbarButtonViewModel.shouldShowButton($1)){this.$1_C($0,$p1);}break;}}},$1_A:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$1_4);while($enum1.moveNext()){var $0=$enum1.current;$0.dispose();}this.$1_4.clear();var $enum2=ss.IEnumerator.getEnumerator(this.$1_5);while($enum2.moveNext()){var $1=$enum2.current;$1.dispose();}this.$1_5.clear();},$1_B:function($p0){var $0=$p0;if(ss.isValue($0['viewCount'])){this.$1_6=parseInt($0['viewCount'],10);if(this.get_shouldShowViewCount()){this.raiseActionEvent(this.$1_8);}}},$1_C:function($p0,$p1){var $0=tab.ToolbarButtonViewModel.createFromCommandItem($p0,'tab-icon-',this);$p1.add($0);},$1_D:function(){this.$1_A();if(tsConfig.toolbarvis){this.$1_9(this.$1_3.get_vizCommandItems(),this.$1_4);}this.$1_9(this.$1_3.get_nonVizCommandItems(),this.$1_5);this.raiseActionEvent(this.$1_7);},revertWorksheet:function(){tab.ToolbarClientCommands.revert();}}
tab.WebZoneViewModel=function(webZoneModel){tab.WebZoneViewModel.initializeBase(this);this.$1_0=webZoneModel;this.$1_0.add_newWebZone(ss.Delegate.create(this,this.handleNewWebZone));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_newWebZone(ss.Delegate.create(this,this.handleNewWebZone));})));}
tab.WebZoneViewModel.prototype={$1_0:null,add_newWebZone:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_newWebZone:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,get_webZoneModel:function(){return this.$1_0;},handleNewWebZone:function(){this.$1_2();},$1_2:function(){if(ss.isValue(this.$1_1)){this.$1_1();}}}
tab.CategoricalLegendViewModel=function(catLegendModel,type,worksheetId,zoneVM){tab.CategoricalLegendViewModel.initializeBase(this,[tab.ModelUtils.getVisualId(worksheetId),zoneVM]);this.legendType=type;this.$1_B=catLegendModel;this.$1_B.add_legendChanged(ss.Delegate.create(this,this.$1_19));this.$1_B.add_legendNameChanged(ss.Delegate.create(this,this.$1_17));var $0=this.get_visualModel();$0.add_customShapesLoaded(ss.Delegate.create(this,this.$1_18));this.$1_D=$0.get_selectionsModel().getLegendSelection(this.get_legendTypeEnum(),this.get_$1_F());this.$1_D.add_newSelection(ss.Delegate.create(this,this.$1_1A));this.$1_E=$0.get_brushingsModel().getLegendSelection(this.get_legendTypeEnum(),this.get_$1_F());this.$1_E.add_newSelection(ss.Delegate.create(this,this.$1_1A));$0.get_selectionsModel().add_newSelections(ss.Delegate.create(this,this.$1_1A));this.$1_C=(this.legendType==='color')?tab.ColorModel.fromColorCode(this.get_$1_12().agl):this.get_$1_11();}
tab.CategoricalLegendViewModel.prototype={legendType:null,$1_B:null,$1_C:null,$1_D:null,$1_E:null,get_catLegendModel:function(){return this.$1_B;},get_legendTypeEnum:function(){switch(this.legendType){case 'color':return 'color';case 'shape':return 'shape';case 'size':return 'size';case 'map':return 'map';}return 'color';},get_categoricalLegendPM:function(){return this.$1_B.get_catLegendPresModel();},get_numLegendItems:function(){var $0=this.get_catLegendModel().get_items();return (ss.isNullOrUndefined($0))?0:$0.length;},get_titleInline:function(){var $0=this.get_$1_4();if(!this.get_categoricalLegendPM().ar4.df&&!$0.h&&$0.w>0){return true;}else{return this.get_categoricalLegendPM().ar4.df;}},get_titleHtml:function(){return this.get_categoricalLegendPM().tm;},get_$1_F:function(){return this.get_catLegendModel().get_legendNames();},get_$1_10:function(){return (this.$1_C||new tab.ColorModel(255,255,255,1));},get_$1_11:function(){var $0=this.get_categoricalLegendPM().ayq;return (ss.isValue($0.agi))?tab.ColorModel.fromColorCode($0.agi):tab.CategoricalLegendViewModel.$1_8;},get_$1_12:function(){return this.$1_B.get_catLegendPresModel();},get_$1_13:function(){return this.$1_B.get_catLegendPresModel();},get_$1_14:function(){return this.$1_B.get_catLegendPresModel();},get_regionType:function(){var $0='color';switch(this.legendType){case 'color':$0='color';break;case 'size':$0='size';break;case 'shape':$0='shape';break;case 'map':$0='map';break;default:break;}return $0;},get_borderWidth:function(){var $0=this.get_categoricalLegendPM().ayq.abh;if(this.get_categoricalLegendPM().ayq.ak6==='bs-none'){$0=0;}return $0;},get_titleHeight:function(){return this.get_categoricalLegendPM().ar4.w0;},get_titleWidth:function(){return this.get_categoricalLegendPM().ar4.w1;},get_$1_15:function(){return this.get_catLegendModel().get_isHighlightEnabled();},get_$1_16:function(){return this.get_catLegendModel().get_isHighlightAllowed();},dispose:function(){tab.CategoricalLegendViewModel.callBaseMethod(this, 'dispose');this.get_visualModel().remove_customShapesLoaded(ss.Delegate.create(this,this.$1_18));this.$1_B.remove_legendChanged(ss.Delegate.create(this,this.$1_19));this.$1_B.remove_legendNameChanged(ss.Delegate.create(this,this.$1_17));this.$1_D.remove_newSelection(ss.Delegate.create(this,this.$1_1A));this.$1_E.remove_newSelection(ss.Delegate.create(this,this.$1_1A));this.get_visualModel().get_selectionsModel().remove_newSelections(ss.Delegate.create(this,this.$1_1A));},isGrayed:function(item){if(this.get_$1_15()){if(this.isSelected(item)){return false;}var $0=this.get_visualModel();if(ss.isNullOrUndefined($0)){return false;}if(this.get_catLegendModel().get_isOneWay()&&!this.hasSelection()){return false;}var $1=(ss.isValue(this.$1_D)&&!this.$1_D.get_isEmpty())||!this.get_visualModel().get_selectionsModel().get_nodeSelection().get_isEmpty()||!this.get_visualModel().get_selectionsModel().get_tupleSelection().get_isEmpty();var $2=ss.isValue(this.$1_E)&&!this.$1_E.get_isEmpty();return ($1||$2)&&!this.isBrushed(item);}return false;},hasSelection:function(){return !this.$1_D.get_isEmpty();},isSelected:function(item){return this.$1_D.isLegendItemSelected(item);},isBrushed:function(item){return this.$1_E.isLegendItemSelected(item);},toggleHighlighting:function(){tab.SelectionClientCommands.toggleLegendHighlight(this.get_$1_5(),this.get_visualId(),this.get_regionType(),this.get_$1_F(),null);},selectItem:function(item,action){var $0=[];$0.add(item);tab.SelectionClientCommands.selectLegendItemsLocal(this.get_$1_5(),action,$0,this.get_visualId(),this.get_catLegendModel(),this.get_legendTypeEnum());},selectNone:function(action){var $0=[];tab.SelectionClientCommands.selectLegendItemsLocal(this.get_$1_5(),action,$0,this.get_visualId(),this.get_catLegendModel(),this.get_legendTypeEnum());},getLegendItem:function(itemIdx){var $0=this.get_catLegendModel().get_items();if(ss.isNullOrUndefined($0)||itemIdx<0||itemIdx>=$0.length){return null;}return $0[itemIdx];},$1_17:function(){this.$1_D.remove_newSelection(ss.Delegate.create(this,this.$1_1A));this.$1_D=this.get_visualModel().get_selectionsModel().getLegendSelection(this.get_legendTypeEnum(),this.get_$1_F());this.$1_D.add_newSelection(ss.Delegate.create(this,this.$1_1A));this.$1_E.remove_newSelection(ss.Delegate.create(this,this.$1_1A));this.$1_E=this.get_visualModel().get_brushingsModel().getLegendSelection(this.get_legendTypeEnum(),this.get_$1_F());this.$1_E.add_newSelection(ss.Delegate.create(this,this.$1_1A));},$1_18:function(){this.notifyPropertyChanged('CustomShapesLoaded');},$1_19:function(){this.notifyPropertyChanged(null);},$1_1A:function(){this.notifyPropertyChanged('Items');}}
tab.TextRegionViewModel=function(textRegionModel){tab.TextRegionViewModel.initializeBase(this);this.$1_0=textRegionModel;this.$1_0.add_newText(ss.Delegate.create(this,this.handleNewTextRegion));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_newText(ss.Delegate.create(this,this.handleNewTextRegion));})));}
tab.TextRegionViewModel.prototype={$1_0:null,add_newTextRegion:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_newTextRegion:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,get_hAlign:function(){return this.$1_0.get_hAlign();},get_html:function(){return this.$1_0.get_html();},get_orientation:function(){return this.$1_0.get_orientation();},get_vAlign:function(){return this.$1_0.get_vAlign();},get_styledBox:function(){return this.$1_0.get_styledBox();},handleNewTextRegion:function(){this.$1_2();},hasPresModel:function(){return !ss.isNullOrUndefined(this.$1_0.get_presModel());},$1_2:function(){if(ss.isValue(this.$1_1)){this.$1_1();}}}
tab.PageViewModel=function(pageModel){tab.PageViewModel.initializeBase(this);this.$1_0=pageModel;this.$1_0.add_newPage(ss.Delegate.create(this,this.handleNewPage));this.$1_0.get_zoneModel().add_resizeZone(ss.Delegate.create(this,this.handleParentZoneResized));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_newPage(ss.Delegate.create(this,this.handleNewPage));})));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.get_zoneModel().remove_resizeZone(ss.Delegate.create(this,this.handleParentZoneResized));})));}
tab.PageViewModel.prototype={$1_0:null,add_newPage:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_newPage:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,add_resized:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_resized:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,get_pageModel:function(){return this.$1_0;},get_frame:function(){return this.$1_0.get_frame();},get_viewSession:function(){return tab.ModelUtils.getViewSession(this.get_pageModel().get_zone().sr);},get_layoutSession:function(){return tab.CommandController.get().get_legacySession();},get_visualId:function(){return tab.ModelUtils.getVisualId(this.get_pageModel().get_zone().sr);},get_historyTrailsEnabled:function(){return this.$1_0.get_pagePresModel().ao5.a;},get_isHistoryToggleInteractionDisabled:function(){return tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard();},get_showHistoryToggle:function(){var $0=this.$1_0.get_pagePresModel().ag;if(tsConfig.is_mobile&&this.get_isHistoryToggleInteractionDisabled()&&!this.get_historyTrailsEnabled()){$0=false;}return $0;},get_showHistoryToggleForPopup:function(){var $0=this.get_showHistoryToggle();if(this.get_isHistoryToggleInteractionDisabled()){$0=false;}return $0;},handleNewPage:function(presModel){this.raiseActionEvent(this.$1_1);},handleParentZoneResized:function(){this.raiseActionEvent(this.$1_2);}}
tab.LegacyLegendViewModel=function(legacyLegendModel,worksheetId,zoneVM){tab.LegacyLegendViewModel.initializeBase(this,[tab.ModelUtils.getVisualId(worksheetId),zoneVM]);this.$1_9=legacyLegendModel;this.$1_9.add_newLegacyLegend(ss.Delegate.create(this,this.handleNewLegacyLegend));this.get_visualModel().add_urlInfoCacheChange(ss.Delegate.create(this,this.$1_11));this.$1_A=zoneVM;this.$1_A.add_validStateChanged(ss.Delegate.create(this,this.handleZoneValidStateChanged));}
tab.LegacyLegendViewModel.prototype={$1_9:null,$1_A:null,add_newLegacyLegend:function(value){this.$1_B=ss.Delegate.combine(this.$1_B,value);},remove_newLegacyLegend:function(value){this.$1_B=ss.Delegate.remove(this.$1_B,value);},$1_B:null,add_validStateChanged:function(value){this.$1_C=ss.Delegate.combine(this.$1_C,value);},remove_validStateChanged:function(value){this.$1_C=ss.Delegate.remove(this.$1_C,value);},$1_C:null,get_presModel:function(){return this.$1_9.get_presModel();},get_viewId:function(){return tab.ModelUtils.findContentDashboard().getViewId(this.get_sheetName());},get_sessionId:function(){return tab.CommandController.get().get_legacySession().get_id();},get_sheetName:function(){return this.get_parentZoneVM().get_associatedSheet();},get_viewSession:function(){return tab.ModelUtils.getViewSession(this.get_sheetName());},get_$1_D:function(){return this.get_visualModel().get_cacheUrlInfo();},get_$1_E:function(){return this.get_parentZoneVM().get_valid();},get_titleHtml:function(){return this.get_presModel().tm;},get_titleInline:function(){var $0=this.get_$1_4();if(!this.get_presModel().df&&!$0.h&&$0.w>0){return true;}else{return this.get_presModel().df;}},get_regionType:function(){var $0='color';switch(this.get_presModel().ahx){case 'color':$0='color';break;case 'size':$0='size';break;case 'shape':$0='shape';break;case 'map':$0='map';break;default:break;}return $0;},get_borderWidth:function(){if(ss.isValue(this.get_parentZoneVM())){return this.get_parentZoneVM().get_model().borderWidth();}else{return 0;}},get_titleHeight:function(){return this.get_presModel().w0;},get_titleWidth:function(){return (this.get_presModel().by)?this.get_presModel().w1:this.get_$1_4().w;},handleZoneValidStateChanged:function(){this.$1_10();},dispose:function(){this.$1_9.remove_newLegacyLegend(ss.Delegate.create(this,this.handleNewLegacyLegend));this.get_visualModel().remove_urlInfoCacheChange(ss.Delegate.create(this,this.$1_11));this.$1_A.remove_validStateChanged(ss.Delegate.create(this,this.handleZoneValidStateChanged));tab.LegacyLegendViewModel.callBaseMethod(this, 'dispose');},handleNewLegacyLegend:function(){this.$1_F();},$1_F:function(){if(ss.isValue(this.$1_B)){this.$1_B();}},$1_10:function(){if(ss.isValue(this.$1_C)){this.$1_C();}},$1_11:function(){this.notifyPropertyChanged('urlCacheInfo');}}
tab.DashboardViewModel=function(dashboardModel){this.$1_0={};this.viewControllersBySheet={};this.viewControllersList=[];tab.DashboardViewModel.initializeBase(this);this.$1_1=dashboardModel;this.$1_1.get_zonesModel().add_newZone(ss.Delegate.create(this,this.$1_7));this.$1_1.add_newDashboard(ss.Delegate.create(this,this.$1_C));this.$1_1.add_activeZoneChanged(ss.Delegate.create(this,this.$1_14));this.get_layoutSession().add_stateChanged(ss.Delegate.create(this,this.$1_12));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_layoutSession().remove_stateChanged(ss.Delegate.create(this,this.$1_12));})));this.disposables.add(new tab.CallOnDispose(function(){
tab.StyleUtil.clearDefaultStyleSheet();}));this.$1_1.add_renderModeChanged(ss.Delegate.create(this,this.$1_D));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_1.remove_renderModeChanged(ss.Delegate.create(this,this.$1_D));})));this.$1_11();}
tab.DashboardViewModel.prototype={$1_1:null,$1_2:null,$1_3:false,add_newDashboard:function(value){this.$1_4=ss.Delegate.combine(this.$1_4,value);},remove_newDashboard:function(value){this.$1_4=ss.Delegate.remove(this.$1_4,value);},$1_4:null,add_newZone:function(value){this.$1_5=ss.Delegate.combine(this.$1_5,value);},remove_newZone:function(value){this.$1_5=ss.Delegate.remove(this.$1_5,value);},$1_5:null,add_vizRebuildStart:function(value){this.$1_6=ss.Delegate.combine(this.$1_6,value);},remove_vizRebuildStart:function(value){this.$1_6=ss.Delegate.remove(this.$1_6,value);},$1_6:null,get_dashboardModel:function(){return this.$1_1;},get_legacyMenus:function(){return this.$1_1.get_legacyMenus();},get_zoneViewModels:function(){return this.$1_0;},get_layoutSession:function(){return tab.CommandController.get().get_legacySession();},get_formats:function(){return this.$1_1.get_formats();},get_backgroundColor:function(){var $0='#FFFFFF';if(Object.keyExists(this.get_formats(),'backgroundColor')){$0=this.get_formats()['backgroundColor'];}return $0;},get_renderMode:function(){return this.$1_1.get_renderMode();},get_portSize:function(){return this.$1_2||this.$1_1.get_portSize();},set_portSize:function(value){this.$1_2=value;this.raiseActionEvent(this.$1_4);return value;},get_isDashboard:function(){return this.$1_1.get_isDashboard();},get_flipboardNavigatorViewModel:function(){return this.$1_A('flipboard-nav');},get_flipboardViewModel:function(){return this.$1_A('flipboard');},get_handlingRenderModeChange:function(){return this.$1_3;},dispose:function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1_0));while($enum1.moveNext()){var $0=$enum1.current;this.$1_0[$0].dispose();}Object.clearKeys(this.$1_0);var $enum2=ss.IEnumerator.getEnumerator(this.viewControllersList);while($enum2.moveNext()){var $1=$enum2.current;$1.get_viewSession().remove_sheetDataChanged(ss.Delegate.create(this,this.$1_13));$1.dispose();}this.viewControllersList.clear();Object.clearKeys(this.viewControllersBySheet);this.$1_1.get_zonesModel().remove_newZone(ss.Delegate.create(this,this.$1_7));this.$1_1.remove_newDashboard(ss.Delegate.create(this,this.$1_C));this.$1_1.remove_activeZoneChanged(ss.Delegate.create(this,this.$1_14));tab.DashboardViewModel.callBaseMethod(this, 'dispose');},$1_7:function($p0){if(Object.keyExists(this.$1_0,$p0.get_zoneId())){this.$1_10($p0.get_zoneId());}var $0;if($p0.get_zoneType()==='viz'){$0=this.$1_8($p0);}else{$0=this.$1_9($p0);}this.$1_B($0);},$1_8:function($p0){var $0;var $1=this.$1_15($p0.get_associatedSheet());$1.get_viewSession().add_sheetDataChanged(ss.Delegate.create(this,this.$1_13));$0=this.$1_9($p0);var $2=$0.get_zoneContentViewModel();$2.set_viewController($1);return $0;},$1_9:function($p0){var $0=new tab.ZoneViewModel($p0,$p0.get_dashboardModel());this.$1_0[$p0.get_zoneId()]=$0;return $0;},$1_A:function($p0){var $dict1=this.$1_0;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};if($0.value.get_zoneType()===$p0){return $0.value.get_zoneContentViewModel();}}return null;},$1_B:function($p0){if(ss.isValue(this.$1_5)){this.$1_5($p0);}},$1_C:function(){this.$1_E(ss.Delegate.create(this,function($p1_0){
return !this.$1_1.hasZone($p1_0.get_zoneId())||!this.$1_1.isValidSheet($p1_0.get_model());}));this.raiseActionEvent(this.$1_4);},$1_D:function(){if(this.get_dashboardModel()!==tab.ModelUtils.findContentDashboard()){return;}this.$1_3=true;try{this.raiseActionEvent(this.$1_6);this.$1_E(function($p1_0){
return $p1_0.get_zoneType()==='viz';});}finally{this.$1_3=false;}},$1_E:function($p0){var $0=[];var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1_0));while($enum1.moveNext()){var $1=$enum1.current;var $2=this.$1_0[$1];if($p0($2)){$0.add($1);}}this.$1_F($0);this.$1_11();},$1_F:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;this.$1_10($0);}},$1_10:function($p0){var $0=this.$1_0[$p0];if(ss.isValue($0)){if($0.get_zoneType()==='viz'){var $1=this.viewControllersBySheet['v_'+$0.get_associatedSheet()];if(ss.isValue($1)){delete this.viewControllersBySheet['v_'+$0.get_associatedSheet()];this.viewControllersList.remove($1);$1.dispose();}}$0.dispose();delete this.$1_0[$p0];}},$1_11:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$1_1.get_zoneModels());while($enum1.moveNext()){var $0=$enum1.current;if(!Object.keyExists(this.$1_0,$0.get_zoneId())&&this.$1_1.isValidSheet($0)){this.$1_7($0);}}},$1_12:function($p0){dojo.publish(tab.EventMap.closeMenus);if(this.get_dashboardModel().get_autoUpdate()){tab.CommandController.get().refreshLayout();}else{this.get_dashboardModel().set_invalid(true);}},$1_13:function(){dojo.publish(tab.EventMap.closeMenus);if(this.get_dashboardModel().get_autoUpdate()){tab.CommandController.get().refreshLayout();}else{this.get_dashboardModel().set_invalid(true);}},$1_14:function(){if(tsConfig.isPublic){return;}if(!tab.ModelUtils.getSheetInfoPresModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name).aw){return;}var $0=this.$1_1.get_activeZoneID();var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1_0));while($enum1.moveNext()){var $1=$enum1.current;var $2=this.$1_0[$1];$2.set_$1_A($2.get_zoneId()===$0);}},$1_15:function($p0){var $0=new tab.ViewController($p0,this.get_dashboardModel().getViewSession($p0),Object.getKeyCount(this.viewControllersBySheet));this.viewControllersBySheet['v_'+$p0]=$0;this.viewControllersList.add($0);return $0;}}
tab.LogOnViewModel=function(){tab.LogOnViewModel.initializeBase(this);}
tab.LogOnViewModel.logOnAndTransitionSession=function(uriModel){var $0=new tab.LogOnViewModel();$0.showLogOn();var $1=function(){
$0.dispose();tab.SaveServerCommands.transitionSessionAfterLogon(function(){
tabBootstrap.ViewerBootstrap.get_instance().disableClearSessionOnBrowserUnload();uriModel.removeHash();tab.WindowHelper.setLocationHref(window.self,uriModel.get_absoluteUri());});};$0.add_logOnCompleted($1);var $2=function(){
$0.dispose();};$0.add_logOnCanceled($2);$0.disposables.add(new tab.CallOnDispose(function(){
$0.remove_logOnCompleted($1);$0.remove_logOnCanceled($2);}));}
tab.LogOnViewModel.prototype={add_shown:function(value){this.$1_0=ss.Delegate.combine(this.$1_0,value);},remove_shown:function(value){this.$1_0=ss.Delegate.remove(this.$1_0,value);},$1_0:null,add_hidden:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_hidden:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,add_logOnCanceled:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_logOnCanceled:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,add_logOnCompleted:function(value){this.$1_3=ss.Delegate.combine(this.$1_3,value);},remove_logOnCompleted:function(value){this.$1_3=ss.Delegate.remove(this.$1_3,value);},$1_3:null,get_logOnUrl:function(){return '/';},dispose:function(){this.$1_0=null;this.$1_1=null;this.$1_2=null;this.$1_3=null;tab.LogOnViewModel.callBaseMethod(this, 'dispose');},showLogOn:function(){spiff.ObjectRegistry.newView(tab.LogOnView,this);if(ss.isValue(this.$1_0)){this.$1_0();}},cancel:function(){if(ss.isValue(this.$1_1)){this.$1_1();}if(ss.isValue(this.$1_2)){this.$1_2();}},logOnComplete:function(){if(ss.isValue(this.$1_1)){this.$1_1();}if(ss.isValue(this.$1_3)){this.$1_3();}}}
tab.NotificationViewModel=function(){tab.NotificationViewModel.initializeBase(this);}
tab.NotificationViewModel.showNotification=function(message,timeout){var $0=new tab.NotificationViewModel();$0.set_message(message);if(ss.isValue(timeout)){$0.set_autoHideTimeout(timeout);}spiff.ObjectRegistry.newView(tab.NotificationView,$0);$0.disposeOnHide();$0.show();}
tab.NotificationViewModel.prototype={$1_0:null,$1_1:false,$1_2:5000,$1_3:0,add_shown:function(value){this.$1_4=ss.Delegate.combine(this.$1_4,value);},remove_shown:function(value){this.$1_4=ss.Delegate.remove(this.$1_4,value);},$1_4:null,add_hidden:function(value){this.$1_5=ss.Delegate.combine(this.$1_5,value);},remove_hidden:function(value){this.$1_5=ss.Delegate.remove(this.$1_5,value);},$1_5:null,get_message:function(){return this.$1_0;},set_message:function(value){this.$1_0=value;return value;},get_visible:function(){return this.$1_1;},get_autoHideTimeout:function(){return this.$1_2;},set_autoHideTimeout:function(value){this.$1_2=value;return value;},show:function(){if(this.$1_1){return;}this.$1_1=true;if(this.$1_2>0){this.$1_3=window.setTimeout(ss.Delegate.create(this,this.hide),this.$1_2);}this.raiseActionEvent(this.$1_4);},disposeOnHide:function(){this.add_hidden(ss.Delegate.create(this,this.dispose));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.remove_hidden(ss.Delegate.create(this,this.dispose));})));},hide:function(){if(!this.$1_1){return;}this.$1_1=false;window.clearTimeout(this.$1_3);this.raiseActionEvent(this.$1_5);}}
tab.PaneTableViewModel=function(model,sheetId){this.$1_0={};tab.PaneTableViewModel.initializeBase(this);this.$1_1=model;this.$1_2=sheetId;this.$1_6=[];this.$1_3=new tab.SceneInfo();if(ss.isValue(this.$1_1)){if(ss.isValue(this.$1_1.get_selectionsModel().get_tupleSelection())){this.$1_1.get_selectionsModel().add_newSelections(ss.Delegate.create(this,this.$1_F));}this.$1_1.get_impliedSelectionModel().add_newSelection(ss.Delegate.create(this,this.$1_F));if(ss.isValue(this.$1_1.get_brushingsModel().get_tupleSelection())){this.$1_1.get_brushingsModel().add_newSelections(ss.Delegate.create(this,this.$1_10));}if(ss.isValue(this.$1_1.get_sceneModel())){this.$1_1.get_sceneModel().add_newSceneModel(ss.Delegate.create(this,this.$1_17));this.$1_17();}if(ss.isValue(this.$1_1.get_labelsModel())){this.$1_1.get_labelsModel().add_newSceneModel(ss.Delegate.create(this,this.$1_17));}this.$1_1.add_newHiddenTuples(ss.Delegate.create(this,this.$1_13));this.$1_1.add_newFilteredTuples(ss.Delegate.create(this,this.$1_14));this.$1_1.add_brushingFromActionChanged(ss.Delegate.create(this,this.$1_12));this.$1_1.add_colorDictionaryChanged(ss.Delegate.create(this,this.$1_15));this.$1_1.add_newVisual(ss.Delegate.create(this,this.$1_18));this.$1_1.add_newVisual(ss.Delegate.create(this,this.$1_1B));this.$1_1.add_customShapesLoaded(ss.Delegate.create(this,this.$1_E));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
model.remove_newVisual(ss.Delegate.create(this,this.$1_1B));})));}this.$1_1A();}
tab.PaneTableViewModel.prototype={$1_1:null,$1_2:null,$1_3:null,$1_4:null,$1_5:null,$1_6:null,$1_7:false,$1_8:null,$1_9:null,$1_A:null,add_vizRegionMapChange:function(value){this.$1_B=ss.Delegate.combine(this.$1_B,value);},remove_vizRegionMapChange:function(value){this.$1_B=ss.Delegate.remove(this.$1_B,value);},$1_B:null,add_newPaneTable:function(value){this.$1_C=ss.Delegate.combine(this.$1_C,value);},remove_newPaneTable:function(value){this.$1_C=ss.Delegate.remove(this.$1_C,value);},$1_C:null,get_scene:function(){return this.$1_3;},get_vizRegionMap:function(){return this.$1_0;},get_refLineVisualLists:function(){return this.get_$1_D().get_refLineVisualLists();},get_trendLineVisualLists:function(){return this.get_$1_D().get_trendLineVisualLists();},get_drawFirstParts:function(){return this.get_$1_D().get_drawFirstParts();},get_drawLastParts:function(){return this.get_$1_D().get_drawLastParts();},get_zone:function(){return this.$1_1.get_zone();},get_zonePresModel:function(){return this.$1_1.get_zone().get_zonePresModel();},get_viewController:function(){return this.$1_5;},set_viewController:function(value){this.$1_5=value;return value;},get_sheetId:function(){return this.$1_2;},get_sortIndicators:function(){return this.$1_1.get_sortIndicatorsModel().get_sortIndicatorsPresModel();},get_selectionsModel:function(){return this.$1_1.get_selectionsModel();},get_cacheUrlInfo:function(){return this.$1_1.get_cacheUrlInfo();},get_hasTitle:function(){return this.get_zonePresModel().dw;},get_hasCaption:function(){return this.get_zonePresModel().dx;},get_visualModel:function(){return this.$1_1;},get_$1_D:function(){return this.$1_1.get_sceneModel();},get_visualId:function(){return this.$1_1.get_visualId();},get_mapServerModel:function(){return this.get_visualModel().get_mapServerModel();},get_mapsSearchViewModel:function(){return this.$1_4;},set_mapsSearchViewModel:function(value){this.$1_4=value;return value;},dispose:function(){if(ss.isValue(this.$1_4)){this.$1_4.dispose();}if(ss.isValue(this.$1_1)){if(ss.isValue(this.$1_1.get_selectionsModel().get_tupleSelection())){this.$1_1.get_selectionsModel().remove_newSelections(ss.Delegate.create(this,this.$1_F));}this.$1_1.get_impliedSelectionModel().remove_newSelection(ss.Delegate.create(this,this.$1_F));if(ss.isValue(this.$1_1.get_brushingsModel().get_tupleSelection())){this.$1_1.get_brushingsModel().remove_newSelections(ss.Delegate.create(this,this.$1_10));}if(ss.isValue(this.$1_1.get_sceneModel())){this.$1_1.get_sceneModel().remove_newSceneModel(ss.Delegate.create(this,this.$1_17));}if(ss.isValue(this.$1_1.get_labelsModel())){this.$1_1.get_labelsModel().remove_newSceneModel(ss.Delegate.create(this,this.$1_17));}this.$1_1.remove_newHiddenTuples(ss.Delegate.create(this,this.$1_13));this.$1_1.remove_newFilteredTuples(ss.Delegate.create(this,this.$1_14));this.$1_1.remove_brushingFromActionChanged(ss.Delegate.create(this,this.$1_12));this.$1_1.remove_colorDictionaryChanged(ss.Delegate.create(this,this.$1_15));this.$1_1.remove_newVisual(ss.Delegate.create(this,this.$1_18));this.$1_1.remove_customShapesLoaded(ss.Delegate.create(this,this.$1_E));}var $dict1=this.$1_0;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};$0.value.dispose();}tab.PaneTableViewModel.callBaseMethod(this, 'dispose');},getAndClearInvalidationRects:function(){var $0=this.$1_6;this.$1_6=[];return $0;},$1_E:function(){this.notifyPropertyChanged('images');},$1_F:function(){var $0=this.$1_1.get_selectionsModel().computeSelectionsDiff(this.$1_8,this.$1_9,this.$1_1.get_impliedSelectionModel());this.$1_8=this.$1_1.get_selectionsModel().createSelectionsToken();this.$1_9=this.$1_1.get_impliedSelectionModel().createSelectionToken();this.$1_11($0,'selection');},$1_10:function(){var $0=this.$1_1.get_brushingsModel().computeSelectionsDiff(this.$1_A,null,null);this.$1_A=this.$1_1.get_brushingsModel().createSelectionsToken();this.$1_11($0,'brushing');},$1_11:function($p0,$p1){if(!$p0.first){if(!$p0.second.length){return;}var $0=this.$1_3.$1B($p0.second);this.$1_16($0);}this.notifyPropertyChanged($p1);},$1_12:function(){this.$1_3.$26(this.$1_1.get_isBrushedFromAction());this.notifyPropertyChanged('brushing');},$1_13:function(){var $0=tab.SelectionsModel.computeTupleDictionaryDifference(this.$1_1.get_hiddenTuples(),this.$1_3.get_$12());if(!$0.length){return;}var $1=this.$1_3.$1B($0);this.$1_16($1);this.$1_3.set_$12(this.$1_1.get_hiddenTuples());this.notifyPropertyChanged('scene');},$1_14:function(){var $0=tab.SelectionsModel.computeTupleDictionaryDifference(this.$1_1.get_filteredTuples(),this.$1_3.get_$13());if(!$0.length){return;}var $1=this.$1_3.$1B($0);this.$1_16($1);this.$1_3.set_$13(this.$1_1.get_filteredTuples());this.notifyPropertyChanged('scene');},$1_15:function(){this.$1_7=true;},$1_16:function($p0){this.$1_6.addRange($p0);},$1_17:function(){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return;}var $0=false;var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.get_$1_D().get_visualListModels()));while($enum1.moveNext()){var $3=$enum1.current;if(Object.keyExists(this.$1_0,$3)){}else{tab.MiscUtil.dispose(this.$1_0[$3]);var $4=this.get_$1_D().get_visualListModels()[$3];if(tab.PaneTableViewModel.blackListVisualParts.contains($3)){this.$1_0[$3]=new tab.VisualListViewModel($4,this.get_visualId(),tab.ModelUtils.visualPartToRegionMap[$3],this.$1_1.get_selectionsModel(),this.$1_1.get_brushingsModel());}else{this.$1_0[$3]=new tab.VisualListViewModel($4,this.get_visualId(),tab.ModelUtils.visualPartToRegionMap[$3],null,null);}$0=true;}}var $1=Object.keys(this.$1_0);var $enum2=ss.IEnumerator.getEnumerator($1);while($enum2.moveNext()){var $5=$enum2.current;if(!Object.keyExists(this.get_$1_D().get_visualListModels(),$5)){tab.MiscUtil.dispose(this.$1_0[$5]);delete this.$1_0[$5];$0=true;}}var $2=this.get_$1_D().get_backgroundColor().toString();var $enum3=ss.IEnumerator.getEnumerator(Object.keys(this.$1_0));while($enum3.moveNext()){var $6=$enum3.current;this.$1_0[$6].set_defaultBackgroundColor($2);}if($0){this.$1_19();}this.$1_7=true;},$1_18:function(){if(this.$1_7){this.$1_1A();this.notifyPropertyChanged('scene');}this.$1_7=false;},$1_19:function(){if(ss.isValue(this.$1_B)){this.$1_B();}},$1_1A:function(){var $0=(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_visualPresModel()))?this.$1_1.get_visualPresModel().avn:null;var $1=(ss.isValue(this.get_$1_D()))?this.get_$1_D().get_presModel():null;var $2=(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_selectionsModel().get_tupleSelection()))?this.$1_1.get_selectionsModel():null;var $3=(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_impliedSelectionModel()))?this.$1_1.get_impliedSelectionModel():null;var $4=(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_brushingsModel().get_tupleSelection()))?this.$1_1.get_brushingsModel():null;var $5=(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_labelsModel()))?this.$1_1.get_labelsModel().get_presModel():null;var $6=(ss.isValue(this.$1_1))?this.$1_1.get_hiddenTuples():{};var $7=(ss.isValue(this.$1_1))?this.$1_1.get_filteredTuples():{};this.$1_3.$17($1,$2,$3,$4,$0,$6,$7);this.$1_3.$23($5);this.$1_3.$26(this.$1_1.get_isBrushedFromAction());if(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_visualPresModel())&&ss.isValue(this.$1_1.get_visualPresModel().avm)){this.$1_3.$1D(this.$1_1.get_visualPresModel().avm,ss.Delegate.create(this,function(){
this.$1_E();}));}},isInvalidSheet:function(){return _.any(this.$1_1.get_invalidSheets(),ss.Delegate.create(this,function($p1_0){
return _.isEqual(this.get_visualId(),$p1_0);}));},$1_1B:function(){this.raiseActionEvent(this.$1_C);},shouldEnableZoomHomeToolbar:function(){return this.get_visualModel().get_hasModifiedAxes();}}
tab.SubscribeViewModel=function(top){tab.SubscribeViewModel.initializeBase(this);this.top=top;tab.WorkgroupServerCommands.getSchedules(ss.Delegate.create(this,function($p1_0){
this.set_schedules($p1_0.filter(function($p2_0){
return $p2_0.get_action()===tab.Schedule.subscription;}));}));this.$1_3=tsConfig.current_user_email;}
tab.SubscribeViewModel.prototype={top:false,$1_0:false,$1_1:0,$1_2:null,$1_3:null,$1_4:null,$1_5:null,add_shown:function(value){this.$1_6=ss.Delegate.combine(this.$1_6,value);},remove_shown:function(value){this.$1_6=ss.Delegate.remove(this.$1_6,value);},$1_6:null,add_hidden:function(value){this.$1_7=ss.Delegate.combine(this.$1_7,value);},remove_hidden:function(value){this.$1_7=ss.Delegate.remove(this.$1_7,value);},$1_7:null,add_modeChange:function(value){this.$1_8=ss.Delegate.combine(this.$1_8,value);},remove_modeChange:function(value){this.$1_8=ss.Delegate.remove(this.$1_8,value);},$1_8:null,add_schedulesChanged:function(value){this.$1_9=ss.Delegate.combine(this.$1_9,value);},remove_schedulesChanged:function(value){this.$1_9=ss.Delegate.remove(this.$1_9,value);},$1_9:null,add_emailChanged:function(value){this.$1_A=ss.Delegate.combine(this.$1_A,value);},remove_emailChanged:function(value){this.$1_A=ss.Delegate.remove(this.$1_A,value);},$1_A:null,add_emailValidationChanged:function(value){this.$1_B=ss.Delegate.combine(this.$1_B,value);},remove_emailValidationChanged:function(value){this.$1_B=ss.Delegate.remove(this.$1_B,value);},$1_B:null,add_sheetSelectionChanged:function(value){this.$1_C=ss.Delegate.combine(this.$1_C,value);},remove_sheetSelectionChanged:function(value){this.$1_C=ss.Delegate.remove(this.$1_C,value);},$1_C:null,add_subjectValidationChanged:function(value){this.$1_D=ss.Delegate.combine(this.$1_D,value);},remove_subjectValidationChanged:function(value){this.$1_D=ss.Delegate.remove(this.$1_D,value);},$1_D:null,get_isTop:function(){return this.top;},get_mode:function(){return this.$1_1;},get_schedules:function(){return this.$1_2;},set_schedules:function(value){if(this.$1_2===value){return;}this.$1_2=value;if(ss.isValue(this.$1_9)){this.$1_9();}return value;},get_sheetSelectionIsWorkbook:function(){return this.$1_0;},set_sheetSelectionIsWorkbook:function(value){if(this.$1_0===value){return;}this.$1_0=value;if(ss.isValue(this.$1_C)){this.$1_C();}return value;},get_validSheets:function(){if(tsConfig.tabs_allowed){return ['SubscribeSheet','SubscribeWorkbook'];}else{return ['SubscribeSheet'];}},get_defaultSubject:function(){return tsConfig.current_sheet_name;},get_email:function(){return this.$1_3;},set_email:function(value){if(this.$1_3===value){return;}this.$1_3=value;if(ss.isValue(this.$1_A)){this.$1_A();}return value;},get_intermediateEmail:function(){return this.$1_4;},set_intermediateEmail:function(value){if(this.$1_4===value){return;}var $0=this.$1_4;this.$1_4=value;if(ss.isValue(this.$1_B)){if(this.$1_E($0)!==this.$1_E(this.$1_4)){this.$1_B();}}return value;},get_intermediateEmailValid:function(){return this.$1_E(this.get_intermediateEmail());},get_intermediateSubject:function(){return this.$1_5;},set_intermediateSubject:function(value){if(this.$1_5===value){return;}var $0=this.$1_5;this.$1_5=value;if(ss.isValue(this.$1_D)){if(this.$1_F($0)!==this.$1_F(this.$1_5)){this.$1_D();}}return value;},get_intermediateSubjectValid:function(){return this.$1_F(this.get_intermediateSubject());},show:function(){if(!this.$1_F(this.get_intermediateSubject())){this.$1_5=this.get_defaultSubject();}this.$1_1=(this.$1_E(this.$1_3))?tab.SubscribeViewModel.modeSubscribe:tab.SubscribeViewModel.modeEmail;if(ss.isValue(this.$1_6)){this.$1_6();}},hide:function(){if(ss.isValue(this.$1_7)){this.$1_7();}},startSubscribe:function(){this.$1_10(tab.SubscribeViewModel.modeSubscribe);},submitEmail:function(email,success,failure){var $0=ss.Delegate.create(this,function(){
this.set_email(email);success();});tab.WorkgroupServerCommands.setUserEmail(email,$0,failure);},createSubscription:function(subject,schedule,successMessage,failureMessage){var $0=function(){
tab.NotificationViewModel.showNotification(successMessage);};var $1=function(){
tab.NotificationViewModel.showNotification(failureMessage);};tab.WorkgroupServerCommands.createSubscription(subject,this.get_sheetSelectionIsWorkbook(),schedule,$0,$1);},$1_E:function($p0){var $0=new RegExp('^[^\\s"(),:;<>@[\\]]+@([-a-z0-9]+\\.)+[a-z0-9]{2,}$','i');return $0.test($p0);},$1_F:function($p0){return !String.isNullOrEmpty($.trim($p0));},$1_10:function($p0){if(this.$1_1!==$p0){this.$1_1=$p0;this.$1_8();}}}
tab.ViewingToolbarCommands=function(app){this.$1=app;}
tab.ViewingToolbarCommands.prototype={$1:null,$2:null,dispose:function(){if(ss.isValue(this.$2)){this.$2.dispose();this.$2=null;}},exportImage:function(){var $0=tableau.types.ExportDialogType['ExportImage'];var $1=[];var $2=[];if(this.$1.get_isDashboard()){var $3={};var $4=this.$1.get_viewControllers();if(ss.isValue($4)){$.each($4,function($p1_0,$p1_1){
var $1_0=$p1_1.get_viewWidget().get_scrollPosition();var $1_1=$1_0.x;var $1_2=$1_0.y;if(!!$1_1||!!$1_2){$3[$p1_1.get_sheetName()+'-x']=$1_1;$3[$p1_1.get_sheetName()+'-y']=$1_2;$2.add(tab.$create_Point($1_1,$1_2));$1.add($p1_1.get_sheetName());}});}}tab.ExportServerCommands.exportImage(tsConfig.current_sheet_name,$0,$1,$2);},exportData:function(sheetName){if(ss.isNullOrUndefined(sheetName)){sheetName=tab.ModelUtils.findActiveOrDefaultVisual().get_worksheetName();}var $0=tab.ModelUtils.findContentDashboard().getViewSession(sheetName);if(ss.isValue($0)){window.open($0.formatUnderlyingDataURL(null),$0.getWindow('vud'),'scrollbars,resizable');}},exportCrosstab:function(sheetName){if(ss.isNullOrUndefined(sheetName)){sheetName=tab.ModelUtils.findActiveOrDefaultVisual().get_worksheetName();}var $0=tab.ModelUtils.findContentDashboard().getViewSession(sheetName);if(ss.isValue($0)){var $1=tableau.types.ExportDialogType['ExportCrosstab'];$0.openDownload($0.formatExportCrossTabURL('utf16'),$1);}},exportPdf:function(){if(ss.isValue(this.$2)){this.$2.dispose();}this.$2=this.$1.$1_1D();this.$2.add_closed(ss.Delegate.create(this,function(){
this.$2.dispose();this.$2=null;}));this.$2.show();},$3:function($p0){this.$1.get_session().launchEditing($p0);},$4:function(){tab.WorksheetServerCommands.revert();},$5:function(){if(this.$1.get_autoUpdate()){this.$8();}},$6:function(){if(!this.$1.get_autoUpdate()){this.$8();}},$7:function(){return this.$1.get_autoUpdate();},$8:function(){this.$1.set_autoUpdate(!this.$1.get_autoUpdate());if(ss.isValue(this.$1.get_toolbar())&&tsConfig.toolbarvis){this.$1.get_toolbar().setAutoUpdate(this.$1.get_autoUpdate());}tab.ToolbarServerCommands.setAutoUpdate(this.$1.get_autoUpdate());tab.BaseSession.autoUpdate=this.$1.get_autoUpdate();if(this.$1.get_autoUpdate()&&this.$1.get_invalid()){tab.CommandController.get().refreshLayout();}},$9:function(){return (!tsConfig.previewMode&&!String.isNullOrEmpty(tsConfig.downloadURI))||tsConfig.is_metrics_view;},$A:function(){var $0;if(tsConfig.is_metrics_view){$0=this.$1.get_session().metricsViewDownloadUrl();}else{$0=this.$11(tsConfig.downloadURI);}window.open($0);},$B:function($p0){var $0;if(tsConfig.is_metrics_view){$0=this.$1.get_session().metricsViewDownloadUrl();}else{$0=this.$11($p0);}window.open($0);},$C:function(){tab.ToolbarServerCommands.refreshData();},$D:function(){this.$1.get_session().saveAndOpenMetricsView();},$E:function(){this.$1.showShareDialog();this.$1.saveSharedView('link');},$F:function(){},$10:function(){},$11:function($p0){if(ss.isValue($p0)){var $0=$p0.match(tab.ViewingToolbarCommands.$0);if(ss.isValue($0)&&$0.length>=2){return tabBootstrap.ViewerBootstrap.get_instance().location.protocol+'//'+tabBootstrap.ViewerBootstrap.get_instance().location.host+$0[1];}}return $p0;}}
tab.VisualListViewModel=function(visualListModel,visualId,regionPart,selModel,brushModel){tab.VisualListViewModel.initializeBase(this);this.$1_0=visualListModel;this.$1_1=visualId;this.$1_2=regionPart;this.$1_0.add_newVisualList(ss.Delegate.create(this,this.handleModelChange));if(ss.isValue(selModel)){this.$1_3=selModel.get_nodeSelection();this.$1_3.add_newSelection(ss.Delegate.create(this,this.$1_8));}if(ss.isValue(brushModel)){this.$1_4=brushModel.get_nodeSelection();this.$1_4.add_newSelection(ss.Delegate.create(this,this.$1_8));}if(ss.isValue(selModel)||ss.isValue(brushModel)){this.$1_8();}}
tab.VisualListViewModel.prototype={$1_0:null,$1_1:null,$1_2:null,$1_3:null,$1_4:null,$1_5:null,$1_6:null,$1_7:null,get_groupItemNodes:function(){return this.$1_0.get_groupItemNodes();},get_visualListPM:function(){return this.$1_0.get_visualListPresModel();},get_defaultBackgroundColor:function(){return this.$1_5;},set_defaultBackgroundColor:function(value){this.$1_5=value;return value;},get_hoverNode:function(){return this.$1_6;},set_hoverNode:function(value){if(this.$1_6!==value){this.$1_7=this.$1_6;this.$1_6=value;this.notifyPropertyChanged('HoverNode');}return value;},dirtyRect:function(offset){var $0=tab.$create_RectXY(0,0,0,0);var $1=[this.$1_7,this.$1_6];var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;if($2!=null){var $3=tab.$create_RectXY($2.yk,$2.yl,$2.ym,$2.yn);$0=tab.RectXYUtil.union($0,$3);}}return tab.RectXYUtil.offsetRect($0,offset);},isHovered:function(node){return node===this.$1_6;},isSelected:function(node){return ss.isValue(this.$1_3)&&this.$1_3.isNodeSelected(node);},isBrushed:function(node){return ss.isValue(this.$1_4)&&this.$1_4.isNodeSelected(node);},selectNode:function(coords,selectedNode,action,tooltipCallback){tab.SelectionClientCommands.selectNode(this.$1_2,coords,action,this.$1_0,selectedNode,this.$1_1,tooltipCallback);},handleModelChange:function(){this.notifyPropertyChanged('visualList');},$1_8:function(){this.notifyPropertyChanged('selection');},dispose:function(){this.$1_0.remove_newVisualList(ss.Delegate.create(this,this.handleModelChange));if(ss.isValue(this.$1_3)){this.$1_3.remove_newSelection(ss.Delegate.create(this,this.$1_8));}if(ss.isValue(this.$1_4)){this.$1_4.remove_newSelection(ss.Delegate.create(this,this.$1_8));}tab.VisualListViewModel.callBaseMethod(this, 'dispose');}}
tab.WorkbookViewModel=function(workbookModel){tab.WorkbookViewModel.initializeBase(this);this.$1_0=workbookModel;this.$1_0.addNewDashboardHandler(ss.Delegate.create(this,this.$1_4));this.$1_0.add_newWorkbook(ss.Delegate.create(this,this.$1_5));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_newWorkbook(ss.Delegate.create(this,this.$1_5));})));}
tab.WorkbookViewModel.prototype={$1_0:null,$1_1:null,add_newDashboard:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_newDashboard:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,add_newWorkbook:function(value){this.$1_3=ss.Delegate.combine(this.$1_3,value);},remove_newWorkbook:function(value){this.$1_3=ss.Delegate.remove(this.$1_3,value);},$1_3:null,get_dashboardViewModel:function(){return this.$1_1;},get_contentDashboardViewModel:function(){if(!this.$1_0.get_isCurrentSheetStoryboard()){return this.$1_1;}var $dict1=this.$1_1.get_zoneViewModels();for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};if($0.value.get_zoneType()==='flipboard'){return ($0.value.get_zoneContentViewModel()).get_dashboardViewModel();}}return null;},get_dashboardContainerPosition:function(){var $0=tabBootstrap.ViewerBootstrap.get_instance().getWebClientContentSize();var $1=tabBootstrap.ViewerBootstrap.get_instance().get_tabsHeight();var $2=tab.$create_Rect(0,$1,$0.w,$0.h);if(!this.get_toolbarIsBottom()&&!tsConfig.is_authoring){$2.t+=tabBootstrap.ViewerBootstrap.get_instance().toolbarHeight;}return $2;},get_dashboardBackgroundColor:function(){return this.get_dashboardViewModel().get_backgroundColor();},get_toolbarIsBottom:function(){return ((tsConfig.isPublic||tsConfig.embedded)&&!tsConfig.forceToolbarTop);},dispose:function(){if(ss.isValue(this.$1_1)){this.$1_1.dispose();}this.$1_0.remove_newDashboard(ss.Delegate.create(this,this.$1_4));tab.WorkbookViewModel.callBaseMethod(this, 'dispose');},$1_4:function($p0){if(ss.isValue(this.$1_1)){this.$1_1.dispose();}this.$1_1=new tab.DashboardViewModel($p0);this.raiseActionEvent(this.$1_2);},$1_5:function(){this.raiseActionEvent(this.$1_3);}}
tab.ZoneViewModel=function(zoneModel,dashboardModel){tab.ZoneViewModel.initializeBase(this);this.$1_4=true;this.$1_0=zoneModel;this.$1_1=dashboardModel;this.$1_0.add_updateZone(ss.Delegate.create(this,this.$1_C));this.$1_0.add_resizeZone(ss.Delegate.create(this,this.$1_D));this.$1_0.add_newZoneContent(ss.Delegate.create(this,this.$1_F));this.$1_0.add_removeZoneContent(ss.Delegate.create(this,this.$1_10));this.$1_B();this.$1_E();if(ss.isValue(zoneModel)&&ss.isValue(zoneModel.get_model())){this.$1_F(zoneModel.get_model());}}
tab.ZoneViewModel.calculateZoneZIndex=function(zone){return 10+zone.get_relativeZoneZIndex();}
tab.ZoneViewModel.prototype={$1_0:null,$1_1:null,$1_2:null,$1_3:null,$1_4:false,$1_5:false,add_updateZone:function(value){this.$1_6=ss.Delegate.combine(this.$1_6,value);},remove_updateZone:function(value){this.$1_6=ss.Delegate.remove(this.$1_6,value);},$1_6:null,add_resizeZone:function(value){this.$1_7=ss.Delegate.combine(this.$1_7,value);},remove_resizeZone:function(value){this.$1_7=ss.Delegate.remove(this.$1_7,value);},$1_7:null,add_newZoneContent:function(value){this.$1_8=ss.Delegate.combine(this.$1_8,value);},remove_newZoneContent:function(value){this.$1_8=ss.Delegate.remove(this.$1_8,value);},$1_8:null,add_validStateChanged:function(value){this.$1_9=ss.Delegate.combine(this.$1_9,value);},remove_validStateChanged:function(value){this.$1_9=ss.Delegate.remove(this.$1_9,value);},$1_9:null,get_zoneContentViewModel:function(){return this.$1_2;},get_zoneType:function(){return this.$1_0.get_zoneType();},get_height:function(){return (this.$1_0.get_height()-(2*this.$1_0.borderWidth()));},get_width:function(){return (this.$1_0.get_width()-(2*this.$1_0.borderWidth()));},get_x:function(){return this.$1_0.get_x();},get_y:function(){return this.$1_0.get_y();},get_model:function(){return this.$1_0;},get_titleSize:function(){return tab.$create_Size(this.$1_0.get_zonePresModel().w1,this.$1_0.get_zonePresModel().w0);},get_valid:function(){return this.$1_4;},get_zoneZIndex:function(){return tab.ZoneViewModel.calculateZoneZIndex(this.$1_0);},get_zoneId:function(){return this.$1_0.get_zoneId();},get_associatedSheet:function(){return this.$1_0.get_associatedSheet();},get_backgroundColor:function(){var $0;var $1=tab.FeatureParamsLookup.getBoolDefaultTrue(tab.FeatureParam.transparentBackground);if(ss.isValue($1)&&$1){$0=(this.$1_0.get_backgroundColor()||'rgba(0,0,0,0)');}else{if(ss.isValue(this.$1_0.get_backgroundColor())){$0=tab.ColorModel.alphaCompositeSolidDest(tab.ColorModel.fromColorCode(this.$1_0.get_backgroundColor()),tab.ColorModel.fromColorCode(this.$1_1.get_backgroundColor())).toRgb();}else{$0=this.$1_1.get_backgroundColor();}}if((this.get_zoneType()==='shape')||(this.get_zoneType()==='color')||(this.get_zoneType()==='size')||(this.get_zoneType()==='map')){if((!tab.ApplicationModel.get_instance().get_isLocalRenderMode())||(Type.canCast(this.$1_2,tab.LegacyLegendViewModel))){return (this.$1_0.get_backgroundColor()||$0);}}return $0;},get_$1_A:function(){return this.$1_5;},set_$1_A:function($p0){if(this.$1_5!==$p0){this.$1_5=$p0;this.notifyPropertyChanged('isActiveZone');}return $p0;},dispose:function(){if(ss.isValue(this.$1_2)){this.$1_2.dispose();this.$1_2=null;}if(ss.isValue(this.$1_3)){this.$1_3.remove_visualValidStateChanged(ss.Delegate.create(this,this.$1_E));}this.$1_0.remove_updateZone(ss.Delegate.create(this,this.$1_C));this.$1_0.remove_resizeZone(ss.Delegate.create(this,this.$1_D));this.$1_0.remove_newZoneContent(ss.Delegate.create(this,this.$1_F));this.$1_0.remove_removeZoneContent(ss.Delegate.create(this,this.$1_10));tab.ZoneViewModel.callBaseMethod(this, 'dispose');},$1_B:function(){var $0=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.$1_0.get_associatedSheet());if(this.$1_3!==$0){if(ss.isValue(this.$1_3)){this.$1_3.remove_visualValidStateChanged(ss.Delegate.create(this,this.$1_E));}this.$1_3=$0;if(ss.isValue(this.$1_3)){this.$1_3.add_visualValidStateChanged(ss.Delegate.create(this,this.$1_E));}}},$1_C:function(){this.$1_B();this.$1_E();this.raiseActionEvent(this.$1_6);},$1_D:function(){this.raiseActionEvent(this.$1_7);},$1_E:function(){var $0=true;if(this.$1_0.get_isDependentOnViz()&&ss.isValue(this.$1_3)){$0=this.$1_3.get_isVisualValid();}if($0!==this.$1_4){this.$1_4=$0;this.raiseActionEvent(this.$1_9);}},forceZoneValidState:function(forcedState){if(forcedState!==this.$1_4){this.$1_4=forcedState;this.raiseActionEvent(this.$1_9);}},$1_F:function($p0){var $0=this.$1_0.get_zoneType();var $1=this.$1_0.get_worksheetName();switch($0){case 'title':case 'text':this.$1_2=new tab.TextRegionViewModel($p0);break;case 'color':case 'size':case 'shape':case 'map':if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(Type.canCast($p0,tab.CategoricalLegendModel)){this.$1_2=new tab.CategoricalLegendViewModel($p0,$0,$1,this);}else if(Type.canCast($p0,tab.QuantitativeColorLegendModel)){this.$1_2=new tab.QuantitativeColorLegendViewModel($p0,$1,this);}}else{this.$1_2=new tab.LegacyLegendViewModel($p0,$1,this);}break;case 'current-page':this.$1_2=new tab.PageViewModel($p0);break;case 'web':this.$1_2=new tab.WebZoneViewModel($p0);break;case 'bitmap':this.$1_2=new tab.ImageZoneViewModel($p0);break;case 'flipboard-nav':this.$1_2=new tab.FlipboardNavigatorViewModel($p0);break;case 'flipboard':this.$1_2=new tab.FlipboardViewModel($p0,this);break;case 'filter':var $2=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$1);var $3=$p0;var $4=tab.ModelUtils.findMatchingFilterModel($2,$3);if(ss.isValue($4)){this.$1_2=new tab.QuickFilterDisplayViewModel($3,$4);}else{try{}catch($5){}return;}break;case 'paramctrl':this.$1_2=new tab.ParameterControlViewModel($p0);break;case 'viz':var $6=this.$1_0.get_associatedSheet();this.$1_2=new tab.PaneTableViewModel($p0,$6);break;case 'layout-basic':return;default:return;}this.$1_11(this.$1_2);},$1_10:function(){this.dispose();},$1_11:function($p0){if(ss.isValue(this.$1_8)){this.$1_8($p0);}}}
tab.ContinuousSliderViewModel=function(rangeModel){tab.ContinuousSliderViewModel.initializeBase(this);this.$1_2=rangeModel;this.$1_3=rangeModel.getCurrentFraction();this.$1_2.add_sliderFractionUpdated(ss.Delegate.create(this,this.$1_A));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_2.remove_sliderFractionUpdated(ss.Delegate.create(this,this.$1_A));})));this.$1_5=200;}
tab.ContinuousSliderViewModel.prototype={$1_2:null,$1_3:0,$1_4:0,$1_5:0,$1_6:0,$1_7:'',add_intermediateChange:function(value){this.$1_8=ss.Delegate.combine(this.$1_8,value);},remove_intermediateChange:function(value){this.$1_8=ss.Delegate.remove(this.$1_8,value);},$1_8:null,add_sliderValueChange:function(value){this.$1_9=ss.Delegate.combine(this.$1_9,value);},remove_sliderValueChange:function(value){this.$1_9=ss.Delegate.remove(this.$1_9,value);},$1_9:null,get_sliderClassName:function(){return this.$1_7;},set_sliderClassName:function(value){this.$1_7=value;return value;},get_pixelWidth:function(){return this.$1_5;},set_pixelWidth:function(value){this.$1_5=value;return value;},get_ruleTickCount:function(){return this.$1_6;},set_ruleTickCount:function(value){this.$1_6=value;return value;},get_currentFraction:function(){return this.$1_3;},set_currentFraction:function(value){var $0=Math.ceil(Math.log(1000)/Math.LN10);var $1=this.$1_3.toFixed($0);var $2=value.toFixed($0);if($1!==$2){this.$1_3=value;this.$1_9(this.$1_3);}return value;},get_sliderIntermediateValue:function(){return this.$1_4*1000;},get_sliderCurrentValue:function(){return this.get_currentFraction()*1000;},set_sliderCurrentValue:function(value){this.set_currentFraction(value/1000);return value;},get_sliderMinimumValue:function(){return 0;},get_sliderMaximumValue:function(){return 1000;},get_rangeModel:function(){return this.$1_2;},applyIntermediateChange:function(value){this.$1_4=value/1000;if(ss.isValue(this.$1_8)){this.$1_8(this.$1_4);}},$1_A:function($p0){this.set_currentFraction($p0);}}
tab.AccordionView=function(viewModel,t){this.$2_2=[];this.$2_3=[];tab.AccordionView.initializeBase(this,[viewModel,t]);this.$2_1=viewModel;this.t=t;this.update();}
tab.AccordionView.prototype={$2_1:null,t:null,dispose:function(){this.removeViews();tab.AccordionView.callBaseMethod(this, 'dispose');},onViewModelPropertyChanged:function(sender,e){tab.AccordionView.callBaseMethod(this, 'onViewModelPropertyChanged',[sender,e]);switch(e.get_propertyName()){case 'AllItems':this.update();break;case 'ActiveItem':this.$2_7(this.$2_1.get_activeItem());break;}},onAddedToDom:function(){tab.AccordionView.callBaseMethod(this, 'onAddedToDom');this.$2_4();},$2_4:function(){if(!this.get_addedToDom()){return;}this.$2_2.forEach(function($p1_0){
var $1_0=Type.safeCast($p1_0,spiff.Widget);if(ss.isValue($1_0)){$1_0.onAddedToDom();}});},removeViews:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$2_2);while($enum1.moveNext()){var $0=$enum1.current;$0.dispose();}this.$2_2.clear();this.t.itemsContainer.children().remove();this.$2_5();},$2_5:function(){this.$2_3.forEach(function($p1_0){
$p1_0.dispose();});this.$2_3.clear();},update:function(){this.removeViews();var $enum1=ss.IEnumerator.getEnumerator(this.$2_1.get_items());while($enum1.moveNext()){var $0=$enum1.current;var $1=tab.AccordionItemTemplate.createDefault();this.$2_3.add(spiff.TableauClickHandler.targetAndClick($1.header[0],this.$2_6($0)));$1.get_domRoot().data('tabAccordionItem',$0);$1.title.text($0.get_title());$1.title.attr('title',$0.get_title());if(ss.isValue($0.get_iconClass())){$1.icon.addClass($0.get_iconClass());}if(ss.isValue($0.get_iconClassTwo())){$1.iconTwo.addClass($0.get_iconClassTwo());}$1.content.hide();var $2=spiff.ObjectRegistry.newView($0.get_content().get_viewType(),$0.get_content().get_viewModel());this.$2_2.add($2);$1.content.append($2.get_element());this.t.itemsContainer.append($1.get_domRoot());spiff.DragDropManager.attachDropTarget($1.header,this.$2_1.createItemDropTarget($0));}if(ss.isValue(this.$2_1.get_activeItem())){this.$2_7(this.$2_1.get_activeItem());}this.$2_4();},$2_6:function($p0){return ss.Delegate.create(this,function(){
this.$2_1.set_activeItem($p0);});},$2_7:function($p0){var $0=this.t.get_domRoot().find('.tabAccordionActive').length>0;var $enum1=ss.IEnumerator.getEnumerator(this.t.get_allItems().get());while($enum1.moveNext()){var $1=$enum1.current;var $2=$($1);var $3=new tab.AccordionItemTemplate($2);var $4=$2.data('tabAccordionItem')===$p0;$3.get_domRoot().toggleClass('tabAccordionActive',$4);$3.get_domRoot().toggleClass('tabAccordionNotActive',!$4);if($4){if($0){$3.content.slideDown('fast');}else{$3.content.show();}}else if($3.content.is(':visible')){if($0){$3.content.slideUp('fast');}else{$3.content.hide();}}}}}
tab.AccordionTemplate=function(){tab.AccordionTemplate.initializeBase(this,[$("<div class='tabAccordion'><div class='tabAccordionItems'/></div>")]);this.itemsContainer=this.getElementBySelector('.tabAccordionItems');}
tab.AccordionTemplate.prototype={itemsContainer:null,get_allItems:function(){return this.getElementsBySelector('.tabAccordionItem');}}
tab.AccordionItemTemplate=function(root){tab.AccordionItemTemplate.initializeBase(this,[root]);this.title=this.getElementBySelector('.tabAccordionItemTitle');this.content=this.getElementBySelector('.tabAccordionItemContent');this.icon=this.getElementBySelector('.tabAccordionItemIcon');this.iconTwo=this.getElementBySelector('.tabAccordionItemIconTwo');this.header=this.getElementBySelector('.tabAccordionItemHeader');}
tab.AccordionItemTemplate.createDefault=function(){return new tab.AccordionItemTemplate($("<div class='tabAccordionItem'>\n        <div class='tabAccordionItemHeader'><span class='tabAccordionItemTitle'/><span class='tabAccordionItemIconTwo'/><div class='tabAccordionItemIcon'/></div>\n        <div class='tabAccordionItemContent'/>\n        </div>"));}
tab.AccordionItemTemplate.prototype={title:null,content:null,icon:null,iconTwo:null,header:null}
tab.AccordionViewModel=function(){this.$1_0=[];tab.AccordionViewModel.initializeBase(this);}
tab.AccordionViewModel.prototype={$1_1:null,$1_2:false,get_allowDragOverExpand:function(){return this.$1_2;},set_allowDragOverExpand:function(value){this.$1_2=value;return value;},get_items:function(){return this.$1_0;},get_activeItem:function(){return this.$1_1;},set_activeItem:function(value){if(this.$1_1===value){return;}if(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_content())){this.$1_1.get_content().set_active(false);}this.$1_1=value;if(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_content())){this.$1_1.get_content().set_active(true);}this.notifyPropertyChanged('ActiveItem');return value;},updateItems:function(newItems){this.$1_0.clear();this.$1_0.addRange(newItems);if(!this.$1_0.contains(this.$1_1)){this.set_activeItem(null);}this.notifyPropertyChanged('AllItems');},createItemDropTarget:function(item){if(this.get_allowDragOverExpand()){return new tab.vqlui$0(item,this);}return null;}}
tab.AccordionItem=function(title,iconClass,content){this.$0=title;this.$1=iconClass;this.$2=null;this.$3=content;}
tab.AccordionItem.prototype={$0:null,$1:null,$2:null,$3:null,get_title:function(){return this.$0;},set_title:function(value){this.$0=value;return value;},get_iconClass:function(){return this.$1;},set_iconClass:function(value){this.$1=value;return value;},get_iconClassTwo:function(){return this.$2;},set_iconClassTwo:function(value){this.$2=value;return value;},get_content:function(){return this.$3;},set_content:function(value){this.$3=value;return value;}}
tab.vqlui$0=function(item,viewModel){this.$0=item;this.$1=viewModel;}
tab.vqlui$0.prototype={$0:null,$1:null,$2:0,get_feedbackType:function(){return 'dropfeedbackuponentry';},dragOver:function($p0){this.$2=window.setTimeout(ss.Delegate.create(this,this.$3),800);return this;},acceptDrop:function($p0){var $0=$.DeferredData();$0.resolve(false);return $0;},getDropTarget:function($p0){return this;},dragExit:function($p0){window.clearTimeout(this.$2);},$3:function(){this.$1.set_activeItem(this.$0);}}
tab.DownloadView=function(viewModel){tab.DownloadView.initializeBase(this,[viewModel,new tab.DownloadTemplate()]);this.$2_7=viewModel;this.$2_8=window.innerWidth<715;if(this.$2_8){this.get_dom().downloadArea.addClass('tab-narrowDownloadView');}this.$2_E();}
tab.DownloadView.prototype={$2_7:null,$2_8:false,get_dom:function(){return this.get_template();},get_$2_9:function(){return (tsConfig.is_mobile)?tab.Strings.ToolbarPublicDownloadLabelMobile:tab.Strings.ToolbarPublicDownloadLabelWeb;},onAddedToDom:function(){tab.DownloadView.callBaseMethod(this, 'onAddedToDom');this.get_dom().downloadArea.find('.tabMenuItem.tabDisabled').prop('title',tab.Strings.ToolbarDisabledDownloadExplanation);},$2_A:function(){var $0=[];var $1=(this.$2_7.get_exportDataEnabled())?ss.Delegate.create(this.$2_7,this.$2_7.exportData):null;$0.add(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarExportData,$1,'tabDownloadData'));var $2=(this.$2_7.get_exportCrosstabEnabled())?ss.Delegate.create(this.$2_7,this.$2_7.exportCrosstab):null;$0.add(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarExportCrosstab,$2,'tabDownloadCrosstab'));if(this.$2_7.get_shouldShowImage()){$0.add(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarExportImage,ss.Delegate.create(this.$2_7,this.$2_7.exportImage),'tabDownloadImage'));}if(this.$2_7.get_shouldShowPdf()){$0.add(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarPrintToPdf,ss.Delegate.create(this.$2_7,this.$2_7.exportPdf),'tabDownloadPdf'));}if(this.$2_7.get_shouldShowDownloadWorkbook()){var $3=(this.$2_7.get_downloadWorkbookEnabled())?ss.Delegate.create(this.$2_7,this.$2_7.downloadWorkbook):null;$0.add(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarWorkbook,$3,'tabDownloadWorkbook'));}if(this.$2_8&&tsConfig.isPublic){$0.add(spiff.MenuItem.newActionItemWithItemClass(this.get_$2_9(),ss.Delegate.create(this,this.$2_C),'tabPublicApp'));}if(this.$2_7.get_toolbarIsBottom()){$0.reverse();}return $0;},$2_B:function(){if(tsConfig.isPublic){return new spiff.UnificationDarkMenuTheme();}else{return new spiff.UnificationLightMenuTheme();}},$2_C:function(){window.open(this.$2_7.get_downloadAppUrl());},$2_D:function(){this.get_dom().explanationTitle.append(tab.Strings.ToolbarPublicExplanationTitle);this.get_dom().explanationBody.append(tab.Strings.ToolbarPublicExplanationText);var $0='<span class=tabWindowsLogo />';var $1='<span class=tabAppleLogo />';this.get_dom().availablePlatforms.append(tab.Strings.ToolbarPublicAvailablePlatforms($0,$1));var $2=spiff.LabelButton.newTextButton();$2.set_label(this.get_$2_9());$2.add_click(ss.Delegate.create(this,this.$2_C));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
$2.remove_click(ss.Delegate.create(this,this.$2_C));})));this.get_dom().downloadAppButton.append($2.get_element());},$2_E:function(){var $0=new spiff.Menu(this.$2_A());var $1=spiff.MenuViewModel.createForMenu($0,null,this.$2_B());$1.add_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked);this.disposables.add(new tab.CallOnDispose(function(){
$1.remove_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked);}));var $2=spiff.ObjectRegistry.newView(spiff.MenuView,$1);this.get_dom().menuArea.append($2.get_element());if(!this.$2_8&&tsConfig.isPublic){this.$2_D();}}}
tab.DownloadTemplate=function(){tab.DownloadTemplate.initializeBase(this,[$(tab.DownloadTemplate.$1_0)]);this.downloadArea=this.get_domRoot();this.menuArea=this.getElementBySelector('.tab-downloadButtons');this.applicationArea=this.getElementBySelector('.tab-downloadApplication');this.explanationTitle=this.getElementBySelector('.tab-explanationTitle');this.explanationBody=this.getElementBySelector('.tab-explanationBody');this.actionArea=this.getElementBySelector('.tab-downloadAction');this.availablePlatforms=this.getElementBySelector('.tab-availablePlatforms');this.downloadAppButton=this.getElementBySelector('.tab-downloadAppButton');if(tsConfig.is_mobile){this.downloadArea.addClass('tab-mobileDownloadView');}}
tab.DownloadTemplate.prototype={downloadArea:null,menuArea:null,applicationArea:null,explanationTitle:null,explanationBody:null,actionArea:null,availablePlatforms:null,downloadAppButton:null}
tab.ReferenceLineConstantValueEditorView=function(viewModel,offsetPoint){tab.ReferenceLineConstantValueEditorView.initializeBase(this,[viewModel,new tab.vqlui$12()]);this.$2_7(offsetPoint);tab.CommandController.get().add_postRemoteCommand(ss.Delegate.create(this,this.dispose));}
tab.ReferenceLineConstantValueEditorView.prototype={$2_1:null,$2_2:null,get_$2_3:function(){return this.get_viewModel();},get_$2_4:function(){return this.get_template();},$2_5:function(){var $0=this.get_$2_4().$1_1.val();if($0!==this.get_$2_3().get_constantValue()){tab.PaneClientCommands.setReferenceLineConstantValue($0,this.get_$2_3().get_refLineId());}this.$2_8();},$2_6:function(){this.$2_5();},$2_7:function($p0){this.get_$2_4().$1_1.attr('tabindex','1');this.get_$2_4().$1_1.attr('value',this.get_$2_3().get_constantValue());this.$2_1=spiff.StyledTextButton.createPrimaryButton(ss.Delegate.create(this,this.$2_5),tab.Strings.DialogButtonOK,'refLineConstantValueEditorButton',spiff.ButtonSize.medium,2);this.$2_1.addToDom(this.get_element());this.disposables.add(this.$2_1);this.get_element().css({position:'absolute',top:($p0.y+13)+'px',left:($p0.x+11)+'px','text-align':'left'});this.disposables.add(spiff.EventUtil.bindWithDispose(this.get_element(),'keydown',ss.Delegate.create(this,this.$2_9)));},$2_8:function(){this.get_$2_3().dispose();},$2_9:function($p0){switch($p0.which){case 27:this.$2_8();break;case 108:case 13:this.$2_5();break;}},onAddedToDom:function(){this.get_$2_4().$1_1.focus();tab.DomUtil.selectAllInputText(this.get_$2_4().$1_1);this.$2_A();tab.ReferenceLineConstantValueEditorView.callBaseMethod(this, 'onAddedToDom');},$2_A:function(){if(ss.isNullOrUndefined(this.$2_2)){this.$2_2=new spiff.Glass();this.$2_2.set_zIndex(988);this.$2_2.add_click(ss.Delegate.create(this,this.$2_6));}this.$2_2.show();},$2_B:function(){if(ss.isValue(this.$2_2)){this.$2_2.remove_click(ss.Delegate.create(this,this.$2_6));this.$2_2.dispose();this.$2_2=null;}},dispose:function(){this.get_element().remove();this.$2_B();tab.CommandController.get().remove_postRemoteCommand(ss.Delegate.create(this,this.dispose));tab.ReferenceLineConstantValueEditorView.callBaseMethod(this, 'dispose');}}
tab.vqlui$12=function(){tab.vqlui$12.initializeBase(this,[$(tab.vqlui$12.$1_0)]);this.$1_1=this.getElementBySelector('.refLineConstantValueEditorInput');this.getElementBySelector('.refLineConstantValueEditorTitle').text(tab.Strings.RefLineEditorInputTitle);}
tab.vqlui$12.prototype={$1_1:null}
tab.ToolbarButtonView=function(viewModel){tab.ToolbarButtonView.initializeBase(this,[viewModel,new tab.ToolbarButtonTemplate()]);this.$2_1=viewModel;this.$2_1.add_flyoverShown(ss.Delegate.create(this,this.$2_7));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_1.remove_flyoverShown(ss.Delegate.create(this,this.$2_7));})));this.$2_1.add_flyoverHidden(ss.Delegate.create(this,this.$2_8));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_1.remove_flyoverHidden(ss.Delegate.create(this,this.$2_8));})));this.$2_3();this.$2_4();}
tab.ToolbarButtonView.create=function(viewModel){return new tab.ToolbarButtonView(viewModel);}
tab.ToolbarButtonView.prototype={$2_1:null,$2_2:null,get_dom:function(){return this.get_template();},get_toolbarButton:function(){return this.$2_2;},$2_3:function(){this.$2_2=new spiff.LabelButton(this.get_dom().get_domRoot(),'.tabToolbarButton');this.$2_2.add_click(ss.Delegate.create(this.$2_1,this.$2_1.execute));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_2.remove_click(ss.Delegate.create(this.$2_1,this.$2_1.execute));})));this.$2_2.add_click(ss.Delegate.create(this,this.$2_6));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_2.remove_enter(ss.Delegate.create(this,this.$2_6));})));this.setStateCss();this.get_dom().get_text().text(this.$2_1.get_text());if(ss.isValue(this.$2_1.get_iconText())){this.get_dom().get_image().text(this.$2_1.get_iconText());}},onViewModelPropertyChanged:function(sender,e){this.$2_4();},setStateCss:function(){this.$2_2.get_element().toggleClass('tabActive',this.$2_1.get_isActive());return this.get_dom().setImageClass((this.$2_1.get_isActive())?this.$2_1.get_iconClass()+'-active':this.$2_1.get_iconClass());},$2_4:function(){this.$2_2.set_disabled(!this.$2_1.get_enabled());this.setStateCss();if(!tab.BrowserSupport.get_displayInlineBlock()){this.$2_5();}},$2_5:function(){_.defer(ss.Delegate.create(this,function(){
var $1_0=this.get_dom().get_text().outerWidth(true);if($1_0>this.get_toolbarButton().get_element().innerWidth()){this.get_toolbarButton().get_element().width($1_0+6);}}));},$2_6:function(){this.$2_1.showUberPopup(this.$2_2.get_element());},$2_7:function($p0){this.$2_2.get_element().addClass('tabToolbarButtonFlyoverShown');},$2_8:function(){this.$2_2.get_element().removeClass('tabToolbarButtonFlyoverShown');}}
tab.ToolbarButtonTemplate=function(){tab.ToolbarButtonTemplate.initializeBase(this,[$(tab.ToolbarButtonTemplate.$1_1)]);this.$1_2=this.getElementBySelector('.'+'tabToolbarButtonImg');this.$1_3=this.getElementBySelector('.tabToolbarButtonText');}
tab.ToolbarButtonTemplate.prototype={$1_2:null,$1_3:null,get_image:function(){return this.$1_2;},get_text:function(){return this.$1_3;},setImageClass:function(className){this.get_image()[0].className='tabToolbarButtonImg'+' '+className;return 'tabToolbarButtonImg'+' '+className;}}
tab.WorkbookView=function(viewModel){tab.WorkbookView.initializeBase(this,[viewModel,new tab.WorkbookTemplate()]);this.$2_0=viewModel;this.$2_0.add_newDashboard(ss.Delegate.create(this,this.$2_2));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newDashboard(ss.Delegate.create(this,this.$2_2));})));this.$2_0.add_newWorkbook(ss.Delegate.create(this,this.$2_3));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newWorkbook(ss.Delegate.create(this,this.$2_3));})));}
tab.WorkbookView.prototype={$2_0:null,$2_1:null,get_dom:function(){return this.get_template();},get_containerNode:function(){return this.$2_1.get_dashboardNode();},get_dashboardView:function(){return this.$2_1;},onAddedToDom:function(){tab.WorkbookView.callBaseMethod(this, 'onAddedToDom');this.$2_3();this.$2_2();},$2_2:function(){if(ss.isValue(this.$2_0.get_dashboardViewModel())){this.$2_1=spiff.ObjectRegistry.newView(tab.DashboardView,this.$2_0.get_dashboardViewModel());this.$2_1.addToDom(this.get_dom().dashboardContainer);this._colorDashboardContainer();this.get_dom().dashboardContainer.css('visibility','visible');}},$2_3:function(){this._positionDashboardContainer();},_positionDashboardContainer:function(){var $0=this.$2_0.get_dashboardContainerPosition();this.get_dom().dashboardContainer.css('top',$0.t+'px');tab.DomUtil.setContentBox(this.get_dom().dashboardContainer.get(0),$0);},_colorDashboardContainer:function(){this.get_dom().dashboardContainer.css('background-color',this.$2_0.get_dashboardBackgroundColor());return;}}
tab.WorkbookTemplate=function(){tab.WorkbookTemplate.initializeBase(this,[$("<div class='tab-workbook'><div class='dashboardSpacer'/></div>")]);this.dashboardContainer=this.getElementBySelector('.dashboardSpacer');}
tab.WorkbookTemplate.prototype={dashboardContainer:null}
tab.BaseLegendView=function(viewModel,template){tab.BaseLegendView.initializeBase(this,[viewModel,template]);}
tab.BaseLegendView.prototype={$2_0:null,get_legendViewModel:function(){return this.get_viewModel();},get_baseLegendTemplate:function(){return this.get_template();},get_legendTooltip:function(){this.$2_3();return this.$2_0;},onAddedToDom:function(){tab.BaseLegendView.callBaseMethod(this, 'onAddedToDom');},dispose:function(){if(ss.isValue(this.$2_0)){this.$2_0.remove_ubertipCommandExecuted(ss.Delegate.create(this,this.$2_2));this.$2_0.dispose();}tab.BaseLegendView.callBaseMethod(this, 'dispose');},drawTitle:function(){if(this.get_legendViewModel().get_hasTitle()){this.get_baseLegendTemplate().titleArea.html(this.get_legendViewModel().get_titleHtml());tab.FormattingConverters.cleanUpFontFamilyStyles(this.get_baseLegendTemplate().titleArea);this.$2_1(this.get_legendViewModel().get_titleInline());tableau.util.setupTitleEllipsis(this.get_baseLegendTemplate().titleArea);}},$2_1:function($p0){var $0='';var $1='';if($p0){this.get_baseLegendTemplate().titleArea.width(this.get_legendViewModel().get_titleWidth());$0='inline-block';$1='top';}else{this.get_baseLegendTemplate().titleArea.width('');this.get_baseLegendTemplate().titleArea.height(this.get_legendViewModel().get_titleHeight());}this.get_baseLegendTemplate().titleArea.css('display',$0);this.get_baseLegendTemplate().titleArea.css('vertical-align',$1);if(ss.isValue(this.get_baseLegendTemplate().get_contentArea())){this.get_baseLegendTemplate().get_contentArea().css('display',$0);}},highlighterFitsUpperRight:function(){var $0=!this.get_legendViewModel().get_titleInline();if(this.get_legendViewModel().get_hasTitle()&&$0){return true;}return false;},$2_2:function($p0,$p1){tab.UberTipClientCommands.executeUbertipCommand($p1.command);},makeTooltip:function(){return spiff.ObjectRegistry.newLegacyTooltip(tab.TooltipBaseLegacyMode,null,this.get_legendViewModel().get_visualId());},$2_3:function(){if(ss.isNullOrUndefined(this.$2_0)){this.$2_0=this.makeTooltip();this.$2_0.add_ubertipCommandExecuted(ss.Delegate.create(this,this.$2_2));}}}
tab.LegendTemplate=function(template){tab.LegendTemplate.initializeBase(this,[template]);this.titleArea=this.getElementBySelector('.tabLegendTitle');}
tab.LegendTemplate.prototype={legendContentArea:null,titleArea:null,get_contentArea:function(){return this.legendContentArea;}}
tab.CanvasView=function(viewModel){tab.CanvasView.initializeBase(this,[viewModel,new tab.CanvasTemplate()]);this.canvasElt=(this.get_template()).canvasElt.get(0);this.scrollOffset=tab.$create_Point(0,0);this.$2_0=tab.$create_Point(0,0);this.$2_2=false;this.context=tab.CanvasRenderer.getRenderContext(this.canvasElt);this.$2_1=tab.RenderUtil.calculatePixelRatio();tab.CommandController.get().add_postBootstrap(ss.Delegate.create(this,this.$2_5));tab.CommandController.get().add_postLocalCommand(ss.Delegate.create(this,this.$2_5));tab.CommandController.get().add_postRemoteCommand(ss.Delegate.create(this,this.$2_5));}
tab.CanvasView.prototype={canvasElt:null,context:null,scrollOffset:null,$2_0:null,$2_1:0,$2_2:false,$2_3:null,$2_4:null,get_canScrollX:function(){return (this.get_docSize().w-this.get_effectiveViewSize().w)>0;},get_canScrollY:function(){return (this.get_docSize().h-this.get_effectiveViewSize().h)>0;},get_actualViewSize:function(){if(!ss.isValue(this.canvasElt)){return tab.$create_Size(0,0);}return tab.$create_Size(this.canvasElt.width,this.canvasElt.height);},set_actualViewSize:function(value){if(!ss.isValue(this.canvasElt)){return;}if(tab.CanvasUtil.isOverCanvasSizeLimit(value.w,value.h,this.get_pixelRatio())){this.$2_1=1;}if(this.get_effectiveViewSize().w!==value.w||this.get_effectiveViewSize().h!==value.h){this.$2_4=tab.$create_Size(value.w,value.h);tab.CanvasUtil.setCanvasSizeAndDensify(this.canvasElt,this.get_pixelRatio(),this.$2_4);this.invalidate(false);}return value;},get_effectiveViewSize:function(){if(ss.isValue(this.$2_4)){return this.$2_4;}else{return this.get_actualViewSize();}},get_pixelRatio:function(){return this.$2_1;},get_isContentOpaque:function(){return true;},get_needsRedraw:function(){return !tab.RectXYUtil.isEmpty(this.get_dirtyRect());},get_scrollPos:function(){return this.scrollOffset;},set_scrollPos:function(value){if(!tab.PointUtil.equals(this.scrollOffset,value)){var $0=tab.PointFUtil.timesScalar(value,this.$2_1);var $1=tab.PointFUtil.round($0);var $2=tab.PointUtil.subtract($1,this.$2_0);var $3=tab.PointUtil.subtract(value,this.scrollOffset);this.$2_0=$1;this.scrollOffset=value;if(!tab.RectXYUtil.isEmpty(this.get_dirtyRect())){var $4=tab.$create_Point(-$3.x,-$3.y);var $5=tab.RectXYUtil.offsetRect(this.get_dirtyRect(),$4);this.set_dirtyRect($5);}if((!!$3.x&&!!$3.y)||!this.get_isContentOpaque()){this.invalidate(true);}else{var $6=$2.x;var $7=$2.y;var $8=this.get_actualViewSize().w-Math.abs($6);var $9=($6>0)?$6:0;var $A=($6>0)?0:-$6;var $B=this.get_actualViewSize().h-Math.abs($7);var $C=($7>0)?$7:0;var $D=($7>0)?0:-$7;if($8<=0||$B<=0){this.invalidate(true);}else{this.context.reset();this.context.drawImage5(this.canvasElt,$9,$C,$8,$B,$A,$D,$8,$B);var $E=tab.$create_RectXY(0,0,this.get_effectiveViewSize().w,this.get_effectiveViewSize().h);if($3.x>0){$E.x=$E.w-$3.x;}else if($3.x<0){$E.w=-$3.x;}if($3.y>0){$E.y=$E.h-$3.y;}else if($3.y<0){$E.h=-$3.y;}if(!$3.x){$E.h=Math.abs($3.y);}if(!$3.y){$E.w=Math.abs($3.x);}$E=tab.RectXYUtil.dialate($E,3);this.invalidateRect($E,true);}}}return value;},get_dirtyRect:function(){return (ss.isValue(this.context))?this.context.get_dirtyRect():tab.$create_RectXY(0,0,0,0);},set_dirtyRect:function(value){if(ss.isValue(this.context)){this.context.set_dirtyRect(value);}return value;},dispose:function(){if(ss.isValue(this.$2_3)){tab.WindowHelper.cancelAnimationFrame(this.$2_3);var $0=tab.CommandController.get().get_legacySession().get_waitHandler();$0.release();this.$2_3=null;}tab.CommandController.get().remove_postBootstrap(ss.Delegate.create(this,this.$2_5));tab.CommandController.get().remove_postLocalCommand(ss.Delegate.create(this,this.$2_5));tab.CommandController.get().remove_postRemoteCommand(ss.Delegate.create(this,this.$2_5));tab.CanvasView.callBaseMethod(this, 'dispose');},clearDirty:function(){this.set_dirtyRect(tab.$create_RectXY(0,0,0,0));},invalidate:function(immediateRedraw){this.set_dirtyRect(tab.$create_RectXY(0,0,this.get_effectiveViewSize().w,this.get_effectiveViewSize().h));this.triggerRedraw(immediateRedraw);},invalidateRect:function(rect,immediateRedraw){var $0;if(tab.RectXYUtil.isEmpty(this.get_dirtyRect())){$0=$.extend(true,{},rect);}else{$0=tab.RectXYUtil.union(this.get_dirtyRect(),rect);}if($0.x<0){$0.x=0;}if(($0.x+$0.w)>this.get_effectiveViewSize().w){$0.w=this.get_effectiveViewSize().w-$0.x;}if($0.y<0){$0.y=0;}if(($0.y+$0.h)>this.get_effectiveViewSize().h){$0.h=this.get_effectiveViewSize().h-$0.y;}this.set_dirtyRect($0);this.triggerRedraw(immediateRedraw);},setXPos:function(xPos){this.set_scrollPos(tab.$create_Point(xPos,this.get_scrollPos().y));},setYPos:function(yPos){this.set_scrollPos(tab.$create_Point(this.get_scrollPos().x,yPos));},triggerRedraw:function(immediate){if(ss.isNullOrUndefined(immediate)){immediate=false;}var $0=tab.CommandController.get().get_legacySession().get_waitHandler();if(immediate){$0.addref(false);this.redraw();$0.release();if(ss.isValue(this.$2_3)){tab.WindowHelper.cancelAnimationFrame(this.$2_3);this.$2_3=null;$0.release();}this.$2_2=false;this.redrawFinished();}else if(!this.$2_2){$0.addref(false);this.$2_2=true;this.$2_3=tab.WindowHelper.requestAnimationFrame(ss.Delegate.create(this,function(){
this.$2_5();}));}},$2_5:function(){if(this.$2_2){this.triggerRedraw(true);}}}
tab.CanvasTemplate=function(){tab.CanvasTemplate.initializeBase(this,[$("<canvas class='tabCanvas'></canvas>")]);this.canvasElt=this.get_domRoot();}
tab.CanvasTemplate.prototype={canvasElt:null}
tab.ConfirmationView=function(viewModel){tab.ConfirmationView.initializeBase(this,[viewModel,spiff.Template.fromHtml("<div class='tabConfirmation'>")]);this.confirmViewModel=viewModel;this.confirmViewModel.add_shown(ss.Delegate.create(this,this.$2_7));this.confirmViewModel.add_hidden(ss.Delegate.create(this,this.$2_6));this.buildDom();}
tab.ConfirmationView.prototype={confirmViewModel:null,$2_0:null,$2_1:null,$2_2:null,dispose:function(){this.confirmViewModel.remove_shown(ss.Delegate.create(this,this.$2_7));this.confirmViewModel.remove_hidden(ss.Delegate.create(this,this.$2_6));this.$2_0.remove_closed(ss.Delegate.create(this,this.$2_3));this.$2_0.dispose();this.$2_0=null;tab.ConfirmationView.callBaseMethod(this, 'dispose');},buildDom:function(){this.get_element().append($('<div>').addClass('tabConfirmationMessage').html(this.confirmViewModel.get_messageHtml()));var $0=$('<div>').addClass('tabConfirmationButtons');this.get_element().append($0);if(this.confirmViewModel.get_showConfirmButton()){this.$2_2=spiff.StyledButton.createStyledButton(ss.Delegate.create(this,this.$2_4),this.confirmViewModel.get_confirmText(),'tabConfirmationConfirmButton',2);this.disposables.add(this.$2_2);$0.append(this.$2_2.get_element());}if(this.confirmViewModel.get_showDenyButton()){this.$2_1=spiff.StyledButton.createStyledButton(ss.Delegate.create(this,this.$2_5),this.confirmViewModel.get_denyText(),'tabConfirmationDenyButton',1);this.disposables.add(this.$2_1);$0.append(this.$2_1.get_element());}this.$2_0=new spiff.ModalDialog(this.confirmViewModel.get_titleText(),this.get_element());this.$2_0.add_closed(ss.Delegate.create(this,this.$2_3));},$2_3:function($p0,$p1){this.confirmViewModel.cancel();},$2_4:function(){this.confirmViewModel.confirm();},$2_5:function(){this.confirmViewModel.deny();},$2_6:function($p0){if(ss.isNullOrUndefined(this.$2_0)){return;}this.$2_0.close();},$2_7:function(){if(ss.isNullOrUndefined(this.$2_0)){return;}this.$2_0.show();}}
tab.ApplicationView=function(viewModel){tab.ApplicationView.initializeBase(this,[viewModel,new tab.ApplicationTemplate()]);}
tab.ApplicationView.prototype={$2_0:null,$2_1:null,get_dom:function(){return this.get_template();},get_containerNode:function(){return this.$2_0.get_dashboardView().get_dashboardNode();},get_toolbarView:function(){return this.$2_1;},get_toolbarIsBottom:function(){return this.get_$2_2().get_toolbarViewModel().get_toolbarIsBottom();},get_toolbarContainer:function(){if(this.get_toolbarIsBottom()){return this.get_dom().bottomToolbar;}else{return this.get_dom().topToolbar;}},get_unusedToolbarContainer:function(){if(this.get_toolbarIsBottom()){return this.get_dom().topToolbar;}else{return this.get_dom().bottomToolbar;}},get_$2_2:function(){return this.get_viewModel();},onAddedToDom:function(){if(!this.get_addedToDom()){this.$2_3();if((tab.FeatureParamsLookup.getBoolDefaultFalse(tab.FeatureParam.newBrowserToolbar)||false)){this.$2_4();}}tab.ApplicationView.callBaseMethod(this, 'onAddedToDom');},$2_3:function(){this.$2_0=spiff.ObjectRegistry.newView(tab.WorkbookView,this.get_$2_2().get_workbookViewModel());this.$2_0.addToDom(this.get_dom().domNode);},$2_4:function(){this.$2_1=spiff.ObjectRegistry.newView(tab.ToolbarView,this.get_$2_2().get_toolbarViewModel());this.$2_1.addToDom(this.get_toolbarContainer());this.get_toolbarContainer().addClass('tab-toolbar-container');}}
tab.ApplicationTemplate=function(){tab.ApplicationTemplate.initializeBase(this,[$("\n<div id='tabViewer' class='wcBody' style='visibility:hidden;'\n  ><div class='wcVizPlaceholder'></div\n  ><div id=\"share_dialog\"></div\n  ><div class='bottom_toolbar'></div\n    ><div class='wcWatermark'\n      ><div class='wcPublicNote'>\n          <span id='domViewCount'></span>\n          <span id='interpunct' style='display:none'>&nbsp;&#183;&nbsp;</span>\n          <span id='domSharePerspective'></span></div\n      ><div\n        ><a id='domWatermarkLink' target='_blank'\n          ><img alt='Tableau Public' border='0'\n          /></a\n      ></div\n    ></div\n></div>")]);this.domNode=this.get_domRoot();this.publicNote=this.getElementBySelector('.wcPublicNote');this.viewCount=this.getElementBySelector('#domViewCount');this.sharePerspective=this.getElementBySelector('#domSharePerspective');this.interpunct=this.getElementBySelector('#interpunct');this.watermarkParent=this.getElementBySelector('.wcWatermark');this.watermarkLink=this.getElementBySelector('#domWatermarkLink');this.watermarkImage=this.getElementBySelector('img');this.topToolbar=$('#top_toolbar');this.bottomToolbar=this.getElementBySelector('.bottom_toolbar');this.placeholder=this.getElementBySelector('.wcVizPlaceholder');}
tab.ApplicationTemplate.prototype={domNode:null,publicNote:null,viewCount:null,sharePerspective:null,interpunct:null,watermarkParent:null,watermarkLink:null,watermarkImage:null,topToolbar:null,bottomToolbar:null,placeholder:null}
tab.PaneTableOverlayView=function(viewModel,domNode,vizRegion){this.$2_B=[];this.$2_C=new tab.UintSet();this.$2_D=[];this.$2_E=new tab.vqlui$6('hover');this.$2_F=new tab.vqlui$6('press');this.$2_13='normal';tab.PaneTableOverlayView.initializeBase(this,[viewModel,domNode]);this.renderer=new tab.PaneTable2DRenderer(this.canvasElt,this.context);this.$2_A=vizRegion;var $0=$(this.canvasElt);$0.css('position','absolute');$0.css('left','0px');$0.css('top','0px');}
tab.PaneTableOverlayView.prototype={$2_A:null,$2_10:false,$2_11:null,$2_12:false,get_paneTableVM:function(){return this.get_viewModel();},get_dirtyRect:function(){return (this.$2_D.length>0)?this.$2_D.peek():tab.PaneTableOverlayView.callBaseMethod(this, 'get_dirtyRect');},get_lastTargetState:function(){return this.$2_13;},clearDirty:function(){this.$2_D.pop();},clearOverlays:function(){this.$2_1E();this.$2_1F();this.$2_20();this.$2_19();},hoverOverWhitespace:function(){this.$2_12=false;},setScrollPosition:function(scrollPoint){this.set_scrollPos(scrollPoint);this.invalidate(true);},setDragOverlayTuples:function(tuples){this.$2_1E();this.$2_1F();this.$2_19();var $0=this.$2_A.get_shapeSelector();this.$2_11=$0.retrieveStateObject(this.$2_11);this.$2_D.clear();this.$2_C.clear();this.$2_C.addAll(tuples);var $1=$0.getStateDiff(this.$2_11);var $2=tab.$create_Point(-this.get_scrollPos().x,-this.get_scrollPos().y);var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $3=$enum1.current;var $4=$3;var $5=tab.HitTestResult.getIdsFromHitTestResults(this.$2_A.hitTestMarks($4,false));if(tab.MiscUtil.isNullOrEmpty($5)){continue;}var $6=this.get_paneTableVM().get_scene().$1B($5);var $enum2=ss.IEnumerator.getEnumerator($6);while($enum2.moveNext()){var $7=$enum2.current;$4=tab.RectXYUtil.union($4,$7);}$4=tab.RectXYUtil.offsetRect($4,$2);$4=tab.RectXYUtil.outsetRect($4,2,2);if(!this.$2_D.length||!tab.RectXYUtil.completelyContains(this.$2_D.peek(),$4)){this.$2_D.push($4);}}if(this.$2_D.length>0){this.triggerRedraw(false);}else{$0.updateLastState(this.$2_11);}},setHoverOverlayTarget:function(target,visualPart){this.$2_13='hover';if(!this.$2_E.$8(target,visualPart)){this.$2_12=false;}if(this.$2_E.$7(target,visualPart)||this.$2_C.get_count()>0){return false;}this.$2_1D(target,visualPart);this.$2_E.$5(target,visualPart);this.$2_18();return true;},setPressedOverlayTarget:function(target,visualPart){this.$2_12=true;this.$2_13='press';if(this.$2_F.$7(target,visualPart)){return false;}this.$2_1D(target,visualPart);this.$2_F.$5(target,visualPart);this.$2_18();return true;},$2_14:function($p0,$p1){if($p1.get_propertyName()==='scene'||$p1.get_propertyName()==='vizdata'){this.$2_1A();}},performRender:function(){var $0=tabBootstrap.MetricsController.get_instance().createContext('Render Overlay Panetable',tabBootstrap.MetricsSuites.debug);this.renderer.clear();var $1=tab.RectXYUtil.offsetRect(this.get_dirtyRect(),tab.$create_Point(this.get_scrollPos().x,this.get_scrollPos().y));if(this.$2_C.get_count()>0){this.$2_15($1);}else if(this.$2_E.get_$4()){if(this.$2_E.$0==='marks'){var $2=this.get_paneTableVM().get_scene().$25(this.$2_E.get_id());if(!ss.isNullOrUndefined($2)){this.context.setClip(tab.RectXYUtil.intersect($1,$2.get_mapExtentOrPaneRect()));tab.PaneTable2DRenderer.renderHoverOverlay(this.$2_E.get_id(),$2,this.context);}}else{this.$2_16(this.$2_E);}}else if(this.$2_F.get_$4()){if(this.$2_F.$0==='marks'){var $3=this.get_paneTableVM().get_scene().$25(this.$2_F.get_id());if(!ss.isNullOrUndefined($3)){this.context.setClip(tab.RectXYUtil.intersect($1,$3.get_mapExtentOrPaneRect()));tab.PaneTable2DRenderer.renderPressedOverlay(this.$2_F.get_id(),$3,this.context);}}else{this.$2_16(this.$2_F);}}$0.close();},$2_15:function($p0){var $0=tab.HitTestResult.getIdsFromHitTestResults(this.$2_A.hitTestMarks(tab.RectXYUtil.outsetRect($p0,2,2),false));var $1=null;var $2=null;var $3=$p0;var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $4=$enum1.current;if(this.$2_C.contains($4)){var $5=this.get_paneTableVM().get_scene().$25($4);if(ss.isNullOrUndefined($5)){continue;}if($5!==$1){var $6=$5.get_mapExtentOrPaneRect();if($2!==$6){$3=tab.RectXYUtil.intersect($p0,$6);$2=$6;}if(ss.isValue($1)){this.context.restore();}this.context.save();this.context.setClip($3);}tab.PaneTable2DRenderer.renderHoverOverlay($4,$5,this.context);$1=$5;}}if(ss.isValue($1)){this.context.restore();}},$2_16:function($p0){var $0=[];if($p0.get_$3()==='hover'&&tsConfig.is_authoring){switch($p0.$0){case 'ref-lines':$0=this.get_paneTableVM().get_refLineVisualLists();break;case 'trend-lines':$0=this.get_paneTableVM().get_trendLineVisualLists();break;}}var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;var $2=[];$2.addRange($1.au0);this.$2_17($2,$p0);}},$2_17:function($p0,$p1){var $0=$p1.get_$3();var $1=$p1.get_id();this.context.save();var $2=this.renderer;var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $3=$enum1.current;if($3.ag5==='auv'){var $4=$3;var $5=true;if(this.$2_12){switch($p1.$0){case 'ref-lines':$5=!this.get_paneTableVM().get_scene().get_$15().get_refLineSelection().isMarkSelected($4.abi);break;case 'trend-lines':$5=!this.get_paneTableVM().get_scene().get_$15().get_trendLineSelection().isMarkSelected($4.abi);break;}}if($5){$2.drawReferenceLineAndTrendLineGroup($4.au0,$0,this.context,$1===$4.abi,null);}}else{$2.renderVisualParts(this.context,$3);}}this.context.restore();},postRenderFinalPass:function(){},redrawFinished:function(){if(this.$2_D.length>0){this.triggerRedraw(true);}else{this.$2_A.get_shapeSelector().updateLastState(this.$2_11);}},$2_18:function(){if(tab.MiscUtil.isNullOrEmpty(this.$2_B)){this.invalidate(true);}else{var $0=tab.$create_RectXY(0,0,0,0);var $enum1=ss.IEnumerator.getEnumerator(this.$2_B);while($enum1.moveNext()){var $2=$enum1.current;$0=tab.RectXYUtil.union($0,$2);}this.$2_B.clear();var $1=tab.$create_Point(-this.get_scrollPos().x,-this.get_scrollPos().y);$0=tab.RectXYUtil.offsetRect($0,$1);$0=tab.RectXYUtil.outsetRect($0,2,2);this.invalidateRect($0,true);}},$2_19:function(){if(!tab.MiscUtil.isNullOrEmpty(this.$2_B)||this.$2_10){this.$2_10=false;this.$2_18();}},$2_1A:function(){if(!this.$2_1B(this.$2_E)){this.$2_E.$6();}if(!this.$2_1B(this.$2_F)){this.$2_F.$6();}var $enum1=ss.IEnumerator.getEnumerator(this.$2_C.get_values());while($enum1.moveNext()){var $0=$enum1.current;if(!this.$2_1C($0)){this.$2_C.remove($0);}}},$2_1B:function($p0){if(!$p0.get_$4()){return false;}return $p0.$0==='marks'&&this.$2_1C($p0.get_id());},$2_1C:function($p0){var $0=this.get_paneTableVM().get_visualModel().get_vizDataModel();var $1=this.get_paneTableVM().get_scene();return ss.isValue($0)&&$0.hasTupleId($p0)&&!$1.$22($p0);},$2_1D:function($p0,$p1){this.$2_1E();this.$2_1F();this.$2_20();if($p1==='marks'){this.$2_B.addRange(this.get_paneTableVM().get_scene().$1C($p0));}else{this.$2_10=true;}},$2_1E:function(){if(this.$2_E.get_$4()){if(this.$2_E.$0==='marks'){this.$2_B.addRange(this.get_paneTableVM().get_scene().$1C(this.$2_E.get_id()));}else{this.$2_10=true;}this.$2_E.$6();}},$2_1F:function(){if(this.$2_F.get_$4()){if(this.$2_F.$0==='marks'){this.$2_B.addRange(this.get_paneTableVM().get_scene().$1C(this.$2_F.get_id()));}else{this.$2_10=true;}this.$2_F.$6();}},$2_20:function(){if(this.$2_C.get_count()>0){this.$2_B.addRange(this.get_paneTableVM().get_scene().$1B(this.$2_C.get_values()));this.$2_C.clear();this.$2_D.clear();}this.$2_11=null;}}
tab.vqlui$6=function(state){this.$1=state;this.$2=false;this.id=0;}
tab.vqlui$6.prototype={$0:null,$1:null,$2:false,id:0,get_$3:function(){return this.$1;},get_$4:function(){return this.$2;},get_id:function(){if(!this.get_$4()){}return this.id;},$5:function($p0,$p1){this.id=$p0;this.$0=$p1;this.$2=true;},$6:function(){this.$2=false;},$7:function($p0,$p1){return this.$8($p0,$p1)&&this.$2;},$8:function($p0,$p1){return this.id===$p0&&this.$0===$p1;}}
tab.PresModelBrowserView=function(viewModel){tab.PresModelBrowserView.initializeBase(this,[viewModel,spiff.Template.fromHtml('<div />')]);}
tab.StoryPointCaptionView=function(viewModel){tab.StoryPointCaptionView.initializeBase(this,[viewModel,new tab.StoryPointCaptionTemplate()]);this.get_storyPointCaptionViewModel().add_updatePoint(ss.Delegate.create(this,this.$2_5));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_storyPointCaptionViewModel().remove_updatePoint(ss.Delegate.create(this,this.$2_5));})));this.$2_4();this.$2_9();this.$2_6();}
tab.StoryPointCaptionView.prototype={$2_0:null,$2_1:null,$2_2:null,get_domRoot:function(){return this.get_template().get_domRoot();},get_contentTemplate:function(){return this.$2_0;},get_storyPointCaptionViewModel:function(){return this.get_viewModel();},get_$2_3:function(){return this.get_template();},onAddedToDom:function(){tab.StoryPointCaptionView.callBaseMethod(this, 'onAddedToDom');if(this.$2_1.get_hasCustomIndicator()){this.get_domRoot().addClass('tabFormatted');this.get_$2_3().captionBottom.remove();this.get_$2_3().captionTop.remove();}var $0=spiff.ScrollableView.createScrollableView(this.$2_1);$0.addToDom(this.get_$2_3().caption);var $1={right:$0.get_scrollbarBuffer()+'px'};this.get_$2_3().captionTop.css($1);this.get_$2_3().captionBottom.css($1);this.$2_5();},$2_4:function(){if(this.get_storyPointCaptionViewModel().get_isFirstPoint()){this.get_domRoot().addClass('tabFirstPoint');}if(this.get_storyPointCaptionViewModel().get_isLastPoint()){this.get_domRoot().addClass('tabLastPoint');}},$2_5:function(){this.get_$2_3().revert.toggle(!this.get_storyPointCaptionViewModel().get_isCaptured());this.get_$2_3().caption.toggleClass('tabCurrent',this.get_storyPointCaptionViewModel().get_isCurrentPoint());if(!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.formattedFlipboardNavigator)){this.$2_1.triggerRefresh();}},$2_6:function(){this.$2_8();this.$2_7();},$2_7:function(){this.get_$2_3().revert.attr('title',tab.Strings.StoryPointRevertTooltip);this.$2_2=new spiff.IconButton();this.$2_2.setIcon('tabStoryRevertIcon');this.get_$2_3().revert.append(this.$2_2.get_element());this.disposables.add(this.$2_2.onClick(ss.Delegate.create(this,function($p1_0){
this.get_storyPointCaptionViewModel().revertStoryPoint();})));if(!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.newCaptionToolbar)){this.get_$2_3().revert.addClass('tabLayoutNew');}this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_2.dispose();})));},$2_8:function(){this.disposables.add(new spiff.ClickHandler().setTarget(this.get_$2_3().caption).onPress(ss.Delegate.create(this,function(){
this.get_$2_3().caption.addClass('tabActive');})).onClick(ss.Delegate.create(this,function($p1_0){
$p1_0.stopPropagation();this.get_$2_3().caption.removeClass('tabActive');this.get_storyPointCaptionViewModel().clickStoryPoint();})));this.get_$2_3().caption.bind('touchend touchcancel mouseleave',ss.Delegate.create(this,function(){
this.get_$2_3().caption.removeClass('tabActive');}));},$2_9:function(){var $0=tab.FeatureParamsLookup.getBool(tab.FeatureParam.formattedFlipboardNavigator);this.$2_0=new tab.StoryPointCaptionContentTemplate();this.$2_0.get_domRoot().text(this.get_storyPointCaptionViewModel().get_caption());if(!!$0){this.get_$2_3().caption.removeClass('tabUnformattedStoryPoint');this.get_$2_3().caption.addClass('tabFormattedStoryPoint');}var $1=(!tab.BrowserSupport.get_isIE()||tab.BrowserSupport.get_browserVersion()>8)&&!!$0;this.$2_1=new spiff.ScrollableViewModel($1);this.$2_1.set_content(this.$2_0.get_domRoot()[0]);this.$2_1.set_scrollY(true);this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_1.dispose();})));}}
tab.StoryPointCaptionTemplate=function(){tab.StoryPointCaptionTemplate.initializeBase(this,[$(tab.StoryPointCaptionTemplate.$1_0)]);this.caption=this.getElementBySelector('.tabStoryPointCaption');this.revert=this.getElementBySelector('.tabStoryRevert');this.toolbar=this.getElementBySelector('.tabStoryPointToolbar');this.captionTop=this.getElementBySelector('.tabStoryPointCaptionTop');this.captionBottom=this.getElementBySelector('.tabStoryPointCaptionBottom');}
tab.StoryPointCaptionTemplate.prototype={caption:null,revert:null,captionTop:null,captionBottom:null,toolbar:null}
tab.StoryPointCaptionContentTemplate=function(){tab.StoryPointCaptionContentTemplate.initializeBase(this,[$("<div class='tabStoryPointContent'/>")]);}
tab.DashboardView=function(viewModel){tab.DashboardView.initializeBase(this,[viewModel,new tab.DashboardTemplate()]);this.$2_0=viewModel;this.$2_0.add_newDashboard(ss.Delegate.create(this,this.$2_2));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newDashboard(ss.Delegate.create(this,this.$2_2));})));this.$2_0.add_newZone(ss.Delegate.create(this,this.$2_3));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newZone(ss.Delegate.create(this,this.$2_3));})));this.$2_0.add_vizRebuildStart(ss.Delegate.create(this,this.$2_4));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_vizRebuildStart(ss.Delegate.create(this,this.$2_4));})));}
tab.DashboardView.uniquefyClonedFilterRadioElements=function(cloneRoot){var $0=cloneRoot.find('input:radio');for(var $1=0;$1<$0.length;++$1){var $2=$0[$1];var $3=$2.getAttribute('name')||'';$3+='_%%%CLONE%%%';$2.setAttribute('name',$3);}}
tab.DashboardView.prototype={$2_0:null,get_$2_1:function(){return this.get_template();},get_dashboardNode:function(){return this.get_$2_1().dashboardNode;},$2_2:function(){this.get_$2_1().dashboardNode.height(this.$2_0.get_portSize().wc).width(this.$2_0.get_portSize().wb);if(ss.isValue(this.$2_0.get_formats())){this.get_$2_1().dashboardNode.css(this.$2_0.get_formats());var $0=this.$2_0.get_formats()['color'];if(ss.isNullOrUndefined($0)||$0==='#000000'){this.get_$2_1().dashboardNode.addClass('lightBackground');}else{this.get_$2_1().dashboardNode.addClass('darkBackground');}}},$2_3:function($p0){var $0=spiff.ObjectRegistry.newView(tab.ZoneView,$p0);$0.addToDom(this.get_$2_1().dashboardNode);},onAddedToDom:function(){if(!this.get_addedToDom()){this.$2_2();var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$2_0.get_zoneViewModels()));while($enum1.moveNext()){var $0=$enum1.current;this.$2_3(this.$2_0.get_zoneViewModels()[$0]);}}tab.DashboardView.callBaseMethod(this, 'onAddedToDom');},$2_4:function(){if(this.$2_0.get_renderMode()==='render-mode-client'){var $1=this.get_$2_1().dashboardNode.find('img');var $2=$1.length;for(var $3=0;$3<$2;$3++){var $4=$1[$3];if(ss.isNullOrUndefined($4)||!$4.naturalHeight||!$4.naturalWidth){continue;}var $5=document.createElement('canvas');$5.width=$4.naturalWidth;$5.height=$4.naturalHeight;var $6=$5.getContext('2d');$6.drawImage($4,0,0);try{var $7=$5.toDataURL('image/png');$4.src=$7;}catch($8){}}}var $0=this.get_$2_1().dashboardNode.clone(false,false);$0.addClass('facadedom');tab.DashboardView.uniquefyClonedFilterRadioElements($0);if(this.$2_0.get_renderMode()==='render-mode-server'){var $9=this.get_$2_1().dashboardNode.find('canvas');var $A=$0.find('canvas');var $B=$9.length;for(var $C=0;$C<$B;$C++){var $D=$9[$C];var $E=$A[$C];if(!ss.isValue($E)){continue;}var $F=$E.getContext('2d');if(ss.isValue($D)&&$D.width>0&&$D.height>0&&ss.isValue($F)){$F.drawImage($D,0,0);}}}this.get_$2_1().dashboardNode.parent().append($0);}}
tab.DashboardTemplate=function(){tab.DashboardTemplate.initializeBase(this,[$("<div class='tab-dashboard'/>")]);this.dashboardNode=this.get_domRoot();}
tab.DashboardTemplate.prototype={dashboardNode:null}
tab.FlipboardNavigatorView=function(viewModel){tab.FlipboardNavigatorView.initializeBase(this,[viewModel,new tab.FlipboardNavigatorTemplate()]);if(this.get_flipboardNavViewModel().get_showArrows()){this.$2_6();}else{this.get_dom().previous.hide();this.get_dom().next.hide();}this.get_flipboardNavViewModel().add_resizeZone(ss.Delegate.create(this,this.handleResize));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_flipboardNavViewModel().remove_resizeZone(ss.Delegate.create(this,this.handleResize));})));this.get_flipboardNavViewModel().add_updateActivePoint(ss.Delegate.create(this,this.handleUpdateActivePoint));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_flipboardNavViewModel().remove_updateActivePoint(ss.Delegate.create(this,this.handleUpdateActivePoint));})));this.get_domRoot().bind(this.createNamespacedEventName('mousedown'),function($p1_0){
$p1_0.stopPropagation();});this.$2_5();if(!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.formattedFlipboardNavigator)){this.disposables.add(new tab.CallOnDispose(function(){
tab.StyleUtil.clearStyleSheet('appendedStoryStyle');}));}}
tab.FlipboardNavigatorView.prototype={$2_2:null,$2_3:null,$2_4:null,get_domRoot:function(){return this.get_template().get_domRoot();},get_flipboardNavViewModel:function(){return this.get_viewModel();},get_storyPointCaptionViewModel:function(){return this.get_flipboardNavViewModel().get_captions()[0];},get_dom:function(){return this.get_template();},$2_5:function(){var $0=tab.FeatureParamsLookup.getBool(tab.FeatureParam.formattedFlipboardNavigator);if(!!$0){this.get_domRoot().removeClass('tabUnformattedFlipboardNav');this.get_domRoot().addClass('tabFormattedFlipboardNav');}this.$2_2=new tab.FlipboardNavigatorPointsTemplate();this.$2_3=new spiff.ScrollableViewModel(false);this.$2_3.set_content(this.$2_2.get_domRoot()[0]);this.$2_3.set_scrollX(true);this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_3.dispose();})));},$2_6:function(){var $0=new spiff.Button(this.get_dom().previous);var $1=ss.Delegate.create(this,function(){
this.get_flipboardNavViewModel().clickPrevious();});$0.add_click($1);this.disposables.add($0);this.disposables.add(new tab.CallOnDispose(function(){
$0.remove_click($1);}));var $2=new spiff.Button(this.get_dom().next);var $3=ss.Delegate.create(this,function(){
this.get_flipboardNavViewModel().clickNext();});$2.add_click($3);this.disposables.add($2);this.disposables.add(new tab.CallOnDispose(function(){
$2.remove_click($3);}));},onAddedToDom:function(){var $0=tab.FeatureParamsLookup.getBool(tab.FeatureParam.formattedFlipboardNavigator);tab.FlipboardNavigatorView.callBaseMethod(this, 'onAddedToDom');this.$2_4=spiff.ScrollableView.createScrollableView(this.$2_3);this.$2_4.addToDom(this.get_dom().scroller);var $1;if(!!$0){var $2=this.get_flipboardNavViewModel().get_storyPointHeight();$1=$2+20;var $3=($2-26)/2;var $4=($2-26)/2;this.get_dom().previous.css({'padding-top':$3+'px','padding-bottom':$3+'px'});this.get_dom().next.css({'padding-top':$4+'px','padding-bottom':$4+'px'});this.$2_7();}else{$1=parseInt(this.get_dom().scroller.css('height'),10);}if(ss.isValue($1)){this.get_dom().scroller.css('height',($1+this.$2_4.get_scrollbarBuffer())+'px');}this.$2_B();this.centerNav();this.handleUpdateActivePoint(this.get_flipboardNavViewModel().get_currentPointIndex());},$2_7:function(){if(this.get_storyPointCaptionViewModel()==null){return;}var $0={};var $1={};var $2={};var $3={};var $4={};if(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle()!=null){$0=this.$2_8(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle());$2=this.$2_9(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle());$4=this.$2_A(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle());}if(this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle()!=null){$1=this.$2_8(this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle());$3=this.$2_9(this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle());if(Object.keys($4).length<=0){$4=this.$2_A(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle());}}tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle',tab.FlipboardNavigatorView.formattedStoryPointSelector,$4);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption.tabFormattedStoryPoint.tabCurrent',$0);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption.tabFormattedStoryPoint',$1);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle',tab.FlipboardNavigatorView.selectedStoryPointTextSelector,$2);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle',tab.FlipboardNavigatorView.unselectedStoryPointTextSelector,$3);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle',tab.FlipboardNavigatorView.selectedStoryPointNativeScrollerTopBottomSelector,$0);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle',tab.FlipboardNavigatorView.unselectedStoryPointNativeScrollerTopBottomSelector,$1);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle',tab.FlipboardNavigatorView.selectedStoryPointNativeScrollerTextSelector,$2);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle',tab.FlipboardNavigatorView.unselectedStoryPointNativeScrollerTextSelector,$3);},$2_8:function($p0){var $0=false;if(ss.isValue($p0.ayq)){return tab.FormattingConverters.$3($p0.ayq,$0);}else{return {};}},$2_9:function($p0){if(ss.isValue($p0.ays)){return tab.FormattingConverters.$4($p0.ays,null);}else{return {};}},$2_A:function($p0){var $0=150;var $1=70;var $2={};var $3=$1,$4=$0;if(ss.isValue($p0.wc)){$3=$p0.wc;}$2['height']=$3+20+'px';if(ss.isValue($p0.wb)){$4=$p0.wb;}$2['width']=$4+'px';return $2;},centerNav:function(){var $0=0;this.get_dom().get_domRoot().children().each(function($p1_0,$p1_1){
var $1_0=$($p1_1);if(!($1_0.css('display')==='none')){$0+=$1_0.outerWidth(true);}});var $1=this.get_dom().get_domRoot().parent().width();var $2=0;if($1>$0){$2=parseInt((($1-$0)/2));}this.get_dom().get_domRoot().css('margin-left',$2+'px');var $3=this.get_domRoot().height();var $4=parseInt(($3/2));this.get_dom().get_domRoot().css('margin-top','-'+$4+'px');},handleResize:function(){var $0=this.get_dom().get_domRoot()[0].clientWidth-((this.get_flipboardNavViewModel().get_showArrows())?this.get_dom().previous.outerWidth(true)+this.get_dom().next.outerWidth(true):0);var $1=this.$2_2.points[0].clientWidth;this.get_dom().scroller.css({width:Math.min($0,$1)+'px'});this.centerNav();this.$2_3.triggerRefresh();},handleUpdateActivePoint:function(activePointIndex){var $0=this.$2_2.points.children().get(activePointIndex);var $1=$0.offsetLeft;var $2=$1+$0.offsetWidth;var $3=this.$2_4.get_scrollerX();var $4=$3+this.get_dom().scroller.width();var $5=50;if($2>$4){var $6=this.get_dom().scroller.width()-$0.offsetWidth-$5;this.$2_4.scrollToElement($0,0,-$6,0);}else if($1<$3){this.$2_4.scrollToElement($0,0,-$5,0);}this.get_dom().previous.toggleClass('tabDisabled',this.get_flipboardNavViewModel().get_previousDisabled());this.get_dom().next.toggleClass('tabDisabled',this.get_flipboardNavViewModel().get_nextDisabled());},$2_B:function(){var $enum1=ss.IEnumerator.getEnumerator(this.get_flipboardNavViewModel().get_captions());while($enum1.moveNext()){var $0=$enum1.current;var $1=spiff.ObjectRegistry.newView(tab.StoryPointCaptionView,$0);$1.addToDom(this.$2_2.points);}this.handleResize();}}
tab.FlipboardNavigatorTemplate=function(){tab.FlipboardNavigatorTemplate.initializeBase(this,[$(tab.FlipboardNavigatorTemplate.$1_0)]);this.previous=this.getElementBySelector('.tabFlipboardNavPrevious');this.scroller=this.getElementBySelector('.tabFlipboardNavScroller');this.next=this.getElementBySelector('.tabFlipboardNavNext');}
tab.FlipboardNavigatorTemplate.prototype={previous:null,scroller:null,next:null}
tab.FlipboardNavigatorPointsTemplate=function(){tab.FlipboardNavigatorPointsTemplate.initializeBase(this,[$("<span class='tabFlipboardNavPoints'/>")]);this.points=this.get_domRoot();}
tab.FlipboardNavigatorPointsTemplate.prototype={points:null}
tab.FlipboardView=function(viewModel){tab.FlipboardView.initializeBase(this,[viewModel,new tab.FlipboardTemplate()]);this.$2_0=viewModel;this.$2_0.add_newStoryPoint(ss.Delegate.create(this,this.handleNewStoryPoint));this.$2_0.get_parentZone().add_resizeZone(ss.Delegate.create(this,this.handleResizeZone));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newStoryPoint(ss.Delegate.create(this,this.handleNewStoryPoint));this.$2_0.get_parentZone().remove_resizeZone(ss.Delegate.create(this,this.handleResizeZone));})));}
tab.FlipboardView.prototype={$2_0:null,onAddedToDom:function(){tab.FlipboardView.callBaseMethod(this, 'onAddedToDom');if(ss.isValue(this.$2_0.get_dashboardViewModel())){this.handleNewStoryPoint();}},handleNewStoryPoint:function(){var $0=tab.$create_Size(this.get_element().width(),this.get_element().height());this.$2_0.get_dashboardViewModel().set_portSize(this.$2_1(tab.RecordCast.sizeAsSizePresModel($0),this.$2_0.get_dashboardViewModel().get_portSize()));var $1=spiff.ObjectRegistry.newView(tab.DashboardView,this.$2_0.get_dashboardViewModel());$1.addToDom(this.get_template().get_domRoot());},handleResizeZone:function(){var $0=tab.$create_Size(this.$2_0.get_parentZone().get_width(),this.$2_0.get_parentZone().get_height());this.$2_0.get_dashboardViewModel().set_portSize(this.$2_1(tab.RecordCast.sizeAsSizePresModel($0),this.$2_0.get_dashboardViewModel().get_dashboardModel().get_portSize()));},$2_1:function($p0,$p1){var $0=tab.SizeUtil.unionPresModels($p0,$p1);if($p1.wc>=$p0.wc&&$p0.wb-$p1.wb>24){$0.wb-=24;}if($p1.wb>=$p0.wb&&$p0.wc-$p1.wc>24){$0.wc-=24;}return $0;}}
tab.FlipboardTemplate=function(){tab.FlipboardTemplate.initializeBase(this,[$("<div class='tabFlipboard'></div>")]);}
tab.PaneTableView=function(paneTableVM,template){this.regions={};this.$2_2=[];this.$2_4=-1;this.$2_5=-1;this.$2_9=tab.$create_Point(0,0);this.$2_C=[];this.$2_15=tab.$create_Size(0,0);tab.PaneTableView.initializeBase(this,[paneTableVM,template]);this.dom=template;this.$2_27();this.get_paneTableVM().get_viewController().setTiledViewer(this);this.$2_3=new Date().getTime();this.get_dom().view.attr('id','view'+tab.ModelUtils.findContentDashboard().getViewId(this.get_sheetid()));this.get_dom().title.css('display',(this.get_paneTableVM().get_hasTitle())?'':'none');this.get_dom().caption.css('display',(this.get_paneTableVM().get_hasCaption())?'':'none');tab.ModelUtils.withVisualModel(this.get_sheetid(),ss.Delegate.create(this,function($p1_0){
if(this.get_paneTableVM().get_hasTitle()){var $1_0=new tab.TextRegionViewModel($p1_0.get_titleModel());this.$2_E=new tab.TextRegionView($1_0);this.$2_E.addToDom(this.dom.title);}if(this.get_paneTableVM().get_hasCaption()){var $1_1=new tab.TextRegionViewModel($p1_0.get_captionModel());this.$2_F=new tab.TextRegionView($1_1);this.$2_F.addToDom(this.dom.caption);}this.isMap=$p1_0.get_isMap();}));this.get_paneTableVM().add_newPaneTable(ss.Delegate.create(this,this.handleNewVisual));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_paneTableVM().remove_newPaneTable(ss.Delegate.create(this,this.handleNewVisual));})));}
tab.PaneTableView.guessTooltipTargetTypeFromRegion=function(regionPart){switch(regionPart){case 'bottomaxis':case 'topaxis':case 'leftaxis':case 'rightaxis':case 'xheader':case 'yheader':return 'header';case 'color':return 'legenditem';default:return 'unspecified';}}
tab.PaneTableView.prototype={dom:null,zoomToolbar:null,ftv:null,isPointerToolLocked:false,isMap:false,geometry:null,visibleGeometry:null,mapsSearchView:null,$2_3:null,$2_6:0,$2_7:null,$2_8:null,$2_A:0,$2_B:null,$2_D:null,$2_E:null,$2_F:null,$2_10:false,$2_11:null,$2_12:0,$2_13:null,$2_14:null,$2_16:null,$2_17:null,$2_18:false,get_geometry:function(){return this.geometry;},get_visibleGeometry:function(){return this.visibleGeometry;},get_sortIndicators:function(){return this.get_paneTableVM().get_sortIndicators();},get_posTV:function(){return tab.PointUtil.fromPosition(this.dom.get_domRoot().offset());},get_dom:function(){return this.dom;},get_sheetid:function(){return this.get_paneTableVM().get_sheetId();},get_session:function(){return this.get_controller().get_viewSession();},get_tlspacerAreaX:function(){return this.$2_7;},get_tlspacerAreaY:function(){return this.$2_8;},get_blspacerArea:function(){return this.$2_D;},get_titleHeight:function(){return this.$2_6;},get_scrollPosition:function(){return this.$2_9;},set_scrollPosition:function(value){this.$2_9=value;this.$2_20(this.$2_9);this.$2_23();return value;},get_controller:function(){return this.get_paneTableVM().get_viewController();},get_visualId:function(){return this.get_paneTableVM().get_visualId();},get_isMap:function(){return this.isMap;},set_isMap:function(value){this.isMap=value;return value;},get_paneTableVM:function(){return this.get_viewModel();},get_sizeOfRegions:function(){return this.$2_15;},get_mapsSearchEnabled:function(){return tab.FeatureFlags.isEnabled('GeoSearch')&&tsConfig.allow_filter&&this.isMap&&this.get_paneTableVM().get_visualModel().get_geoSearchVisibility()==='on';},get_vizToolTip:function(){this.$2_29();return this.$2_B;},init:function(){this.$2_28();this.makeConnections();this.makeRegions();this.makeInputHandlers();_.defer(ss.Delegate.create(this,function(){
this.setupDrilling();this.setupSortIndicators();this.refreshScrollingAndDrilling();}));this.makeRegionContentProviders();},dispose:function(){this.$2_10=true;this.destroyInputHandlers();this.destroyRegions();this.disposables.dispose();this.visibleGeometry=null;this.disposeOfOverlayImages();if(ss.isValue(this.get_paneTableVM())){this.get_paneTableVM().remove_vizRegionMapChange(ss.Delegate.create(this,this.$2_25));if(ss.isValue(this.regions['viz'])){this.get_paneTableVM().remove_propertyChanged(ss.Delegate.create(this.regions['viz'],this.regions['viz'].$D));}}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.dispose();}if(ss.isValue(this.$2_E)){this.$2_E.dispose();}if(ss.isValue(this.$2_F)){this.$2_F.dispose();}if(ss.isValue(this.$2_14)){this.$2_14.dispose();}if(ss.isValue(this.$2_B)){this.$2_B.remove_tooltipClosed(ss.Delegate.create(this,this.onTooltipClosed));this.$2_B.remove_ubertipUpdated(ss.Delegate.create(this,this.maybeShowOverlayImages));this.$2_B.remove_ubertipCommandExecuted(ss.Delegate.create(this,this.onCommandExecuted));this.$2_B.remove_ubertipActionExecuted(ss.Delegate.create(this,this.onActionExecuted));this.$2_B.dispose();}if(ss.isValue(this.$2_11)){this.get_paneTableVM().remove_propertyChanged(ss.Delegate.create(this.$2_11,this.$2_11.$2_14));this.$2_11.dispose();}if(ss.isValue(this.mapsSearchView)){this.mapsSearchView.dispose();}tab.PaneTableView.callBaseMethod(this, 'dispose');},addDisposable:function(d){this.disposables.add(d);},resize:function(marginBox){tab.DomUtil.setMarginBoxJQ(this.get_element(),marginBox);this.layout();},zoomHome:function(){this.get_session().restoreSheetAxes();if(ss.isValue(this.mapsSearchView)){this.mapsSearchView.set_isCollapsed(true);this.mapsSearchView.showInitialSearchText(true);}},doTiledViewerRefreshImages:function(cacheInfo){this.refreshImages(cacheInfo);},setPointerToolMode:function(pointerToolMode,isLocked){this.isPointerToolLocked=isLocked;this.regions['viz'].setPointerToolMode(pointerToolMode);},defaultPointerToolMode:function(){if(Object.keyExists(this.regions,'viz')){return this.regions['viz'].get_defaultPointerToolMode();}return 'rectSelect';},isExistingSelection:function(){if(Object.keyExists(this.regions,'viz')){return this.regions['viz'].isExistingSelection();}return false;},resetPointerToolMode:function(){if(ss.isNullOrUndefined(this.zoomToolbar)){this.createZoomToolbar();}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.resetPointerToolMode();}else if(Object.keyExists(this.regions,'viz')){this.regions['viz'].$14();}},connectTooltipEventHandlers:function(){var $0=this.get_vizToolTip();$0.add_tooltipClosed(ss.Delegate.create(this,this.onTooltipClosed));$0.add_ubertipUpdated(ss.Delegate.create(this,this.maybeShowOverlayImages));$0.add_ubertipCommandExecuted(ss.Delegate.create(this,this.onCommandExecuted));$0.add_ubertipActionExecuted(ss.Delegate.create(this,this.onActionExecuted));},updateTextSelectability:function(isSelectable){if(ss.isValue(this.$2_E)){this.$2_E.updateContentTextSelectability(isSelectable);}if(ss.isValue(this.$2_F)){this.$2_F.updateContentTextSelectability(isSelectable);}},updateRegionBGColor:function(){var $0=[this.get_paneTableVM().get_visualModel().get_backgroundColor(),this.get_paneTableVM().get_visualModel().get_paneBGColor(),this.get_paneTableVM().get_visualModel().get_headerBGColor()];if(ss.isValue(this.$2_17)&&_.isEqual(this.$2_17,$0)){return;}this.$2_17=$0;var $1=this.listAllRegions();var $enum1=ss.IEnumerator.getEnumerator(Object.keys($1));while($enum1.moveNext()){var $2=$enum1.current;var $3=$1[$2];if(ss.isNullOrUndefined($3)){continue;}var $4=this.get_paneTableVM().get_visualModel().get_backgroundColor();if($2==='viz'){$4=this.get_paneTableVM().get_visualModel().get_paneBGColor();}else if(tab.PaneTableView.headerRegions.contains($2)){$4=this.get_paneTableVM().get_visualModel().get_headerBGColor();}$3.css('background-color',$4);if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var $5=$('.tvimagesContainer',$3);$5.css('background-color',$4);}}this.dom.tlSpacer.css('background-color',this.get_paneTableVM().get_visualModel().get_headerBGColor());this.dom.trSpacer.css('background-color',this.get_paneTableVM().get_visualModel().get_headerBGColor());this.dom.blSpacer.css('background-color',this.get_paneTableVM().get_visualModel().get_headerBGColor());this.dom.brSpacer.css('background-color',this.get_paneTableVM().get_visualModel().get_headerBGColor());},makeRegionContentProvidersHelper:function(vizRegionDomNode,onQueueComplete){var $0=this.listNonVizRegions();if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.get_paneTableVM().add_vizRegionMapChange(ss.Delegate.create(this,this.$2_25));var $1=new tab.PaneTableCanvasView(this.get_paneTableVM(),this.getDomNodeForContentRegion(vizRegionDomNode));var $2=$('.tvimagesContainer',vizRegionDomNode);$2.get(0).appendChild($1.get_element().get(0));this.regions['viz'].set_contentProvider($1);this.get_paneTableVM().add_propertyChanged(ss.Delegate.create(this.regions['viz'],this.regions['viz'].$D));this.$2_25();this.$2_11=new tab.PaneTableOverlayView(this.get_paneTableVM(),this.getDomNodeForContentRegion(vizRegionDomNode),this.regions['viz']);this.get_paneTableVM().add_propertyChanged(ss.Delegate.create(this.$2_11,this.$2_11.$2_14));$2.get(0).appendChild(this.$2_11.get_element().get(0));}else{var $enum1=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum1.moveNext()){var $3=$enum1.current;var $4=$0[$3];var $5=this.makeTiledWindow($4,this.get_session(),this.get_controller(),ss.Delegate.create(this,this.$2_26),null);this.regions[$3].set_contentProvider($5);}this.regions['viz'].set_contentProvider(this.makeTiledWindow(vizRegionDomNode,this.get_session(),this.get_controller(),ss.Delegate.create(this,this.$2_26),onQueueComplete));}this.updateRegionBGColor();},makeTiledWindowHelper:function(domNode,sessionRef,controllerRef,getRID,optionalCallback,scrollDomNode){var $0=new tab.TiledWindow(this.getDomNodeForContentRegion(domNode),sessionRef,controllerRef,getRID,scrollDomNode);if(ss.isValue(optionalCallback)){$0.add_loadComplete(optionalCallback);this.disposables.add(new tab.CallOnDispose(function(){
$0.remove_loadComplete(optionalCallback);}));}return $0;},listNonVizRegions:function(){var $0={};$0['yheader']=this.dom.yLabel;$0['leftaxis']=this.dom.leftAxis;$0['rightaxis']=this.dom.rightAxis;$0['xheader']=this.dom.xLabel;$0['bottomaxis']=this.dom.bottomAxis;$0['topaxis']=this.dom.topAxis;return $0;},listAllRegions:function(){var $0=this.listNonVizRegions();$0['viz']=this.dom.view;return $0;},destroyRegions:function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.regions));while($enum1.moveNext()){var $0=$enum1.current;if(ss.isValue(this.regions[$0])){this.regions[$0].destroy();}}},onTooltipClosed:function(){if(!tab.FeatureParamsLookup.getBool(tab.FeatureParam.responsiveUi)){this.disposeOfOverlayImages();}},onCommandExecuted:function(senderUbertip,args){if(args.command.commandType===7){this.get_session().executeCommand(args.command);}else{tab.UberTipClientCommands.executeUbertipCommand(args.command);}},onActionExecuted:function(senderUbertip,args){var $0=function(){
(senderUbertip).hideSpinner();};var $1=function($p1_0){
(senderUbertip).hideSpinner();};this.get_session().executeAction(args.action,$1,$0);},shouldUseFullFloatingZoomToolbar:function(){return (this.ftv==='show'||(this.ftv==='auto'&&this.isMap));},doDoubleTap:function(region,pseudoEvent,scale){if(!tsConfig.allow_filter){return;}if(region.get_regionPart()==='viz'&&this.allowPanZoom()){this.get_controller().incrementCacheVersion();var $0=tab.DeferLayoutImpl.get_instance();$0.setDeferLayoutUpdates(true);var $1=this.resolvePane(region.toLocalCoordsEvent(pseudoEvent));region.zoomPoint($1,region.toLocalCoordsEvent(pseudoEvent),scale,true,$0);this.disposeOfOverlayImages();}},$2_19:function(){this.checkForHoverOverlay();if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.regions['viz'].reset();}},clearSelection:function(){tab.SelectionClientCommands.clearAllSelections(this.get_visualId());},refreshImages:function(cacheInfo){this.$2_A+=1;var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.regions));while($enum1.moveNext()){var $0=$enum1.current;this.regions[$0].refreshImages(cacheInfo);}if(this.$2_C.length>0){var $1=this.$2_C.length;for(var $2=0;$2<$1;$2++){var $3=this.$2_C[$2]['element'];if(ss.isValue($3)){var $4=this.get_session().formatRegionTileURL(cacheInfo,this.$2_C[$2]['name'],this.$2_26());var $5=$3.children().first();var $6=tab.RenderUtil.calculatePixelRatio(false);if(tab.FloatUtil.isGreaterThan($6,1)){$5.css('width',$3.width().toString()+'px');}$5.attr('src',$4);}}}},layout:function(){var $0=this.get_element().outerWidth();var $1=this.get_element().outerHeight();if(this.$2_5===$1&&this.$2_4===$0){return;}this.$2_5=$1;this.$2_4=$0;},$2_1A:function($p0,$p1){var $0=$p1.x+$p1.w;return Math.max($p0,$0);},$2_1B:function($p0,$p1){var $0=$p1.y+$p1.h;return Math.max($p0,$0);},setGeometry:function(g,containerBox){var $0=new ss.Tuple(containerBox,g);if(ss.isValue(this.$2_16)&&_.isEqual($0,this.$2_16)){this.refreshScrollingAndDrilling();return;}this.$2_16=$0;var $1=0,$2=0;var $3=0,$4=0;var $5=0,$6=0;var $7=0,$8=0,$9=0;var $A=0,$B=0;var $C=0,$D=0;var $E,$F,$10,$11,$12,$13,$14;var $15,$16,$17,$18;this.$2_C=[];this.$2_A+=1;this.visibleGeometry=tab.$create_VisibleGeometry();var $19=this.visibleGeometry;var $1A=tab.$create_GeometryWithRegions();$.extend(true,$1A,g);this.geometry=$1A;var $1B=$1A.ri.length;for(var $22=0;$22<$1B;$22++){($1A)[$1A.ri[$22].r]=$1A.ri[$22];}var $1C=containerBox.w;var $1D=containerBox.h;if(this.$2_4!==-1){$1C=this.$2_4;}if(this.$2_5!==-1){$1D=this.$2_5;}if(ss.isValue($1A.title)){$4=this.$2_1B($4,$1A.title);}if(ss.isValue($1A.xheader)){$7=$1A.xheader.x;$5=$1A.xheader.w;$4=this.$2_1B($4,$1A.xheader);}if(ss.isValue($1A.bottomaxis)){$7=$1A.bottomaxis.x;$5=$1A.bottomaxis.w;$4=this.$2_1B($4,$1A.bottomaxis);}if(ss.isValue($1A.topaxis)){$4=this.$2_1B($4,$1A.topaxis);}if(ss.isValue($1A.viz)){$7=$1A.viz.x;$5=$1A.viz.w;$4=this.$2_1B($4,$1A.viz);}if(ss.isValue($1A.caption)){$4=this.$2_1B($4,$1A.caption);}if(ss.isValue($1A.yheader)){$9=$1A.yheader.y;$6=$1A.yheader.h;$3=this.$2_1A($3,$1A.yheader);}if(ss.isValue($1A.leftaxis)){$9=$1A.leftaxis.y;$6=$1A.leftaxis.h;$3=this.$2_1A($3,$1A.leftaxis);}if(ss.isValue($1A.rightaxis)){$3=this.$2_1A($3,$1A.rightaxis);}if(ss.isValue($1A.viz)){$9=$1A.viz.y;$6=$1A.viz.h;$3=this.$2_1A($3,$1A.viz);}if($6>0){var $23=$4;if($3>$1C){$23+=tab.Metrics.get_scrollH();}if($23>$1D){$A=tab.Metrics.get_scrollW();}}if($5>0&&$3>$1C){$B=tab.Metrics.get_scrollH();}if(tab.BrowserSupport.get_isIE()&&$A>0){$A+=1;}if(tab.BrowserSupport.get_isIE()&&$B>0){$B+=1;}if($6>0){var $24=$4-$6;$D=$1D-$24-$B;$D=Math.min($6,$D);$2=$6-$D;}if($5>0){var $25=$3-$5;$C=$1C-$25-$A;$C=Math.min($5,$C);$1=$5-$C;}this.$2_15.h=Math.min($4-$2,$1D);this.$2_15.w=Math.min($3-$1,$1C);$8=this.$2_15.h;var $1E=tab.ApplicationModel.get_instance().get_isLocalRenderMode();var $1F=($1E&&ss.isValue($1A.bottomaxis))?1:0;var $20=($1E&&ss.isValue($1A.rightaxis))?1:0;if($1E){var $26=[$1A.yheader,$1A.rightaxis,$1A.leftaxis,$1A.viz];var $enum1=ss.IEnumerator.getEnumerator($26);while($enum1.moveNext()){var $28=$enum1.current;if(ss.isValue($28)){$28.h+=$1F;}}var $27=[$1A.xheader,$1A.bottomaxis,$1A.topaxis,$1A.viz];var $enum2=ss.IEnumerator.getEnumerator($27);while($enum2.moveNext()){var $29=$enum2.current;if(ss.isValue($29)){$29.w+=$20;}}}if($D<0){$D=0;}if($C<0){$C=0;}this.$2_6=0;if(ss.isValue($1A.title)&&this.dom.title.css('display')!=='none'){this.$2_6=$1A.title.h;var $2A=tab.$create_Rect(0,$1A.title.y,$1A.title.w+$A,$1A.title.h);var $2B=tab.DomUtil.getMarginBoxJQ(this.dom.title);if(!_.isEqual($2A,$2B)){tab.DomUtil.setMarginBoxJQ(this.dom.title,$2A);this.$2_E.handleNewTextRegion();$8=Math.max($8,$1A.title.h+$1A.title.y);}}$F=function(){
return tab.$create_Rect($1A.yheader.x,$1A.yheader.y,Math.min($1A.yheader.w,$1C-$A),$D+$1F);};$19.yheaderArea=this.setRegionAndContentGeometry($1A.yheader,this.dom.yLabel,$F,'yheader',$1A.ts);$10=function(){
return tab.$create_Rect($1A.leftaxis.x,$1A.leftaxis.y,$1A.leftaxis.w,$D+$1F);};$19.leftaxisArea=this.setRegionAndContentGeometry($1A.leftaxis,this.dom.leftAxis,$10,'leftaxis',$1A.ts);$11=function(){
return tab.$create_Rect($1A.rightaxis.x-$1,$1A.rightaxis.y,$1A.rightaxis.w,$D+$1F);};$19.rightaxisArea=this.setRegionAndContentGeometry($1A.rightaxis,this.dom.rightAxis,$11,'rightaxis',$1A.ts);$12=function(){
return tab.$create_Rect($1A.xheader.x,$1A.xheader.y,$C+$20,$1A.xheader.h);};$19.xheaderArea=this.setRegionAndContentGeometry($1A.xheader,this.dom.xLabel,$12,'xheader',$1A.ts);$13=function(){
return tab.$create_Rect($1A.bottomaxis.x,$1A.bottomaxis.y-$2,$C+$20,$1A.bottomaxis.h);};$19.bottomaxisArea=this.setRegionAndContentGeometry($1A.bottomaxis,this.dom.bottomAxis,$13,'bottomaxis',$1A.ts);$14=function(){
return tab.$create_Rect($1A.topaxis.x,$1A.topaxis.y,$C+$20,$1A.topaxis.h);};$19.topaxisArea=this.setRegionAndContentGeometry($1A.topaxis,this.dom.topAxis,$14,'topaxis',$1A.ts);if(this.dom.caption.css('display')!=='none'){var $2C;if(ss.isValue($1A.caption)){$8-=($1A.caption.h+8+$B);$2C=tab.$create_Rect($1A.caption.x,$1A.caption.y-$2,$1A.caption.w,$1A.caption.h);}else{$2C=tab.$create_Rect(0,0,0,0);}var $2D=tab.DomUtil.getMarginBoxJQ(this.dom.caption);if(!_.isEqual($2C,$2D)){tab.DomUtil.setMarginBoxJQ(this.dom.caption,$2C);this.$2_F.handleNewTextRegion();}}var $21=null;if($1E){var $2E=this.get_paneTableVM().get_vizRegionMap()['background'];if(ss.isValue($2E)){$21=$2E.get_visualListPM().au0;}}$15=function(){
return tab.$create_Rect($1A.uleft.x,$1A.uleft.y,Math.min($1A.uleft.w,$1C-$A),$1A.uleft.h);};$19.uleftArea=this.$2_1C($1A.uleft,this.dom.tlSpacer,$15);if(ss.isValue($1A.uleft)){this.$2_1D(this.dom.tlSpacer,'uleft',$21,$1A.uleft);this.$2_8=$.extend({},$19.uleftArea);if(ss.isValue($1A.di)&&$1A.uleft.h>=40){this.$2_8.t=$1A.uleft.y+$1A.uleft.h-40;this.$2_8.h=40;}this.$2_7=null;if(ss.isValue($1A.di)&&ss.isValue($1A.di.xy)&&ss.isValue($1A.di.xy[0])){var $2F=18;var $30=$1A.xheader;if(ss.isValue($30)&&$30.h>$1A.di.xs){$1B=$1A.di.xy.length;for(var $31=0;$31<$1B;$31++){if($1A.di.xy[$31][1]>0){this.$2_7=tab.$create_Rect(this.$2_8.l+this.$2_8.w-$2F,$1A.uleft.y,$2F,$1A.uleft.h);this.$2_8.w=this.$2_7.l;break;}}}}}else{this.$2_8=null;this.$2_7=null;}$16=function(){
return tab.$create_Rect($1A.uright.x-$1,$1A.uright.y,Math.min($1A.uright.w,$1C-$A),$1A.uright.h);};this.$2_1C($1A.uright,this.dom.trSpacer,$16);if(ss.isValue($1A.uright)){this.$2_1D(this.dom.trSpacer,'uright',$21,$1A.uright);}$17=function(){
return tab.$create_Rect($1A.lleft.x,$1A.lleft.y-$2,$1A.lleft.w,$1A.lleft.h);};this.$2_D=this.$2_1C($1A.lleft,this.dom.blSpacer,$17);if(ss.isValue($1A.lleft)){this.$2_1D(this.dom.blSpacer,'lleft',$21,$1A.lleft);}$18=function(){
return tab.$create_Rect($1A.lright.x-$1,$1A.lright.y-$2,$1A.lright.w,$1A.lright.h);};this.$2_1C($1A.lright,this.dom.brSpacer,$18);if(ss.isValue($1A.lright)){this.$2_1D(this.dom.brSpacer,'lright',$21,$1A.lright);}$E=function(){
return tab.$create_Rect($1A.viz.x,$1A.viz.y,$C+$20,$D+$1F);};this.setRegionAndContentGeometry($1A.viz,this.dom.view,$E,'viz',$1A.ts);this.setGeometryForWebScrollbars($D,$C,$A,$B,$9,this.$2_15.w,$8,$7,$6,$5);this.refreshScrollingAndDrilling();},$2_1C:function($p0,$p1,$p2){if(ss.isValue($p0)){var $0=$p2();tab.DomUtil.setMarginBoxJQ($p1,$0);this.setRegionGeometryHelper($p1,$0);$p1.show();return tab.DomUtil.getMarginBoxJQ($p1);}else{$p1.hide();return null;}},$2_1D:function($p0,$p1,$p2,$p3){if(ss.isValue($p2)){var $0=this.$2_1E($p0,'canvas');var $1=tab.CanvasRenderer.getRenderContext($0);var $2=$p0.width();var $3=$p0.height();var $4=tab.$create_Size($2,$3);var $5=new tab.DisplayList2DRenderer($0,$1);tab.CanvasUtil.sizeCanvasWithHighDPISupport($0,$1,$4);$1.setDefaultPropertyValues();$5.set_renderOffset(tab.$create_Point($p3.x,$p3.y));var $6=null;if(ss.isValue(this.get_paneTableVM())&&ss.isValue(this.get_paneTableVM().get_scene())){$6=this.get_paneTableVM().get_scene().get_imageDictionary();}$5.renderDrawItems($p2,null,$6,null);}else if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.$2_1E($p0,'div');}else{this.$2_1E($p0,'img');this.$2_C.add({name:$p1,element:$p0});}},$2_1E:function($p0,$p1){var $0=$p0.get(0).firstChild;if(!String.equals($0.tagName,$p1,true)){$0=document.createElement($p1);$p0.children().first().replaceWith($0);}return $0;},setRegionAndContentGeometry:function(rect,domNode,boxFunc,regionKey,tileSize){var $0=this.$2_1C(rect,domNode,boxFunc);if(ss.isValue(rect)){var $1=boxFunc();this.regions[regionKey].setGeometry(rect,$1,tileSize);if(regionKey==='viz'&&ss.isValue(this.$2_11)){this.$2_11.set_actualViewSize(tab.$create_Size($1.w,$1.h));this.$2_11.reset(rect,tileSize);}}return $0;},resolvePane:function(point){var $0,$1;var $2=this.geometry.pi;var $3=tab.$create_Point(point.x,point.y);var $4=tab.$create_PaneInfo($2.hasXQAxis,$2.hasYQAxis,0,0,0,0);$1=$2.xWidths.length;for($0=0;$0<$1;$0++){if($3.x<$4.x+$2.xWidths[$0]){$4.tx=$0;$4.w=$2.xWidths[$0];break;}$4.x=$4.x+$2.xWidths[$0];}$1=$2.yHeights.length;for($0=0;$0<$1;$0++){if($3.y<$4.y+$2.yHeights[$0]){$4.ty=$0;$4.h=$2.yHeights[$0];break;}$4.y=$4.y+$2.yHeights[$0];}return $4;},allowPanZoom:function(){if(ss.isNullOrUndefined(this.geometry)){return false;}var $0=this.geometry.pi.hasXQAxis;var $1=this.geometry.pi.hasYQAxis;return ($0||$1)&&tsConfig.allow_filter;},isOneVisiblePane:function(){if(ss.isValue(this.geometry)&&ss.isValue(this.geometry.viz)){var $0,$1;var $2=this.geometry.viz.w;var $3=this.geometry.viz.h;var $4=this.geometry.pi.xWidths;var $5=this.geometry.pi.yHeights;$1=$4.length;for($0=0;$0<$1;$0++){if(Math.abs($2-$4[$0])>1){return false;}}$1=$5.length;for($0=0;$0<$1;$0++){if(Math.abs($3-$5[$0])>1){return false;}}}return true;},createOverlayImageFromDataUri:function(imageDataUri){var $0=new tab.OverlayImage(this.dom.view.find('.tvimagesContainer').get(0),'data:image/png;base64,'+imageDataUri);return $0;},createOverlayImageFromFile:function(uri){var $0=new tab.OverlayImage(this.dom.view.find('.tvimagesContainer').get(0),this.get_session().formatSessionTempfileReference(uri,false,false));return $0;},updateOverlayTarget:function(target,targetState,visualPart){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return;}if(!tab.FeatureParamsLookup.getBool(tab.FeatureParam.responsiveUi)){return;}if(!tab.FeatureFlags.isEnabled('AnalyticsObjectsHoverlays')){return;}switch(targetState){case 'press':this.$2_11.setPressedOverlayTarget(target,visualPart);break;case 'hover':this.$2_11.setHoverOverlayTarget(target,visualPart);break;default:break;}},updateOverlayForLastTargetState:function(target,visualPart){this.updateOverlayTarget(target,this.$2_11.get_lastTargetState(),visualPart);},hoverOverWhitespace:function(){this.$2_11.hoverOverWhitespace();},updateCategoricalHeaders:function(drawGroup,targetState,visualPart){var $0=this.get_paneTableVM().get_vizRegionMap()[visualPart];if(ss.isNullOrUndefined($0)){return;}switch(targetState){case 'press':$0.set_hoverNode(null);break;case 'hover':$0.set_hoverNode((this.$2_1F(drawGroup))?drawGroup:null);break;default:break;}},$2_1F:function($p0){var $0=this.get_paneTableVM().get_visualModel();if(ss.isValue($0)&&ss.isValue($p0)){return $0.get_vizDataModel().isHeaderFullyNotQuantitative($p0.zk);}return false;},showOverlayImages:function(overlayImage,overlayAnchors){if(ss.isValue(overlayAnchors)&&ss.isValue(overlayImage)&&overlayAnchors.length>0){this.disposeOfOverlayImages();for(var $0=1;$0<overlayAnchors.length;++$0){var $1=overlayImage.clone();this.$2_2.add($1);$1.show(overlayAnchors[$0]);}this.$2_2.add(overlayImage);overlayImage.show(overlayAnchors[0]);}},clickTitle:function(e){},clickCaption:function(e){},makeConnections:function(){},setupDrilling:function(){},setupSortIndicators:function(){},setGeometryForWebScrollbars:function(viewHeight,viewWidth,scrollWidth,scrollHeight,scrollYTop,overallWidth,scrollXTop,scrollXLeft,scrollableHeight,scrollableWidth){},disposeOfOverlayImages:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$2_2);while($enum1.moveNext()){var $0=$enum1.current;if(ss.isValue($0)){$0.dispose();}}this.$2_2.clear();if(ss.isValue(this.$2_11)){this.$2_11.clearOverlays();}if(ss.isValue(this.$2_13)){window.clearTimeout(this.$2_13);this.$2_13=null;}},$2_20:function($p0){if(ss.isValue(this.$2_11)){this.$2_11.setScrollPosition($p0);}},checkForDragOverlays:function(){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.responsiveUi)){if(ss.isValue(this.$2_13)){return;}var $0=this.$2_12+100-Date.get_now().getTime();if($0<=0){this.$2_21();}else{this.$2_13=window.setTimeout(ss.Delegate.create(this,function(){
this.$2_21();}),Math.min($0,100));}}},$2_21:function(){this.$2_13=null;this.$2_12=Date.get_now().getTime();var $0=tab.HitTestResult.getIdsFromHitTestResults(this.regions['viz'].hitTestMarksAgainstSelectionShape());this.$2_11.setDragOverlayTuples($0);},updateRegionContentProvider:function(regionKey,canvasView){this.regions[regionKey].set_contentProvider(canvasView);},isSelectActionOnVizAllowed:function(action){return true;},handleLocalTap:function(region,action,pageCoords,regionCoords){var $0=false;if(this.isSelectActionOnVizAllowed(action)){if(region.get_regionPart()==='viz'){var $1=region.doSelectFromPoint(regionCoords,action);var $2=null;if($1.first.length===1){if(ss.isValue(this.get_paneTableVM())&&ss.isValue(this.get_paneTableVM().get_scene())&&$1.second==='mark'){$2=tab.SceneUtils.getPaneDescriptorKeyFromTupleId($1.first[0],this.get_paneTableVM().get_scene().get_scene());}this.get_vizToolTip().singleSelectComplete(pageCoords,regionCoords,$1.first[0],$2,$1.second,region.get_regionPart());$0=true;}}else if(ss.isValue(region.get_contentProvider())){var $3=region.hitTestNodes(regionCoords);var $4=ss.isValue($3);if($4){var $5=ss.Delegate.create(this,function(){
this.get_vizToolTip().singleSelectCoordinates(pageCoords,regionCoords,region.get_regionPart(),'header');});region.selectNode(regionCoords,$3,action,$5);$0=true;}else{tab.SelectionClientCommands.clearAllSelections(this.get_visualId());}}if(!$0){this.get_vizToolTip().hoverOverWhitespace(pageCoords,region.get_regionPart());}}},handleNewVisual:function(){var $0={top:'0px',left:'0px',right:'0px',bottom:'0px'};this.get_template().get_domRoot().css($0);if(this.get_paneTableVM().isInvalidSheet()){$('<div/>').text(tab.Strings.BaseClientInvalidSheet(this.get_paneTableVM().get_sheetId())).addClass('wcInvalidSheet').appendTo(this.get_template().get_domRoot()).get(0);return;}if(this.$2_10){return;}var $1=this.get_paneTableVM().get_visualModel();if(ss.isNullOrUndefined($1)){return;}this.regions['viz'].$13();var $2=$1.get_geometryModel().get_presModel();this.setGeometry($2,$1.get_containerGeometry());this.isMap=$1.get_isMap();var $3=false;if(this.get_mapsSearchEnabled()){if(ss.isNullOrUndefined(this.get_paneTableVM().get_mapsSearchViewModel())||ss.isNullOrUndefined(this.mapsSearchView)){this.get_paneTableVM().set_mapsSearchViewModel(new tab.MapsSearchViewModel(this.get_paneTableVM().get_visualId()));this.get_paneTableVM().get_mapsSearchViewModel().add_onMoveMapToBounds(ss.Delegate.create(this,this.handleMoveMapToBounds));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_paneTableVM().get_mapsSearchViewModel().remove_onMoveMapToBounds(ss.Delegate.create(this,this.handleMoveMapToBounds));})));this.mapsSearchView=spiff.ObjectRegistry.newView(tab.MapsSearchView,this.get_paneTableVM().get_mapsSearchViewModel());this.makeMapsSearchViewConnections();this.mapsSearchView.set_isCollapsed(true);this.mapsSearchView.addClass('tabSuppressVizTooltipsAndOverlays');}if(!this.$2_18){this.mapsSearchView.addToDom(this.dom.view);this.$2_18=true;$3=true;}}else{if(ss.isValue(this.mapsSearchView)){if(this.$2_18){var $5=this.mapsSearchView.get_element()[0].parentNode;if(ss.isValue($5)){$5.removeChild(this.mapsSearchView.get_element()[0]);this.$2_18=false;$3=true;}}this.mapsSearchView.set_isCollapsed(true);this.mapsSearchView.set_isVisible(false);}}var $4=$1.get_floatingToolbarVisibility();if(ss.isValue(this.zoomToolbar)&&(this.ftv!==$4||!!$3)){this.zoomToolbar.dispose();this.zoomToolbar=null;}this.ftv=$4;if(this.get_paneTableVM().shouldEnableZoomHomeToolbar()&&ss.isNullOrUndefined(this.zoomToolbar)){this.createZoomToolbar();}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.setZoomHomePossibility(this.get_paneTableVM().shouldEnableZoomHomeToolbar());}this.updateRegionBGColor();this.$2_22();},$2_22:function(){var $0=this.get_paneTableVM().get_mapServerModel();if(ss.isValue($0)&&$0.get_hasPresModel()&&$0.get_isAttributionVisible()){if(ss.isNullOrUndefined(this.$2_14)){this.$2_14=new tab.MapAttributionTemplate();this.$2_14.attributionBackground.css('background-color',$0.get_attributionBGColor());this.$2_14.attributionLink.text($0.get_attributionText());this.$2_14.attributionLink.css('color',$0.get_attributionTextColor());this.$2_14.attributionLink.css('font-size',$0.get_attributionTextSize());this.$2_14.attributionLink.attr('href',$0.get_attributionUrl());this.$2_14.attributionLink.attr('target','_blank');this.dom.view.append(this.$2_14.get_domRoot());this.$2_23();}}else{if(ss.isValue(this.$2_14)){this.$2_14.dispose();this.$2_14=null;}}},$2_23:function(){if(ss.isValue(this.$2_14)){var $0=1;var $1=1;var $2=this.regions['viz'].get_contentProvider().get_effectiveViewSize();var $3=this.regions['viz'].get_contentProvider().get_docSize();var $4=Math.min(0,$2.h+this.$2_9.y-$3.h);$4+=$0;var $5=Math.min(0,-this.$2_9.x);$5+=$1;this.$2_14.get_domRoot().css('bottom',$4+'px');this.$2_14.get_domRoot().css('left',$5+'px');}},$2_24:function(){var $0=this.get_paneTableVM().get_cacheUrlInfo();this.refreshImages($0);},$2_25:function(){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var $0=this.listNonVizRegions();this.regions['viz'].$E();var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.get_paneTableVM().get_vizRegionMap()));while($enum1.moveNext()){var $1=$enum1.current;var $2=tab.ModelUtils.visualPartToRegionMap[$1];if(ss.isValue($2)&&ss.isValue(this.regions[$2])){if(ss.isNullOrUndefined(this.regions[$2].get_contentProvider())){var $3=$0[$2];if($3!=null){var $4=this.get_paneTableVM().get_vizRegionMap()[$1];var $5=new tab.SimpleRegionCanvasView($4,this.getDomNodeForContentRegion($3),this.get_paneTableVM());$3.find('.tvimagesContainer').append($5.get_element());this.updateRegionContentProvider($2,$5);$5.invalidate(false);this.$2_16=null;}}else{this.regions[$2].$E();}}}var $enum2=ss.IEnumerator.getEnumerator(Object.keys(tab.ModelUtils.visualPartToRegionMap));while($enum2.moveNext()){var $6=$enum2.current;var $7=tab.ModelUtils.visualPartToRegionMap[$6];if(!Object.keyExists(this.get_paneTableVM().get_vizRegionMap(),$6)&&ss.isValue(this.regions[$7])&&ss.isValue(this.regions[$7].get_contentProvider())){this.regions[$7].get_contentProvider().destroy();this.regions[$7].set_contentProvider(null);}}}},$2_26:function(){return this.$2_3.toString()+'Z'+this.$2_A.toString();},showFloatingZoomToolbar:function(show){if(show&&ss.isNullOrUndefined(this.zoomToolbar)){this.createZoomToolbar();}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.setZoomHomePossibility(this.get_paneTableVM().shouldEnableZoomHomeToolbar());this.zoomToolbar.setActiveState(show);}},createZoomToolbar:function(){if(tsConfig.allow_filter){this.zoomToolbar=this.makeFloatingZoomToolbar(this.dom.view);}},handleMoveMapToBounds:function(bounds){if(ss.isValue(this.regions['viz'])&&!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.mapsUseLeafletForGeoSearch)){this.regions['viz'].moveMapToBounds(bounds);}},$2_27:function(){var $0=ss.Delegate.create(this,function($p1_0){
var $1_0=spiff.$create_EventHandleSpec();$1_0.tap=ss.Delegate.create(this,function($p2_0){
$p2_0.stopPropagation();$p2_0.preventDefault();this.clearSelection();});this.disposables.add(new spiff.TableauEventHandler($p1_0.get(0),$1_0));});$0(this.dom.tlSpacer);$0(this.dom.trSpacer);$0(this.dom.blSpacer);$0(this.dom.brSpacer);$0(this.dom.title);$0(this.dom.caption);},$2_28:function(){this.disposables.add(new tab.SubscriptionDisposable(this.get_session().registerEventListener('selectionChanged',ss.Delegate.create(this,this.$2_19))));},onAddedToDom:function(){tab.PaneTableView.callBaseMethod(this, 'onAddedToDom');this.handleNewVisual();if(this.get_paneTableVM().get_visualModel().get_isVisualValid()){this.$2_24();}},checkForSuppressTooltipsAndOverlays:function(element){var $0=$(element);var $1=$0.hasClass('tabSuppressVizTooltipsAndOverlays')||$0.parents('.'+'tabSuppressVizTooltipsAndOverlays').length>0;this.get_vizToolTip().get_tooltip().setSuppressTooltip($1);if($1){this.disposeOfOverlayImages();}},$2_29:function(){if(ss.isNullOrUndefined(this.$2_B)){this.$2_B=this.makeTooltip();this.connectTooltipEventHandlers();}}}
tab.PaneTableTemplate=function(root){tab.PaneTableTemplate.initializeBase(this,[root]);var $0=ss.Delegate.create(this,this.getElementBySelector);this.enclosingDiv=$0('.tab-clip');this.yLabel=$0('.tab-tvYLabel');this.leftAxis=$0('.tab-tvLeftAxis');this.rightAxis=$0('.tab-tvRightAxis');this.xLabel=$0('.tab-tvXLabel');this.bottomAxis=$0('.tab-tvBottomAxis');this.topAxis=$0('.tab-tvTopAxis');this.view=$0('.tab-tvView');this.title=$0('.tab-tvTitle');this.caption=$0('.tab-tvCaption');this.tlSpacer=$0('.tab-tvTLSpacer');this.trSpacer=$0('.tab-tvTRSpacer');this.blSpacer=$0('.tab-tvBLSpacer');this.brSpacer=$0('.tab-tvBRSpacer');$0('.tvViewportBorders').append($(tab.PaneTableTemplate.$1_0));}
tab.PaneTableTemplate.prototype={enclosingDiv:null,yLabel:null,leftAxis:null,rightAxis:null,xLabel:null,bottomAxis:null,topAxis:null,view:null,title:null,caption:null,tlSpacer:null,trSpacer:null,blSpacer:null,brSpacer:null}
tab.MapAttributionTemplate=function(){tab.MapAttributionTemplate.initializeBase(this,[$(tab.MapAttributionTemplate.$1_0)]);this.attributionBackground=this.getElementBySelector('.tabMapAttributionBackground');this.attributionLink=this.getElementBySelector('.tabMapAttributionLink');}
tab.MapAttributionTemplate.prototype={attributionBackground:null,attributionLink:null}
tab.ParameterControlView=function(viewModel){tab.ParameterControlView.initializeBase(this,[viewModel,new tab.ParameterControlTemplate()]);this.$2_0=viewModel;this.$2_0.add_newParameterControl(ss.Delegate.create(this,this.handleNewParameterControl));this.$2_0.add_resized(ss.Delegate.create(this,this.updateSize));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newParameterControl(ss.Delegate.create(this,this.handleNewParameterControl));})));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_resized(ss.Delegate.create(this,this.updateSize));})));if(this.$2_0.get_hasBorder()){this.get_template().get_domRoot().addClass('tabBordered');}}
tab.ParameterControlView.prototype={$2_0:null,$2_1:null,get_zonePresModel:function(){return this.$2_0.get_zone();},get_domRoot:function(){return this.get_template().get_domRoot();},get_$2_3:function(){return this.$2_0.get_frame();},dispose:function(){if(ss.isValue(this.$2_1)){this.$2_1.destroyRecursive(false);this.$2_1=null;}tab.ParameterControlView.callBaseMethod(this, 'dispose');},onAddedToDom:function(){tab.ParameterControlView.callBaseMethod(this, 'onAddedToDom');if(ss.isValue(this.$2_0.get_parameterCtrlModel())){this.handleNewParameterControl();}},handleNewParameterControl:function(){if(ss.isNullOrUndefined(this.$2_1)){this.$2_1=this.createParameterControl();this.get_template().get_domRoot().append(this.$2_1.domNode);this.$2_1.startup();tab.DomUtil.resize(this.$2_1,tab.ZoneView.viewRect(this.get_zonePresModel()));}else{var $0=this.createParameterControlProperties();this.$2_1.updateProperties($0);}this.$2_1.layout();},updateSize:function(){tab.DomUtil.resize(this.$2_1,tab.ZoneView.viewRect(this.get_zonePresModel()));this.$2_1.layout();},createParameterControlProperties:function(){var $0={};$0.session=this.$2_0.get_layoutSession();$0.zid=this.get_zonePresModel().aay.toString();$0.field=this.get_$2_3().param;if(ss.isValue(this.get_zonePresModel().ayq.agi)){$0.backgroundColor=this.get_zonePresModel().ayq.agi;}$0.titleH=this.get_$2_3().titleH;$0.titleW=this.get_$2_3().titleW;if(ss.isValue(this.get_zonePresModel().ax3)){$0.titleHTML=this.get_zonePresModel().ax3.tg;var $1=this.get_zonePresModel().ax3.wb;$0.titleW=(!$0.titleW)?0:$1;}if(ss.isValue(this.get_$2_3().format)){$0.format=this.get_$2_3().format;}if(ss.isValue(this.get_$2_3().attributes)){$0.attributes=this.get_$2_3().attributes;}$0.viewModel=this.$2_0;return $0;},createParameterControl:function(){var $0=this.createParameterControlProperties();this.$2_1=this.makeParameterControl($0);return this.$2_1;},makeParameterControl:function(oProps){return new tableau.base.widget.ParameterControl(oProps);}}
tab.ParameterControlTemplate=function(){tab.ParameterControlTemplate.initializeBase(this,[$("<div class='tab-parameter'></div>")]);}
tab.QuantitativeColorLegendView=function(viewModel){tab.QuantitativeColorLegendView.initializeBase(this,[viewModel,new tab.QuantitativeColorLegendTemplate()]);}
tab.QuantitativeColorLegendView.setDomNodeStyleSize=function(domNode,width,height){domNode.css('width',width+'px');domNode.css('height',height+'px');}
tab.QuantitativeColorLegendView.prototype={get_$2_6:function(){return this.get_viewModel();},get_$2_7:function(){return this.get_template();},onAddedToDom:function(){tab.QuantitativeColorLegendView.callBaseMethod(this, 'onAddedToDom');this.$2_9();},onViewModelPropertyChanged:function(sender,e){if(e.get_propertyName()==='isActiveZone'){}else if(e.get_propertyName()==='ParentZoneSizeChanged'){var $0=this.get_$2_6().get_$1_3();if($0.w===this.get_$2_7().panel.width()&&$0.h===this.get_$2_7().panel.height()){}else{this.$2_8();}}else if(e.get_propertyName()==='ModelChanged'){this.$2_8();}},$2_8:function(){this.$2_9();},$2_9:function(){this.drawTitle();var $0='tableau_qcolor_legend_'+encodeURIComponent((this.get_$2_6().get_visualId().st));this.get_$2_7().panel.get(0).id=$0;var $1=this.get_$2_6().get_quantColorLegendPresModel();var $2=this.get_$2_6().get_$1_3().w;var $3=this.get_$2_6().get_$1_3().h;if(!this.get_legendViewModel().get_titleInline()){this.get_$2_7().titleArea.width($2);}tab.QuantitativeColorLegendView.setDomNodeStyleSize(this.get_$2_7().panel,$2,$3);var $4=$.extend(true,{},$1.asg.aqi);var $5=this.get_$2_7().ramp;var $6=$5.get(0);var $7=new tab.TabRenderContext2D($6.getContext('2d'));$7.save();tab.DisplayList2DRenderer.setTextProperties($7,$1.ayy,0);var $8=$1.asg.aqj.v9+$1.asg.aqj.wb<$4.v9;var $A=$1.asg.aqj;var $B=this.get_$2_7().minLabel;$B.css('left',$A.v9.toString()+'px');$B.css('top',$A.wa.toString()+'px');$B.css('width',$A.wb.toString()+'px');$B.css('height',$A.wc.toString()+'px');$B.css('line-height',$A.wc.toString()+'px');$B.css('text-align',($1.asg.fd)?'center':'left');var $C=$1.ayy;$B.css(tab.FormattingConverters.$4($C,null));$B.text($1.nm);if($8){var $D=Math.round($7.measureText($1.nm).width)-$A.wb;$D=this.$2_A($D,$4.wb);if($D>0){$4.v9+=$D;$4.wb-=$D;}}var $9=this.get_$2_7().maxLabel;if($1.asg.fd){$9.css('visibility','hidden');}else{$9.css('visibility','visible');var $E=$1.asg.aqk;$9.css('left',$E.v9.toString()+'px');$9.css('top',$E.wa.toString()+'px');$9.css('width',$E.wb.toString()+'px');$9.css('height',$E.wc.toString()+'px');$9.css('line-height',$E.wc.toString()+'px');$9.css('text-align','right');var $F=$1.ayy;$9.css(tab.FormattingConverters.$4($F,null));$9.text($1.nl);if($8){var $10=Math.max(0,Math.round($7.measureText($1.nl).width)-$E.wb);$10+=this.get_$2_6().get_borderWidth()*2;$10=this.$2_A($10,$4.wb);if($10>0){$9.css('left',($E.v9-$10).toString()+'px');$4.wb-=$10;}}}$7.restore();$5.css('left',$4.v9.toString()+'px');$5.css('top',$4.wa.toString()+'px');var $11=$1.ayr.abh*2;var $12=$4.wb-$11+1;var $13=$4.wc-$11+1;$5.css('width',$12+'px');$5.css('height',$13+'px');var $14=tab.$create_Size($12,$13);tab.CanvasUtil.sizeCanvasWithHighDPISupport($6,$7,$14);$7.save();var $15=this.get_$2_6().get_rampColorSamplesAsColorModels();var $16=$15.length;if($1.fe){var $17=0;var $18=Math.round($12/$16);for(var $1A=0;$1A<$16-1;++$1A){$7.set_shapeFillStyle($15[$1A]);$7.fillRect($17,0,$18+1,$13);$17+=$18;}var $19=$6.width-$17;$7.set_shapeFillStyle($15[$16-1]);$7.fillRect($17,0,$19,$13);}else{var $1B=$7.createLinearGradient(0,0,$12,0);var $1C=1/($16-1);for(var $1D=0;$1D<$16;++$1D){var $1E=$1D*$1C;$1B.addColorStop($1E,$15[$1D]);}$7.set_shapeFillStyle($1B);$7.fillRect(0,0,$12,$13);}$7.restore();var $1F=tab.FormattingConverters.$5($1.ayr);$5.css($1F);if($1.ff){this.get_$2_7().centerMark.css('visibility','visible');var $20=$1.asg.aq6.v9;var $21=$1.asg.aq6.wa;var $22=$1.asg.aq7.wa;var $23=$22-$21;if($8&&$4.wb!==$1.asg.aqi.wb){var $24=$1.asg.aqi;var $25=($20-$24.v9)/$24.wb;$20=$4.v9+Math.ceil($25*$4.wb);}this.get_$2_7().centerMark.css('left',$20.toString()+'px');this.get_$2_7().centerMark.css('top',$21.toString()+'px');this.get_$2_7().centerMark.width(1);this.get_$2_7().centerMark.height($23);this.get_$2_7().centerMark.css('background-color','black');}else{this.get_$2_7().centerMark.css('visibility','hidden');}},$2_A:function($p0,$p1){var $0=0;if($p0>0&&$p1>1){$0=Math.min($p0,Math.floor($p1*0.15));}return $0;}}
tab.QuantitativeColorLegendTemplate=function(){tab.QuantitativeColorLegendTemplate.initializeBase(this,[$("\n            <div class='tabLegendPanel' style='position: relative; overflow: hidden'>\n                <div class='tabLegendTitle' style='position: absolute'></div>\n                <canvas class='tabLegendRamp' style='position: absolute'></canvas>\n                <div class='tabLegendCenterMark' style='position: absolute'></div>\n                <div class='tabLegendMinLabel' style='position: absolute'></div>\n                <div class='tabLegendMaxLabel' style='position: absolute'></div>\n            </div>")]);this.panel=this.get_domRoot();this.ramp=this.getElementBySelector('.tabLegendRamp');this.centerMark=this.getElementBySelector('.tabLegendCenterMark');this.minLabel=this.getElementBySelector('.tabLegendMinLabel');this.maxLabel=this.getElementBySelector('.tabLegendMaxLabel');}
tab.QuantitativeColorLegendTemplate.prototype={panel:null,ramp:null,centerMark:null,minLabel:null,maxLabel:null}
tab.ImageZoneView=function(viewModel,parentZoneViewModel){tab.ImageZoneView.initializeBase(this,[viewModel,new tab.ImageZoneTemplate()]);this.$2_0=parentZoneViewModel;this.get_$2_3().add_newImageZone(ss.Delegate.create(this,this.handleNewImageZone));this.$2_0.add_resizeZone(ss.Delegate.create(this,this.$2_7));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$2_3().remove_newImageZone(ss.Delegate.create(this,this.handleNewImageZone));this.$2_0.remove_resizeZone(ss.Delegate.create(this,this.$2_7));this.$2_0=null;})));}
tab.ImageZoneView.prototype={$2_0:null,$2_1:null,$2_2:null,get_domRoot:function(){return this.get_template().get_domRoot();},get_image:function(){return this.$2_1;},get_$2_3:function(){return this.get_viewModel();},onAddedToDom:function(){tab.ImageZoneView.callBaseMethod(this, 'onAddedToDom');this.handleNewImageZone();},handleNewImageZone:function(){this.createImageZoneView();},createImageZoneView:function(){var $0={position:'absolute',overflow:'hidden',top:'0px',left:'0px',right:'0px',bottom:'0px'};this.get_template().get_domRoot().css($0);if(!this.$2_4()){this.$2_1=this.$2_5();}else{this.$2_8();}},$2_4:function(){var $0=this.get_image();if(ss.isNullOrUndefined($0)||$0.attr('src')!==this.get_$2_3().get_imageUrl()){return false;}else{var $1=$0.get(0).width;var $2=$0.get(0).height;if(!$1&&!$2){return false;}}return true;},$2_5:function(){var $0=$('<img>');var $1=ss.Delegate.create(this,function(){
if(this.$2_1==null){window.setTimeout(ss.Delegate.create(this,function(){
this.$2_2=$0.get(0);this.$2_8();}),1);}else{this.$2_2=$0.get(0);this.$2_8();}$0.unbind('load');});$0.bind('load',$1);var $2=this.get_$2_3().get_imageUrl();$0.css('border','none').attr('src',$2);if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<7){$0.css('position','absolute');}return $0;},$2_6:function($p0){this.get_template().get_domRoot().empty();this.get_template().get_domRoot().append($p0);},$2_7:function(){this.$2_8();},$2_8:function(){var $0=this.get_$2_3().get_imageZonePresModel();if($0.at){this.$2_B();}var $1=this.$2_A();this.$2_6($1);if($0.au){this.$2_C($1);}return $1;},$2_9:function(){var $0=this.get_$2_3().get_zonePresModel();var $1=this.get_$2_3().get_imageZonePresModel();var $2=tab.URIUtil.absolutizeURI($1.s9);var $3=($0.akp==='bitmap'&&!tab.MiscUtil.isNullOrEmpty($1.sq)&&!tab.MiscUtil.isNullOrEmpty($2));if($3){return $('<a/>').attr('href',$2).attr('target','_blank').css({position:'absolute',outline:'none'});}else{return $('<div/>');}},$2_A:function(){var $0=this.get_image();var $1=this.$2_9();$1.append($0);return $1;},$2_B:function(){var $0=this.get_$2_3().get_zonePresModel();var $1=this.$2_2.width;var $2=this.$2_2.height;if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()>8){$1=this.$2_2.naturalWidth;$2=this.$2_2.naturalHeight;}var $3=0;var $4=0;var $5;if($1/$0.wb>=$2/$0.wc){$5={width:$0.wb.toString()+'px',height:'auto'};$3=$0.wb;$4=parseInt((($0.wb/$1)*$2));}else{$5={height:$0.wc.toString()+'px',width:'auto'};$4=$0.wc;$3=parseInt((($0.wc/$2)*$1));}if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()>8){var $6=window.screen.deviceXDPI;var $7=window.screen.systemXDPI;var $8=($6/$7)>1;if(!$8&&$3>0&&$4>0&&$3/$1<0.75&&$1<500&&$2<500){var $9=this.$2_1.get(0).getAttribute('src');var $A=tab.ImageUtil.scaleImage(this.$2_2,$3,$4,$1,$2);this.$2_1=$($A);this.$2_1.get(0).setAttribute('src',$9);$5={width:$3+'px',height:$4+'px'};}else{this.$2_1=$(this.$2_2);}}this.$2_1.css($5);},$2_C:function($p0){var $0=this.get_$2_3().get_zonePresModel();var $1=($0.wc-this.get_image().height())/2;var $2=($0.wb-this.get_image().width())/2;$p0.css({position:'absolute',top:$1.toString()+'px',left:$2.toString()+'px'});}}
tab.ImageZoneTemplate=function(){tab.ImageZoneTemplate.initializeBase(this,[$("<div class='tab-image'></div>")]);}
tab.QuantitativeDateFilter=function(props){this.$1_10=tab.DateTimeAutoFormatMode.showDateOnly;tab.QuantitativeDateFilter.initializeBase(this,[props]);}
tab.QuantitativeDateFilter.getDateTimeFormatMode=function(values,aggType,format,previousShowMode){if(ss.isNullOrUndefined(format)||ss.isNullOrUndefined((format).isAutoFormat)||!(format).isAutoFormat){return tab.DateTimeAutoFormatMode.showDateOnly;}if(tab.QuantitativeDateFilter.isPureTime(values,aggType)){return tab.DateTimeAutoFormatMode.showTimeOnly;}if(previousShowMode===tab.DateTimeAutoFormatMode.showFullDateTime){return tab.DateTimeAutoFormatMode.showFullDateTime;}var $enum1=ss.IEnumerator.getEnumerator(values);while($enum1.moveNext()){var $0=$enum1.current;if(tableau.format.isDateTimeWithNonMidnightTime($0)){return tab.DateTimeAutoFormatMode.showFullDateTime;}}return tab.DateTimeAutoFormatMode.showDateOnly;}
tab.QuantitativeDateFilter.isPureTime=function(values,aggType){var $0=tab.FilterModel.timestampsWithSameDateOrNull(values);var $1=(aggType==='trunc-qtr'||aggType==='trunc-week'||aggType==='trunc-day');return $0&&!$1;}
tab.QuantitativeDateFilter.prototype={$1_11:null,$1_12:null,$1_13:false,get_editingFormat:function(){return this.oFilter.editing_format;},postCreate:function(){this.inherited(arguments);var $0=this.oFilter.date_format;var $1=$0.locale_formatting_strings;var $2=this.get_editingFormat();var $3=$1.narrowDay;$3.shift();var $4=this.oFilter.first_day_of_week;if(ss.isValue($4)){$4=$4-1;}var $5=new Date();var $6=new Date(Date.UTC($5.getFullYear(),$5.getMonth(),$5.getDate()));this.$1_11=new tab.DatePicker(new tab.DatePickerSettings($6,$6,null,null,$4,$3,$1.todayFormatTemplate,function($p1_0){
return tableau.format.formatCustomJSDateTime($p1_0,tableau.format.mapIcuToOleFormat($0.yearMonthFormat),tab.DateTimeAutoFormatMode.showDateOnly,tableau.types.DataType.DT_DATE,$0.locale,null,null,$1);},function($p1_0){
return tableau.format.formatCustomJSDateTime($p1_0,$2.format,tab.DateTimeAutoFormatMode.showDateOnly,tableau.types.DataType.DT_DATE,$2.locale,null,null,$1);}));this.$1_11.get_element().on('dateSelected',ss.Delegate.create(this,this.$1_16)).bind('mousedown',ss.Delegate.create(this,this.$1_18)).appendTo(document.body);this.$1_13=false;},destroy:function(preserveDom){this.$1_11.dispose();this.$1_11=null;this.inherited(arguments);},showFullDateTimes:function(dateFormat,val){this.$1_10=tab.QuantitativeDateFilter.getDateTimeFormatMode([this.oCurrentMin,this.oCurrentMax,this.oRangeMin,this.oRangeMax,val],this.get_presModel().ag9,dateFormat,this.$1_10);return this.$1_10;},speciallyFormatDataValueForQuantitativeQF:function(val){return tableau.format.formatDataValue(val,this.oFilter.role,this.oFilter.date_format,null,this.showFullDateTimes(this.oFilter.date_format,val));},$1_14:function(){return tab.QuantitativeDateFilter.isPureTime([this.oCurrentMin,this.oCurrentMax,this.oRangeMin,this.oRangeMax],this.get_presModel().ag9);},showInput:function(e,val,oInput){this.inherited(arguments);if(this.get_presModel().ag9!=='trunc-month'&&this.get_presModel().ag9!=='trunc-year'&&!this.$1_14()&&(this.$1_12!==oInput||this.$1_11.get_element().is(':hidden'))){var $0=(tab.FilterModel.isNormalValue(val)&&!isNaN(val.v))?new Date(tableau.types.JsDateFromOleDate(val.v)):null;this.$1_11.show($0);this.$1_12=oInput;this.$1_15();}},layout:function(){this.inherited(arguments);this.$1_15();},$1_15:function(){if(ss.isNullOrUndefined(this.$1_12)){return;}var $0=$((this.$1_12===this.domLowerInput)?this.domLowerBound:this.domUpperBound);this.$1_11.positionCalendarByElement($0);},$1_16:function($p0,$p1){this.$1_11.hide();var $0=tableau.types.OleDateFromJsDate($p1.getTime());var $1=(this.$1_12===this.domLowerInput);var $2=($1)?this.oCurrentMin:this.oCurrentMax;var $3=($1)?this.domLowerBound:this.domUpperBound;this.applyInputValue($2,this.$1_12,$3,$0,ss.Delegate.create(this,function(){
this.$1_17($1,$0);}));},$1_17:function($p0,$p1){if($p0){this.updateMinAndMax($p1,this.oCurrentMax.v);}else{this.updateMinAndMax(this.oCurrentMin.v,$p1);}},$1_18:function($p0){this.$1_13=true;},hideLowerInput:function(e){this.$1_19(e,this.domLowerInput,ss.Delegate.create(this,function($p1_0){
tab.QuantitativeDateFilter.callBaseMethod(this, 'hideLowerInput',[$p1_0]);}));},hideUpperInput:function(e){this.$1_19(e,this.domUpperInput,ss.Delegate.create(this,function($p1_0){
tab.QuantitativeDateFilter.callBaseMethod(this, 'hideUpperInput',[$p1_0]);}));},$1_19:function($p0,$p1,$p2){if(this.$1_13){$p0.preventDefault();$p0.stopPropagation();this.$1_13=false;window.setTimeout(function(){
if($($p1).is(':visible')){$p1.focus();}},0);}else{$p2($p0);this.$1_11.hide();if(this.$1_12===$p1){this.$1_12=null;}}}}
tab.QuantitativeFilter=function(props){this.templateString="<div class='QuantitativeFilter'>"+"<div class='QuantitativeFilterBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='QFTitle' dojoAttachPoint='domTitleBar'></div>"+"<div dojoType='dijit.form.Button' class='QFButton QFResetButton' showlabel='false'"+"dojoAttachPoint='resetButton' dojoAttachEvent='onClick:toggleReset'"+"iconClass='wcIconNonfiltered'>Showing all values</div>"+"<div dojoType='dijit.form.Button' class='QFButton QFDomainButton' showlabel='false'"+"dojoAttachPoint='domainButton' dojoAttachEvent='onClick:toggleDomain'"+"iconClass='wcIconDomainAll'>Show Smaller Range</div>"+"<div dojoType='dijit.form.Button' class='QFButton QFMenuButton' name='type' dojoAttachPoint='menuButton'"+"dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'></div>"+'</div>'+"<div class='QFContent' dojoAttachPoint='domContent'>"+"<div class='QFReadout QFLowerBound tab-ctrl-formatted-border-hover' dojoAttachEvent='onclick:showLowerInput' dojoAttachPoint='domLowerBound'>"+"<span class='readoutText tab-ctrl-formatted-fixedsize' dojoAttachPoint='domLowerText'></span>"+"<input type='text' dojoAttachPoint='domLowerInput'></input>"+'</div>'+"<div class='QFReadout QFUpperBound tab-ctrl-formatted-border-hover' dojoAttachEvent='onclick:showUpperInput' dojoAttachPoint='domUpperBound'>"+"<span class='readoutText tab-ctrl-formatted-fixedsize' dojoAttachPoint='domUpperText'></span>"+"<input type='text' dojoAttachPoint='domUpperInput'></input>"+'</div>'+"<div dojoAttachPoint='domBar' class='QFSlider QFBar'>"+"<div dojoAttachPoint='domRange' class='QFRange' dojoAttachEvent='onmousedown:startRangeCapture'>"+"<div dojoAttachPoint='domHighlight' class='QFRangeHighlight'></div>"+'</div>'+'</div>'+"<span dojoAttachPoint='domLowerImg' class='QFSlider QFImg QFIconFilterLeft' dojoAttachEvent='onmousedown:startLowerCapture'></span>"+"<span dojoAttachPoint='domUpperImg' class='QFSlider QFImg QFIconFilterRight' dojoAttachEvent='onmousedown:startUpperCapture'></span>"+'</div>'+'</div>'+'</div>';this.attributes={};tab.QuantitativeFilter.initializeBase(this);}
tab.QuantitativeFilter.prototype={getContextMenuCommands:null,requestSetAttributes:null,widgetsInTemplate:true,global:false,templateRoot:null,session:null,field:'',filterViewModel:null,presModel:null,$1_0:200,$1_1:null,$1_2:10,rid:0,timestamp:0,domNode:null,domContent:null,domControls:null,domLowerText:null,domUpperText:null,domLowerInput:null,domUpperInput:null,domBar:null,domRange:null,domHighlight:null,domLowerImg:null,domUpperImg:null,domLowerBound:null,domUpperBound:null,resetButton:null,menuButton:null,domainButton:null,lastLowerOffset:0,lastUpperOffset:0,classQF:'QF',classQFButtonR:'QFButtonR',classQFButtonHide:'QFButtonHide',classQFDisabled:'QFDisabled',classQFCenterText:'QFCenterText',classQFHideButtons:'QFHideButtons',classQFHideSlider:'QFHideSlider',classQFHideReadout:'QFHideReadout',classQFResetDisabled:'QFResetDisabled',oCurrentMin:null,oCurrentMax:null,oRangeMin:null,oRangeMax:null,oDataMin:null,oDataMax:null,rangeMinOverride:null,rangeMaxOverride:null,previousMinVal:null,previousMaxVal:null,metricsOnly:false,oMetrics:null,titleH:0,titleW:0,$1_3:null,precision:0,captureInfo:null,showInputStartValue:null,mode:null,showContextMenu:null,$1_4:null,get_attributes:function(){return this.attributes;},get_presModel:function(){return this.presModel;},get_oCurrentMin:function(){return this.oCurrentMin;},get_oCurrentMax:function(){return this.oCurrentMax;},get_editingFormat:function(){if(this.$1_4==null){this.$1_4=tableau.format.deriveNumberEditingFormat(this.oFilter.format);}return this.$1_4;},get_filterViewModel:function(){return this.filterViewModel;},postCreate:function(){if(this.filterViewModel.get_filterType()!=='Quantitative'){}var $0=0;dojo.style(this.domLowerInput,'display','none');dojo.style(this.domUpperInput,'display','none');$(this.domLowerInput).bind('blur',ss.Delegate.create(this,this.hideLowerInput)).bind('keydown',ss.Delegate.create(this,this.lowerInputKeyDown)).bind('keypress',ss.Delegate.create(this,this.checkLowerEnter));$(this.domUpperInput).bind('blur',ss.Delegate.create(this,this.hideUpperInput)).bind('keydown',ss.Delegate.create(this,this.upperInputKeyDown)).bind('keypress',ss.Delegate.create(this,this.checkUpperEnter));$(document.body).bind('mousedown.'+this.domNode.id,ss.Delegate.create(this,function($p1_0){
if($p1_0.target!==this.domLowerInput){this.domLowerInput.blur();}if($p1_0.target!==this.domUpperInput){this.domUpperInput.blur();}}));this.timestamp=new Date().getTime();this.localize();var $1=tableau.format.formatColumnDisplayName(this.oFilter,false);dojo.attr(this.domTitleBar,'title',$1);this.updateTitleBar();if(!this.metricsOnly){var $3=ss.Delegate.create(this,function($p1_0,$p1_1){
if($p1_1){dojo.addClass($p1_0.domNode,this.classQFButtonHide);}else{$0+=1;dojo.addClass($p1_0.domNode,this.classQFButtonR+$0);}});$3(this.menuButton,this.shouldHideContextMenu());$3(this.domainButton,this.shouldHideDomainButton());$3(this.resetButton,this.shouldHideResetButton());dojo.addClass(this.domControls,this.classQF+$0+'Button');$(this.menuButton.domNode).css('background-color',this.backgroundColor);$(this.domainButton.domNode).css('background-color',this.backgroundColor);$(this.resetButton.domNode).css('background-color',this.backgroundColor);}var $2=this.oFilter.table;this.$1_5($2.min.v,$2.max.v);},$1_5:function($p0,$p1){if(this.isMaxRange($p0,$p1)){tab.QfButtonUtil.disableResetButton(this.resetButton);}else{tab.QfButtonUtil.enableResetButton(this.resetButton);}},isMaxRange:function(newMin,newMax){var $0=ss.isValue(newMin);var $1=ss.isValue(newMax);if($0&&$1&&this.oFilter.table.included!=='include-all'){return false;}var $2=this.oFilter.range.min.v;var $3=this.oFilter.range.max.v;if(!$0){newMin=$2;}if(!$1){newMax=$3;}return (ss.isValue($2)&&(ss.isValue(newMin)&&tab.FloatUtil.isLessThanOrEqual(newMin,$2)))&&(ss.isValue($3)&&(ss.isValue(newMax)&&tab.FloatUtil.isGreaterThanOrEqual(newMax,$3)));},postMixInProperties:function(){this.inherited(arguments);this.templateRoot=dojo.moduleUrl('tableau.base.widget','templates').toString();},destroy:function(preserveDom){if(ss.isValue(this.$1_3)){this.$1_3.dispose();}$(this.domLowerInput).unbind('blur').unbind('keydown').unbind('keypress');$(this.domUpperInput).unbind('blur').unbind('keydown').unbind('keypress');$(document.body).unbind('mousedown.'+this.domNode.id);this.showContextMenu=null;this.requestSetAttributes=null;this.getContextMenuCommands=null;this.inherited(arguments);},$1_6:function(){var $0=dojo.marginBox(this.domLowerImg);var $1=dojo.marginBox(this.domLowerBound);var $2=tab.$create_QFMetrics();$2.$3=tab.$create_Size(0,0);$2.$2=tab.$create_Size(0,0);$2.$1=tab.$create_Size(0,$0.h+4);$2.$0=tab.$create_Size(0,$1.h+4);return $2;},showFullDateTimes:function(dateFormat,val){return tab.DateTimeAutoFormatMode.showDateOnly;},getPrecision:function(){return this.precision;},hasCurrentMin:function(){return tab.FilterModel.isNormalValue(this.oCurrentMin);},hasCurrentMax:function(){return tab.FilterModel.isNormalValue(this.oCurrentMax);},getRangeMin:function(){return (ss.isValue(this.rangeMinOverride))?this.rangeMinOverride:this.oRangeMin.v;},getRangeMax:function(){return (ss.isValue(this.rangeMaxOverride))?this.rangeMaxOverride:this.oRangeMax.v;},getRange:function(){var $0=this.getRangeMin();var $1=this.getRangeMax();if(ss.isValue($0)&&ss.isValue($1)){return $1-$0;}return null;},hasDataMin:function(){return tab.FilterModel.isNormalValue(this.oDataMin);},hasDataMax:function(){return tab.FilterModel.isNormalValue(this.oDataMax);},getDataMin:function(){return this.oDataMin.v;},getDataMax:function(){return this.oDataMax.v;},getCurMin:function(){return this.oCurrentMin.v;},getCurMax:function(){return this.oCurrentMax.v;},getMinText:function(){return this.speciallyFormatDataValueForQuantitativeQF(this.oCurrentMin);},getMaxText:function(){return this.speciallyFormatDataValueForQuantitativeQF(this.oCurrentMax);},getLowerPos:function(){return this.domLowerImg.offsetLeft-this.oMetrics.absOffset+(this.$1_2-1);},setLowerPos:function(val){dojo.style(this.domLowerImg,'left',(val+this.oMetrics.absOffset-(this.$1_2-1))+'px');},$1_7:function(){return this.lastLowerOffset!==this.domLowerImg.offsetLeft;},$1_8:function(){return this.domUpperImg.offsetLeft-this.oMetrics.absOffset;},setUpperPos:function(val){dojo.style(this.domUpperImg,'left',(val+this.oMetrics.absOffset)+'px');},$1_9:function(){return this.lastUpperOffset!==this.domUpperImg.offsetLeft;},isRange:function(){switch(this.oFilter.table.included){case 'include-all':case 'include-null':case 'include-non-null':return false;default:return true;}},shouldHideDomainButton:function(){return this.hideEmptyTitlebar()||this.attributes['show-morefewerbutton']!=='true';},shouldHideContextMenu:function(){var $0=tab.CommandsPresModelWrapper.create(this.getContextMenuCommands());return this.hideEmptyTitlebar()||ss.isNullOrUndefined($0)||!$0.get_commandItems().length;},shouldHideResetButton:function(){return this.hideEmptyTitlebar()||this.attributes['show-all']==='false'||this.attributes['show-filter-state']==='false';},computePrecision:function(pixelRange){var $0=this.getRange();var $1=(ss.isValue($0)&&!!pixelRange)?($0/pixelRange):1;var $2=Math.log($1)/Math.log(10);this.precision=($2>0)?Math.ceil($2):Math.floor($2);if(this.precision===Number.NEGATIVE_INFINITY||isNaN(this.precision)){this.precision=5;}},$1_A:function($p0,$p1,$p2){var $0;var $1=$p0*(this.getRange()||0)/$p1;if(this.precision>=0){return Math.round($p2+$1);}$0=Math.pow(10,-this.precision);return Math.round(($p2+$1)*$0)/$0;},clearDataRange:function(){if(ss.isValue(this.oDataMin)){this.oDataMin=null;}if(ss.isValue(this.oDataMax)){this.oDataMax=null;}dojo.style(this.domHighlight,'visibility','hidden');},setMinValue:function(v){if(ss.isNullOrUndefined(v)||isNaN(v)){return;}if(this.hasCurrentMax()&&v>this.getCurMax()){v=this.getCurMax();}if(this.oCurrentMin.t===tableau.types.DataType.DT_INTEGER){this.oCurrentMin.v=Math.round(v);}else{this.oCurrentMin.v=v;}dojox.data.dom.textContent(this.domLowerText,this.getMinText());var $0=this.getRangeMin();if(this.hasCurrentMin()&&(!ss.isValue($0)||this.getCurMin()<$0)){this.rangeMinOverride=this.getCurMin();}},setMaxValue:function(v){if(ss.isNullOrUndefined(v)||isNaN(v)){return;}if(this.hasCurrentMin()&&v<this.getCurMin()){v=this.getCurMin();}if(this.oCurrentMax.t===tableau.types.DataType.DT_INTEGER){this.oCurrentMax.v=Math.round(v);}else{this.oCurrentMax.v=v;}dojox.data.dom.textContent(this.domUpperText,this.getMaxText());var $0=this.getRangeMax();if(this.hasCurrentMax()&&(!ss.isValue($0)||this.getCurMax()>$0)){this.rangeMaxOverride=this.getCurMax();}},removeRangeOverride:function(){this.rangeMinOverride=null;this.rangeMaxOverride=null;},getValueFromInput:function(oNode,oldValue){return tableau.format.parseQuantitativeDataValue(oNode.value,oldValue.t,this.get_editingFormat(),this.showFullDateTimes(this.get_editingFormat()),oldValue);},speciallyFormatDataValueForQuantitativeQF:function(val){return tableau.format.formatDataValue(val,this.oFilter.role,this.oFilter.format,null,tab.DateTimeAutoFormatMode.showDateOnly);},initValues:function(){this.oRangeMin=dojo.mixin({},this.oFilter.range.min);this.oRangeMax=dojo.mixin({},this.oFilter.range.max);this.oDataMin=dojo.mixin({},this.oFilter.data.min);this.oDataMax=dojo.mixin({},this.oFilter.data.max);if(this.isRange()&&(ss.isValue(this.oFilter.table.min.v)||ss.isValue(this.oFilter.table.max.v))){this.oCurrentMin=dojo.mixin({},this.oFilter.table.min);this.oCurrentMax=dojo.mixin({},this.oFilter.table.max);}else{this.oCurrentMin=dojo.mixin({},this.oFilter.range.min);this.oCurrentMax=dojo.mixin({},this.oFilter.range.max);}this.oMetrics=tab.$create_QFMetrics();this.domLowerInput.value=tableau.format.formatDataValue(this.oCurrentMin,this.oFilter.role,this.get_editingFormat(),null,this.showFullDateTimes(this.get_editingFormat()));this.domUpperInput.value=tableau.format.formatDataValue(this.oCurrentMax,this.oFilter.role,this.get_editingFormat(),null,this.showFullDateTimes(this.get_editingFormat()));},setTitleSize:function(newH,newW){this.titleH=newH;this.titleW=newW;},resize:function($p0){dojo.marginBox(this.domNode,$p0);this.layout();},layout:function(){var $0=200;this.initValues();this.updateTitleBar();if(this.hasCurrentMin()){dojox.data.dom.textContent(this.domLowerText,this.getMinText());dojo.removeClass(this.domLowerText.parentNode,this.classQFDisabled);dojo.addClass(this.domLowerText.parentNode,'tab-ctrl-formatted-border-hover');}else{dojox.data.dom.textContent(this.domLowerText,this.speciallyFormatDataValueForQuantitativeQF(this.oRangeMin));dojo.addClass(this.domLowerText.parentNode,this.classQFDisabled);dojo.removeClass(this.domLowerText.parentNode,'tab-ctrl-formatted-border-hover');}if(this.hasCurrentMax()){dojox.data.dom.textContent(this.domUpperText,this.getMaxText());dojo.removeClass(this.domUpperText.parentNode,this.classQFDisabled);dojo.addClass(this.domUpperText.parentNode,'tab-ctrl-formatted-border-hover');}else{dojox.data.dom.textContent(this.domUpperText,this.speciallyFormatDataValueForQuantitativeQF(this.oRangeMax));dojo.addClass(this.domUpperText.parentNode,this.classQFDisabled);dojo.removeClass(this.domUpperText.parentNode,'tab-ctrl-formatted-border-hover');}dojo.addClass(this.domNode,this.classQFHideButtons);dojo.removeClass(this.domNode,this.classQFCenterText);var $1=dojo.marginBox(this.domTitleBar);this.resetTitleSize();if(this.titleH>0){$1.h=this.titleH;dojo.marginBox(this.domTitleBar,{h:$1.h});}if(this.titleW>0){$1.w=this.titleW;dojo.marginBox(this.domTitleBar,{w:$1.w});}tableau.util.setupTitleEllipsis($(this.domTitleBar));var $2=dojo.contentBox(this.domNode);var $3=tab.$create_Size($2.w,$2.h);if(!this.metricsOnly){if(!this.hideEmptyTitlebar()){if(this.titleW>0){$3.w=$2.w-$1.w;dojo.style(this.domContent,'top','');dojo.style(this.domContent,'left',$1.w+'px');}else{dojo.removeClass(this.domNode,this.classQFHideButtons);$3.h=$2.h-$1.h;dojo.style(this.domContent,'top',$1.h+'px');dojo.style(this.domContent,'left','');}}}dojo.marginBox(this.domContent,{w:$3.w,h:$3.h});if(this.attributes['show-slider']!=='false'&&this.attributes['show-readout']!=='false'){dojo.removeClass(this.domNode,this.classQFHideReadout);dojo.removeClass(this.domNode,this.classQFHideSlider);var $6=dojo.contentBox(this.domLowerBound).h+dojo.contentBox(this.domLowerImg).h+8;if($3.h<$6&&$3.w>200){dojo.addClass(this.domNode,this.classQFCenterText);var $7=this.contentBox(this.domLowerText).w;var $8=this.contentBox(this.domUpperText).w;dojo.style(this.domLowerBound,'width','');dojo.style(this.domUpperBound,'width','');dojo.style(this.domLowerBound,'top','2px');dojo.style(this.domUpperBound,'top','2px');var $9=$3.w-($7+dojo.contentBox(this.domLowerImg).w)-($8+dojo.contentBox(this.domUpperImg).w)-(2*8);dojo.marginBox(this.domBar,{w:$9});dojo.style(this.domBar,'top','7px');dojo.style(this.domBar,'left',($7+tab.DomUtil.getContentBox(this.domLowerImg).w+8)+'px');dojo.style(this.domLowerInput,'width',$7+'px');dojo.style(this.domUpperInput,'width',$8+'px');}else{var $A=Math.min($0,Math.floor(($3.w/2)-4));dojo.marginBox(this.domLowerBound,{w:$A});dojo.marginBox(this.domUpperBound,{w:$A});dojo.style(this.domLowerInput,'width',dojo.contentBox(this.domLowerBound).w+'px');dojo.style(this.domUpperInput,'width',dojo.contentBox(this.domUpperBound).w+'px');var $B=this.domLowerBound.offsetTop+this.domLowerBound.offsetHeight+6;dojo.marginBox(this.domBar,{w:$3.w-24});dojo.style(this.domBar,'top',$B+'px');dojo.style(this.domBar,'left','12px');}}else if(this.attributes['show-slider']!=='false'){dojo.addClass(this.domNode,this.classQFHideReadout);dojo.removeClass(this.domNode,this.classQFHideSlider);dojo.marginBox(this.domBar,{w:$3.w-24});dojo.style(this.domBar,'left','12px');}else if(this.attributes['show-readout']!=='false'){dojo.removeClass(this.domNode,this.classQFHideReadout);dojo.addClass(this.domNode,this.classQFHideSlider);var $C=Math.min($0,Math.floor(($3.w/2)-4));dojo.marginBox(this.domLowerBound,{w:$C});dojo.marginBox(this.domUpperBound,{w:$C});dojo.style(this.domLowerInput,'width',tab.DomUtil.getContentBox(this.domLowerBound).w+'px');dojo.style(this.domUpperInput,'width',tab.DomUtil.getContentBox(this.domUpperBound).w+'px');}else{dojo.addClass(this.domNode,this.classQFHideSlider);dojo.addClass(this.domNode,this.classQFHideReadout);}this.oMetrics.top=this.domBar.offsetTop;this.oMetrics.absOffset=this.domBar.offsetLeft;this.oMetrics.left=0;this.oMetrics.right=this.domBar.offsetWidth;if(this.hasCurrentMin()){dojo.style(this.domLowerImg,'top',(this.oMetrics.top-4)+'px');dojo.style(this.domLowerImg,'visibility','visible');}else{dojo.style(this.domLowerImg,'visibility','hidden');}if(this.hasCurrentMax()){dojo.style(this.domUpperImg,'top',(this.oMetrics.top-4)+'px');dojo.style(this.domUpperImg,'visibility','visible');}else{dojo.style(this.domUpperImg,'visibility','hidden');}var $4=(this.shouldShowDomContent())?'visible':'hidden';dojo.style(this.domContent,'visibility',$4);this.oMetrics.width=this.oMetrics.right-this.oMetrics.left;this.computePrecision(this.oMetrics.width);var $5=(this.hasDataMin()||this.hasDataMax());dojo.style(this.domHighlight,'visibility',($5)?'visible':'hidden');this.updateMinAndMax(this.oCurrentMin.v,this.oCurrentMax.v);this.updateDomainButton();},shouldShowDomContent:function(){return this.hasCurrentMax()||this.hasCurrentMin();},updateFromIcons:function(){var $0,$1;var $2;if(this.hasCurrentMin()&&this.$1_7()){var $3=this.getLowerPos();$0=$3-this.oMetrics.left;if(!$0){$2=this.getRangeMin();}else if($0===this.oMetrics.width){$2=this.getRangeMax();}else if(this.hasCurrentMax()&&this.getLowerPos()===this.$1_8()){$2=this.getCurMax();}else{$2=this.$1_A($0,this.oMetrics.width,(this.getRangeMin()||0));}if(ss.isValue($2)){this.setMinValue($2);}this.lastLowerOffset=this.domLowerImg.offsetLeft;dojo.style(this.domRange,'left',$3+'px');}$1=(this.hasCurrentMin())?this.getLowerPos():this.oMetrics.left;if(this.hasCurrentMax()){var $4=this.$1_8()-$1;if(this.$1_9()){$0=this.oMetrics.right-this.$1_8();if(!$0){$2=this.getRangeMax();}else if($0===this.oMetrics.width){$2=this.getRangeMin();}else if(this.hasCurrentMin()&&this.getLowerPos()===this.$1_8()){$2=this.getCurMin();}else{$2=this.$1_A(-$0,this.oMetrics.width,(this.getRangeMax()||0));}if(ss.isValue($2)){this.setMaxValue($2);}this.lastUpperOffset=this.domUpperImg.offsetLeft;}dojo.style(this.domRange,'width',$4+'px');}else{dojo.style(this.domRange,'width',(this.oMetrics.right-$1)+'px');}this.updateDataBar();},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},updateFromOneInput:function($p0){var $0,$1;if($p0===this.domLowerInput){$0=(this.hasCurrentMin())?this.getValueFromInput(this.domLowerInput,this.oCurrentMin):-Number.MAX_VALUE;$1=this.oCurrentMax.v;}else{$0=this.oCurrentMin.v;$1=(this.hasCurrentMax())?this.getValueFromInput(this.domUpperInput,this.oCurrentMax):Number.MAX_VALUE;}this.updateMinAndMax($0,$1);},updateMinAndMax:function(valMin,valMax){var $0;if(ss.isValue(valMin)&&ss.isValue(valMax)){if(valMin>valMax){var $2=valMin;valMin=valMax;valMax=$2;}}this.removeRangeOverride();if(this.hasCurrentMin()&&ss.isValue(valMin)&&!isNaN(valMin)){this.setMinValue(valMin);}if(this.hasCurrentMax()&&ss.isValue(valMax)&&!isNaN(valMax)){this.setMaxValue(valMax);}var $1=this.getRange();$0=this.oMetrics.left;if(this.hasCurrentMin()){var $3=(ss.isValue($1)&&!tab.FloatUtil.isEqual($1,0))?Math.round((this.getCurMin()-this.getRangeMin())*this.oMetrics.width/$1):0;if(this.oMetrics.left+$3>this.oMetrics.width){$3=this.oMetrics.left+this.oMetrics.width;}this.setLowerPos(this.oMetrics.left+$3);this.lastLowerOffset=this.domLowerImg.offsetLeft;dojo.style(this.domRange,'left',(this.oMetrics.left+$3)+'px');$0=this.getLowerPos();}else{dojo.style(this.domRange,'left',$0+'px');}if(this.hasCurrentMax()){var $4=(this.hasCurrentMin())?this.getCurMin():this.getRangeMin();var $5=(ss.isValue($1)&&!tab.FloatUtil.isEqual($1,0))?Math.round((this.getCurMax()-$4)*this.oMetrics.width/$1):this.oMetrics.width;this.setUpperPos($0+$5);this.lastUpperOffset=this.domUpperImg.offsetLeft;dojo.style(this.domRange,'width',Math.max($5,0)+'px');}else{dojo.style(this.domRange,'width',Math.max(this.oMetrics.right-$0,0)+'px');}this.updateDataBar();},updateDataBar:function(){var $0=0;var $1;var $2;var $3=this.getRange();if(ss.isValue($3)&&!tab.FloatUtil.isEqual($3,0)&&this.hasDataMin()){var $4=(this.hasCurrentMin())?this.getCurMin():this.getRangeMin();$0=Math.round((this.getDataMin()-$4)*this.oMetrics.width/$3);}dojo.style(this.domHighlight,'left',$0+'px');$2=(this.hasCurrentMin())?this.getLowerPos():this.oMetrics.left;$1=((this.hasCurrentMax())?this.$1_8():this.oMetrics.right)-$2;if(ss.isValue($3)&&this.hasDataMax()){var $5=(this.hasDataMin())?this.getDataMin():this.getRangeMin();if(!tab.FloatUtil.isEqual($3,0)){$1=Math.round((this.getDataMax()-$5)*this.oMetrics.width/$3);}$1=Math.max($1,2);}dojo.style(this.domHighlight,'width',Math.max($1,0)+'px');},startUpperCapture:function($p0){this.startCapture($p0,false,this.domUpperImg);},startLowerCapture:function($p0){this.startCapture($p0,false,this.domLowerImg);},startRangeCapture:function($p0){if(this.hasCurrentMin()&&this.hasCurrentMax()){this.startCapture($p0,true,this.domRange);}},startCapture:function($p0,$p1,$p2){this.savePreviousMinAndMaxVals();var $0=($p1)?ss.Delegate.create(this,this.$1_B):ss.Delegate.create(this,this.onMouseMove);dojo.stopEvent($p0);var $1=this.getRange();if(!ss.isValue($1)||tab.FloatUtil.isEqual($1,0)){return;}this.captureInfo=tab.$create_vqlui$5($p0.pageX,$p0.pageY,$p2.offsetLeft,$p1,$p2);if($p1){this.captureInfo.$3=this.getLowerPos();this.captureInfo.$4=this.$1_8();}if(ss.isValue(this.$1_3)){this.$1_3.dispose();}this.$1_3=new tab.DisposableHolder();this.$1_3.add(spiff.EventUtil.bindWithDispose($(document),'mousemove',$0));this.$1_3.add(spiff.EventUtil.bindWithDispose($(document),'mouseup',ss.Delegate.create(this,this.$1_C)));},onMouseMove:function($p0){var $0=(this.hasCurrentMin())?this.getLowerPos():this.oMetrics.left;var $1=(this.hasCurrentMax())?this.$1_8():this.oMetrics.right;var $2=(this.captureInfo.$2===this.domLowerImg)?this.oMetrics.left-this.$1_2:$0;var $3=(this.captureInfo.$2===this.domUpperImg)?this.oMetrics.right:$1-this.$1_2;var $4=($p0.pageX-this.captureInfo.x)+this.captureInfo.$0-this.oMetrics.absOffset;$p0.stopPropagation();$p0.preventDefault();$4=Math.min($3,Math.max($2,$4));var $5=false;if(this.captureInfo.$2===this.domLowerImg){$5=($4+this.$1_2)!==$0;this.setLowerPos($4+this.$1_2);}else{$5=$4!==$1;this.setUpperPos($4);}this.updateFromIcons();if($5){this.applyQuantFilter(this.getCurMin(),this.getCurMax());}},applyQuantFilter:function(minVal,maxVal){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var $0=new tab.QuantitativeFilterData(this.oFilter.targetSheets,this.field,minVal,maxVal,this.previousMinVal,this.previousMaxVal);tab.FilterClientCommands.updateQuantitativeFilter($0);}},savePreviousMinAndMaxVals:function(){this.previousMinVal=this.getCurMin();this.previousMaxVal=this.getCurMax();},$1_B:function($p0){var $0=this.captureInfo.x-(this.captureInfo.$3-this.oMetrics.left);var $1=this.captureInfo.x+(this.oMetrics.right-this.captureInfo.$4);var $2=$p0.pageX;$2=Math.min($1,Math.max($0,$2));$p0.stopPropagation();$p0.preventDefault();this.setLowerPos(this.captureInfo.$3+($2-this.captureInfo.x));this.setUpperPos(this.captureInfo.$4+($2-this.captureInfo.x));tab.ModelUtils.invalidateVisuals(this.oFilter.targetSheets);this.updateFromIcons();},$1_C:function($p0){if(ss.isValue(this.$1_3)){this.$1_3.dispose();}this.$1_3=null;$p0.stopPropagation();$p0.preventDefault();if(this.captureInfo.x!==$p0.pageX){this.removeRangeOverride();this.updateFromIcons();this.notifyChange();}},showLowerInput:function($p0){if(!this.hasCurrentMin()){return;}this.showInput($p0,this.oCurrentMin,this.domLowerInput);dojo.addClass(this.domLowerBound,'active');this.savePreviousMinAndMaxVals();},showUpperInput:function($p0){if(!this.hasCurrentMax()){return;}this.showInput($p0,this.oCurrentMax,this.domUpperInput);dojo.addClass(this.domUpperBound,'active');this.savePreviousMinAndMaxVals();},showInput:function(e,val,oInput){dojo.stopEvent(e);if(dojo.style(oInput,'display')!=='none'){return;}oInput.value=tableau.format.formatDataValue(val,this.oFilter.role,this.get_editingFormat(),null,this.showFullDateTimes(this.get_editingFormat()));this.showInputStartValue=this.getValueFromInput(oInput,val);$(oInput).show().siblings('.readoutText').hide();oInput.focus();oInput.select();},lowerInputKeyDown:function($p0){this.$1_D($p0,this.domLowerInput);},upperInputKeyDown:function($p0){this.$1_D($p0,this.domUpperInput);},$1_D:function($p0,$p1){if($p0.which===27){$($p1).val('');$p1.blur();}},checkLowerEnter:function($p0){this.$1_E($p0,this.domLowerInput);},checkUpperEnter:function($p0){this.$1_E($p0,this.domUpperInput);},$1_E:function($p0,$p1){if($p0.keyCode === dojo.keys.ENTER){dojo.stopEvent($p0);$p1.blur();}},hideLowerInput:function(e){this.$1_F(e,this.oCurrentMin,this.domLowerInput,this.domLowerBound);},hideUpperInput:function(e){this.$1_F(e,this.oCurrentMax,this.domUpperInput,this.domUpperBound);},$1_F:function($p0,$p1,$p2,$p3){var $0=this.getValueFromInput($p2,$p1);$p0.stopPropagation();$p0.preventDefault();this.applyInputValue($p1,$p2,$p3,$0,ss.Delegate.create(this,function(){
this.updateFromOneInput($p2);}));},applyInputValue:function(oldDV,oInput,inputContainer,newValue,updateFilter){var $0={};$0=dojo.mixin({},oldDV);var $1=null;if(isNaN(newValue)){newValue=this.showInputStartValue;}else{$0.v=newValue;$1=this.speciallyFormatDataValueForQuantitativeQF($0);}var $2=$(oInput).hide().siblings('.readoutText').show();if(newValue!=null&&(this.showInputStartValue!=null&&!tab.FloatUtil.isEqual(this.showInputStartValue,newValue))){$2.text($1);updateFilter();this.notifyChange();}this.showInputStartValue=null;dojo.removeClass(inputContainer,'active');},applyChanges:function(){var $0=false;var $1=$.extend(false,{},this.oFilter.table);if(this.hasCurrentMin()&&(!ss.isValue($1.min.v)||!tab.FloatUtil.isEqual($1.min.v,this.getCurMin()))){$0=true;$1.min=dojo.mixin({},this.oCurrentMin);}if(this.hasCurrentMax()&&(!ss.isValue($1.max.v)||!tab.FloatUtil.isEqual($1.max.v,this.getCurMax()))){$0=true;$1.max=dojo.mixin({},this.oCurrentMax);}if(!$0){tab.FilterClientCommands.resetQuantitativeFilter(this.field,this.oFilter.targetSheets);return;}this.clearDataRange();++this.rid;if(!this.isRange()){$1.included='include-range';}tab.FilterClientCommands.setQuantitativeFilterRange(this.session.get_visualId(),this.field,$1.min.v,$1.max.v,$1.included);this.$1_5($1.min.v,$1.max.v);},updateDomainButton:function(){if(!ss.isValue(this.oFilter.domains)||this.oFilter.domains.length<=1){dojo.style(this.domainButton.domNode,'display','none');return;}dojo.removeClass(this.domainButton.iconNode,'wcIconDomainAll');dojo.removeClass(this.domainButton.iconNode,'wcIconDomainContext');dojo.removeClass(this.domainButton.iconNode,'wcIconDomainRelevant');var $0=this.attributes['values'];if($0==='relevant'){this.domainButton.attr('label',tab.Strings.QuickFilterShowLargerRange);dojo.addClass(this.domainButton.iconNode,'wcIconDomainRelevant');}else if($0==='context'){this.domainButton.attr('label',tab.Strings.QuickFilterShowSmallerRange);dojo.addClass(this.domainButton.iconNode,'wcIconDomainContext');}else{this.domainButton.attr('label',tab.Strings.QuickFilterShowSmallerRange);dojo.addClass(this.domainButton.iconNode,'wcIconDomainAll');}},toggleReset:function(){var $0=this.oFilter.table;var $1=ss.isValue($0.min.v);var $2=ss.isValue($0.max.v);if((!$1&&$2)||(!$2&&$1)){var $3=null;var $4=null;if(!$1){$4=this.getRangeMax();}else{$3=this.getRangeMin();}tab.FilterClientCommands.setQuantitativeFilterRange(this.session.get_visualId(),this.field,$3,$4,this.oFilter.table.included);}else{tab.FilterClientCommands.setQuantitativeFilterRange(this.session.get_visualId(),this.field,this.oRangeMin.v,this.oRangeMax.v,'include-all');}tab.QfButtonUtil.disableResetButton(this.resetButton);},toggleDomain:function(){var $0=function($p1_0){
return $p1_0==='context';};var $1;var $2=this.attributes['values'];if($2==='relevant'){$1='all';}else if($2==='context'){$1='relevant';}else if(dojo.some(this.oFilter.domains,$0)){$1='context';}else{$1='relevant';}this.doRequestSetAttributes({values:$1},false);},doRequestSetAttributes:function($p0,$p1){var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $0=$enum1.current;this.attributes[$0]=$p0[$0];}if(!tab.BaseSession.autoUpdate){this.initFromState();}this.requestSetAttributes($p0,$p1);},notifyChange:function(){if(ss.isNullOrUndefined(this.$1_1)){window.clearTimeout(this.$1_1);this.$1_1=null;}this.$1_1=window.setTimeout(ss.Delegate.create(this,this.applyChanges),this.$1_0);},initFromState:function(){this.layout();},localize:function(){},contentBox:function(node){var $0=dojo.style(node,'display');if($0==='none'){dojo.style(node,'display','');}var $1=dojo.contentBox(node);dojo.style(node,'display',$0);return $1;}}
tab.QuickFilterDisplayView=function(viewModel){tab.QuickFilterDisplayView.initializeBase(this,[viewModel,new tab.QuickFilterDisplayTemplate()]);this.get_$2_4().add_updateQuickFilterDisplay(ss.Delegate.create(this,this.handleUpdateQuickFilterDisplay));this.get_$2_4().add_resized(ss.Delegate.create(this,this.updateSize));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$2_4().remove_updateQuickFilterDisplay(ss.Delegate.create(this,this.handleUpdateQuickFilterDisplay));})));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$2_4().remove_resized(ss.Delegate.create(this,this.updateSize));})));this.get_$2_4().add_updateQuickFilterContent(ss.Delegate.create(this,this.handleUpdateQuickFilterContent));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$2_4().remove_updateQuickFilterContent(ss.Delegate.create(this,this.handleUpdateQuickFilterContent));})));if(this.get_$2_4().get_hasBorder()){this.get_template().get_domRoot().addClass('tabBordered');}}
tab.QuickFilterDisplayView.prototype={$2_0:null,get_zonePresModel:function(){return this.get_$2_4().get_zone();},get_domRoot:function(){return this.get_template().get_domRoot();},get_$2_3:function(){return this.get_$2_4().get_frame();},get_$2_4:function(){return this.get_viewModel();},dispose:function(){if(ss.isValue(this.$2_0)){this.$2_0.destroyRecursive(false);this.$2_0=null;}tab.QuickFilterDisplayView.callBaseMethod(this, 'dispose');},onAddedToDom:function(){tab.QuickFilterDisplayView.callBaseMethod(this, 'onAddedToDom');if(ss.isValue(this.get_$2_4().get_quickFilterDisplayModel())){this.handleUpdateQuickFilterDisplay();}},handleUpdateQuickFilterDisplay:function(){if(ss.isValue(this.$2_0)&&!this.get_$2_4().get_needToUpdate()){return;}this.$2_0=this.createFilterPanel();this.get_template().get_domRoot().append(this.$2_0.domNode);this.$2_0.startup();this.updateSize();this.handleUpdateQuickFilterContent();},handleUpdateQuickFilterContent:function(){if(ss.isValue(this.$2_0)&&this.get_$2_4().get_needToUpdate()){this.$2_0.updateAttributes(this.get_$2_3().attributes);this.$2_0.updateFilterState(this.get_$2_4().get_filterPresModel());this.get_$2_4().set_needToUpdate(false);}},updateSize:function(){tab.DomUtil.resize(this.$2_0,tab.ZoneView.viewRect(this.get_zonePresModel()));var $0=this.get_$2_4().get_quickFilterDisplayPresModel().ax2.wc;if(this.get_$2_4().get_hasBorder()){$0+=3;}$0=Math.max($0,17);var $1=this.get_$2_4().get_quickFilterDisplayPresModel().ax2.wb;this.$2_0.setTitleSize((!this.get_zonePresModel().w0)?0:$0,(!this.get_zonePresModel().w1)?0:$1);},createFilterPanel:function(){var $0=this.get_$2_4().get_layoutSession();var $1=this.get_$2_4().get_zone().sr;var $2={};$2.sessionid=$0.get_id();$2.urlRoot=$0.get_urlRoot();$2.layoutSession=$0;$2.sheetid=$1;$2.zid=this.get_$2_3().key.zid;$2.titleHTML=this.get_$2_4().get_quickFilterDisplayModel().get_quickFilterTitle().tg;$2.session=this.get_$2_4().get_viewSession();$2.field=this.get_$2_3().param;$2.quickFilterDisplayViewModel=this.get_$2_4();if(ss.isValue(this.get_$2_3().format)){$2.format=this.get_$2_3().format;}if(ss.isValue(this.get_$2_3().attributes)){$2.attributes=this.get_$2_3().attributes;}if(ss.isValue(this.get_$2_3().w)){$2.width=this.get_$2_3().w;}var $3=ss.Delegate.create(this,function($p1_0,$p1_1){
this.$2_5(this.get_$2_3().param,this.get_$2_4().get_visualId(),$p1_0,$p1_1);});$2.requestSetAttributes=$3;$2.textStyle=this.get_$2_4().get_quickFilterDisplayPresModel().ays;if(ss.isValue(this.get_zonePresModel().ayq)){$2.backgroundColor=this.get_zonePresModel().ayq.agi;}if(ss.isValue(this.$2_0)){this.$2_0.updateFilterProperties($2);this.$2_0.updateSubWidget(this.get_$2_4().get_filterPresModel());return this.$2_0;}var $4=this.makeFilterPanel($2);return $4;},makeFilterPanel:function(oProps){return new tableau.base.widget.FilterPanel(oProps);},$2_5:function($p0,$p1,$p2,$p3){if(Object.keyExists($p2,'mode')){tab.FilterClientCommands.setCategoricalQuickFilterMode($p1,$p0,$p2['mode']);}else if(Object.keyExists($p2,'values')){tab.FilterClientCommands.setCategoricalQuickFilterDomain($p1,$p0,$p2['values']);}}}
tab.QuickFilterDisplayTemplate=function(){tab.QuickFilterDisplayTemplate.initializeBase(this,[$("<div class='tab-quick-filter'></div>")]);}
tab.ToolbarView=function(viewModel){tab.ToolbarView.initializeBase(this,[viewModel,new tab.ToolbarTemplate()]);this.$2_3=viewModel;this.$2_3.add_newToolbar(ss.Delegate.create(this,this.$2_6));this.$2_3.add_viewCountLoaded(ss.Delegate.create(this,this.$2_7));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_3.remove_newToolbar(ss.Delegate.create(this,this.$2_6));})));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_3.remove_viewCountLoaded(ss.Delegate.create(this,this.$2_7));})));}
tab.ToolbarView.prototype={$2_3:null,$2_4:false,get_dom:function(){return this.get_template();},get_$2_5:function(){return (this.$2_3.get_shouldShowPublicWatermarkItems())?59:27;},$2_6:function(){this.get_dom().toolbar.height(this.get_$2_5());this.get_dom().vizItems.empty();var $enum1=ss.IEnumerator.getEnumerator(this.$2_3.get_vizItems());while($enum1.moveNext()){var $0=$enum1.current;var $1=tab.ToolbarButtonView.create($0);this.get_dom().vizItems.append($1.get_element());}this.get_dom().nonVizItems.empty();var $enum2=ss.IEnumerator.getEnumerator(this.$2_3.get_nonVizItems());while($enum2.moveNext()){var $2=$enum2.current;var $3=tab.ToolbarButtonView.create($2);this.get_dom().nonVizItems.append($3.get_element());}this.$2_7();this.$2_D();},$2_7:function(){if(this.$2_4&&this.$2_3.get_shouldShowPublicWatermarkItems()){this.get_dom().publicLogo.empty();this.get_dom().publicBelowLogo.empty();this.$2_8();if(this.$2_3.get_shouldShowViewCount()){this.$2_9();if(this.$2_3.get_shouldShowAuthorByLine()){this.$2_A();}}if(this.$2_3.get_shouldShowAuthorByLine()){this.$2_B();}this.$2_D();}},$2_8:function(){this.get_dom().publicLogo.prop('href',this.$2_3.get_publicLogoLink());var $0=$('<div />');$0.addClass('tab-publicLogo');this.get_dom().publicLogo.append($0);},$2_9:function(){var $0=$('<span>').html(this.$2_3.get_viewCountText());this.get_dom().publicBelowLogo.append($0);},$2_A:function(){var $0=$('<span>');$0.addClass('tab-belowPublicDivider');$0.html('|');this.get_dom().publicBelowLogo.append($0);},$2_B:function(){var $0=$('<span>').html(this.$2_3.get_authorProfileLink());this.get_dom().publicBelowLogo.append($0);},$2_C:function(){this.get_dom().vizItems.children().css('padding-top','initial');this.get_dom().nonVizItems.children().css('padding-top','initial');this.get_dom().vizItems.children().css('height','initial');this.get_dom().nonVizItems.children().css('height','initial');var $0=this.get_dom().toolbar.innerHeight();var $1=0;var $2=null;if(this.get_dom().vizItems.children().length>0){$2=this.get_dom().vizItems.children().first();}else if(this.get_dom().nonVizItems.children().length>0){$2=this.get_dom().nonVizItems.children().first();}if(ss.isValue($2)){$2.children().each(ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=$($p1_1).innerHeight();if(this.get_dom().vizItems.hasClass('hideLabels')||this.get_dom().vizItems.hasClass('horizontal')){if($1_0>$1){$1=$1_0;}}else{$1+=$1_0;}}));}var $3=Math.floor((($0-$1)/2));var $4=$3+'px';var $5=($0-$3)+'px';this.get_dom().vizItems.children().css('padding-top',$4);this.get_dom().nonVizItems.children().css('padding-top',$4);this.get_dom().vizItems.children().css('height',$5);this.get_dom().nonVizItems.children().css('height',$5);if(this.$2_3.get_shouldShowPublicWatermarkItems()){var $6=this.get_dom().publicItems.height();var $7=(($0-$6)/2)+'px';this.get_dom().publicItems.css('padding-top',$7);}},$2_D:function(){this.get_dom().vizItems.addClass('horizontal');this.get_dom().nonVizItems.addClass('horizontal');var $0=this.get_dom().toolbar.width()-parseInt(this.get_dom().vizItems.css('padding-left').replaceAll('px',''))-parseInt(this.get_dom().nonVizItems.css('padding-right').replaceAll('px',''));var $1=this.get_dom().vizItems.width();var $2=this.get_dom().nonVizItems.width();var $3=(this.$2_3.get_shouldShowPublicWatermarkItems())?this.get_dom().publicItems.outerWidth():0;var $4=this.$2_F($0,$1,$3,$2);if(!$4&&this.$2_10()){this.get_dom().vizItems.removeClass('horizontal');this.get_dom().nonVizItems.removeClass('horizontal');$1=this.get_dom().vizItems.width();$2=this.get_dom().nonVizItems.width();$4=this.$2_F($0,$1,$3,$2);}if(!$4){this.get_dom().nonVizItems.addClass('hideLabels');this.$2_E(this.get_dom().nonVizItems);if(this.$2_10()){this.get_dom().vizItems.addClass('hideLabels');this.$2_E(this.get_dom().vizItems);}$1=this.get_dom().vizItems.width();$2=this.get_dom().nonVizItems.width();$4=this.$2_F($0,$1,$3,$2);}if(!$4){this.get_dom().vizItems.addClass('hideLabels');this.$2_E(this.get_dom().vizItems);$1=this.get_dom().vizItems.width();$4=this.$2_F($0,$1,$3,$2);}if(!$4&&this.$2_3.get_shouldShowPublicWatermarkItems()){this.get_dom().publicBelowLogo.hide();this.get_dom().publicItems.addClass('narrow');this.get_dom().publicLogo.attr('title',tab.Strings.ToolbarAboutTableau);$3=this.get_dom().publicItems.outerWidth();$4=this.$2_F($0,$1,$3,$2);}if(!$4){this.get_dom().vizItems.children().each(function($p1_0,$p1_1){
var $1_0=$($p1_1);var $1_1=$1_0.find('.tab-icon-redo').length>0;if($1_1){$1_0.hide();}});}this.$2_C();},$2_E:function($p0){if($p0.hasClass('hideLabels')){$p0.find('.tabToolbarButton').each(function($p1_0,$p1_1){
var $1_0=$($p1_1).find('.tabToolbarButtonText').text();$p1_1.setAttribute('title',$1_0);});}},$2_F:function($p0,$p1,$p2,$p3){if($p1+$p2+$p3>=$p0){return false;}if($p2>0&&($p1+(0.5*$p2)>=(0.5*$p0)||$p3+(0.5*$p2)>=(0.5*$p0))){return false;}return true;},$2_10:function(){return tsConfig.isPublic&&this.get_$2_5()>40;},onAddedToDom:function(){this.$2_4=true;this.$2_6();tab.ToolbarView.callBaseMethod(this, 'onAddedToDom');}}
tab.ToolbarTemplate=function(){tab.ToolbarTemplate.initializeBase(this,[$("\n            <div class='tab-toolbar tab-fill'>\n                <div class='tab-vizItems tab-fill-left' />\n                <div class='tab-publicItems'>\n                    <a class='tab-publicLogoLink' target='_blank' />\n                    <div class='tab-belowPublicLogo' />\n                </div>\n                <div class='tab-nonVizItems tab-fill-right' />\n            <div/>")]);if(!tab.BrowserSupport.get_displayInlineBlock()){this.get_domRoot().addClass('noDisplayInline');}this.toolbar=this.get_domRoot();this.vizItems=this.getElementBySelector('.tab-vizItems');this.publicItems=this.getElementBySelector('.tab-publicItems');this.publicLogo=this.getElementBySelector('.tab-publicLogoLink');this.publicBelowLogo=this.getElementBySelector('.tab-belowPublicLogo');this.nonVizItems=this.getElementBySelector('.tab-nonVizItems');}
tab.ToolbarTemplate.prototype={toolbar:null,vizItems:null,publicItems:null,publicLogo:null,publicBelowLogo:null,nonVizItems:null}
tab.WebZoneView=function(viewModel,parentZoneViewModel){tab.WebZoneView.initializeBase(this,[viewModel,new tab.PageTemplate()]);this.$2_0=viewModel;this.$2_1=parentZoneViewModel;this.$2_0.add_newWebZone(ss.Delegate.create(this,this.handleNewWebZone));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newWebZone(ss.Delegate.create(this,this.handleNewWebZone));})));this.$2_1.add_resizeZone(ss.Delegate.create(this,this.$2_3));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_1.remove_resizeZone(ss.Delegate.create(this,this.$2_3));})));}
tab.WebZoneView.prototype={$2_0:null,$2_1:null,$2_2:null,get_zonePresModel:function(){return this.$2_0.get_webZoneModel().get_zone();},get_webZonePresModel:function(){return this.$2_0.get_webZoneModel().get_presModel();},get_domRoot:function(){return this.get_template().get_domRoot();},onAddedToDom:function(){tab.WebZoneView.callBaseMethod(this, 'onAddedToDom');this.handleNewWebZone();},handleNewWebZone:function(){if(ss.isValue(this.$2_2)){this.updateWebZone();}else{this.createWebZone();this.get_template().get_domRoot().append(this.$2_2);}},updateIFrameFromViewModel:function(iframeNode){if(this.get_webZonePresModel().s9!==this.$2_2.children().first().prop('original_url')){var $0=tab.URIUtil.absolutizeURI(this.get_webZonePresModel().s9);iframeNode.prop('src',$0);iframeNode.prop('original_url',this.get_webZonePresModel().s9);}tab.DomUtil.resize(iframeNode.get(0),tab.$create_Rect(this.get_zonePresModel().v9,this.get_zonePresModel().wa,this.get_zonePresModel().wb,this.get_zonePresModel().wc));},updateWebZone:function(){var $0=this.$2_2.children().first();this.updateIFrameFromViewModel($0);},createWebZone:function(){var $0='frame_'+this.get_zonePresModel().aay.toString();var $1;this.$2_2=$('<div>');if(tsConfig.is_mobile){if(tab.BrowserSupport.get_isSafari()){this.$2_2.css('-webkit-overflow-scrolling','touch');}this.$2_2.css('overflow','auto');}if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){$1=$('<iframe name="'+$0+'" frameborder="0"></iframe>');if(tab.BrowserSupport.get_browserVersion()<7){$1.css('position','absolute');}}else{$1=$('<iframe/>');$1.prop('name',$0);}$1.css('border','0px none');this.$2_2.append($1);this.updateIFrameFromViewModel($1);},$2_3:function(){this.updateWebZone();}}
tab.WebZoneTemplate=function(){tab.WebZoneTemplate.initializeBase(this,[$("<div class='tab-web'></div>")]);}
tab.WebZoneTemplate.prototype={content:null}
tab.CategoricalLegendView=function(viewModel,template){this.$2_A=[];tab.CategoricalLegendView.initializeBase(this,[viewModel,template]);this.setHighlightButtonVisibility(false);}
tab.CategoricalLegendView.setDomNodeStyleSize=function(domNode,width,height){domNode.css('width',width+'px');domNode.css('height',height+'px');}
tab.CategoricalLegendView.$2_D=function($p0,$p1){if($p1){$p0.show();}else{$p0.hide();}}
tab.CategoricalLegendView.prototype={viewportWidth:0,viewportHeight:0,bodyOffset:null,$2_B:null,$2_C:null,get_docSize:function(){var $0=this.get_catLegendViewModel().get_categoricalLegendPM().ar4.arq;return tab.$create_Size($0.wb,$0.wc);},get_catLegendViewModel:function(){return this.get_viewModel();},get_catLegendTemplate:function(){return this.get_template();},get_scrollOffset:function(){var $0=this.get_catLegendTemplate().columnsHolder.scrollLeft();var $1=this.get_catLegendTemplate().columnsHolder.scrollTop();return tab.$create_Point($0,$1);},set_scrollOffset:function(value){this.get_catLegendTemplate().columnsHolder.scrollLeft(value.x);this.get_catLegendTemplate().columnsHolder.scrollTop(value.y);return value;},onAddedToDom:function(){tab.CategoricalLegendView.callBaseMethod(this, 'onAddedToDom');this.drawLegend();},onViewModelPropertyChanged:function(sender,e){if(e.get_propertyName()==='isActiveZone'){}else if(e.get_propertyName()==='Items'){if(this.get_catLegendViewModel().get_categoricalLegendPM().ar4.w5===this.$2_A.length){this.$2_F();this.$2_E();}}else if(e.get_propertyName()==='ParentZoneSizeChanged'){var $0=this.get_catLegendViewModel().get_$1_3();if($0.w===this.get_catLegendTemplate().panel.width()&&$0.h===this.get_catLegendTemplate().panel.height()){}else{this.resetLegend();}}else if(e.get_propertyName()==='CustomShapesLoaded'){if(this.get_catLegendViewModel().get_legendTypeEnum()==='shape'){if(ss.isValue(this.$2_B)){tab.WindowHelper.cancelAnimationFrame(this.$2_B);}this.$2_B=tab.WindowHelper.requestAnimationFrame(ss.Delegate.create(this,function(){
this.$2_B=null;this.$2_F();}));}}else{this.resetLegend();}},getLegendItemFromEvent:function(pseudoEvent){var $0=$(pseudoEvent.target);if($0.hasClass('tabLegendItemLabelHolder')||$0.hasClass('tabLegendItem')){return null;}return $0.parents('.tabLegendItem').andSelf().first().data('tabLegendItem');},resetLegend:function(){this.drawLegend();},getViewportPosition:function(pseudoEvent){var $0=pseudoEvent.get_gestureInfo();var $1=tab.$create_Point($0.pageX,$0.pageY);return $1;},getDocumentPosition:function(viewportPosition){var $0=tab.$create_Point(viewportPosition.x,viewportPosition.y);var $1=tab.DomUtil.getDojoCoordsJQ(this.get_catLegendTemplate().columnsHolder);$0.x+=this.get_catLegendTemplate().columnsHolder.scrollLeft()+this.bodyOffset.x-$1.x;$0.y+=this.get_catLegendTemplate().columnsHolder.scrollTop()+this.bodyOffset.y-$1.y;return $0;},performSelectOnItem:function(item,action,viewportCoords,contentSelRect){if(this.get_catLegendViewModel().get_legendTypeEnum()!=='map'){this.get_catLegendViewModel().selectItem(item,action);this.get_legendTooltip().singleSelectCoordinates(viewportCoords,tab.$create_Point(contentSelRect.x,contentSelRect.y),this.get_legendViewModel().get_regionType(),'legenditem');}},performHoverOnItem:function(viewportCoords,contentSelRect){if(this.get_catLegendViewModel().get_legendTypeEnum()!=='map'){this.get_legendTooltip().hoverOverCoordinates(viewportCoords,tab.$create_Point(contentSelRect.x,contentSelRect.y),'legenditem',this.get_legendViewModel().get_regionType());}},setContentSize:function(viewportHeightParam,viewportWidthParam){tab.CategoricalLegendView.setDomNodeStyleSize(this.get_catLegendTemplate().columnsHolder,viewportWidthParam,viewportHeightParam);},onLegendHighlighterTapped:function(){this.get_catLegendViewModel().toggleHighlighting();},setHighlightButtonVisibility:function(isVisible){isVisible=isVisible&&this.get_catLegendViewModel().get_$1_16();if(isVisible){this.get_catLegendTemplate().legendHighlighter.show();}else{this.get_catLegendTemplate().legendHighlighter.hide();}},drawLegend:function(){var $0=this.get_catLegendViewModel().get_categoricalLegendPM();var $1=$0.ar4;var $enum1=ss.IEnumerator.getEnumerator(this.$2_A);while($enum1.moveNext()){var $11=$enum1.current;$11.get_domRoot().remove();}this.$2_A.clear();var $2=this.get_catLegendViewModel().get_$1_3().w;var $3=this.get_catLegendViewModel().get_$1_3().h;tab.CategoricalLegendView.setDomNodeStyleSize(this.get_catLegendTemplate().panel,$2,$3);var $4='tableau_base_legend_'+this.get_catLegendViewModel().get_regionType()+((this.get_catLegendViewModel().get_$1_16())?'_q_':'_')+encodeURIComponent((this.get_catLegendViewModel().get_visualId().st));this.get_catLegendTemplate().panel.get(0).id=$4;tab.CategoricalLegendView.$2_D(this.get_catLegendTemplate().titleArea,true);this.viewportWidth=$2;this.viewportHeight=$3;this.bodyOffset=tab.$create_Point(0,0);this.drawTitle();var $5=this.get_catLegendViewModel().get_$1_4();if(this.get_catLegendViewModel().get_titleInline()){var $12=this.get_catLegendViewModel().get_categoricalLegendPM().ar4.w6;this.get_baseLegendTemplate().titleArea.css('height',$12+'px');this.get_baseLegendTemplate().titleArea.css('line-height',$12+'px');this.viewportWidth-=$5.w;this.bodyOffset.x+=$5.w;}else{this.viewportHeight-=$5.h;this.bodyOffset.y+=$5.h;}this.setContentSize(this.viewportHeight,this.viewportWidth);var $6=$0.are;if(ss.isNullOrUndefined($6)){$6={};$6.v9=0;$6.wa=0;}this.set_scrollOffset(tab.PointUtil.fromPresModel($6));var $7=$1.ars.wb;var $8=$1.ars.wc;var $9=$1.art.wb;var $A=$1.art.wc;var $B=Math.ceil(($7-$9)/2);var $C=Math.ceil(($8-$A)/2);var $D=tab.$create_Size($7,$8);var $E=null;var $F=false;if(this.get_catLegendViewModel().legendType==='color'||this.get_catLegendViewModel().legendType==='map'){$E=tab.$create_Rect($B,$C,$9,$A);$F=ss.isValue(this.get_catLegendViewModel().get_$1_12().agk);}var $10=this.$2_15($1);for(var $13=0;$13<$1.w5;++$13){var $14=new tab.CategoricalLegendColumnHtmlTemplate($1.w4,$10,$1.w6,$D,$E,$F);this.$2_A.add($14);$14.column.width($10);this.get_catLegendTemplate().columnHolder.append($14.get_domRoot());}this.$2_E();this.$2_F();},$2_E:function(){this.get_catLegendTemplate().legendHighlighter.toggleClass('tabHighlightEnabled',this.get_catLegendViewModel().get_$1_15());this.get_catLegendTemplate().legendHighlighter.toggleClass('tabHighlightDisabled',!this.get_catLegendViewModel().get_$1_15());},$2_F:function(){var $0=this.get_catLegendViewModel().get_categoricalLegendPM();var $1=$0.ar4;var $2=this.get_catLegendViewModel().get_numLegendItems();var $3=0;for(var $4=0;$4<$1.w5&&$3<$2;++$4){var $5=this.$2_A[$4];for(var $6=0;$6<$1.w4&&$3<$2&&$6<$5.get_legendItems().length;++$6){var $7=$5.get_legendItems()[$6];var $8=this.$2_10($3,$7);if(ss.isValue($8)){this.$2_16($8,$0,$7);$7.get_domRoot().data('tabLegendItem',$8);}++$3;}}},$2_10:function($p0,$p1){var $0=null;switch(this.get_catLegendViewModel().legendType){case 'color':case 'map':$0=this.$2_12($p0,$p1);break;case 'size':$0=this.$2_14($p0,$p1);break;case 'shape':$0=this.$2_13($p0,$p1);break;default:break;}return $0;},$2_11:function($p0,$p1){var $0=tab.PaneDrawInfo.getFogBlendFactor($p1);var $1=tab.PaneDrawInfo.applyFogToBackgroundColor($p1,$0);return tab.PaneDrawInfo.fogColorTransform($p0,$1,$0);},$2_12:function($p0,$p1){var $0=this.get_catLegendViewModel().get_$1_12();var $1=$0.ar7[$p0];var $2=this.get_catLegendViewModel().get_$1_10();var $3=tab.ColorModel.fromColorCode($1.agb);$3=tab.ColorModel.alphaComposite($3,$2);var $4=this.get_catLegendViewModel().isGrayed($1);if($4){$3=this.$2_11($3,$2);}var $5=$3.toString();$p1.itemSwatch.css('background-color',$5);$p1.itemSwatch.get(0).id=$5;if(ss.isValue($0.agk)){$p1.itemSwatch.css('border-style','solid');var $6=tab.ColorModel.fromColorCode($0.agk);if($4){$6=this.$2_11($6,$2);}$p1.itemSwatch.css('border-color',$6.toString());}return $1;},$2_13:function($p0,$p1){var $0=this.get_catLegendViewModel().get_$1_13();var $1=$0.asa[$p0];var $2=$0.ar4.ars.wb;var $3=$0.ar4.ars.wc;var $4=$p1.renderContext;$4.clearRect(0,0,$2,$3);if(this.$2_C==null||!this.$2_C.$A2($1.abg)){this.$2_C=new tab.vqlui$14($p1,$2/2,$3/2,$0.ar4.art.wb,$0.ar4.art.wc,this.get_catLegendViewModel().get_$1_10());}this.$2_C.$A3($4,$1.abg,this.get_catLegendViewModel().isGrayed($1));$p1.itemSwatch.get(0).id=$1.abg.toString();return $1;},$2_14:function($p0,$p1){var $0=this.get_catLegendViewModel().get_$1_14();var $1=$0.asd[$p0];var $2=$0.ar4.ars.wb;var $3=$0.ar4.ars.wc;var $4=$0.ar4.art.wc;var $5=Math.ceil(($3-$4)/2);var $6=$p1.renderContext;$6.save();var $7=tab.CategoricalLegendView.$2_8;var $8=tab.CategoricalLegendView.$2_9;if(this.get_catLegendViewModel().isGrayed($1)){var $C=this.get_catLegendViewModel().get_$1_10();$7=this.$2_11($7,$C);$8=this.$2_11($8,$C);}$6.set_shapeFillStyle($7.toString());$6.set_strokeStyle($8.toString());$6.set_lineWidth(2);var $9=$2/2;var $A=$3/2;var $B=$1.we/2;$6.clearRect(0,0,$2,$3);$6.setClip(tab.$create_RectXY(0,1,$2,$3-2));switch($0.aik){case 'shape':case 'circle':case 'pie':$6.beginPath();$6.arc($9,$A,$B,0,Math.PI*2,false);$6.closePath();$6.fill();$6.beginPath();$6.arc($9,$A,$B,0,Math.PI*2,false);$6.closePath();$6.stroke();break;case 'line':case 'gantt':case 'bar':$6.fillRect($9-$B,$5,$1.we,$4);break;case 'square':var $D=$9-$B;var $E=$A-$B;$6.fillRect($D,$E,$1.we,$1.we);$6.strokeRect($D,$E,$1.we,$1.we);break;case 'text':var $F=$0.ayv;if(ss.isUndefined($F)){$F=$0.ays;}tab.DisplayList2DRenderer.setTextProperties($6,$F,$1.we);$6.set_textAlign('center');$6.fillText1(tab.Strings.SizeLegendTextMarkSwatch,$9,$A);break;default:break;}$6.restore();$p1.itemSwatch.get(0).id=$0.aik+'_'+$1.we.toString();return $1;},$2_15:function($p0){if($p0.ajn==='grid'&&($p0.arq.wb<$p0.w7)){return $p0.arq.wb;}else{return $p0.w7;}},$2_16:function($p0,$p1,$p2){var $0=$p1.ays;var $1=null;var $2='';if(this.get_catLegendViewModel().isSelected($p0)){$0=$p1.ayu;$2=$p1.age;}else if(this.get_catLegendViewModel().isGrayed($p0)){var $8=this.get_catLegendViewModel().get_$1_10();$1=this.$2_11(tab.ColorModel.fromColorCode($0.agb),$8).toString();}var $3=$p1.ar4.aq4.wa;var $4=$p1.ar4.aq4.v9;var $5='left';var $6=this.$2_15($p1.ar4);var $7=$6-$4;if($0.aky==='h-align-right'||$p1.ar4.dg){$5='right';$p2.itemLabelHolder.css('overflow','inherit');var $9=Math.max($6-$4-$p1.ar4.w9,0);$p2.itemLabelHolder.css('right',$9+'px');$7=$6-$9;}else{$p2.itemLabelHolder.css('left',$4+'px');}$p2.itemLabelHolder.css('top',$3+'px');$p2.itemLabelHolder.css('width',$7+'px');$p2.itemLabelHolder.css('bottom','0px');$p2.itemLabelHolder.css('text-align',$5);$p2.itemLabel.css('background-color',$2);$p2.itemLabel.css(tab.FormattingConverters.$4($0,$1));$p2.itemLabel.text($p0.sg);}}
tab.CategoricalLegendColumnHtmlTemplate=function(numRows,itemWidth,itemHeight,swatchArea,swatchRect,accountForColorBorder){tab.CategoricalLegendColumnHtmlTemplate.initializeBase(this,[$("<span class='tabLegendItemColumn'/>")]);this.column=this.get_domRoot();this.$1_1=new Array(numRows);for(var $0=0;$0<numRows;++$0){this.$1_1[$0]=new tab.CategoricalLegendItemHtmlTemplate(swatchArea,swatchRect,accountForColorBorder);tab.CategoricalLegendView.setDomNodeStyleSize(this.$1_1[$0].get_domRoot(),itemWidth,itemHeight);this.$1_1[$0].itemLabel.width(itemWidth);this.column.append(this.$1_1[$0].get_domRoot());}}
tab.CategoricalLegendColumnHtmlTemplate.prototype={column:null,$1_1:null,get_legendItems:function(){return this.$1_1;}}
tab.CategoricalLegendItemHtmlTemplate=function(swatchArea,swatchRect,accountForColorBorder){tab.CategoricalLegendItemHtmlTemplate.initializeBase(this,[$("<div class='tabLegendItem'><span class='tabLegendItemSwatchHolder'></span><span class='tabLegendItemLabelHolder'><span class='tabLegendItemLabel' /></span></div>")]);this.item=this.get_domRoot();var $0=this.getElementBySelector('.tabLegendItemSwatchHolder');this.itemLabel=this.getElementBySelector('.tabLegendItemLabel');this.itemLabelHolder=this.getElementBySelector('.tabLegendItemLabelHolder');tab.CategoricalLegendView.setDomNodeStyleSize($0,swatchArea.w,swatchArea.h);var $1=(ss.isValue(swatchRect))?"<span class='tabLegendItemSwatch' />":"<canvas class='tabLegendItemSwatch' />";$0.append($($1));this.itemSwatch=this.getElementBySelector('.tabLegendItemSwatch');if(ss.isNullOrUndefined(swatchRect)){var $2=this.itemSwatch.get(0);this.renderContext=tab.CanvasRenderer.getRenderContext($2);this.canvasElt=$2;tab.CanvasUtil.sizeCanvasWithHighDPISupport(this.canvasElt,this.renderContext,swatchArea);}else{var $3=tab.$create_Rect(swatchRect.l,swatchRect.t,swatchRect.w,swatchRect.h);if(accountForColorBorder){var $4=1;$3.w-=2*$4;$3.h-=2*$4;this.itemSwatch.css('border-width',$4+'px');this.itemSwatch.css('border-style','none');}tab.CategoricalLegendView.setDomNodeStyleSize(this.itemSwatch,$3.w,$3.h);this.itemSwatch.css('top',$3.t+'px');this.itemSwatch.css('left',$3.l+'px');this.renderContext=null;}}
tab.CategoricalLegendItemHtmlTemplate.prototype={item:null,itemSwatch:null,itemLabelHolder:null,itemLabel:null,renderContext:null,canvasElt:null}
tab.CategoricalLegendTemplate=function(template){tab.CategoricalLegendTemplate.initializeBase(this,[template]);this.panel=this.get_domRoot();this.panel.append($(tab.CategoricalLegendTemplate.$1_0));this.columnsHolder=this.getElementBySelector('.tabLegendContentHolder');this.columnHolder=this.getElementBySelector('.tabLegendColumnHolder');this.legendHighlighter=this.getElementBySelector(tab.LegendTemplate.legendHighlighterSelector);this.legendHighlighter.attr('title',tab.Strings.LegendPanelHighlightSelectedItems);}
tab.CategoricalLegendTemplate.prototype={panel:null,columnsHolder:null,columnHolder:null,legendHighlighter:null}
tab.vqlui$14=function(itemTemplate,xPos,yPos,swatchWidth,swatchHeight,swatchBgColor){tab.vqlui$14.initializeBase(this,[itemTemplate.canvasElt,itemTemplate.renderContext]);this.$9F={};var $0=tab.ApplicationModel.get_instance().get_shapeManager().get_imageKeys();var $1=Object.getKeyCount(tab.PaneDrawInfo.shapeMapping)+$0.length;var $2=2;var $3=swatchWidth-(2*$2);var $4=swatchHeight-(2*$2);var $5=xPos-($3/2);var $6=yPos-($4/2);var $7=swatchWidth-1;var $8=swatchHeight-1;var $9=xPos-($7/2);var $A=yPos-($8/2);var $B=this.$A1($1);var $C=this.$A1($1);var $D=this.$A1($1);var $E=this.$A1($1);var $F=this.$A1($1);var $10=this.$A1($1);for(var $15=0;$15<$1;$15++){var $16;if($15<Object.keys(tab.PaneDrawInfo.shapeMapping).length){$16=Object.keys(tab.PaneDrawInfo.shapeMapping)[$15];$D.vs[$15]=$3;$E.vs[$15]=$4;$F.vs[$15]=$5;$10.vs[$15]=$6;}else{$16=$0[$15-Object.keys(tab.PaneDrawInfo.shapeMapping).length];$D.vs[$15]=$7;$E.vs[$15]=$8;$F.vs[$15]=$9;$10.vs[$15]=$A;}this.$9F[$16]=$15;$C.vs[$15]=$16;$B.vs[$15]=$15.toString();}var $11={};$11.ant={};$11.ant['shape_id']=$C;$11.ant['tuple_id']=$B;$11.ant['width']=$D;$11.ant['height']=$E;$11.ant['left']=$F;$11.ant['top']=$10;$11.zw={};$11.zw['color']=new tab.ColorModel(0,0,0,1).toArgbInt();$11.zw['background_color']=swatchBgColor.toArgbInt();$11.ad7={};$11.ad7['x']=xPos;$11.ad7['y']=yPos;var $12={};$12.aqb={};$12.aqb.wa=0;$12.aqb.v9=0;$12.aqb.wb=swatchWidth;$12.aqb.wc=swatchHeight;var $13={};$13.z1=0;$13.z2=$1;var $14=new tab.SceneInfo();this.$9E=new tab.PaneDrawInfo('pdKey',$14,$12,$13,$11,null);}
tab.vqlui$14.prototype={$9E:null,$9F:null,$A0:null,get_currentContext:function(){if(this.$A0!=null){return this.$A0;}return tab.vqlui$14.callBaseMethod(this, 'get_currentContext');},$A1:function($p0){var $0={};$0.vs=new Array($p0);return $0;},$A2:function($p0){return ss.isValue(this.$9F[$p0.toString()]);},$A3:function($p0,$p1,$p2){this.$A0=$p0;var $0=($p2)?'colorOverrideFog':'colorOverrideOpaque';this.$58(this.$9E,this.$9F[$p1.toString()],'normalOn',$0);}}
tab.LegacyLegendView=function(viewModel,template){this.$2_4=[];this.bodyOffset=tab.$create_Point(0,0);tab.LegacyLegendView.initializeBase(this,[viewModel,template]);this.legacyLegendViewModel=viewModel;this.legacyLegendViewModel.add_newLegacyLegend(ss.Delegate.create(this,this.handleNewLegacyLegend));this.legacyLegendViewModel.add_validStateChanged(ss.Delegate.create(this,this.handleValidStateChanged));this.$2_9();}
tab.LegacyLegendView.prototype={legacyLegendViewModel:null,$2_5:null,$2_6:0,eventHandler:null,iterButtons:null,$2_7:0,bodySize:null,get_domRoot:function(){return this.get_template().get_domRoot();},get_domNode:function(){return this.get_template().get_domRoot().get(0);},get_$2_8:function(){return this.legacyLegendViewModel.get_viewSession();},get_serverRenderedModel:function(){return this.legacyLegendViewModel.get_presModel();},get_legendTemplate:function(){return this.get_template();},onAddedToDom:function(){tab.LegacyLegendView.callBaseMethod(this, 'onAddedToDom');this.$2_6=new Date().getTime();this.eventHandler=this.makeViewerInputHandler(this.get_$2_8(),this.get_legendTemplate().get_contentArea().get(0));this.$2_4.add(this.get_$2_8().registerEventListener('refreshLegacyLegendImages',ss.Delegate.create(this,this.refreshImages)));this.$2_4.add(this.get_$2_8().registerEventListener('refreshVisualModel',ss.Delegate.create(this,this.refreshImages)));this.$2_4.add(this.get_$2_8().registerEventListener('selectionChanged',ss.Delegate.create(this,this.onSelectionChanged)));this.iterButtons=new tab.IteratorButtons(this.get_legendTemplate().get_contentArea(),true,12);this.updateHighlightStatus();this.hideControls();this.doConnections();this.disposables.add(spiff.ClickHandler.targetAndClick(this.get_legendTemplate().domHighlighter,ss.Delegate.create(this,this.toggleHighlight)));this.get_legendTemplate().domImageBody.load(ss.Delegate.create(this,function(){
this.$2_A();this.setBodySize();}));this.get_legendTemplate().domImageBody.error(ss.Delegate.create(this,function(){
this.onImageLoadFailed();}));this.refreshImages(this.legacyLegendViewModel.get_$1_D());},dispose:function(){this.legacyLegendViewModel.remove_newLegacyLegend(ss.Delegate.create(this,this.handleNewLegacyLegend));var $enum1=ss.IEnumerator.getEnumerator(this.$2_4);while($enum1.moveNext()){var $0=$enum1.current;dojo.unsubscribe($0);}if(ss.isValue(this.eventHandler)){this.eventHandler.dispose();this.eventHandler=null;}this.iterButtons.dispose();tab.LegacyLegendView.callBaseMethod(this, 'dispose');},handleNewLegacyLegend:function(){var $0=this.legacyLegendViewModel.get_presModel();if(ss.isValue(this.get_serverRenderedModel())&&this.get_serverRenderedModel().xw===$0.xw&&this.get_serverRenderedModel().nr===$0.nr){this.$2_A();this.updateHighlightStatus();}else{this.refreshImages(this.legacyLegendViewModel.get_$1_D());}},handleValidStateChanged:function(){if(this.legacyLegendViewModel.get_$1_E()){this.refreshImages(this.legacyLegendViewModel.get_$1_D());}},onViewModelPropertyChanged:function(sender,e){if(String.equals(e.get_propertyName(),'urlCacheInfo',false)){}else if(String.equals(e.get_propertyName(),'ParentZoneSizeChanged',false)){this.$2_9();}},$2_9:function(){var $0=this.legacyLegendViewModel.get_$1_3();if(ss.isValue($0)&&!tab.SizeUtil.equals($0,this.$2_5)){this.get_legendTemplate().domBox.css({width:$0.w+'px',height:$0.h+'px'});this.$2_5=$0;}},get_visualId:function(){return tab.ModelUtils.getVisualId(this.legacyLegendViewModel.get_sheetName());},allowHover:function(){},disallowHover:function(){},doConnections:function(){},cancelHover:function(){},hideControls:function(){this.get_legendTemplate().domHighlighter.css('visibility','hidden');this.get_domRoot().removeClass('tvmodeSelect');},updateHighlightStatus:function(){this.get_legendTemplate().domHighlighter.toggleClass('tabHighlightEnabled',this.get_serverRenderedModel().du);this.get_legendTemplate().domHighlighter.toggleClass('tabHighlightDisabled',!this.get_serverRenderedModel().du);},refreshImages:function(cacheInfo){this.$2_7+=1;this.bodySize=null;var $0=this.$2_7+'Z'+this.$2_6;var $1=(ss.isValue(this.get_serverRenderedModel().xw))?this.get_serverRenderedModel().xw.toString():'';this.disallowHover();this.get_legendTemplate().domBox.addClass('LegendBusy');if(tab.BrowserSupport.get_isSafari()||this.get_serverRenderedModel().by){this.get_legendTemplate().get_contentArea().css('overflow','hidden');}var $2=this.get_$2_8().formatLegendRegionTileURL(cacheInfo,this.get_serverRenderedModel().ahx+'-body',this.get_serverRenderedModel().nr,$1,$0);this.get_legendTemplate().domImageBody.attr('src',$2);},onImageLoadFailed:function(){this.get_legendTemplate().domContent.css('visibility','hidden');},onSelectionChanged:function(oSelectionInfo){if(ss.isNullOrUndefined(oSelectionInfo)){return;}this.allowHover();},getDocumentPoint:function(pseudoEvent){var $0=tab.$create_Point(0,0);if(this.get_legendViewModel().get_titleInline()&&!this.get_serverRenderedModel().df){$0.x=-this.get_legendViewModel().get_titleWidth();$0.y=this.get_legendViewModel().get_titleHeight();}return tab.$create_Point(pseudoEvent.pageX+$0.x,pseudoEvent.pageY+$0.y);},documentPointToContentPoint:function(documentPoint){var $0=this.get_legendTemplate().get_contentArea().offset();return tab.$create_Point(documentPoint.x-$0.left+this.get_legendTemplate().get_contentArea().scrollLeft()+this.bodyOffset.x,documentPoint.y-$0.top+this.get_legendTemplate().get_contentArea().scrollTop()+this.bodyOffset.y);},onHover:function(pseudoEvent){var $0=this.getDocumentPoint(pseudoEvent);var $1=this.documentPointToContentPoint($0);if('map'!==this.get_serverRenderedModel().ahx){this.get_legendTooltip().hoverOverCoordinates($0,$1,'legenditem',this.legacyLegendViewModel.get_regionType());}},toggleHighlight:function(){this.get_serverRenderedModel().du=!this.get_serverRenderedModel().du;this.updateHighlightStatus();this.get_$2_8().toggleHighlight(this.legacyLegendViewModel.get_regionType(),this.get_serverRenderedModel().nr);},setBodySize:function(){this.get_legendTemplate().domContent.css('visibility','');this.allowHover();this.get_legendTemplate().domBox.removeClass('LegendBusy');this.bodySize=tab.$create_Size(this.get_legendTemplate().domImageBody.width(),this.get_legendTemplate().domImageBody.height());this.layout();},layout:function(){if(!!!this.bodySize){return;}this.drawTitle();this.get_domRoot().removeClass('LegendHorizontal');var $0=this.$2_5;var $1=tab.$create_Size($0.w,$0.h);this.bodyOffset=tab.$create_Point(0,0);if(this.get_legendViewModel().get_titleInline()){$1.w=$0.w-this.get_legendViewModel().get_titleWidth();this.bodyOffset.x=this.get_serverRenderedModel().w1;}else{$1.h=$0.h-this.get_legendViewModel().get_titleHeight();this.bodyOffset.y=this.get_serverRenderedModel().w0;}this.layoutButtons($1);},getFieldNameVec:function(){if(ss.isValue(this.get_serverRenderedModel().nr)){return this.get_serverRenderedModel().nr.toString().split('\n');}return null;},$2_A:function(){var $0=this.get_serverRenderedModel();if(!$0.by){this.get_legendTemplate().domImageBody.css('width','inherit');}else if(this.get_serverRenderedModel().ajn!=='vertical'){var $1=$0.w2;if(!!!$0.df&&ss.isValue($0.w0)&&!!$0.w0){$1-=$0.w0+1;}this.get_legendTemplate().domImageBody.css('height',$1+'px');this.get_legendTemplate().domImageBody.css('width','');}else{this.get_legendTemplate().domImageBody.css('width',$0.w3+'px');this.get_legendTemplate().domImageBody.css('height','');}}}
tab.LegacyLegendTemplate=function(root){tab.LegacyLegendTemplate.initializeBase(this,[root]);this.domBox=this.getElementBySelector('.LegendBox');this.domContent=this.getElementBySelector('.LegendContent');this.domHighlighter=this.getElementBySelector(tab.LegendTemplate.legendHighlighterSelector);this.domImageBody=this.getElementBySelector('.LegendImageBody');}
tab.LegacyLegendTemplate.prototype={domBox:null,domContent:null,domHighlighter:null,domImageBody:null}
tab.PageView=function(viewModel){tab.PageView.initializeBase(this,[viewModel,new tab.PageTemplate()]);this.pageViewModel=viewModel;this.pageViewModel.add_newPage(ss.Delegate.create(this,this.handleNewPage));this.pageViewModel.add_resized(ss.Delegate.create(this,this.updateSize));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.pageViewModel.remove_newPage(ss.Delegate.create(this,this.handleNewPage));})));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.pageViewModel.remove_resized(ss.Delegate.create(this,this.updateSize));})));}
tab.PageView.prototype={pageViewModel:null,$2_0:null,get_zonePresModel:function(){return this.pageViewModel.get_pageModel().get_zone();},get_domRoot:function(){return this.get_template().get_domRoot();},dispose:function(){if(ss.isValue(this.$2_0)){this.$2_0.destroyRecursive(false);this.$2_0=null;}tab.PageView.callBaseMethod(this, 'dispose');},onAddedToDom:function(){tab.PageView.callBaseMethod(this, 'onAddedToDom');if(ss.isValue(this.pageViewModel.get_pageModel())){this.handleNewPage();}},handleNewPage:function(){if(ss.isNullOrUndefined(this.$2_0)&&ss.isValue(this.pageViewModel.get_pageModel())&&ss.isValue(this.pageViewModel.get_pageModel().get_pagePresModel())){var $0=this.pageViewModel.get_pageModel().get_pagePresModel();this.$2_0=this.createCurrentPagePanel($0);this.get_template().get_domRoot().append(this.$2_0.domNode);this.$2_0.startup();var $1=tab.$create_RectXY(0,0,this.get_zonePresModel().wb,this.get_zonePresModel().wc);tab.DomUtil.resize(this.$2_0,tab.RectXYUtil.toRect($1));}},updateSize:function(){if(ss.isValue(this.pageViewModel.get_pageModel())&&ss.isValue(this.pageViewModel.get_pageModel().get_pagePresModel())){this.$2_0.destroyRecursive();this.$2_0=null;this.handleNewPage();}},createCurrentPagePanel:function(presModel){var $0={};$0.cpHeight=this.get_zonePresModel().wc;$0.sheetid=this.get_zonePresModel().sr;$0.zid=this.get_zonePresModel().aay;$0.enable=this.pageViewModel.get_historyTrailsEnabled();$0.show_slider=presModel.ae;$0.show_toggle=this.pageViewModel.get_showHistoryToggle();$0.show_dropdown=presModel.ad;$0.current_page=presModel.aap;$0.pages=presModel.un;$0.session=this.pageViewModel.get_viewSession();$0.layoutSession=this.pageViewModel.get_layoutSession();$0.lTitle=this.pageViewModel.get_pageModel().get_title();$0.titleHtml=presModel.tm;$0.zoneTitleHeight=this.get_zonePresModel().w0;$0.zoneTitleWidth=this.get_zonePresModel().w1;$0.isDashboard=true;$0.pageViewModel=this.pageViewModel;return this.instantiateCurrentPagePanel($0);},instantiateCurrentPagePanel:function(props){return new tableau.base.widget.CurrentPagePanel(props);}}
tab.PageTemplate=function(){tab.PageTemplate.initializeBase(this,[$("<div class='tab-page'></div>")]);}
tab.ShareView=function(viewModel){tab.ShareView.initializeBase(this,[viewModel,new tab.ShareTemplate()]);this.$2_1=viewModel;this.$2_1.saveSharedView();this.$2_4();this.$2_2=window.innerWidth<=300;}
tab.ShareView.prototype={$2_1:null,$2_2:false,get_$2_3:function(){return this.get_template();},$2_4:function(){var $0=$("\n            <div class='tab-shareLinkSection'>\n                <span class='tab-shareLinkTitle tab-shareTitle'/>\n                <input class='tab-shareLinkInput tab-shareInput' type='text'/>\n                <div class='tab-shareLinkSocial'/>\n            </div>");var $1=$("\n            <div class='tab-shareEmbedSection'>\n                <span class='tab-shareEmbedTitle tab-shareTitle'/>\n                <input class='tab-shareEmbedInput tab-shareInput'/>\n            </div>");if(this.$2_1.get_allowSharingDifferentViews()){this.get_$2_3().shareArea.append($("\n            <div class='tab-shareViewStateSection'>\n                <span class='tab-shareCurrentView tab-shareViewToggle'/><span class='tab-shareOriginalView tab-shareViewToggle'/>\n            </div>"));this.get_$2_3().shareStateArea=this.get_$2_3().getElementBySelector('.tab-shareViewStateSection');this.get_$2_3().shareCurrentView=this.get_$2_3().getElementBySelector('.tab-shareCurrentView');this.get_$2_3().shareOriginalView=this.get_$2_3().getElementBySelector('.tab-shareOriginalView');}if(this.$2_1.get_toolbarIsBottom()){this.get_$2_3().shareArea.append($1);this.get_$2_3().shareArea.append($0);}else{this.get_$2_3().shareArea.append($0);this.get_$2_3().shareArea.append($1);}this.get_$2_3().shareLinkTitle=this.get_$2_3().getElementBySelector('.tab-shareLinkTitle');this.get_$2_3().shareLinkInput=this.get_$2_3().getElementBySelector('.tab-shareLinkInput');this.get_$2_3().shareLinkSocial=this.get_$2_3().getElementBySelector('.tab-shareLinkSocial');this.get_$2_3().shareEmbedTitle=this.get_$2_3().getElementBySelector('.tab-shareEmbedTitle');this.get_$2_3().shareEmbedInput=this.get_$2_3().getElementBySelector('.tab-shareEmbedInput');if(tsConfig.is_mobile){this.get_$2_3().shareLinkInput.click(ss.Delegate.create(this,function(){
this.get_$2_3().shareLinkInput.get(0).setSelectionRange(0,this.get_$2_3().shareLinkInput.val().length);}));this.get_$2_3().shareEmbedInput.click(ss.Delegate.create(this,function(){
this.get_$2_3().shareEmbedInput.get(0).setSelectionRange(0,this.get_$2_3().shareEmbedInput.val().length);}));}else{this.get_$2_3().shareLinkInput.attr('readonly','readonly');this.get_$2_3().shareLinkInput.click(ss.Delegate.create(this,function(){
this.get_$2_3().shareLinkInput.focus();this.get_$2_3().shareLinkInput.select();}));this.get_$2_3().shareEmbedInput.attr('readonly','readonly');this.get_$2_3().shareEmbedInput.click(ss.Delegate.create(this,function(){
this.get_$2_3().shareEmbedInput.focus();this.get_$2_3().shareEmbedInput.select();}));}},$2_5:function(){this.get_$2_3().shareLinkTitle.html(this.$2_1.get_linkLabel());this.get_$2_3().shareEmbedTitle.html(this.$2_1.get_embedLabel());this.$2_6();if(this.$2_1.get_shouldShowSocialShareOptions()){this.get_$2_3().shareLinkSocial.empty();var $0=$("<div class='tab-shareSocial tab-shareSocialFacebook'/>");$0.click(ss.Delegate.create(this,function(){
this.$2_1.doFacebookShareAction();}));this.get_$2_3().shareLinkSocial.append($0);var $1=$("<div class='tab-shareSocial tab-shareSocialTwitter'/>");$1.click(ss.Delegate.create(this,function(){
this.$2_1.doTwitterShareAction();}));this.get_$2_3().shareLinkSocial.append($1);}this.$2_8();},$2_6:function(){if(!this.$2_1.get_allowSharingDifferentViews()){return;}var $0;var $1;if(this.$2_2){var $3=$("<input type='radio' name='state' checked>"+this.$2_1.get_currentViewLabel()+'</input>');this.get_$2_3().shareCurrentView.append($3);this.get_$2_3().shareCurrentView.addClass('narrow');var $4=$("<input type='radio' name='state'>"+this.$2_1.get_originalViewLabel()+'</input>');this.get_$2_3().shareOriginalView.append($4);this.get_$2_3().shareOriginalView.addClass('narrow');this.get_$2_3().shareStateArea.height(this.get_$2_3().shareStateArea.height()+15);$0=new spiff.ToggleButton($3);$1=new spiff.ToggleButton($4);this.get_$2_3().shareStateArea.addClass('narrow');}else{this.get_$2_3().shareCurrentView.html(this.$2_1.get_currentViewLabel());this.get_$2_3().shareOriginalView.html(this.$2_1.get_originalViewLabel());$0=new spiff.ToggleButton(this.get_$2_3().shareCurrentView);$1=new spiff.ToggleButton(this.get_$2_3().shareOriginalView);}var $2=new spiff.ButtonGroup();$2.addButton($0);$2.addButton($1);$2.selectButton($0);this.$2_1.set_shouldShareOriginalView(false);$1.add_propertyChanged(ss.Delegate.create(this,this.$2_7));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
$1.remove_propertyChanged(ss.Delegate.create(this,this.$2_7));})));},$2_7:function($p0,$p1){if($p1.get_propertyName()===spiff.ToggleButton.selectedProperty){this.$2_1.set_shouldShareOriginalView(($p0).get_selected());this.$2_8();}},$2_8:function(){this.get_$2_3().shareLinkInput.val(this.$2_1.generateShareUrl());this.get_$2_3().shareEmbedInput.val(this.$2_1.generateEmbedUrl());},onAddedToDom:function(){this.$2_5();tab.ShareView.callBaseMethod(this, 'onAddedToDom');}}
tab.ShareTemplate=function(){tab.ShareTemplate.initializeBase(this,[$("\n            <div class='tab-shareView tab-toolbarFlyout'>\n            </div>")]);this.shareArea=this.get_domRoot();}
tab.ShareTemplate.prototype={shareArea:null,shareStateArea:null,shareCurrentView:null,shareOriginalView:null,shareLinkTitle:null,shareLinkInput:null,shareLinkSocial:null,shareEmbedTitle:null,shareEmbedInput:null}
tab.SimpleRegionCanvasView=function(viewModel,domNode,paneTableVM){tab.SimpleRegionCanvasView.initializeBase(this,[viewModel,domNode]);this.renderer=new tab.DisplayList2DRenderer(this.canvasElt,this.context);this.$2_9=paneTableVM;}
tab.SimpleRegionCanvasView.prototype={$2_9:null,get_displayListRenderer:function(){return this.renderer;},get_visualListVM:function(){return this.get_viewModel();},performRender:function(){var $0=tabBootstrap.MetricsController.get_instance().createContext('RNDRRG',tabBootstrap.MetricsSuites.rendering);this.get_displayListRenderer().clear();this.get_displayListRenderer().renderVisualList(this.get_visualListVM(),this.$2_9.get_scene().get_imageDictionary());$0.close();},postRenderFinalPass:function(){this.get_displayListRenderer().$17(this.get_visualListVM());},onViewModelPropertyChanged:function(sender,e){if(e.get_propertyName()==='HoverNode'){var $0=tab.$create_Point(-this.get_scrollPos().x,-this.get_scrollPos().y);this.invalidateRect(this.get_visualListVM().dirtyRect($0),true);}else{tab.SimpleRegionCanvasView.callBaseMethod(this, 'onViewModelPropertyChanged',[sender,e]);}}}
tab.LogOnView=function(viewModel){tab.LogOnView.initializeBase(this,[viewModel,spiff.Template.fromHtml("<div class='tabLogon'>")]);this.logOnViewModel=viewModel;var $0=$('<div>');var $1=spiff.StyledTextButton.createActionButton(ss.Delegate.create(this,this.$2_5),tab.Strings.LogOnButton,'tabLogOnDialogButton',spiff.ButtonSize.large,1);$0.append($1.get_element());this.get_element().append($0);this.disposables.add($1);this.logOnViewModel.add_shown(ss.Delegate.create(this,this.$2_3));this.logOnViewModel.add_hidden(ss.Delegate.create(this,this.$2_4));this.$2_1=new spiff.ModalDialog(' ',this.get_element());this.$2_1.get_dialogElement().addClass('tabLogonDialog');this.$2_1.add_closed(ss.Delegate.create(this,function(){
this.logOnViewModel.cancel();}));this.disposables.add(this.$2_1);tab.LogOnView.$2_0=ss.Delegate.create(this,this.$2_2);}
tab.LogOnView.fireLogOnComplete=function(){if(ss.isValue(tab.LogOnView.$2_0)){tab.LogOnView.$2_0();}}
tab.LogOnView.prototype={logOnViewModel:null,$2_1:null,dispose:function(){tab.LogOnView.$2_0=null;this.logOnViewModel.remove_shown(ss.Delegate.create(this,this.$2_3));this.logOnViewModel.remove_hidden(ss.Delegate.create(this,this.$2_4));this.$2_1.dispose();tab.LogOnView.callBaseMethod(this, 'dispose');},onViewModelPropertyChanged:function(sender,e){this.updateContent();},updateContent:function(){},$2_2:function(){this.logOnViewModel.logOnComplete();},$2_3:function(){this.$2_5();this.$2_1.show();},$2_4:function(){this.$2_1.dispose();},$2_5:function(){var $0=800;var $1=600;var $2=new tab.WindowHelper(window.self);var $3=$2.get_screenLeft()+(($2.get_outerWidth()-$0)/2);var $4=$2.get_screenTop()+(($2.get_outerHeight()-$1)/3);var $5=String.format('width={0},height={1},left={2},top={3},toolbar=1,resizable=1',$0,$1,$3,$4);var $6='/#/signin?closePopupWhenDone=true&site='+encodeURIComponent(tsConfig.site_url_name);var $7=tab.WindowHelper.open($6,'TableauAuthentication',$5);if(ss.isValue($7)){_.defer(function(){
$7.focus();});}}}
tab.NotificationView=function(viewModel){tab.NotificationView.initializeBase(this,[viewModel,spiff.Template.fromHtml("<div class='tabNotification'>")]);this.notificationViewModel=viewModel;this.$2_0=$('<div>').addClass('tabNotificationMessage').appendTo(this.get_element());this.updateContent();this.$2_1=spiff.ClickHandler.targetAndClick($('<div>').addClass('tabNotificationClose').html('\u00d7'),ss.Delegate.create(this,this.$2_5)).get_target();this.$2_1.appendTo(this.get_element());this.notificationViewModel.add_shown(ss.Delegate.create(this,this.shown));this.notificationViewModel.add_hidden(ss.Delegate.create(this,this.hidden));}
tab.NotificationView.prototype={notificationViewModel:null,$2_0:null,$2_1:null,$2_2:false,$2_3:false,dispose:function(){if(this.$2_3){this.$2_2=true;return;}this.notificationViewModel.remove_shown(ss.Delegate.create(this,this.shown));this.notificationViewModel.remove_hidden(ss.Delegate.create(this,this.hidden));tab.NotificationView.callBaseMethod(this, 'dispose');},onViewModelPropertyChanged:function(sender,e){this.updateContent();},updateContent:function(){this.$2_0.text(this.notificationViewModel.get_message());},hidden:function(){this.get_element().fadeOut('slow',ss.Delegate.create(this,this.$2_4));},shown:function(){this.$2_3=true;this.get_element().css('display','none');this.get_element().appendTo($('body'));this.get_element().css('margin-left','-'+(this.get_element().outerWidth(true)/2)+'px');this.get_element().fadeIn('fast');},$2_4:function(){this.$2_3=false;if(this.$2_2){this.dispose();}else{this.get_element().detach();}},$2_5:function($p0){this.hidden();}}
tab.PaneTableCanvasView=function(viewModel,domNode){tab.PaneTableCanvasView.initializeBase(this,[viewModel,domNode]);this.renderer=new tab.PaneTable2DRenderer(this.canvasElt,this.context);var $enum1=ss.IEnumerator.getEnumerator(Object.keys(viewModel.get_vizRegionMap()));while($enum1.moveNext()){var $0=$enum1.current;if(!tab.PaneTableViewModel.blackListVisualParts.contains($0)){viewModel.get_vizRegionMap()[$0].add_propertyChanged(ss.Delegate.create(this,this.onViewModelPropertyChanged));}}}
tab.PaneTableCanvasView.prototype={$2_9:null,$2_A:null,get_paneTableVM:function(){return this.get_viewModel();},get_paneTableRenderer:function(){return this.renderer;},get_isContentOpaque:function(){return !this.get_paneTableVM().get_mapServerModel().get_useFastMaps();},performRender:function(){var $0={};$0['viz']=this.get_paneTableVM().get_sheetId();var $1=tabBootstrap.MetricsController.get_instance().createContext('RNDRPT',tabBootstrap.MetricsSuites.rendering,$0);this.renderer.clear();this.get_paneTableRenderer().renderScene(this.get_paneTableVM());if(this.$2_9!=null){if(this.get_actualViewSize().w!==this.$2_9.width||this.get_actualViewSize().h!==this.$2_9.height){tab.CanvasUtil.densifyCanvasUsingSize(this.$2_9,this.get_actualViewSize(),this.get_effectiveViewSize());}this.$2_A.clearRect(0,0,this.$2_9.width,this.$2_9.height);this.copyContent(this.$2_A);}$1.close();},onViewModelPropertyChanged:function(sender,e){var $0=this.get_paneTableVM().getAndClearInvalidationRects();if(!$0.length){this.invalidate(false);}else{var $1=tab.$create_RectXY(0,0,0,0);var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $3=$enum1.current;$1=tab.RectXYUtil.union($1,$3);}var $2=tab.$create_Point(-this.get_scrollPos().x,-this.get_scrollPos().y);$1=tab.RectXYUtil.offsetRect($1,$2);this.invalidateRect($1,false);}},postRenderFinalPass:function(){this.get_paneTableRenderer().renderViewportBorders(this.get_paneTableVM());this.get_paneTableRenderer().renderAxisRulers(this.get_paneTableVM(),this.get_docSize(),this.get_scrollPos());}}
tab.SubscribeView=function(viewModel,toolbarButton){tab.SubscribeView.initializeBase(this,[viewModel,spiff.Template.fromHtml("<div class='tabSubscribe'>")]);this.get_$2_0().add_shown(ss.Delegate.create(this,this.$2_E));this.get_$2_0().add_hidden(ss.Delegate.create(this,this.$2_C));this.get_$2_0().add_modeChange(ss.Delegate.create(this,this.layout));this.get_$2_0().add_emailChanged(ss.Delegate.create(this,this.handleEmailUpdated));this.get_$2_0().add_schedulesChanged(ss.Delegate.create(this,this.handleSchedulesUpdated));this.get_$2_0().add_emailValidationChanged(ss.Delegate.create(this,this.$2_B));this.get_$2_0().add_subjectValidationChanged(ss.Delegate.create(this,this.$2_A));this.comboBoxViewModel=new tab.ComboBoxViewModel();this.comboBoxView=spiff.ObjectRegistry.newView(tab.ComboBoxView,this.comboBoxViewModel);this.toolbarButton=toolbarButton;this.panel=this.get_element();this.buildDom();this.panel.hide();$('body').append(this.panel);this.enableTextSelection();}
tab.SubscribeView.prototype={glass:null,toolbarButton:null,panel:null,emailPanel:null,subscribePanel:null,sheetButtonWorksheet:null,sheetButtonWorkbook:null,nextButton:null,cancelButton:null,subscribeButton:null,comboBoxView:null,comboBoxViewModel:null,get_defaultPanelWidth:function(){return 300;},get_$2_0:function(){return this.get_viewModel();},dispose:function(){this.get_$2_0().remove_shown(ss.Delegate.create(this,this.$2_E));this.get_$2_0().remove_hidden(ss.Delegate.create(this,this.$2_C));this.get_$2_0().remove_modeChange(ss.Delegate.create(this,this.layout));this.get_$2_0().remove_emailChanged(ss.Delegate.create(this,this.handleEmailUpdated));this.get_$2_0().remove_schedulesChanged(ss.Delegate.create(this,this.handleSchedulesUpdated));this.get_$2_0().remove_emailValidationChanged(ss.Delegate.create(this,this.$2_B));this.get_$2_0().remove_subjectValidationChanged(ss.Delegate.create(this,this.$2_A));this.comboBoxViewModel.dispose();this.removeGlass();tab.SubscribeView.callBaseMethod(this, 'dispose');},removeGlass:function(){if(ss.isValue(this.glass)){this.glass.remove_click(ss.Delegate.create(this,this.$2_7));this.glass.dispose();this.glass=null;}},buildDom:function(){this.get_element().append($('<div>').addClass('tabSubscribeTitleContainer').append($('<span>').addClass('tabSubscribeTitle').text(tab.Strings.SubscribeTitle)));this.get_element().append($('<div>').addClass('tabSubscribeModePanel'));},layout:function(){if(this.get_$2_0().get_mode()===tab.SubscribeViewModel.modeEmail){this.layoutEmailSetup();}else{this.layoutSubscribeSetup();}},layoutEmailSetup:function(){var $0=this.get_element().find('.tabSubscribeModePanel').first();if(ss.isValue(this.subscribePanel)){this.subscribePanel.detach();}if(!ss.isValue(this.emailPanel)){this.nextButton=spiff.StyledButton.createStyledButton(ss.Delegate.create(this,this.$2_4),tab.Strings.SubscribeNext,'tabSubscribeNextButton',1);this.disposables.add(this.nextButton);this.cancelButton=spiff.StyledButton.createStyledButton(ss.Delegate.create(this,this.$2_6),tab.Strings.SubscribeCancel,'tabSubscribeCancelButton',2);this.disposables.add(this.cancelButton);this.nextButton.set_disabled(true);this.emailPanel=$('<div>');this.emailPanel.append($('<div>').addClass('tabSubscribeEmailContainer').append($('<div>').addClass('tabSubscribeLabel').text(tab.Strings.SubscribeEnterAddress)).append($('<input>').attr({type:'text',id:'tabSubscribeAddress'}).addClass('tabSubscribeTextbox').keyup(ss.Delegate.create(this,this.$2_9))));this.emailPanel.append($('<div>').addClass('tabSubscribeButtonContainer').append(this.nextButton.get_element()).append(this.cancelButton.get_element()));}$0.append(this.emailPanel);},layoutSubscribeSetup:function(){var $0=this.get_element().find('.tabSubscribeModePanel').first();if(ss.isValue(this.emailPanel)){this.emailPanel.detach();}if(!ss.isValue(this.subscribePanel)){this.subscribeButton=spiff.StyledButton.createStyledButton(ss.Delegate.create(this,this.$2_5),tab.Strings.SubscribeSubscribe,'tabSubscribeSubscribeButton',1);this.disposables.add(this.subscribeButton);this.cancelButton=spiff.StyledButton.createStyledButton(ss.Delegate.create(this,this.$2_6),tab.Strings.SubscribeCancel,'tabSubscribeCancelButton',2);this.disposables.add(this.cancelButton);this.subscribePanel=$('<div>');this.subscribePanel.append($('<div>').addClass('tabSubscribeEmailContainer').append($('<div>').addClass('tabSubscribeLabel').text(tab.Strings.SubscribeTo)).append($('<div>').addClass('tabSubscribeEmailAddress'))).append($('<div>').addClass('tabSubscribeLabel').text(tab.Strings.SubscribeSubject)).append($('<input>').attr({type:'text',id:'tabSubscribeSubject'}).addClass('tabSubscribeTextbox').val(this.get_$2_0().get_defaultSubject()).keyup(ss.Delegate.create(this,this.$2_8)));this.subscribePanel.append($('<div>').addClass('tabSubscribeLabel').text(tab.Strings.SubscribeSchedule)).append($('<div>').addClass('tabSubscribeSchedules').append(this.$2_1()));this.subscribePanel.append($('<div>').addClass('tabSubscribeLabel').text(tab.Strings.SubscribeContent)).append(this.$2_2());this.subscribePanel.append($('<div>').addClass('tabSubscribeButtonContainer').append(this.subscribeButton.get_element()).append(this.cancelButton.get_element()));}this.subscribePanel.find('.tabSubscribeEmailAddress').text(this.get_$2_0().get_email());$0.append(this.subscribePanel);},handleEmailUpdated:function(){if(ss.isValue(this.subscribePanel)){var $0=this.subscribePanel.find('.tabSubscribeEmailAddress');if(ss.isValue($0)){$0.text(this.get_$2_0().get_email());}}},handleSchedulesUpdated:function(){this.comboBoxViewModel.clearItems();var $0=true;var $enum1=ss.IEnumerator.getEnumerator(this.get_$2_0().get_schedules());while($enum1.moveNext()){var $1=$enum1.current;var $2=new tab.ComboBoxItem(null,$1.get_name(),$1,null);this.comboBoxViewModel.addItem($2);if($0){this.comboBoxViewModel.set_selectedItem($2);$0=false;}}},place:function(){var $0=$(document.body);var $1=this.get_defaultPanelWidth();var $2=this.toolbarButton.offset();var $3=this.toolbarButton.outerWidth();var $4=$0.width();var $5=$0.height();var $6=$2.left+$3;var $7=$4-$6;if($7<10){var $9=10-$7;$6=$6-$9;}$6=($6>$1)?$6-$1:0;var $8={left:$6+'px',width:$1+'px'};if(this.get_$2_0().get_isTop()){var $A=$2.top+this.toolbarButton.outerHeight();$8['top']=$A+'px';}else{var $B=$5-$2.top;$8['bottom']=$B+'px';}this.panel.css($8);},$2_1:function(){this.comboBoxViewModel.clearItems();var $0=true;var $enum1=ss.IEnumerator.getEnumerator(this.get_$2_0().get_schedules());while($enum1.moveNext()){var $1=$enum1.current;var $2=new tab.ComboBoxItem(null,$1.get_name(),$1,null);this.comboBoxViewModel.addItem($2);if($0){this.comboBoxViewModel.set_selectedItem($2);$0=false;}}return this.comboBoxView.get_element();},$2_2:function(){var $0=$('<div>').addClass('tabSubscribeSheetButtonContainer');this.sheetButtonWorksheet=this.$2_3(ss.Delegate.create(this,function($p1_0){
this.sheetButtonWorkbook.removeClass('tabSubscribeSheetButtonSelected');this.sheetButtonWorksheet.addClass('tabSubscribeSheetButtonSelected');this.get_$2_0().set_sheetSelectionIsWorkbook(false);}),tab.Strings.SubscribeSheet,'tabSubscribeSheetButtonLeft','tab-subscribe-icon-worksheet');this.sheetButtonWorkbook=this.$2_3(ss.Delegate.create(this,function($p1_0){
this.sheetButtonWorksheet.removeClass('tabSubscribeSheetButtonSelected');this.sheetButtonWorkbook.addClass('tabSubscribeSheetButtonSelected');this.get_$2_0().set_sheetSelectionIsWorkbook(true);}),tab.Strings.SubscribeWorkbook,'tabSubscribeSheetButtonRight','tab-subscribe-icon-workbook');$0.append(this.sheetButtonWorksheet);$0.append(this.sheetButtonWorkbook);this.sheetButtonWorksheet.addClass('tabSubscribeSheetButtonSelected');return $0;},$2_3:function($p0,$p1,$p2,$p3){return spiff.ClickHandler.targetAndClick($('<button>').addClass('tabSubscribeSheetButton').addClass($p2).append($('<span>').addClass('tabSubscribeSheetButtonIcon').addClass($p3)).append($('<div>').addClass('tabSubscribeSheetButtonLabel').text($p1)),$p0).get_target();},$2_4:function(){if(this.get_$2_0().get_intermediateEmailValid()&&ss.isValue(this.emailPanel)){var $0=$('#tabSubscribeAddress').val();var $1=ss.Delegate.create(this,function(){
this.$2_10();this.emailPanel.detach();this.get_$2_0().startSubscribe();});var $2=ss.Delegate.create(this,function(){
this.$2_F();});this.get_$2_0().submitEmail($0,$1,$2);}},$2_5:function(){if(this.get_$2_0().get_intermediateSubjectValid()){var $0=$('#tabSubscribeSubject').val();var $1=this.comboBoxViewModel.get_selectedItem().get_data();this.get_$2_0().createSubscription($0,$1,tab.Strings.SubscribeSuccess,tab.Strings.SubscribeFailure);this.get_$2_0().hide();}},$2_6:function(){this.get_$2_0().hide();},$2_7:function(){this.$2_6();},$2_8:function($p0){this.get_$2_0().set_intermediateSubject($($p0.target).val());},$2_9:function($p0){this.get_$2_0().set_intermediateEmail($($p0.target).val());},$2_A:function(){if(this.get_$2_0().get_intermediateSubjectValid()){this.subscribeButton.set_disabled(false);}else{this.subscribeButton.set_disabled(true);}},$2_B:function(){if(this.get_$2_0().get_intermediateEmailValid()){this.nextButton.set_disabled(false);}else{this.nextButton.set_disabled(true);}},$2_C:function(){this.get_element().fadeOut('fast',ss.Delegate.create(this,this.$2_D));},$2_D:function(){if(ss.isValue(this.emailPanel)){this.emailPanel.detach();}if(ss.isValue(this.subscribePanel)){this.subscribePanel.detach();}this.removeGlass();},$2_E:function(){this.removeGlass();this.glass=new spiff.Glass();this.glass.add_click(ss.Delegate.create(this,this.$2_7));this.glass.show();this.layout();this.place();this.get_element().fadeIn('fast');},$2_F:function(){if(ss.isValue(this.emailPanel)&&!(this.emailPanel.find('.tabSubscribeError').size()>0)){var $0=this.emailPanel.find('.tabSubscribeEmailContainer');$0.append($('<div>').addClass('tabSubscribeError').text(tab.Strings.SubscribeInvalidAddress));}},$2_10:function(){if(ss.isValue(this.emailPanel)){this.emailPanel.find('.tabSubscribeError').remove();}}}
tab.VisualRegionCanvasView=function(viewModel,domNode){this.completeDocSize=tab.$create_Size(0,0);tab.VisualRegionCanvasView.initializeBase(this,[viewModel]);this.$2_6=domNode;this.containers=$('.tvimagesContainer',this.$2_6);}
tab.VisualRegionCanvasView.prototype={renderer:null,containers:null,$2_6:null,add_loadComplete:function(value){this.$2_7=ss.Delegate.combine(this.$2_7,value);},remove_loadComplete:function(value){this.$2_7=ss.Delegate.remove(this.$2_7,value);},$2_7:null,get_docSize:function(){return this.completeDocSize;},destroy:function(){this.dispose();},dispose:function(){this.renderer=null;tab.VisualRegionCanvasView.callBaseMethod(this, 'dispose');},refreshImages:function(newCacheInfo){},reset:function(newGeometry,newTileSize){if(ss.isNullOrUndefined(newGeometry)){return;}var $0=tab.$create_Size(newGeometry.w,newGeometry.h);if(ss.isValue(this.completeDocSize)&&!tab.SizeUtil.equals($0,this.completeDocSize)){var $1=this.get_effectiveViewSize();var $2=tab.$create_Point(Math.min($0.w-$1.w,this.scrollOffset.x),Math.min($0.h-$1.h,this.scrollOffset.y));this.set_scrollPos($2);}this.completeDocSize=$0;this.containers.width(newGeometry.w);this.containers.height(newGeometry.h);},copyContent:function(destContext){destContext.drawImage1(this.canvasElt,0,0);},redraw:function(){if(!this.get_needsRedraw()||ss.isNullOrUndefined(this.renderer)){return;}this.renderer.reset();this.context.save();this.context.setClip(this.$2_8());tab.CanvasUtil.scaleCanvasDrawing(this.context,this.get_pixelRatio());this.renderer.set_renderOffset(this.scrollOffset);this.performRender();this.context.restore();this.postRenderFinalPass();this.clearDirty();this.raiseLoadComplete();},redrawFinished:function(){},raiseLoadComplete:function(){if(ss.isValue(this.$2_7)){this.$2_7(this,ss.EventArgs.Empty);}},onViewModelPropertyChanged:function(sender,e){this.invalidate(false);},$2_8:function(){var $0=this.get_dirtyRect().x*this.get_pixelRatio();var $1=this.get_dirtyRect().y*this.get_pixelRatio();var $2=(this.get_dirtyRect().x+this.get_dirtyRect().w)*this.get_pixelRatio();var $3=(this.get_dirtyRect().y+this.get_dirtyRect().h)*this.get_pixelRatio();var $4=Math.floor($0);var $5=Math.floor($1);return tab.$create_RectXY($4,$5,Math.ceil($2)-$4,Math.ceil($3)-$5);}}
tab.ZoneView=function(zoneViewModel){tab.ZoneView.initializeBase(this,[zoneViewModel,new tab.ZoneTemplate()]);this.get_$2_6().add_updateZone(ss.Delegate.create(this,this.$2_B));this.get_$2_6().add_resizeZone(ss.Delegate.create(this,this.$2_C));this.get_$2_6().add_newZoneContent(ss.Delegate.create(this,this.$2_E));this.get_$2_6().add_validStateChanged(ss.Delegate.create(this,this.$2_D));}
tab.ZoneView.viewRect=function(zonePresModel){var $0=0;if(ss.isValue(zonePresModel.ayq)&&zonePresModel.ayq.ak6!=='bs-none'&&ss.isValue(zonePresModel.ayq.abh)){$0=zonePresModel.ayq.abh;}var $1=tab.$create_RectXY(0,0,zonePresModel.wb-(2*$0),zonePresModel.wc-(2*$0));return tab.RectXYUtil.toRect($1);}
tab.ZoneView.prototype={$2_3:null,$2_4:null,get_$2_5:function(){return this.$2_3;},set_$2_5:function($p0){this.$2_3=$p0;this.get_template().get_domRoot().append(this.$2_3.get_template().get_domRoot());this.$2_3.onAddedToDom();return $p0;},get_$2_6:function(){return this.get_viewModel();},dispose:function(){this.get_$2_6().remove_updateZone(ss.Delegate.create(this,this.$2_B));this.get_$2_6().remove_resizeZone(ss.Delegate.create(this,this.$2_C));this.get_$2_6().remove_newZoneContent(ss.Delegate.create(this,this.$2_E));this.get_$2_6().remove_validStateChanged(ss.Delegate.create(this,this.$2_D));if(ss.isValue(this.$2_3)){this.$2_3.dispose();this.$2_3=null;}this.$2_7();tab.ZoneView.callBaseMethod(this, 'dispose');},$2_7:function(){if(ss.isValue(this.$2_4)){this.$2_4.dispose();this.$2_4=null;}},onViewModelPropertyChanged:function(sender,e){if(e.get_propertyName()==='isActiveZone'){}},$2_8:function(){var $0=(this.get_$2_6().get_$1_A())?'visible':'hidden';(this.get_template()).highlightBorders.css('visibility',$0);},$2_9:function(){if(!this.get_template().get_domRoot().get(0).offsetHeight||!this.get_template().get_domRoot().get(0).offsetWidth){return;}if(!ss.isValue(this.$2_4)){this.$2_4=new spiff.Glass(this.get_template().get_domRoot().get(0));this.$2_4.set_opaque(true);}this.$2_4.show();},$2_A:function(){this.$2_7();},onAddedToDom:function(){tab.ZoneView.callBaseMethod(this, 'onAddedToDom');if(ss.isNullOrUndefined(this.get_$2_5())){this.$2_B();this.$2_C();if(ss.isValue(this.get_$2_6().get_zoneContentViewModel())){this.$2_E(this.get_$2_6().get_zoneContentViewModel());}this.$2_D();}if(tab.ZoneView.$2_2.contains(this.get_$2_6().get_zoneType())){this.get_element().addClass('tabSuppressVizTooltipsAndOverlays');}},$2_B:function(){this.get_template().get_domRoot().css('z-index',this.get_$2_6().get_zoneZIndex().toString());var $0=tab.FeatureParamsLookup.getBoolDefaultTrue(tab.FeatureParam.transparentBackground);var $1=ss.isValue($0)&&$0;if($1&&tab.ZoneView.$2_1.contains(this.get_$2_6().get_zoneType())){}else{this.get_template().get_domRoot().css('background-color',this.get_$2_6().get_backgroundColor());}if(this.get_$2_6().get_zoneType()==='layout-flow'||this.get_$2_6().get_zoneType()==='layout-free-form'||this.get_$2_6().get_zoneType()==='empty'){this.get_template().get_domRoot().addClass('wcLayoutContainer');}var $2=['layout-flow','map','color','size','shape','filter','paramctrl'];if($2.contains(this.get_$2_6().get_zoneType())){var $3=tab.FormattingConverters.$3(this.get_$2_6().get_model().get_zonePresModel().ayq,$1);this.get_template().get_domRoot().css($3);}this.$2_D();},$2_C:function(){this.get_template().get_domRoot().css('width',this.get_$2_6().get_width().toString()+'px');this.get_template().get_domRoot().css('height',this.get_$2_6().get_height().toString()+'px');this.get_template().get_domRoot().css('top',this.get_$2_6().get_y().toString()+'px');this.get_template().get_domRoot().css('left',this.get_$2_6().get_x().toString()+'px');},$2_D:function(){if(!this.get_$2_6().get_valid()){this.$2_9();}else{this.$2_A();}},$2_E:function($p0){var $0=this.get_$2_6().get_zoneType();switch($0){case 'title':case 'text':this.set_$2_5(new tab.TextRegionView($p0));break;case 'size':case 'shape':case 'color':case 'map':if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(Type.canCast($p0,tab.CategoricalLegendViewModel)){this.set_$2_5(spiff.ObjectRegistry.newView(tab.CategoricalLegendView,$p0));}else if(Type.canCast($p0,tab.QuantitativeColorLegendViewModel)){this.set_$2_5(new tab.QuantitativeColorLegendView($p0));}}else{var $1=spiff.ObjectRegistry.newView(tab.LegacyLegendView,$p0);this.set_$2_5($1);}break;case 'current-page':this.set_$2_5(spiff.ObjectRegistry.newView(tab.PageView,$p0));break;case 'filter':this.set_$2_5(spiff.ObjectRegistry.newView(tab.QuickFilterDisplayView,$p0));break;case 'paramctrl':this.set_$2_5(spiff.ObjectRegistry.newView(tab.ParameterControlView,$p0));break;case 'flipboard-nav':this.set_$2_5(spiff.ObjectRegistry.newView(tab.FlipboardNavigatorView,$p0));break;case 'flipboard':this.set_$2_5(spiff.ObjectRegistry.newView(tab.FlipboardView,$p0));break;case 'web':this.set_$2_5(new tab.WebZoneView($p0,this.get_$2_6()));break;case 'bitmap':this.set_$2_5(new tab.ImageZoneView($p0,this.get_$2_6()));break;case 'viz':this.set_$2_5(spiff.ObjectRegistry.newView(tab.PaneTableView,$p0));break;default:break;}}}
tab.ZoneTemplate=function(){tab.ZoneTemplate.initializeBase(this,[$(tab.ZoneTemplate.$1_0)]);this.highlightBorders=this.getElementsBySelector('.wcHighlight');}
tab.ZoneTemplate.prototype={highlightBorders:null}
tab.ActionExecutedEventArgs=function(){tab.ActionExecutedEventArgs.initializeBase(this);}
tab.ActionExecutedEventArgs.prototype={action:null}
tab.TextRegionView=function(viewModel){this.$2_0=['transform','-ms-transform','-webkit-transform','-moz-transform','-o-transform'];tab.TextRegionView.initializeBase(this,[viewModel,new tab.TextRegionTemplate()]);this.get_$2_1().add_newTextRegion(ss.Delegate.create(this,this.handleNewTextRegion));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$2_1().remove_newTextRegion(ss.Delegate.create(this,this.handleNewTextRegion));})));}
tab.TextRegionView.prototype={get_$2_1:function(){return this.get_viewModel();},get_$2_2:function(){return this.get_template();},onAddedToDom:function(){tab.TextRegionView.callBaseMethod(this, 'onAddedToDom');this.handleNewTextRegion();},handleNewTextRegion:function(){if(!this.get_$2_1().hasPresModel()){return;}this.$2_5(this.get_$2_2().textRegionBoundaryElem);this.$2_3(this.get_$2_2().contentElem);},updateContentTextSelectability:function(isSelectable){if(isSelectable){this.get_$2_2().contentElem.addClass('selectable-text');}else{this.get_$2_2().contentElem.removeClass('selectable-text');}},$2_3:function($p0){var $0={};$p0.html(this.get_$2_1().get_html());tab.FormattingConverters.cleanUpFontFamilyStyles($p0);tab.DomUtil.stopPropagationOfInputEvents($p0);if(this.$2_7(this.get_$2_1().get_orientation())||this.$2_8(this.get_$2_1().get_orientation())){var $1=$p0.parent().width();var $2=$p0.parent().height();$0['width']=$2+'px';var $3='0%';if(this.$2_7(this.get_$2_1().get_orientation())){if(!(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9)){$0['bottom']='100%';}$3='100%';}else if(this.$2_8(this.get_$2_1().get_orientation())){if(!(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9)){$0['top']='100%';}$3='0%';}$p0.css($0);$0['left']=this.$2_A($1,$p0.height(),this.get_$2_1().get_hAlign(),this.get_$2_1().get_orientation());this.$2_9($p0,'0% '+$3,this.get_$2_1().get_orientation().toString());}else{$0['width']='100%';var $4=this.get_$2_2().get_domRoot().height();if($4<=$p0.height()&&!this.$2_4($p0,$4)){$0['top']='0%';}else{switch(this.get_$2_1().get_vAlign()){case 'v-align-center':$0['top']='50%';$0['margin-top']=(-$p0.height()/2).toString()+'px';break;case 'v-align-bottom':$0['bottom']='0%';break;case 'v-align-top':$0['top']='0%';break;default:break;}}}$p0.css($0);},$2_4:function($p0,$p1){var $0=false;$p0.find('span').each(function($p1_0,$p1_1){
if(!$0&&ss.isValue($p1_1.style.lineHeight)){$0=parseInt($p1_1.style.lineHeight)>=$p1;}});return $0;},$2_5:function($p0){var $0=this.get_$2_1().get_styledBox();var $1=tab.FormattingConverters.getCSSBorderStyle($0.ak6);var $2={'border-width':$0.abh+'px','border-color':$0.agj,'border-style':$1};if(this.get_$2_1().get_styledBox().dj){this.$2_6($2);}$p0.css($2);},$2_6:function($p0){var $0=tab.FeatureParamsLookup.getBoolDefaultTrue(tab.FeatureParam.transparentBackground);var $1=tab.ColorModel.fromColorCode(this.get_$2_1().get_styledBox().agi);if(ss.isValue($0)&&$0&&$1.get_a()<1){if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){var $2=$1.toArgbHex();var $3='progid:DXImageTransform.Microsoft.gradient('+'startColorStr='+$2+','+'endColorStr='+$2+')';$p0['background']='transparent';$p0['filter']=$3;$p0['-ms-filter']=$3;$p0['zoom']=1;}else{$p0['background-color']=$1.toString();}}else{if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){$p0['background-color']=$1.toRgb();}else{$p0['background-color']=$1.toString();}}},$2_7:function($p0){return Math.round($p0)===90;},$2_8:function($p0){return Math.round($p0)===-90;},$2_9:function($p0,$p1,$p2){var $0={};if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){var $1=($p2==='90')?1:($p2==='-90')?3:0;if(!!$1){var $2='white';var $3='white';if(this.get_$2_1().get_styledBox().dj){var $7=tab.ColorModel.fromColorCode(this.get_$2_1().get_styledBox().agi);var $8=tab.FeatureParamsLookup.getBoolDefaultTrue(tab.FeatureParam.transparentBackground);if(ss.isValue($8)&&$8){var $9='white';var $A=tab.ModelUtils.findContentDashboard();if(ss.isValue($A)){$9=($A.get_backgroundColor()||'white');}var $B=tab.ColorModel.alphaComposite($7,tab.ColorModel.fromColorCode($9));$7=new tab.ColorModel($B.get_r(),$B.get_g(),$B.get_b(),1);}$2=$7.toRgb();$3=$7.toArgbHex();}var $4="progid:DXImageTransform.Microsoft.Chroma(color='"+$3+"')";var $5='progid:DXImageTransform.Microsoft.BasicImage(rotation='+$1+')';var $6=$4+' '+$5;$0['-ms-filter']=$6;$0['filter']=$6;$0['background-color']=$2;}}else{var $enum1=ss.IEnumerator.getEnumerator(this.$2_0);while($enum1.moveNext()){var $C=$enum1.current;$0[$C+'-origin']=$p1;$0[$C]='rotate('+$p2+'deg)';}}$p0.css($0);},$2_A:function($p0,$p1,$p2,$p3){var $0=0;if($p1>$p0){if(this.$2_7($p3)){$p2='h-align-right';}else{$p2='h-align-left';}}if($p2==='h-align-left'){$0=0;}else if($p2==='h-align-right'){$0=$p0-$p1;}else if($p2==='h-align-center'){$0=($p0/2)-($p1/2);}return $0.toString()+'px';}}
tab.TextRegionTemplate=function(){tab.TextRegionTemplate.initializeBase(this,[$("<div class='tab-textRegion'><div class='tab-textRegion-boundary'><div class='tab-textRegion-content selectable-text'></div></div></div>")]);var $0=ss.Delegate.create(this,this.getElementBySelector);this.textRegionBoundaryElem=$0('.tab-textRegion-boundary');this.contentElem=$0('.tab-textRegion-content');}
tab.TextRegionTemplate.prototype={textRegionBoundaryElem:null,contentElem:null}
tab.TiledImageViewModel=function(){tab.TiledImageViewModel.initializeBase(this);}
tab.TiledImageView=function(viewModel){tab.TiledImageView.initializeBase(this,[viewModel,new tab.TiledImageTemplate()]);}
tab.TiledImageView.prototype={get_canScrollX:function(){return (this.get_docSize().w-this.get_actualViewSize().w)>0;},get_canScrollY:function(){return (this.get_docSize().h-this.get_actualViewSize().h)>0;},get_docSize:function(){return tab.$create_Size(this.get_element().width(),this.get_element().height());},get_actualViewSize:function(){return tab.$create_Size(0,0);},get_effectiveViewSize:function(){return this.get_actualViewSize();},get_scrollPos:function(){return tab.$create_Point(this.get_element().scrollLeft(),this.get_element().scrollTop());},set_scrollPos:function(value){this.setXPos(value.x);this.setYPos(value.y);return value;},setXPos:function(xPos){this.get_element().scrollLeft(xPos);},setYPos:function(yPos){this.get_element().scrollTop(yPos);}}
tab.TiledImageTemplate=function(){tab.TiledImageTemplate.initializeBase(this,[$("<div class='tvimagesContainer'></div>")]);this.container=this.getElementBySelector('.tvimagesContainer');}
tab.TiledImageTemplate.prototype={container:null}
tab.ComboBoxView=function(viewModel,dom){tab.ComboBoxView.initializeBase(this,[viewModel,dom]);this.$2_1=viewModel;this.$2_2=dom;this.$2_1.add_selectedItemChanged(ss.Delegate.create(this,this.$2_5));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_1.remove_selectedItemChanged(ss.Delegate.create(this,this.$2_5));})));this.clickHandler=spiff.ClickHandler.targetAndClick(this.$2_2.get_domRoot(),ss.Delegate.create(this,function(){
if(this.$2_1.get_showDropdownIcon()){this.$2_2.icon.addClass('tabComboBoxNoIconPressed');}this.$2_1.comboClicked(this.$2_2.get_domRoot());}));this.disposables.add(this.clickHandler);this.$2_2.get_domRoot().keydown(ss.Delegate.create(this,this.$2_4));this.$2_2.get_domRoot().addClass((!this.$2_1.get_theme())?'tabComboStdTheme':'tabComboCompactTheme');if(ss.isValue(this.$2_1.get_formattingStyle())){tab.WidgetStyle.applyFormattingByClassName(this.$2_1.get_menuStyleClass(),this.$2_1.get_formattingStyle());}this.$2_1.add_menuHidden(ss.Delegate.create(this,this.$2_3));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_1.remove_menuHidden(ss.Delegate.create(this,this.$2_3));})));this.$2_5(this.$2_1.get_selectedItem());}
tab.ComboBoxView.prototype={clickHandler:null,$2_1:null,$2_2:null,$2_3:function(){this.$2_2.icon.removeClass('tabComboBoxNoIconPressed');},$2_4:function($p0){var $0=0;switch($p0.which){case 40:$0=1;break;case 38:$0=-1;break;default:return;}$p0.preventDefault();$p0.stopPropagation();var $1=this.$2_1.get_items().indexOf(this.$2_1.get_selectedItem());if($1<0){return;}$1+=$0;if($1>=0&&$1<this.$2_1.get_items().length){this.$2_1.set_selectedItem(this.$2_1.get_items()[$1]);}},$2_5:function($p0){if(Type.canCast($p0,tab.CustomComboBoxItem)){return;}this.$2_2.icon.remove();if(ss.isNullOrUndefined($p0)){var $0=(ss.isValue(this.$2_1.get_summary()))?this.$2_1.get_summary():'&nbsp;';this.$2_2.name.html($0);return;}this.$2_2.icon=$('<span/>').addClass('tabComboBoxIcon').addClass($p0.get_iconClass()).appendTo(this.$2_2.get_domRoot());if(!ss.isValue($p0.get_iconClass())){this.$2_2.get_domRoot().addClass('tabComboBoxNoIcon');}this.$2_2.name.text($p0.get_name());}}
tab.ComboBoxTemplate=function(){tab.ComboBoxTemplate.initializeBase(this,[$("<span class='tabComboBox tab-ctrl-formatted-widget tab-ctrl-formatted-darker-border-hover'>\n    <span class='tabComboBoxIcon'/>\n    <div class='tabComboBoxNameContainer tab-ctrl-formatted-fixedsize'><span class='tabComboBoxName'/></div>\n    <span class='tabComboBoxButton'/>\n</span>")]);this.icon=this.getElementBySelector('.tabComboBoxIcon');this.name=this.getElementBySelector('.tabComboBoxName');this.button=this.getElementBySelector('.tabComboBoxButton');}
tab.ComboBoxTemplate.prototype={icon:null,name:null,button:null}
tab.ComboBoxViewModel=function(){this.$1_0=[];this.$1_4=0;this.$1_5=0;tab.ComboBoxViewModel.initializeBase(this);}
tab.ComboBoxViewModel.prototype={$1_1:null,$1_2:null,$1_3:null,$1_6:true,$1_7:false,$1_8:true,$1_9:null,$1_A:'',add_itemsChanged:function(value){this.$1_B=ss.Delegate.combine(this.$1_B,value);},remove_itemsChanged:function(value){this.$1_B=ss.Delegate.remove(this.$1_B,value);},$1_B:null,add_selectedItemChanged:function(value){this.$1_C=ss.Delegate.combine(this.$1_C,value);},remove_selectedItemChanged:function(value){this.$1_C=ss.Delegate.remove(this.$1_C,value);},$1_C:null,add_menuHidden:function(value){this.$1_D=ss.Delegate.combine(this.$1_D,value);},remove_menuHidden:function(value){this.$1_D=ss.Delegate.remove(this.$1_D,value);},$1_D:null,get_theme:function(){return this.$1_4;},set_theme:function(value){this.$1_4=value;return value;},get_menuTheme:function(){return this.$1_5;},set_menuTheme:function(value){this.$1_5=value;return value;},get_formattingStyle:function(){return this.$1_9;},set_formattingStyle:function(value){this.$1_9=value;return value;},get_menuStyleClass:function(){return this.$1_A;},set_menuStyleClass:function(value){this.$1_A=value;return value;},get_items:function(){return this.$1_0;},get_selectedItem:function(){return this.$1_1;},set_selectedItem:function(value){if(this.$1_1===value){return;}this.$1_1=value;if(ss.isValue(this.$1_C)){this.$1_C(this.$1_1);}return value;},get_summary:function(){return this.$1_2;},set_summary:function(value){this.$1_2=value;return value;},get_showSelectedItem:function(){return this.$1_6;},set_showSelectedItem:function(value){this.$1_6=value;return value;},get_showDropdownIcon:function(){return this.$1_7;},set_showDropdownIcon:function(value){this.$1_7=value;return value;},get_enabled:function(){return this.$1_8;},set_enabled:function(value){this.$1_8=value;return value;},dispose:function(){if(ss.isValue(this.$1_3)){this.$1_3.dispose();}tab.ComboBoxViewModel.callBaseMethod(this, 'dispose');this.$1_3=null;},setItems:function(newItems){this.$1_0.clear();var $enum1=ss.IEnumerator.getEnumerator(newItems);while($enum1.moveNext()){var $0=$enum1.current;this.$1_0.add($0);}this.$1_11();},addItem:function(item){this.$1_0.add(item);this.$1_11();},clearItems:function(){this.$1_0.clear();this.$1_11();this.set_selectedItem(null);},updateCurrentMenu:function(){if(!this.$1_0.length||!this.$1_8||!ss.isValue(this.$1_3)){return;}var $0=this.$1_E();this.$1_3.set_menu(new spiff.Menu($0.first));this.$1_3.set_selectedItem($0.second);},comboClicked:function(relativeTo){if(!this.$1_0.length||!this.$1_8){return;}var $0=this.$1_E();this.$1_3=spiff.MenuViewModel.createForMenu(new spiff.Menu($0.first),ss.Delegate.create(this,this.$1_12),this.$1_F());this.$1_3.add_hidden(ss.Delegate.create(this,this.$1_10));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_3.remove_hidden(ss.Delegate.create(this,this.$1_10));})));this.$1_3.show(spiff.ShowMenuOptions.create(relativeTo,false,relativeTo.outerWidth(false)));this.$1_3.set_selectedItem($0.second);this.$1_3.set_focusedItem($0.second);},$1_E:function(){var $0=[];var $1=null;if(ss.isValue(this.$1_0)){var $enum1=ss.IEnumerator.getEnumerator(this.$1_0);while($enum1.moveNext()){var $2=$enum1.current;if(this.$1_6||$2!==this.$1_1){var $3=$2.asMenuItem();if($2===this.$1_1){$1=$3;}$0.add($3);}}}return new ss.Tuple($0,$1);},$1_F:function(){switch(this.$1_5){case 0:return new tab.ComboBoxMenuTheme();case 1:return new tab.ComboBoxDropdownMenuTheme(this.get_menuStyleClass());default:return new tab.ComboBoxMenuTheme();}},$1_10:function(){if(ss.isValue(this.$1_D)){this.$1_D();}},$1_11:function(){if(ss.isValue(this.$1_B)){this.$1_B();}},$1_12:function($p0){var $0=$p0.get_data();this.set_selectedItem($0);}}
tab.ComboBoxItem=function(iconClass,name,data,description){this.$0=iconClass;this.$1=name;this.$2=data;this.$3=description;}
tab.ComboBoxItem.prototype={$0:null,$1:null,$2:null,$3:null,get_iconClass:function(){return this.$0;},get_name:function(){return this.$1;},get_data:function(){return this.$2;},get_description:function(){return this.$3;},asMenuItem:function(){return spiff.MenuItem.newItemWithIconAndDescription(this,this.get_name(),this.get_iconClass(),this.get_description());}}
tab.CustomComboBoxItem=function(domRoot,iconClass,name,data,description){tab.CustomComboBoxItem.initializeBase(this,[iconClass,name,data,description]);this.$4=domRoot;}
tab.CustomComboBoxItem.prototype={$4:null,get_domRoot:function(){return this.$4;},asMenuItem:function(){return spiff.CustomMenuItem.newCustomMenuItem(this.get_domRoot());}}
tab.ComboBoxMenuTheme=function(){tab.ComboBoxMenuTheme.initializeBase(this);this.itemClass='tabMenuItemComboTheme';this.menuClass='tabMenuComboTheme';}
tab.ComboBoxDropdownMenuTheme=function(extraMenuClass){tab.ComboBoxDropdownMenuTheme.initializeBase(this);this.itemClass='tabMenuItemComboDropdownTheme tab-ctrl-formatted-text';this.menuClass='tabMenuComboDropdownTheme tab-ctrl-formatted-widget '+extraMenuClass;}
tab.AuthorByline=function(repositoryUrl){this.$0=repositoryUrl;this.authorBylineElement=$('<div>').addClass('wcAuthorByline');this.authorBylineText=$('<span>');this.authorBylineElement.append(this.authorBylineText);}
tab.AuthorByline.prototype={authorBylineElement:null,authorBylineText:null,$0:null,get_element:function(){return this.authorBylineElement;},displayAuthorByline:function(domWatermarkParentWidth){var $0=((domWatermarkParentWidth-this.authorBylineElement.width())/2)+'px';this.authorBylineElement.css('left',$0);var $1=this.$1();var $2=String.format('<a target="_blank" href="{0}">{1}</a>',tableau.format.escapeHTML($1),tableau.format.escapeHTML(tab.Strings.AuthorBylineText));this.authorBylineText.html($2);},dispose:function(){if(ss.isValue(this.authorBylineElement)){this.authorBylineElement.remove();}},$1:function(){var $0=window.location;return String.format('{0}//{1}/profile/app/rdr/repo?workbook={2}',$0.protocol,$0.hostname,this.$0);}}
tab.CategoricalFilter=function(props){this.attributes={};tab.CategoricalFilter.initializeBase(this);this.$1_0=new tab.CategoricalSelection(this);}
tab.CategoricalFilter.$1_6=function($p0,$p1){if(ss.isNullOrUndefined($p0)){return true;}var $0=$p0.table.tuples;var $1=$p1.table.tuples;if($0.length!==$1.length){return true;}for(var $2=0,$3=$0.length;$2<$3;$2++){if($0[$2].t[0].v!==$1[$2].t[0].v){return true;}}return false;}
tab.CategoricalFilter.$1_7=function($p0,$p1){if(ss.isNullOrUndefined($p0)){return true;}var $0=ss.isValue($p0.all)&&$p0.all;var $1=ss.isValue($p1.all)&&$p1.all;return ($0!==$1)&&$1;}
tab.CategoricalFilter.prototype={widgetsInTemplate:true,$1_0:null,getContextMenuCommands:null,requestSetAttributes:null,session:null,field:'',filterViewModel:null,presModel:null,applyDelay:1000,isTypeInList:false,domContent:null,domBox:null,searchDiv:null,resetButton:null,domainButton:null,menuButton:null,stateId:0,$1_1:null,singleSelectMenuItem:null,multiSelectMenuItem:null,inclusiveMenuItem:null,exclusiveMenuItem:null,getSID:null,mode:null,metricsOnly:false,searchButton:null,domControls:null,titleH:0,titleW:0,width:0,modeContents:null,domHorizScroll:null,conditionals:null,showContextMenu:null,$1_2:null,get_domBox:function(){return this.domBox;},get_resetButton:function(){return this.resetButton;},get_applyDelay:function(){return this.applyDelay;},get_isTypeInList:function(){return this.isTypeInList;},get_oFilter:function(){return this.oFilter;},get_filterViewModel:function(){return this.filterViewModel;},get_viewModel:function(){return this.filterViewModel;},get_dijitDeclaredClass:function(){return this.declaredClass;},get_mode:function(){return this.mode;},set_mode:function(value){this.mode=value;return value;},get_session:function(){return this.session;},set_session:function(value){this.session=value;return value;},get_attributes:function(){return this.attributes;},set_attributes:function(value){this.attributes=value;return value;},get_field:function(){return this.field;},get_stateId:function(){return this.stateId;},set_stateId:function(value){this.stateId=value;return value;},get_modeContents:function(){return this.modeContents;},get_domContent:function(){return this.domContent;},set_domContent:function(value){this.domContent=value;return value;},get_dijitDomNode:function(){return this.domNode;},set_dijitDomNode:function(value){this.domNode=value;return value;},get_domain:function(){var $0=null;if(!!this.get_attributes()['values']){$0=this.get_attributes()['values'];}return $0;},get_searchWidget:function(){return this.$1_1;},set_searchWidget:function(value){this.$1_1=value;return value;},get_presModel:function(){return this.presModel;},get_backgroundColor:function(){return this.backgroundColor;},get_$1_3:function(){return this.$1_2;},set_$1_3:function($p0){this.$1_2=$p0;return $p0;},get_quickFilter:function(){return this;},get_filterTable:function(){return this.get_filterViewModel().get_catFilterTable();},getCheckDropdownCatmodeClass:function(){return tableau.base.widget.catmode.CheckDropdown;},getChecklistCatmodeClass:function(){return tableau.base.widget.catmode.Checklist;},getRadiolistCatmodeClass:function(){return tableau.base.widget.catmode.Radiolist;},getSliderCatmodeClass:function(){return tableau.base.widget.catmode.Slider;},getDropdownCatmodeClass:function(){return tableau.base.widget.catmode.SimpleDropdown;},getPatternCatmodeClass:function(){return tableau.base.widget.catmode.Pattern;},getTypeInListCatmodeClass:function(){return tableau.base.widget.catmode.TypeIn;},makeSmallSearchWidget:function(props,hostDiv){return new tableau.base.widget.SmallSearchWidget(props,hostDiv);},makeSearchWidget:function(props,hostDiv){return new tableau.base.widget.SearchWidget(props,hostDiv);},makeFilteringSearchWidget:function(props){return new tableau.base.widget.FilteringSearchWidget(props);},makePendingChangesManager:function(){return new tab.PendingChangesManager(this.get_modeContents(),this.oFilter.table.actual_size,this.oFilter.exclude,this.oFilter.all);},postCreate:function(){this.getSID=ss.Delegate.create(this,function(){
return this.get_stateId();});this.$1_5();this.$1_11();if(this.mode!=='pattern'){tableau.util.disableTextSelection(this.get_domContent());}if(this.filterViewModel.get_filterType()!=='Categorical'){}var $0=tab.$create_SearchWidgetQfProperty();$0.qf=this;if(this.mode==='slider'){this.set_searchWidget(this.makeSmallSearchWidget($0,this.searchDiv));}else if(this.$1_A()){this.set_searchWidget(this.makeFilteringSearchWidget($0));}else{this.set_searchWidget(this.makeSearchWidget($0,this.searchDiv));}this.get_searchWidget().startup();if(!this.metricsOnly){var $1=(this.mode==='checkdropdown'||this.mode==='dropdown'||this.mode==='pattern'||this.mode==='typeinlist'||this.shouldHideSearchButton());var $2=(this.mode==='pattern'||this.mode==='typeinlist'||this.shouldHideDomainButton());var $3=(this.mode==='pattern'||this.mode==='typeinlist'||this.shouldHideResetButton());this.processControlButtons($1,$2,this.shouldHideContextMenu(),$3);}this.initFromState(true,false);},processControlButtons:function(hideSearchButton,hideDomainButton,hideMenuButton,hideResetButton){var $0=0;var $1=function($p1_0,$p1_1){
if($p1_1){dojo.addClass($p1_0.domNode,'CFButtonHide');}else{$0+=1;dojo.addClass($p1_0.domNode,'CFButtonR'+$0);}};$1(this.menuButton,hideMenuButton);$1(this.domainButton,hideDomainButton);$1(this.searchButton,hideSearchButton);$1(this.resetButton,hideResetButton);dojo.addClass(this.domControls,'CF'+$0+'Button');$(this.menuButton.domNode).css('background-color',this.backgroundColor);$(this.domainButton.domNode).css('background-color',this.backgroundColor);$(this.searchButton.domNode).css('background-color',this.backgroundColor);$(this.resetButton.domNode).css('background-color',this.backgroundColor);},setTitleSize:function(newH,newW){this.titleH=newH;this.titleW=newW;},updateStateIfNeeded:function(){this.set_stateId(this.get_stateId()+1);},handleClickIfPending:function(node){if(this.shouldDeferChanges()){this.get_modeContents().pendingManager.handleItemClicked(tableau.FilterItem.getIndex(node),node);}},shouldDeferChanges:function(){var $0=this.get_attributes()['show-apply']==='true';return $0&&(this.get_mode()==='checklist'||this.get_mode()==='checkdropdown');},shouldHideResetButton:function(){return this.hideEmptyTitlebar()||this.get_attributes()['show-all']==='false'||this.get_attributes()['show-filter-state']==='false';},shouldHideSearchButton:function(){return this.hideEmptyTitlebar()||this.get_attributes()['show-search']==='false';},shouldHideIncludeExclude:function(){return this.hideEmptyTitlebar()||this.get_attributes()['show-exclude']==='false';},shouldHideDomainButton:function(){return this.hideEmptyTitlebar()||this.get_attributes()['show-morefewerbutton']!=='true';},shouldHideContextMenu:function(){var $0=tab.CommandsPresModelWrapper.create(this.getContextMenuCommands());return this.hideEmptyTitlebar()||ss.isNullOrUndefined($0)||!$0.get_commandItems().length;},$1_4:function(){return dojo.hasClass(this.domNode,'CFInlineTitle');},resize:function(marginBox){dojo.marginBox(this.domNode,marginBox);this.layout();},destroy:function(preserveDom){if(ss.isValue(this.get_modeContents())&&(typeof(this.get_modeContents().destroy)==='function')){this.get_modeContents().destroy();this.modeContents=null;}if(ss.isValue(this.get_searchWidget())){this.get_searchWidget().destroy();this.set_searchWidget(null);}this.requestSetAttributes=null;this.getContextMenuCommands=null;this.showContextMenu=null;this.get_domContent().innerHTML='';this.domContent=null;this.inherited(arguments);},handleItemClick:function(node){if(ss.isValue(this.get_modeContents().pendingManager)){this.get_modeContents().pendingManager.handleItemClicked(tableau.FilterItem.getIndex(node),node);}if(tableau.FilterItem.isAllItem(node)){this.doSelectAll(this.isSingleSelect()||tableau.FilterItem.isChecked(node));return;}},getMetrics:function(){var $0=dojo.marginBox(this.domNode);var $1;if(!this.$1_10()){$1=1;var $2=dojo.contentBox(this.get_domContent());var $3=this.get_domContent().childNodes.length;if(dojo.isFF&&tab.BrowserSupport.get_isMac()){$1+=4;}return {fixed:{w:0,h:$0.h-$2.h+$1},item:{w:0,h:$2.h/$3}};}else{return {fixed:{w:0,h:$0.h}};}},$1_5:function(){this.mode=this.get_oFilter().mode||'checklist';if(!String.isNullOrEmpty(this.get_oFilter().pattern)){this.mode='pattern';}this.isTypeInList=(this.mode==='typeinlist');},initFromState:function(suppressLayout,suppressSearchUpdate,fromClientSide){var $0;var $1;var $2;var $3=tableau.format.formatColumnDisplayName(this.get_oFilter(),false);var $4=0;var $5='';var $6=this.get_oFilter().showFacets&&this.width>100;var $7;var $8=0;var $9=0;var $A=ss.isValue(this.get_modeContents())&&this.$1_A();if(ss.isValue(this.get_modeContents())&&ss.isValue(this.get_modeContents().get_scrollNode())&&this.get_modeContents().get_scrollNode().scrollTop>0){$8=this.get_modeContents().get_scrollNode().scrollTop;}var $B=ss.isValue(this.modeContents)&&ss.isValue(this.get_modeContents().pendingManager);var $C=$B&&ss.isValue(this.get_modeContents().pendingManager.get_allItemCheckState());var $D=$B&&(this.get_modeContents().pendingManager.get_allItemCheckState()||false);var $E=($C)?$D:this.get_oFilter().all||this.get_oFilter().allNotChecked;var $F=$(this.domNode);$F.toggleClass('CFAll',$E);$F.toggleClass('CFValue',!$E);if(this.get_oFilter().exclude){dojo.addClass(this.domNode,'CFExclusive');}else{dojo.removeClass(this.domNode,'CFExclusive');}this.handleResetButtonState();this.updateDomainButton();if(ss.isValue(this.get_modeContents())&&this.get_modeContents().shouldNotReinstantiate()){var $10=tab.CategoricalFilter.$1_6(this.get_$1_3(),this.get_oFilter());var $11=this.get_$1_3().exclude!==this.get_oFilter().exclude;var $12=tab.CategoricalFilter.$1_7(this.get_$1_3(),this.get_oFilter());this.set_$1_3(this.get_oFilter());if((ss.isValue(this.get_oFilter().domains)&&this.get_oFilter().domains.contains('relevant')&&$10)||$11){this.updateSearch();}else if($12){if(this.get_searchWidget().get_isVisible()){this.get_searchWidget().toggleUI();}}return;}this.set_$1_3(this.get_oFilter());this.$1_5();if(this.get_oFilter().exclude){$3=tab.Strings.QuickFilterTitleBarExclusive($3);}dojo.attr(this.domTitleBar,'title',$3);this.updateTitleBar();if(!$A){this.get_domContent().innerHTML='';}$2=tab.FilterItemUtil.getBaseItemName(this,'FI');$0=(this.mode==='pattern')?this.get_oFilter().pattern:this.get_oFilter().table.tuples;if($6&&(this.mode==='slider'||this.mode==='checklist'||this.mode==='checkdropdown'||this.mode==='radiolist'||this.mode==='dropdown')){$7=this.get_oFilter().table.tuples;for($1=0;$1<$7.length;$1++){$4+=parseInt($7[$1].f[0].v,10);}$5=$4.toString();}if($A){if(!fromClientSide&&ss.isValue(this.modeContents.pendingManager)){this.get_modeContents().pendingManager.resetFilterInfo(this.get_oFilter().table.actual_size,this.get_oFilter().exclude,this.get_oFilter().all);this.get_modeContents().pendingManager.resetPendingChanges();}this.get_modeContents().resetContent($0,$2,$5);}else{if(ss.isValue(this.get_modeContents())&&(typeof(this.get_modeContents().destroy)==='function')){this.get_modeContents().destroy();this.modeContents=null;}this.$1_9();this.get_modeContents().set_width(this.width);this.get_modeContents().instantiate($0,$2,$5);}this.$1_0.refreshRangeAnchorAndSelection();this.conditionals.init(this.get_oFilter().condition,this.get_oFilter().limit);if(!suppressLayout){this.layout();}if((!suppressSearchUpdate&!this.$1_A())===1){this.updateSearch();}if(ss.isValue(this.get_modeContents())&&ss.isValue(this.get_modeContents().get_scrollNode())){$9=this.get_modeContents().get_scrollNode().scrollHeight-this.get_modeContents().get_scrollNode().clientHeight;this.get_modeContents().get_scrollNode().scrollTop=Math.min($8,$9);}},handleResetButtonState:function(){if(ss.isValue(this.get_oFilter().all)&&this.get_oFilter().all){tab.QfButtonUtil.disableResetButton(this.get_resetButton());}else{tab.QfButtonUtil.enableResetButton(this.get_resetButton());}},$1_8:function(){var $0=null;if(this.mode==='checkdropdown'){$0=this.getCheckDropdownCatmodeClass();}else if(this.mode==='checklist'){$0=this.getChecklistCatmodeClass();}else if(this.mode==='radiolist'){$0=this.getRadiolistCatmodeClass();}else if(this.mode==='slider'){$0=this.getSliderCatmodeClass();}else if(this.mode==='dropdown'){$0=this.getDropdownCatmodeClass();}else if(this.mode==='pattern'){$0=this.getPatternCatmodeClass();}else if(this.mode==='typeinlist'){$0=this.getTypeInListCatmodeClass();}if($0==null){return;}this.modeContents=new $0(this,this.get_domContent(),this.get_attributes());},$1_9:function(){this.$1_8();},updateSearch:function(){this.get_searchWidget().updateSearch();},applyChanges:function(){this.get_modeContents().applyChanges();},applyChangesByChangelist:function(changelist){if(this.shouldDeferChanges()){this.get_modeContents().pendingManager.processChanges(changelist);if(ss.isValue(this.get_modeContents().pendingManager.get_allItemCheckState())){if(this.get_modeContents().pendingManager.get_allItemCheckState()){dojo.addClass(this.domNode,'CFAll');}else{dojo.removeClass(this.domNode,'CFAll');}}}else{this.get_modeContents().applyChangesByChangelist(changelist,this.mode);}},applyPendingChangesByChangelist:function(){if(this.get_modeContents().pendingManager.isSelectAll()){this.$1_D(true);}else if(this.get_modeContents().pendingManager.isDeSelectAll()){this.$1_D(false);}else{var $0=this.get_modeContents().pendingManager.get_pendingChangelist();this.get_modeContents().applyChangesByChangelist($0,this.mode);}this.get_modeContents().pendingManager.resetPendingChanges();},cancelPendingChangesByChangelist:function(){this.get_modeContents().pendingManager.resetPendingChanges();this.initFromState(false,true,true);},$1_A:function(){return this.mode==='checklist'||this.mode==='radiolist'||this.mode==='checkdropdown'||this.mode==='dropdown';},filterBySearchResults:function(data){if(data==null){this.initFromState(false,true,true);}else if(this.$1_A()){this.modeContents.updateContent(data);this.$1_0.clearRangeAnchor();}},updateStateFromSearch:function(changed){var $0=false;var $1=this.get_isTypeInList();if(this.get_isTypeInList()){this.$1_B(changed);}this.initFromState($0,$1);},$1_B:function($p0){var $0;var $1={};var $2;var $3;var $4;var $5;var $6=this.get_oFilter().table.tuples;for($2=0;$2<$6.length;$2++){$3=tab.$create_CatFilterContentItem();$3.node=this.fetchChildNodeByIndex($2);$3.tuple=$6[$2];$1[$6[$2].d||$6[$2].t[0].v]=$3;}for($2=0;$2<$p0.tuples.length;$2++){$5=$p0.tuples[$2];$0=$1[$5.d||$5.t[0].v];if(ss.isValue($0)&&ss.isValue($0.node)){tableau.FilterItem.setChecked($0.node,$5.s,$0.tuple);}else{$4=tableau.util.binarySearch($5,$6,0,null,ss.Delegate.create(this,this.$1_C));if(!$4.found){$6.splice($4.index,0,$5);}}}},$1_C:function($p0,$p1){var $0=tableau.format.formatTupleDisplayName($p0);var $1=tableau.format.formatTupleDisplayName($p1);if($0===$1){return 0;}else if(String.compare($0,$1)<0){return -1;}else{return 1;}},fetchChildNodeByIndex:function(index){return this.get_modeContents().fetchChildNodeByIndex(index);},isSingleSelect:function(){return this.mode!=='checklist'&&this.mode!=='checkdropdown'&&this.mode!=='typeinlist';},updateDomainButton:function(){if(ss.isNullOrUndefined(this.get_oFilter().domains)||this.get_oFilter().domains.length<=1){dojo.style(this.domainButton.domNode,'display','none');return;}dojo.removeClass(this.domainButton.iconNode,'wcIconDomainAll');dojo.removeClass(this.domainButton.iconNode,'wcIconDomainContext');dojo.removeClass(this.domainButton.iconNode,'wcIconDomainRelevant');if(this.get_attributes()['values']===tableau.types.QFDomain.QFD_RELEVANT){this.domainButton.attr('label',tab.Strings.QuickFilterDomainShowMoreValues);dojo.addClass(this.domainButton.iconNode,'wcIconDomainRelevant');}else if(this.get_attributes()['values']===tableau.types.QFDomain.QFD_CONTEXT){this.domainButton.attr('label',tab.Strings.QuickFilterDomainShowFewerValues);dojo.addClass(this.domainButton.iconNode,'wcIconDomainContext');}else{this.domainButton.attr('label',tab.Strings.QuickFilterDomainShowFewerValues);dojo.addClass(this.domainButton.iconNode,'wcIconDomainAll');}},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},toggleReset:function(){tab.QfButtonUtil.disableResetButton(this.resetButton);this.doSelectAll(true,true);},toggleDomain:function(){var $0=function($p1_0){
return $p1_0===tableau.types.QFDomain.QFD_CONTEXT;};if(this.get_attributes()['values']===tableau.types.QFDomain.QFD_RELEVANT){this.$1_F({values:tableau.types.QFDomain.QFD_ALL},false);}else if(this.get_attributes()['values']===tableau.types.QFDomain.QFD_CONTEXT){this.$1_F({values:tableau.types.QFDomain.QFD_RELEVANT},false);}else if(dojo.some(this.get_oFilter().domains,$0)){this.$1_F({values:tableau.types.QFDomain.QFD_CONTEXT},false);}else{this.$1_F({values:tableau.types.QFDomain.QFD_RELEVANT},false);}},getTheAllItemNode:function(){return this.get_modeContents().fetchAllItem();},doSelectAll:function(turnOn,forceApply){if(this.shouldDeferChanges()){this.get_modeContents().pendingManager.processAll(turnOn);if(turnOn){dojo.addClass(this.domNode,'CFAll');}else{dojo.removeClass(this.domNode,'CFAll');}if(forceApply){this.applyPendingChangesByChangelist();}}else{this.$1_D(turnOn);}},$1_D:function($p0){var $0,$1;var $2;var $3;var $4;var $5=[];if(this.mode==='checklist'||this.mode==='checkdropdown'){if($(this.get_domContent()).find('.tiledContent').length>0){$1=this.get_oFilter().table.actual_size;var $6=(this.get_oFilter().exclude)?!$p0:$p0;for($0=0;$0<$1;++$0){$3=this.fetchChildNodeByIndex($0);if(ss.isValue($3)){tableau.FilterItem.setChecked($3,$6);}}}}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){$4=new tab.CategoricalFilterData(this.get_oFilter().targetSheets,this.get_field(),this.get_oFilter().exclude,null);if($p0){$4.set_includeAll(true);}tab.FilterClientCommands.updateCategoricalFilter($4);}if($p0){tab.FilterClientCommands.setCategoricalFilterValues(this.get_session().get_visualId(),this.get_field(),'filter-all',null);}else if(this.mode==='checklist'||this.mode==='checkdropdown'){tab.QfButtonUtil.enableResetButton(this.resetButton);$2={};$2.schema=this.get_oFilter().table.schema;$2.tuples=new Array(0);if(this.get_oFilter().exclude){this.$1_E();return;}tab.FilterClientCommands.setCategoricalFilterValues(this.get_session().get_visualId(),this.get_field(),'filter-replace',$5);}},$1_E:function(){var $0;var $1,$2=0,$3=this.get_oFilter().table.actual_size-1;var $4=new tab.Changelist();var $5=new tab.RawChange();if($(this.get_domContent()).find('.tiledContent').length>0){for($1=$2;$1<=$3;$1++){$0=this.get_modeContents().fetchChildNodeByIndex($1);if(ss.isValue($0)){tableau.FilterItem.setChecked($0,true);}}}$5.setRange(new tab.IntegerRange($2,$3),true);$4.addChange($5);this.get_modeContents().applyChangesByChangelist($4,this.mode);},toggleSearchUI:function(){this.get_searchWidget().toggleUI();},$1_F:function($p0,$p1){this.requestSetAttributes($p0,$p1);},doscrollHoriz:function(){this.get_domContent().scrollLeft=this.domHorizScroll.scrollLeft;},$1_10:function(){return this.mode==='slider'||this.mode==='dropdown'||this.mode==='checkdropdown'||this.mode==='pattern';},getTitleOffset:function(){if(dojo.hasClass(this.domNode,'CFInlineTitle')){return 0;}else{return dojo.marginBox(this.domTitleBar).h;}},_getSearchWidgetDim:function(){var $0=this.get_searchWidget().get_dijitDomNode();if(dojo.style($0,'display')==='none'||this.$1_A()){var $1=tab.$create_DojoCoords();$1.h=0;$1.l=0;$1.t=0;$1.w=0;return $1;}else{return dojo.marginBox($0);}},layoutVertical:function(notTitleSize){var $0;var $1={h:0};var $2={h:0};this._layoutSearchWidget(notTitleSize);$2=this._getSearchWidgetDim();$0=notTitleSize.h-$1.h-$2.h;this.get_modeContents().layout(tab.$create_Size(notTitleSize.w,$0),false);},_getContentFloatingElement:function(){return (this.get_isTypeInList())?this.get_searchWidget().get_dijitDomNode():this.get_domContent();},_layoutSearchWidget:function(notTitleSize){var $0;var $1;if(this.get_searchWidget().get_isVisible()){$1={h:0};$0=notTitleSize.h-$1['h'];this.get_searchWidget().layout($0);}},_layoutTypeInList:function(notTitleSize){if(this.$1_4()){dojo.marginBox(this.get_searchWidget().get_dijitDomNode(),notTitleSize);}else{dojo.style(this.get_searchWidget().get_dijitDomNode(),{width:'auto',height:'auto'});}this.layoutVertical(notTitleSize);},_layoutCompactFilter:function(notTitleSize){dojo.addClass(this.domNode,'CFHorizontal');this._layoutSearchWidget(notTitleSize);this.get_modeContents().layout(tab.$create_Size(notTitleSize.w,notTitleSize.h),false);},layout:function(){var $0;var $1,$2;var $3;this.updateTitleBar();if(ss.isNullOrUndefined(this.domNode.parentNode)){return;}dojo.removeClass(this.domNode,'CFHorizontal');dojo.removeClass(this.domNode,'CFInlineTitle');dojo.style(this.domHorizScroll,'display','none');$1=dojo.marginBox(this.domTitleBar);this.resetTitleSize();if(this.titleH>0){$1.h=this.titleH;dojo.marginBox(this.domTitleBar,{h:$1.h});}if(this.titleW>0){$1.w=this.titleW;dojo.marginBox(this.domTitleBar,{w:$1.w});}tableau.util.setupTitleEllipsis($(this.domTitleBar));$2=dojo.contentBox(this.domNode);$3=tab.$create_Size($2.w,$2.h);if(!this.metricsOnly){if(!this.hideEmptyTitlebar()){$0=this._getContentFloatingElement();if(this.titleW>0){$3.w=$2.w-$1.w;dojo.style(this.domTitleBar,'float','left');dojo.style($0,'float','left');dojo.addClass(this.domNode,'CFInlineTitle');}else{$3.h=$2.h-$1.h;dojo.style(this.domTitleBar,'float','none');dojo.style($0,'float','none');}}}if(this.$1_10()){this._layoutCompactFilter($3);}else{if(this.get_isTypeInList()){this._layoutTypeInList($3);}else{this.layoutVertical($3);}}},$1_11:function(){tableau.util.localizeDojoLabeledControls([new ss.Tuple(this.searchButton,'QuickFilterSearch'),new ss.Tuple(this.domainButton,'QuickFilterDomainShowFewerValues')]);},clearRangeAnchorAndSelection:function(){this.$1_0.clearRangeAnchorAndSelection();},forEachSelected:function(itemCallback){if(ss.isNullOrUndefined(itemCallback)||$.isFunction(itemCallback)){return;}var $0=this.$1_0.get_selectedIndexes();for(var $1=0,$2=$0.length;$1<$2;$1++){var $3=$0[$1];var $4=this.fetchChildNodeByIndex($3);itemCallback($3,$4);}},onListItemClick:function(evt){this.$1_0.onListItemClick(evt);},notifyChange:function(callback){this.$1_0.notifyChange(callback);}}
tab.BaseDropdown=function(parent,div,attrs){tab.BaseDropdown.initializeBase(this,[parent,div,attrs]);this.searchBox=parent.get_searchWidget();this.searchBox.setStyle(1);this.$1_6=false;}
tab.BaseDropdown.prototype={dropdown:null,menuNode:null,glass:null,dropdownLabelContainer:null,fillListElement:null,searchBox:null,currentlySelected:0,multimode:false,$1_5:false,$1_6:false,get_scrollNode:function(){var $0=null;if(ss.isValue(this.menuNode)){$0=this.menuNode.children('.CFInnerContainer').get(0);}return $0;},instantiate:function(tuples,itemName,facet){this.fillListElement=ss.Delegate.create(this,function($p1_0){
this.createListElement($p1_0,tuples,itemName,facet);});this.dropdown=$('<span>').addClass('tabComboBox').addClass('tab-ctrl-formatted-widget').addClass('tab-ctrl-formatted-darker-border-hover').addClass('tabComboStdTheme').addClass('tabComboBoxNoIcon').addClass('tiledContent').bind('click',ss.Delegate.create(this,this.onDropdownClicked));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.dropdown.remove();})));this.dropdownLabelContainer=$('<div>').addClass('tabComboBoxNameContainer').addClass('tab-ctrl-formatted-fixedsize').appendTo(this.dropdown);$('<span>').addClass('tabComboBoxName').text(this.getLabelText(tuples)).appendTo(this.dropdownLabelContainer);$('<span>').addClass('tabComboBoxButton').appendTo(this.dropdown);this.div.appendChild(this.dropdown.get(0));if(ss.isValue(this.menuNode)){this.menuNode.children('.tiledContent').remove();this.fillMenu(this.menuNode);}this.$1_7(tuples.length);},updateContent:function(data){if(tab.BrowserSupport.get_isIE()){this.menuNode.css('box-shadow','none');}var $0=(data.length>0)?data.join(''):this.searchBox.get_noMatchHtml();var $1=this.menuNode.children('.tiledContent');if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null;}$1.html($0);if(this.$1_5){var $2=this.dropdown.offset();this.menuNode.css('top',($2.top-this.menuNode.outerHeight())+'px');}if(tab.BrowserSupport.get_isIE()){this.menuNode.css('box-shadow','2px 2px 2px #adadad');}},resetContent:function(tuples,itemName,facet){this.fillListElement=ss.Delegate.create(this,function($p1_0){
this.createListElement($p1_0,tuples,itemName,facet);});if(ss.isValue(this.menuNode)){this.$1_E(this.menuNode);var $0=this.$1_A();this.menuNode.css({top:$0.y+'px',left:$0.x+'px'});}this.dropdownLabelContainer.children().text(this.getLabelText(tuples));if(ss.isValue(this.searchBox)&&this.searchBox.isShowingResults()){return;}if(ss.isValue(this.menuNode)){tab.BrowserViewport.getViewport(ss.Delegate.create(this,function($p1_0){
if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null;}if(ss.isValue(this.menuNode)){this.menuNode.children().remove();this.$1_B($p1_0,this.menuNode);}}));}this.$1_7(tuples.length);},$1_7:function($p0){var $0=(this.shouldUseAllItem())?1:0;if($p0+$0<=5){this.searchBox.hideUI();}else{this.searchBox.showUI();}},shouldNotReinstantiate:function(){return false;},layout:function(contentSize,horizontalLayout){this.inherited(arguments);var $0=dojo.marginBox(this.div);var $1=$0.w;if($1>8){$(this.div.firstChild).css({width:($1-8)+'px','margin-left':'3px'});}if(ss.isValue(this.tiledWidget)){this.tiledWidget.updateViewport(contentSize.w,contentSize.h);}},destroy:function(){this.dispose();this.removeGlass();if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=null;},fetchAllItem:function(){if(!this.shouldUseAllItem()){return null;}else{return this.menuNode.children('.CFInnerContainer').children('.FIItem').get(0);}},fetchChildNodeByIndex:function(index){if(ss.isValue(this.tiledWidget)){return this.tiledWidget.getElement(index);}else{return null;}},getLabelText:function($p0){var $0=tab.FilterItemUtil.isAllOrAllChecked(this.parent);this.currentlySelected=-1;this.multimode=false;var $1=$p0.length;if(!$1){if(!$0){}return tab.Strings.QuickFilterAll;}for(var $2=0;$2<$1;$2++){if($p0[$2].s&&!$0){if(this.currentlySelected>-1){this.multimode=true;break;}this.currentlySelected=$2;}}if($0&&($1>1)){return tab.Strings.QuickFilterAll;}else if(this.multimode){return tab.Strings.QuickFilterMultipleValues;}else if(this.currentlySelected===-1&&this.hasSummaryText()){return this.getSummaryText();}else{var $3=(this.currentlySelected>-1)?this.currentlySelected:0;return tableau.format.formatTupleDisplayName($p0[$3]||'',true,this.parent.get_oFilter().role);}},onDropdownClicked:function($p0){tab.BrowserViewport.getViewport(ss.Delegate.create(this,this.$1_8));},$1_8:function($p0){if(this.$1_9()){return;}var $0=document.body;this.removeGlass();this.glass=new spiff.Glass();this.glass.add_click(ss.Delegate.create(this,this.hideMenu));this.glass.set_zIndex(899);this.glass.show();var $1=this.$1_A();this.menuNode=$('<div>').attr('id',this.parent.id+'_menu').addClass('CFOuterContainer').addClass('tabMenuComboDropdownTheme').addClass('tab-ctrl-formatted-widget').css({position:'absolute',top:$1.y+'px',left:$1.x+'px','max-height':(30*this.get_lineHeight())+'px','z-index':900,visibility:'hidden'}).appendTo($0);if(!this.$1_6){tab.WidgetStyle.applyFormatting(this.menuNode.get(0),this.parent.get_presModel().ays,this.parent.get_backgroundColor(),this.get_lineHeight());this.$1_6=true;}this.searchBox.startupNoAppend();this.$1_E(this.menuNode);this.$1_B($p0,this.menuNode);dojo.toggleClass(this.menuNode.get(0),'QFDropdownMenuAbove',this.$1_5);},removeGlass:function(){if(ss.isValue(this.glass)){this.glass.remove_click(ss.Delegate.create(this,this.hideMenu));this.glass.dispose();this.glass=null;}},hideMenu:function(){this.searchBox.clearSearch();this.removeGlass();if(ss.isValue(this.menuNode)){this.menuNode.remove();this.menuNode=null;}},$1_9:function(){return ss.isValue(this.menuNode)||ss.isValue(this.glass);},$1_A:function(){var $0=this.dropdown.offset();var $1=this.dropdown.outerHeight();return tab.$create_Point($0.left,$0.top+$1-1);},$1_B:function($p0,$p1){if(ss.isNullOrUndefined($p1)){return;}this.fillMenu($p1);this.$1_5=this.$1_D($p0,$p1);if(this.$1_5){$(this.searchBox.domNode).appendTo($p1);}else{$(this.searchBox.domNode).insertBefore($p1.children().first());}this.$1_C($p0,$p1);if(this.searchBox.get_isVisible()){this.searchBox.showUI();}},$1_C:function($p0,$p1){var $0=this.dropdown.offset();var $1=this.dropdown.outerWidth();var $2=document.body;var $3=$p1.find('.tile').eq(0);var $4=$3.css('right');var $5=(ss.isValue($3[0]))?$3[0].style.width:'';$3.css('right','auto');$3.css('width','');var $6=$3.width()+20;$3.css('right',$4);$3.css('width',$5);$6=Math.max($6,$1);var $7=$($2).width();$6=Math.min($6,$7);$p1.width($6);var $8=$p1.offset();var $9=$8.left+$p1.outerWidth();var $A=$($2).find('.dashboardSpacer');var $B=$A.offset();var $C=$B.left+$A.width();var $D=$9-$C;if($D>0){var $15=$8.left-$D;$15=Math.max($15,0);$p1.css('left',$15+'px');}var $E=30*this.get_lineHeight();var $F=3*this.get_lineHeight();var $10=$p0.getVisibleRoom(tab.PointUtil.fromPosition($0));var $11=((this.$1_5)?$10.roomAbove:$10.roomBelow-2)-20;$11=$11-parseInt($p1.css('border-bottom-width'));$11=Math.min($11,$E);$11=Math.max($11,$F);$p1.css('max-height',$11+'px');if(this.$1_5){if($10.roomAbove>($11-1)){$p1.css('top',($0.top-$p1.outerHeight())+'px');}else{$p1.css('top',($0.top-$10.roomAbove)+'px');}}var $12=(ss.isValue(this.searchBox)&&this.searchBox.get_isVisible())?dojo.marginBox(this.searchBox.domNode).h:0;var $13=0;var $14=$p1.children('.CFInnerContainer');if(this.parent.shouldDeferChanges()&&ss.isValue(this.apply)&&!this.menuNode.hasClass('CFDropdownNoItems')){$13=dojo.marginBox(this.apply.get_element().get(0)).h;this.layoutApplyButton($14);}if(ss.isValue($14)){$14.css('max-height',($p1.get(0).clientHeight-$12-$13)+'px');this.tiledWidget.updateViewport($14.height(),0);}$p1.css('visibility','visible');},$1_D:function($p0,$p1){var $0=this.dropdown.offset();var $1=30*this.get_lineHeight();var $2=$p0.getVisibleRoom(tab.PointUtil.fromPosition($0));var $3=Math.min($p1.outerHeight(),$1)>$2.roomBelow&&$2.roomAbove>$2.roomBelow;return $3;},fillMenu:function(menu){if(ss.isNullOrUndefined(menu)){return;}var $0=$('<div>').addClass('CFInnerContainer').addClass('tab-ctrl-formatted-text');menu.append($0);this.fillListElement($0.get(0));},$1_E:function($p0){if(this.parent.get_oFilter().all||this.parent.get_oFilter().allNotChecked){$p0.addClass('CFAll');}else{$p0.removeClass('CFAll');}if(this.parent.get_oFilter().exclude){$p0.addClass('CFExclusive');}else{$p0.removeClass('CFExclusive');}}}
tab.BaseMode=function(parent,div,attrs){this.disposables=new tab.DisposableHolder();tab.BaseMode.initializeBase(this);this.disposables=new tab.DisposableHolder();this.parent=parent;this.div=div;this.attributes={};if(ss.isValue(attrs)){this.attributes=attrs;}}
tab.BaseMode.prototype={$1_0:0,div:null,parent:null,attributes:null,$1_1:null,pendingManager:null,apply:null,cancel:null,tiledWidget:null,get_lineHeight:function(){return this.parent.get_presModel().ab0;},get_width:function(){return this.$1_0;},set_width:function(value){this.$1_0=value;return value;},get_itemFormatter:function(){return this.$1_1;},set_itemFormatter:function(value){this.$1_1=value;return value;},get_scrollNode:function(){return null;},instantiate:function(tuples,itemName,facet){alert(tab.Strings.noLoc('Error: Unimplemented functionality'));},shouldNotReinstantiate:function(){return false;},updateContent:function(data){alert(tab.Strings.noLoc('Error: Unimplemented functionality'));},resetContent:function(tuples,itemName,facet){alert(tab.Strings.noLoc('Error: Unimplemented functionality'));},setUpForPendingChanges:function(){if(this.parent.shouldDeferChanges()){this.pendingManager=this.parent.makePendingChangesManager();this.pendingManager.add_onPendingChanges(ss.Delegate.create(this,this.enableApplyButton));this.pendingManager.add_onNoPendingChanges(ss.Delegate.create(this,this.disableApplyButton));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.pendingManager.remove_onPendingChanges(ss.Delegate.create(this,this.enableApplyButton));this.pendingManager.remove_onNoPendingChanges(ss.Delegate.create(this,this.disableApplyButton));})));this.$1_2();}},$1_2:function(){this.apply=spiff.LabelButton.newNativeButton();this.apply.set_label(tab.Strings.QuickFilterApply);var $0=ss.Delegate.create(this,function(){
this.resetPendingVisuals(false);this.parent.applyPendingChangesByChangelist();});this.apply.add_click($0);this.disposables.add(this.apply);this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.apply.remove_click($0);})));this.cancel=spiff.LabelButton.newNativeButton();this.cancel.set_label(tab.Strings.QuickFilterCancel);var $1=ss.Delegate.create(this,function(){
this.resetPendingVisuals(true);this.parent.cancelPendingChangesByChangelist();});this.cancel.add_click($1);this.disposables.add(this.cancel);this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.cancel.remove_click($1);})));this.disableApplyButton();},appendApplyButton:function(node){if(this.parent.shouldDeferChanges()){node.addClass('CFApplyButtonContainer');node.append(this.cancel.get_element());node.append(this.apply.get_element());}},layoutApplyButton:function(container){if(ss.isValue(container)){var $0=container.width();var $1=parseInt(this.apply.get_element().css('margin-right'));var $2=Math.floor(($0/2)-$1);var $3='max-width';if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<=8&&$2<this.apply.get_element().width()){$3='width';}this.apply.get_element().css($3,$2+'px');this.cancel.get_element().css($3,$2+'px');}},enableApplyButton:function(){this.apply.set_disabled(false);this.cancel.set_disabled(false);},disableApplyButton:function(){this.apply.set_disabled(true);this.cancel.set_disabled(true);},resetPendingVisuals:function(resetCheckState){},applyChanges:function(){alert(tab.Strings.noLoc('Error: Unimplemented functionality'));},layout:function(contentSize,horizontalLayout){dojo.marginBox(this.div,contentSize);},fetchChildNodeByIndex:function(index){if(ss.isNullOrUndefined(index)||index<0){return null;}if(tableau.FilterItem.isAllItem(this.div.firstChild)){index+=1;}return this.div.childNodes[index];},fetchAllItem:function(){return this.div.childNodes[0];},shouldUseAllItem:function(){return this.attributes['show-all']!=='false';},countIfAll:function(tuples){var $0=(this.parent.get_mode()==='checklist')?1:0;for(var $1=0;$1<tuples.length;$1++){if(tuples[$1].s){$0+=1;}}return $0===tuples.length;},getSummaryText:function(){return (this.hasSummaryText())?this.parent.get_oFilter().summary:'';},formatTuple:function(tuple){return tableau.format.formatTupleDisplayName(tuple,true,this.parent.get_oFilter().role);},formatFacet:function(tuple){return tableau.format.formatTupleDisplayFacet(tuple,true,this.parent.get_oFilter().role);},onSmallSearchUI:function(searchIsOn,searchDiv){},hasSummaryText:function(){var $0=this.parent.get_mode()==='slider';var $1=this.parent.get_mode()==='dropdown'||this.parent.get_mode()==='checkdropdown';var $2=this.parent.get_oFilter().summary;var $3=$2!==tab.Strings.QuickFilterAll;return ss.isValue($2)&&($0||($1&&$3));},applyChangesByChangelist:function(changelist,filterType){var $0=this.attributes['values']||'';var $1=[];var $2=[];var $3=[];if(filterType==='checklist'||filterType==='checkdropdown'||filterType==='typeinlist'){var $4=changelist.compileForChecklist($0);var $5;for(var $6=0;$6<$4.select.length;$6++){$5=$4.select[$6];$1.add($5);}for(var $7=0;$7<$4.deselect.length;$7++){$5=$4.deselect[$7];$2.add($5);}tab.FilterClientCommands.modifyCategoricalFilterValuesByIndex(this.parent.get_session().get_visualId(),this.parent.get_field(),$1,$2);}else if(filterType==='radiolist'){var $8=changelist.compileForRadiolist($0);$3.add($8.index);tab.FilterClientCommands.setCategoricalFilterValuesByIndex(this.parent.get_session().get_visualId(),this.parent.get_field(),'filter-replace',$3);}},dispose:function(){this.disposables.dispose();}}
tab.CheckDropdown=function(parent,div,attrs){tab.CheckDropdown.initializeBase(this,[parent,div,attrs]);this.set_itemFormatter(tableau.FilterItem.formatChecklistFilterItemHtml);}
tab.CheckDropdown.prototype={instantiate:function(tuples,itemName,facet){this.setUpForPendingChanges();this.inherited(arguments);},fillMenu:function(menu){this.inherited(arguments);var $0=$('<div>');this.appendApplyButton($0);if($0.children().length>0){menu.append($0);$0.css('height',this.apply.get_element().outerHeight(true)+'px');}},createListElement:function(div,tuples,itemName,facet){if(this.shouldUseAllItem()&&tuples.length>0){tab.Checklist.addAllItem($(div),this.parent,itemName,facet,tab.Checklist.shouldCheckAllItem(this.parent.get_oFilter(),this.pendingManager),tableau.FilterItem.formatChecklistFilterItemHtml);}if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=tab.TiledWidgetFactory.createChecklist(this.parent,tuples,div,itemName,this.get_lineHeight());var $0=spiff.EventUtil.bindWithDispose($(div),'click',ss.Delegate.create(this.parent,this.parent.onListItemClick));this.disposables.add($0);var $1=spiff.EventUtil.bindWithDispose($(div),'touchend',ss.Delegate.create(this.parent,this.parent.onListItemClick));this.disposables.add($1);dojo.toggleClass(div.parentNode,'CFDropdownNoItems',!tuples.length);if(!tuples.length){$(div).text(tab.Strings.QuickFilterNoItems);}},resetPendingVisuals:function(resetCheckState){var $0;if(ss.isValue(this.searchBox)&&this.searchBox.isShowingResults()){$0=this.menuNode.children('.tiledContent');}else{$0=this.menuNode.find('.tile');}if(ss.isNullOrUndefined($0)){return;}var $enum1=ss.IEnumerator.getEnumerator($0.children().get());while($enum1.moveNext()){var $1=$enum1.current;if(tableau.FilterItem.isPending($1)){tableau.FilterItem.togglePendingState($1);if(resetCheckState){tableau.FilterItem.setChecked($1,!tableau.FilterItem.isChecked($1));}}}}}
tab.Checklist=function(parent,div,attrs){tab.Checklist.initializeBase(this,[parent,div,attrs]);this.set_itemFormatter(tab.Checklist.getFilterItemHtml);}
tab.Checklist.addAllItem=function(checklistDiv,filter,itemName,allFacet,isChecked,formatter){var $0=tab.FilterItemUtil.getAllItemHtml(filter,itemName,allFacet,isChecked,formatter);var $1=checklistDiv.append($($0).addClass('tab-ctrl-formatted-text'));tableau.FilterItem.setChecked($1.children().get(0),isChecked);}
tab.Checklist.shouldCheckAllItem=function(ofilter,pendingManager){if(ss.isValue(pendingManager)&&ss.isValue(pendingManager.get_allItemCheckState())){return pendingManager.get_allItemCheckState();}return ofilter.all||(ofilter.allChecked&&!ofilter.exclude)||(ofilter.allNotChecked&&ofilter.exclude);}
tab.Checklist.prototype={checkListContainer:null,$1_3:null,get_scrollNode:function(){return this.checkListContainer;},instantiate:function(tuples,itemName,facet){this.setUpForPendingChanges();this.div.innerHTML='';this.$1_3=this.parent.get_searchWidget();this.$1_3.setStyle(2);var $0=$(this.div);this.$1_3.startupAndAppendTo($0);this.$1_3.hideUI();var $1=$('<div>').addClass('CFInnerContainer').addClass('tab-ctrl-formatted-text');dojo.addClass(this.div,'CFOuterContainer');$0.append($1);this.checkListContainer=$1.get(0);this.createChecklist(this.checkListContainer,tuples,itemName,facet);$0.children('.FIItem').focus();var $2=spiff.EventUtil.bindWithDispose($(this.div),'click',ss.Delegate.create(this.parent,this.parent.onListItemClick));this.disposables.add($2);this.appendApplyButton($(this.div));},resetContent:function(tuples,itemName,facet){var $0=$(this.checkListContainer);$0.empty();if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null;}this.createChecklist(this.checkListContainer,tuples,itemName,facet);this.appendApplyButton($(this.div));},updateContent:function(data){var $0=(data.length>0)?data.join(''):this.$1_3.get_noMatchHtml();var $1=$(this.checkListContainer);if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null;}$1.html($0);},shouldNotReinstantiate:function(){return ss.isValue(this.$1_3)&&this.$1_3.isShowingResults();},layout:function(contentSize,horizontalLayout){this.inherited(arguments);if(ss.isValue(this.tiledWidget)){this.tiledWidget.updateViewport(contentSize.w,contentSize.h);}var $0=(ss.isValue(this.$1_3)&&this.$1_3.get_isVisible())?dojo.marginBox(this.$1_3.domNode).h:0;var $1=0;if(this.parent.shouldDeferChanges()){$1=dojo.marginBox(this.apply.get_element().get(0)).h;this.layoutApplyButton($(this.checkListContainer));}if(ss.isValue(this.checkListContainer)){dojo.style(this.checkListContainer,'height',(this.div.clientHeight-$0-$1)+'px');}},destroy:function(){this.dispose();if(ss.isValue(this.$1_3)){this.$1_3.destroy();}if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=null;},fetchChildNodeByIndex:function(index){if(ss.isValue(this.tiledWidget)){return this.tiledWidget.getElement(index);}else{return null;}},createChecklist:function(div,tuples,itemName,facet){if(this.shouldUseAllItem()&&tuples.length>0){tab.Checklist.addAllItem($(div),this.parent,itemName,facet,tab.Checklist.shouldCheckAllItem(this.parent.get_oFilter(),this.pendingManager),tableau.FilterItem.formatChecklistFilterItemHtml);}if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=tab.TiledWidgetFactory.createChecklist(this.parent,tuples,div,itemName,this.get_lineHeight());},fetchAllItem:function(){if(ss.isValue(this.checkListContainer)){return this.checkListContainer.firstChild;}else{return null;}},resetPendingVisuals:function(resetCheckState){var $0;if(ss.isValue(this.$1_3)&&this.$1_3.isShowingResults()){$0=$(this.checkListContainer);}else{$0=$(this.checkListContainer).find('.tile');}if(ss.isNullOrUndefined($0)){return;}var $enum1=ss.IEnumerator.getEnumerator($0.children().get());while($enum1.moveNext()){var $1=$enum1.current;if(tableau.FilterItem.isPending($1)){tableau.FilterItem.togglePendingState($1);if(resetCheckState){tableau.FilterItem.setChecked($1,!tableau.FilterItem.isChecked($1));}}}}}
tab.HierarchicalFilter=function(props){this.templateString="<div class='HierarchicalFilter'>"+"<div dojoAttachPoint='domBox' class='HierarchicalFilterBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='FilterTitle' dojoAttachPoint='domTitleBar'></div>"+"<div dojoType='dijit.form.Button' class='HFButton HFSearchButton' showlabel='false'"+"dojoAttachPoint='searchButton' dojoAttachEvent='onClick:toggleSearchUI'"+"iconClass='wcIconSearch'>Search</div>"+"<div dojoType='dijit.form.Button' class='HFButton HFMenuButton' dojoAttachPoint='menuButton'"+"name='type' dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'>"+'</div>'+'</div>'+"<div dojoAttachPoint='searchDiv'></div>"+"<div class='HFLevels tab-ctrl-formatted-coloronly' dojoAttachPoint='domLevelBox'>"+"<table cellspacing='2'><tr dojoAttachPoint='domLevelContainer'></tr></table></div>"+"<div class='HFSelection tab-ctrl-formatted-text' dojoAttachPoint='domContent'></div>"+"<div dojoType='tableau.base.widget.ConditionalsWidget' dojoAttachPoint='conditionals'></div>"+'</div>'+'</div>';this.$1_0=[];this.attributes={};tab.HierarchicalFilter.initializeBase(this);}
tab.HierarchicalFilter.$1_16=function($p0,$p1){var $0=tab.ColorModel.fromColorCode($p1);var $1=tab.ColorModel.fromColorCode($p0.agb);var $2={};var $3=tab.ColorModel.alphaCompositeSolidDest(tab.ColorModel.fromColorModelPlusAlpha($1,tab.HierarchicalFilter.$1_7),$0);$2['border-width']='1px';$2['border-style']='solid';$2['border-color']=$3.toRgb();tab.StyleUtil.appendCSSRule('.HFLevels td.HFLevelNoneSelected',$2);var $4={};var $5=tab.ColorModel.alphaCompositeSolidDest(tab.ColorModel.fromColorModelPlusAlpha($1,tab.HierarchicalFilter.$1_8),$0);$4['border-color']=$5.toRgb();tab.StyleUtil.appendCSSRule('.HFLevels td.HFLevelSomeSelected',$4);tab.StyleUtil.appendCSSRule('.HFLevels td.HFLevelAllSelected',$4);var $6={};var $7={};var $8={};var $9=tab.ColorModel.fromColorCode($p1);var $A=tab.ColorModel.alphaCompositeSolidDest(tab.ColorModel.fromColorModelPlusAlpha($0,tab.HierarchicalFilter.$1_9),tab.HierarchicalFilter.$1_6);var $B=tab.ColorModel.alphaCompositeSolidDest(tab.ColorModel.fromColorModelPlusAlpha($0,tab.HierarchicalFilter.$1_A),tab.HierarchicalFilter.$1_6);if($9.luminance()>95){$A=tab.HierarchicalFilter.$1_C;$B=tab.HierarchicalFilter.$1_D;}$6['background-color']=$A.toRgb();$7['background-color']=$B.toRgb();$8['background-color']=$9.toRgb();tab.StyleUtil.appendCSSRule('.HFLevels td.HFLevelAllSelected',$6);tab.StyleUtil.appendCSSRule('.HFLevels td.HFLevelSomeSelected',$7);tab.StyleUtil.appendCSSRule('.HFLevels td.HFLevelNoneSelected',$8);}
tab.HierarchicalFilter.prototype={widgetsInTemplate:true,session:null,field:'',filterViewModel:null,$1_1:500,stateId:0,$1_2:0,$1_3:0,domBox:null,domLevelBox:null,domContent:null,domControls:null,searchDiv:null,searchButton:null,RANGE_START:'minValue',RANGE_END:'maxValue',$1_4:null,$1_5:null,tree:null,_applyTimer:null,searchWidget:null,menuButton:null,conditionals:null,domLevelContainer:null,metricsOnly:false,getContextMenuCommands:null,showContextMenu:null,requestSetAttributes:null,get_isTypeInList:function(){return false;},get_oFilter:function(){return this.oFilter;},get_filterViewModel:function(){return this.filterViewModel;},get_viewModel:function(){return this.filterViewModel;},get_dijitDeclaredClass:function(){return this.declaredClass;},get_mode:function(){return this.$1_5;},set_mode:function(value){alert(tab.Strings.noLoc('Bad interface call to set HierarchicalFilter.Mode'));return value;},get_session:function(){return this.session;},set_session:function(value){this.session=value;return value;},get_domain:function(){var $0=null;if(!!this.get_attributes()['values']){$0=this.get_attributes()['values'];}return $0;},get_attributes:function(){return this.attributes;},set_attributes:function(value){this.attributes=value;return value;},get_field:function(){return this.field;},get_stateId:function(){return this.stateId;},set_stateId:function(value){this.stateId=value;return value;},get_modeContents:function(){return null;},get_domContent:function(){return this.domContent;},set_domContent:function(value){this.domContent=value;return value;},get_dijitDomNode:function(){return this.domNode;},set_dijitDomNode:function(value){this.domNode=value;return value;},get_searchWidget:function(){return this.searchWidget;},set_searchWidget:function(value){this.searchWidget=value;return value;},destroy:function(){this.tree.remove_notifyChangeCalled(ss.Delegate.create(this,this.$1_13));this.searchWidget.destroy();this.searchWidget=null;this.tree.destroy();this.tree=null;this.inherited(arguments);},applyChangesByChangelist:function(changelist){alert(tab.Strings.noLoc('Bad interface call on HierarchicalFilter.ApplyChangesByChangelist'));},postCreate:function(){if(this.filterViewModel.get_filterType()!=='Hierarchical'){}var $0=0;this.$1_4=ss.Delegate.create(this,function(){
return this.stateId;});var $1=tab.$create_SearchWidgetQfProperty();$1.qf=this;this.searchWidget=new tableau.base.widget.SearchWidget($1,this.searchDiv);this.searchWidget.startup();this.initFromState(true);this.$1_17();var $2=this.tree;dojo.forEach((this.tree.rootNode.getChildren()),function($p1_0){
if($p1_0.isExpandable){$2._expandNode($p1_0);}});if(!this.metricsOnly){var $3=ss.Delegate.create(this,function($p1_0,$p1_1){
if(!this._hasDomNode($p1_0)){return;}if($p1_1){dojo.addClass($p1_0.domNode,'HFButtonHide');}else{$0+=1;dojo.addClass($p1_0.domNode,'HFButtonR'+$0);}$($p1_0.domNode).css('background-color',this.backgroundColor);});$3(this.menuButton,this.shouldHideContextMenu());$3(this.searchButton,this.shouldHideSearchButton());dojo.addClass(this.domControls,'HF'+$0+'Button');}tab.HierarchicalFilter.$1_16(this.textStyle,this.backgroundColor);},$1_E:function(){if(!!dojo.isIE){dojo.style(this.domContent,'zoom','1');var $0=$(this.domContent);tab.WindowHelper.requestAnimationFrame(function(){
tab.RenderUtil.manualFadeAnimation($0,96,100,8,3875,true);});}},shouldHideLevelButtons:function(){return (this.attributes['show-levels']==='false');},shouldHideSearchButton:function(){return this.hideEmptyTitlebar()||(this.attributes['show-search']==='false');},shouldHideContextMenu:function(){var $0=tab.CommandsPresModelWrapper.create(this.getContextMenuCommands());return this.hideEmptyTitlebar()||ss.isNullOrUndefined($0)||!$0.get_commandItems().length;},resize:function($p0){dojo.marginBox(this.domNode,$p0);this.layout();},getMetrics:function(){var $0=this.tree.rootNode.getChildren().length;var $1=dojo.contentBox(this.tree.domNode);var $2=dojo.marginBox(this.domNode);return {fixed:{w:0,h:$2.h-$1.h+1},item:{w:0,h:Math.max($1.h/$0,20)}};},isSingleSelect:function(){return (this.$1_5!=='checklist');},initMode:function(){this.$1_5=this.$1_F();},$1_F:function(){var $0='checklist';if(Object.keyExists(this.attributes,'mode')){$0=this.attributes['mode'];}return $0;},createTreeDom:function(){var $0=new tableau.base.widget.hsm.TreeModel(this.session,this.field,this.oFilter.levels.length,this.isSingleSelect());$0.onChildrenChange($0.root,$0.itemsFromTable(this.oFilter.table[0],0));var $1={};$1.model=$0;$1.showRoot=false;this.tree=new tableau.base.widget.hsm.Tree($1);this.tree.add_notifyChangeCalled(ss.Delegate.create(this,this.$1_13));this.connect(this.tree,'_onTreeFocus',ss.Delegate.create(this,this.updateRangeAnchor));this.domContent.appendChild(this.tree.domNode);},hideEmptyTitlebar:function(){return String.isNullOrEmpty(tableau.format.formatColumnDisplayName(this.oFilter));},setTitleSize:function(newH,newW){this.$1_2=newH;this.$1_3=newW;},initFromState:function(suppressRefresh){if(this.$1_F()!==this.$1_5){dojox.data.dom.removeChildren(this.domContent);}if(!this.domContent.hasChildNodes()){this.initMode();this.createTreeDom();}var $0=tableau.format.formatColumnDisplayName(this.oFilter);dojo.attr(this.domTitleBar,'title',$0);this.updateTitleBar();if(ss.isValue(this.domLevelContainer)){dojox.data.dom.removeChildren(this.domLevelContainer);}if(this.shouldHideLevelButtons()){if(ss.isValue(this.domLevelBox)){dojo.attr(this.domLevelBox,'display','none');}}else{this.$1_10();}if(!suppressRefresh){this.tree.model.refresh(this.oFilter.table);}if(ss.isValue(this.tree.anchor)){dojo.addClass(this.tree.anchor.labelNode,'anchorSelection');dojo.addClass(this.tree.anchor.domNode,'anchorSelectionNode');}else{this.tree.anchor=null;}this.conditionals.init(this.oFilter.condition,this.oFilter.limit);this.layout();if(ss.isValue(this.searchWidget)){this.searchWidget.updateSearch();}},$1_10:function(){var $0;if(ss.isNullOrUndefined(this.domLevelBox)){return;}$0=document.createElement('td');$0.appendChild(document.createTextNode('\u00a0'));dojo.addClass($0,'HFLevelSpacer');for(var $1=0;$1<this.oFilter.levels.length;$1++){$0=document.createElement('td');$0.appendChild(document.createTextNode($1.toString()));this.domLevelContainer.appendChild($0);if(this.$1_5!=='radiolist'){if(!this.oFilter.levels[$1]){dojo.addClass($0,'HFLevelAllSelected');}else if(this.oFilter.levels[$1]===1){dojo.addClass($0,'HFLevelNoneSelected');}else{dojo.addClass($0,'HFLevelSomeSelected');}}if(!$1){dojo.addClass($0,'HFLevelFirst');}else{if($1<this.oFilter.levels.length-1){dojo.addClass($0,'HFLevelNonLeaf');}else{dojo.addClass($0,'HFLevelLast');}}this.connect($0,'onclick',ss.Delegate.create(this,this.onLevelClick));}},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},$1_11:function(){var $0=[];var $1=[];var $2=[].concat(this.tree.rootNode.getChildren());var $3='filter-delta';var $4=[];var $5=[];if(!$2.length){return;}do{var $7=$2.shift();var $8=$7.item.tuple;if($7.item.schema.length>$0.length){$0=$7.item.schema;}if($7.isChecked&&!$8.s){$8.s=true;$1.push($8);if(this.isSingleSelect()){$3='filter-replace';break;}}else if(!$7.isChecked&&$8.s){delete $8.s;$1.push($8);}$2=$2.concat($7.getChildren());}while(!!$2.length);var $6=$1;if(!!$6.length){for(var $9=0;$9<$6.length;$9++){var $A=$6[$9].t.length-1;var $B=$6[$9].t[$A].v;if($6[$9].s){$4.push($B);}else{$5.push($B);}}tab.FilterClientCommands.doMemberHierarchialFilter(this.session.get_visualId(),this.field,$4,$5,$3);}},$1_12:function($p0,$p1){if(ss.isNullOrUndefined($p0)||ss.isNullOrUndefined($p1)){return;}var $0=this.tree.getDepth($p1);var $1=this.tree.findEarlierNode($p1,$p0,$0);var $2=($1===$p1)?$p0:$p1;var $3=$1.item.tuple.t;var $4=$2.item.tuple.t;var $5=$3[$3.length-1].v;var $6=$4[$4.length-1].v;var $7={};var $8={};var $9='filter-delta';if($p0.isChecked){$7[this.RANGE_START]=$5;$7[this.RANGE_END]=$6;}else{$8[this.RANGE_START]=$5;$8[this.RANGE_END]=$6;}tab.FilterClientCommands.doRangeHierarchialFilter(this.session.get_visualId(),this.field,$7,$8,$9);},updateStateFromSearch:function(changed){var $0={};var $1=changed.tuples;for(var $3=0;$3<$1.length;$3++){$0[$1[$3].d]=(!!$1[$3].s);}var $2=[].concat(this.tree.rootNode.getChildren());while(!!$2.length){var $4=$2.shift();var $5=$4.item.tuple;var $6=$0[$5.d];if(ss.isValue($6)){if($6!==$5.s){if($6){$4.isChecked=true;($4.labelNode.firstChild).checked=true;$5.s=true;}else{$4.isChecked=false;($4.labelNode.firstChild).checked=false;delete $5.s;}}}else if(this.isSingleSelect()&&$5.s){$4.isChecked=false;($4.labelNode.firstChild).checked=false;delete $5.s;}$2=$2.concat($4.getChildren());}},updateRangeAnchor:function($p0){if(this.isSingleSelect()){return;}if(this.tree.anchor===$p0){return;}if(ss.isValue(this.tree.anchor)){dojo.removeClass(this.tree.anchor.labelNode,'anchorSelection');dojo.removeClass(this.tree.anchor.domNode,'anchorSelectionNode');dojo.removeClass(this.tree.anchor.labelNode,'dijitTreeLabelFocused');this.tree.prev_anchor=this.tree.anchor;}this.tree.anchor=$p0;dojo.addClass(this.tree.anchor.labelNode,'anchorSelection');dojo.addClass(this.tree.anchor.domNode,'anchorSelectionNode');},$1_13:function($p0){if($p0.target.tagName.toLowerCase()==='input'){if(ss.isValue(this._applyTimer)){window.clearTimeout(this._applyTimer);this._applyTimer=null;}this.stateId++;var $0=dijit.getEnclosingWidget($p0.target.parentNode);if(this.tree.anchor!==$0){this.updateRangeAnchor($0);}if(!!$p0.shiftKey&&ss.isValue(this.tree.prev_anchor)&&this.tree.getDepth(this.tree.prev_anchor)===this.tree.getDepth(this.tree.anchor)&&!this.isSingleSelect()){this.updateCheckboxRange(this.tree.anchor,this.tree.prev_anchor);this.$1_12(this.tree.anchor,this.tree.prev_anchor);}else{this._applyTimer=window.setTimeout(ss.Delegate.create(this,this.$1_11),this.$1_1);}}},updateCheckboxRange:function(anchor,prevAnchor){var $0=this.tree.getDepth(prevAnchor);var $1=this.tree.findEarlierNode(prevAnchor,anchor,$0);var $2=($1===prevAnchor)?anchor:prevAnchor;var $3=anchor.isChecked;var $4=$1;this.tree.anchorIsStart=($1!==prevAnchor);while(ss.isValue($4)&&$4.isTreeNode&&$4!==$2){($4.labelNode.firstChild).checked=$3;$4.isChecked=$3;$4=this.$1_14($4,$0);}($2.labelNode.firstChild).checked=$3;$2.isChecked=$3;},$1_14:function($p0,$p1){var $0=$p1;var $1=$p0;var $2=$p0.getNextSibling();if(ss.isValue($2)){return $2;}while(ss.isNullOrUndefined($2)&&$0>=0){$1=$1.getParent();$0-=1;$2=$1.getNextSibling();while(ss.isValue($2)){var $3=this.$1_15($2,$0,$p1);if(ss.isValue($3)){return $3;}$2=$2.getNextSibling();}}if($0>=0){return $2;}return null;},$1_15:function($p0,$p1,$p2){if(ss.isNullOrUndefined($p0)){return null;}if($p1<0){return null;}if($p1>$p2){return null;}if($p1===$p2){return $p0;}if($p0.hasChildren()){var $0=$p0.getChildren();var $1=$0.length;for(var $2=0;$2<$1;$2++){var $3=this.$1_15($0[$2],$p1+1,$p2);if(ss.isValue($3)){return $3;}}}return null;},toggleSearchUI:function(){if(ss.isValue(this.searchWidget)){this.searchWidget.toggleUI();}},onLevelClick:function($p0){var $0=$p0.target;var $1;var $2=[];var $3=[];if($0.tagName.toLowerCase()!=='td'){return;}dojo.stopEvent($p0);if(this.isSingleSelect()){return;}var $4=parseInt(dojox.data.dom.textContent($0),10);if(!this.oFilter.levels[$4]){$1=false;dojo.removeClass($0,'HFLevelAllSelected');dojo.removeClass($0,'HFLevelSomeSelected');dojo.addClass($0,'HFLevelNoneSelected');}else{$1=true;dojo.removeClass($0,'HFLevelNoneSelected');dojo.removeClass($0,'HFLevelSomeSelected');dojo.addClass($0,'HFLevelAllSelected');}if($1){$2.push($4);}else{$3.push($4);}if($2.length>0||$3.length>0){tab.FilterClientCommands.doLevelHierarchialFilter(this.session.get_visualId(),this.field,$2,$3,'filter-delta');}},layout:function(){var $0=$(this.domContent);$0.hide();dojo.removeClass(this.domNode,'HFHorizontal');var $1=dojo.contentBox(this.domNode);var $2=dojo.marginBox(this.domTitleBar);var $3=(ss.isValue(this.domLevelBox))?dojo.marginBox(this.domLevelBox):{w:0,h:0};var $4=dojo.marginBox(this.conditionals.domNode);var $5={h:0};this.updateTitleBar();this.resetTitleSize();if(this.$1_2>0){$2.h=this.$1_2;dojo.marginBox(this.domTitleBar,{h:$2.h});}if(this.$1_3>0){$2.w=this.$1_3;dojo.marginBox(this.domTitleBar,{w:$2.w});}tableau.util.setupTitleEllipsis($(this.domTitleBar));var $6=$2.h;var $7=$1.w;if(!this.hideEmptyTitlebar()&&this.$1_3>0){dojo.addClass(this.domNode,'HFHorizontal');dojo.style(this.domTitleBar,'float','left');if(ss.isValue(this.domLevelBox)){dojo.style(this.domLevelBox,'float','left');}if(this._hasDomNode(this.menuButton)){dojo.addClass(this.menuButton.domNode,'HFButtonHide');}if(this._hasDomNode(this.searchButton)){dojo.addClass(this.searchButton.domNode,'HFButtonHide');}$7-=$2.w;$6=0;}else{if(!this.shouldHideContextMenu()&&this._hasDomNode(this.menuButton)){dojo.removeClass(this.menuButton.domNode,'HFButtonHide');}if(!this.shouldHideSearchButton()&&this._hasDomNode(this.searchButton)){dojo.removeClass(this.searchButton.domNode,'HFButtonHide');}dojo.style(this.domTitleBar,'float','none');if(ss.isValue(this.domLevelBox)){dojo.style(this.domLevelBox,'float','none');}}if(ss.isValue(this.searchWidget)&&this.searchWidget.get_isVisible()){var $9=$1.h-$6-$3.h-$4.h;this.searchWidget.layout($9);$5=dojo.marginBox(this.searchWidget.get_dijitDomNode());}var $8=$1.h-$6-$3.h-$4.h-$5.h;if(ss.isValue(this.domLevelBox)){dojo.marginBox(this.domLevelBox,{w:$7});}dojo.marginBox(this.domContent,{h:$8,w:$7});this.$1_E();$0.show();},_hasDomNode:function($p0){return ss.isValue($p0)&&ss.isValue($p0.domNode);},$1_17:function(){tableau.util.localizeDojoLabeledControls([new ss.Tuple(this.searchButton,'QuickFilterSearch')]);}}
tab.Pattern=function(parent,div,attrs){tab.Pattern.initializeBase(this,[parent,div,attrs]);}
tab.Pattern.prototype={widget:null,instantiate:function(pattern,itemName){this.widget=new tableau.base.widget.ui.TypeIn(this.div,ss.Delegate.create(this,this.doChange),'Pattern');this.widget.instantiate(pattern,itemName);},destroy:function(){this.widget.destroy();},layout:function(contentSize,horizontalLayout){this.inherited(arguments);this.widget.layout();},doChange:function(newPattern){this.parent.set_stateId(this.parent.get_stateId()+1);this.parent.get_session().setPatternFilterState(newPattern,this.parent);this.parent.get_oFilter().pattern=newPattern;}}
tab.SimpleDropdown=function(parent,div,attrs){tab.SimpleDropdown.initializeBase(this,[parent,div,attrs]);this.set_itemFormatter(tableau.FilterItem.formatDropdownListFilterItemHtml);}
tab.SimpleDropdown.prototype={createListElement:function(div,tuples,itemName,facet){if(this.shouldUseAllItem()&&tuples.length>0){tab.Checklist.addAllItem($(div),this.parent,itemName,facet,false,tableau.FilterItem.formatDropdownListFilterItemHtml);}if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=tab.TiledWidgetFactory.createSimpleList(this.parent,tuples,div,itemName,this.get_lineHeight());var $0=spiff.EventUtil.bindWithDispose($(div),'click',ss.Delegate.create(this,this.$1_F));this.disposables.add($0);var $1=spiff.EventUtil.bindWithDispose($(div),'touchend',ss.Delegate.create(this,this.$1_F));this.disposables.add($1);dojo.toggleClass(div.parentNode,'CFDropdownNoItems',!tuples.length);if(!tuples.length){$(div).text(tab.Strings.QuickFilterNoItems);}},$1_F:function($p0){var $0=tableau.FilterItem.getNodeFromEvent($p0);if(!!!$0){return;}var $1=tableau.FilterItem.getIndex($0);if($1===-1&&!this.parent.get_oFilter().all){this.parent.doSelectAll(true);this.hideMenu();return;}if($1!==this.currentlySelected){if($1>=this.parent.get_oFilter().table.actual_size||$1<0){this.hideMenu();return;}this.parent.set_stateId(this.parent.get_stateId()+1);var $2=[];$2.push($1);tab.FilterClientCommands.setCategoricalFilterValuesByIndex(this.parent.get_session().get_visualId(),this.parent.get_field(),'filter-replace',$2);}this.hideMenu();}}
tab.SliderCatmode=function(parent,div,attrs){tab.SliderCatmode.initializeBase(this,[parent,div,attrs]);}
tab.SliderCatmode.prototype={$1_3:null,$1_4:null,instantiate:function(tuples,itemName,facet){this.$1_3=tuples;var $0=tab.FilterItemUtil.isAllOrAllChecked(this.parent);if(this.shouldUseAllItem()){var $1=[];$1.push(tab.$create_TupleStruct(tab.Strings.QuickFilterAll,$0,[tab.$create_DataValueStruct('i',facet)]));this.$1_3=$.merge($1,tuples);}else{$0=false;}this.$1_4=new tableau.base.widget.ui.Slider(this.div,this.attributes,$0,ss.Delegate.create(this,this.updateViz),ss.Delegate.create(this.parent,this.parent.getTitleOffset),ss.Delegate.create(this,this.getCurrentText),ss.Delegate.create(this,this.onIntermediateChange),ss.Delegate.create(this,this.getCurrentFacet),this.parent.get_oFilter().showFacets);this.$1_4.instantiateFromTuples(this.$1_3,this.getSummaryText());},destroy:function(){this.$1_4.destroy();},layout:function(contentSize,horizontalLayout){this.inherited(arguments);this.$1_4.layout();},showOrHide:function($p0,$p1){dojo.style($p0,'display',(($p1)?'':'none'));},onSmallSearchUI:function(searchIsOn,searchDiv){var $0=!searchIsOn;var $1=this.$1_4;if($1.styleid===2||$1.styleid===4){this.showOrHide($1.slider.decrementButton,$0);this.showOrHide($1.slider.incrementButton,$0);}if($1.styleid===3){this.showOrHide($1.div,$0);dojo.style(searchDiv,'marginBottom','2px');}else if($1.styleid<3){this.showOrHide($1.readout,$0);if($1.get_oneLineLayout()){this.showOrHide($1.div,$0);}}else{this.showOrHide($1.slider.tableauSlider,$0);}},getRealIndex:function(index){if(ss.isUndefined(index)||isNaN(index)){return 0;}var $0=parseInt(index.toString(),10);if($0<0){$0=0;}return $0;},updateViz:function(index){var $0={};$0.schema=this.parent.get_oFilter().table.schema;$0.tuples=[];var $1=this.getRealIndex(index);var $2=new Array(0);if(this.shouldUseAllItem()&&!$1){this.parent.doSelectAll(true);return;}this.$1_3[$1].s=true;$0.tuples.push(this.$1_3[$1]);this.parent.set_stateId(this.parent.get_stateId()+1);var $3=(this.$1_3[$1].d||this.$1_3[$1].t[0].v);$2.push($3);tab.FilterClientCommands.setCategoricalFilterValues(this.parent.get_session().get_visualId(),this.parent.get_field(),'filter-replace',$2);},onIntermediateChange:function(){if(this.parent.get_searchWidget().get_isVisible()){this.parent.get_searchWidget().toggleUI();}},getCurrentText:function(index){var $0=this.getRealIndex(index);var $1=this.$1_3[$0];return tableau.format.formatTupleDisplayName($1,true,this.parent.get_oFilter().role);},getCurrentFacet:function(index){var $0=this.getRealIndex(index);var $1=this.$1_3[$0];return tableau.format.formatTupleDisplayFacet($1,true,this.parent.get_oFilter().role);}}
tab.TypeInCatmode=function(parent,div,attrs){tab.TypeInCatmode.initializeBase(this,[parent,div,attrs]);}
tab.TypeInCatmode.prototype={isContainer:true,$1_3:null,instantiate:function(tuples,itemName,facet){this.$1_3=new tableau.base.widget.TypeInFilterContents({parentFilter:this.parent,tuples:tuples,itemName:itemName,role:this.parent.get_oFilter().role});this.div.appendChild(this.$1_3.domNode);this.$1_3.startup();this.$1_4();},$1_4:function(){var $0=ss.Delegate.create(this,function($p1_0){
var $1_0=(this.parent.get_searchWidget()).domResults;if(tab.DomUtil.isEqualOrAncestorOf($1_0,$p1_0.target)){return;}if($p1_0.target===this.parent.get_searchWidget().get_domXButton()){this.parent.get_searchWidget().clearSearch();}else{this.parent.get_searchWidget().clearSearch(true,true);}});this.disposables.add(spiff.EventUtil.bindWithDispose($(document.body),'mousedown',$0));},destroy:function(){this.dispose();if(ss.isValue(this.$1_3)){this.$1_3.destroyRecursive(false);}this.$1_3=null;},layout:function(contentSize,horizontalLayout){this.inherited(arguments);this.$1_3.layout(contentSize,horizontalLayout);},fetchChildNodeByIndex:function(index){var $0=this.$1_3.domItemsList.childNodes;if(!tab.MiscUtil.isValidIndex(index,$0)){return null;}return $0[index];},applyChanges:function(){var $0=this.$1_5();var $1=this.$1_3.getUIState();var $2=this.$1_6($1,$0);var $3=this.$1_6($0,$1);if($2.length>0||$3.length>0){this.parent.set_stateId(this.parent.get_stateId()+1);tab.FilterClientCommands.modifyCategoricalFilterValues(this.parent.get_session().get_visualId(),this.parent.get_field(),$2,$3);}},$1_5:function(){var $0=this.parent.get_oFilter().table.tuples;var $1={};var $2=$0.length;for(var $3=0;$3<$2;$3++){var $4=$0[$3];$1[this.$1_3.getFormattedAlias($4)]=$4.s;}return $1;},$1_6:function($p0,$p1){var $0=[];var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $1=$enum1.current;if(tab.MiscUtil.hasOwnProperty($p0,$1)){if($p0[$1]&&!$p1[$1]){$0.push($1);}}}return $0;}}
tab.Radiolist=function(parent,div,attrs){tab.Radiolist.initializeBase(this,[parent,div,attrs]);this.set_itemFormatter(tableau.FilterItem.formatRadiolistFilterItemHtml);}
tab.Radiolist.prototype={$1_3:null,contentNode:null,get_scrollNode:function(){return this.contentNode;},instantiate:function(tuples,itemName,facet){this.$1_3=this.parent.get_searchWidget();this.$1_3.setStyle(2);var $0=$(this.div).addClass('CFOuterContainer');this.$1_3.startupAndAppendTo($0);this.$1_3.hideUI();var $1=$('<div>').addClass('CFInnerContainer').addClass('tab-ctrl-formatted-text');$0.append($1);this.contentNode=$1.get(0);this.resetContent(tuples,itemName,facet);this.disposables.add(spiff.EventUtil.bindWithDispose($(this.div),'click',ss.Delegate.create(this.parent,this.parent.onListItemClick)));},resetContent:function(tuples,itemName,facet){var $0=$(this.contentNode);$0.empty();if(this.shouldUseAllItem()&&tuples.length>0){tab.Checklist.addAllItem($0,this.parent,itemName,facet,tab.FilterItemUtil.isAllOrAllChecked(this.parent),this.get_itemFormatter());if(tab.FilterItemUtil.isAllOrAllChecked(this.parent)){for(var $1=0;$1<tuples.length;$1++){tuples[$1].s=false;}}}if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=tab.TiledWidgetFactory.createRadiolist(this.parent,tuples,this.contentNode,itemName,this.get_lineHeight());},updateContent:function(data){var $0=(data.length>0)?data.join(''):this.$1_3.get_noMatchHtml();var $1=$(this.contentNode);if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null;}$1.html($0);},shouldNotReinstantiate:function(){return ss.isValue(this.$1_3)&&this.$1_3.isShowingResults();},layout:function(contentSize,horizontalLayout){this.inherited(arguments);if(ss.isValue(this.tiledWidget)){this.tiledWidget.updateViewport(contentSize.w,contentSize.h);}var $0=(ss.isValue(this.$1_3)&&this.$1_3.get_isVisible())?dojo.marginBox(this.$1_3.domNode).h:0;dojo.style(this.contentNode,'height',(this.div.clientHeight-$0)+'px');},destroy:function(){this.dispose();if(ss.isValue(this.$1_3)){this.$1_3.destroy();}if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=null;},fetchChildNodeByIndex:function(index){if(ss.isValue(this.tiledWidget)){return this.tiledWidget.getElement(index);}else{return null;}},fetchAllItem:function(){if(this.shouldUseAllItem()&&ss.isValue(this.contentNode)){return this.contentNode.firstChild;}else{return null;}}}
tab.CommandExecutedEventArgs=function(){tab.CommandExecutedEventArgs.initializeBase(this);}
tab.CommandExecutedEventArgs.prototype={command:null}
tab.ConditionalsWidget=function(){this.templateString="<div class='ConditionalsWidget tab-ctrl-formatted-text'>"+"<div class='Conditional' dojoAttachPoint='domCondition'>"+"<span dojoAttachPoint='domConditionTitle' class='ConditionalTitle'>Condition</span><br/>"+"<span dojoAttachPoint='domConditionText'></span></div>"+"<div class='Conditional' dojoAttachPoint='domLimit'>"+"<span dojoAttachPoint='domLimitTitle' class='ConditionalTitle'>Limit</span><br/>"+"<span dojoAttachPoint='domLimitText'></span></div>"+'</div>';tab.ConditionalsWidget.initializeBase(this);}
tab.ConditionalsWidget.prototype={isContainer:false,domCondition:null,domConditionTitle:null,domConditionText:null,domLimit:null,domLimitTitle:null,domLimitText:null,init:function(condition,limit){if(!tab.MiscUtil.isNullOrEmpty(condition)){this.domConditionText.innerHTML=condition;this.domCondition.title=condition;}else{dojo.style(this.domCondition,'display','none');}if(!tab.MiscUtil.isNullOrEmpty(limit)){this.domLimitText.innerHTML=limit;this.domLimit.title=limit;}else{dojo.style(this.domLimit,'display','none');}if(!tab.MiscUtil.isNullOrEmpty(condition)&&!tab.MiscUtil.isNullOrEmpty(limit)){dojo.style(this.domLimit,'borderTop','solid 1px #FAFAFA');}},postCreate:function(){this.$1_0();},$1_0:function(){this.domConditionTitle.innerHTML=tableau.format.escapeHTML(tab.Strings.QuickFilterConditionalsCondition);this.domLimitTitle.innerHTML=tableau.format.escapeHTML(tab.Strings.QuickFilterConditionalsLimit);}}
tab.ContinuousSlider=function(viewModel){tab.ContinuousSlider.initializeBase(this,[viewModel,new tab.vqlui$10()]);this.viewModel=viewModel;this.get_template().get_domRoot().addClass(this.viewModel.get_sliderClassName());}
tab.ContinuousSlider.prototype={viewModel:null,applyChanges:function(index){this.viewModel.set_sliderCurrentValue(index);},dispose:function(){tab.ContinuousSlider.callBaseMethod(this, 'dispose');this.viewModel=null;}}
tab.vqlui$10=function(){tab.vqlui$10.initializeBase(this,[$("<div class='tabHorizontalSlider'>\n</div>'")]);}
tab.CurrentPagePanel=function(oProps){this.templateString="<div dojoAttachPoint='containerNode'\u009d baseClass='currentPagePanel'>"+"<div dojoAttachPoint='_titlePane' style='border:0; float:left; width:100%; overflow:hidden;'></div>"+"<div dojoType='dijit.layout.SplitContainer' persist='false' dojoAttachPoint='innerWrapper' orientation='${cpOrientation}' sizerWidth='0' dragRestriction='true' activeSizing='false' style='float:left;'>"+"<div dojoType='dijit.layout.LayoutContainer' sizeShare='24' sizeMin='24' style='display:${display_dropdown};' dojoAttachPoint='buttonsContainer' >"+"<button dojoAttachEvent='onClick:prevPage' dojoType='dijit.form.Button' layoutAlign='left' style='margin:0; margin-right:2px;' iconClass='dijitIcon cpLeftArrowBlack' showLabel='false' dojoAttachPoint='_leftBtn'></button>"+"<select dojoAttachEvent='onChange:onSelection' dojoType='tableau.base.widget.ui.iDropDownSelect' dojoAttachPoint='_dropdown' layoutAlign='client' autoWidth='true' minSize='100' hasDownArrow='true' popupExtraClass='${popupClass}'></select>"+"<button dojoAttachEvent='onClick:nextPage' dojoType='dijit.form.Button' layoutAlign='right' style='clear: left; margin:0; margin-left:2px;' iconClass='dijitIcon cpRightArrowBlack' showLabel='false' dojoAttachPoint='_rightBtn'></button>"+'</div>'+"<div dojoType='dijit.layout.ContentPane' sizeShare='24' sizeMin='24' style='display:${display_slider}; padding:6px 0 0 0; border:0; overflow:hidden;' dojoAttachPoint='sliderPane'>"+"<div dojoAttachEvent='onChange:onSliderChange' dojoType='dijit.form.HorizontalSlider' slideDuration='0'"+"pageIncrement='1' minimum='0' maximum='${maximum}' discreteValues='${discrete_values}' intermediateChanges='false' showButtons='false'"+"dojoAttachPoint='_slider'></div>"+"<div dojoAttachPoint='_horizontalRuleNode'></div>"+'</div>'+'</div>'+"<div dojoType='dijit.layout.ContentPane' dojoAttachPoint='_checkboxPane' style='padding:0; height:16px; width:110px; display:${display_toggle}; border:0; position:relative; float:left;'>"+"<input dojoAttachEvent='onChange:onCheckboxChange' dojoType='dijit.form.CheckBox' dojoAttachPoint='_showHistoryCb'/>"+'</div>'+'</div>';tab.CurrentPagePanel.initializeBase(this);}
tab.CurrentPagePanel.prototype={baseClass:'currentPagePanel',widgetsInTemplate:true,_subscriptions:null,zid:0,sliderPane:null,show_toggle:false,show_dropdown:false,show_slider:false,sheetid:null,session:null,lTitle:null,titleHtml:null,isDashboard:false,pageViewModel:null,innerWrapper:null,cpHeight:0,buttonsContainer:null,_started:false,_slider:null,_showHistoryCb:null,_rightBtn:null,_leftBtn:null,_horizontalRuleNode:null,_dropdown:null,_checkboxPane:null,rid:0,timestamp:0,_horizontalRule:null,oldSize:0,containerNode:null,titleSize:null,zoneTitleHeight:0,zoneTitleWidth:0,_titlePane:null,pages:null,current_page:0,refreshed:false,enable:false,cpOrientation:null,display_dropdown:null,display_slider:null,display_toggle:null,maximum:0,discrete_values:0,show_ruler:null,ruler_count:0,popupClass:null,requestTimeout:null,rebuildLayoutTimeout:null,BUTTONS_HEIGHT:26,ONLY_BUTTONS:24,SLIDER_HEIGHT:16,ONLY_SLIDER:15,TOGGLE_HEIGHT:16,TOGGLE_WIDTH_OFFSET:90,RULE_OFFSET:5,DOM_OFFSET:4,WIDGET_SPACE:8,SCROLL_PAGES:14,startup:function(){this.containerNode=this.domNode;this.titleSize=tab.$create_Size(0,0);this.inherited(arguments);this.innerWrapper.startup();this.buttonsContainer.startup();this.refreshLayout(this.pages,this.current_page,this.enable);if(this.show_toggle){var $1=document.createElement('label');$1.innerHTML=tableau.format.escapeHTML(tab.Strings.CurrentPagePanelShowHistory);dojo.attr($1,'for',this._showHistoryCb.id);dojo.place($1,this._checkboxPane.domNode);if(('attr' in this._showHistoryCb)&&this.pageViewModel.get_isHistoryToggleInteractionDisabled()){this._showHistoryCb.attr('disabled',true);}}var $0=this.pageViewModel.get_pageModel();$0.add_newPage(ss.Delegate.create(this,this.onPageChanged));this._rightBtn.setAttribute('_scroll',false);this._leftBtn.setAttribute('_scroll',false);this._slider.setAttribute('_scroll',false);},onPageChanged:function($p0){this.refreshLayout($p0.un,$p0.aap,$p0.ao5.a);},layout:function(){var $0=0;var $1=0;var $2=0;if(ss.isNullOrUndefined(this.titleSize)||(ss.isValue(this.lTitle)&&!this.titleSize.w)){return;}var $3=dojo.marginBox(this.containerNode);var $4=$3.w-this.DOM_OFFSET;var $5=0;if(this.titleSize.w<$3.w){if($3.h<this.getWidgetOffset()){this.cpOrientation='horizontal';}else{this.cpOrientation='vertical';}$4-=this.titleSize.w;$0=this.titleSize.w;}else{if($3.h-this.titleSize.h<this.getWidgetOffset()){this.cpOrientation='horizontal';}else{this.cpOrientation='vertical';}$1=this.titleSize.h/2;}if(this.cpOrientation==='horizontal'){if(this.show_toggle){$4-=this.TOGGLE_WIDTH_OFFSET;}$5=(this.show_dropdown)?this.BUTTONS_HEIGHT:this.SLIDER_HEIGHT;}else{$5=(this.show_slider)?this.SLIDER_HEIGHT:0;$5+=(this.show_dropdown)?this.BUTTONS_HEIGHT:0;$2=(this.show_toggle)?this.TOGGLE_HEIGHT/2:0;}this.innerWrapper.isHorizontal=this.cpOrientation==='horizontal';dojo.marginBox(this.innerWrapper.domNode,{w:$4,h:$5});this.innerWrapper.resize();var $6=dojo.marginBox(this.sliderPane.domNode);if(this._horizontalRule!=null&&$6.w>0){dojo.marginBox(this._horizontalRule.domNode,{w:$6.w});if(this.pages.length*2>$6.w){dojo.style(this._horizontalRule.domNode,'display','none');}else{dojo.style(this._horizontalRule.domNode,'display','');}}var $7=Math.min((($3.h-$5)/2)-$1-$2,6);var $8=$7+(2*$1);dojo.style(this.innerWrapper.domNode,{top:Math.max($8,0)+'px',position:'absolute',left:($0+(this.DOM_OFFSET/2))+'px'});if(this.cpOrientation==='vertical'){dojo.style(this.buttonsContainer.domNode,{height:this.ONLY_BUTTONS+'px',position:'relative',top:'',left:'',padding:'0 0 2px 0'});this.buttonsContainer.resize();dojo.style(this.sliderPane.domNode,{height:this.SLIDER_HEIGHT+'px',position:'relative',top:'',left:''});dojo.style(this._checkboxPane.domNode,{width:Math.max($3.w-1,0)+'px',top:Math.max($8,0)+$5+$7+'px',position:'absolute',left:$0+'px'});}else{dojo.marginBox(this.sliderPane.domNode,{w:$6.w-this.WIDGET_SPACE});if(this._horizontalRule!=null){dojo.marginBox(this._horizontalRule.domNode,{w:$6.w-this.WIDGET_SPACE-this.RULE_OFFSET});}var $A=dojo.marginBox(this._dropdown.domNode);dojo.marginBox(this._dropdown.domNode,{w:$A.w-this.WIDGET_SPACE});dojo.marginBox(this._rightBtn.domNode,{l:$A.l+$A.w-this.WIDGET_SPACE});dojo.style(this.buttonsContainer.domNode,{height:this.ONLY_BUTTONS+'px',position:'',top:'',left:'',padding:'0 0 2px 0'});this.buttonsContainer.resize();dojo.style(this.sliderPane.domNode,{height:this.SLIDER_HEIGHT+'px',position:'',top:'',left:(($4+this.DOM_OFFSET)/2)+'px'});dojo.style(this._checkboxPane.domNode,{top:Math.max($8,0)+'px',position:'absolute',left:$0+$4+(this.DOM_OFFSET/2)+'px'});}var $9=parseInt(dojo.style(this._dropdown.domNode,'width'))-24;dojo.marginBox(this._dropdown.containerNode,{w:$9});},getWidgetOffset:function(){var $0=(this.show_dropdown)?this.BUTTONS_HEIGHT:0;$0+=(this.show_slider)?this.SLIDER_HEIGHT:0;$0+=(this.show_toggle)?this.TOGGLE_HEIGHT:0;return $0;},postMixInProperties:function(){this.display_dropdown=(this.show_dropdown)?'block':'none';this.display_slider=(this.show_slider)?'block':'none';this.display_toggle=(this.show_toggle)?'block':'none';var $0=this.pages.length;this.maximum=$0-1;this.discrete_values=$0;this.show_ruler=(this.show_slider)?'block':'none';this.ruler_count=$0;this.popupClass=($0>this.SCROLL_PAGES)?'cpPopupEx':'cpPopup';this.cpOrientation=(this.cpHeight<this.getWidgetOffset())?'horizontal':'vertical';},postCreate:function(){this.inherited(arguments);this.timestamp=new Date().getTime();if(!this.show_dropdown){this.innerWrapper.removeChild(this.buttonsContainer);}if(!this.show_slider){this.innerWrapper.removeChild(this.sliderPane);}if(this.show_toggle&&('attr' in this._showHistoryCb)){this._showHistoryCb.attr('checked',this.enable);}},$2_0:function($p0,$p1){this.$2_1();this.requestTimeout=window.setTimeout(ss.Delegate.create(this,function(){
this.$2_3($p0,$p1);}),500);},$2_1:function(){if(ss.isValue(this.requestTimeout)){window.clearTimeout(this.requestTimeout);this.requestTimeout=null;}},$2_2:function(){if(ss.isValue(this.rebuildLayoutTimeout)){window.clearTimeout(this.rebuildLayoutTimeout);this.rebuildLayoutTimeout=null;}},$2_3:function($p0,$p1){this.$2_1();if(this.isDashboard){tab.PageServerCommands.syncedChangePage(this.pageViewModel.get_visualId(),this.zid,$p0);}else{tab.PageServerCommands.changePage($p0,this.pageViewModel.get_visualId());}},destroy:function(preserveDom){this.pageViewModel.get_pageModel().remove_newPage(ss.Delegate.create(this,this.onPageChanged));dojo.forEach(this._subscriptions,dojo.unsubscribe);this.$2_1();this.$2_2();this.inherited(arguments);},setTitle:function(){this._titlePane.innerHTML=this.titleHtml;this.setTitleSize();},setTitleSize:function(){var $0=dojo.marginBox(this._titlePane);if(!this.zoneTitleWidth){$0.w=dojo.marginBox(this.containerNode).w;}else{$0.w=this.zoneTitleWidth;dojo.marginBox(this._titlePane,$0);}this.titleSize=$0;dojo.style(this._titlePane,{height:this.titleSize.h+'px'});this.layout();tableau.util.setupTitleEllipsis($(this._titlePane));},refreshLayout:function(newPages,page,newEnable){var $0=false;this.refreshed=false;this.current_page=page;this.pages=newPages;var $1=false;var $2=ss.Delegate.create(this,function(){
this.refreshed=true;this.refreshWidget(this.current_page);});if(this.show_dropdown){var $3=this.pages.length;$0=false;if($3!==this._dropdown.options.length){$0=true;}else{for(var $4=0;$4<$3;$4++){var $5=this._dropdown.options[$4].label;if(this.pages[$4]!==$5){$0=true;break;}}}if($0){this.$2_2();$1=true;this._dropdown.options=[];this.rebuildLayoutTimeout=window.setTimeout(ss.Delegate.create(this,function(){
var $1_0=[];for(var $1_1=0,$1_2=newPages.length;$1_1<$1_2;$1_1++){$1_0.add({label:newPages[$1_1],value:$1_1.toString(10),selected:$1_1===this.current_page});}this._dropdown.addOption($1_0);this._dropdown.startup();$2();}),1);this._dropdown.popupExtraClass=(newPages.length>this.SCROLL_PAGES)?'cpPopupEx':'cpPopup';}else{this._dropdown.setValue(this.current_page);}}if(this.show_slider){if(this._horizontalRule!=null){this._horizontalRule.destroy(false);this._horizontalRule=null;}this._slider.maximum=this.pages.length-1;this._slider.discreteValues=this.pages.length;dijit.setWaiState(this._slider.focusNode,'valuemax',this.pages.length);if(this.pages.length<1200){var $6={style:'width:100%; height:3px; margin-left:4px; margin-right:4px;',count:this.pages.length};this._horizontalRule=new dijit.form.HorizontalRule($6,this._horizontalRuleNode);this._horizontalRule.placeAt(this.sliderPane.domNode,2);this._horizontalRule.startup();}this._slider.startup();}if(this.show_toggle&&arguments.length>2){this._showHistoryCb.attr('value',newEnable);this.enable=newEnable;}this.setTitle();if(!$1){$2();}},refreshWidget:function(page){if(this.show_dropdown&&this._dropdown!=null){this._dropdown.setValue(this.current_page);this._rightBtn.setAttribute('disabled',this.current_page===(this.pages.length-1));this._rightBtn.attr('iconClass','dijitIcon cpRightArrow'+((this.current_page===(this.pages.length-1))?'Grey':'Black'));this._leftBtn.setAttribute('disabled',!this.current_page);this._leftBtn.attr('iconClass','dijitIcon cpLeftArrow'+((!this.current_page)?'Grey':'Black'));}if(this.show_slider&&this._slider!=null){this._slider.setValue(this.current_page);}},prevPage:function(e){if(!this.current_page){return;}this.$2_0(this.current_page-1,this.current_page);this.refreshWidget(this.current_page-1);},nextPage:function(e){if(this.current_page===(this.pages.length-1)){return;}this.$2_0(this.current_page+1,this.current_page);this.refreshWidget(this.current_page+1);},onCheckboxChange:function(){if(!this.refreshed){return;}this.enable=!this.enable;tab.PageServerCommands.toggleTrails(this.pageViewModel.get_visualId());},onSelection:function(selectedPage,propagate){var $0=parseInt(selectedPage);$0=(isNaN($0))?0:$0;if(($0===this.current_page)||!this._started||!this.refreshed){return;}this.$2_3($0,this.current_page);this.refreshWidget($0);},onSliderChange:function($p0){var $0=parseInt($p0);if($0===this.current_page||!this.refreshed){return;}this.$2_0($0,this.current_page);this.refreshWidget($0);}}
tab.CustomViewsPanel=function(viewModel,toolbarButton){this.controlDisposables=new tab.DisposableHolder();tab.CustomViewsPanel.initializeBase(this,[$(tab.CustomViewsPanel.constructHtml())]);this.viewModel=viewModel;this.viewModel.add_panelVisbilityChanged(ss.Delegate.create(this,this.handleVisiblityChanged));this.viewModel.add_modeChanged(ss.Delegate.create(this,this.handleModeChanged));this.viewModel.add_customViewListChanged(ss.Delegate.create(this,this.handleCustomViewListChanged));this.viewModel.add_defaultCustomViewChanged(ss.Delegate.create(this,this.handleDefaultCustomViewChanged));this.viewModel.add_startManageEnabledChanged(ss.Delegate.create(this,this.handleStartManageEnabledChanged));this.viewModel.add_applyManageEnabledChanged(ss.Delegate.create(this,this.handleApplyManageEnabledChanged));this.viewModel.add_manageListItemsChanged(ss.Delegate.create(this,this.handleManageListItemsChanged));this.toolbarButton=toolbarButton;this.panelWidth=this.get_defaultPanelWidth();this.panelHeight=this.get_defaultPanelHeight();this.body=$(document.body);this.panel=this.get_element();this.headerPanel=this.panel.find('.tab-cv-header-panel');this.rememberPanel=this.panel.find('.tab-cv-remember-panel');this.rememberNameHolder=this.rememberPanel.find('.tab-cv-remember-name-holder');this.rememberNameInput=this.rememberPanel.find('.tab-cv-remember-name-input');this.rememberNamePlaceholder=this.rememberPanel.find('.tab-cv-remember-name-placeholder');this.rememberButton=this.rememberPanel.find('.tab-cv-remember-button');this.makeDefaultPanel=this.panel.find('.tab-cv-make-default-panel');this.makeDefaultButton=this.makeDefaultPanel.find('.tab-cv-make-default-button');this.listPanel=this.panel.find('.tab-cv-list-panel');this.listMyCustomViews=this.listPanel.find('.tab-cv-list-my');this.listMyCustomViewsHeader=this.listPanel.find('.tab-cv-list-my-header');this.listOtherCustomViews=this.listPanel.find('.tab-cv-list-other');this.listOtherCustomViewsHeader=this.listPanel.find('.tab-cv-list-other-header');this.startManagePanel=this.panel.find('.tab-cv-start-manage-panel');this.startManageButton=this.startManagePanel.find('.tab-cv-start-manage-button');this.finishManagePanel=this.panel.find('.tab-cv-finish-manage-panel');this.applyManageButton=this.finishManagePanel.find('.tab-cv-apply-manage-button');this.cancelManageButton=this.finishManagePanel.find('.tab-cv-cancel-manage-button');this.resizeHandle=this.panel.find('.tab-cv-resize-handle');this.rememberButton.find('.tab-cv-styled-button-middle').text(tab.Strings.CustomViewsRemember);this.makeDefaultButton.text(tab.Strings.CustomViewsCurrentDefaultIs(tab.Strings.CustomViewsOriginalView));this.listMyCustomViewsHeader.text(tab.Strings.CustomViewsMyCustomViews);this.listOtherCustomViewsHeader.text(tab.Strings.CustomViewsOtherCustomViews);this.startManageButton.find('.tab-cv-start-manage-button-text').text(tab.Strings.CustomViewsStartManage);this.applyManageButton.find('.tab-cv-styled-button-middle').text(tab.Strings.CustomViewsDone);this.cancelManageButton.find('.tab-cv-styled-button-middle').text(tab.Strings.CustomViewsCancel);this.panel.hide();this.panel.appendTo(document.body);this.panel.remove();}
tab.CustomViewsPanel.constructHtml=function(){var $0=new ss.StringBuilder();$0.append('<div class="tab-cv-panel tab-unselectable" unselectable="on">');$0.append('<div class="tab-cv-header-panel" unselectable="on">');$0.append('<span class="tab-cv-header-text" unselectable="on"></span>');$0.append('</div>');$0.append('<div class="tab-cv-remember-panel" unselectable="on">');$0.append('<div class="tab-cv-remember-name-holder" unselectable="on">');$0.append('<input type="text" maxlength="255"');$0.append(' class="tab-cv-remember-name-input tab-selectable" tabindex="1">');$0.append('<div class="tab-cv-remember-name-placeholder">');$0.append(tab.Strings.CustomViewsNameYourCustomView).append('</div>');$0.append('</div>');$0.append('<div class="tab-cv-remember-button tab-cv-styled-button" unselectable="on" tabindex="2">');$0.append('<span class="tab-cv-styled-button-left" unselectable="on"></span>');$0.append('<span class="tab-cv-styled-button-middle" unselectable="on"></span>');$0.append('<span class="tab-cv-styled-button-right" unselectable="on"></span>');$0.append('</div>');$0.append('</div>');$0.append('<div class="tab-cv-make-default-panel" unselectable="on">');$0.append('<div class="tab-cv-make-default-button tab-disabled" unselectable="on" tabindex="3"></div>');$0.append('</div>');$0.append('<div class="tab-cv-list-panel" unselectable="on">');$0.append('<div class="tab-cv-list-panel-scroller" unselectable="on">');$0.append('<div class="tab-cv-list-my-header" unselectable="on"></div>');$0.append('<div class="tab-cv-list-my" unselectable="on"></div>');$0.append('<div class="tab-cv-list-other-header" unselectable="on"></div>');$0.append('<div class="tab-cv-list-other" unselectable="on"></div>');$0.append('</div>');$0.append('</div>');$0.append('<div class="tab-cv-start-manage-panel" unselectable="on">');$0.append('<div class="tab-cv-start-manage-top-border" unselectable="on"></div>');$0.append('<div class="tab-cv-start-manage-button" unselectable="on" tabindex="4">');$0.append('<span class="tab-cv-start-manage-button-icon tab-icon-cv-manage" unselectable="on"></span>');$0.append('<span class="tab-cv-start-manage-button-text" unselectable="on"></span>');$0.append('</div>');$0.append('</div>');$0.append('<div class="tab-cv-finish-manage-panel" unselectable="on">');$0.append('<div class="tab-cv-apply-manage-button tab-cv-styled-button" unselectable="on" tabindex="3">');$0.append('<span class="tab-cv-styled-button-left" unselectable="on"></span>');$0.append('<span class="tab-cv-styled-button-middle" unselectable="on"></span>');$0.append('<span class="tab-cv-styled-button-right" unselectable="on"></span>');$0.append('</div>');$0.append('<div class="tab-cv-cancel-manage-button tab-cv-styled-button" unselectable="on" tabindex="4">');$0.append('<span class="tab-cv-styled-button-left" unselectable="on"></span>');$0.append('<span class="tab-cv-styled-button-middle" unselectable="on"></span>');$0.append('<span class="tab-cv-styled-button-right" unselectable="on"></span>');$0.append('</div>');$0.append('</div>');$0.append('<div class="tab-cv-resize-handle" unselectable="on">');$0.append('<div class="tab-cv-resize-handle-icon" unselectable="on">');$0.append('</div>');$0.append('</div>');$0.append('</div>');return $0.toString();}
tab.CustomViewsPanel.prototype={viewModel:null,toolbarButton:null,glass:null,panelWidth:0,panelHeight:0,resizing:false,resizeStartPanelWidth:0,resizeStartPanelHeight:0,resizeStartX:0,resizeStartY:0,body:null,panel:null,headerPanel:null,rememberPanel:null,rememberNameHolder:null,rememberNameInput:null,rememberNamePlaceholder:null,rememberButton:null,makeDefaultPanel:null,makeDefaultButton:null,listPanel:null,listMyCustomViews:null,listMyCustomViewsHeader:null,listOtherCustomViews:null,listOtherCustomViewsHeader:null,startManagePanel:null,startManageButton:null,finishManagePanel:null,applyManageButton:null,cancelManageButton:null,resizeHandle:null,dispose:function(){this.viewModel.remove_panelVisbilityChanged(ss.Delegate.create(this,this.handleVisiblityChanged));this.viewModel.remove_modeChanged(ss.Delegate.create(this,this.handleModeChanged));this.viewModel.remove_customViewListChanged(ss.Delegate.create(this,this.handleCustomViewListChanged));this.viewModel.remove_defaultCustomViewChanged(ss.Delegate.create(this,this.handleDefaultCustomViewChanged));this.viewModel.remove_startManageEnabledChanged(ss.Delegate.create(this,this.handleStartManageEnabledChanged));this.viewModel.remove_applyManageEnabledChanged(ss.Delegate.create(this,this.handleApplyManageEnabledChanged));this.viewModel.remove_manageListItemsChanged(ss.Delegate.create(this,this.handleManageListItemsChanged));this.removeGlass();this.controlDisposables.dispose();tab.CustomViewsPanel.callBaseMethod(this, 'dispose');this.body=null;this.panel=null;this.headerPanel=null;this.rememberPanel=null;this.rememberNameHolder=null;this.rememberNameInput=null;this.rememberNamePlaceholder=null;this.rememberButton=null;this.makeDefaultPanel=null;this.makeDefaultButton=null;this.listPanel=null;this.listMyCustomViews=null;this.listMyCustomViewsHeader=null;this.listOtherCustomViews=null;this.listOtherCustomViewsHeader=null;this.startManagePanel=null;this.startManageButton=null;this.finishManagePanel=null;this.applyManageButton=null;this.cancelManageButton=null;this.resizeHandle=null;this.toolbarButton=null;this.viewModel=null;},handleVisiblityChanged:function(sender,e){if(this.viewModel.get_isPanelVisible()){this.show();}else{this.hide();}},handleModeChanged:function(sender,e){if(this.viewModel.get_isPanelVisible()){this.layout();this.updateControls();this.updateCustomViewsList();}},handleCustomViewListChanged:function(sender,e){this.updateMakeDefaultButton();this.updateStartManageButton();this.updateCustomViewsList();},handleDefaultCustomViewChanged:function(sender,e){this.updateMakeDefaultButton();this.updateCustomViewsList();},handleStartManageEnabledChanged:function(sender,e){this.updateStartManageButton();},handleApplyManageEnabledChanged:function(sender,e){this.updateApplyManageButton();},handleManageListItemsChanged:function(sender,e){this.updateManageListItems();},show:function(){this.removeGlass();this.glass=new spiff.Glass();this.glass.add_click(ss.Delegate.create(this,this.glassClicked));this.glass.show();this.panel.appendTo(document.body);this.panel.fadeIn('fast');this.layout();this.place();this.bindControls();this.updateControls();},hide:function(){this.panel.fadeOut('fast',ss.Delegate.create(this,this.remove));},removeGlass:function(){if(ss.isValue(this.glass)){this.glass.remove_click(ss.Delegate.create(this,this.glassClicked));this.glass.dispose();this.glass=null;}},glassClicked:function(){this.viewModel.hide();},remove:function(){this.removeGlass();this.panel.remove();},layout:function(){if(this.viewModel.get_mode()===tab.CustomViewsViewModel.modeSelect){this.layoutSelectMode();}else if(this.viewModel.get_mode()===tab.CustomViewsViewModel.modeManage){this.layoutManageMode();}},layoutSelectMode:function(){var $0=this.get_panelBorder();var $1=this.get_panelBorder();var $2=this.get_panelBorder();if(tsConfig.allow_custom_view_save){this.headerPanel.hide();this.rememberPanel.show();this.startManagePanel.show();var $3=this.rememberPanel.outerHeight();var $4=this.startManagePanel.outerHeight();$1+=$3;$2+=$4;$0+=$3;this.listPanel.removeClass('tab-cv-list-panel-bottom');var $5=this.rememberButton.outerWidth();var $6=3+7+$5+7;this.rememberNameHolder.css('right',$6+'px');}else{this.headerPanel.show();this.rememberPanel.hide();this.startManagePanel.hide();this.headerPanel.find('.tab-cv-header-text').text(tab.Strings.CustomViewsSelectCustomView);var $7=this.headerPanel.outerHeight();$1+=$7;$0+=$7;this.listPanel.addClass('tab-cv-list-panel-bottom');}if(tsConfig.allow_custom_view_default){this.makeDefaultPanel.show();this.makeDefaultPanel.css('top',$0+'px');var $8=this.makeDefaultPanel.outerHeight();$1+=$8;}else{this.makeDefaultPanel.hide();}this.finishManagePanel.hide();this.listPanel.css({top:$1+'px',bottom:$2+'px'});},layoutManageMode:function(){var $0=this.get_panelBorder();var $1=this.get_panelBorder();this.headerPanel.show();this.rememberPanel.hide();this.headerPanel.find('.tab-cv-header-text').text(tab.Strings.CustomViewsManageCustomViews);var $2=this.headerPanel.outerHeight();$0+=$2;this.makeDefaultPanel.hide();this.startManagePanel.hide();this.finishManagePanel.show();var $3=this.finishManagePanel.outerHeight();$1+=$3;var $4=this.cancelManageButton.outerWidth();var $5=7+$4+7;this.applyManageButton.css('right',$5+'px');this.listPanel.css({top:$0+'px',bottom:$1+'px'});},place:function(){var $0=this.toolbarButton.offset();var $1=this.body.width();var $2=this.body.height();var $3=$0.left;if($1-($3+this.panelWidth)<10){this.panelWidth=$1-$3-10;}var $4={left:$3+'px',width:this.panelWidth+'px'};if(this.viewModel.get_isTop()){var $5=$0.top+this.toolbarButton.outerHeight();$4['top']=$5+'px';var $6=$2-($5+this.panelHeight);if($6<10){$6=10;this.panelHeight=$2-($5+$6);}}else{var $7=$2-$0.top;$4['bottom']=$7+'px';var $8=$2-($7+this.panelHeight);if($8<10){$8=10;this.panelHeight=$2-($8+$7);}}$4['height']=this.panelHeight+'px';this.panel.css($4);},bindControls:function(){this.rememberNameInput.unbind('keydown');this.rememberNameInput.keydown(ss.Delegate.create(this,this.rememberNameInputKeydown));this.rememberNameInput.unbind('keyup');this.rememberNameInput.keyup(ss.Delegate.create(this,this.rememberNameInputKeyup));this.controlDisposables.dispose();this.controlDisposables.add(spiff.ClickHandler.targetAndClick(this.rememberNamePlaceholder,ss.Delegate.create(this,this.rememberNamePlaceholderClicked)));this.controlDisposables.add(spiff.ClickHandler.targetAndClick(this.rememberButton,ss.Delegate.create(this,this.rememberButtonClicked)));this.controlDisposables.add(spiff.ClickHandler.targetAndClick(this.startManageButton,ss.Delegate.create(this,this.startManageButtonClicked)));this.controlDisposables.add(spiff.ClickHandler.targetAndClick(this.applyManageButton,ss.Delegate.create(this,this.applyManageButtonClicked)));this.controlDisposables.add(spiff.ClickHandler.targetAndClick(this.cancelManageButton,ss.Delegate.create(this,this.cancelManageButtonClicked)));},updateControls:function(){if(this.viewModel.get_mode()===tab.CustomViewsViewModel.modeSelect){this.updateRememberControls();this.updateMakeDefaultButton();this.updateStartManageButton();}else if(this.viewModel.get_mode()===tab.CustomViewsViewModel.modeManage){this.updateApplyManageButton();}},updateRememberControls:function(){this.rememberNameInput.val((ss.isValue(this.viewModel.get_currentCustomView()))?this.viewModel.get_currentCustomView().name:'');this.updateRememberButton();},updateRememberButton:function(){var $0=this.rememberNameInput.val();if(!$0.length){this.rememberNamePlaceholder.show();}else{this.rememberNamePlaceholder.hide();}if(!$0.trim().length){this.$1_1();}else{this.$1_0();}},updateMakeDefaultButton:function(){var $0=this.viewModel.get_currentCustomView();var $1;var $2;if(ss.isValue($0)){if(this.viewModel.isDefault($0)){$1=tab.Strings.CustomViewsCurrentDefaultIs($0.name);$2=false;}else{$1=tab.Strings.CustomViewsChangeDefaultTo($0.name);$2=true;}}else{if(ss.isValue(tsConfig.current_custom_view_id)){$1=tab.Strings.CustomViewsCannotChangeDefault;$2=false;}else{if(this.viewModel.isDefault($0)){$1=tab.Strings.CustomViewsCurrentDefaultIs(tab.Strings.CustomViewsOriginalView);$2=false;}else{$1=tab.Strings.CustomViewsChangeDefaultTo(tab.Strings.CustomViewsOriginalView);$2=true;}}}if($2){this.makeDefaultButton.removeClass('tab-disabled');this.disposables.add(spiff.ClickHandler.targetAndClick(this.makeDefaultButton,ss.Delegate.create(this,this.makeDefaultButtonClicked)));}else{this.makeDefaultButton.addClass('tab-disabled');}this.makeDefaultButton.text($1);},updateStartManageButton:function(){if(this.viewModel.get_startManageEnabled()){this.startManageButton.removeClass('tab-disabled');}else{this.startManageButton.addClass('tab-disabled');}},updateApplyManageButton:function(){this.applyManageButton.removeClass('tab-disabled');if(!this.viewModel.get_applyManageEnabled()){this.applyManageButton.addClass('tab-disabled');}},updateCustomViewsList:function(){if(this.viewModel.get_mode()===tab.CustomViewsViewModel.modeSelect){if(this.viewModel.get_myCustomViews().length>0){this.listMyCustomViewsHeader.show();this.listMyCustomViews.show();this.listOtherCustomViewsHeader.show();this.listMyCustomViewsHeader.text(tab.Strings.CustomViewsMyCustomViews);var $3=true;var $4=new ss.StringBuilder();var $enum1=ss.IEnumerator.getEnumerator(this.viewModel.get_myCustomViews());while($enum1.moveNext()){var $6=$enum1.current;if($3){$3=false;}else{this.appendListItemSeparatorHtml($4);}this.appendSelectListItemHtml($4,$6,false);}this.listMyCustomViews.html($4.toString());var $5=this.listMyCustomViews.find('.tab-cv-select-list-item');$5.each(ss.Delegate.create(this,function($p1_0,$p1_1){
this.bindListItem($($p1_1),this.viewModel.get_myCustomViews()[$p1_0]);}));}else{if(tsConfig.allow_custom_view_save){this.listMyCustomViewsHeader.show();this.listMyCustomViews.show();this.listOtherCustomViewsHeader.show();this.listMyCustomViewsHeader.text(tab.Strings.CustomViewsMyCustomViews);var $7=new ss.StringBuilder();$7.append("<div class='tab-cv-text-list-item'>");$7.append(tab.Strings.CustomViewsAddYourOwnCustomView);$7.append('</div>');this.listMyCustomViews.html($7.toString());}else{this.listMyCustomViewsHeader.hide();this.listMyCustomViews.hide();this.listOtherCustomViewsHeader.hide();}}this.listOtherCustomViews.show();var $0=new ss.StringBuilder();this.appendSelectListItemHtml($0,null,false);var $enum2=ss.IEnumerator.getEnumerator(this.viewModel.get_otherCustomViews());while($enum2.moveNext()){var $8=$enum2.current;this.appendListItemSeparatorHtml($0);this.appendSelectListItemHtml($0,$8,true);}this.listOtherCustomViews.html($0.toString());var $1=this.listOtherCustomViews.find('.tab-cv-select-list-item-original');this.bindListItem($1,null);var $2=this.listOtherCustomViews.find('.tab-cv-select-list-item-customized');$2.each(ss.Delegate.create(this,function($p1_0,$p1_1){
this.bindListItem($($p1_1),this.viewModel.get_otherCustomViews()[$p1_0]);}));}else if(this.viewModel.get_mode()===tab.CustomViewsViewModel.modeManage){this.listMyCustomViewsHeader.show();this.listMyCustomViews.show();this.listMyCustomViewsHeader.text(tab.Strings.CustomViewsManageHeader);var $9=true;var $A=new ss.StringBuilder();var $enum3=ss.IEnumerator.getEnumerator(this.viewModel.get_changes());while($enum3.moveNext()){var $C=$enum3.current;if($9){$9=false;}else{this.appendListItemSeparatorHtml($A);}this.appendManageListItemHtml($A,$C);}this.listMyCustomViews.html($A.toString());this.updateManageListItems();var $B=this.listMyCustomViews.find('.tab-cv-manage-list-item');$B.each(ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=$($p1_1);var $1_1=this.viewModel.get_changes()[$p1_0];if(tsConfig.allow_custom_view_share){var $1_7=$1_0.find('.tab-cv-manage-list-item-advertise-button');this.disposables.add(spiff.ClickHandler.targetAndClick($1_7,ss.Delegate.create(this,function($p2_0){
this.manageListItemAdvertiseButtonClicked($p2_0,$1_1);})));}var $1_2=$1_0.find('.tab-cv-manage-list-item-name-input');$1_2.val(this.viewModel.get_changes()[$p1_0].get_name());var $1_3={change:this.viewModel.get_changes()[$p1_0]};$1_2.keyup($1_3,ss.Delegate.create(this,this.manageListItemNameChanged));var $1_4=$1_0.find('.tab-cv-manage-list-item-delete-button');this.disposables.add(spiff.ClickHandler.targetAndClick($1_4,ss.Delegate.create(this,function($p2_0){
this.manageListItemDeleteButtonClicked($p2_0,$1_1);})));var $1_5=$1_0.find('.tab-cv-manage-list-item-undo-button');$1_5.text(tab.Strings.CustomViewsUndo);this.disposables.add(spiff.ClickHandler.targetAndClick($1_5,ss.Delegate.create(this,function($p2_0){
this.manageListItemUndoButtonClicked($p2_0,$1_1);})));var $1_6=$1_0.find('.tab-cv-manage-list-item-name-deleted');$1_6.css('right',($1_5.outerWidth()+7+2)+'px');}));this.listOtherCustomViewsHeader.hide();this.listOtherCustomViews.hide();}},appendListItemSeparatorHtml:function(sb){},appendSelectListItemHtml:function(sb,cv,showOwner){var $0;var $1;var $2;var $3;var $4=this.viewModel.isDefault(cv);if(ss.isValue(cv)){$0='tab-cv-select-list-item-customized';$1=tableau.format.escapeHTML(cv.name);$2=(showOwner)?tableau.format.escapeHTML(cv.owner.friendlyName):null;$3=(cv.isPublic)?'tab-icon-cv-advertise-on':'tab-icon-cv-advertise-off';}else{$0='tab-cv-select-list-item-original';$1=tab.Strings.CustomViewsOriginalView;$2=tableau.format.escapeHTML(tsConfig.workbook_owner_friendly_name);$3='tab-icon-cv-advertise-on';}sb.append('<div unselectable="on" class="').append('tab-cv-select-list-item ').append($0);if(this.viewModel.get_currentCustomView()===cv){sb.append(' ').append('tab-cv-select-list-item-current');}sb.append('" title="').append($1);if($4){sb.append(' (').append(tab.Strings.CustomViewsDefault).append(')');}if(ss.isValue($2)){sb.append(' (').append($2).append(')');}sb.append('">');sb.append('<span unselectable="on" class="tab-cv-select-list-item-advertise-icon ').append($3).append('"></span>');this.appendSelectListItemNameAndAuthorHtml(sb,$1,$2,$4);sb.append('</div>');},appendManageListItemHtml:function(sb,change){var $0=tab.Strings.CustomViewsOriginalName(tableau.format.escapeHTML(change.get_original().name));var $1=(tsConfig.allow_custom_view_share)?'tab-cv-manage-list-item-name-can-advertise':'tab-cv-manage-list-item-name-cannot-advertise';sb.append("<div class='tab-cv-manage-list-item'>");if(tsConfig.allow_custom_view_share){sb.append("<div unselectable='on' class='tab-cv-manage-list-item-advertise-button'>");sb.append("<div unselectable='on' class='tab-cv-manage-list-item-advertise-icon'></div>");sb.append('</div>');}sb.append("<div class='tab-cv-manage-list-item-name-input-holder ").append($1).append("'>");sb.append("<input type='text' maxlength='255' class='tab-cv-manage-list-item-name-input tab-selectable'");sb.append(" title='").append($0).append("'>");sb.append('</div>');sb.append("<div unselectable='on' class='tab-cv-manage-list-item-name-deleted ");sb.append($1);if(tab.BrowserSupport.get_isIE()){sb.append(' ie');}sb.append("' title='").append($0).append("'></div>");sb.append("<div unselectable='on' class='tab-cv-manage-list-item-delete-button'>");sb.append("<div unselectable='on' class='tab-cv-manage-list-item-delete-icon tab-icon-cv-delete'></div>");sb.append('</div>');sb.append("<div unselectable='on' class='tab-cv-manage-list-item-undo-button'></div>");sb.append('</div>');},updateManageListItems:function(){var $0=this.listMyCustomViews.find('.tab-cv-manage-list-item');$0.each(ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=$($p1_1);var $1_1=this.viewModel.get_changes()[$p1_0];var $1_2=$1_0.find('.tab-cv-manage-list-item-advertise-button');var $1_3=$1_0.find('.tab-cv-manage-list-item-advertise-icon');var $1_4=$1_0.find('.tab-cv-manage-list-item-name-input-holder');var $1_5=$1_0.find('.tab-cv-manage-list-item-name-input');var $1_6=$1_0.find('.tab-cv-manage-list-item-name-deleted');var $1_7=$1_0.find('.tab-cv-manage-list-item-delete-button');var $1_8=$1_0.find('.tab-cv-manage-list-item-undo-button');if($1_1.get_isPublic()){$1_3.removeClass('tab-icon-cv-advertise-off');$1_3.addClass('tab-icon-cv-advertise-on');}else{$1_3.removeClass('tab-icon-cv-advertise-on');$1_3.addClass('tab-icon-cv-advertise-off');}if($1_1.get_markedForDeletion()){$1_2.removeClass('tab-enabled');$1_2.addClass('tab-opacity-50');$1_4.hide();$1_6.show();$1_7.hide();$1_8.show();$1_6.text($1_1.get_name());}else{$1_2.addClass('tab-enabled');$1_2.removeClass('tab-opacity-50');$1_4.show();$1_6.hide();$1_7.show();$1_8.hide();if(!this.viewModel.isChangeValid($1_1)){$1_5.addClass('tab-invalid');}else{$1_5.removeClass('tab-invalid');}if($1_1.get_name()!==$1_1.get_original().name){$1_5.addClass('tab-changed');}else{$1_5.removeClass('tab-changed');}}}));},bindListItem:function(item,cv){this.disposables.add(spiff.ClickHandler.targetAndClick(item,ss.Delegate.create(this,function($p1_0){
this.listItemClicked($p1_0,cv);})));},listItemClicked:function(e,cv){this.viewModel.select(cv);},rememberNameInputKeydown:function(e){if(e.which===13){this.saveCustomView();}},rememberNameInputKeyup:function(e){this.updateRememberButton();},rememberNamePlaceholderClicked:function(e){this.rememberNameInput.focus();},rememberButtonClicked:function(e){this.saveCustomView();},saveCustomView:function(){var $0=this.rememberNameInput.val().trim();if($0.length>0&&this.$1_2()){this.$1_1();this.viewModel.save($0);}},makeDefaultButtonClicked:function(e){this.viewModel.makeCurrentDefault();},startManageButtonClicked:function(e){this.viewModel.startManage();},applyManageButtonClicked:function(e){this.viewModel.applyManage();},cancelManageButtonClicked:function(e){this.viewModel.cancelManage();},manageListItemAdvertiseButtonClicked:function(e,change){if(!change.get_markedForDeletion()){change.toggleIsPublic();}},manageListItemNameChanged:function(e){var $0=e.data['change'];if(!$0.get_markedForDeletion()){var $1=$(e.currentTarget);var $2=$1.val();$0.changeName($2);}},manageListItemDeleteButtonClicked:function(e,change){if(!change.get_markedForDeletion()){change.toggleMarkForDeletion();}},manageListItemUndoButtonClicked:function(e,change){if(change.get_markedForDeletion()){change.toggleMarkForDeletion();}},startResize:function(e){if(!this.resizing){this.resizing=true;this.resizeStartPanelWidth=this.panelWidth;this.resizeStartPanelHeight=this.panelHeight;this.resizeStartX=e.pageX;this.resizeStartY=e.pageY;this.startDrag();e.preventDefault();}},continueResize:function(e){if(this.resizing){var $0=(e.pageX-this.resizeStartX);var $1=(this.viewModel.get_isTop())?(e.pageY-this.resizeStartY):(this.resizeStartY-e.pageY);this.panelWidth=Math.max(this.resizeStartPanelWidth+$0,200);this.panelHeight=Math.max(this.resizeStartPanelHeight+$1,200);this.place();e.preventDefault();}},endResize:function(e){if(this.resizing){this.resizing=false;this.endDrag();e.preventDefault();}},startDrag:function(){},endDrag:function(){},$1_0:function(){this.rememberButton.removeClass('tab-disabled');},$1_1:function(){this.rememberButton.addClass('tab-disabled');},$1_2:function(){return !this.rememberButton.hasClass('tab-disabled');}}
tab.CustomViewsViewModel=function(session,isTop){this.$5=tab.CustomViewsViewModel.modeSelect;this.$6=[];this.$7=[];this.$A=[];this.$C={};this.$10=[];this.$1=session;this.$2=isTop;this.$4=tsConfig.allow_custom_views;if(tsConfig.allow_custom_views){tab.StartupUtils.callAfterBootstrap(ss.Delegate.create(this,function(){
this.$22();}));this.$10.add(dojo.subscribe('modifiedSheetsChanged',ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;this.$21($1_0.length>0);})));}}
tab.CustomViewsViewModel.$1B=function($p0,$p1){return String.compare(($p0).name,($p1).name);}
tab.CustomViewsViewModel.prototype={$1:null,$2:false,$3:false,$4:false,$8:null,$9:null,$B:0,$D:false,$E:0,$F:false,$11:false,add_panelVisbilityChanged:function(value){this.$12=ss.Delegate.combine(this.$12,value);},remove_panelVisbilityChanged:function(value){this.$12=ss.Delegate.remove(this.$12,value);},$12:null,add_modeChanged:function(value){this.$13=ss.Delegate.combine(this.$13,value);},remove_modeChanged:function(value){this.$13=ss.Delegate.remove(this.$13,value);},$13:null,add_customViewListChanged:function(value){this.$14=ss.Delegate.combine(this.$14,value);},remove_customViewListChanged:function(value){this.$14=ss.Delegate.remove(this.$14,value);},$14:null,add_defaultCustomViewChanged:function(value){this.$15=ss.Delegate.combine(this.$15,value);},remove_defaultCustomViewChanged:function(value){this.$15=ss.Delegate.remove(this.$15,value);},$15:null,add_customViewDestroyed:function(value){this.$16=ss.Delegate.combine(this.$16,value);},remove_customViewDestroyed:function(value){this.$16=ss.Delegate.remove(this.$16,value);},$16:null,add_startManageEnabledChanged:function(value){this.$17=ss.Delegate.combine(this.$17,value);},remove_startManageEnabledChanged:function(value){this.$17=ss.Delegate.remove(this.$17,value);},$17:null,add_applyManageEnabledChanged:function(value){this.$18=ss.Delegate.combine(this.$18,value);},remove_applyManageEnabledChanged:function(value){this.$18=ss.Delegate.remove(this.$18,value);},$18:null,add_manageListItemsChanged:function(value){this.$19=ss.Delegate.combine(this.$19,value);},remove_manageListItemsChanged:function(value){this.$19=ss.Delegate.remove(this.$19,value);},$19:null,add_dirtyChanged:function(value){this.$1A=ss.Delegate.combine(this.$1A,value);},remove_dirtyChanged:function(value){this.$1A=ss.Delegate.remove(this.$1A,value);},$1A:null,get_isTop:function(){return this.$2;},get_isToolbarButtonVisible:function(){return this.$4;},get_isPanelVisible:function(){return this.$3;},get_mode:function(){return this.$5;},get_myCustomViews:function(){return this.$6;},get_otherCustomViews:function(){return this.$7;},get_currentCustomView:function(){return this.$8;},get_defaultCustomViewId:function(){return this.$9;},get_changes:function(){return this.$A;},get_startManageEnabled:function(){return tsConfig.allow_custom_view_save&&this.$6.length>0&&!this.$E;},get_applyManageEnabled:function(){return this.$B>0&&!this.$D;},get_dirty:function(){return this.$11;},dispose:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$10);while($enum1.moveNext()){var $0=$enum1.current;dojo.unsubscribe($0);}this.$10.clear();},isDefault:function(cv){if(tsConfig.allow_custom_view_default){if(ss.isValue(cv)){return ss.isValue(this.$9)&&this.$9===cv.id;}else{return ss.isNullOrUndefined(this.$9);}}else{return false;}},show:function(){if(!this.$3){this.$22();this.$3=true;this.$35();}},hide:function(){if(this.$3){this.$3=false;this.$35();}},save:function(name,onSuccess,onError){var $0=null;var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $1=$enum1.current;if($1.name===name){$0=$1;}}if(!ss.isValue($0)){$0=new tab.CustomizedView();$0.name=name;}this.$1.saveCustomizedView($0,ss.Delegate.create(this,function($p1_0){
this.$23($p1_0);if(ss.isValue(onSuccess)){onSuccess($p1_0);}}),ss.Delegate.create(this,function($p1_0){
this.$24($p1_0);if(ss.isValue(onError)){onError($p1_0);}}));},select:function(cv){if(ss.isValue(cv)){this.$1.navigateToCustomizedView(cv);}else{this.$1.navigateToOriginalView();}},destroy:function(cv,onSuccess,onError){this.$E+=1;this.$1C(cv,onSuccess,onError);},update:function(cv,onSuccess,onError){this.$E+=1;this.$1D(cv,onSuccess,onError);},buildUrl:function(cv,removeQueryParams){return tab.CustomizedViewSession.buildUrl(cv,removeQueryParams);},makeCurrentDefault:function(onSuccess,onError){this.$1.setDefaultCustomizedView(this.$8,ss.Delegate.create(this,function($p1_0){
this.$25($p1_0);if(ss.isValue(onSuccess)){onSuccess($p1_0);}}),ss.Delegate.create(this,function($p1_0){
this.$26($p1_0);if(ss.isValue(onError)){onError($p1_0);}}));},startManage:function(){if(this.$5===tab.CustomViewsViewModel.modeSelect&&this.get_startManageEnabled()){this.$1F();var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $0=$enum1.current;var $1=new tab.CustomizedViewChange($0,ss.Delegate.create(this,this.$2D),ss.Delegate.create(this,this.$2E),ss.Delegate.create(this,this.$2F));this.$A.add($1);this.$20($1.get_original().name)[$1.get_original().urlId]=$1;this.$20($1.get_name())[$1.get_original().urlId]=$1;}this.$1E(tab.CustomViewsViewModel.modeManage);}},applyManage:function(){if(this.$5===tab.CustomViewsViewModel.modeManage&&this.get_applyManageEnabled()){var $0=[];var $1=[];var $enum1=ss.IEnumerator.getEnumerator(this.$A);while($enum1.moveNext()){var $2=$enum1.current;if($2.get_markedForDeletion()){$0.add($2.get_original());}else if($2.get_isPublic()!==$2.get_original().isPublic||$2.get_name()!==$2.get_original().name){var $3=new tab.CustomizedView();$3.id=$2.get_original().id;$3.isPublic=$2.get_isPublic();$3.name=$2.get_name();$3.owner=$2.get_original().owner;$3.startViewId=$2.get_original().startViewId;$3.urlId=$2.get_original().urlId;$1.add($3);}}this.$1F();this.$E=$0.length+$1.length;var $enum2=ss.IEnumerator.getEnumerator($0);while($enum2.moveNext()){var $4=$enum2.current;this.$1C($4);}var $enum3=ss.IEnumerator.getEnumerator($1);while($enum3.moveNext()){var $5=$enum3.current;this.$1D($5);}this.$1E(tab.CustomViewsViewModel.modeSelect);}},cancelManage:function(){if(this.$5===tab.CustomViewsViewModel.modeManage){this.$1F();this.$1E(tab.CustomViewsViewModel.modeSelect);}},updateCustomizedViews:function(onSuccess,onError){this.$22(onSuccess,onError);},isChangeValid:function(change){return change.get_name().length>0&&Object.getKeyCount(this.$20(change.get_name()))<=1;},$1C:function($p0,$p1,$p2){this.$F=true;this.$1.destroyCustomizedView($p0,ss.Delegate.create(this,function(){
this.$29();if(ss.isValue($p1)){$p1();}}),ss.Delegate.create(this,function($p1_0){
this.$2C($p1_0);if(ss.isValue($p2)){$p2($p1_0);}}));},$1D:function($p0,$p1,$p2){this.$1.updateCustomizedView($p0,ss.Delegate.create(this,function($p1_0){
this.$2B($p1_0);if(ss.isValue($p1)){$p1($p1_0);}}),ss.Delegate.create(this,function($p1_0){
this.$2C($p1_0);if(ss.isValue($p2)){$p2($p1_0);}}));},$1E:function($p0){this.$5=$p0;this.$36();},$1F:function(){this.$A.clear();this.$B=0;Object.clearKeys(this.$C);this.$D=false;},$20:function($p0){var $0=this.$C[$p0];if(ss.isNullOrUndefined($0)){$0={};this.$C[$p0]=$0;}return $0;},$21:function($p0){if(this.$11!==$p0){this.$11=$p0;this.$3D();}},$22:function($p0,$p1){this.$1.getCustomizedViews(ss.Delegate.create(this,function($p1_0,$p1_1){
this.$27($p1_0,$p1_1);if(ss.isValue($p0)){$p0($p1_0,$p1_1);}}),ss.Delegate.create(this,function($p1_0){
this.$28($p1_0);if(ss.isValue($p1)){$p1($p1_0);}}));},$23:function($p0){if(tabBootstrap.Utility.get_embedMode()==='embeddedNotInWg'||(ss.isValue(this.$8)&&this.$8.id===$p0.id)){this.hide();this.$11=false;if(tabBootstrap.Utility.get_embedMode()==='embeddedNotInWg'){var $0;if(ss.isValue($p0.owner)&&$p0.owner.id===tsConfig.current_user_id){for($0=0;$0<this.$6.length;$0++){if(this.$6[$0].name===$p0.name){this.$6[$0]=$p0;break;}}if($0>=this.$6.length){this.$6.add($p0);this.$6.sort(tab.CustomViewsViewModel.$1B);}}else{for($0=0;$0<this.$7.length;$0++){if(this.$7[$0].name===$p0.name){this.$7[$0]=$p0;break;}}if($0>=this.$7.length){this.$7.add($p0);this.$7.sort(tab.CustomViewsViewModel.$1B);}}}this.$8=$p0;this.$3D();}else{this.$1.navigateToCustomizedView($p0);}},$24:function($p0){this.$35();},$25:function($p0){this.$9=((ss.isValue($p0))?$p0.id:null);this.$38();},$26:function($p0){},$27:function($p0,$p1){this.$6.clear();this.$7.clear();this.$8=null;var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;if(ss.isValue($0.owner)&&$0.owner.id===tsConfig.current_user_id){this.$6.add($0);}else{this.$7.add($0);}if(ss.isValue(tsConfig.current_custom_view_id)&&tsConfig.current_custom_view_id===$0.id){this.$8=$0;}}this.$6.sort(tab.CustomViewsViewModel.$1B);this.$7.sort(tab.CustomViewsViewModel.$1B);this.$9=$p1;this.$37();},$28:function($p0){},$29:function(){this.$34();},$2A:function($p0){this.$34();},$2B:function($p0){this.$34();},$2C:function($p0){this.$34();},$2D:function($p0){if($p0.get_isPublic()!==$p0.get_original().isPublic){this.$32();}else{this.$33();}this.$3C();},$2E:function($p0,$p1){var $0=this.$20($p1);var $1=this.$20($p0.get_name());var $2=this.$20($p0.get_original().name);if($0!==$2){delete $0[$p0.get_original().urlId];}$1[$p0.get_original().urlId]=$p0;if($p1===$p0.get_original().name){this.$32();}else if($p0.get_name()===$p0.get_original().name){this.$33();}this.$31();this.$3C();},$2F:function($p0){var $0=this.$20($p0.get_name());var $1=this.$20($p0.get_original().name);if($p0.get_markedForDeletion()){if($0!==$1){delete $0[$p0.get_original().urlId];}this.$32();}else{$0[$p0.get_original().urlId]=$p0;this.$33();}this.$31();this.$3C();},$30:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$A);while($enum1.moveNext()){var $0=$enum1.current;if(!this.isChangeValid($0)){return true;}}return false;},$31:function(){var $0=this.$30();if(this.$D!==$0){this.$D=$0;this.$3B();}},$32:function(){this.$B+=1;if(this.$B===1){this.$3B();}},$33:function(){this.$B-=1;if(!this.$B){this.$3B();}},$34:function(){this.$E-=1;if(!this.$E){this.$3A();this.$22();}},$35:function(){if(ss.isValue(this.$12)){this.$12(this,ss.EventArgs.Empty);}},$36:function(){if(ss.isValue(this.$13)){this.$13(this,ss.EventArgs.Empty);}},$37:function(){if(ss.isValue(this.$14)){this.$14(this,ss.EventArgs.Empty);}if(this.$F){this.$39();this.$F=false;}},$38:function(){if(ss.isValue(this.$15)){this.$15(this,ss.EventArgs.Empty);}},$39:function(){if(ss.isValue(this.$16)){this.$16(this,ss.EventArgs.Empty);}},$3A:function(){if(ss.isValue(this.$17)){this.$17(this,ss.EventArgs.Empty);}},$3B:function(){if(ss.isValue(this.$18)){this.$18(this,ss.EventArgs.Empty);}},$3C:function(){if(ss.isValue(this.$19)){this.$19(this,ss.EventArgs.Empty);}},$3D:function(){if(ss.isValue(this.$1A)){this.$1A(this,ss.EventArgs.Empty);}}}
tab.CustomizedViewChange=function(cv,isPublicAction,nameAction,markedForDeletionAction){this.$0=cv;this.$1=isPublicAction;this.$2=nameAction;this.$3=markedForDeletionAction;this.$4=cv.isPublic;this.$5=cv.name;this.$6=false;}
tab.CustomizedViewChange.prototype={$0:null,$1:null,$2:null,$3:null,$4:false,$5:null,$6:false,get_original:function(){return this.$0;},get_isPublic:function(){return this.$4;},get_name:function(){return this.$5;},get_markedForDeletion:function(){return this.$6;},toggleIsPublic:function(){this.$4=!this.$4;this.$1(this);},changeName:function(newName){if(newName!==this.$5){var $0=this.$5;this.$5=newName;this.$2(this,$0);}},toggleMarkForDeletion:function(){this.$6=!this.$6;this.$3(this);}}
tab.DateFilterWidget=function(){this.lowestAllowedDate=new Date(1753,0,1);this.highestAllowedDate=new Date(9999,11,31);tab.DateFilterWidget.initializeBase(this);}
tab.DateFilterWidget.prototype={firstPeriod:0,lastPeriod:0,isFutureIncluded:true,periodType:null,anchorDateTime:null,fy:0,startOfWeek:1,_applyTimer:null,domPreview:null,textLast:null,textCurr:null,textNext:null,textLastn1:null,textLastn2:null,textNextn1:null,textNextn2:null,textTodate:null,rangeType:null,radioTodate:null,rangeN:0,UPDATE_DELAY:800,inputLastn:null,setRangeType:function(rangeTypeArg,n){var $0,$1;var $2;switch(rangeTypeArg){case 'curr':$0=0;$1=0;$2=true;break;case 'todate':$0=0;$1=0;$2=false;break;case 'last':$0=-1;$1=-1;$2=true;break;case 'next':$0=1;$1=1;$2=true;break;case 'lastn':$0=(1-n);$1=0;$2=true;break;case 'nextn':$0=0;$1=(n-1);$2=true;break;default:return;}this.firstPeriod=$0;this.lastPeriod=$1;this.isFutureIncluded=$2;},getRangeType:function(){var $0=this.isFutureIncluded;var $1=this.firstPeriod;var $2=this.lastPeriod;var $3;if(!$1&&!$2&&$0){$3='curr';}else if(!$1&&!$2&&!$0){$3='todate';}else if($1===-1&&$2===-1&&$0){$3='last';}else if($1===1&&$2===1&&$0){$3='next';}else if($1<0&&!$2&&$0){$3='lastn';}else if(!$1&&$2>0&&$0){$3='nextn';}else if($1>0&&$2>0&&!$0){$3='invalid';}else if($1>$2){$3='invalid';}else if($1===$2){$3='other';}else{$3='othern';}return $3;},adjustLastDate:function(d){var $0=null;switch(this.periodType){case 'year':case 'quarter':case 'month':case 'week':case 'day':$0=new Date(d.getFullYear(),d.getMonth(),d.getDate());$0=new Date($0.getTime()-tab.DateUtil.oneSecond);break;case 'hour':case 'minute':case 'second':$0=new Date(d.getTime()-tab.DateUtil.oneSecond);break;}return $0;},getPeriods:function(){return this.lastPeriod-this.firstPeriod+1;},roundToPeriod:function(d,fiscalYearStart,calendarStartOfWeek){var $0=d.getMonth();var $1=d.getFullYear();switch(this.periodType){case 'year':if($0<fiscalYearStart){$1-=1;}return new Date($1,fiscalYearStart,1,12);case 'quarter':var $2;if($0>=fiscalYearStart){$2=Math.floor(($0-fiscalYearStart)/3);$0=fiscalYearStart+($2*3);}else{$2=Math.floor(($0+12-fiscalYearStart)/3);var $5=(fiscalYearStart+($2*3))%12;if(!$5){$5=12;}if($5>$0){--$1;}$0=$5;}return new Date($1,$0,1,12);case 'month':return new Date($1,$0,1,12);case 'week':var $3=(7+(1+d.getDay())-calendarStartOfWeek)%7;var $4=new Date($1,$0,d.getDate(),12);return new Date($4.getTime()-($3*tab.DateUtil.oneDay));case 'day':return new Date($1,$0,d.getDate(),12);case 'hour':return new Date($1,$0,d.getDate(),d.getHours());case 'minute':return new Date($1,$0,d.getDate(),d.getHours(),d.getMinutes());case 'second':return new Date($1,$0,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds());}return null;},getEffectiveAnchor:function(){return (this.anchorDateTime==null)?new Date():this.anchorDateTime;},getAnchorPeriod:function(anchor){return this.roundToPeriod(anchor,this.fy,this.startOfWeek);},evaluateFirstDate:function(anchorPeriod){return tab.DateUtil.adjustDateByPeriod(anchorPeriod,this.periodType,this.firstPeriod);},evaluateLastDate:function(anchor,anchorPeriod){var $0=tab.DateUtil.adjustDateByPeriod(anchorPeriod,this.periodType,this.lastPeriod+1);var $1=this.adjustLastDate($0);if(!this.isFutureIncluded){$1=new Date(Math.min(anchor.getTime(),$1.getTime()));}return $1;},setPYear:function(){this.setPeriod('year');},setPQuarter:function(){this.setPeriod('quarter');},setPMonth:function(){this.setPeriod('month');},setPWeek:function(){this.setPeriod('week');},setPDay:function(){this.setPeriod('day');},setPHour:function(){this.setPeriod('hour');},setPMinute:function(){this.setPeriod('minute');},setPSecond:function(){this.setPeriod('second');},setRange:function(range,n){n=(n||0);if(ss.isValue(this._applyTimer)){window.clearTimeout(this._applyTimer);this._applyTimer=null;}if(range!==this.rangeType){this.rangeType=range;this.setRangeType(range,n);this._applyTimer=window.setTimeout(ss.Delegate.create(this,this.applyChanges),this.UPDATE_DELAY);}this.setRangeUI(range,n);this.setPreviewUI();},setPeriod:function(periodTypeArg){if(ss.isValue(this._applyTimer)){window.clearTimeout(this._applyTimer);this._applyTimer=null;}this.setPeriodUI(periodTypeArg);if(periodTypeArg!==this.periodType){if(this.oFilter.noTime&&periodTypeArg==='day'){dojo.style(this.radioTodate,'display','none');dojo.style(this.textTodate,'display','none');}else{dojo.style(this.radioTodate,'display','');dojo.style(this.textTodate,'display','');}this.periodType=periodTypeArg;this.setPreviewUI();this._applyTimer=window.setTimeout(ss.Delegate.create(this,this.applyChanges),this.UPDATE_DELAY*2);}},onTyping:function(inputElem){if(ss.isValue(this._applyTimer)){window.clearTimeout(this._applyTimer);this._applyTimer=null;}inputElem.value=inputElem.value.replace(new RegExp('/[^0-9]/g'),'');if(inputElem.value.length>0&&inputElem.value!==this.oFilter.rangeN){this.rangeN=inputElem.value;this.rangeType=(inputElem===this.inputLastn)?'lastn':'nextn';this.setRangeType(this.rangeType,this.rangeN);this._applyTimer=window.setTimeout(ss.Delegate.create(this,this.applyChanges),this.UPDATE_DELAY);}this.setPreviewUI();},setPeriodUI:function(periodTypeArg){var $0;var $1;var $2;this.updateRangeButtons(periodTypeArg);if(this.anchorDateTime==null){$2=tab.RelativeDateFilter.get_nonAnchoredDescriptions()[periodTypeArg];}else{$2=tab.RelativeDateFilter.get_anchoredDescriptions()[periodTypeArg];}this.textLast.innerHTML=$2['last'];this.textCurr.innerHTML=$2['curr'];this.textNext.innerHTML=$2['next'];var $3=$2['lastn'].split('%');this.textLastn1.innerHTML=$3[0];this.textLastn2.innerHTML=$3[1];var $4=$2['nextn'].split('%');this.textNextn1.innerHTML=$4[0];this.textNextn2.innerHTML=$4[1];this.textTodate.innerHTML=$2['todate'];$0=dojo.style(this.textLastn1,'width');$1=dojo.style(this.textNextn1,'width');if($0>$1){dojo.style(this.textNextn1,'width',$0+'px');}else if($0<$1){dojo.style(this.textLastn1,'width',$1+'px');}},$1_0:function(){var $0=null;if(ss.isValue(this.oFilter)&&ss.isValue(this.oFilter.default_format)){$0=this.oFilter.default_format;}return (ss.isValue($0)&&$0.length===3)?$0[0]:'*M/d/yyyy';},$1_1:function(){var $0=null;if(ss.isValue(this.oFilter)&&ss.isValue(this.oFilter.default_format)){$0=this.oFilter.default_format;}return (ss.isValue($0)&&$0.length===3)?$0[1].substr(1):'hh:nn:ss ampm';},$1_2:function(){var $0=null;if(ss.isValue(this.oFilter)&&ss.isValue(this.oFilter.default_format)){$0=this.oFilter.default_format;}return (ss.isValue($0)&&$0.length===3)?$0[2]:'en_US';},setPreviewUI:function(){this.domPreview.innerHTML=this.getPreviewMessage();},getPreviewMessage:function(){var $0=this.getEffectiveAnchor();var $1=this.$1_0();var $2=this.$1_2();var $3=this.$1_1();var $4;var $5=this.getAnchorPeriod($0);var $6=this.evaluateFirstDate($5);var $7=$1+' '+$3;var $8=this.evaluateLastDate($0,$5);if(this.isRangeValid($6,$8)){var $9=new Date(Date.UTC($6.getFullYear(),$6.getMonth(),$6.getDate(),$6.getHours(),$6.getMinutes(),$6.getSeconds()));var $A=new Date(Date.UTC($8.getFullYear(),$8.getMonth(),$8.getDate(),$8.getHours(),$8.getMinutes(),$8.getSeconds()));var $B=tableau.format.formatCustomJSDateTime($9,$1,tab.DateTimeAutoFormatMode.showDateOnly,null,$2,null,null,null);var $C=tableau.format.formatCustomJSDateTime($A,$1,tab.DateTimeAutoFormatMode.showDateOnly,null,$2,null,null,null);if(this.periodType==='hour'||this.periodType==='minute'||this.periodType==='second'||(this.periodType==='day'&&!this.isFutureIncluded)){var $D=$7;var $E=($B===$C)?$3:$7;$B=tableau.format.formatCustomJSDateTime($9,$D,tab.DateTimeAutoFormatMode.showDateOnly,null,$2,null,null,null);$C=tableau.format.formatCustomJSDateTime($A,$E,tab.DateTimeAutoFormatMode.showDateOnly,null,$2,null,null,null);}$4=$B+' to '+$C;}else{$4='Invalid relative date';if(ss.isValue(this._applyTimer)){window.clearTimeout(this._applyTimer);this._applyTimer=null;}}return $4;},isRangeValid:function(firstDate,lastDate){var $0=true;if(isNaN(firstDate.getTime())||isNaN(lastDate.getTime())){$0=false;}else if(this.firstPeriod>this.lastPeriod||(this.firstPeriod>0&&!this.isFutureIncluded)){$0=false;}else if(!!!firstDate||!!!lastDate){$0=false;}else if(firstDate<this.lowestAllowedDate||lastDate>this.highestAllowedDate){$0=false;}return $0;}}
tab.DatePicker=function(settings){tab.DatePicker.initializeBase(this,[$('<span>')]);this.$1_0=settings.firstDayOfWeek;this.$1_1=settings.shortDayOfWeekNames;this.$1_10=settings.todayFormatTemplate;this.$1_2=settings.monthYearFormatter;this.$1_3=settings.fullDateFormatter;this.$1_11=false;var $0=new Date();this.$1_5=tab.DatePicker.$1_14((tab.DatePicker.$1_12(settings.monthToShow)||$0));this.$1_6=tab.DatePicker.$1_12(settings.dateToSelect);this.setDateRange(settings.minDate,settings.maxDate);this.get_element().addClass('tab-datepicker');this.$1_17().appendTo(this.get_element());var $1=$('<div>').addClass('tab-datepicker-month-table-wrapper').append($('<div>').addClass('tab-datepicker-week-shade')).append(this.$1_19());$1.appendTo(this.get_element());this.$1_18().appendTo(this.get_element());this.get_element().mousedown(function($p1_0){
$p1_0.preventDefault();$p1_0.stopPropagation();});this.$1_22();}
tab.DatePicker.$1_12=function($p0){return (!!$p0)?new Date($p0.getUTCFullYear(),$p0.getUTCMonth(),$p0.getUTCDate()):null;}
tab.DatePicker.$1_13=function($p0){return (!!$p0)?new Date(Date.UTC($p0.getFullYear(),$p0.getMonth(),$p0.getDate())):null;}
tab.DatePicker.$1_14=function($p0){return (!!$p0)?new Date($p0.getFullYear(),$p0.getMonth(),1):null;}
tab.DatePicker.$1_16=function($p0,$p1,$p2,$p3){if($p0+$p1>$p3){$p0=$p3-$p1;if($p0<$p2){$p0+=Math.ceil(($p2-$p0)/2);}}return $p0;}
tab.DatePicker.$1_29=function($p0,$p1){return ($p0+$p1+14)%7;}
tab.DatePicker.$1_2A=function($p0,$p1){return ($p0.getFullYear()===$p1.getFullYear()&&$p0.getMonth()===$p1.getMonth()&&$p0.getDate()===$p1.getDate());}
tab.DatePicker.prototype={$1_0:0,$1_1:null,$1_2:null,$1_3:null,$1_5:null,$1_6:null,$1_7:null,$1_8:null,$1_9:null,$1_A:null,$1_B:null,$1_C:null,$1_D:null,$1_E:null,$1_F:null,$1_10:null,$1_11:false,setDateRange:function(newMinDate,newMaxDate){this.$1_7=tab.DatePicker.$1_12(newMinDate);this.$1_9=tab.DatePicker.$1_12(newMaxDate);this.$1_8=tab.DatePicker.$1_14(this.$1_7);this.$1_A=tab.DatePicker.$1_14(this.$1_9);},show:function(newMonthToShow,newSelectedDate){if(ss.isValue(newMonthToShow)){this.$1_5=tab.DatePicker.$1_14(tab.DatePicker.$1_12(newMonthToShow));this.$1_6=tab.DatePicker.$1_12((newSelectedDate||newMonthToShow));}this.$1_22();return this.get_element().show().width(this.get_element().width());},hide:function(){this.$1_11=false;this.get_element().height('auto');return this.get_element().hide();},positionCalendarByElement:function(element){tab.BrowserViewport.getViewport(ss.Delegate.create(this,function($p1_0){
var $1_0=element.offset();var $1_1=this.get_element().outerWidth();var $1_2=this.getMaxHeight();var $1_3=element.outerHeight();$1_0=this.$1_15($p1_0,$1_3,$1_0,$1_1,$1_2);this.get_element().offset($1_0);}));},$1_15:function($p0,$p1,$p2,$p3,$p4){var $0=$p0.getDocumentViewport(tab.$create_Point($p2['left'],$p2['top']));var $1=$0.l+$0.w;var $2=$0.t+$0.h;if($p2['top']+$p1-1+$p4<=$2){$p2['top']+=$p1-1;$p2['left']=tab.DatePicker.$1_16($p2['left'],$p3,$0.l,$1);}else if($p2['top']-($p4-1)>$0.t){this.useMaxHeight();$p2['top']-=($p4-1);$p2['left']=tab.DatePicker.$1_16($p2['left'],$p3,$0.l,$1);}else if($p2['left']-($p3-1)>$0.l){$p2['left']-=($p3-1);$p2['top']=tab.DatePicker.$1_16($p2['top'],$p4,$0.t,$2);}else{var $3=$p2['left'];$p2['left']=$0.l;$p2['left']=tab.DatePicker.$1_16($p2['left'],$p3,$0.l,$3);$p2['top']=tab.DatePicker.$1_16($p2['top'],$p4,$0.t,$2);}return $p2;},getMaxHeight:function(){var $0=this.get_element().find('.tab-datepicker-month-table tbody tr');return this.get_element().outerHeight()+Math.round($0.outerHeight()*(6-$0.length));},useMaxHeight:function(){if(!this.$1_11){this.$1_11=true;this.$1_22();this.get_element().height(this.get_element().height());}},$1_17:function(){var $0=$('<div>').addClass('tab-datepicker-header');this.$1_B=$('<span>').addClass('tab-datepicker-header-text').appendTo($0);this.$1_C=$('<span>').addClass('tab-datepicker-header-button').addClass('tab-datepicker-prev-month-button').appendTo($0).click(ss.Delegate.create(this,this.$1_1D));this.$1_D=$('<span>').addClass('tab-datepicker-header-button').addClass('tab-datepicker-next-month-button').appendTo($0).click(ss.Delegate.create(this,this.$1_1E));return $0;},$1_18:function(){var $0=$('<div>').addClass('tab-datepicker-footer');$('<span>').addClass('tab-datepicker-today-label').html(String.format(this.$1_10,"<span class='tab-datepicker-today-date'></span>")).appendTo($0);this.$1_F=$('.tab-datepicker-today-date',$0).click(ss.Delegate.create(this,this.$1_21));return $0;},$1_19:function(){this.$1_E=$('<table>').addClass('tab-datepicker-month-table');this.$1_E.on('click','.tab-datepicker-day-cell',ss.Delegate.create(this,this.$1_1A));return this.$1_E;},$1_1A:function($p0){var $0=$($p0.target);if(!$0.hasClass('tab-disabled')){this.$1_1B($0);}},$1_1B:function($p0){this.$1_E.find('.tab-datepicker-day-cell-selected').removeClass('tab-datepicker-day-cell-selected');$p0.addClass('tab-datepicker-day-cell-selected');var $0=$p0.data();this.$1_6=new Date($0['year'],$0['month'],$0['dayOfMonth']);var $1=new Date(Date.UTC($0['year'],$0['month'],$0['dayOfMonth']));this.$1_1C($1);},$1_1C:function($p0){this.get_element().trigger('dateSelected',[$p0]);},$1_1D:function($p0){if(this.$1_1F()){if(!this.$1_5.getMonth()){if(this.$1_5.getFullYear()>1){this.$1_5.setMonth(11);this.$1_5.setFullYear(this.$1_5.getFullYear()-1);}}else{this.$1_5.setMonth(this.$1_5.getMonth()-1);}this.$1_22();}},$1_1E:function($p0){if(this.$1_20()){if(this.$1_5.getMonth()===11){this.$1_5.setMonth(0);this.$1_5.setFullYear(this.$1_5.getFullYear()+1);}else{this.$1_5.setMonth(this.$1_5.getMonth()+1);}this.$1_22();}},$1_1F:function(){return ss.isNullOrUndefined(this.$1_8)||this.$1_5>this.$1_8;},$1_20:function(){return ss.isNullOrUndefined(this.$1_A)||this.$1_5<this.$1_A;},$1_21:function($p0){var $0=tab.DatePicker.$1_13(new Date());if(!this.$1_26($0)){this.$1_1C($0);}},$1_22:function(){this.$1_23();this.$1_28();this.$1_24();this.get_element().prop('unselectable','on');this.get_element().find('*').prop('unselectable','on');this.get_element().trigger('calendarUpdated');},$1_23:function(){this.$1_B.text(this.$1_2(tab.DatePicker.$1_13(this.$1_5)));this.$1_C.toggleClass('tab-disabled',!this.$1_1F());this.$1_D.toggleClass('tab-disabled',!this.$1_20());},$1_24:function(){this.$1_F.text(this.$1_3(tab.DatePicker.$1_13(new Date())));this.$1_F.toggleClass('tab-disabled',this.$1_26(tab.DatePicker.$1_13(new Date())));},$1_25:function($p0){return $('<td>').addClass('tab-datepicker-day-cell').text($p0.getDate().toString()).data({year:$p0.getFullYear(),month:$p0.getMonth(),dayOfMonth:$p0.getDate()}).toggleClass('tab-datepicker-day-cell-today',tab.DatePicker.$1_2A($p0,new Date())).toggleClass('tab-datepicker-day-cell-selected',!!this.$1_6&&tab.DatePicker.$1_2A($p0,this.$1_6)).toggleClass('tab-datepicker-day-cell-othermonth',$p0.getMonth()!==this.$1_5.getMonth()).toggleClass('tab-disabled',this.$1_26($p0));},$1_26:function($p0){return (ss.isValue(this.$1_7)&&$p0<this.$1_7)||(ss.isValue(this.$1_9)&&$p0>this.$1_9);},$1_27:function($p0){return (ss.isValue(this.$1_8)&&$p0<this.$1_8)||(ss.isValue(this.$1_A)&&$p0>this.$1_A);},$1_28:function(){var $0=new Date(this.$1_5.getFullYear(),this.$1_5.getMonth(),1).getDay();var $1;var $2,$3;var $4,$5,$6;this.$1_E.html('');$4=$('<thead>').appendTo(this.$1_E);$6=$('<tr>').appendTo($4);$1=this.$1_0;do{$('<th>').addClass('tab-datepicker-header-cell').text(this.$1_1[$1]).appendTo($6);$1=tab.DatePicker.$1_29($1,1);}while($1!==this.$1_0);$5=$('<tbody>').appendTo(this.$1_E);$6=$('<tr>').appendTo($5);$2=new Date(this.$1_5.getFullYear(),this.$1_5.getMonth(),1);$2.setDate($2.getDate()-tab.DatePicker.$1_29($0,-this.$1_0));$3=new Date(this.$1_5.getFullYear(),this.$1_5.getMonth()+1,1);$3.setDate($3.getDate()+tab.DatePicker.$1_29(this.$1_0,-$3.getDay()));while(!tab.DatePicker.$1_2A($2,$3)){this.$1_25($2).appendTo($6);$2.setDate($2.getDate()+1);if($2.getDay()===this.$1_0&&!tab.DatePicker.$1_2A($2,$3)){$6=$('<tr>').appendTo($5);}}if(this.$1_11){var $7=$5.find('tr');if($7.length<6){var $8=$7.height();for(var $9=$7.length;$9<6;++$9){$("<tr><td class='tab-datepicker-day-cell'></td></tr>").height($8).insertAfter($7.last());}}}}}
tab.DatePickerSettings=function(initialMonthToShow,initialDateToSelect,minDate,maxDate,initialFirstDayOfWeek,initialShortDayOfWeekNames,initialTodayFormatTemplate,initialMonthYearFormatter,initialFullDateFormatter){this.monthToShow=(ss.isNullOrUndefined(initialMonthToShow))?null:new Date(initialMonthToShow.getTime());this.dateToSelect=(ss.isNullOrUndefined(initialDateToSelect))?null:new Date(initialDateToSelect.getTime());this.minDate=(ss.isNullOrUndefined(minDate))?null:new Date(minDate.getTime());this.maxDate=(ss.isNullOrUndefined(maxDate))?null:new Date(maxDate.getTime());this.firstDayOfWeek=(ss.isNullOrUndefined(initialFirstDayOfWeek))?0:initialFirstDayOfWeek;this.shortDayOfWeekNames=(ss.isNullOrUndefined(initialShortDayOfWeekNames))?['S','M','T','W','T','F','S']:initialShortDayOfWeekNames.clone();this.todayFormatTemplate=(ss.isNullOrUndefined(initialTodayFormatTemplate))?'Today: {0}':initialTodayFormatTemplate;this.monthYearFormatter=(ss.isNullOrUndefined(initialMonthYearFormatter))?function($p1_0){
return tab.DatePicker.$1_12($p1_0).localeFormat('MMMM yyyy');}:initialMonthYearFormatter;this.fullDateFormatter=(ss.isNullOrUndefined(initialFullDateFormatter))?function($p1_0){
return tab.DatePicker.$1_12($p1_0).localeFormat('MMMM d, yyyy');}:initialFullDateFormatter;}
tab.DatePickerSettings.prototype={monthToShow:null,dateToSelect:null,minDate:null,maxDate:null,firstDayOfWeek:0,shortDayOfWeekNames:null,todayFormatTemplate:null,monthYearFormatter:null,fullDateFormatter:null}
tab.DojoWidgets=function(){}
tableau.FilterItem=function(){}
tableau.FilterItem.getSearchResultHtml=function(filter,tuple,itemName,itemIndex){switch(filter.get_mode()){case 'checklist':case 'checkdropdown':case 'typeinlist':return tableau.FilterItem.formatChecklistFilterItemHtml(filter,tuple,itemName,itemIndex);case 'radiolist':return tableau.FilterItem.formatRadiolistFilterItemHtml(filter,tuple,itemName,itemIndex);case 'dropdown':return tableau.FilterItem.formatDropdownListFilterItemHtml(filter,tuple,itemName,itemIndex);}return '';}
tableau.FilterItem.formatChecklistFilterItemHtml=function(filter,tuple,itemName,itemIndex){var $0=tab.FilterItemUtil.getItemId(itemName,itemIndex);var $1=tab.FilterItemUtil.shouldCheckFilterItemMultiValue(tuple,filter);var $2=tableau.format.formatTupleDisplayName(tuple,true,filter.get_oFilter().role);var $3=tableau.format.formatTupleDisplayFacet(tuple,false,filter.get_oFilter().role);var $4=tab.FilterItemUtil.showFacets(filter);var $5=filter.get_viewModel().get_filterType()!=='Hierarchical'&&ss.isValue(filter.get_modeContents().pendingManager)&&filter.get_modeContents().pendingManager.isPending(tuple,itemIndex);return tableau.FilterItem.getCheckHtml($0,$2,$1,$3,$4,$5);}
tableau.FilterItem.getCheckHtml=function(id,dname,isChecked,facet,showFacets,isPending){var $0=['<div class="','','" id="','','"><div class="facet">','','</div><div class="facetOverflow"><input type="checkbox" class="FICheckRadio" name="','','" ','','><a class="FIText" title="','','">','','</a></div></div>'];var $1=(isPending)?'FIItem FIPending':'FIItem';$0[1]=$1;$0[3]=$0[7]=tableau.format.escapeHTML(id);$0[9]='';$0[11]=$0[13]=tableau.format.escapeHTML(dname);$0[5]=(showFacets)?facet:'';if((isChecked&&!isPending)||(!isChecked&&isPending)){$0[1]+=' FIChecked';$0[9]+=' checked="checked" ';}return $0.join('');}
tableau.FilterItem.formatRadiolistFilterItemHtml=function(filter,tuple,itemName,itemIndex){var $0=tab.FilterItemUtil.getItemId(itemName,itemIndex);var $1=tab.FilterItemUtil.shouldCheckFilterItemSingleValue(tuple,filter);var $2=tableau.format.formatTupleDisplayName(tuple,true,filter.get_oFilter().role);var $3=tableau.format.formatTupleDisplayFacet(tuple,false,filter.get_oFilter().role);var $4=tab.FilterItemUtil.showFacets(filter);return tableau.FilterItem.getRadioHtml($0,itemName,$2,$1,$3,$4);}
tableau.FilterItem.getRadioHtml=function(id,name,dname,isChecked,facet,showFacets){var $0=['<div class="','','" id="','','"><div class="facet">','','</div><div class="facetOverflow"><input type="radio" class="FICheckRadio" name="','','" ','','><a class="FIText" title="','','">','','</a></div></div>'];$0[1]='FIItem';$0[3]=tableau.format.escapeHTML(id);$0[7]=tableau.format.escapeHTML(name);$0[9]='';$0[11]=$0[13]=tableau.format.escapeHTML(dname);$0[5]=(showFacets)?facet:'';if(isChecked){$0[1]+=' FIChecked';$0[9]+=' checked="checked" ';}return $0.join('');}
tableau.FilterItem.formatDropdownListFilterItemHtml=function(filter,tuple,itemName,itemIndex){var $0=tab.FilterItemUtil.getItemId(itemName,itemIndex);var $1=tableau.format.formatTupleDisplayName(tuple,false,filter.get_oFilter().role);var $2=tableau.format.formatTupleDisplayFacet(tuple,false,filter.get_oFilter().role);var $3=tab.FilterItemUtil.showFacets(filter);return tableau.FilterItem.getDropdownHtml($0,$1,$2,$3);}
tableau.FilterItem.getDropdownHtml=function(id,dname,facet,showFacets){var $0=['<div class="','','" id="','','"><div class="facet">','','</div><div class="facetOverflow"><a title="','','">','','</a></div></div>'];$0[1]='FIItem FISimpleDropdownItem';$0[3]=id;$0[7]=$0[9]=dname;$0[5]=(showFacets)?facet:'';return $0.join('');}
tableau.FilterItem.getTypeInHtml=function(id,dname){var $0=['<div tabindex="0" class="FIItem FITypeInItem FIChecked" id="','','" title="','','">','','</div>'];$0[1]=tableau.format.escapeHTML(id);$0[3]=$0[5]=tableau.format.escapeHTML(dname);return $0.join('');}
tableau.FilterItem.getSelectHtml=function(id,dname,isChecked,isAll){var $0=['<option value="','','" ','','>','','</option>'];$0[1]=tableau.format.escapeHTML(id);$0[3]=(isChecked&&!isAll)?'SELECTED':'';$0[5]=tableau.format.escapeHTML(dname);return $0.join('');}
tableau.FilterItem.getCssNode=function(node){return tab.FilterItemUtil.getClassElement(node,'FIItem');}
tableau.FilterItem.isPending=function(node){var $0=tableau.FilterItem.getCssNode(node);return ss.isValue($0)&&dojo.hasClass($0,'FIPending');}
tableau.FilterItem.togglePendingState=function(node){var $0=tableau.FilterItem.getCssNode(node);$($0).toggleClass('FIPending');}
tableau.FilterItem.setChecked=function(node,isChecked,tuple){var $0=tableau.FilterItem.getCssNode(node);if(ss.isValue($0)){if(isChecked){dojo.addClass($0,'FIChecked');}else{dojo.removeClass($0,'FIChecked');}}var $1=tableau.FilterItem.getCheckboxOrRadio(node);if(ss.isValue($1)){$1.checked=!!isChecked;}if(ss.isValue(tuple)){tuple.s=(!!isChecked);}return tuple;}
tableau.FilterItem.isChecked=function(node){var $0=tableau.FilterItem.getCssNode(node);return ss.isValue($0)&&dojo.hasClass($0,'FIChecked');}
tableau.FilterItem.syncCssToCheckState=function(node){var $0=tableau.FilterItem.getCheckboxOrRadio(node);if(ss.isValue($0)){tableau.FilterItem.setChecked(node,$0.checked,null);}}
tableau.FilterItem.setSelected=function(node,selected){var $0=tableau.FilterItem.getCssNode(node);if(selected){dojo.addClass($0,'FISelected');}else{dojo.removeClass($0,'FISelected');}}
tableau.FilterItem.isSelected=function(node){var $0=tableau.FilterItem.getCssNode(node);return ss.isValue($0)&&dojo.hasClass($0,'FISelected');}
tableau.FilterItem.isTiled=function(node){var $0=node.parentNode;if(ss.isValue($0)){return dojo.hasClass($0,'tile');}return false;}
tableau.FilterItem.getNodeFromEvent=function(evt){if(ss.isNullOrUndefined(evt)||ss.isNullOrUndefined(evt.target)){return null;}var $0=evt.target;while(ss.isValue($0)&&$0.tagName!=='OPTION'&&!dojo.hasClass($0,'FIItem')){$0=$0.parentNode;}return $0;}
tableau.FilterItem.getIndex=function(node){return tab.FilterItemUtil.getIndexFromId(node.id);}
tableau.FilterItem.isTypeInListItem=function(node){var $0=tableau.FilterItem.getCssNode(node);return ss.isValue($0)&&dojo.hasClass($0,'FITypeInItem');}
tableau.FilterItem.isAllItem=function(node){if(ss.isNullOrUndefined(node)||tableau.FilterItem.isTypeInListItem(node)){return false;}return tab.FilterItemUtil.isAllItemId(node.id);}
tableau.FilterItem.getCheckboxOrRadio=function(node){var $0=tableau.util.findElementByTagName(node,'input',{type:'checkbox'});if(ss.isValue($0)){return $0;}return tableau.util.findElementByTagName(node,'input',{type:'radio'});}
tab.FilterItemUtil=function(){}
tab.FilterItemUtil.getBaseItemName=function(filter,prefix){var $0=prefix+'_'+filter.get_oFilter().name;if(ss.isValue(filter.get_session())){$0+=filter.get_session().get_viewId();}return $0;}
tab.FilterItemUtil.getItemId=function(itemName,itemIndex){return tableau.format.escapeHTML(itemName+'_'+((itemIndex===tab.FilterItemUtil.allItemIndex)?tab.FilterItemUtil.$0:itemIndex.toString()));}
tab.FilterItemUtil.getIndexFromId=function(id){var $0=tab.FilterItemUtil.$1(id);var $1=parseInt($0,10);if(isNaN($1)){if($0===tab.FilterItemUtil.$0){return tab.FilterItemUtil.allItemIndex;}else{return tab.FilterItemUtil.unknownItemIndex;}}return $1;}
tab.FilterItemUtil.isAllItemId=function(id){return tab.FilterItemUtil.$1(id)===tab.FilterItemUtil.$0;}
tab.FilterItemUtil.getAllItemTuple=function(allFacet,isChecked){var $0=tab.$create_TupleStruct(tab.FilterItemUtil.$0,isChecked,null);$0.f=[tab.$create_DataValueStruct(tableau.types.DataType.DT_INTEGER,allFacet)];return $0;}
tab.FilterItemUtil.getAllItemHtml=function(filter,itemName,allFacet,isChecked,formatter){return formatter(filter,tab.FilterItemUtil.getAllItemTuple(allFacet,isChecked),itemName,tab.FilterItemUtil.allItemIndex);}
tab.FilterItemUtil.isAllOrAllChecked=function(filter){return filter.get_oFilter().all||filter.get_oFilter().allChecked;}
tab.FilterItemUtil.isAllMode=function(filter){return filter.get_oFilter().all;}
tab.FilterItemUtil.shouldCheckFilterItemSingleValue=function(tuple,filter){return tuple.s&&!(filter.get_oFilter().exclude&&tab.FilterItemUtil.isAllOrAllChecked(filter));}
tab.FilterItemUtil.shouldCheckFilterItemMultiValue=function(tuple,filter){return tuple.s||(!filter.get_oFilter().exclude&&tab.FilterItemUtil.isAllMode(filter));}
tab.FilterItemUtil.showFacets=function(filter){return filter.get_oFilter().showFacets&&filter.get_modeContents().get_width()>100;}
tab.FilterItemUtil.resetPendingFilterItems=function(items,updateCheckState){var $enum1=ss.IEnumerator.getEnumerator(items);while($enum1.moveNext()){var $0=$enum1.current;if(tableau.FilterItem.isPending($0)){tableau.FilterItem.togglePendingState($0);if(updateCheckState){tableau.FilterItem.setChecked($0,!tableau.FilterItem.isChecked($0));}}}}
tab.FilterItemUtil.toggleClassState=function(item,className){var $0=!dojo.hasClass(item,className);dojo.toggleClass(item,className,$0);return $0;}
tab.FilterItemUtil.getClassElement=function(node,className){for(var $0=0;ss.isValue(node)&&$0<5;$0++,node=node.parentNode){if(dojo.hasClass(node,className)){return node;}}return null;}
tab.FilterItemUtil.$1=function($p0){var $0=$p0.split('_');return $0[$0.length-1];}
tab.FilterPanel=function(oProps){this.templateString="<div class='FilterPanel' dojoAttachPoint='containerNode' dojoAttachEvent='onmousedown:onMouseDown'>"+'</div>';this.format={};this.attributes={};tab.FilterPanel.initializeBase(this);this.$2_1=[];this.$2_0=new tab.DisposableHolder();}
tab.FilterPanel.prototype={session:null,field:'',filter:null,width:0,metricsOnly:false,layoutSession:null,zid:0,quickFilterDisplayViewModel:null,$2_0:null,$2_1:null,requestSetAttributes:null,titleHTML:null,$2_2:0,$2_3:0,$2_4:null,textStyle:null,backgroundColor:null,get_$2_5:function(){return this.quickFilterDisplayViewModel.get_quickFilterDisplayModel();},get_getFilterModeMatrix:function(){if(ss.isValue(this.get_$2_5())&&ss.isValue(this.get_$2_5().get_quickFilterModeMatrix())){return this.get_$2_5().get_quickFilterModeMatrix();}else{return null;}},postCreate:function(){if(this.metricsOnly){return;}},dispose:function(){this.requestSetAttributes=null;this.$2_0.dispose();},updateFilterProperties:function(oProps){this.titleHTML=oProps.titleHTML;this.attributes=oProps.attributes;this.format=oProps.format;this.layoutSession=oProps.layoutSession;this.width=oProps.width;this.textStyle=oProps.textStyle;this.backgroundColor=oProps.backgroundColor;},destroy:function(){dojo.forEach(this.$2_1,dojo.unsubscribe);this.dispose();this.inherited(arguments);},makeQuantitativeFilter:function(filterProps){return new tableau.base.widget.QuantitativeFilter(filterProps);},makeQuantitativeDateFilter:function(filterProps){return new tableau.base.widget.QuantitativeDateFilter(filterProps);},makeHierarchicalFilter:function(filterProps){return new tableau.base.widget.HierarchicalFilter(filterProps);},makeCategoricalFilter:function(filterProps){return new tableau.base.widget.CategoricalFilter(filterProps);},makeRelativeDateFilter:function(filterProps){return new tableau.base.widget.RelativeDateFilter(filterProps);},makeRelativeDatePickFilter:function(filterProps){return new tableau.base.widget.RelativeDatePickFilter(filterProps);},setupEventHandlers:function(){var $0=$(this.filter.domNode);this.$2_0.add(spiff.EventUtil.bindWithDispose($0,'mouseenter',ss.Delegate.create(this,this.$2_8)));this.$2_0.add(spiff.EventUtil.bindWithDispose($0,'mouseleave',ss.Delegate.create(this,this.$2_9)));},$2_6:function($p0){var $0={};$0.presModel=this.get_$2_5().get_quickFilterDisplayPresModel();if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){$0.backgroundColor=tab.ColorModel.fromColorCode(this.get_$2_5().get_zone().ayq.agi).toRgb();}else{$0.backgroundColor=this.get_$2_5().get_zone().ayq.agi;}$0.textStyle=this.textStyle;$0.field=this.field;$0.oFilter=$p0;$0.filterViewModel=this.quickFilterDisplayViewModel.get_filterTypeViewModel();$0.layoutSession=this.layoutSession;$0.zid=this.zid;$0.format=this.format;$0.attributes=this.attributes||{};$0.requestSetAttributes=this.requestSetAttributes;$0.titleH=this.$2_2;$0.titleW=this.$2_3;$0.titleHTML=this.titleHTML;$0.width=this.width;$0.getContextMenuCommands=ss.Delegate.create(this,function(){
return this.getContextMenuCommands();});$0.showContextMenu=ss.Delegate.create(this,function($p1_0){
if(this.get_getFilterModeMatrix()==null){this.showContextMenu($p1_0);}else{this.showFilterPicker();}});if(this.session!=null){$0.session=this.session;}else{$0.metricsOnly=true;}return $0;},updateFilterState:function(filterState){if(this.field!==tableau.format.formatQualifiedName(filterState.name)){return;}if(!!this.filter&&((this.filter.oFilter.type!==filterState.type)||(filterState.type==='RD'&&filterState.showRelDatePick!==this.filter.oFilter.showRelDatePick)||(filterState.type==='C'&&filterState.mode!==this.filter.oFilter.mode))){this.filter.destroy(false);this.filter=null;}this.textStyle=this.quickFilterDisplayViewModel.get_quickFilterDisplayPresModel().ays;var $0=this.$2_6(filterState);if(ss.isNullOrUndefined(this.filter)){this.createFilterWidget(filterState,$0);}else{this.filter.attributes=(ss.isNullOrUndefined(this.attributes))?{}:this.attributes;this.filter.oFilter=filterState;this.filter.setTitleSize(this.$2_2,this.$2_3);this.filter.initFromState();this.$2_7();}},createFilterWidget:function(filterState,filterProps){if(ss.isNullOrUndefined(filterProps)){filterProps=this.$2_6(filterState);}switch(filterState.type){case 'Q':if(tab.FilterModel.isQuantitativeDateFilter(filterState)){this.filter=this.makeQuantitativeDateFilter(filterProps);}else{this.filter=this.makeQuantitativeFilter(filterProps);}break;case 'H':this.filter=this.makeHierarchicalFilter(filterProps);break;case 'C':this.filter=this.makeCategoricalFilter(filterProps);break;case 'RD':if(filterState.showRelDatePick){this.filter=this.makeRelativeDatePickFilter(filterProps);}else{this.filter=this.makeRelativeDateFilter(filterProps);}break;default:dojo.style(this.domNode,'display','none');return;}this.addChild(this.filter);this.setupEventHandlers();this.$2_7();this.hideControls();},$2_7:function(){var $0=this.get_$2_5().get_quickFilterDisplayPresModel().ab0;if(this.session!=null){dojo.marginBox(this.filter.domNode,dojo.contentBox(this.domNode));}tab.WidgetStyle.applyFormatting(this.domNode,this.textStyle,this.backgroundColor,$0);this.filter.layout();},$2_8:function($p0){dojo.removeClass(this.filter.domControls,'HideControls');},hideControls:function(){dojo.addClass(this.filter.domControls,'HideControls');},$2_9:function($p0){var $0=dojo.coords(this.filter.domNode,true);if($0.x>$p0.pageX||($0.x+$0.w)<=$p0.pageX||$0.y>$p0.pageY||($0.y+$0.h)<=$p0.pageY){this.hideControls();}},$2_A:function(){},setTitleSize:function(newH,newW){this.$2_2=newH;this.$2_3=newW;},resize:function(changeSize,resultSize){this.$2_4=dojo.marginBox(this.domNode);this.inherited(arguments);},layout:function(){if(!!this.filter){var $0=dojo.marginBox(this.domNode);var $1=_.isEqual(this.$2_4,$0);if(!$1){dojo.marginBox(this.filter.domNode,dojo.contentBox(this.domNode));this.filter.setTitleSize(this.$2_2,this.$2_3);this.filter.layout();}}},updateAttributes:function(attributes){this.attributes=(ss.isNullOrUndefined(attributes))?{}:attributes;},updateSubWidget:function(filterState){if(ss.isValue(this.filter)){var $0=this.$2_6(filterState);this.filter.setTitleSize($0.titleH,$0.titleW);this.filter.updateFilterProperties($0);}},$2_B:function($p0){this.updateFilterState($p0);if(this.filter==null){var $0={fixed:{w:0,h:0},item:{w:0,h:0}};return $0;}else{return this.filter.getMetrics();}},getContextMenuCommands:function(){if(ss.isValue(this.get_$2_5())&&ss.isValue(this.get_$2_5().get_quickFilterCommands())){return this.get_$2_5().get_quickFilterCommands();}else{return {};}},showContextMenu:function(domNode){var $0=this.getContextMenuCommands();var $1=[];tab.WidgetUtil.newMenuItemsFromCommands($1,$0,function($p1_0){
return function(){
var $2_0=tab.CommandItemWrapper.create($p1_0);var $2_1=tab.CommandSerializer.deserialize($2_0.get_command());tab.ServerCommands.executeServerCommand($2_1,'immediately');};});var $2=function($p1_0){
var $1_0=$p1_0.get_data();$1_0();};var $3=spiff.MenuViewModel.createForMenu(new spiff.Menu($1),$2);var $4=new spiff.ShowMenuOptions($(domNode),false,0);$3.show($4);},showFilterPicker:function(){}}
tab.FilterWidget=function(){this.format={};tab.FilterWidget.initializeBase(this);}
tab.FilterWidget.prototype={titleHTML:null,backgroundColor:null,textStyle:null,domTitleBar:null,oFilter:null,updateFilterProperties:function(props){this.titleHTML=props.titleHTML;this.format=props.format;this.backgroundColor=props.backgroundColor;},hideEmptyTitlebar:function(){return String.isNullOrEmpty(tableau.format.formatColumnDisplayName(this.oFilter,false));},updateTitleBar:function(){if(this.hideEmptyTitlebar()){dojo.style(this.domTitleBar,'display','none');dojo.marginBox(this.domTitleBar,{h:0});}else{this.domTitleBar.innerHTML=this.titleHTML;tab.FormattingConverters.cleanUpFontFamilyStyles($(this.domTitleBar));}},resetTitleSize:function(){if(this.domTitleBar!=null){$(this.domTitleBar).css({height:'auto',width:'auto'});}}}
tab.FloatingZoomToolbar=function(containerDiv,zoomFuncs,useAllButtons,addMapsSearchOffset){tab.FloatingZoomToolbar.initializeBase(this,[$("<div class='FloatingZoomToolbar'></div>")]);this.parent=$(containerDiv);this.api=zoomFuncs;this.isFullToolbar=useAllButtons;this.canZoomHome=false;if(addMapsSearchOffset){this.get_element().addClass('FloatingZoomToolbar-MapsSearchOffset');}}
tab.FloatingZoomToolbar.prototype={parent:null,buttonContainer:null,flyOutContainer:null,flyOutButtons:null,zoomInBtn:null,zoomOutBtn:null,zoomHomeBtn:null,flyOutBtn:null,zoomAreaBtn:null,rectSelectBtn:null,radialSelectBtn:null,lassoSelectBtn:null,panBtn:null,api:null,isFullToolbar:false,canZoomHome:false,$1_1:null,acceptingInteraction:true,get_currentToolMode:function(){return this.$1_1;},set_currentToolMode:function(value){if(value!==this.$1_1){var $0=this.$1_1;this.$1_1=value;this.toolModeChanged($0);}else if(value===this.api.defaultPointerToolMode()){this.updateFlyOutVisibility(false);this.updateButtonState(value,true);}return value;},dispose:function(){try{this.disposables.dispose();}catch($0){}if(ss.isValue(this.buttonContainer)){this.buttonContainer.remove();}if(ss.isValue(this.flyOutButtons)){this.flyOutButtons.remove();}if(ss.isValue(this.flyOutContainer)){this.flyOutContainer.remove();}this.api=null;this.buttonContainer=null;this.flyOutButtons=null;this.flyOutContainer=null;this.zoomInBtn=null;this.zoomOutBtn=null;this.zoomAreaBtn=null;this.zoomHomeBtn=null;this.flyOutBtn=null;this.rectSelectBtn=null;this.radialSelectBtn=null;this.lassoSelectBtn=null;this.panBtn=null;tab.FloatingZoomToolbar.callBaseMethod(this, 'dispose');},setZoomHomePossibility:function(state){this.canZoomHome=state;if(!this.isFullToolbar){this.setActiveState(this.canZoomHome);}},setActiveState:function(isVisible){if(!this.isFullToolbar&&!this.canZoomHome){this.get_element().css('display','none');}else{this.get_element().css('display',(isVisible)?'':'none');}if(!isVisible){this.updateFlyOutVisibility(false);}},resetPointerToolMode:function(){this.set_currentToolMode(this.api.defaultPointerToolMode());this.api.setPointerToolMode(this.get_currentToolMode(),false);this.updateFlyOutVisibility(false);},resetVisualState:function(){this.updateFlyOutVisibility(false);},enableUserInteraction:function(enable){this.get_element().css('pointer-events',(enable)?'auto':'none');this.acceptingInteraction=enable;},init:function(){this.createButtons();this.resetPointerToolMode();this.setActiveState(false);},setupEventHandling:function(){if(this.rectSelectBtn!=null){this.disposables.add(this.rectSelectBtn.onClick(ss.Delegate.create(this,function(){
this.setToolMode('rectSelect',false);})));this.disposables.add(this.rectSelectBtn.onShiftClick(ss.Delegate.create(this,function(){
this.setToolMode('rectSelect',true);})));}if(this.panBtn!=null){this.disposables.add(this.panBtn.onClick(ss.Delegate.create(this,function(){
this.setToolMode('pan',false);})));this.disposables.add(this.panBtn.onShiftClick(ss.Delegate.create(this,function(){
this.setToolMode('pan',true);})));}if(this.radialSelectBtn!=null){this.disposables.add(this.radialSelectBtn.onClick(ss.Delegate.create(this,function(){
this.setToolMode('radialSelect',false);})));this.disposables.add(this.radialSelectBtn.onShiftClick(ss.Delegate.create(this,function(){
this.setToolMode('radialSelect',true);})));}if(this.lassoSelectBtn!=null){this.disposables.add(this.lassoSelectBtn.onClick(ss.Delegate.create(this,function(){
this.setToolMode('lassoSelect',false);})));this.disposables.add(this.lassoSelectBtn.onShiftClick(ss.Delegate.create(this,function(){
this.setToolMode('lassoSelect',true);})));}this.disposables.add(this.zoomHomeBtn.onClick(ss.Delegate.create(this,function(){
this.clickZoomHome();})));},updateFlyOutVisibility:function(isVisible){if(this.flyOutContainer!=null){this.flyOutContainer.css('display',(isVisible)?'':'none');}},oldCreateButtons:function(){if(this.isFullToolbar){this.zoomInBtn=this.addButton(this.get_element(),'oldbuttonZoomIn',tab.Strings.PanZoomSelectToolsZoomInTooltip);this.zoomOutBtn=this.addButton(this.get_element(),'oldbuttonZoomOut',tab.Strings.PanZoomSelectToolsZoomOutTooltip);this.zoomAreaBtn=this.addToggleButton(this.get_element(),'oldbuttonZoomMode',tab.Strings.PanZoomSelectToolsZoomHomeTooltip);this.zoomHomeBtn=this.addButton(this.get_element(),'oldbuttonZoomHome','');}else{this.zoomHomeBtn=this.addButton(this.get_element(),'oldbuttonZoomOnlyHome',tab.Strings.PanZoomSelectToolsZoomHomeTooltip);}if(this.parent!=null){this.parent.append(this.get_element());}},showFlyout:function(){if(!this.acceptingInteraction){return;}var $0=this.flyOutBtn.get_element().position();var $1=this.flyOutBtn.get_element().width();var $2=$0.top.toString()+'px';var $3=$1.toString()+'px';this.flyOutContainer.css('top',$2);this.flyOutContainer.css('left',$3);this.updateFlyOutVisibility(true);},addButton:function(container,klass,tooltipLabel){var $0=new spiff.Button($(document.createElement('div')));$0.set_hoverTooltipText(tooltipLabel);this.$1_2(container,$0,klass);return $0;},addToggleButton:function(container,klass,tooltipLabel){var $0=new spiff.ToggleButton($(document.createElement('span')));$0.set_hoverTooltipText(tooltipLabel);$0.get_element().css('display','inline-block');this.$1_2(container,$0,klass);return $0;},addSpacer:function(){var $0=$(document.createElement('div'));$0.addClass('fztSpacer');this.buttonContainer.append($0);},$1_2:function($p0,$p1,$p2){var $0=$(document.createElement('div'));$0.addClass($p2);$p1.get_element().append($0);$p1.get_element().addClass('fztButton');$p0.append($p1.get_element());this.disposables.add($p1);},setToolMode:function(mode,isLocked){if(mode===this.get_currentToolMode()){this.set_currentToolMode(this.api.defaultPointerToolMode());}else{this.set_currentToolMode(mode);}this.api.setPointerToolMode(this.get_currentToolMode(),isLocked);},clickZoomHome:function(){if(this.canZoomHome){this.api.zoomHome();}},createButtonContainer:function(){this.buttonContainer=$("<div class='fztButtonContainer'/>");this.get_element().append(this.buttonContainer);if(this.parent!=null){this.parent.append(this.get_element());}},createButtonFlyOut:function(){this.flyOutContainer=$("<div class='fztFlyOutContainer'/>");this.updateFlyOutVisibility(false);this.get_element().append(this.flyOutContainer);this.flyOutButtons=$("<div class='fztFlyOutButtons'/>");this.flyOutContainer.append(this.flyOutButtons);},updateButtonState:function(mode,isSelected){switch(mode){case 'zoom':this.selectButton(this.zoomAreaBtn,isSelected);break;case 'pan':if(this.panBtn!=null){this.selectButton(this.panBtn,isSelected);}break;case 'rectSelect':if(this.rectSelectBtn!=null){this.selectButton(this.rectSelectBtn,isSelected);}break;case 'radialSelect':this.selectButton(this.radialSelectBtn,isSelected);break;case 'lassoSelect':this.selectButton(this.lassoSelectBtn,isSelected);break;default:break;}},selectButton:function(btn,isSelected){var $0=Type.safeCast(btn,spiff.ToggleButton);if($0!=null){$0.set_selected(isSelected);}},toolModeChanged:function(oldMode){this.updateButtonState(oldMode,false);this.updateButtonState(this.get_currentToolMode(),true);this.updateFlyOutVisibility(false);}}
tab.IteratorButtons=function(scrollContents,horizontal,buttonSize){this.$5=new tab.DisposableHolder();this.$3=scrollContents;if(horizontal){this.$4=new tab.HorizontalIteratorButtonTemplate();}else{this.$4=new tab.VerticalIteratorButtonTemplate();}this.$7=100;this.$6=horizontal;this.$4.$1_0();this.$4.nextButton.width(buttonSize).height(buttonSize).css('line-height',buttonSize+'px');this.$4.prevButton.width(buttonSize).height(buttonSize).css('line-height',buttonSize+'px');this.$5.add(spiff.EventUtil.bindWithDispose(this.$4.nextButton,'click',ss.Delegate.create(this,this.$B)));this.$5.add(spiff.EventUtil.bindWithDispose(this.$4.prevButton,'click',ss.Delegate.create(this,this.$A)));this.updateButtonState();}
tab.IteratorButtons.prototype={$3:null,$4:null,$6:false,$7:0,get_domRoot:function(){return this.$4.get_domRoot();},get_scrollIncrement:function(){return this.$7;},set_scrollIncrement:function(value){this.$7=value;return value;},get_$8:function(){return (this.$6)?this.$3.scrollLeft():this.$3.scrollTop();},set_$8:function($p0){if(this.$6){this.$3.scrollLeft($p0);}else{this.$3.scrollTop($p0);}return $p0;},get_$9:function(){if(this.$6){return this.$3.children()[0].scrollWidth-this.$3.width();}else{return this.$3.children()[0].scrollHeight-this.$3.height();}},reset:function(){if(this.$6){this.$3.scrollLeft(0);}else{this.$3.scrollTop(0);}this.updateButtonState();},dispose:function(){this.$4.dispose();this.$5.dispose();},$A:function($p0){this.set_$8(Math.max(0,this.get_$8()-this.$7));this.updateButtonState();},$B:function($p0){this.set_$8(Math.min(this.get_$9(),this.get_$8()+this.$7));this.updateButtonState();},updateButtonState:function(){this.$E(this.$4.prevButton,this.$C());this.$E(this.$4.nextButton,this.$D());},$C:function(){return this.get_$8()>0;},$D:function(){return this.get_$8()<this.get_$9();},$E:function($p0,$p1){($p0).toggleClass('tabIterButtonDisabled',!$p1);}}
tab.IteratorButtonTemplate=function(htmlTemplate){tab.IteratorButtonTemplate.initializeBase(this,[$(htmlTemplate)]);this.prevButton=this.getElementBySelector('.tabCatLegendScrollPrev');this.nextButton=this.getElementBySelector('.tabCatLegendScrollNext');}
tab.IteratorButtonTemplate.prototype={prevButton:null,nextButton:null}
tab.HorizontalIteratorButtonTemplate=function(){tab.HorizontalIteratorButtonTemplate.initializeBase(this,[tab.HorizontalIteratorButtonTemplate.$1_1]);}
tab.HorizontalIteratorButtonTemplate.prototype={$1_0:function(){this.prevButton.addClass('tabCatLegendScrollLeft');this.nextButton.addClass('tabCatLegendScrollRight');}}
tab.VerticalIteratorButtonTemplate=function(){tab.VerticalIteratorButtonTemplate.initializeBase(this,[tab.VerticalIteratorButtonTemplate.$1_1]);}
tab.VerticalIteratorButtonTemplate.prototype={$1_0:function(){this.prevButton.addClass('tabCatLegendScrollUp');this.nextButton.addClass('tabCatLegendScrollDown');}}
tab.IDropDownSelect=function(){tab.IDropDownSelect.initializeBase(this);}
tab.IDropDownSelect.prototype={_getMenuItemForOption:function($p0){if(String.isNullOrEmpty($p0.value)){return new dijit.MenuSeparator();}else{var $0=ss.Delegate.create(this,function(){
this._setValueAttr($p0);});var $1={};$1.option=$p0;$1.label=$p0.label;$1.onClick=$0;$1.disabled=($p0.disabled||false);return new tableau.base.widget.ui.iMenuItem($1);}}}
tab.DownloadQueue=function(){this.$1=[];this.$3=[];}
tab.DownloadQueue.prototype={$1:null,$2:0,$3:null,add_complete:function(value){this.$4=ss.Delegate.combine(this.$4,value);},remove_complete:function(value){this.$4=ss.Delegate.remove(this.$4,value);},$4:null,add_imageLoaded:function(value){this.$5=ss.Delegate.combine(this.$5,value);},remove_imageLoaded:function(value){this.$5=ss.Delegate.remove(this.$5,value);},$5:null,add_imageTimedOut:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_imageTimedOut:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,addImage:function(image){if(!ss.isValue(image)){return;}for(var $0=0,$1=this.$1.length;$0<$1;$0++){if(!this.$1[$0].get_$7()){this.$2++;this.$1[$0].$9(image);return;}}if(this.$1.length<2){var $2=new tab.vqlui$4(this.$1.length);$2.add_$3(ss.Delegate.create(this,this.onWorkerFinished));$2.add_$5(ss.Delegate.create(this,this.onWorkerTimedOut));this.$1.add($2);this.$2++;$2.$9(image);}else{this.$3.enqueue(image);}},clear:function(){this.$3.clear();},destroy:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$1);while($enum1.moveNext()){var $0=$enum1.current;$0.$8();}this.$3.clear();this.$5=null;this.$6=null;this.$4=null;},onWorkerFinished:function(sender,e){if(ss.isValue(this.$5)){this.$5(this,new tab.ImageLoadedEventArgs(e.get_image()));}this.$7(e.get_workerID());},onWorkerTimedOut:function(sender,e){if(ss.isValue(this.$6)){this.$6(this,ss.EventArgs.Empty);}this.$7(e.get_workerID());},$7:function($p0){this.$2--;if(!this.$3.length){if(!this.$2){if(ss.isValue(this.$4)){this.$4(this,ss.EventArgs.Empty);}}}else{this.$1[$p0].$9(this.$3.dequeue());this.$2++;}}}
tab.vqlui$4=function(id){this.$0=-1;this.id=id;this.$0=-1;this.$2=true;}
tab.vqlui$4.prototype={id:0,$1:null,$2:true,add_$3:function($p0){this.$4=ss.Delegate.combine(this.$4,$p0);},remove_$3:function($p0){this.$4=ss.Delegate.remove(this.$4,$p0);},$4:null,add_$5:function($p0){this.$6=ss.Delegate.combine(this.$6,$p0);},remove_$5:function($p0){this.$6=ss.Delegate.remove(this.$6,$p0);},$6:null,get_$7:function(){return !this.$2;},$8:function(){this.$A();},$9:function($p0){if(ss.isNullOrUndefined($p0)){this.$D();return;}if(this.$0!==-1){window.clearTimeout(this.$0);this.$0=-1;}this.$1=$p0;this.$2=false;this.$A();var $0=true;var $1=$p0.get_imageNode();var $2=$($1);if(ss.isNullOrUndefined($1)){$1=$p0.set_imageNode(document.createElement('img'));$2=$($1);}else{$0=$2.width()!==$p0.get_bounds().w||$2.height()!==$p0.get_bounds().h;}if($0){$($1).css({left:$p0.get_bounds().l+'px',top:$p0.get_bounds().t+'px'});}$2.bind('load',ss.Delegate.create(this,this.$B));$2.bind('error',ss.Delegate.create(this,this.$B));$2.bind('abort',ss.Delegate.create(this,this.$B));this.$0=window.setTimeout(ss.Delegate.create(this,function(){
this.$C();}),600000);var $3=$2.attr('src');if(!tab.BrowserSupport.get_imageLoadIsSynchronous()){$2.attr('src',$p0.get_src());}else{window.setTimeout(function(){
$2.attr('src',$p0.get_src());},0);}if($p0.get_src()===$3&&!tab.BrowserSupport.get_raisesEventOnImageReassignment()){window.setTimeout(ss.Delegate.create(this,function(){
this.$B(null);}),0);}},$A:function(){if(ss.isValue(this.$1)&&ss.isValue(this.$1.get_imageNode())){var $0=$(this.$1.get_imageNode());if(ss.isValue($0)){$0.unbind('load',ss.Delegate.create(this,this.$B));$0.unbind('error',ss.Delegate.create(this,this.$B));$0.unbind('abort',ss.Delegate.create(this,this.$B));}}},$B:function($p0){window.clearTimeout(this.$0);this.$0=-1;if(this.$2){return;}this.$2=true;this.$D();},$C:function(){this.$2=true;this.$0=-1;this.$A();this.$E();},$D:function(){if(ss.isValue(this.$4)){this.$4(this,new tab.WorkerDoneEventArgs(this.id,this.$1));}},$E:function(){if(ss.isValue(this.$6)){this.$6(this,new tab.WorkerTimeoutEventArgs(this.id));}}}
tab.ImageDownloaderImageData=function(imgNode,idx,src,bounds,version){this.$0=imgNode;this.$1=idx;this.$2=src;this.$3=bounds;this.$4=version;}
tab.ImageDownloaderImageData.prototype={$0:null,$1:0,$2:null,$3:null,$4:0,get_imageNode:function(){return this.$0;},set_imageNode:function(value){this.$0=value;return value;},get_index:function(){return this.$1;},get_src:function(){return this.$2;},get_bounds:function(){return this.$3;},get_version:function(){return this.$4;}}
tab.ImageLoadedEventArgs=function(image){tab.ImageLoadedEventArgs.initializeBase(this);this.$1_0=image;}
tab.ImageLoadedEventArgs.prototype={$1_0:null,get_image:function(){return this.$1_0;}}
tab.WorkerDoneEventArgs=function(id,image){tab.WorkerDoneEventArgs.initializeBase(this);this.$1_0=id;this.$1_1=image;}
tab.WorkerDoneEventArgs.prototype={$1_0:0,$1_1:null,get_workerID:function(){return this.$1_0;},get_image:function(){return this.$1_1;}}
tab.WorkerTimeoutEventArgs=function(id){tab.WorkerTimeoutEventArgs.initializeBase(this);this.$1_0=id;}
tab.WorkerTimeoutEventArgs.prototype={$1_0:0,get_workerID:function(){return this.$1_0;}}
tab.LeafletMapControl=function(){}
tab.LeafletMapControl.$1B=function($p0){var $0=256;var $1=document.createElement('canvas');$1.width=$0;$1.height=$0;var $2=tab.CanvasRenderer.getRenderContext($1);$2.set_shapeFillStyle($p0);$2.fillRect(0,0,$0,$0);var $3=$1.toDataURL('png');return $3;}
tab.LeafletMapControl.$1E=function($p0){return new L.LatLng($p0.first,$p0.second);}
tab.LeafletMapControl.$1F=function($p0,$p1,$p2){var $0=Math.pow(2,$p0)*$p2;var $1=Math.floor($p1*$0);return $1;}
tab.LeafletMapControl.prototype={$9:null,$A:null,$B:null,$C:null,$D:null,$E:null,$F:0,$10:false,$11:null,get_enabled:function(){return ss.isValue(this.$9)&&this.$B.get_useFastMaps();},get_$12:function(){return new L.LatLng(this.$B.get_centerLatitude(),this.$B.get_centerLongitude());},$13:function(){if(this.get_enabled()){var $0=this.$B.get_zoom();var $1=this.get_$12();_.defer(ss.Delegate.create(this,function(){
this.$20($1,$0,true);}));}},zoomOnPoint:function(zoomCenter,zoomDir){if(this.get_enabled()){var $0=tab.ZoomComputer.incrementZoom(this.$B.get_zoom(),zoomDir);var $1=this.$9.containerPointToLatLng(new L.Point(zoomCenter.x,zoomCenter.y));_.defer(ss.Delegate.create(this,function(){
this.$20($1,$0,true);}));}},zoomRect:function(rect){if(this.get_enabled()){var $0=new L.Point(rect.x,rect.y+rect.h);var $1=new L.Point(rect.x+rect.w,rect.y);var $2=new L.LatLngBounds(this.$9.containerPointToLatLng($0),this.$9.containerPointToLatLng($1));var $3=new L.Point(rect.x+(rect.w/2),rect.y+(rect.h/2));var $4=this.$9.containerPointToLatLng($3);this.$14($2,$4,true);}},moveToBounds:function(bounds){if(this.get_enabled()){var $0=new L.LatLngBounds(new L.LatLng(bounds.adk,bounds.adl),new L.LatLng(bounds.adm,bounds.adn));var $1=new L.LatLng((bounds.adm+bounds.adk)*0.5,(bounds.adn+bounds.adl)*0.5);var $2=this.$14($0,$1,true);if(!$2){this.removeMarkOverlay();}}},$14:function($p0,$p1,$p2){var $0=this.$9.getBoundsZoom($p0,true);var $1=tab.ZoomComputer.resolveDesiredZoom(this.$B.get_mapServerPresModel(),$0);$p2=$p2&&Math.abs(this.$9.getZoom()-$1)<=2;_.defer(ss.Delegate.create(this,function(){
this.$20($p1,$1,$p2);}));return $p2;},panTo:function(panXCenter,panYCenter){if(this.get_enabled()){var $0=this.$9.latLngToContainerPoint(this.get_$12());var $1=new L.Point($0.x-panXCenter,$0.y-panYCenter);var $2=this.$9.containerPointToLatLng($1);var $3={};$3.animate=false;this.$9.panTo($2,$3);}},touchMove:function(deltaX,deltaY,scale){if(isNaN(scale)||isNaN(deltaY)||isNaN(deltaX)){return;}if(tab.FloatUtil.isEqual(scale,1)&&!this.$10){this.panTo(deltaX,deltaY);return;}if(!this.$10){$(this.$9.getPanes().mapPane).addClass('leaflet-touching');$(this.$9.getPanes().overlayPane).addClass('leaflet-touching');this.$11=new L.Point(deltaX,deltaY);}this.$10=true;tab.WindowHelper.cancelAnimationFrame(this.$F);this.$F=tab.WindowHelper.requestAnimationFrame(ss.Delegate.create(this,function(){
var $1_0=tab.ZoomComputer.combineTileZoomAndStretch(this.$B.get_zoom(),scale);this.$22($1_0,scale,deltaX,deltaY);}));},touchEnd:function(deltaX,deltaY,scale){if(this.get_enabled()){this.$23();if(this.$10){var $0=tab.ZoomComputer.combineTileZoomAndStretch(this.$B.get_zoom(),scale);var $1=tab.ZoomComputer.resolveDesiredZoom(this.$B.get_mapServerPresModel(),$0);scale=Math.pow(2,$1-this.$B.get_zoom());this.$22($1,scale,deltaX,deltaY);}this.$10=false;}},splatOverlayToMapForTransition:function(canvas){if(ss.isValue(this.$9)&&ss.isNullOrUndefined(this.$A)){var $0=tabBootstrap.MetricsController.get_instance().createContext('Leaflet Marks Splat',tabBootstrap.MetricsSuites.debug);var $1=tab.RenderUtil.calculatePixelRatio(true);if(!tab.CanvasUtil.canvasDensified(canvas)){$1=1;}var $2=2*parseInt($1);var $3=tab.$create_RectXY($2,$2,canvas.width-(2*$2),canvas.height-(2*$2));var $4=(this.$9.latLngToContainerPoint(tab.LeafletMapControl.$1E(tab.LeafletMapControl.$7)).y*$1);var $5=(this.$9.latLngToContainerPoint(tab.LeafletMapControl.$1E(tab.LeafletMapControl.$8)).y*$1);if($5<canvas.height){$3.h=$5;}if($4>0){$3.y+=$4;$3.h-=$4;}var $6={};$6.pixelRatio=$1;this.$A=new L.CanvasOverlay(this.$9.getBounds(),$6);this.$9.addLayer(this.$A);var $7=this.$A.getCanvas();var $8=tab.CanvasRenderer.getRenderContext($7);var $9=tab.$create_RectXY($2+tab.LeafletMapControl.$6.x,$2+tab.LeafletMapControl.$6.y,$3.w,$3.h);$8.drawImage5(canvas,$3.x,$3.y,$3.w,$3.h,$9.x,$9.y,$9.w,$9.h);canvas.width=canvas.width;$0.close();}},$15:function($p0,$p1){this.$B=$p1;this.$17();var $0=this.$1C();var $1=this.$1D();this.$E=new tab.vqlui$11();this.$E.get_domRoot().appendTo($p0);this.$9=new L.Map(this.$E.get_$1_4(),$0);var $2=tab.LeafletMapControl.$1B(this.$B.get_waitTileFillColor());this.$C=new L.TileLayer($2,$1);this.$9.addLayer(this.$C);this.$D=new L.TileLayer(this.$B.get_tileUrl(),$1);this.$16();this.$9.addLayer(this.$D);this.$B.add_newMapServerInfo(ss.Delegate.create(this,this.$18));if(this.$B.get_hasWashout()){var $3=this.$B.get_washoutColor();var $4=tab.LeafletMapControl.$1B($3.toRgb());$1=this.$1D();$1.opacity=$3.get_a();this.$9.addLayer(new L.TileLayer($4,$1));}this.$E.$1_5(this.$B.get_mapBGFillColor());this.$21(this.$B.get_zoom(),false);},$16:function(){var $0=(this.$B.get_hasValidTileLayer())?1:0;this.$D.setOpacity($0);this.$C.setOpacity($0);},$17:function(){if(ss.isValue(this.$9)){this.$9.remove();this.$9=null;if(ss.isValue(this.$B)){this.$B.remove_newMapServerInfo(ss.Delegate.create(this,this.$18));}this.$B=null;this.$E.dispose();this.$E=null;}},$18:function(){if(this.get_enabled()){if(this.$9._animatingZoom){window.setTimeout(ss.Delegate.create(this,this.$18),10);}else{this.$16();var $0=this.get_$12();var $1=this.$9.latLngToContainerPoint(this.$9.getCenter());var $2=this.$9.latLngToContainerPoint($0);var $3=Math.abs(this.$9.getZoom()-this.$B.get_zoom());if($3>0.001){}var $4=$3<0.01&&$1.distanceTo($2)<8;this.$20($0,this.$B.get_zoom(),$4);this.$19();}}},$19:function(){var $0=$(this.$9.getPanes().tilePane).find('.leaflet-tile-container');for(var $1=0;$1<$0.length;++$1){if(!tab.MiscUtil.isNullOrEmpty($0[$1].style.visibility)){this.$9._onZoomTransitionEnd();break;}}},$1A:function($p0,$p1){if(this.get_enabled()){tab.DomUtil.setMarginBox(this.$9.getContainer(),tab.$create_Rect(-tab.LeafletMapControl.$6.x,-tab.LeafletMapControl.$6.y,$p0,$p1));this.$9.invalidateSize(false);this.$21(this.$B.get_zoom(),false);this.$E.$1_7();}},setScrollX:function(x){if(this.get_enabled()){this.$9.getContainer().style.left=(-x-tab.LeafletMapControl.$6.x)+'px';}},setScrollY:function(y){if(this.get_enabled()){this.$9.getContainer().style.top=(-y-tab.LeafletMapControl.$6.y)+'px';}},removeMarkOverlay:function(){if(this.$A!=null){this.$9.removeLayer(this.$A);this.$19();this.$23();}this.$A=null;},dispose:function(){this.$17();},$1C:function(){var $0={};$0.center=this.get_$12();$0.zoom=this.$B.get_zoom();$0.zoomControl=false;$0.attributionControl=false;return $0;},$1D:function(){var $0={};$0.maxZoom=100;$0.maxNativeZoom=this.$B.get_maxZoom();$0.minZoom=this.$B.get_minZoom();$0.continuousZoom=true;$0.intermediateTileLevels=ss.isValue(this.$B.get_intermediateTileLevels())&&this.$B.get_intermediateTileLevels()>1;return $0;},$20:function($p0,$p1,$p2){var $0={};$0.animate=$p2;if($p1>=0){if(this.$9._animatingZoom){this.$19();}this.$9.setView($p0,$p1,$0);this.$21($p1,$p2);}},$21:function($p0,$p1){var $0=tab.LeafletMapControl.$1F($p0,this.$B.get_numWorldRepeats(),this.$B.get_tilePixelSize());var $1=this.$E.get_domRoot().width();var $2=Math.ceil(($1-$0)/2);$2=Math.max($2,0);this.$E.$1_6($2,$p1);},$22:function($p0,$p1,$p2,$p3){var $0=new L.Point($p2,$p3);$0=$0.subtract(this.$11);var $1=this.$9.containerPointToLayerPoint(this.$9.getSize().divideBy(2));var $2=new L.Point(0,0).subtract($0).divideBy($p1);var $3=$1.add($2);var $4=this.$9.layerPointToLatLng($3);if(isNaN($4.lat)||isNaN($4.lng)){return;}this.$9._animateZoom($4,$p0,$1,$p1,$0);this.$21($p0,false);},$23:function(){$(this.$9.getPanes().mapPane).removeClass('leaflet-touching');$(this.$9.getPanes().overlayPane).removeClass('leaflet-touching');tab.WindowHelper.cancelAnimationFrame(this.$F);}}
tab.vqlui$11=function(){tab.vqlui$11.initializeBase(this,[$(tab.vqlui$11.$1_3)]);this.$1_0=this.getElementBySelector('.tabLeftBarnDoor');this.$1_1=this.getElementBySelector('.tabRightBarnDoor');this.$1_2=this.getElementBySelector('.tabLeafletMapHolder');var $0={position:'absolute',top:'0px',bottom:'0px'};this.$1_0.css($0);this.$1_1.css($0);this.$1_0.css('left','0px');this.$1_1.css('right','0px');}
tab.vqlui$11.prototype={$1_0:null,$1_1:null,$1_2:null,get_$1_4:function(){return this.$1_2.get(0);},$1_5:function($p0){var $0={backgroundColor:$p0};this.$1_0.css($0);this.$1_1.css($0);this.$1_2.css($0);},$1_6:function($p0,$p1){var $0={width:$p0+'px'};if($p1){this.$1_0.addClass('leaflet-zoom-anim').addClass('leaflet-zoom-animated');this.$1_1.addClass('leaflet-zoom-anim').addClass('leaflet-zoom-animated');}this.$1_0.css($0);this.$1_1.css($0);},$1_7:function(){this.$1_0.removeClass('leaflet-zoom-anim').removeClass('leaflet-zoom-animated');this.$1_1.removeClass('leaflet-zoom-anim').removeClass('leaflet-zoom-animated');}}
tab.ZoomComputer=function(){}
tab.ZoomComputer.resolveDesiredZoom=function(curZoom,desiredZoomLevel){var $0=(curZoom.ab2||1);var $1=Math.floor(desiredZoomLevel*$0)/$0;$1+=(Math.log(curZoom.adi)/Math.LN2);var $2=Math.ceil(desiredZoomLevel*$0)/$0;$2+=(Math.log(curZoom.adh)/Math.LN2);var $3=(desiredZoomLevel<$2)?Math.min($1,desiredZoomLevel):Math.max($2,desiredZoomLevel);return $3;}
tab.ZoomComputer.resolveDesiredScale=function(mapDataPM,desiredScale){var $0=Math.log(desiredScale)/Math.LN2;var $1=tab.ZoomComputer.resolveDesiredZoom(mapDataPM,mapDataPM.add+$0);var $2=$1-mapDataPM.add;var $3=Math.pow(2,$2);return $3;}
tab.ZoomComputer.incrementZoom=function(currentZoom,zoomDir){var $0=currentZoom+zoomDir;return $0;}
tab.ZoomComputer.combineTileZoomAndStretch=function(tileZoom,stretch){return tileZoom+(Math.log(stretch)/Math.LN2);}
tab.DialogUnderlay=function(){tab.DialogUnderlay.initializeBase(this);}
tab.DialogUnderlay.prototype={layout:function(){var $0=tabBootstrap.ViewerBootstrap.get_instance().getViewport();var $1=this.node.style;var $2=this.domNode.style;$2.top=0+'px';$2.left=0+'px';$1.width=$0.w+'px';$1.height=$0.h+'px';var $3=tabBootstrap.ViewerBootstrap.get_instance().getViewport();if($0.w!==$3.w){$1.width=$3.w+'px';}if($0.h!==$3.h){$1.height=$3.h+'px';}}}
tab.LegacyDialog=function(){this.buttons='None';this.onYes=function () { };this.onNo=function () { };tab.LegacyDialog.initializeBase(this);}
tab.LegacyDialog.prototype={title:'',$3_0:null,$3_1:null,postCreate:function(){this.inherited(arguments);dojo.style(this.domNode,'display','none');if(this.buttons==='YesNo'){var $1={};$1.label=tab.Strings.DialogYesButtonText;$1.onClick=ss.Delegate.create(this,this.$3_4);this.$3_0=new dijit.form.Button($1);$1.label=tab.Strings.DialogNoButtonText;$1.onClick=ss.Delegate.create(this,this.$3_5);this.$3_1=new dijit.form.Button($1);var $2=this.containerNode;$2.appendChild(document.createElement('br'));$2.appendChild(this.$3_0.domNode);$2.appendChild(this.$3_1.domNode);}var $0=function($p1_0){
$p1_0.stopPropagation();};$(this.domNode).bind(this.$3_2('touchstart'),$0).bind(this.$3_2('touchend'),$0).bind(this.$3_2('click'),$0).bind(this.$3_2('mousedown'),$0);},destroy:function(){$(this.domNode).unbind('touchstart').unbind('touchcancel').unbind('touchend').unbind('touchmove').unbind('click').unbind('mousedown').unbind('mousemove').unbind('mouseup');this.inherited(arguments);},show:function(){this.inherited(arguments);dojo.style(this.domNode,'display','');},hide:function(){this.inherited(arguments);dojo.style(this.domNode,'display','none');},_setup:function(){var $0=this.domNode;if(!!this.titleBar&&this.draggable){var $4={};$4.handle=this.titleBar;$4.timeout=0;this._moveable=(dojo.isIE===6)?new dojo.dnd.TimedMoveable($0,$4):new dojo.dnd.Moveable($0,$4);dojo.subscribe('/dnd/move/stop',ss.Delegate.create(this,this._endDrag));}else{dojo.addClass($0,'dijitDialogFixed');}var $1={};$1['id']=this.id+'_underlay';$1['class']=dojo.map(this.$3_3(),function($p1_0){
return $p1_0+'_underlay';}).join(' ');this._underlay=new tableau.base.widget.DialogUnderlay($1);var $2=this._underlay;var $3={};$3.node=$0;$3.duration=this.duration;$3.onBegin=ss.Delegate.create($2,$2.show);this._fadeIn=dojo.fadeIn($3);$3={};$3.node=$0;$3.duration=this.duration;$3.onEnd=function(){
$0.style.visibility='hidden';$0.style.top='-9999px';$2.hide();};this._fadeOut=dojo.fadeOut($3);},uninitialize:function(){if(!!this.$3_0){this.$3_0.destroyRecursive();}if(!!this.$3_1){this.$3_1.destroyRecursive();}this.$3_0=this.$3_1=null;this.inherited(arguments);},_position:function(){if(!dojo.hasClass(dojo.body(),'dojoMove')){var $0=this.domNode;var $1=tabBootstrap.ViewerBootstrap.get_instance().getViewport();var $2=this._relativePosition;var $3=(ss.isValue($2))?null:dojo.marginBox($0);var $4=0;var $5=0;dojo.style($0,{left:Math.floor($4+((ss.isValue($2))?$2.l:($1.w-$3.w)/2))+'px',top:Math.floor($5+((ss.isValue($2))?$2.t:($1.h-$3.h)/2))+'px'});}},onHide:function(){this.inherited(arguments);window.setTimeout(ss.Delegate.create(this,this.destroyRecursive),500);},$3_2:function($p0){return $p0;},$3_3:function(){return ((this)['class']).split(new RegExp('\\s'));},$3_4:function($p0){this.$3_6(true,$p0);},$3_5:function($p0){this.$3_6(false,$p0);},$3_6:function($p0,$p1){dojo.stopEvent($p1);this.hide();if($p0){if(ss.isValue(this.onYes)){this.onYes();}}else{if(ss.isValue(this.onNo)){this.onNo();}}}}
tab.FilteringSearchWidget=function(r){this.templateString="<div class='Search FilteringSearch'>"+"<div class='SearchBox' dojoAttachPoint='domQuerySection'>"+"<textarea rows='1' class='QueryBox' spellcheck='false'"+"dojoAttachPoint='domQueryBox'"+"dojoAttachEvent='onkeydown:onQueryBoxKeyDown,onclick:focusQueryBox,onfocus:focusQueryBox,onblur:blurQueryBox'></textarea>"+"<span class='wcSearchX' title='${XBUTTON_CLOSE_TOOLTIP}'"+"dojoAttachPoint='domXButton'"+"dojoAttachEvent='onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+'</div>'+'</div>';this.$1_4=0;tab.FilteringSearchWidget.initializeBase(this);}
tab.FilteringSearchWidget.prototype={domQueryBox:null,domSearchButton:null,domSearchBusyImg:null,$1_1:100,$1_2:null,get_noMatchHtml:function(){return this.NO_MATCHES;},get_$1_5:function(){return this.get_qf();},setStyle:function(s){this.$1_4=s;if(this.$1_4===1){dojo.addClass(this.domNode,'FilteringDropdown');dojo.addClass(this.domNode,'SearchCleared');}else if(this.$1_4===2){dojo.addClass(this.domNode,'FilteringInline');}},get_applyDelay:function(){return 0;},startupAndAppendTo:function(container){container.append(this.domNode);this.startupNoAppend();},startupNoAppend:function(){this.startup();},layout:function(listHeight){},hideUI:function(){dojo.style(this.domNode,'display','none');tab.FilteringSearchWidget.callBaseMethod(this, 'hideUI');},showUI:function(){tab.FilteringSearchWidget.callBaseMethod(this, 'showUI');this.focusQueryBox();},focusQueryBox:function(){this.domQueryBox.focus();},blurQueryBox:function(){this.domQueryBox.blur();},getQuery:function(){return this.domQueryBox.value;},setQuery:function(value){this.domQueryBox.value=value;},onXButtonClick:function(evt){if(this.$1_4===1){this.clearSearch();dojo.removeClass(this.get_domXButton(),'Hover');}else{tab.FilteringSearchWidget.callBaseMethod(this, 'onXButtonClick',[evt]);}},updateSearch:function(){if(this.get_isVisible()){this.searchWithQuery(this.getQuery());}},searchWithQuery:function(query){if(query.length<=0){this.clearSearch();}else if(this.get_qf().get_oFilter().isTiled){this.doRemoteSearch(query,true);}else{this.$1_7(this.doCategoricalSearch(query));}},doRemoteSearch:function(query,shouldGetIndex){this.doAjaxRemoteSearch(query,this.$1_1,shouldGetIndex,ss.Delegate.create(this,this.$1_7),ss.Delegate.create(this,this.$1_9));},getOnQueryBoxKeyDownBehavior:function(keyEvent){var $0;$0=this.inherited(arguments);switch(keyEvent.keyCode){case dojo.keys.ESCAPE:if(dojo.isFF){$0.functionToCall=ss.Delegate.create(this,this.onXButtonClick);}break;case dojo.keys.ENTER:$0.stopEvent=true;$0.functionToCall=ss.Delegate.create(this,this.$1_6);break;}return $0;},clearSearch:function(preserveQueryBoxText,noFocus){if(this.resultCount===tab.SearchWidgetBase.noSearchPerformed){return;}dojo.addClass(this.domNode,'SearchCleared');tab.FilteringSearchWidget.callBaseMethod(this, 'clearSearch',[preserveQueryBoxText,noFocus]);this.get_$1_5().filterBySearchResults(null);this.resultCount=tab.SearchWidgetBase.noSearchPerformed;},handleNonCommandKeyDown:function(evt){var $0=500;dojo.removeClass(this.domNode,'SearchCleared');tab.FilteringSearchWidget.callBaseMethod(this, 'handleNonCommandKeyDown',[evt]);switch(this.domQueryBox.value.length){case 1:$0=Math.round($0*1.5);break;case 2:$0=Math.round($0*1.25);break;}if(!!this.$1_2){window.clearTimeout(this.$1_2);this.$1_2=null;}this.$1_2=window.setTimeout(ss.Delegate.create(this,this.updateSearch),$0);},$1_6:function($p0){this.updateSearch();},$1_7:function($p0){if(ss.isValue($p0.length)){this.resultCount=$p0.length;}else if(ss.isValue($p0.tuples)){this.resultCount=$p0.tuples.length;$p0=this.$1_8($p0);}this.get_$1_5().filterBySearchResults($p0);},$1_8:function($p0){var $0=this.makeUniqueSearchItemIdPrefix();var $1=$p0.tuples;var $2=$p0.indices;var $3=[];for(var $4=0;$4<$1.length;$4++){$3.push(tableau.FilterItem.getSearchResultHtml(this.get_qf(),$1[$4],$0,$2[$4]));}return $3;},$1_9:function($p0){}}
tab.OverlayImage=function(parent,imageSource){tab.OverlayImage.initializeBase(this,[$("<img class='tab-overlayImage'/>")]);this.$1_1=$(parent);this.get_element().bind('load',ss.Delegate.create(this,function(){
this.$1_3();}));this.get_element().attr('src',imageSource);}
tab.OverlayImage.prototype={$1_1:null,$1_2:null,get_location:function(){return tab.$create_Point(parseInt(this.$1_2.x),parseInt(this.$1_2.y));},set_location:function(value){this.$1_2=tab.$create_PointF(value.x,value.y);this.$1_3();return value;},clone:function(){return new tab.OverlayImage(this.$1_1.get(0),this.get_element().attr('src'));},show:function(showLocation){this.$1_2=showLocation;this.$1_3();},hide:function(){this.get_element().detach();},$1_3:function(){if(this.get_element().parent()[0]!==this.$1_1[0]){this.$1_1.append(this.get_element());}if(this.$1_2==null){return;}var $0=this.$1_2.y;var $1=this.$1_2.x;this.get_element().css({top:$0+'px',left:$1+'px'});}}
tab.OverlayPanel=function(parentElt,isVisibleToUser){tab.OverlayPanel.initializeBase(this,[$('<div class="tab-overlay-panel"></div>')]);if(ss.isValue(parentElt)){this.$1_1=parentElt;this.get_element().css('position','absolute');}else{this.get_element().css('position','fixed');}this.$1_2=(isVisibleToUser)?0.5:0.01;}
tab.OverlayPanel.prototype={$1_1:null,$1_2:0,show:function(){if(ss.isNullOrUndefined(this.$1_1)){this.get_element().appendTo(document.body);}else{this.get_element().appendTo(this.$1_1);}this.get_element().css({opacity:'0.01',filter:'alpha(opacity=01)',display:''});this.get_element().fadeTo('fast',this.$1_2);},hide:function(){this.get_element().fadeOut('fast',ss.Delegate.create(this,this.$1_3));},bind:function(eventName,handler){this.get_element().bind(eventName,handler);},$1_3:function(){this.get_element().remove();}}
tab.ParameterControl=function(oProps){this.format={};this.$1_2={};tab.ParameterControl.initializeBase(this);this.session=oProps.session;this.$1_1=oProps.field;this.$1_5=oProps.titleH;this.$1_6=oProps.titleW;this.$1_7=oProps.titleHTML;this.format=oProps.format;this.backgroundColor=oProps.backgroundColor;this.$1_2=oProps.attributes;this.$1_3=oProps.viewModel;}
tab.ParameterControl.prototype={$1_0:true,domBox:null,domControls:null,getSID:null,session:null,$1_1:'',stateId:0,$1_3:null,ui:null,domTitleBar:null,domContent:null,$1_4:null,$1_5:0,$1_6:0,$1_7:null,backgroundColor:null,get_model:function(){return this.$1_3.get_parameterCtrlModel().get_parameterCtrlPresModel();},get_domBoxElement:function(){return this.domBox;},get_backgroundColor:function(){return this.backgroundColor;},postCreate:function(){this.getSID=ss.Delegate.create(this,function(){
return this.stateId;});this.$1_4=[];this.$1_8();},destroy:function(preserveDom){dojo.forEach(this.$1_4,dojo.unsubscribe);if(ss.isValue(this.ui)){this.ui.destroy();}this.domContent.innerHTML='';this.inherited(arguments);},getTypeInParamClass:function(){return tableau.base.widget.paramui.TypeIn;},getTypeInDateFieldParamClass:function(){return tableau.base.widget.paramui.TypeInDateField;},getCompactParamClass:function(){return tableau.base.widget.paramui.Compact;},getListParamClass:function(){return tableau.base.widget.paramui.List;},getSliderParamClass:function(){return tableau.base.widget.paramui.Slider;},$1_8:function(){var $0=null;if(ss.isNullOrUndefined(this.get_model())||ss.isNullOrUndefined(this.get_model().amp)||ss.isNullOrUndefined(this.$1_2)){return;}dojo.attr(this.domTitleBar,'title',(this.get_model().amp).title);switch(this.$1_C()){case 'type_in':$0=this.getTypeInParamClass();break;case 'compact':$0=this.getCompactParamClass();break;case 'list':$0=this.getListParamClass();break;case 'slider':$0=this.getSliderParamClass();break;case 'datetime':$0=this.getTypeInDateFieldParamClass();break;}if($0==null){return;}if(ss.isValue(this.ui)){this.ui.destroy();this.ui=null;}this.ui=new $0(this,this.domContent,this.$1_1,this.$1_2,this.$1_3);this.ui.instantiate(false);this.$1_9();tab.WidgetStyle.applyFormatting(this.domNode,this.get_model().ays,this.get_backgroundColor(),this.get_model().ab0);},$1_9:function(){this.domTitleBar.innerHTML=this.$1_7;tab.FormattingConverters.cleanUpFontFamilyStyles($(this.domTitleBar));$(this.domTitleBar).find('div').css({'text-overflow':'ellipsis',overflow:'hidden'});},updateProperties:function(oProps){this.session=oProps.session;this.$1_1=oProps.field;this.$1_5=oProps.titleH;this.$1_6=oProps.titleW;this.$1_7=oProps.titleHTML;this.format=oProps.format;this.backgroundColor=oProps.backgroundColor;this.$1_2=oProps.attributes;this.$1_9();this.$1_A();this.$1_B();this.layout();},$1_A:function(){tab.WidgetStyle.applyFormatting(this.domNode,this.get_model().ays,this.get_backgroundColor(),this.get_model().ab0);},$1_B:function(){if(ss.isValue(this.ui)){this.ui.refreshState(this.$1_2);}},$1_C:function(){return this.$1_2['mode'];},$1_D:function(){return false;},getTitleOffset:function(){return (dojo.hasClass(this.domNode,'PCInlineTitle'))?0:dojo.marginBox(this.domTitleBar).h;},layout:function(){if(ss.isNullOrUndefined(this.domNode.parentNode)||ss.isNullOrUndefined(this.ui)){return;}dojo.removeClass(this.domNode,'PCInlineTitle');var $0=tab.$create_DojoCoords();if(this.$1_5>0){$0.h=this.$1_5;dojo.marginBox(this.domTitleBar,{h:$0.h});}if(this.$1_6>0){$0.w=this.$1_6;dojo.marginBox(this.domTitleBar,{w:$0.w});}tableau.util.setupTitleEllipsis($(this.domTitleBar));var $1=dojo.contentBox(this.domNode);var $2=tab.$create_Size($1.w,$1.h);if(!this.$1_D()){if(this.$1_6>0){$2.w=$1.w-$0.w;dojo.style(this.domTitleBar,'float','left');dojo.style(this.domContent,'float','left');dojo.addClass(this.domNode,'PCInlineTitle');}else{$2.h=$1.h-$0.h;dojo.style(this.domTitleBar,'float','none');dojo.style(this.domContent,'float','none');}}this.ui.layout($2);}}
tab.ParamUIBase=function(parent,div,field,attrs,viewModel){tab.ParamUIBase.initializeBase(this);this.disposables=new tab.DisposableHolder();this.parent=parent;this.div=div;this.field=field;this.attributes=attrs;this.parameterViewModel=viewModel;this.newValInFlight=null;}
tab.ParamUIBase.prototype={disposables:null,parameterViewModel:null,parent:null,field:null,newValInFlight:null,div:null,attributes:null,get_legacyModel:function(){return this.parameterViewModel.get_parameterCtrlModel().get_parameterCtrlJsonPresModel();},get_model:function(){return this.parameterViewModel.get_parameterCtrlModel().get_parameterCtrlPresModel();},refreshState:function(attrs){this.attributes=attrs;this.setNewState();},dispose:function(){this.disposables.dispose();},destroy:function(preserveDom){this.dispose();this.div.innerHTML='';},layout:function(contentSize){dojo.marginBox(this.div,contentSize);},formatTuple:function($p0){return tableau.format.formatTupleDisplayName($p0,true,null);}}
tab.ParamUITypeIn=function(parent,div,field,attrs,parameterViewModel){tab.ParamUITypeIn.initializeBase(this,[parent,div,field,attrs,parameterViewModel]);}
tab.ParamUITypeIn.prototype={widget:null,getWidgetClass:function(){return tableau.base.widget.ui.TypeIn;},instantiate:function(isUpdate){var $0=this.getWidgetClass();this.widget=new $0(this.div,ss.Delegate.create(this,this.$1_1),'TypeIn');this.widget.instantiate(this.get_legacyModel().alias,this.field,this.get_legacyModel().value,this.get_legacyModel().min,this.get_legacyModel().max,this.get_legacyModel().format,this.get_legacyModel().date_format,this.get_legacyModel().editing_format,this.get_model().xv);if(this.get_legacyModel().is_list_domain){this.widget.$11(this.get_legacyModel().domain,ss.Delegate.create(this.parent.session,this.parent.session.getAutocompleteInfo));}},setNewState:function(){this.widget.setNewState(this.get_legacyModel().alias,this.get_legacyModel().domain,this.get_legacyModel().value,this.get_legacyModel().min,this.get_legacyModel().max);},destroy:function(){if(ss.isValue(this.widget)){this.widget.destroy();}this.inherited(arguments);},layout:function(contentSize){this.inherited(arguments);this.widget.layout();},$1_1:function($p0){if(this.newValInFlight===$p0){return;}this.newValInFlight=$p0;tab.ParameterServerCommands.setParameterValue(this.field,$p0,false,ss.Delegate.create(this,this.$1_3),ss.Delegate.create(this,this.$1_2));},$1_2:function($p0){this.widget.queryBox.value=this.get_legacyModel().alias;this.newValInFlight=null;this.setNewState();},$1_3:function($p0){this.newValInFlight=null;_.defer(ss.Delegate.create(this,this.setNewState));},updateCallback:function($p0){if(!!$p0.success){if(ss.isValue($p0.newval)){this.widget.queryBox.value=$p0.newval;this.get_legacyModel().alias=$p0.newval;this.widget.$2=$p0.newval;if(ss.isValue($p0.newdatavalue)){this.get_legacyModel().value=$p0.newdatavalue;this.widget.$3=$p0.newdatavalue;}}}else{this.widget.queryBox.value=this.get_legacyModel().alias;}}}
tab.ParamUITypeInDateField=function(parent,div,field,attrs,parameterViewModel){tab.ParamUITypeInDateField.initializeBase(this,[parent,div,field,attrs,parameterViewModel]);}
tab.ParamUITypeInDateField.prototype={getWidgetClass:function(){return tableau.base.widget.ui.TypeInDateField;}}
tab.ParamUICompact=function(parent,div,field,attrs,parameterViewModel){tab.ParamUICompact.initializeBase(this,[parent,div,field,attrs,parameterViewModel]);this.$1_0=new tab.ComboBoxViewModel();this.$1_0.set_menuTheme(1);this.$1_0.set_formattingStyle(new tab.FormattingStyleInfo(this.parent.get_model().ays,this.parent.get_backgroundColor(),this.parent.get_model().ab0));this.$1_0.set_menuStyleClass(this.parent.domNode.id+'_menu');this.$1_0.add_selectedItemChanged(ss.Delegate.create(this,this.$1_2));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_selectedItemChanged(ss.Delegate.create(this,this.$1_2));})));var $0=this.get_legacyModel().domain;var $1=$0.length;for(var $2=0;$2<$1;$2++){var $3=new tab.ComboBoxItem(null,$0[$2],$2,'');this.$1_0.addItem($3);if(this.get_legacyModel().alias===$0[$2]){this.$1_0.set_selectedItem($3);}}this.$1_1=spiff.ObjectRegistry.newView(tab.ComboBoxView,this.$1_0);this.$1_1.addToDom($(this.div));this.disposables.add(this.$1_0);this.disposables.add(this.$1_1);}
tab.ParamUICompact.prototype={$1_0:null,$1_1:null,instantiate:function(isUpdate){},setNewState:function(){if(this.get_legacyModel().alias!==this.$1_0.get_selectedItem().get_name()){var $enum1=ss.IEnumerator.getEnumerator(this.$1_0.get_items());while($enum1.moveNext()){var $0=$enum1.current;if($0.get_name()===this.get_legacyModel().alias){this.$1_0.set_selectedItem($0);break;}}}},$1_2:function($p0){var $0=$p0.get_data();var $1=this.get_legacyModel().domain;if($0>=$1.length||$0<0||tab.MiscUtil.isNullOrEmpty($1)){return;}if($1[$0]===this.get_legacyModel().alias){return;}var $2=$1[$0];tab.ParameterServerCommands.setParameterValue(this.field,$2);},layout:function(contentSize){this.inherited(arguments);}}
tab.ParamUIList=function(parent,div,field,attrs,parameterViewModel){tab.ParamUIList.initializeBase(this,[parent,div,field,attrs,parameterViewModel]);}
tab.ParamUIList.prototype={instantiate:function(isUpdate){var $0=tableau.FilterItem.getRadioHtml;var $1=this.field;var $2=this.get_legacyModel().alias;var $3=[];var $4=this.get_legacyModel().domain;var $5=$4.length;for(var $6=0;$6<$5;$6++){var $7=([$1,'_',$6.toString()]).join('');$3.add($0($7,$1,$4[$6],$2===$4[$6]));}this.div.innerHTML=$3.join('');$(this.div).addClass('tab-ctrl-formatted-text');if(!isUpdate){this.disposables.add(spiff.EventUtil.bindWithDispose($(this.div),'click',ss.Delegate.create(this,this.$1_0)));}},setNewState:function(){this.instantiate(true);},$1_0:function($p0){var $0=$p0.target.tagName.toLowerCase();if($0!=='input'){return;}var $1=$($p0.target);var $2=$1.parents('.FIItem');if($2.length>0){var $3=tableau.FilterItem.getIndex($2.get(0));var $4=this.get_legacyModel().domain[$3];tab.ParameterServerCommands.setParameterValue(this.field,$4);}}}
tab.ParamUISlider=function(parent,div,field,attrs,parameterViewModel){tab.ParamUISlider.initializeBase(this,[parent,div,field,attrs,parameterViewModel]);}
tab.ParamUISlider.prototype={slider:null,instantiate:function(isUpdate){var $0=this.get_legacyModel();var $1=this.get_legacyModel().domain;var $2=this.get_legacyModel().alias;var $3=1;var $4=1;this.slider=new tableau.base.widget.ui.Slider(this.div,this.attributes,false,ss.Delegate.create(this,this.doUpdateViz),ss.Delegate.create(this.parent,this.parent.getTitleOffset),ss.Delegate.create(this,this.getCurrentText),null,null,false);if($0.fake_continuous){this.attributes['show-step-btns']='false';this.attributes['show-ticks']='false';}var $5=ss.Delegate.create(this,function(){
this.slider.instantiateFromDomain($1,$2);});var $6=ss.Delegate.create(this,function(){
$3=Number.POSITIVE_INFINITY;$4=this.percentageOfRange(this.modelValueOrRangeMin())*100;this.attributes['show-step-btns']='false';this.slider.instantiate($3,$4,$2);});var $7=ss.Delegate.create(this,function(){
$3=this.numPeriods();$4=this.indexInDateRange(this.modelValueOrRangeMin());$2=this.formatValue(this.modelValueOrRangeMin());this.slider.instantiate($3,$4,$2);});var $8=ss.Delegate.create(this,function(){
$3=this.sizeOfDiscreteRange();$4=this.indexInRange(this.modelValueOrRangeMin());this.slider.instantiate($3,$4,$2);});this.behaviorPicker($5,$6,$7,$8);},behaviorPicker:function(list,continuousRange,discreteDateRange,discreteOtherRange){if(this.$1_0()){return list();}else if(this.$1_1()){if(this.$1_2()){return continuousRange();}else{if(this.$1_3()){return discreteDateRange();}else{return discreteOtherRange();}}}return null;},setNewState:function(){var $0=this.get_legacyModel().domain;var $1=this.get_legacyModel().alias;var $2=function(){
var $1_0=$0.length;for(var $1_1=0;$1_1<$1_0;$1_1++){if($0[$1_1]===$1){return new ss.Tuple($1,$1_1);}}return null;};var $3=ss.Delegate.create(this,function(){
return new ss.Tuple($1,(this.percentageOfRange(this.modelValueOrRangeMin())*100));});var $4=ss.Delegate.create(this,function(){
return new ss.Tuple(this.formatValue(this.modelValueOrRangeMin()),this.indexInDateRange(this.modelValueOrRangeMin()));});var $5=ss.Delegate.create(this,function(){
return new ss.Tuple($1,this.indexInRange(this.modelValueOrRangeMin()));});var $6=this.behaviorPicker($2,$3,$4,$5);this.slider.setNewState($6.second);this.slider.updateReadout($6.first);},refreshSliderMarksForIE:function(){this.slider.refreshSliderMarksForIE();},doUpdateViz:function(indexVal){var $0=ss.Delegate.create(this,function(){
return new ss.Tuple(this.get_legacyModel().domain[indexVal],null);});var $1=ss.Delegate.create(this,function(){
return new ss.Tuple(null,this.$1_D(this.$1_9(indexVal)));});var $2=ss.Delegate.create(this,function(){
return new ss.Tuple(null,this.$1_D(this.$1_B(indexVal)));});var $3=ss.Delegate.create(this,function(){
return new ss.Tuple(null,this.$1_D(this.$1_A(indexVal)));});var $4=this.behaviorPicker($0,$1,$2,$3);var $5=null;if(ss.isValue($4.first)){$5=$4.first;}else if(ss.isValue($4.second)){$5=tableau.format.formatDataValue($4.second);}tab.ParameterServerCommands.setParameterValue(this.field,$5,true);},updateCallback:function($p0){if(!!$p0.success){if(ss.isValue($p0.newval)){this.slider.updateReadout(this.formatValue(parseFloat($p0.newval)));}}},destroy:function(){if(ss.isValue(this.slider)&&(typeof(this.slider.destroy)==='function')){this.slider.destroy();}this.inherited(arguments);},layout:function(contentSize){this.inherited(arguments);if(ss.isValue(this.slider)&&(typeof(this.slider.layout)==='function')){this.slider.layout();}},getCurrentText:function(indexVal){var $0=ss.Delegate.create(this,function(){
return this.get_legacyModel().domain[indexVal];});var $1=ss.Delegate.create(this,function(){
return this.formatValue(this.$1_9(indexVal));});var $2=ss.Delegate.create(this,function(){
return this.formatValue(this.$1_B(indexVal));});var $3=ss.Delegate.create(this,function(){
return this.formatValue(this.$1_A(indexVal));});return this.behaviorPicker($0,$1,$2,$3);},$1_0:function(){return ss.isValue(this.get_legacyModel().domain);},$1_1:function(){return (ss.isValue(this.get_legacyModel().granularity)&&ss.isValue(this.get_legacyModel().min)&&ss.isValue(this.get_legacyModel().max));},$1_2:function(){return this.get_legacyModel().granularity.s===tableau.types.DataSpecial.DS_NULL;},$1_3:function(){return ss.isValue(this.get_legacyModel().date_period_type);},$1_4:function(){return this.get_legacyModel().min.v;},$1_5:function(){return this.get_legacyModel().max.v;},modelValueOrRangeMin:function(){return (ss.isValue(this.get_legacyModel().value.v))?this.get_legacyModel().value.v:this.$1_4();},$1_6:function(){return this.get_legacyModel().granularity.v;},$1_7:function(){return this.get_legacyModel().date_period_type;},numPeriods:function(){return this.get_legacyModel().num_periods;},$1_8:function(){return this.$1_5()-this.$1_4();},percentageOfRange:function(val){return (val-this.$1_4())/this.$1_8();},$1_9:function($p0){return ($p0/100*this.$1_8())+this.$1_4();},sizeOfDiscreteRange:function(){return Math.floor(this.$1_8()/this.$1_6())+1;},indexInRange:function(val){return Math.floor((val-this.$1_4())/this.$1_6());},$1_A:function($p0){return ($p0*this.$1_6())+this.$1_4();},indexInDateRange:function(val){return Math.round((val-this.$1_4())/(this.$1_6()*this.$1_C()));},$1_B:function($p0){$p0=$p0*this.$1_6();var $0=tab.DateUtil.adjustDateByPeriodInUTC(new Date(tableau.types.JsDateFromOleDate(this.$1_4())),this.$1_7(),$p0);return Math.min(tableau.types.OleDateFromJsDate($0.getTime()),this.$1_5());},$1_C:function(){switch(this.$1_7()){case 'year':return 365.25;case 'quarter':return 365.25/4;case 'month':return 365.25/12;case 'week':return 7;case 'day':return 1;case 'hour':return 1/24;case 'minute':return 1/(24*60);case 'second':return 1/(24*60*60);}return 0;},formatValue:function(val){var $0=(this.get_legacyModel().date_format||this.get_legacyModel().format);return tableau.format.formatDataValue(this.$1_D(val),null,$0,null,tab.DateTimeAutoFormatMode.showFullDateTime);},$1_D:function($p0){return tab.$create_DataValueStruct(this.get_legacyModel().min.t,$p0.toString());}}
tab.PendingChangesManager=function(parent,domainActualSize,exclusive,isAll){this.parent=parent;this.domainActualSize=domainActualSize;this.$0=exclusive;this.$1=isAll;this.resetPendingChanges();}
tab.PendingChangesManager.prototype={domainActualSize:0,$0:false,$1:false,$2:null,$3:false,$4:false,$5:null,$6:null,parent:null,add_onPendingChanges:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_onPendingChanges:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,add_onNoPendingChanges:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_onNoPendingChanges:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,get_allItemCheckState:function(){return this.$6;},set_allItemCheckState:function(value){this.$6=value;return value;},get_pendingChangelist:function(){return this.$2;},set_pendingChangelist:function(value){this.$2=value;return value;},resetFilterInfo:function(domainSize,exclude,isAll){this.domainActualSize=domainSize;this.$0=exclude;this.$1=isAll;},resetPendingChanges:function(){this.$2=new tab.Changelist();this.$5=[];this.$3=false;this.$4=false;this.$6=null;this.$B();},processChanges:function(changelist){this.get_pendingChangelist().appendChangelist(changelist);this.$9();},processAll:function(select){this.$5=[];this.$3=true;this.$4=(this.$0)?!select:select;this.$2=new tab.Changelist();var $0=new tab.RawChange();$0.setRange(new tab.IntegerRange(0,this.domainActualSize),this.$4);this.get_pendingChangelist().addChange($0);this.$9();},isSelectAll:function(){return this.$3&&!this.$5.length&&((this.$0)?!this.$4:this.$4);},isDeSelectAll:function(){return this.$3&&!this.$5.length&&((this.$0)?this.$4:!this.$4);},handleAllItemClicked:function(isChecked){var $0=(this.$0)?!isChecked:isChecked;this.set_allItemCheckState(isChecked);var $1=0;while(this.hasItemAtIndex($1)){if($0){if(!this.isChecked($1)){this.togglePendingCss($1);}this.setChecked($1,true);}else{if(this.isChecked($1)){this.togglePendingCss($1);}this.setChecked($1,false);}$1++;}this.$3=true;this.$4=$0;this.$5=[];},handleItemClicked:function(index,node){if(index===-1){this.handleAllItemClicked(this.isChecked(index));return;}if(!this.isChecked(index,node)){if(this.parent.shouldUseAllItem()){this.set_allItemCheckState(false);if(this.hasAllItem()){this.setAllItemChecked(false);if(this.$0){var $0=true;var $1=0;while($0&&this.hasItemAtIndex($1)){if(this.isChecked($1)){$0=false;}$1++;}this.setAllItemChecked($0);}}}}else{if(this.hasAllItem()){var $2=true;var $3=0;while($2&&this.hasItemAtIndex($3)){if(!this.isChecked($3)){$2=false;}$3++;}this.setAllItemChecked($2);}}this.togglePendingCss(index,node);this.$C(index);},hasAllItem:function(){var $0=this.parent.fetchAllItem();return ss.isValue($0)&&tableau.FilterItem.isAllItem($0);},hasItemAtIndex:function(index){return index<this.domainActualSize&&ss.isValue(this.parent.fetchChildNodeByIndex(index));},setAllItemChecked:function(isChecked){var $0=this.parent.fetchAllItem();if(ss.isValue($0)){tableau.FilterItem.setChecked($0,isChecked);this.set_allItemCheckState(isChecked);}},togglePendingCss:function(index,node){var $0=(ss.isValue(node))?node:this.parent.fetchChildNodeByIndex(index);if(ss.isValue($0)){tableau.FilterItem.togglePendingState($0);}},setChecked:function(index,isChecked){var $0=this.parent.fetchChildNodeByIndex(index);if(ss.isValue($0)){tableau.FilterItem.setChecked($0,isChecked);}},isChecked:function(index,node){var $0;if(index===-1){$0=this.parent.fetchAllItem();}else{$0=(ss.isValue(node))?node:this.parent.fetchChildNodeByIndex(index);}return tableau.FilterItem.isChecked($0);},isPending:function(t,index){if(this.$3){var $0=(this.$1&&!this.$0)?true:t.s;if(this.$5.contains(index)){return $0===this.$4;}else{return $0!==this.$4;}}else{return this.$5.contains(index);}},$9:function(){if(this.$3||this.$5.length>0){this.$A();}else{this.$B();}},$A:function(){if(ss.isValue(this.$7)){this.$7();}},$B:function(){if(ss.isValue(this.$8)){this.$8();}},$C:function($p0){if(this.$5.contains($p0)){this.$5.remove($p0);}else{this.$5.add($p0);}}}
tab.RelativeDateFilter=function(props){this.templateString="<div class='RelativeDateFilter'>"+"<div class='RelativeDateFilterBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='FilterTitle' dojoAttachPoint='domTitleBar'></div>"+"<div dojoType='dijit.form.Button' class='RDFButton RDFMenuButton' name='type' dojoAttachPoint='menuButton'"+"dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'></div></div>"+"<div dojoType='dijit.form.DropDownButton' dojoAttachPoint='domDropdownButton'>"+"<span class='RDText'>date description</span>"+"<div dojoType='dijit.TooltipDialog' dojoAttachPoint='domTooltipDialog'>"+"<div class='RelativeDateFilterDialog' dojoAttachPoint='domDialog'>"+"<div class='RangeButtonsBar'>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPYear'"+"dojoAttachPoint='buttonYear' name='year'>Years</div>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPQuarter'"+"dojoAttachPoint='buttonQuarter' name='quarter'>Quarters</div>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPMonth'"+"dojoAttachPoint='buttonMonth' name='month'>Months</div>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPWeek'"+"dojoAttachPoint='buttonWeek' name='week'>Weeks</div>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPDay'"+"dojoAttachPoint='buttonDay' name='day'>Days</div>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPHour'"+"dojoAttachPoint='buttonHour' name='hour'>Hours</div>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPMinute'"+"dojoAttachPoint='buttonMinute' name='minute'>Minutes</div>"+'</div>'+"<div class='vertSpacer topHR'></div>"+"<div class='radioLine'>"+"<div class='column1'>"+"<input class='rradio' type='radio' name='radio-${field}' value='last'"+"dojoAttachPoint='radioLast' dojoAttachEvent='onclick:setRLast'></input>"+"<span class='rlabel' dojoAttachPoint='textLast' dojoAttachEvent='onclick:setRLast'></span>"+'</div>'+"<div class='column2'>"+"<input class='rradio' type='radio' name='radio-${field}' value='lastn'"+"dojoAttachPoint='radioLastn' dojoAttachEvent='onclick:setRLastn'></input>"+"<span class='rlabel alignLN' dojoAttachPoint='textLastn1' dojoAttachEvent='onclick:setRLastn'></span>"+"<input class='rtext' type='text' size='2' dojoAttachPoint='inputLastn' value='3'"+"dojoAttachEvent='onkeyup:onTypingLast'></input>"+"<span class='spinner' dojoAttachPoint='lastSpinner'>"+"<div class='spinnerElement spinnerUp' dojoAttachPoint='lastUp'"+"dojoAttachEvent='onmouseover:overLastUp,onmouseout:outLastUp,onclick:upLast'></div>"+"<div class='spinnerElement spinnerDown' dojoAttachPoint='lastDown'"+"dojoAttachEvent='onmouseover:overLastDown,onmouseout:outLastDown,onclick:downLast'></div>"+'</span>'+"<span class='rlabel' dojoAttachPoint='textLastn2' dojoAttachEvent='onclick:setRLastn'></span>"+'</div>'+'</div>'+"<div class='radioLine'>"+"<div class='column1'>"+"<input class='rradio' type='radio' name='radio-${field}' value='curr'"+"dojoAttachPoint='radioCurr' dojoAttachEvent='onclick:setRCurr'></input>"+"<span class='rlabel' dojoAttachPoint='textCurr' dojoAttachEvent='onclick:setRCurr'></span>"+'</div>'+"<div class='column2'>"+"<input class='rradio' type='radio' name='radio-${field}' value='nextn'"+"dojoAttachPoint='radioNextn' dojoAttachEvent='onclick:setRNextn'></input>"+"<span class='rlabel alignLN' dojoAttachPoint='textNextn1' dojoAttachEvent='onclick:setRNextn'></span>"+"<input class='rtext' type='text' size='2' dojoAttachPoint='inputNextn' value='3'"+"dojoAttachEvent='onkeyup:onTypingNext'></input>"+"<span class='spinner' dojoAttachPoint='nextSpinner'>"+"<div class='spinnerElement spinnerUp' dojoAttachPoint='nextUp'"+"dojoAttachEvent='onmouseover:overNextUp,onmouseout:outNextUp,onclick:upNext'></div>"+"<div class='spinnerElement spinnerDown' dojoAttachPoint='nextDown'"+"dojoAttachEvent='onmouseover:overNextDown,onmouseout:outNextDown,onclick:downNext'></div>"+'</span>'+"<span class='rlabel' dojoAttachPoint='textNextn2' dojoAttachEvent='onclick:setRNextn'></span>"+'</div>'+'</div>'+"<div class='radioline'>"+"<div class='column1'>"+"<input class='rradio' type='radio' name='radio-${field}' value='next'"+"dojoAttachPoint='radioNext' dojoAttachEvent='onclick:setRNext'></input>"+"<span class='rlabel' dojoAttachPoint='textNext' dojoAttachEvent='onclick:setRNext'></span>"+'</div>'+"<div class='column2'>"+"<input class='rradio' type='radio' name='radio-${field}' value='todate'"+"dojoAttachPoint='radioTodate' dojoAttachEvent='onclick:setRTodate'></input>"+"<span class='rlabel' dojoAttachPoint='textTodate' dojoAttachEvent='onclick:setRTodate'></span>"+'</div>'+'</div>'+"<div class='vertSpacer bottomHR'></div>"+"<div class='preview'>"+"<span dojoAttachPoint='domPreview'></span>"+'</div>'+'</div>'+'</div>'+'</div>'+'</div>'+'</div>';this.$1_3=new Array(0);this.$1_4=[];this.$1_7=new tab.DisposableHolder();tab.RelativeDateFilter.initializeBase(this);}
tab.RelativeDateFilter.get_anchoredDescriptions=function(){if(ss.isNullOrUndefined(tab.RelativeDateFilter.$1_8)){tab.RelativeDateFilter.$1_A();}return tab.RelativeDateFilter.$1_8;}
tab.RelativeDateFilter.get_nonAnchoredDescriptions=function(){if(ss.isNullOrUndefined(tab.RelativeDateFilter.$1_9)){tab.RelativeDateFilter.$1_A();}return tab.RelativeDateFilter.$1_9;}
tab.RelativeDateFilter.$1_A=function(){tab.RelativeDateFilter.$1_8={};tab.RelativeDateFilter.$1_9={};var $0=tab.Strings;var $1=tab.RelativeDateFilterPeriodType;var $2=tab.RelativeDateFilterRangeType;var $dict1=$1;for(var $key2 in $dict1){var $3={key:$key2,value:$dict1[$key2]};var $4={};var $5={};var $dict3=$2;for(var $key4 in $dict3){var $6={key:$key4,value:$dict3[$key4]};var $7=String.format('RelDateAnchored_{0}_{1}',$6.key,$3.key);$4[$6.key]=$0[$7];$7=String.format('RelDate_{0}_{1}',$6.key,$3.key);$5[$6.key]=$0[$7];}tab.RelativeDateFilter.$1_8[$3.key]=$4;tab.RelativeDateFilter.$1_9[$3.key]=$5;}}
tab.RelativeDateFilter.prototype={widgetsInTemplate:true,session:null,field:'',filterViewModel:null,stateId:0,rid:0,timestamp:0,titleH:0,titleW:0,layoutSession:null,getContextMenuCommands:null,showContextMenu:null,zid:0,domText:null,domDropdownButton:null,domDialog:null,buttonYear:null,buttonQuarter:null,buttonMonth:null,buttonWeek:null,buttonDay:null,buttonHour:null,buttonMinute:null,radioLast:null,radioCurr:null,radioNext:null,radioLastn:null,radioNextn:null,inputNextn:null,lastSpinner:null,nextSpinner:null,lastUp:null,lastDown:null,nextUp:null,nextDown:null,domNode:null,domTooltipDialog:null,menuButton:null,$1_5:'RDFButtonR',$1_6:'RDFButtonHide',getSID:null,attributes:null,requestSetAttributes:null,get_filterViewModel:function(){return this.filterViewModel;},postCreate:function(){if(this.filterViewModel.get_filterType()!=='RelativeDate'){}var $0=0;this.$1_D();this.getSID=ss.Delegate.create(this,function(){
return this.stateId;});if(ss.isValue(this.oFilter.fy)){this.fy=this.oFilter.fy-1;}if(ss.isValue(this.oFilter.start_of_week)){this.startOfWeek=this.oFilter.start_of_week;}this.timestamp=new Date().getTime();this.$1_4=[this.buttonYear,this.buttonQuarter,this.buttonMonth,this.buttonWeek,this.buttonDay];if(this.oFilter.noTime){dojo.style(this.buttonHour.domNode,'display','none');dojo.style(this.buttonMinute.domNode,'display','none');}else{this.$1_4.push(this.buttonHour);this.$1_4.push(this.buttonMinute);}this.connect(this.domTooltipDialog,'onOpen',ss.Delegate.create(this,this.$1_B));this.initFromState();var $1=ss.Delegate.create(this,function($p1_0,$p1_1){
if($p1_1){dojo.addClass($p1_0.domNode,this.$1_6);}else{$0+=1;dojo.addClass($p1_0.domNode,this.$1_5+$0);}});$1(this.menuButton,this.shouldHideContextMenu());$(this.menuButton.domNode).css('background-color',this.backgroundColor);},shouldHideContextMenu:function(){var $0=tab.CommandsPresModelWrapper.create(this.getContextMenuCommands());return this.hideEmptyTitlebar()||ss.isNullOrUndefined($0)||!$0.get_commandItems().length;},shouldHideDomainButton:function(){return true;},setTitleSize:function(newH,newW){this.titleH=newH;this.titleW=newW;},dispose:function(){this.$1_7.dispose();this.showContextMenu=null;},destroy:function(preserveDom){this.dispose();if(ss.isValue(this.domText)){this.domText.innerHTML='';}this.inherited(arguments);},layout:function(){this.updateTitleBar();dojo.removeClass(this.domNode,'RDFHorizontal');var $0=dojo.marginBox(this.domDialog);if(!ss.isValue($0)||!ss.isValue($0.w)||!$0.w){return;}var $1=dojo.marginBox(this.domTitleBar);this.resetTitleSize();if(this.titleH>0){$1.h=this.titleH;dojo.marginBox(this.domTitleBar,{h:$1.h});}if(this.titleW>0){$1.w=this.titleW;dojo.marginBox(this.domTitleBar,{w:$1.w});}tableau.util.setupTitleEllipsis($(this.domTitleBar));var $2=dojo.contentBox(this.domNode);var $3=$2.w-4;dojo.query('.dijitButtonNode',this.domDropdownButton.domNode).addClass('tab-ctrl-formatted-widget');dojo.query('.dijitButtonNode',this.domDropdownButton.domNode).addClass('tab-ctrl-formatted-darker-border-hover');dojo.query('.dijitButtonText',this.domDropdownButton.domNode).addClass('tab-ctrl-formatted-fixedsize');if(!this.hideEmptyTitlebar()&&this.titleW>0){dojo.addClass(this.domNode,'RDFHorizontal');dojo.style(this.domTitleBar,'float','left');dojo.style(this.domDropdownButton.domNode,'float','left');$3=$2.w-$1.w-6;}else{dojo.style(this.domTitleBar,'float','none');dojo.style(this.domDropdownButton.domNode,'float','none');}if($3>29){dojo.style(this.domDropdownButton.domNode,'width',$3+'px');dojo.style(this.domDropdownButton.domNode.firstChild,'width',($3-4)+'px');$3=$3-25;var $5=this.domDropdownButton.domNode.firstChild.firstChild.firstChild.childNodes[1];if(ss.isValue($5)){dojo.style($5,'width',$3+'px');}}var $4=Math.floor(($0.w-10)/this.$1_4.length);var $enum1=ss.IEnumerator.getEnumerator(this.$1_4);while($enum1.moveNext()){var $6=$enum1.current;dojo.style($6.titleNode,'width',($4-5)+'px');}},getMetrics:function(){var $0=dojo.marginBox(this.domNode);return {fixed:{w:0,h:$0.h}};},initFromState:function(){this.domDropdownButton.attr('label',this.oFilter.text);this.updateCurrentStateOfData();this.setRangeType(this.rangeType,this.rangeN);this.setTitle();this.updateTitleBar();},updateCurrentStateOfData:function(){var $0=this.oFilter.table;this.periodType=$0.periodType;this.rangeType=$0.rangeType;this.rangeN=$0.rangeN;if(!ss.isUndefined($0.anchor)){var $1=$0.anchor;this.anchorDateTime=new Date($1.year,$1.month-1,$1.day,$1.hour,$1.minute,$1.second);}},setTitle:function(){var $0=tableau.format.formatColumnDisplayName(this.oFilter,false);dojo.attr(this.domTitleBar,'title',$0);},applyChanges:function(){var $0={};$0.periodType=this.periodType;$0.rangeType=this.rangeType;$0.rangeN=this.rangeN;this.stateId+=1;var $1=tableau.util.findDirectParentByClassName(this.domDialog,'dijitPopup',dojo.body());if(!ss.isNullOrUndefined($1)){dojo.style($1,'zIndex','980');}tab.FilterClientCommands.doRelativeDateQuickFilter(this.session.get_visualId(),this.field,this.periodType,this.rangeType,this.rangeN);},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},$1_B:function(){this.setPeriodUI(this.periodType);this.setRangeUI(this.rangeType,this.rangeN);this.setPreviewUI();},onTypingLast:function(){this.onTyping(this.inputLastn);},onTypingNext:function(){this.onTyping(this.inputNextn);},setRLast:function(){this.setRange('last');},setRCurr:function(){this.setRange('curr');},setRNext:function(){this.setRange('next');},setRLastn:function(){this.setRange('lastn',this.inputLastn.value);},setRNextn:function(){this.setRange('nextn',this.inputNextn.value);},setRTodate:function(){this.setRange('todate');},setRangeUI:function(range,n){this.inputLastn.disabled=true;this.inputNextn.disabled=true;dojo.style(this.lastSpinner,'display','none');dojo.removeClass(this.radioLastn,'spinnerBugFix');dojo.style(this.nextSpinner,'display','none');dojo.removeClass(this.radioNextn,'spinnerBugFix');switch(range){case 'last':this.radioLast.checked=true;break;case 'curr':this.radioCurr.checked=true;break;case 'next':this.radioNext.checked=true;break;case 'lastn':this.radioLastn.checked=true;this.rangeN=n;this.inputLastn.value=this.rangeN.toString();this.inputLastn.disabled=false;dojo.style(this.lastSpinner,'display','');dojo.addClass(this.radioLastn,'spinnerBugFix');break;case 'nextn':this.radioNextn.checked=true;this.rangeN=n;this.inputNextn.value=this.rangeN.toString();this.inputNextn.disabled=false;dojo.style(this.nextSpinner,'display','');dojo.addClass(this.radioNextn,'spinnerBugFix');break;case 'todate':this.radioTodate.checked=true;break;}},updateRangeButtons:function(newPeriodType){var $0=this.$1_4.length;for(var $1=0;$1<$0;$1++){this.$1_4[$1].attr('checked',this.$1_4[$1].name===newPeriodType);}},overLastUp:function(){dojo.addClass(this.lastUp,'hover');},outLastUp:function(){dojo.removeClass(this.lastUp,'hover');},overLastDown:function(){dojo.addClass(this.lastDown,'hover');},outLastDown:function(){dojo.removeClass(this.lastDown,'hover');},overNextUp:function(){dojo.addClass(this.nextUp,'hover');},outNextUp:function(){dojo.removeClass(this.nextUp,'hover');},overNextDown:function(){dojo.addClass(this.nextDown,'hover');},outNextDown:function(){dojo.removeClass(this.nextDown,'hover');},$1_C:function($p0,$p1){var $0=parseInt($p0.value,10)+(($p1)?1:-1);if($0<1){return;}$p0.value=$0.toString();this.onTyping($p0);},upLast:function(){this.$1_C(this.inputLastn,true);},downLast:function(){this.$1_C(this.inputLastn,false);},upNext:function(){this.$1_C(this.inputNextn,true);},downNext:function(){this.$1_C(this.inputNextn,false);},$1_D:function(){tableau.util.localizeDojoLabeledControls([new ss.Tuple(this.buttonYear,'RelDateFilterYears'),new ss.Tuple(this.buttonQuarter,'RelDateFilterQuarters'),new ss.Tuple(this.buttonMonth,'RelDateFilterMonths'),new ss.Tuple(this.buttonWeek,'RelDateFilterWeeks'),new ss.Tuple(this.buttonDay,'RelDateFilterDays'),new ss.Tuple(this.buttonHour,'RelDateFilterHours'),new ss.Tuple(this.buttonMinute,'RelDateFilterMinutes')]);}}
tab.RelativeDatePickFilter=function(oProps){this.templateString="<div class='RelativeDatePickFilter'>"+"<div dojoAttachPoint='domBox' class='RelativeDatePickFilterBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='FilterTitle' dojoAttachPoint='domTitleBar'></div>"+"<div dojoType='dijit.form.Button' class='RDFButton RDFMenuButton' name='type' dojoAttachPoint='menuButton'"+"dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'></div>"+"<div class='PicklistContentDiv tab-ctrl-formatted-coloronly' dojoAttachPoint='domPicker'></div>"+'</div>'+'</div>'+'</div>';tab.RelativeDatePickFilter.initializeBase(this);}
tab.RelativeDatePickFilter.prototype={widgetsInTemplate:true,session:null,field:'',stateId:0,rid:0,timestamp:0,currentRange:null,$1_0:0,$1_1:0,layoutSession:null,zid:0,filterViewModel:null,currentAbbrev:null,showContextMenu:null,disposables:null,getContextMenuCommands:null,periodType:null,rangeType:null,rangeN:0,domPicker:null,getSID:null,$1_4:null,menuButton:null,get_filterViewModel:function(){return this.filterViewModel;},postCreate:function(){if(this.filterViewModel.get_filterType()!=='RelativeDatePick'){}var $0=0;this.disposables=new tab.DisposableHolder();this.getSID=ss.Delegate.create(this,function(){
return this.stateId;});this.timestamp=new Date().getMilliseconds();this.initFromState();var $1=function($p1_0,$p1_1){
if($p1_1){dojo.addClass($p1_0.domNode,'RDFButtonHide');}else{$0+=1;dojo.addClass($p1_0.domNode,'RDFButtonR'+$0);}};$1(this.menuButton,this.shouldHideContextMenu());$(this.menuButton.domNode).css('background-color',this.backgroundColor);},shouldHideDomainButton:function(){return true;},shouldHideContextMenu:function(){var $0=tab.CommandsPresModelWrapper.create(this.getContextMenuCommands());return this.hideEmptyTitlebar()||ss.isNullOrUndefined($0)||!$0.get_commandItems().length;},dispose:function(){this.disposables.dispose();this.showContextMenu=null;},destroy:function(preserveDom){this.dispose();this.domPicker.innerHTML='';this.inherited(arguments);},getMetrics:function(){var $0=dojo.marginBox(this.domNode);return {fixed:tab.$create_Size(0,$0.h)};},initFromState:function(){this.currentRange=this.oFilter.table;this.currentAbbrev=this.toAbbrev(this.currentRange);this.domPicker.innerHTML='';var $0=tableau.format.formatColumnDisplayName(this.oFilter,false);dojo.attr(this.domTitleBar,'title',$0);this.updateTitleBar();_.each(tab.RelativeDatePickFilter.pickerStrings,ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=document.createElement('div');$1_0.innerHTML=tableau.format.escapeHTML($p1_0);dojo.addClass($1_0,'PickLabel');dojo.addClass($1_0,'tab-ctrl-formatted-border-hover');this.domPicker.appendChild($1_0);var $1_1=$($1_0);var $1_2=ss.Delegate.create(this,function($p2_0){
this.onClick($p1_1,$p2_0);});this.disposables.add(spiff.EventUtil.bindWithDispose($1_1,'click',$1_2));if(this.currentAbbrev===tab.RelativeDatePickFilter.pickerDurations[$p1_1]){this.$1_5($1_0);this.$1_4=$1_0;}}));this.layout();},$1_5:function($p0){dojo.addClass($p0,'Selected');dojo.addClass($p0,'tab-ctrl-formatted-widget');dojo.removeClass($p0,'tab-ctrl-formatted-border-hover');dojo.addClass($p0,'tab-ctrl-formatted-darker-border-hover');},$1_6:function($p0){dojo.removeClass($p0,'Selected');dojo.removeClass($p0,'tab-ctrl-formatted-widget');dojo.addClass($p0,'tab-ctrl-formatted-border-hover');dojo.removeClass($p0,'tab-ctrl-formatted-darker-border-hover');},formatTuple:function($p0){return tableau.format.formatTupleDisplayName($p0,true,this.oFilter.role);},toAbbrev:function(rangeHash){var $0=rangeHash.rangeN.toString();var $1='';switch(rangeHash.rangeType){case 'curr':$1='0';break;case 'lastn':$1='-'+$0;break;case 'nextn':$1=$0;break;default:return '';}switch(rangeHash.periodType){case 'year':$1+='y';break;case 'quarter':$1+='q';break;case 'month':$1+='m';break;case 'week':$1+='w';break;case 'day':$1+='d';break;case 'hour':$1+='h';break;default:return '';}return $1;},onClick:function(pickedIndex,e){var $0=tab.RelativeDatePickFilter.pickerDurationsInteger[pickedIndex];if(e.target!==this.$1_4){if(ss.isValue(this.$1_4)){this.$1_6(this.$1_4);}this.$1_5(e.target);tab.FilterClientCommands.doRelativeDateQuickFilter(this.session.get_visualId(),this.field,'day','lastn',$0);}},hideEmptyTitlebar:function(){return String.isNullOrEmpty(tableau.format.formatColumnDisplayName(this.oFilter,false));},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},setTitleSize:function($p0,$p1){this.$1_0=$p0;this.$1_1=$p1;},adjustLabelPickWidth:function(totalWidth){var $0=Math.floor((totalWidth-1)/tab.RelativeDatePickFilter.pickerDurations.length);dojo.forEach(this.domPicker.childNodes,function($p1_0){
dojo.style($p1_0,'width',($0-3)+'px');});},layout:function(){var $0;dojo.removeClass(this.domNode,'RDPFHorizontal');this.updateTitleBar();var $1=dojo.marginBox(this.domPicker);if(!ss.isValue($1)||!ss.isValue($1.w)||!$1.w){return;}var $2=dojo.marginBox(this.domTitleBar);this.resetTitleSize();if(this.$1_0>0){$2.h=this.$1_0;dojo.marginBox(this.domTitleBar,{h:$2.h});}if(this.$1_1>0){$2.w=this.$1_1;dojo.marginBox(this.domTitleBar,{w:$2.w});}tableau.util.setupTitleEllipsis($(this.domTitleBar));var $3=dojo.contentBox(this.domNode);$0=$3.w;if(!this.hideEmptyTitlebar()&&this.$1_1>0){dojo.addClass(this.domNode,'RDPFHorizontal');dojo.style(this.domTitleBar,'float','left');dojo.style(this.domPicker,'float','left');$0=$3.w-$2.w;}else{dojo.style(this.domTitleBar,'float','none');dojo.style(this.domPicker,'float','none');}dojo.contentBox(this.domPicker,{w:$0});this.adjustLabelPickWidth($0);}}
tab.SearchWidgetBase=function(){this.CANCEL_SEARCH_TOOLTIP=tab.Strings.QuickFilterSearchCancel;this.SEARCH_TOOLTIP=tab.Strings.QuickFilterSearchTooltip;this.ADD_ITEM_CTRL_ENTER=tab.Strings.QuickFilterSearchAddItemCtrlEnter;this.ADD_ITEM_ENTER=tab.Strings.QuickFilterSearchAddItemEnter;this.XBUTTON_CLOSE_TOOLTIP=tab.Strings.QuickFilterSearchCloseTooltip;this.XBUTTON_CLEAR_TOOLTIP=tab.Strings.QuickFilterSearchClearTooltip;this.NO_MATCHES=tab.Strings.QuickFilterSearchNoMatches;this.resultCount=tab.SearchWidgetBase.noSearchPerformed;tab.SearchWidgetBase.initializeBase(this);}
tab.SearchWidgetBase.prototype={isContainer:false,domXButton:null,isVisible:false,qf:null,oResults:null,searchDelay:400,busy_gif_url:null,_isTypeInList:false,get_domXButton:function(){return this.domXButton;},get_isVisible:function(){return this.isVisible;},set_isVisible:function(value){this.isVisible=value;return value;},get_qf:function(){return this.qf;},set_qf:function(value){this.qf=value;return value;},get_dijitDomNode:function(){return this.domNode;},get_oResults:function(){return this.oResults;},set_oResults:function(value){this.oResults=value;return value;},get_dijitClassName:function(){return this.declaredClass;},postMixInProperties:function(){this.inherited(arguments);this.busy_gif_url=tableau.util.assetUrl('/images/busy.gif');},postCreate:function(){this._isTypeInList=!!this.get_qf()&&this.get_qf().get_isTypeInList();},resize:function($p0){dojo.marginBox(this.domNode,$p0);this.layout();},onQueryBoxKeyDown:function(evt){var $0=this.getOnQueryBoxKeyDownBehavior(evt);if(!!$0){if($0.stopEvent){dojo.stopEvent(evt);}if(!!$0.functionToCall){window.setTimeout($0.functionToCall,10);}}},getOnQueryBoxKeyDownBehavior:function(keyEvent){var $0={};$0.functionToCall=null;$0.stopEvent=false;switch(keyEvent.keyCode){case dojo.keys.ENTER:$0.stopEvent=true;break;case dojo.keys.ESCAPE:this.onXButtonClick(null);$0.stopEvent=true;break;case dojo.keys.SHIFT:$0.stopEvent=true;break;case dojo.keys.CTRL:$0.stopEvent=true;break;default:$0.functionToCall=ss.Delegate.create(this,this.handleNonCommandKeyDown);break;}return $0;},handleNonCommandKeyDown:function(evt){this.$1_0();},onXButtonClick:function(evt){if(!this._isTypeInList){var $0=this.getQuery();this.hideUI();if(!!$0){this.showUI();}}else{this.clearSearch();}},onButtonHover:function($p0){dojo.addClass($p0.target,'Hover');},onButtonUnhover:function($p0){dojo.removeClass($p0.target,'Hover');},toggleUI:function(){if(this.get_isVisible()){this.hideUI();}else{this.showUI();}},isShowingResults:function(){return this.isVisible&&this.resultCount>0;},showUI:function(noLayout){if(this.get_isVisible()){return;}dojo.style(this.domNode,'display','block');this.isVisible=true;if(!noLayout){this.get_qf().layout();}this.focusQueryBox();},hideUI:function(){if(!this.get_isVisible()){return;}this.clearSearch(false,true);dojo.style(this.domNode,'display','none');this.blurQueryBox();this.isVisible=false;this.get_qf().layout();},clearSearch:function(preserveQueryBoxText,noFocus){if(!preserveQueryBoxText){this.setQuery('');this.$1_0();}this.resultCount=0;this.get_qf().layout();if(!noFocus){this.focusQueryBox();}},doCategoricalSearch:function(query){var $0=this.get_qf().get_oFilter();var $1=this.makeUniqueSearchItemIdPrefix();var $2=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
return tableau.FilterItem.getSearchResultHtml(this.get_qf(),$p1_0,$1,$p1_2);});return tab.LocalSearch.findMatches(query,$0,ss.Delegate.create(this,this.formatTuple),$2);},$1_0:function(){if(String.isNullOrEmpty(this.getQuery())&&!this._isTypeInList){this.get_domXButton().title=this.XBUTTON_CLOSE_TOOLTIP;}else{this.get_domXButton().title=this.XBUTTON_CLEAR_TOOLTIP;}},formatTuple:function(tuple){return tableau.format.formatTupleDisplayName(tuple,true,this.get_qf().get_oFilter().role);},isSingleSelect:function(){return this.get_qf().isSingleSelect();},makeUniqueSearchItemIdPrefix:function(){return tab.FilterItemUtil.getBaseItemName(this.get_qf(),'SI');},currentDomain:function(){var $0=tableau.types.QFDomain.QFD_ALL;if(!!this.get_qf().get_attributes()){$0=this.get_qf().get_attributes()['values'];}return $0;},doAjaxRemoteSearch:function(query,maxRows,shouldGetIndex,handleResults,handleResultsError){return this.get_qf().get_session().searchFilter(this.get_qf().get_field(),query,maxRows,shouldGetIndex,this.currentDomain(),handleResults,handleResultsError);}}
tab.SearchWidget=function(props,dom){this.templateString="<div class='Search'>"+"<div class='SearchBox tab-ctrl-formatted-border tab-ctrl-formatted-darker-border-hover' dojoAttachPoint='domQuerySection'>"+"<textarea rows='1' class='QueryBox' spellcheck='false'"+"dojoAttachPoint='domQueryBox'"+"dojoAttachEvent='onkeydown:onQueryBoxKeyDown,onpaste:onQueryBoxPaste'></textarea>"+"<span class='wcSearchX' title='${XBUTTON_CLOSE_TOOLTIP}'"+"dojoAttachPoint='domXButton'"+"dojoAttachEvent='onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+"<img class='searchBusyImg' title='${CANCEL_SEARCH_TOOLTIP}' src='${busy_gif_url}'"+"dojoAttachPoint='domSearchBusyImg'"+"dojoAttachEvent='onclick:onSearchBusyImgClick'></img>"+"<span class='wcIconSearch' title='${SEARCH_TOOLTIP}'"+"dojoAttachPoint='domSearchButton'"+"dojoAttachEvent='onclick:onSearchButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+"<span class='wcIconSearchAdd' title='${ADD_ITEM_CTRL_ENTER}'"+"dojoAttachPoint='domSearchAddButton'"+"dojoAttachEvent='onclick:onSearchAddButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+'</div>'+"<div class='SearchResults' dojoAttachPoint='domResults' dojoAttachEvent='onclick:onListItemClick'></div>"+'</div>';tab.SearchWidget.initializeBase(this);this.$1_1=new tab.CategoricalSelection(this);}
tab.SearchWidget.prototype={domQuerySection:null,domQueryBox:null,domSearchAddButton:null,domSearchButton:null,domSearchBusyImg:null,domResults:null,$1_1:null,applyDelay:500,$1_2:100,_bSearching:false,_queryBoxPasteTimeout:null,_searchTimer:null,_isFilterSearchable:false,_initializedSearchResults:false,_domResultsPBExtents:null,_lastRemoteSearch:null,get_applyDelay:function(){return this.applyDelay;},get_isPendingMode:function(){return false;},get_filterTable:function(){return (!!this.get_oResults())?this.get_oResults():null;},get_quickFilter:function(){return this.get_qf();},shouldDeferChanges:function(){return false;},postCreate:function(){this.inherited(arguments);if(this._isTypeInList){this.showUI(true);}this._isFilterSearchable=true;if(!!this.get_qf()&&this._isTypeInList){this._isFilterSearchable=this.get_qf().get_oFilter().is_searchable;}if(this._isFilterSearchable){this.domSearchAddButton.title=this.ADD_ITEM_CTRL_ENTER;}else{this.domSearchAddButton.title=this.ADD_ITEM_ENTER;}this.setQueryIconsVisibility(true);tableau.util.disableTextSelection(this.domResults);},destroy:function(){if(ss.isValue(this.domResults)){this.domResults.innerHTML='';}this.inherited(arguments);},onQueryBoxPaste:function($p0){if(!!this._queryBoxPasteTimeout){window.clearTimeout(this._queryBoxPasteTimeout);this._queryBoxPasteTimeout=null;}this._queryBoxPasteTimeout=window.setTimeout(ss.Delegate.create(this,this._handleQueryBoxPaste),10);},_handleQueryBoxPaste:function(){var $0;var $1;$1=this.getQuery();$1=$1.replace('/\r\n/g','\n');$0=$1.split('\n');if($0.length>1){this.addManualSearchItems($0);}},getOnQueryBoxKeyDownBehavior:function(keyEvent){var $0;$0=this.inherited(arguments);switch(keyEvent.keyCode){case dojo.keys.ESCAPE:if(dojo.isFF){$0.functionToCall=ss.Delegate.create(this,this.onXButtonClick);}break;case dojo.keys.ENTER:if(this._isTypeInList){$0.stopEvent=true;$0.functionToCall=this._getEnterKeyDownBehaviorOnTypeInList(keyEvent);}break;}return $0;},_getEnterKeyDownBehaviorOnTypeInList:function($p0){if($p0.ctrlKey){return ss.Delegate.create(this,this.onSearchAddButtonClick);}if(this._isFilterSearchable){return ss.Delegate.create(this,this.onSearchButtonClick);}return ss.Delegate.create(this,this.onSearchAddButtonClick);},handleNonCommandKeyDown:function(evt){this.inherited(arguments);if(this._isTypeInList){this.clearSearch(true);}if(!this._isTypeInList){this.$1_6();}},onSearchAddButtonClick:function(evt){this.addManualSearchItems(null);},onSearchButtonClick:function(evt){this.doSearch();},onSearchBusyImgClick:function(evt){this.$1_7();},focusQueryBox:function(){this.domQueryBox.focus();},blurQueryBox:function(){this.domQueryBox.blur();},getQuery:function(){return this.domQueryBox.value;},setQuery:function(value){this.domQueryBox.value=value;},showUI:function(noLayout){if(this.get_isVisible()){return;}if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.CategoricalFilter'&&!this.get_qf().get_oFilter().table.tuples.length&&!this._isTypeInList){return;}this.inherited(arguments);},clearSearch:function(preserveQueryBoxText,noFocus){dojo.style(this.domResults,'display','none');this.domResults.innerHTML='';this.clearRangeAnchorAndSelection();this.$1_7();this.inherited(arguments);},setQueryIconsVisibility:function(initialLoad){var $0=this._isTypeInList;var $1=(!!initialLoad&&initialLoad)?false:tableau.util.isElementVisible(this.domResults);var $2=(!String.isNullOrEmpty(this.getQuery())&&$0&&!$1);var $3=$2;var $4=($2&&this._isFilterSearchable);dojo.style(this.domSearchBusyImg,'display',($4&&this._bSearching)?'block':'none');dojo.style(this.domSearchButton,'display',($4&&!this._bSearching)?'block':'none');dojo.style(this.domSearchAddButton,'display',($3)?'block':'none');var $5=($0&&!$1)?'none':'block';dojo.style(this.get_domXButton(),'display',$5);this.fixQueryWidth();},fetchChildNodeByIndex:function(index){var $0=this.domResults.childNodes;for(var $1=0,$2=$0.length;$1<$2;$1++){if(tableau.FilterItem.getIndex($0[$1])===index){return $0[$1];}}return null;},layout:function(listHeight){this.setQueryIconsVisibility();var $0=this.$1_5();if(this._isTypeInList||this.get_qf().get_mode()==='checkdropdown'){this.$1_3($0);}else if(!!$0){this.$1_4(listHeight/$0,$0);}},fixQueryWidth:function(){var $0=tableau.util.isElementVisible(this.get_domXButton());var $1=tableau.util.isElementVisible(this.domSearchAddButton);var $2=tableau.util.isElementVisible(this.domSearchButton);var $3=tableau.util.isElementVisible(this.domSearchBusyImg);var $4=0;if($0){$4+=dojo.marginBox(this.get_domXButton()).w;}if($1){$4+=dojo.marginBox(this.domSearchAddButton).w;}if($2){$4+=dojo.marginBox(this.domSearchButton).w;}if($3){$4+=dojo.marginBox(this.domSearchBusyImg).w;}dojo.marginBox(this.domQueryBox,{w:dojo.contentBox(this.domQuerySection).w-$4-1});},$1_3:function($p0){var $0=dojo.query('.tab-dashboard')[0];if(!this._initializedSearchResults){this._initializedSearchResults=true;$0.appendChild(this.domResults);dojo.style(this.domResults,{position:'absolute',zIndex:'987'});this._domResultsPBExtents=dojo._getPadBorderExtents(this.domResults);}var $1=dojo.coords(this.domQuerySection);var $2=$(this.domQuerySection).offset();var $3=$($0).offset();var $4=$2.top-$3.top;var $5=$4+$1.h;var $6=dojo.coords($0);var $7=$6.t+$6.h;var $8=$p0+this._domResultsPBExtents.h;var $9=(this.domResults.childNodes.length*$p0)+this._domResultsPBExtents.h;var $A=$7-$5;var $B=$4-$6.t;var $C=true;var $D=Math.min($9,$A);if($D<$8&&$B>$A){$D=Math.min($9,$B);$C=false;}$D=Math.max($D,$8);dojo.marginBox(this.domResults,{w:$1.w,h:$D});var $E=($C)?$5:$4-$D;var $F=$2.left-$3.left;dojo.style(this.domResults,{top:$E.toString()+'px',left:$F.toString()+'px',borderTopWidth:($C)?'0':'1px',borderBottomWidth:($C)?'1px':'0'});},$1_4:function($p0,$p1){var $0=Math.max(this.domResults.childNodes.length,1);var $1=Math.min($0,Math.floor($p0/2));dojo.style(this.domResults,'height',($1*$p1).toString()+'px');},$1_5:function(){if(!!this.domResults.firstChild){if(!!this.domResults.firstChild.offsetHeight&&!!this.domResults.firstChild.offsetHeight){return this.domResults.firstChild.offsetHeight;}else{return 15;}}return 0;},$1_6:function(){if(!!this._searchTimer){window.clearTimeout(this._searchTimer);this._searchTimer=null;}this._searchTimer=window.setTimeout(ss.Delegate.create(this,this.doSearch),this.searchDelay);},showSearchSpinner:function(show){this._bSearching=show;this.setQueryIconsVisibility();},addManualSearchItems:function(items){if(this.get_qf().get_dijitDeclaredClass()!=='tableau.base.widget.CategoricalFilter'){return;}if(tab.MiscUtil.isNullOrUndefined(items)){items=this.getQuery().split('\n');}if(tab.MiscUtil.isNullOrEmpty(items)){return;}var $0=[];for(var $2=0,$3=items.length;$2<$3;$2++){var $4=items[$2];if(!tab.MiscUtil.isNullOrEmpty($4)){$0.push(tab.$create_TupleStruct($4,true,[tab.$create_DataValueStruct('s',$4)]));}}var $1={};$1.schema=this.get_qf().get_oFilter().table.schema;$1.tuples=$0;this.notifyParentFilterOfChanged($1,true);this.clearSearch();},doSearch:function(){this.searchWithQuery(this.getQuery());},updateSearch:function(){if(this.get_isVisible()&&this.resultCount>0){this.searchWithQuery(this.getQuery());}},searchWithQuery:function(query){if(query.length<=0){this.clearSearch();}else if(this.get_qf().get_dijitDeclaredClass().indexOf('CategoricalFilter')>-1&&!this._isTypeInList){if(this.get_qf().get_oFilter().isTiled){this.doRemoteSearch(query,true);}else{this.handleSearchResults(this.doCategoricalSearch(query));}}else{this.doRemoteSearch(query,false);}},doRemoteSearch:function(query,shouldGetIndex){this.showSearchSpinner(this._isTypeInList);this._lastRemoteSearch=this.doAjaxRemoteSearch(query,this.$1_2,shouldGetIndex,ss.Delegate.create(this,this.handleSearchResults),ss.Delegate.create(this,this.handleSearchResultsError));},$1_7:function(){if(!!this._lastRemoteSearch){this._lastRemoteSearch.abort();this._lastRemoteSearch=null;}this.showSearchSpinner(false);},$1_8:function($p0,$p1,$p2){var $0=tableau.format.escapeHTML;if(!ss.isNullOrUndefined($p2)&&$p1<$p2){var $1=$p2-$p1;$p0.push('<div class="searchResultsRemaining">');if(!$1){$p0.push($0(tab.Strings.QuickFilterSearchResultsNotShownZero));}else if($1===1){$p0.push($0(tab.Strings.QuickFilterSearchResultsNotShownSingular));}else{var $2=tableau.format.formatIntAuto($1,'t',',','3;0');$p0.push($0(tab.Strings.QuickFilterSearchResultsNotShownPlural($2)));}$p0.push('</div>');}},$1_9:function($p0){if($p0.length<=0){return ([]);}this.set_oResults($p0);var $0=this.get_oResults().tuples;var $1=this.get_oResults().indices;var $2=[];var $3=this.makeUniqueSearchItemIdPrefix();for(var $4=0,$5=$0.length;$4<$5;$4++){var $6=(!!$1)?$1[$4]:$4;var $7=tableau.FilterItem.getSearchResultHtml(this.get_qf(),$0[$4],$3,$6);$2.push($7);}this.$1_8($2,$0.length,$p0.actual_size);return $2;},handleSearchResults:function(data){var $0=tableau.format.escapeHTML;var $1=tab.Strings.QuickFilterSearchNoMatches;this.showSearchSpinner(false);if(!!data&&data.dojoType==='cancel'){return;}this.domResults.innerHTML='';if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.HierarchicalFilter'||this._isTypeInList||this.get_qf().get_oFilter().isTiled){if(!!data.schema[0].collation&&!data.schema[0].collation.f){$1='<div>'+$0($1)+'<br/>'+$0(tab.Strings.QuickFilterSearchDataIsCaseSensitive)+'</div>';}data=this.$1_9(data);}this.resultCount=data.length;this.domResults.innerHTML=(this.resultCount>0)?data.join(''):$1;dojo.style(this.domResults,'display',(this.domResults.innerHTML.length>0)?'block':'none');this.setQueryIconsVisibility();this.get_qf().layout();this.$1_1.refreshRangeAnchorAndSelection();},handleSearchResultsError:function(response){this.showSearchSpinner(false);this.domResults.innerHTML='';this.resultCount=0;},applyChanges:function(){var $0=null;if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.CategoricalFilter'&&!this._isTypeInList){$0=this.applyChangesCat();}else{$0=this.applyChangesHierOrTypeIn();}this.notifyParentFilterOfChanged($0);},applyChangesByChangelist:function(changelist){if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.CategoricalFilter'&&!this._isTypeInList){this.get_qf().applyChangesByChangelist(changelist);}else{this.applyChanges();}},notifyParentFilterOfChanged:function(changed,manualAdd,noServerCall){if(!changed.tuples.length){return;}this.get_qf().updateStateFromSearch(changed);if(noServerCall){return;}this.get_qf().set_stateId(this.get_qf().get_stateId()+1);if(manualAdd){var $0=ss.Delegate.create(this,this.onManualAddSuccess);this.get_qf().get_session().addManualFilterItems(changed,this.get_qf(),$0);}else{var $1=this._isTypeInList&&this.get_qf().get_oFilter().all;var $2=($1||this.get_qf().isSingleSelect());if($2){if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.HierarchicalFilter'){this._doModifyHierarchialFilter($2,changed);}else{this.doSetCategoricalFilter($1,changed);}}else{if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.HierarchicalFilter'){this._doModifyHierarchialFilter(false,changed);}else{this.doModifyCategoricalFilter(changed);}}}},doSetCategoricalFilter:function(isTypeInAll,changed){var $0;var $1=[];var $2=changed.tuples.length;if(isTypeInAll){for(var $3=0;$3<$2;$3++){$0=(changed.tuples[$3].d||changed.tuples[$3].t[0].v);if(changed.tuples[$3].s){$1.push($0);}}}else{$0=(changed.tuples[0].d||changed.tuples[0].t[0].v);$1.push($0);}tab.FilterClientCommands.setCategoricalFilterValues(this.get_qf().get_session().get_visualId(),this.get_qf().get_field(),'filter-replace',$1);},doModifyCategoricalFilter:function(changed){var $0=[];var $1=[];var $2=changed.tuples.length;for(var $3=0;$3<$2;$3++){var $4=(changed.tuples[$3].d||changed.tuples[$3].t[0].v);if(changed.tuples[$3].s){$0.push($4);}else{$1.push($4);}}tab.FilterClientCommands.modifyCategoricalFilterValues(this.get_qf().get_session().get_visualId(),this.get_qf().get_field(),$0,$1);},_doModifyHierarchialFilter:function($p0,$p1){var $0=[];var $1=[];var $2=($p0)?'filter-replace':'filter-delta';var $3=$p1.tuples.length;var $4=$p1.tuples;for(var $5=0;$5<$3;$5++){var $6=$4[$5].t.length;var $7='';for(var $8=0;$8<$6;++$8){var $9=$4[$5].t[$8];if(!!$9.v){$7=$9.v;}}if($4[$5].s){$0.push($7);}else{$1.push($7);}}tab.FilterClientCommands.doMemberHierarchialFilter(this.get_qf().get_session().get_visualId(),this.get_qf().get_field(),$0,$1,$2);},applyChangesCat:function(){var $0={};$0.schema=this.get_qf().get_oFilter().table.schema;$0.tuples=[];var $1=this.domResults.firstChild;var $2=this.domResults.childNodes.length;var $3;var $4=this.get_qf().get_oFilter().table.tuples;if(this.get_qf().isSingleSelect()){for(var $5=0;$5<$2;$5++,$1=$1.nextSibling){if(tableau.FilterItem.isChecked($1)){$3=tableau.FilterItem.getIndex($1);this.recordCheckedChanges($0,$1,$4[$3]);for(var $6=0;$6<$4.length;++$6){if($6!==$3){$4[$6].s=false;}}break;}}}else{var $7=[];for(var $9=0;$9<$2;$9++,$1=$1.nextSibling){$3=tableau.FilterItem.getIndex($1);this.recordCheckedChanges($0,$1,$4[$3]);$7[$3]=1;}$1=this.get_qf().get_domContent().firstChild;if(tableau.FilterItem.isAllItem($1)){$1=$1.nextSibling;}var $8=$4.length;for(var $A=0;$A<$8;$A++,$1=$1.nextSibling){if(!$7[$A]){this.recordCheckedChanges($0,$1,$4[$A]);}}}return $0;},applyChangesHierOrTypeIn:function(){var $0={};$0.schema=this.get_oResults().schema;$0.tuples=[];var $1=this.domResults.firstChild;var $2=this.get_oResults().tuples;for(var $3=0,$4=$2.length;$3<$4;$3++,$1=$1.nextSibling){this.recordCheckedChanges($0,$1,$2[$3]);}return $0;},onManualAddSuccess:function(response){var $0=tableau.format.escapeHTML;var $1=response.invalidTuples;var $2=$1.length;if(ss.isNullOrUndefined(response)||ss.isNullOrUndefined(response.invalidTuples)||ss.isNullOrUndefined(response.totalTuples)){return false;}if($2>0){var $3=[];if($2===1){$3.push($0(tab.Strings.QuickFilterSearchInvalidDataMemberSingular($1[0].t[0].v)));$3.push('<br/>');}else{$3.push($0(tab.Strings.QuickFilterSearchInvalidDataMembersPlural));$3.push('<br/>');for(var $6=0;$6<$2;$6++){$3.push('&nbsp;&nbsp;&nbsp;&nbsp;&bull;&nbsp;');$3.push($1[$6].t[0].v);$3.push('<br/>');}}tableau.util.showAlertDialog($3.join(''),tab.Strings.QuickFilterSearchInvalidDataMembersDialogTitle,true);var $4=[];for(var $7=0;$7<$2;$7++){var $8=$1[$7].t[0].v;$4.push(tab.$create_TupleStruct($8,false,$1[$7].t));}var $5={};$5.schema=this.get_qf().get_oFilter().table.schema;$5.tuples=$4;this.notifyParentFilterOfChanged($5,true,true);}return response.totalTuples>$2;},updateStateIfNeeded:function(){},handleClickIfPending:function(node){},clearRangeAnchorAndSelection:function(){this.$1_1.clearRangeAnchorAndSelection();},forEachSelected:function(itemCallback){this.$1_1.forEachSelected(itemCallback);},onListItemClick:function(evt){this.$1_1.onListItemClick(evt);},handleItemClick:function(node){},recordCheckedChanges:function(changedList,item,tuple){if(tableau.FilterItem.isChecked(item)&&!tuple.s){changedList.tuples.push(tableau.FilterItem.setChecked(item,true,tuple));}else if(!tableau.FilterItem.isChecked(item)&&tuple.s){changedList.tuples.push(tableau.FilterItem.setChecked(item,false,tuple));}}}
tab.ShareDialog=function(dialogParams){this.templateString="<div class='dijitDialog dijitContentPane'>"+"<div dojoAttachPoint='titleBar' class='dijitDialogTitleBar'>"+"<span dojoAttachPoint='titleNode' class='dijitDialogTitle' id='${id}_title'></span>"+"<span dojoAttachPoint='closeButtonNode' class='dijitDialogCloseIcon' dojoAttachEvent='onclick: onCancel' title='${buttonCancel}'>"+"<span dojoAttachPoint='closeText' class='closeText' title='${buttonCancel}'>x</span>"+'</span>'+'</div>'+"<div dojoattachpoint='containerNode' class='dijitDialogPaneContent'>"+"<div class='shareVizTable'>"+"<div class='shareVizHeader'>"+"<span class='shareVizTitle'>${_locDialogTitle}</span>"+tab.ShareDialog.$3_7+'</div>'+"<table class='shareInnerTable'>"+'<tr>'+"<td align='right'>"+"<div class='displayOptions'>"+"<span id='displayOptionsHeader' class='closed' href='/' onclick='tab.ShareDialogUtil.showPopup(); return false;'  onfocus='blur();' tabindex='-1'></span>"+"<span id='superimposedText' class='closed' href='/' onclick='tab.ShareDialogUtil.showPopup(); return false;'>${_locDisplayOptions}</span>"+"<div id='optionsPopup'>"+"<form action='' id='optionsPopupForm' class='selectShareVizOptions'><fieldset style='border:none; margin:0; padding:5px;'><table width='135' border='0' cellspacing='0' cellpadding='0'>"+'<tr>'+"<td><label for='share_width'>${_locWidth}</label></td>"+"<td><input id='share_width' size='5' "+"class='' type='text' name='share_width' title='width' value='425' alt='width' "+"constraints=\"{min:1,max:9999,places:0,pattern:'###0.##'}\" "+"promptMessage= '${_locEnterValueBetween}' "+"required= 'true' "+"tooltipPosition = ['TL':'BL'] "+"invalidMessage= '${_locInvalidWidth}' "+"onkeyup=\"tab.ShareDialogUtil.validateReasonableDimension('share_width', false);\" "+"onblur=\"tab.ShareDialogUtil.validateReasonableDimension('share_width', true);\" "+'/>'+'</td>'+'</tr>'+'<tr>'+"<td><label for='share_height'>${_locHeight}</label></td>"+"<td><input id='share_height' size='5' "+"class='' type='height' name='share_height' title='height' value='350' alt='height' "+"constraints=\"{min:1,max:9999,places:0,pattern:'###0.##'}\" "+"promptMessage= '${_locEnterValueBetween}' "+"required= 'true' "+"tooltipPosition = ['TL':'BL'] "+"invalidMessage= '${_locInvalidHeight}' "+"onkeyup=\"tab.ShareDialogUtil.validateReasonableDimension('share_height', false);\" "+"onblur=\"tab.ShareDialogUtil.validateReasonableDimension('share_height', true);\" "+'/></td>'+'</tr>'+"<tr id='shareShowToolbar'>"+"<td colspan='2'>"+"<label for='share_toolbar' id='share_toolbar_label' class=''>${_locShowToolbar}</label>"+"<input type='checkbox' id='share_toolbar' "+"name='share_toolbar' class='' value='' alt='${_locShowToolbar}' "+"onclick='tab.ShareDialogUtil.doUpdateGenerated();'"+'/></td>'+'</tr>'+"<tr id='shareShowTabs'>"+"<td colspan='2' style='padding-bottom:10px;'>"+"<label id='show_tabs_label' for='show_tabs' class=''>${_locShowTabs}</label>"+"<input type='checkbox' id='show_tabs' "+"name='show_tabs' class='' value='' alt='${_locShowTabs}' "+"onclick='tab.ShareDialogUtil.doUpdateGenerated();'"+'/></td>'+'</tr>'+"<tr id='share_rss_blog_row'>"+"<td colspan='2'>"+"<label style='font-family:Arial, Helvetica, sans-serif; font-weight:normal;' for='share_blog'>${_locUrlForRssLinks}</label><br"+"/><input style='outline:none; margin-bottom:0; width:119px;  font-weight:normal;' id='share_blog' class='' type='text' name='share_blog' title='${_locUrlForRssLinks}' value='' alt='${_locUrlForRssLinks}' promptMessage= '${_locEnterUriForBlogEntry}' required= 'optional' maxLength='255' maxlength='255' onblur='tab.ShareDialogUtil.doUpdateGenerated();'"+'/></td>'+'</tr>'+'</table>'+'</fieldset>'+'</form>'+'</div>'+'</div>'+'</td>'+'</tr>'+"<tr class='share_mobile_only' style='display:none'>"+'<td>'+"<div class='shareVizOption'>${_locLink}</div>"+"<table class='shareVizHelpText'>"+'<tr>'+'<td>'+"<a href='mailto:' id='share_mailto_a' class='tableau wcIconMail'></a>"+'</td><td>'+'${_locShareMobileEmailText}'+'</td>'+'</tr><tr>'+'<td>'+"<a target='_blank' id='share_link_a' class='tableau wcIconLink'></a>"+'</td><td>'+'${_locShareMobileLinkText}'+'</td>'+'</tr>'+'</table>'+'</td>'+'</tr>'+"<tr class='share_web_only'>"+'<td>'+"<span class='shareVizOption'>${_locEmail}</span>"+"<br /><span class='shareVizHelpText'>${_locEmailHelp}</span>"+"<br/><input id='share_link_textbox' class='emailVizURL' readonly='readonly' onclick='this.focus();this.select();return false;'/>"+'</td>'+'</tr>'+'<tr>'+'<td>'+"<span class='shareVizOption'>${_locEmbed}</span>"+"<br /><span class='shareVizHelpText'>${_locEmbedHelp}</span>"+"<br/><input id='share_embed_textbox' class='embedViz' readonly='readonly' onclick='this.focus();this.select();return false;'/>"+'</td>'+'</tr>'+'<tr>'+'<td>'+"<div style='white-space: nowrap;'>"+"<button class='tab-styledButton' onclick='tab.ShareDialogUtil.hideShareDialog(); return false;'>"+"<span class='tab-styledButtonLeft'></span>"+"<span class='tab-styledButtonMiddle'>${_locDone}</span>"+"<span class='tab-styledButtonRight'></span>"+'</button>'+"<span id='dimension_warning' style='font-family:Arial, Helvetica, sans-serif; font-size:10px; font-weight:normal; visibility:hidden; color:red; margin-left:10px;'>${_locPleaseEnterIntegerBetween}</span>"+'</div>'+'</td>'+'</tr>'+'</table>'+'</div><!-- end shareVizTable -->'+'</div>'+'</div>';tab.ShareDialog.initializeBase(this);this._loadLocalizedStrings();}
tab.ShareDialog.prototype={_locDialogTitle:null,_locDisplayOptions:null,_locWidth:null,_locHeight:null,_locInvalidWidth:null,_locInvalidHeight:null,_locEnterValueBetween:null,_locShowToolbar:null,_locShowTabs:null,_locUrlForRssLinks:null,_locEnterUriForBlogEntry:null,_locShareMobileLinkText:null,_locShareMobileEmailText:null,_locLink:null,_locEmail:null,_locEmailHelp:null,_locEmbed:null,_locEmbedHelp:null,_locDone:null,_locPleaseEnterIntegerBetween:null,_position:function(){var $0=$('.wcShareButton');if(!$('body').hasClass('Dojo.Ove')&&$0.length>0){dijit.placeOnScreenAroundElement(this.domNode,$0.get(0),{TL:'BL',BL:'TL'});}},_loadLocalizedStrings:function(){var $0=tableau.format.escapeHTML;this._locDialogTitle=$0(tab.Strings.ShareDialogTitle);this._locDisplayOptions=$0(tab.Strings.ShareDialogDisplayOptions);this._locWidth=$0(tab.Strings.ShareDialogWidth);this._locHeight=$0(tab.Strings.ShareDialogHeight);this._locInvalidWidth=$0(tab.Strings.ShareDialogInvalidWidth);this._locInvalidHeight=$0(tab.Strings.ShareDialogInvalidHeight);this._locEnterValueBetween=$0(tab.Strings.ShareDialogEnterValueBetween(1,10000));this._locShowToolbar=$0(tab.Strings.ShareDialogShowToolbar);this._locShowTabs=$0(tab.Strings.ShareDialogShowTabs);this._locUrlForRssLinks=$0(tab.Strings.ShareDialogUrlForRssLinks);this._locEnterUriForBlogEntry=$0(tab.Strings.ShareDialogEnterUriForBlogEntry);if(tab.BrowserSupport.get_isAndroid()){this._locShareMobileLinkText=$0(tab.Strings.ShareDialogAndroidLinkText);}else{this._locShareMobileLinkText=$0(tab.Strings.ShareDialogMobileLinkText);}this._locShareMobileEmailText=$0(tab.Strings.ShareDialogMobileEmailText);this._locLink=$0(tab.Strings.ShareDialogLink);this._locEmail=$0(tab.Strings.ShareDialogEmail);this._locEmailHelp=$0(tab.Strings.ShareDialogEmailHelp);this._locEmbed=$0(tab.Strings.ShareDialogEmbed);this._locEmbedHelp=$0(tab.Strings.ShareDialogEmbedHelp);this._locDone=$0(tab.Strings.ShareDialogDoneButton);this._locPleaseEnterIntegerBetween=$0(tab.Strings.ShareDialogPleaseEnterIntegerBetween(1,10000));}}
tab.ShareDialogUtil=function(){}
tab.ShareDialogUtil.get_$3=function(){return (!!tsConfig.single_frame)?window.location:window.parent.location;}
tab.ShareDialogUtil.$4=function($p0){if(!!window.parent&&tab.BrowserSupport.get_postMessage()){var $0={tableau:{shareUrl:$p0}};window.parent.postMessage(dojo.toJson($0),'*');}}
tab.ShareDialogUtil.$5=function($p0,$p1,$p2,$p3,$p4){var $0;var $1=$p0;$0=($p1!==$p2);var $2=new RegExp($p3);if(!!$1.match($2)){if($0){$1=$1.replace($2,$p4);}else{$1=$1.replace($2,'');$1=$1.replace(new RegExp('&&'),'&');$1=$1.replace(new RegExp('\\?&'),'?');$1=$1.replace(new RegExp('&$'),'');$1=$1.replace(new RegExp('\\?$'),'');}}else{if($0){if(!!$1.match(new RegExp('[?]'))){$1=$1+'&'+$p4;}else{$1=$1+'?'+$p4;}}}return $1;}
tab.ShareDialogUtil.getShareUrl=function(uri,vizParameterInfo){var $0=vizParameterInfo;var $1=':tabs='+(($0.show_tabs)?'yes':'no');var $2=':tabs=[^&]+';var $3=':display_count='+(($0.show_view_count)?'yes':'no');var $4=':display_count=[^&]+';var $5=':toolbar='+(($0.toolbar)?'yes':'no');var $6=':toolbar=[^&]+';uri=tab.ShareDialogUtil.$5(uri,$0.toolbar,$0.toolbar_default,$6,$5);uri=tab.ShareDialogUtil.$5(uri,$0.show_tabs,$0.show_tabs_default,$2,$1);uri=tab.ShareDialogUtil.$5(uri,$0.show_view_count,$0.show_view_count_default,$4,$3);if(!tsConfig.showVizHome){uri=uri+'&:showVizHome=no';}return uri;}
tab.ShareDialogUtil.doUpdateGeneratedInner=function(){var $0;var $1;var $2=tableau.format.escapeHTML;var $3=tab.$create_LinkBlurbPair();var $4=tab.ShareDialogUtil.share_settings;var $5=$4.share_blog.value;var $6=$4.requestURI;var $7=$4.share_width.value;var $8=$4.share_height.value;var $9=$4.title;var $A=$4.static_image;var $B=$4.beaker;var $C=$4.search;var $D=$4.controller_id;var $E=$4.is_stateful_url;var $F=$4.api_url;var $10=$4.site_root;var $11=$6;var $12=$4.vizParameterInfo;$12.toolbar=$4.share_toolbar.checked;$12.show_tabs=$4.show_tabs.checked;$3.http_link=tab.ShareDialogUtil.getShareUrl($11,$4.vizParameterInfo);$1=parseInt($7,10);$0=parseInt($8,10);$1+=4;$0+=4;if($12.toolbar||$B){$0+=32;}if($12.show_tabs){$0+=26;}if($B){$0+=33;}if($F.indexOf('http://')===-1&&$F.indexOf('https://')===-1){$F=tab.ShareDialogUtil.get_$3().protocol+'//'+tab.ShareDialogUtil.get_$3().host+$F;}var $13="width='"+$1+"' height='"+$0+"'";var $14="<script type='text/javascript' src='"+$F+"'></script>";var $15="<object class='tableauViz' "+$13+" style='display:none;'>";var $16={};$16['embed']=1;$16['toolbar']=1;$16['preview']=1;$16['show_tabs']=1;$16['tabs']=1;$16['host_url']=1;$16['loadOrderID']=1;$16['bootstrapWhenNotified']=1;$16['apiID']=1;$16['openAuthoringInTopWindow']=1;$16['browserBackButtonUndo']=1;$15+="<param name='host_url' value='"+$2(encodeURIComponent((tab.ShareDialogUtil.get_$3().protocol+'//'+tab.ShareDialogUtil.get_$3().host+'/')))+"' /> ";if(!$E){$15+="<param name='site_root' value='"+$2($10)+"' />";$16['site_root']=1;$15+="<param name='name' value='"+$2($D)+"' />";$16['name']=1;}if($E){var $1C=$3.http_link.split('?')[0];$15+="<param name='path' value='"+$2($1C.replaceAll(tab.ShareDialogUtil.get_$3().protocol+'//'+tab.ShareDialogUtil.get_$3().host+'/',''))+"' /> ";$16['path']=1;}if(!$E){$15+="<param name='tabs' value='"+(($12.show_tabs)?'yes':'no')+"' />";}$15+="<param name='toolbar' value='"+(($12.toolbar)?'yes':'no')+"' />";if($B){if(!tab.MiscUtil.isNullOrEmpty($A)){var $1D=$A.replaceAll('_rss.png','.png');$15+="<param name='static_image' value='"+$2($1D)+"' /> ";}$15+="<param name='animate_transition' value='yes' />";$15+="<param name='display_static_image' value='yes' />";$15+="<param name='display_spinner' value='yes' />";$15+="<param name='display_overlay' value='yes' />";$15+="<param name='display_count' value='yes' />";$16['animate_transition']=1;$16['display_static_image']=1;$16['display_spinner']=1;$16['display_overlay']=1;$16['display_count']=1;}if($C.length>0){var $1E=$C.substr(1).split('&');for(var $1F=0;$1F<$1E.length;$1F++){var $20=$1E[$1F].match(new RegExp('^(?::|%3[aA])([^=]+)=(.+)'));var $21;var $22;if(!!$20&&$20.length===3){$21=$20[1];$22=$20[2];}else{$21='filter';$22=$1E[$1F];}if(!tab.MiscUtil.isNullOrEmpty($21)&&$16[$21]!==1){$15+="<param name='"+$2($21)+"' value='"+$2($22)+"' />";}}}$15+='</object>';var $17=$5||'#';var $18='';if(!tab.MiscUtil.isNullOrEmpty($A)){$18="<noscript><a href='"+$2($17)+"'>"+"<img alt='"+$2($9)+" ' src='"+$2($A)+"' style='border: none' /></a></noscript>";}var $19=$6.split('?')[0];var $1A=String.format("<div class='tableauPlaceholder' style='width: {0}px; height: {1}px;'>{2}{3}</div>",$1,$0,$18,$15);var $1B=String.format("<div style='width:{0}px;height:22px;padding:0px 10px 0px 0px;"+"color:black;font:normal 8pt verdana,helvetica,arial,sans-serif;'>"+"<div style='float:right; padding-right:8px;'>"+"<a href='{1}?ref={2}' target='_blank'>{3}</a></div></div>",$1,tsConfig.embedCodeTableauLink,$19,$2(tab.Strings.ShareDialogEmbedCodeTableauText));$3.html_blurb=$14+$1A;if($B){$3.html_blurb+=$1B;}if($E&&(0===$6.length)){$3.http_link=tab.ShareDialogUtil.$0;$3.html_blurb=tab.ShareDialogUtil.$1;}if($E&&$6.length>0&&tab.ShareDialogUtil.share_settings.lastShareUrl!==$3.http_link){tab.ShareDialogUtil.share_settings.lastShareUrl=$3.http_link;tab.ShareDialogUtil.$4($3.http_link);}return $3;}
tab.ShareDialogUtil.doUpdateGenerated=function(){var $0=tab.ShareDialogUtil.share_settings;var $1=tab.ShareDialogUtil.doUpdateGeneratedInner();$0.share_mailto_a.href='mailto:?body='+encodeURIComponent($1.http_link);$0.share_link_a.href=$1.http_link;$0.share_link_textbox.value=$1.http_link;if(tsConfig.isPublic){var $2=new tab.ShareViewModel(null);$2.set_shouldShareOriginalView(true);$0.share_embed_textbox.value=$2.generateEmbedUrl();}else{$0.share_embed_textbox.value=$1.html_blurb;}if(tsConfig.is_mobile){$0.share_mobile_only.style('display','');$0.share_web_only.style('display','none');$0.share_embed_textbox.removeAttribute('readonly');}$0.width=$0.share_width.value;$0.height=$0.share_height.value;$0.blog=$0.share_blog.value;}
tab.ShareDialogUtil.setupShareDialogCommon=function(opts){var $0=tab.ShareDialogUtil.share_settings;$0.share_width.value=opts.width;$0.share_height.value=opts.height;$0.requestURI=opts.request;$0.share_blog.value=(!ss.isUndefined(opts.blog))?opts.blog:'';$0.title=opts.title;$0.beaker=opts.beaker;$0.search=opts.search;$0.static_image=opts.static_image;$0.controller_id=opts.controller_id;$0.watermark_link=opts.watermark_link;$0.toolbar_bottom=opts.toolbar_bottom;$0.watermark_image=opts.watermark_image;if(tsConfig.isPublic){$0.share_header_link.title=opts.server_name;$0.share_header_logo.src=opts.server_logo;}$0.is_stateful_url=opts.is_stateful_url;$0.api_url=opts.api_url;$0.site_root=opts.site_root;$0.vizParameterInfo=opts.vizParameterInfo;$0.share_toolbar.checked=$0.vizParameterInfo.toolbar;$0.show_tabs.checked=$0.vizParameterInfo.show_tabs;if(!opts.tabs_allowed){$0.show_tabs_label.style.visibility='hidden';$0.show_tabs.style.visibility='hidden';}if(!!!opts.static_image||String.isNullOrEmpty(opts.static_image)){$0.share_rss_blog_row.style.display='none';}if(opts.is_stateful_url){$0.show_tabs_label.style.display='none';$0.show_tabs.style.display='none';}tab.ShareDialogUtil.doUpdateGenerated();}
tab.ShareDialogUtil.$6=function($p0){if(!$p0.length){return false;}for(var $0=0;$0<$p0.length;$0++){var $1=$p0.charAt($0);if(($1>'9')||($1<'0')){return false;}}return true;}
tab.ShareDialogUtil.$7=function($p0){while(!!$p0.parentNode){if($p0===tab.ShareDialogUtil._popup){return false;}$p0=$p0.parentNode;}return true;}
tab.ShareDialogUtil.pushShareFieldsToParent=function(){try{if(tsConfig.isPublic&&!!window.parent&&('beaker' in window.parent)&&(typeof(window.parent.beaker.setupShareFields)==='function')){window.parent.beaker.setupShareFields({embed:tab.ShareDialogUtil.share_settings.share_embed_textbox.value,link:tab.ShareDialogUtil.share_settings.share_link_textbox.value});}}catch($0){}}
tab.ShareDialogUtil.setupShareDialog=function(options){var $0=tab.ShareDialogUtil.share_settings;var $1=dojo.byId('share_dialog');$0.share_width=dojo.byId('share_width');$0.share_height=dojo.byId('share_height');$0.share_toolbar=dojo.byId('share_toolbar');$0.share_mailto_a=dojo.byId('share_mailto_a');$0.share_mobile_only=dojo.query('.share_mobile_only',$1);$0.share_web_only=dojo.query('.share_web_only',$1);$0.share_link_textbox=dojo.byId('share_link_textbox');$0.share_link_a=dojo.byId('share_link_a');$0.share_embed_textbox=dojo.byId('share_embed_textbox');$0.share_blog=dojo.byId('share_blog');$0.dimension_warning=dojo.byId('dimension_warning');$0.share_header_link=dojo.byId('share_header_link');$0.share_header_logo=dojo.byId('share_header_logo');$0.share_rss_blog_row=dojo.byId('share_rss_blog_row');$0.show_tabs=dojo.byId('show_tabs');$0.show_tabs_label=dojo.byId('show_tabs_label');$0.show_toolbar=dojo.byId('share_toolbar');$0.show_toolbar_label=dojo.byId('share_toolbar_label');tab.ShareDialogUtil.setupShareDialogCommon(options);tab.ShareDialogUtil.pushShareFieldsToParent();}
tab.ShareDialogUtil.validateReasonableDimension=function(elementName,doupdate){var $0=false;var $1=((tab.ShareDialogUtil.share_settings)[elementName]).value;if(tab.ShareDialogUtil.$6($1)){var $2=parseInt($1,10);if($2<10000&&$2>0){((tab.ShareDialogUtil.share_settings)[elementName]).style.color='black';tab.ShareDialogUtil.share_settings.dimension_warning.style.visibility='hidden';if(doupdate){tab.ShareDialogUtil.doUpdateGenerated();}return;}else{$0=true;}}else{$0=true;}if($0){((tab.ShareDialogUtil.share_settings)[elementName]).style.color='red';tab.ShareDialogUtil.share_settings.dimension_warning.style.visibility='';}}
tab.ShareDialogUtil.toggleMobileClientVizDisplay=function(show){dojo.query("[id^='tableau_mobile_MobileClient']",dojo.doc).forEach(function($p1_0,$p1_1){
var $1_0=dijit.byNode($p1_0);if(!!$1_0){if(show){$1_0.enableBodyTouchHandler();}else{$1_0.disableBodyTouchHandler();}dojo.style($1_0.domScroll,'display',(show)?'':'none');}});}
tab.ShareDialogUtil.hideShareDialog=function(){tab.ShareDialogUtil.toggleMobileClientVizDisplay(true);(dijit.byId('share_dialog')).hide();}
tab.ShareDialogUtil.showPopup=function(){if(!!tab.ShareDialogUtil._popup){tab.ShareDialogUtil._popup.style.visibility='hidden';document.getElementById('displayOptionsHeader').className='closed';tab.ShareDialogUtil._popup=null;return;}var $0=document.getElementById('optionsPopup');$0.style.visibility='visible';document.getElementById('displayOptionsHeader').className='open';tab.ShareDialogUtil._popup=$0;tab.ShareDialogUtil.$2='true';}
tab.ShareDialogUtil.hideActivePopup=function(e){var $0;var $1=(!!e&&!!e.target)?e.target:(event && event.srcElement);if(!!!tab.ShareDialogUtil._popup){return;}if(tab.ShareDialogUtil.$2==='true'){tab.ShareDialogUtil.$2='false';return;}$0=tab.ShareDialogUtil.$7($1);if($0){tab.ShareDialogUtil._popup.style.visibility='hidden';document.getElementById('displayOptionsHeader').className='closed';tab.ShareDialogUtil._popup=null;}}
tab.ShownEventArgs=function(){tab.ShownEventArgs.initializeBase(this);}
tab.ShownEventArgs.areShownArgsSame=function(args1,args2){if(ss.isNullOrUndefined(args1)&&ss.isNullOrUndefined(args2)){return true;}if((ss.isNullOrUndefined(args1)&&ss.isValue(args2))||(ss.isValue(args1)&&ss.isNullOrUndefined(args2))){return false;}var $0;$0=args1.origX===args2.origX;$0=$0&&args1.origY===args2.origY;$0=$0&&args1.shownX===args2.shownX;$0=$0&&args1.shownY===args2.shownY;$0=$0&&args1.position===args2.position;$0=$0&&tab.RectUtil.isEqual(args1.viewport.get_dimensions(),args2.viewport.get_dimensions());return $0;}
tab.ShownEventArgs.prototype={shownX:0,shownY:0,origX:0,origY:0,position:null,viewport:null}
tab.Slider=function(targetDiv,attrs,isAll,doUpdateFunc,getTitleOffsetFunc,getCurrentTextFunc,onIntermediateChangeFunc,getCurrentFacetFunc,showFacets){this.$3=-1;this.$4=['show-readout','hide-readout'];this.$5=['show-slider','hide-slider'];this.$6=['show-step-btns','hide-buttons'];this.$7=['show-ticks','hide-ticks'];this.div=targetDiv;this.$8=attrs;this.$16=isAll;this.$17=doUpdateFunc;this.$12=getTitleOffsetFunc;this.$15=getCurrentTextFunc;this.$18=onIntermediateChangeFunc;this.$1C=getCurrentFacetFunc;this.$1A=showFacets;dojo.addClass(this.div,'tableauWidgetUiSlider');this.$1=new tab.DisposableHolder();this.currentlySelected=-1;}
tab.Slider.prototype={$1:null,styleid:0,$2:null,div:null,$8:null,currentlySelected:0,numValues:0,$9:null,$A:null,slider:null,readout:null,$B:false,$C:null,$D:null,$E:null,$F:null,$10:null,$11:false,$12:null,$13:null,$14:false,$15:null,$16:false,$17:null,$18:null,$19:null,$1A:false,$1B:false,$1C:null,$1D:null,get_oneLineLayout:function(){return this.$1B;},$1E:function($p0){return (this.$8[$p0[0]]!=='false'&&this.$8[$p0[1]]!=='true');},calculateStyleid:function(){this.styleid=0;if(!this.$1E(this.$4)){this.styleid+=4;}if(!this.$1E(this.$5)){this.styleid+=2;}if(!this.$1E(this.$6)){this.styleid+=1;}if(this.styleid>5){this.styleid=3;}},dispose:function(){this.$1.dispose();},destroy:function(){dojo.unsubscribe(this.$9);dojo.unsubscribe(this.$A);this.$29();this.dispose();if(ss.isValue(this.$1D)){this.$1D.domNode.parentNode.removeChild(this.$1D.domNode);this.$1D=null;}if(ss.isValue(this.slider)&&(typeof(this.slider.destroy)==='function')){this.slider.destroy();}if(ss.isValue(this.$2)&&(typeof(this.$2.destroy)==='function')){this.$2.destroy();}},instantiateFromDomain:function(domain,current){var $0=[];var $1=domain.length;for(var $2=0;$2<$1;$2++){$0[$2]=tab.$create_TupleStruct(domain[$2],current===domain[$2],new Array(0));}this.instantiateFromTuples($0,null);},instantiateFromTuples:function(t,text){var $0=-1;var $1=tab.Strings.QuickFilterUnknown;var $2=null;if(t.length>0){var $3=t.length;for(var $4=0;$4<$3;$4++){if(!!t[$4].s&&!this.$16){if($0>-1){$1=tab.Strings.QuickFilterMultipleValues;}else{$0=$4;$1=this.$15($4);}}}}if($0<0){$0=0;if(ss.isValue(text)){$1=text;}}if(this.$1A){$2=this.$1C($0);}this.instantiate(t.length,$0,$1,$2);},instantiate:function(numValues,currentlySelectedArg,initialText,facet){var $0=null;this.currentlySelected=currentlySelectedArg;this.calculateStyleid();if(this.$1E(this.$4)){this.readout=document.createElement('div');dojo.addClass(this.readout,'sliderTextReadout');dojo.addClass(this.readout,'tab-ctrl-formatted-widget');dojo.addClass(this.readout,'tab-ctrl-formatted-fixedsize');this.$C=document.createElement('div');dojo.addClass(this.$C,'sliderText');this.$C.innerHTML=tableau.format.escapeHTML(initialText);if(this.$1A){this.$D=document.createElement('div');dojo.addClass(this.$D,'facet');this.$D.innerHTML=tableau.format.escapeHTML(facet);this.readout.appendChild(this.$D);}this.readout.appendChild(this.$C);this.div.appendChild(this.readout);}if(this.styleid===3){return;}var $1=document.createElement('div');if(this.$1E(this.$5)){$0=document.createElement('div');$1.appendChild($0);}this.div.appendChild($1);if(numValues<1){numValues=1;}this.$B=(!isFinite(numValues));if(this.$1E(this.$5)&&numValues<1200&&this.$1E(this.$7)){var $3={count:numValues};this.$2=new dijit.form.HorizontalRule($3,$0);}var $2=tab.$create_SliderParams();$2.templateString=tab.Slider.tableauSliderTemplate;$2.onChange=ss.Delegate.create(this,this.$26);$2.value=this.currentlySelected;$2.slideDuration=0;$2.intermediateChanges=true;$2.showButtons=this.$1E(this.$6);$2.pageIncrement=1;if(isFinite(numValues)){$2.minimum=0;$2.maximum=numValues-1;$2.discreteValues=numValues;}this.slider=new dijit.form.HorizontalSlider($2,$1);this.$9=dojo.subscribe('/dnd/move/start',ss.Delegate.create(this,this.startDrag));this.$A=dojo.subscribe('/dnd/move/stop',ss.Delegate.create(this,this.stopDrag));this.slider.startup();if(ss.isValue(this.$2)){this.$2.startup();}this.$14=false;if(!this.$1E(this.$4)){this.$E=document.createElement('div');this.slider.sliderHandle.appendChild(this.$E);var $4=(dijit._MasterTooltip).prototype;$4['templateString']=tab.Slider.$0;this.$1D=new dijit._MasterTooltip();this.$1D.dojoOrient=this.$1D.orient;this.$1D.orient=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2,$p1_3){
this.$1D.dojoOrient($p1_0,$p1_1,$p1_2,$p1_3);dojo.addClass(this.$1D.domNode,'sliderThumbTooltip');});var $5=$(this.slider.sliderHandle);this.$1.add(spiff.EventUtil.bindWithDispose($5,'mouseenter',ss.Delegate.create(this,this.$21)));this.$1.add(spiff.EventUtil.bindWithDispose($5,'mouseleave',ss.Delegate.create(this,this.$22)));}this.$F=this.slider.decrementButton.childNodes[0];this.$10=this.slider.incrementButton.childNodes[0];this.$1F();this.$27();},$1F:function(){this.$20(this.$F,'Left',!this.currentlySelected);this.$20(this.$10,'Right',this.currentlySelected===this.slider.maximum);},$20:function($p0,$p1,$p2){dojo.removeClass($p0,'cp'+$p1+'Arrow'+(($p2)?'Black':'Grey'));dojo.addClass($p0,'cp'+$p1+'Arrow'+(($p2)?'Grey':'Black'));},refreshSliderMarksForIE:function(){if(dojo.isIE<=7){if(ss.isValue(this.$2)){this.$2.domNode.className=this.$2.domNode.className+' ';}}},setNewState:function(newSelected){this.currentlySelected=newSelected;this.slider._setValueAttr(this.currentlySelected);this.refreshSliderMarksForIE();},startDrag:function($p0){if(ss.isValue($p0)&&$p0.node===this.slider.sliderHandle){this.$11=true;if(this.$3>0){this.$29();}}},stopDrag:function($p0){if(ss.isValue($p0)&&$p0.node===this.slider.sliderHandle){this.$11=false;if(this.$3>0){this.$29();}this.$28();this.$23();}},$21:function($p0){if(!this.$1E(this.$4)){if(ss.isValue(this.$13)){window.clearTimeout(this.$13);this.$13=null;}this.$14=true;this.$13=window.setTimeout(ss.Delegate.create(this,this.$23),50);}},$22:function($p0){if(ss.isValue(this.$13)){window.clearTimeout(this.$13);this.$13=null;}if(ss.isValue(this.$1D)){this.$1D.hide(this.$E);}this.$14=false;},$23:function(){if(!this.$1E(this.$4)){this.$1D.hide(this.$E);if(this.$14||this.$11){var $0=this.$19||parseInt(this.currentlySelected);var $1=this.$15($0);this.$1D.show($1,this.$E,['above','below']);}}},$24:function($p0){var $0;if(ss.isUndefined($p0)||isNaN($p0)){return 0;}if(this.$B){$0=$p0;}else{$0=parseInt($p0.toString(),10);}if($0<0){$0=0;}return $0;},$25:function(){if(ss.isNullOrUndefined(this.$19)||ss.isNullOrUndefined(this.currentlySelected)||this.$19===this.currentlySelected){return;}var $0=this.$24(this.$19);if(ss.isValue(this.$17)){this.$17($0);}this.$19=$0;this.currentlySelected=$0;this.$1F();},updateReadout:function(text,facet){if(this.styleid<4){this.$C.innerHTML=text;if(this.$1A){this.$D.innerHTML=facet;}}},$26:function($p0){if(isNaN($p0)){return;}var $0=(this.$1A)?this.$1C($p0):null;this.updateReadout(this.$15($p0),$0);this.$19=$p0;if(ss.isValue(this.$18)){this.$18();}if(!this.$11){if(this.$3>0){this.$29();}this.$28();}else{if(this.$3>0){this.$29();}}this.$23();},$27:function(){if(!this.$1E(this.$6)){dojo.addClass(this.div,'HideArrows');}if(!this.$1E(this.$5)){dojo.addClass(this.div,'HideSlider');}if(this.styleid>3){dojo.style(this.div,'height','15px');}},$28:function(){this.$3=window.setTimeout(ss.Delegate.create(this,this.$2A),500);},$29:function(){if(this.$3>0){window.clearTimeout(this.$3);this.$3=-1;}},$2A:function(){this.$25();},layout:function(){var $0=0;var $1=34;this.$1B=false;dojo.style(this.div,'overflow','hidden');var $2=dojo.marginBox(this.div).h;var $3=parseInt(dojo.style(this.div,'width'))-5;dojo.style(this.div,'overflow','');if($3<$1){return;}if(ss.isValue(this.readout)){dojo.style(this.readout,'width','');dojo.style(this.readout,'float','none');}if(ss.isValue(this.slider)){dojo.style(this.slider.tableauSlider,'width','');dojo.style(this.slider.tableauSlider,'float','none');}if(ss.isValue(this.$2)&&(this.$2.count*4>$3)){dojo.style(this.$2.domNode,'display','none');}if($2<38&&this.styleid<=1){var $4=(!this.styleid)?($3-$1):$3;$4=Math.floor(($4-14)/2);dojo.style(this.readout,'width',$4+'px');dojo.style(this.slider.tableauSlider,'width',$4+'px');dojo.style(this.readout,'float','left');dojo.style(this.slider.tableauSlider,'float','left');this.$1B=true;}else if(!this.styleid||this.styleid===4){dojo.style(this.slider.tableauSlider,'width',$3-$1+'px');}else if(this.styleid===1||this.styleid===5){dojo.style(this.slider.tableauSlider,'width',$3+'px');}else if(this.styleid===2){dojo.style(this.readout,'width',$3-$1-4+'px');}if(this.$1E(this.$6)){if(this.styleid===2||this.styleid===4){$0=2;}if(!this.styleid){$0=(this.$1B)?2:21;}$0+=this.$12();dojo.style(this.slider.incrementButton,'top',$0+'px');dojo.style(this.slider.decrementButton,'top',$0+'px');}}}
tab.SmallSearchWidget=function(r,dom){this.templateString="<div class='SmallSearch'>"+"<div class='SmallSearchBox' dojoAttachPoint='domSearchBox'>"+"<div class='Autocompleter' dojoAttachPoint='domAutocompleter'></div>"+"<div class='wcSearchX dijitInlineTable' title='${XBUTTON_CLOSE_TOOLTIP}'"+"dojoAttachPoint='domXButton'"+"dojoAttachEvent='onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></div>"+'</div>'+'</div>';tab.SmallSearchWidget.initializeBase(this);}
tab.SmallSearchWidget.prototype={domSearchBox:null,domAutocompleter:null,autocompleter:null,get_applyDelay:function(){alert(tab.Strings.noLoc('Bad call of ApplyDelay on SmallSearchWidget'));return 0;},startup:function(){this.inherited(arguments);var $0={};$0.store=null;$0.autoComplete=false;$0.hasDownArrow=false;$0.highlightMatch='none';$0.searchDelay=this.searchDelay;$0.onChange=ss.Delegate.create(this,this.applyChanges);$0.onKeyDown=ss.Delegate.create(this,this.onQueryBoxKeyDown);this.autocompleter=new dijit.form.ComboBox($0,this.domAutocompleter);this.autocompleter.startup();this.autocompleter._getQueryString=function($p1_0){
var $1_0=$p1_0.length;if($1_0<1){return '';}if($p1_0.charAt(0)==='"'&&$p1_0.charAt($1_0-1)==='"'){return $p1_0.substr(1,$1_0-2);}var $1_1=$p1_0;if($1_1.length>1&&$1_1.charAt(0)==='\\'&&$1_1.charAt(1)==='*'){$1_1='*'+$1_1.substr(2);}if($1_1.length>1&&$1_1.charAt($1_1.length-2)==='\\'&&$1_1.charAt($1_1.length-1)==='*'){$1_1=$1_1.substr(0,$1_1.length-2)+'*';}if($1_1.charAt(0)!=='*'&&$1_1.charAt($1_1.length-1)!=='*'){$1_1='*'+$1_1+'*';}return $1_1;};var $1=this.NO_MATCHES;this.autocompleter.DOJO_openResultList=this.autocompleter._openResultList;this.autocompleter._openResultList=ss.Delegate.create(this,function($p1_0,$p1_1){
this.resultCount=$p1_0.length;this.autocompleter.DOJO_openResultList($p1_0,$p1_1);if(!!!$p1_0.length){this.autocompleter.tooltipPosition=['above','below'];this.autocompleter.displayMessage($1);}else{dijit.hideTooltip(this.autocompleter.domNode);}});},getDataStore:function(){var $0;var $1=[];var $2;var $3=this.get_qf().get_oFilter().table.tuples;for($0=0,$2=$3.length;$0<$2;$0++){$1.add({name:this.formatTuple($3[$0])});}return new dojo.data.ItemFileWriteStore({data:{items:$1}});},destroy:function(preserveDom){this.domSearchBox.innerHTML='';this.autocompleter.destroy();this.autocompleter=null;this.inherited(arguments);},focusQueryBox:function(){this.autocompleter.focus();},blurQueryBox:function(){this.autocompleter._onBlur();},getQuery:function(){return this.autocompleter.attr('value');},setQuery:function(value){this.autocompleter.attr('value',value);},fixQueryWidth:function(){var $0=dojo.marginBox(this.domNode).w;if($0>25){var $1={w:$0-25};dojo.marginBox(this.autocompleter.comboNode,$1);dojo.marginBox(this.autocompleter.comboNode.firstChild,$1);dojo.marginBox(this.autocompleter.textbox,$1);}dojo.style(this.autocompleter.comboNode,'float','left');},showUI:function(noLayout){if(this.get_isVisible()){return;}tab.SmallSearchWidget.callBaseMethod(this, 'showUI',[noLayout]);this.get_qf().get_modeContents().onSmallSearchUI(true,this.domNode);},hideUI:function(){if(!this.get_isVisible()){return;}tab.SmallSearchWidget.callBaseMethod(this, 'hideUI');this.get_qf().get_modeContents().onSmallSearchUI(false,this.domNode);},layout:function(){this.fixQueryWidth();},updateSearch:function(){this.autocompleter.store=this.getDataStore();this.get_qf().get_modeContents().onSmallSearchUI(this.get_isVisible(),this.domNode);},applyChanges:function($p0){if(!!!$p0){return;}var $0=[];var $1=this.get_qf().get_oFilter().table.tuples;for(var $2=0,$3=$1.length;$2<$3;$2++){if($p0===this.formatTuple($1[$2])){$0.add($1[$2]);$1[$2].s=true;}else if($1[$2].s){delete $1[$2].s;}}if(!!$0.length){this.get_qf().updateStateFromSearch(null);var $4=($0[0].d||$0[0].t[0].v);var $5=[$4];tab.FilterClientCommands.setCategoricalFilterValues(this.get_qf().get_session().get_visualId(),this.get_qf().get_field(),'filter-replace',$5);this.clearSearch(false,true);this.onXButtonClick(null);}}}
tab.Social=function(){}
tab.Social.twitterPopup=function(vizLink,tweetText){var $0=$('#twitter_creator');var $1=(ss.isValue($0))?$0.attr('content'):null;if(!String.isNullOrEmpty($1)){$1=' '+$1;}tweetText+=$1;var $2={};$2['url']=vizLink;$2['via']='tableau';$2['text']=tweetText;$2['related']='tableau';var $3='https://twitter.com/share?'+dojo.objectToQuery($2);var $4=null;var $5='scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=680,height=350';window.open($3,$4,$5);}
tab.Social.facebookPopup=function(appid,vizLink,thumbnailUrl,name,description,redirectUri){var $0={};$0['app_id']=appid;$0['link']=vizLink;$0['picture']=thumbnailUrl;$0['name']=name;$0['description']=description;if(!!redirectUri&&redirectUri.length>0){$0['redirect_uri']=redirectUri;}var $1='http://www.facebook.com/dialog/feed?'+dojo.objectToQuery($0);var $2=null;var $3='scrollbars=yes,resizable=yes,toolbar=no,location=no,width=1000,height=565';var $4=window.open($1,$2,$3);if((typeof($4.focus)==='function')){$4.focus();}}
tab.Social.mailTo=function(shareUrl,description){var $0={body:shareUrl};if(!!description){$0['subject']=description;}var $1='mailto:?'+dojo.objectToQuery($0);window.location.href=$1;}
tab.StepperControlView=function(viewModel,template){tab.StepperControlView.initializeBase(this,[viewModel,template]);this.dom=template;this.set_stepperViewModel(viewModel);this.dom.valueText.addClass(this.get_stepperViewModel().textClass);this.dom.valueText.val(viewModel.get_value().toString());this.dom.valueText.keydown(tableau.util.preventNonNumericInput);this.dom.valueText.keyup(ss.Delegate.create(this,this.$2_3)).blur(ss.Delegate.create(this,function(){
this.commitStepValueText();}));this.disposables.add(spiff.ClickHandler.targetAndClick(this.dom.incrementButton,ss.Delegate.create(this,function($p1_0){
this.$2_2(this.get_stepperViewModel().get_step());})));this.disposables.add(spiff.ClickHandler.targetAndClick(this.dom.decrementButton,ss.Delegate.create(this,function($p1_0){
this.$2_2(-this.get_stepperViewModel().get_step());})));this.$2_0=_.debounce(ss.Delegate.create(this,function($p1_0){
this.$2_1.set_value($p1_0);this.dom.valueText.val(this.get_stepperViewModel().get_value().toString());}),1000);this.$2_4();this.dom.incrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isIncrementEnabled());this.dom.decrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isDecrementEnabled());}
tab.StepperControlView.prototype={$2_0:null,$2_1:null,dom:null,get_stepperViewModel:function(){return this.$2_1;},set_stepperViewModel:function(value){this.$2_1=value;return value;},$2_2:function($p0){if(!this.get_stepperViewModel().get_isEnabled()){return;}var $0=parseInt(this.dom.valueText.val());if(ss.isValue($0)&&!isNaN($0)){var $1=$0+$p0;if(this.get_stepperViewModel().isValueWithinRange($1)){this.dom.valueText.val($1.toString());this.$2_0($1);}}},commitStepValueText:function(){if(!this.get_stepperViewModel().get_isEnabled()){return;}var $0=parseInt(this.dom.valueText.val());if(this.get_stepperViewModel().get_value()===$0){return;}else if(ss.isValue($0)&&!isNaN($0)){this.get_stepperViewModel().set_value($0);}},$2_3:function($p0){if(!this.get_stepperViewModel().get_isEnabled()){return;}if($p0.which===13){this.commitStepValueText();}},$2_4:function(){if(this.get_stepperViewModel().get_isEnabled()){this.dom.valueText.removeAttr('disabled');}else{this.dom.valueText.attr('disabled','disabled');}},onViewModelPropertyChanged:function(sender,e){tab.StepperControlView.callBaseMethod(this, 'onViewModelPropertyChanged',[sender,e]);if(e.get_propertyName()==='Value'){this.dom.valueText.val(this.get_stepperViewModel().get_value().toString());}else if(e.get_propertyName()==='IsEnabled'){this.$2_4();}else if(e.get_propertyName()==='IsIncrementEnabled'){this.dom.incrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isIncrementEnabled());}else if(e.get_propertyName()==='IsDecrementEnabled'){this.dom.decrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isDecrementEnabled());}}}
tab.StepperControlTemplate=function(template){tab.StepperControlTemplate.initializeBase(this,[$(template)]);}
tab.StepperControlTemplate.prototype={decrementButton:null,incrementButton:null,valueText:null}
tab.TabbedNavigation=function(paramaters,srcNodeRef){this.templateString="<div style='width:${innerWidth};' class='tabbedNavigationOuterWrapper'>"+"<div id='container' dojoType='dijit.layout.LayoutContainer' style='width:100%; height:100%;' dojoAttachPoint='_innerWrapper'>"+"<button dojoType='dijit.form.Button' class='tabsMenuBtn' layoutAlign='left' id='menuBtn' dojoAttachPoint='_menuBtn' style='display:none;'></button>"+"<button dojoType='dijit.form.Button' class='tabsLeftBtn' layoutAlign='left' dojoAttachPoint='_leftBtn' style='display:none;'></button>"+"<button dojoType='dijit.form.Button' class='tabsRightBtn' layoutAlign='right' dojoAttachPoint='_rightBtn' style='display:none;'></button>"+"<div dojoType='dijit.layout.LayoutContainer' layoutAlign='client' dojoAttachPoint='_containerNode'>"+"<div class='dijitTabContainerTop-tabs' dojoAttachPoint='_scrollNode'></div>"+'</div>'+'</div>'+'</div>';tab.TabbedNavigation.initializeBase(this);this.$2_0=[];this.$2_1=[];this.$2_2=[];this.$2_0=tsConfig.visible_sheets||this.$2_0;var $0=this._indexOf(this.$2_0,tsConfig.current_sheet_name);this.currentTabIndex=(!!$0)?$0:this.currentTabIndex;this.innerWidth=(paramaters['innerWidth']||this.innerWidth);}
tab.TabbedNavigation.prototype={baseClass:'tableauTabbedNavigation',widgetsInTemplate:true,innerWidth:'100%',currentTabIndex:0,$2_0:null,$2_1:null,$2_2:null,currentTab:null,_scrollNode:null,_leftBtn:null,_rightBtn:null,_menuBtn:null,_containerNode:null,_innerWrapper:null,$2_3:null,$2_4:null,_anim:null,_buttons:null,startup:function(){dojo.query('button',this._leftBtn.domNode).addClass('tnLeftButton');dojo.query('button',this._rightBtn.domNode).addClass('tnRightButton');dojo.query('button',this._menuBtn.domNode).addClass('tnMenuButton');this.containerNode=this.domNode;this.inherited(arguments);},destroy:function(){dojo.forEach(this.$2_2,dojo.unsubscribe);this.$2_3.dispose();this.$2_4.dispose();},layout:function(){if(!this.$2_0.length){return;}var $0=dojo.contentBox(this._containerNode.domNode);var $1=this.$2_A($0.w);this._buttons.style('display',($1)?'':'none');this._innerWrapper.layout();dojo.style(this._containerNode.domNode,'top','-1px');if(!$1){this._containerNode.domNode.scrollLeft=0;}this.$2_F(this.currentTab);this.$2_16();if(tabBootstrap.ViewerBootstrap.get_instance().shouldShowTabs()){$('.tabbedNavigationWrapper').css('visibility','visible');$('.tabbedNavigationOuterWrapper').css('display','');}else{$('.tabbedNavigationOuterWrapper').css('display','none');}},redimMenu:function(data){this.$2_3.get_element().css('max-height',Math.min(600,Math.floor(data.h*0.9))+'px');},postCreate:function(){this.$2_2.push(dojo.subscribe(tab.EventMap.refreshLayoutModel,ss.Delegate.create(this,this.$2_D)));this.$2_2.push(dojo.subscribe(tab.EventMap.onBootstrapSuccess,ss.Delegate.create(this,this.$2_E)));this.$2_2.push(dojo.subscribe(tab.EventMap.onTabSelect,ss.Delegate.create(this,this.$2_6)));this.$2_2.push(dojo.subscribe(tab.EventMap.newLayoutId,ss.Delegate.create(this,this.$2_7)));this.inherited(arguments);this.$2_12();var $0=[];for(var $1=0;$1<this.$2_0.length;$1++){var $2=this.$2_0[$1];this.addTab($2,$1,tsConfig.repository_urls[$1]);this.addToMenu($0,$2);}this.$2_4=new spiff.MenuViewModel();this.$2_4.set_menu(new spiff.Menu($0));this.$2_4.add_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked);this.$2_3=spiff.ObjectRegistry.newView(spiff.MenuView,this.$2_4);this._buttons=dojo.query('.dijitButton',this.domNode);this.layout();},chooseTabByName:function(str){if(ss.isNullOrUndefined(str)){return;}var $0=this.$2_8(str);if(ss.isValue($0)){this.chooseTab($0);}},chooseTab:function(selected){if(ss.isNullOrUndefined(selected)){return;}this.$2_C(selected);},addTab:function(tabElement,index,repo){var $0=dojo.doc.createElement('span');this._scrollNode.appendChild($0);var $1=this.baseClass+'_tab_'+index;var $2={};$2.id=$1;$2.label=tableau.format.escapeHTML(tabElement);$2.value=tabElement;$2.showLabel=true;$2.repository_url=repo;$2.onClick=ss.Delegate.create(this,function(){
var $1_0=dijit.byId($1);this.chooseTab($1_0);});var $3=new dijit.layout._TabButton($2,$0);this.$2_1.push($3);},addToMenu:function(items,tabElement){var $0=spiff.MenuItem.newActionItem(tabElement,ss.Delegate.create(this,function(){
this.chooseTabByName(tabElement);}));items.add($0);},$2_5:function($p0){var $0=this.$2_8($p0);this.$2_F($0);},$2_6:function($p0){this.$2_5($p0.sheetName);},$2_7:function($p0){this.$2_5($p0.ss);},$2_8:function($p0){for(var $0=0;$0<this.$2_1.length;$0++){if(this.$2_1[$0].value===$p0){return this.$2_1[$0];}}return null;},$2_9:function(){var $0=dojo.query('.dijitTab',this._scrollNode);if(!!$0.length){var $1=$0[0];var $2=$0[$0.length-1];return $2.offsetLeft+dojo.style($2,'width')-$1.offsetLeft;}else{return 0;}},$2_A:function($p0){var $0=this.$2_9();return $0>0&&$p0<$0;},_indexOf:function($p0,$p1){for(var $0=0;$0<$p0.length;$0++){if($p0[$0]===$p1){return $0;}}return -1;},$2_B:function(){var $0=dojo.query('.dijitTab',this._scrollNode);var $1=Math.floor(this._containerNode.domNode.offsetWidth);var $2=this.$2_9();var $3=tab.$create_ScrollBound();if(!!$0.length&&$2>$1){$3.min=0;$3.max=($0[$0.length-1].offsetLeft+dojo.style($0[$0.length-1],'width'))+2-$1;}else{$3.min=0;$3.max=0;}return $3;},getCurrentSheetInfo:function(){return {sheetName:this.currentTab.value,repositoryUrl:this.currentTab.repository_url};},$2_C:function($p0){if(ss.isValue(this.currentTab)&&this.currentTab.value===$p0.value){return;}var $0={};$0.sheetName=$p0.value;$0.repositoryUrl=$p0.repository_url;$0.oldRepositoryUrl=(ss.isValue(this.currentTab))?this.currentTab.repository_url:null;dojo.publish(tab.EventMap.onTabSelect,[$0]);},$2_D:function($p0){this.redimMenu($p0);},$2_E:function($p0){this.currentTabIndex=this._indexOf(this.$2_0,$p0);this.$2_F(this.currentTab);},$2_F:function($p0){if(ss.isValue(this.currentTab)){this.currentTab.attr('checked',false);}else{$p0=this.currentTab=this.$2_1[this.currentTabIndex];}if(ss.isNullOrUndefined($p0)){return;}$p0.attr('checked',true);this.currentTab=$p0;this.$2_10($p0);},$2_10:function($p0){var $0=$p0.domNode;var $1=this._getScroll();if($1>$0.offsetLeft||$1+dojo.style(this._containerNode.domNode,'width')<$0.offsetLeft+dojo.style($0,'width')){this._createSmoothScroll($p0).play();}},$2_11:function($p0){var $0=$p0.domNode;var $1=dojo.style(this._containerNode.domNode,'width');var $2=this.$2_B();var $3;$3=($0.offsetLeft+(dojo.style($0,'width')/2))-($1/2);$3=Math.min(Math.max($3,$2.min),$2.max);return $3;},$2_12:function(){this.connect(this._rightBtn,'onClick',ss.Delegate.create(this,function(){
this.$2_14(this._rightBtn);}));this.connect(this._leftBtn,'onClick',ss.Delegate.create(this,function(){
this.$2_14(this._leftBtn);}));this.connect(this._menuBtn,'onClick',ss.Delegate.create(this,this.toggleMenu));this.connect(window,'onresize',ss.Delegate.create(this,this.$2_13));},$2_13:function(){var $0=this.$2_3.get_element().get(0);if($0.style.display!=='none'&&$0.style.visibility!=='hidden'){var $1=this._menuBtn.domNode;var $2=$($1).offset();$0.style.top=($2.top+$1.offsetHeight)+'px';$0.style.left=$2.left+'px';}},toggleMenu:function(){if(this.$2_4.get_visible()){this.$2_4.hide();}else{this.$2_4.show(spiff.ShowMenuOptions.create($(this._menuBtn.domNode)));}},$2_14:function($p0){if($p0.dojoAttachPoint==='_leftBtn'){this.$2_15(-1);}else{this.$2_15(1);}},$2_15:function($p0){var $0=dojo.style(this._containerNode.domNode,'width');var $1=($0*0.5)*$p0;var $2=this._getScroll()+$1;this._createSmoothScroll(null,$2).play();},_getScroll:function(){return this._containerNode.domNode.scrollLeft;},_createSmoothScroll:function($p0,$p1){if(ss.isValue($p0)){$p1=this.$2_11($p0);}else{var $2=this.$2_B();$p1=Math.min(Math.max($p1,$2.min),$2.max);}if(ss.isValue(this._anim)&&this._anim.status()==='playing'){this._anim.stop();}var $0=null;var $1={};$1.duration=100;$1.beforeBegin=ss.Delegate.create(this,function(){
var $1_0=this._containerNode.domNode.scrollLeft;$0.curve=new dojo._Line($1_0,$p1);});$1.onAnimate=ss.Delegate.create(this,function($p1_0){
this._containerNode.domNode.scrollLeft=$p1_0;});$1.onEnd=ss.Delegate.create(this,function(){
this.$2_16();});$0=new dojo._Animation($1);this._anim=$0;return $0;},$2_16:function(){var $0=this._getScroll();var $1=this.$2_B();var $2;var $3;if($0>$1.max){this._containerNode.domNode.scrollLeft=$1.max;}$3=$0>=$1.max;$2=$0<=$1.min;this._rightBtn.setAttribute('disabled',$3);this._leftBtn.setAttribute('disabled',$2);dojo.query('button',this._rightBtn.domNode).toggleClass('tnRightButtonDisabled',$3);dojo.query('button',this._leftBtn.domNode).toggleClass('tnLeftButtonDisabled',$2);}}
tab.TabEventArgs=function(tabLabelElement,tabContentElement,tabIndex){tab.TabEventArgs.initializeBase(this);this.tabLabelElement=tabLabelElement;this.tabContentElement=tabContentElement;this.tabIndex=tabIndex;}
tab.TabEventArgs.prototype={tabLabelElement:null,tabContentElement:null,tabIndex:0}
tab.TabView=function(){this.$1_A=[];this.$1_B=[];tab.TabView.initializeBase(this,[$("<div class='tab-tabView'><ul class='tab-tabLabels'></ul><div class='tab-tabContent'></div></div>")]);this.get_element().delegate('.tab-tabLabel',this.createNamespacedEventName('click'),ss.Delegate.create(this,this.$1_15));this.$1_C=$("<div class='tab-tabViewLoading'>&nbsp;</div>");this.$1_D=spiff.HoverAddClassBehavior.attach(this,'hover','.tab-tabLabel');}
tab.TabView.prototype={$1_C:null,$1_D:null,$1_E:null,add_tabShown:function(value){this.$1_F=ss.Delegate.combine(this.$1_F,value);},remove_tabShown:function(value){this.$1_F=ss.Delegate.remove(this.$1_F,value);},$1_F:null,add_tabSelected:function(value){this.$1_10=ss.Delegate.combine(this.$1_10,value);},remove_tabSelected:function(value){this.$1_10=ss.Delegate.remove(this.$1_10,value);},$1_10:null,add_tabContentLoaded:function(value){this.$1_11=ss.Delegate.combine(this.$1_11,value);},remove_tabContentLoaded:function(value){this.$1_11=ss.Delegate.remove(this.$1_11,value);},$1_11:null,add_tabContentFailed:function(value){this.$1_12=ss.Delegate.combine(this.$1_12,value);},remove_tabContentFailed:function(value){this.$1_12=ss.Delegate.remove(this.$1_12,value);},$1_12:null,get_selectedIndex:function(){return this.$1_E;},addUrlTab:function(tabLabelContent,tabPaneContentUrl){var $0=this.$1_A.length;var $1=$("<li class='tab-tabLabel'></li>");$1.append(tabLabelContent);$1.data('tabIndex',$0);this.$1_A.add($1);var $2=$('<div></div>');$2.data('tabContentUrl',tabPaneContentUrl);this.$1_B.add($2);this.get_element().find('.tab-tabLabels').append($1);return $0;},selectTab:function(index){if(ss.isNullOrUndefined(index)||index<0||index>=this.$1_B.length){return;}if(ss.isValue(this.$1_E)&&this.$1_E===index){return;}this.get_element().find('.tab-tabContent').children().detach();if(ss.isValue(this.$1_E)){this.$1_A[this.$1_E].removeClass('selected');}this.$1_E=index;this.$1_A[index].addClass('selected');this.get_element().find('.tab-tabContent').append(this.$1_B[index]);this.$1_13(index);this.onTabSelected(new tab.TabEventArgs(this.$1_A[index],this.$1_B[index],index));},dispose:function(){this.$1_D.dispose();tab.TabView.callBaseMethod(this, 'dispose');},onTabShown:function(args){if(ss.isValue(this.$1_F)){this.$1_F(this,args);}},onTabSelected:function(args){if(ss.isValue(this.$1_10)){this.$1_10(this,args);}},onTabContentLoaded:function(args){if(ss.isValue(this.$1_11)){this.$1_11(this,args);}},onTabContentFailed:function(args){if(ss.isValue(this.$1_12)){this.$1_12(this,args);}},$1_13:function($p0){var $0=this.$1_B[$p0];var $1=$0.data('tabContentUrl');if(ss.isNullOrUndefined($1)){return;}$0.removeData('tabContentUrl');$0.append(this.$1_C);$0.load($1,null,ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$1_14($p0,$p1_1,$p1_0);}));this.onTabShown(new tab.TabEventArgs(this.$1_A[$p0],$0,$p0));},$1_14:function($p0,$p1,$p2){if($p1==='error'){this.$1_B[$p0].html($("<div class='tab-tabViewError'></div>").html($p2));this.onTabContentFailed(new tab.TabEventArgs(this.$1_A[$p0],this.$1_B[$p0],$p0));}else{this.onTabContentLoaded(new tab.TabEventArgs(this.$1_A[$p0],this.$1_B[$p0],$p0));}},$1_15:function($p0){var $0=$($p0.target);this.selectTab($0.data('tabIndex'));}}
tab.TiledViewerRegion=function(regionPart,domNode,session,allowPanZoom,sheetID,viewModel){this.backgroundMap=new tab.LeafletMapControl();this.disposables=new tab.DisposableHolder();this.$1=regionPart;this.connectNode=$(domNode);this.viewportBorder=this.connectNode.find('.tvViewportBorders');this.$0=$(domNode).find('.tvimagesContainer');this.viewSession=session;this.domPanZoomRect=new tab.RectShapeSelector();this.$3=new tab.RectShapeSelector();if(this.$1==='viz'){if(!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.lassoSelection)){this.set_defaultPointerToolMode('lassoSelect');}else if(!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.radialSelection)){this.set_defaultPointerToolMode('radialSelect');}else{this.set_defaultPointerToolMode(this.$A(viewModel));}this.set_currentPointerToolMode(this.get_defaultPointerToolMode());}this.$2=sheetID;this.allowPanZoom=allowPanZoom;this.paneTableViewModel=viewModel;this.waitingOnPanZoomServerResponse='waitingOnServer';}
tab.TiledViewerRegion.getCanvasElement=function(parent){return parent.find('canvas').get(0);}
tab.TiledViewerRegion.prototype={$0:null,viewSession:null,allowPanZoom:null,connectNode:null,domPanZoomRect:null,domDragImage:null,domDragMask:null,regionContent:null,scroller:null,isScrolling:false,wasScrolling:false,waitingOnPanZoomServerResponse:null,paneTableViewModel:null,viewportBorder:null,resetIsWaitingOnTransition:false,resetIsWaitingOnData:false,$1:null,$2:null,$3:null,$4:null,$5:null,$6:null,$7:null,$8:null,$9:null,get_name:function(){return this.get_regionPart();},get_regionPart:function(){return this.$1;},get_sheetid:function(){return this.$2;},get_contentProvider:function(){return this.regionContent;},set_contentProvider:function(value){if(ss.isValue(this.regionContent)){this.regionContent.remove_loadComplete(ss.Delegate.create(this,this.onRegionContentLoadComplete));}this.regionContent=value;if(ss.isValue(this.regionContent)){this.regionContent.add_loadComplete(ss.Delegate.create(this,this.onRegionContentLoadComplete));}return value;},get_defaultPointerToolMode:function(){return this.$6;},set_defaultPointerToolMode:function(value){this.$6=value;return value;},get_currentPointerToolMode:function(){return this.$7;},set_currentPointerToolMode:function(value){this.$7=value;return value;},get_sceneInfo:function(){if(this.$1!=='viz'){return null;}var $0=Type.safeCast(this.regionContent,tab.PaneTableCanvasView);if(ss.isNullOrUndefined($0)){return null;}var $1=$0.get_viewModel();return $1.get_scene();},get_vlvm:function(){var $0=this.get_contentProvider();return $0.get_viewModel();},get_shapeSelector:function(){return this.$3;},turnOnWindowLogging:function(){if(!ss.isValue(tab.TiledViewerRegion.windowLog)){tab.TiledViewerRegion.windowLog=tab.Logger.getLoggerWithName('WindowAppender');}},reset:function(){this.backgroundMap.removeMarkOverlay();this.setViewportBorderVisibility(false);},destroy:function(){this.resetControlledAnimations();this.disposables.dispose();this.allowPanZoom=null;if(ss.isValue(this.regionContent)){this.regionContent.remove_loadComplete(ss.Delegate.create(this,this.onRegionContentLoadComplete));this.regionContent.destroy();}this.backgroundMap.$17();this.backgroundMap.dispose();},setGeometry:function(regionGeometry,viewSize,tileSize){if(this.regionContent!=null){this.regionContent.set_actualViewSize(tab.$create_Size(viewSize.w,viewSize.h));this.regionContent.reset(regionGeometry,tileSize);this.backgroundMap.$1A(regionGeometry.w,regionGeometry.h);this.$8=tab.$create_RectXY(0,0,regionGeometry.w,regionGeometry.h);}},refreshImages:function(cacheInfo){if(this.regionContent!=null){this.regionContent.refreshImages(cacheInfo);}},onZoomBoxMouseMove:function(e){this.onSelectorMouseMove(e,this.domPanZoomRect);},onMarqueeMouseMove:function(e){this.onSelectorMouseMove(e,this.$3);},onSelectorMouseMove:function(e,selector){e.preventDefault();selector.recordScrollingOffsets(tab.$create_Point(this.scroller.get_scrollPos().x,this.scroller.get_scrollPos().y));var $0=selector.get_connectNodePos();var $1=e.get_gestureInfo().pageX-$0.x;var $2=e.get_gestureInfo().pageY-$0.y;var $3=($1<0)?$1:(($1>$0.w)?$1-$0.w:0);var $4=($2<0)?$2:(($2>$0.h)?$2-$0.h:0);var $5=this.determineScrollDirection(0,$3);var $6=this.determineScrollDirection(1,$4);var $7=(Math.max(Math.abs($3),Math.abs($4))>15)?'fast':'slow';if(!!$5||!!$6){this.startScrolling($5,$6,$7);selector.constrainShape(e.get_gestureInfo());}else{this.stopScrolling();selector.updateAndRenderShape(e.get_gestureInfo());}},debugWindowLog:function(a){if(ss.isValue(tab.TiledViewerRegion.windowLog)){}},toLocalCoords:function(position,doNotIncludeScroll){var $0=tab.RecordCast.dojoCoordsAsPoint(this.getLocalOffset(doNotIncludeScroll));var $1=tab.$create_Point(position.x-$0.x,position.y-$0.y);return $1;},toLocalCoordsRect:function(rect,doNotIncludeScroll){var $0=tab.RecordCast.dojoCoordsAsPoint(this.getLocalOffset(doNotIncludeScroll));var $1=tab.$create_RectXY(rect.x-$0.x,rect.y-$0.y,rect.w,rect.h);return $1;},toLocalCoordsEvent:function(ev,doNotIncludeScroll){var $0=tab.$create_Point(ev.get_gestureInfo().pageX,ev.get_gestureInfo().pageY);return this.toLocalCoords($0,doNotIncludeScroll);},getLocalOffset:function(doNotIncludeScroll){var $0=tab.DomUtil.getDojoCoordsJQ(this.connectNode);if((ss.isValue(doNotIncludeScroll)&&doNotIncludeScroll)||ss.isNullOrUndefined(this.regionContent)){return $0;}$0.x-=this.regionContent.get_scrollPos().x;$0.y-=this.regionContent.get_scrollPos().y;return $0;},getPaneDescriptorFromSelectionAnchor:function(selectionAnchor){this.$11();var $0=new tab.HitTester(this.$4);var $1=tab.$create_RectXY(selectionAnchor.x,selectionAnchor.y,1,1);var $2=$0.hitTestPanes($1);if(!$2.length){return '';}var $3=$2[0];var $4=this.get_sceneInfo().getPaneDrawInfoFromKey($3);return $4.get_paneDescriptorKey();},$A:function($p0){if(!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.newSelectionTools)){if($p0.get_mapServerModel().get_hasPresModel()||$p0.get_visualModel().get_hasBackgroundImage()){return 'pan';}return 'rectSelect';}else{return 'rectSelect';}},hitTestVisualPartsHelper:function(rect,isSingleSelect,markHits){return (tab.HitTestResult.hasExactHit(markHits))?new Array(0):this.$B(rect,isSingleSelect);},$B:function($p0,$p1){var $0=tabBootstrap.MetricsController.get_instance().createContext('HitTestVisualParts',tabBootstrap.MetricsSuites.hitTest);var $1=[];var $2=this.paneTableViewModel.get_refLineVisualLists();if(ss.isValue($2)){var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $4=$enum1.current;var $5=tab.VisualPartsHitTest.hitTestRefLines($4.au0,$p0,$p1);if(!!$5.get_hitType()){$1.push($5);if($5.get_hitType()===3){break;}}}}var $3=tab.HitTestResult.hasExactHit($1);if(!$3){this.$12();var $6=tab.VisualPartsHitTest.hitTestTrendLines(this.$5,$p0,$p1);if(!!$6.get_hitType()){var $7=tab.HitTestResult.hasExactHit([$6]);if($7||!$1.length){$1=[];$1.push($6);}}}$0.close();return $1;},hitTestMarksAgainstSelectionShape:function(){return this.hitTestMarks(null,false);},hitTestMarks:function(selRect,isSingleSelect){var $0=tabBootstrap.MetricsController.get_instance().createContext('HitTestMarks',tabBootstrap.MetricsSuites.hitTest);this.$11();var $1=new tab.HitTester(this.$4);var $2=(selRect==null)?this.$3.hitTest($1,isSingleSelect,this.get_sceneInfo()):$1.hitTest(selRect,isSingleSelect,this.get_sceneInfo());$0.close();if($2.length>0){}return $2;},selectNode:function(coords,selected,action,tooltipCallback){var $0=this.get_vlvm();$0.selectNode(coords,selected,action,tooltipCallback);},hitTestNodes:function(coords){var $0=this.get_vlvm();var $1=_.find($0.get_groupItemNodes(),function($p1_0){
var $1_0=($p1_0.yk||0);var $1_1=($p1_0.yl||0);var $1_2=tab.$create_RectXY($1_0,$1_1,$p1_0.ym,$p1_0.yn);return tab.RectXYUtil.inRect($1_2,coords);});return $1;},doSelectFromPoint:function(coords,action){var $0=tab.$create_RectXY(coords.x,coords.y,1,1);var $1=this.$C($0);var $2=this.paneTableViewModel.get_visualId();switch($1.second){case 'mark':tab.SelectionClientCommands.selectMarksLocal($1.first,$2,action,false);break;case 'visualparts':tab.SelectionClientCommands.selectRegion(this.$1,$0,action,$2);break;default:tab.SelectionClientCommands.clearAllSelections($2);break;}return $1;},$C:function($p0){var $0=new ss.Tuple();$0.first=new Array(0);$0.second='unspecified';var $1=this.hitTestMarks($p0,true);var $2=tab.HitTestResult.hasExactHit($1);if($2){$0.first=tab.HitTestResult.getIdsFromHitTestResults($1);$0.second='mark';}else{var $3=this.$B($p0,true);var $4=tab.HitTestResult.tieBreakHits($1,$3);switch($4.get_hitObjectType()){case 1:$0.first=tab.HitTestResult.getIdsFromHitTestResults($1);$0.second='mark';break;case 2:case 3:$0.first=tab.HitTestResult.getIdsFromHitTestResults($3);$0.second='visualparts';break;}}return $0;},doSelectMarkAndUbertipFromSelectionShape:function(action,tooltipCallback){var $0=tab.HitTestResult.getIdsFromHitTestResults(this.hitTestMarksAgainstSelectionShape());tab.SelectionClientCommands.selectMarksLocal($0,this.paneTableViewModel.get_visualId(),action,true,tooltipCallback);return $0;},zoomHome:function(){this.backgroundMap.splatOverlayToMapForTransition(tab.TiledViewerRegion.getCanvasElement(this.connectNode));this.setViewportBorderVisibility(true);this.backgroundMap.$13();},moveMapToBounds:function(bounds){if(this.paneTableViewModel.get_visualModel().get_shouldUpdate()){this.backgroundMap.splatOverlayToMapForTransition(tab.TiledViewerRegion.getCanvasElement(this.connectNode));this.setViewportBorderVisibility(true);this.backgroundMap.moveToBounds(bounds);}},setPointerToolMode:function(mode){if(ss.isNullOrUndefined(mode)){mode=this.get_defaultPointerToolMode();}this.setMode(mode);},isSelectingToolActive:function(){return this.get_currentPointerToolMode()==='rectSelect'||this.get_currentPointerToolMode()==='lassoSelect'||this.get_currentPointerToolMode()==='radialSelect';},isExistingSelection:function(){var $0=this.paneTableViewModel.get_visualId();var $1=tab.ModelUtils.getVisualModelFromVisualId($0).get_selectionsModel().get_tupleSelection();return !!$1.get_ids().length;},$D:function($p0,$p1){if($p1.get_propertyName()==='scene'||$p1.get_propertyName()==='vizdata'){this.$4=null;this.$5=null;}},$E:function(){this.get_contentProvider().set_scrollPos(tab.$create_Point(0,0));},suppressTooltips:function(){},zoomPoint:function(paneInfo,point,scale,isDoubleClick,deferAPIforDoubleClick){if(this.resetIsWaitingOnTransition){return;}this.waitingOnPanZoomServerResponse='waitingOnServer';this.suppressTooltips();var $0=(paneInfo.canDragH)?scale:1;var $1=(paneInfo.canDragV)?scale:1;var $2=point;if(isDoubleClick){this.viewSession.zoomDoubleClick(this.get_regionPart(),point,$2,(scale>1),deferAPIforDoubleClick);}else if(scale>1){this.viewSession.zoomIn(this.get_regionPart(),point,$2);}else{this.viewSession.zoomOut(this.get_regionPart(),point,$2);}var $3=(scale>1)?1:-1;this.backgroundMap.zoomOnPoint(point,$3);if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()||this.paneTableViewModel.get_visualModel().get_cacheUrlInfo().useUrl){this.animateZoomOnPoint(paneInfo,point,$0,$1);}},makeDomDrag:function(){this.domPanZoomRect.createDomAndAppend(this.connectNode);this.domDragImage=$('<div></div>');this.addHiddenDiv(this.domDragImage,'tvdrag_image',this.domPanZoomRect.get_dom());this.domDragMask=$('<div></div>');this.addHiddenDiv(this.domDragMask,'tvdrag_mask',this.domPanZoomRect.get_dom());},showDomDragImage:function(paneInfo){this.setViewportBorderVisibility(true);if(this.backgroundMap.get_enabled()&&!this.$F()){this.backgroundMap.splatOverlayToMapForTransition(tab.TiledViewerRegion.getCanvasElement(this.connectNode));}else{var $0=this.scroller.get_scrollPos();var $1=tab.$create_Rect(paneInfo.x-$0.x+1,paneInfo.y-$0.y+1,paneInfo.w+1-(2*1),paneInfo.h+1-(2*1));var $2=this.$0.clone();if(Type.canCast(this.regionContent,tab.VisualRegionCanvasView)){var $4=tab.TiledViewerRegion.getCanvasElement($2);var $5=tab.CanvasRenderer.getRenderContext($4);(this.regionContent).copyContent($5);}$2.removeClass();$2.addClass('tvdrag_imageContainer');this.domDragImage.append($2);this.domDragImage.css('display','');var $3=2-1;tab.DomUtil.setMarginBoxJQ($2,tab.$create_Rect(-$1.l-$3,-$1.t-$3,$2.width()-(2*1),$2.height()-(2*1)));tab.DomUtil.setMarginBoxJQ(this.domDragImage,tab.$create_Rect($0.x+$3,$0.y+$3,$1.w-(2*$3),$1.h-(2*$3)));this.domDragMask.css('background-color',this.getPanZoomFillColor());this.domDragMask.css('display','');tab.DomUtil.setMarginBoxJQ(this.domPanZoomRect.get_dom(),$1);this.domPanZoomRect.get_dom().css('display','');}},getCenterPoint:function(rect){var $0=Math.floor(rect.w/2)+rect.x;var $1=Math.floor(rect.h/2)+rect.y;return tab.$create_Point($0,$1);},addHiddenDiv:function(newDiv,klass,parentNode){newDiv.addClass(klass);newDiv.css('display','none');parentNode.append(newDiv);},$F:function(){return tab.BrowserSupport.get_isIE()&&!this.backgroundMap.get_enabled()&&(!tab.BrowserSupport.get_cssTransform()||ss.isNullOrUndefined(tab.BrowserSupport.get_cssTransitionName()));},animateZoomOnPoint:function(paneInfo,point,scaleX,scaleY){var $0=(scaleX<1)?-1:(scaleX>1)?1:0;var $1=(scaleY<1)?-1:(scaleY>1)?1:0;var $2=tab.$create_Point($0,$1);var $3=this.getCenterPoint(paneInfo);var $4=Math.floor(($3.x-point.x)*$2.x*scaleX);var $5=Math.floor(($3.y-point.y)*$2.y*scaleY);var $6=tab.$create_TransformSpec();$6.translateX=$4;$6.translateY=$5;$6.scaleX=scaleX;$6.scaleY=scaleY;$6.time=777;this.showDomDragImage(paneInfo);if(this.$F()){this.$10(paneInfo,$6);return;}var $7=this.domDragImage.get(0);this.resetIsWaitingOnData=true;this.resetIsWaitingOnTransition=true;window.setTimeout(ss.Delegate.create(this,function(){
tableau.util.transform($7,$6);var $1_0=500;window.setTimeout(ss.Delegate.create(this,function(){
this.resetIsWaitingOnTransition=false;if(!this.resetIsWaitingOnData){this.reset();}}),$1_0);}),50);},$10:function($p0,$p1){var $0;var $1=$p1.scaleX;var $2=$p1.scaleY;if(!tab.BrowserSupport.get_isIE()){return;}this.resetControlledAnimations();var $3=tab.DomUtil.getMarginBoxJQ(this.domDragImage);$0={};var $4=Math.floor($3.w*$1);var $5=Math.floor($3.h*$2);var $6=$p1.translateX+Math.floor(($3.w/2)-($4/2));var $7=$p1.translateY+Math.floor(($3.h/2)-($5/2));$0['left']=$6;$0['top']=$7;$0['width']=$4;$0['height']=$5;this.$9.add(new tab.vqlui$1(this.domDragImage,$0,777));var $8=this.domDragImage.children().first();$3=tab.DomUtil.getMarginBoxJQ($8);$0={};$0['width']=Math.floor($3.w*$1)+$p0.x;$0['height']=Math.floor($3.h*$2)+$p0.y;this.$9.add(new tab.vqlui$1($8,$0,777));var $9=($p0.x*(1-$1));var $A=($p0.y*(1-$2));var $B=tab.$create_Point($9,$A);$8.children().each(ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=$($p1_1);$3=tab.DomUtil.getMarginBoxJQ($1_0);$0={};$0['left']=(($3.l*$1)+$B.x);$0['top']=(($3.t*$2)+$B.y);$0['width']=Math.floor($3.w*$1);$0['height']=Math.floor($3.h*$2);this.$9.add(new tab.vqlui$1($1_0,$0,777));}));this.$9.forEach(function($p1_0){
$p1_0.$3();});},resetControlledAnimations:function(){if(!tab.BrowserSupport.get_isIE()){return;}if(!ss.isValue(this.$9)){this.$9=[];}this.$9.forEach(function($p1_0){
$p1_0.$4(true);});this.$9.clear();},$11:function(){if(ss.isNullOrUndefined(this.$4)){this.$4=tab.HitTestStructureBuilder.buildLinearHitTestStructure(this.get_sceneInfo());}},$12:function(){if(ss.isNullOrUndefined(this.$5)){this.$5=[];var $0=this.get_contentProvider();var $1=$0.get_viewModel();var $2=$1.get_trendLineVisualLists();if(ss.isValue($2)){var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $3=$enum1.current;var $4=$3.au0;var $5=1;var $enum2=ss.IEnumerator.getEnumerator($4);while($enum2.moveNext()){var $6=$enum2.current;if($6.ag5==='auv'){var $7=$6;var $enum3=ss.IEnumerator.getEnumerator($7.au0);while($enum3.moveNext()){var $8=$enum3.current;switch($8.ag5){case 'avg':var $9=$8;if(ss.isValue($9.acx)){$5=$9.acx;}break;case 'au9':var $A=$8;var $B=tab.HitTestStructureBuilder.buildTrendLineHitTestStructure($A,$5,$7.abi);this.$5.add($B);break;default:break;}}}}}}}},onRegionContentLoadComplete:function(sender,e){if(this.waitingOnPanZoomServerResponse==='waitingOnServer'){this.waitingOnPanZoomServerResponse='normal';}if(this.get_regionPart()==='viz'){if(!this.isScrolling){this.domDragMask.css('display','none');this.domDragImage.css('display','none');this.domPanZoomRect.get_dom().css('display','none');this.get_shapeSelector().get_dom().css('display','none');this.domDragImage.html('');}tableau.util.transform(this.domDragImage.get(0));}},getPanZoomFillColor:function(){var $0='rgb(255,255,255)';if(this.$1==='viz'){if(this.paneTableViewModel.get_mapServerModel().get_hasPresModel()){$0=this.paneTableViewModel.get_mapServerModel().get_mapBGFillColor();}else if(ss.isValue(this.paneTableViewModel.get_scene().get_scene())){$0=this.paneTableViewModel.get_scene().get_scene().agd;}}return $0;},$13:function(){if(this.$1==='viz'){this.setViewportBorderVisibility(false);var $0=this.connectNode.find('.tvBackgroundContainer');var $1=this.paneTableViewModel.get_mapServerModel();if($1.get_hasPresModel()){if($1.get_useFastMaps()&&!this.backgroundMap.get_enabled()){this.backgroundMap.$15($0,this.paneTableViewModel.get_mapServerModel());}}else{this.backgroundMap.$17();}var $2=this.getPanZoomFillColor();$0.css('backgroundColor',$2);}},$14:function(){this.setPointerToolMode(this.get_defaultPointerToolMode());},setViewportBorderVisibility:function(visible){this.viewportBorder.css('display',(visible)?'':'none');},setMode:function(mode){this.$7=mode;this.updateSelectorShape(mode);},updateSelectorShape:function(mode){if(this.$3!=null){this.$3.get_dom().remove();this.$3=null;}switch(mode){case 'lassoSelect':this.$3=new tab.PolyShapeSelector(this.$8);break;case 'radialSelect':this.$3=new tab.CircleShapeSelector(this.$8);break;case 'rectSelect':default:this.$3=new tab.RectShapeSelector();break;}this.$3.createDomAndAppend(this.connectNode);},isToolDefault:function(mode){return mode===this.get_defaultPointerToolMode();}}
tab.vqlui$1=function(element,animationTargets,duration){this.$0=element;this.$1=animationTargets;this.$2=duration;}
tab.vqlui$1.prototype={$0:null,$1:null,$2:0,$3:function(){this.$0.animate(this.$1,this.$2);},$4:function($p0){this.$0.stop($p0);}}
tab.ChecklistContentFormatter=function(filter,itemName,itemFormatter){tab.ChecklistContentFormatter.initializeBase(this,[filter,itemName,itemFormatter]);}
tab.ChecklistContentFormatter.prototype={isValid:function(data){var $0=Type.safeCast(data,Array);return ss.isValue($0)&&!!$0.length;}}
tab.ContentFetchedEventArgs=function(tileIndex,itemRange,data){tab.ContentFetchedEventArgs.initializeBase(this);this.$1_0=tileIndex;this.$1_1=itemRange;this.$1_2=data;}
tab.ContentFetchedEventArgs.prototype={$1_0:0,$1_1:null,$1_2:null,get_data:function(){return this.$1_2;},get_tileIndex:function(){return this.$1_0;},get_itemRange:function(){return this.$1_1;}}
tab.FetchInfo=function(tileIndex,range,rangeType){this.$0=tileIndex;this.$1=range;this.$2=rangeType;}
tab.FetchInfo.prototype={$0:0,$1:null,$2:null,get_tileIndex:function(){return this.$0;},get_range:function(){return this.$1;},get_rangeType:function(){return this.$2;}}
tab.FilterContentFetcher=function(sheetSessionRef,filterName,domain){this.$0=filterName;this.$1=sheetSessionRef;this.$2=domain;this.$3=[];this.$4=[];}
tab.FilterContentFetcher.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:5,$6:false,add_contentFetched:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_contentFetched:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,destroy:function(){},fetch:function(fetchList){for(var $0=0;$0<fetchList.length;++$0){var $1=fetchList[$0];if(this.$3.contains($1.get_tileIndex())){continue;}this.$3.add($1.get_tileIndex());this.$4.add($1);}while(this.$4.length>this.$5){var $2=this.$4[0];this.$3.remove($2.get_tileIndex());this.$4.remove($2);}this.$A();},isTilePending:function(tileIndex){return this.$3.contains(tileIndex);},$8:function($p0){var $0=ss.Delegate.create(this,function(){
this.$9($p0);});return $0;},$9:function($p0){var $0=ss.Delegate.create(this,function($p1_0){
this.$6=false;this.$3.remove($p0.get_tileIndex());var $1_0=new tab.ContentFetchedEventArgs($p0.get_tileIndex(),$p0.get_range(),$p1_0);this.$7(this,$1_0);this.$A();});var $1=ss.Delegate.create(this,function($p1_0){
this.$6=false;this.$3.remove($p0.get_tileIndex());this.$A();});this.$1.getFilterItems(this.$0,this.$2,$p0.get_range(),$0,$1);},$A:function(){if(this.$4.length>0&&!this.$6){this.$6=true;var $0=this.$4.length-1;var $1=this.$4[$0];this.$4.removeAt($0);var $2=this.$8($1);window.setTimeout($2,0);}}}
tab.FilterListUI=function(windowEl,totalHeight,tileCount){this.$1=$(windowEl);this.$1.addClass('tiledContent');var $0=document.createElement('div');this.$2=$($0);this.$2.css('left','0px');this.$2.css('position','relative');this.$2.css('height',totalHeight+'px');this.$2.css('width',this.$1.css('width')+'px');this.$2.addClass('tileContainer');this.$1.append(this.$2);this.$1.scroll(ss.Delegate.create(this,this.$8));this.$3=new Array(tileCount);}
tab.FilterListUI.prototype={$1:null,$2:null,$3:null,$4:null,$5:0,$6:0,add_scrolled:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_scrolled:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_windowNode:function(){return this.$1;},get_tileContainerNode:function(){return this.$2;},destroy:function(){this.$1.unbind('scroll');this.$2.remove();},setContent:function(tileIndex,htmlContent){var $0=$(htmlContent);this.$2.append($0);this.$3[tileIndex]=$0;},getTileElement:function(index){if(index<0||index>=this.$3.length){return null;}return this.$3[index].get(0);},getItemElement:function(tileIndex,itemIndex){var $0=this.getTileElement(tileIndex);if($0==null){return null;}var $1=$0.children;if($1.length<itemIndex||itemIndex<0){return null;}return $1[itemIndex];},$8:function($p0){var $0=Date.get_now().getMilliseconds();var $1=this.$1.parent().offset().top-this.$2.offset().top;var $2=0;if(this.$4!=null){var $5=Math.abs(this.$6-$1);var $6=$0-this.$5;$2=$5/$6;}var $3=new tab.ScrolledEventArgs(tab.$create_Point(0,$1));this.$6=$1;this.$5=$0;this.$4=$3;var $4=ss.Delegate.create(this,function(){
if($3===this.$4){this.$7(this,$3);}});if($2>tab.FilterListUI.$0){window.setTimeout($4,100);}else{$4();}}}
tab.ListGridModel=function(itemCount,itemHeight,tileSize,viewportHeight){this.$0=itemCount;this.$1=itemHeight;this.$2=tileSize;this.$3=viewportHeight;this.$4=this.$0*this.$1;this.$5=Math.ceil(itemCount/tileSize);this.$6={};var $0=0;var $1=tileSize*itemHeight;var $2=this.$4;for(var $3=0;$3<this.$5;++$3){if($2<$1){$1=$2;}var $4=new tab.IntegerRange($0,($0+$1-1));var $5=tab.IntegerRange.pixelToItemRange($4,itemHeight);var $6=new tab.vqlui$3($3,false,tab.$create_Point(0,$0),$5,'item');this.$6[$3]=$6;$2-=$1;$0+=$1;}}
tab.ListGridModel.prototype={$0:0,$1:0,$2:0,$3:0,$4:0,$5:0,$6:null,get_totalHeight:function(){return this.$4;},get_itemHeight:function(){return this.$1;},get_tileCount:function(){return this.$5;},get_viewportHeight:function(){return this.$3;},destroy:function(){},updateViewport:function(width,height){this.$3=height;},getTileStatus:function(index){var $0=this.$6[index];if(ss.isUndefined($0)){return false;}return $0.get_$6();},updateTileStatus:function(index,hasLoaded){var $0=this.$6[index];if(ss.isUndefined($0)){return;}this.$6[index].set_$6(hasLoaded);},getTilePosition:function(index){var $0=this.$6[index];if(ss.isUndefined($0)){return null;}return tab.$create_Point($0.get_$7().x,$0.get_$7().y);},getTileRange:function(index){var $0=this.$6[index];if(ss.isUndefined($0)){return null;}return new tab.IntegerRange($0.get_$8().get_from(),$0.get_$8().get_to());},getTileRangeType:function(index){var $0=this.$6[index];if(ss.isUndefined($0)){return 'unknown';}return $0.get_$9();},pixelToTileRange:function(pixelRange){return tab.IntegerRange.pixelToTileRange(pixelRange,this.$1,this.$2);},itemToTileIndex:function(itemIndex){var $0=Math.floor(itemIndex/this.$2);return $0;},globalToLocalItemIndex:function(globalItemIndex){return globalItemIndex%this.$2;}}
tab.RadiolistContentFormatter=function(filter,itemName,itemFormatter){tab.RadiolistContentFormatter.initializeBase(this,[filter,itemName,itemFormatter]);this.tileHtml='<div class="tile tab-ctrl-formatted-text" style="top: {0}px; position: absolute; width: 100%;">';}
tab.ScrolledEventArgs=function(newPos){tab.ScrolledEventArgs.initializeBase(this);this.$1_0=newPos;}
tab.ScrolledEventArgs.prototype={$1_0:null,get_newPos:function(){return this.$1_0;}}
tab.SimpleListContentFormatter=function(filter,itemName,itemFormatter){this.$0=filter;this.$1=itemName;this.$2=itemFormatter;}
tab.SimpleListContentFormatter.prototype={$0:null,$1:null,$2:null,tileHtml:'<div class="tile tab-ctrl-formatted-text" style="top: {0}px; left: 0; right: 0; position: absolute; width: 100%;">',destroy:function(){},format:function(data,pos,range){var $0='';var $1=Type.safeCast(data,Array);if(ss.isNullOrUndefined(pos)){return $0;}if(ss.isNullOrUndefined(range)){return $0;}if(!this.isValid($1)){return $0;}$0+=String.format(this.tileHtml,pos.y.toString());for(var $2=0,$3=range.get_from();$2<$1.length;++$2,++$3){$0+=this.$2(this.$0,$1[$2],this.$1,$3);}$0+='</div>';return $0;},isValid:function(data){return true;}}
tab.TiledWidget=function(fetcher,gridModel,ui,formatter,firstTileData,preloadEverything){this.$1=fetcher;this.$2=gridModel;this.$3=formatter;this.ui=ui;if(this.$3.isValid(firstTileData)){this.$5(0,firstTileData);}this.$1.add_contentFetched(ss.Delegate.create(this,this.$9));if(preloadEverything){this.$7();}else{this.ui.add_scrolled(ss.Delegate.create(this,this.$8));}}
tab.TiledWidget.prototype={$1:null,$2:null,$3:null,ui:null,$4:100,destroy:function(){this.ui.remove_scrolled(ss.Delegate.create(this,this.$8));this.ui.destroy();this.ui=null;this.$1.remove_contentFetched(ss.Delegate.create(this,this.$9));this.$1.destroy();this.$1=null;this.$2.destroy();this.$2=null;this.$3.destroy();this.$3=null;},updateViewport:function(width,height){this.$2.updateViewport(width,height);},getElement:function(globalItemIndex){var $0=this.$2.itemToTileIndex(globalItemIndex);if(!this.$2.getTileStatus($0)){return null;}else{var $1=this.$2.globalToLocalItemIndex(globalItemIndex);return this.ui.getItemElement($0,$1);}},$5:function($p0,$p1){var $0=this.$3.format($p1,this.$2.getTilePosition($p0),this.$2.getTileRange($p0));if(!$0.length){return;}this.ui.setContent($p0,$0);this.$2.updateTileStatus($p0,true);},$6:function($p0){var $0=this.$2.getTileRangeType($p0);var $1=this.$2.getTileRange($p0);var $2=new tab.FetchInfo($p0,$1,$0);return $2;},$7:function(){var $0=[];var $1=this.$2.get_tileCount();for(var $2=1;$2<$1;++$2){var $3=this.$6($2);$0.add($3);}this.$1.fetch($0);},$8:function($p0,$p1){var $0=this.$4*this.$2.get_itemHeight();var $1=$p1.get_newPos().y-$0;if($1<0){$1=0;}var $2=$p1.get_newPos().y+$0+this.$2.get_viewportHeight();if($2>this.$2.get_totalHeight()-1){$2=this.$2.get_totalHeight()-1;}var $3=new tab.IntegerRange($1,$2);var $4=this.$2.pixelToTileRange($3);var $5=[];var $6=$4.get_from();var $7=$4.get_to();for(var $8=$6;$8<=$7;++$8){if(this.$2.getTileStatus($8)||this.$1.isTilePending($8)){continue;}var $9=this.$6($8);$5.add($9);}this.$1.fetch($5);},$9:function($p0,$p1){var $0=$p1.get_tileIndex();var $1=$p1.get_data();this.$5($0,$1);}}
tab.TiledWidgetFactory=function(){}
tab.TiledWidgetFactory.createChecklist=function(filter,tuples,div,filterName,lineHeight){var $0=new tab.ChecklistContentFormatter(filter,filterName,filter.get_modeContents().get_itemFormatter());return tab.TiledWidgetFactory.createListTiledWidget(filter,tuples,div,$0,lineHeight);}
tab.TiledWidgetFactory.createRadiolist=function(filter,tuples,div,filterName,lineHeight){var $0=new tab.RadiolistContentFormatter(filter,filterName,filter.get_modeContents().get_itemFormatter());return tab.TiledWidgetFactory.createListTiledWidget(filter,tuples,div,$0,lineHeight);}
tab.TiledWidgetFactory.createSimpleList=function(filter,tuples,div,filterName,lineHeight){var $0=new tab.SimpleListContentFormatter(filter,filterName,filter.get_modeContents().get_itemFormatter());return tab.TiledWidgetFactory.createListTiledWidget(filter,tuples,div,$0,lineHeight);}
tab.TiledWidgetFactory.createListTiledWidget=function(filter,tuples,div,formatter,lineHeight){var $0=(filter.get_oFilter().isTiled&&tsConfig.filterTileSize>0)?tsConfig.filterTileSize:filter.get_oFilter().table.actual_size;dojo.style(div,'position','relative');var $1=filter.get_oFilter().table.actual_size*lineHeight;var $2=(!!$0)?Math.ceil(filter.get_oFilter().table.actual_size/$0):0;var $3=new tab.FilterListUI(div,$1,$2);var $4=dojo.marginBox(div);var $5=new tab.ListGridModel(filter.get_oFilter().table.actual_size,lineHeight,$0,$4.h);var $6=new tab.FilterContentFetcher(filter.get_session(),filter.get_field(),filter.get_domain());var $7=tuples.slice(0,$0);var $8=new tab.TiledWidget($6,$5,$3,formatter,$7,false);return $8;}
tab.vqlui$3=function(tileIndex,hasLoaded,pos,range,rangeType){this.$1=tileIndex;this.$0=hasLoaded;this.$2=pos;this.$3=range;this.$4=rangeType;}
tab.vqlui$3.prototype={$0:false,$1:0,$2:null,$3:null,$4:null,get_$5:function(){return this.$1;},get_$6:function(){return this.$0;},set_$6:function($p0){this.$0=$p0;return $p0;},get_$7:function(){return this.$2;},get_$8:function(){return this.$3;},get_$9:function(){return this.$4;}}
tab.TiledWindow=function(domNode,session,controller,getRequestID,shouldScrollDomNode){this.$B=getRequestID;this.$0=domNode;this.$3=session;this.$C=controller;this.$F=shouldScrollDomNode;this.$2=tab.$create_RegionRect(0,0,0,0,'');this.$8=tab.$create_Size(0,0);this.$1=new tab.DownloadQueue();this.$1.add_imageLoaded(ss.Delegate.create(this,this.$16));this.$1.add_imageTimedOut(ss.Delegate.create(this,this.$17));this.$1.add_complete(ss.Delegate.create(this,this.$18));this.$5=[];this.$4=$('.tvimagesContainer',this.$0);}
tab.TiledWindow.$11=function($p0,$p1){var $0=tab.RenderUtil.calculatePixelRatio(false);if(tab.FloatUtil.isGreaterThan($0,1)){var $1=$($p0);$1.css('width',$p1.w.toString()+'px');$1.css('height',$p1.h.toString()+'px');}}
tab.TiledWindow.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:0,$7:0,$8:null,$9:null,$A:0,$B:null,$C:null,$D:0,$E:0,$F:false,add_loadComplete:function(value){this.$10=ss.Delegate.combine(this.$10,value);},remove_loadComplete:function(value){this.$10=ss.Delegate.remove(this.$10,value);},$10:null,get_actualViewSize:function(){return tab.$create_Size(this.$0.clientWidth,this.$0.clientHeight);},set_actualViewSize:function(value){return value;},get_effectiveViewSize:function(){return this.get_actualViewSize();},get_scrollPos:function(){return tab.$create_Point(this.get_left(),this.get_top());},set_scrollPos:function(value){this.set_left(value.x);this.set_top(value.y);this.$13(false);return value;},get_canScrollX:function(){return this.get_docSize().w>this.get_effectiveViewSize().w;},get_canScrollY:function(){return this.get_docSize().h>this.get_effectiveViewSize().h;},get_docSize:function(){return tab.$create_Size(this.$2.w,this.$2.h);},get_left:function(){return this.$E;},set_left:function(value){this.$E=value;if(this.$F){this.$0.scrollLeft=value;}return value;},get_top:function(){return this.$D;},set_top:function(value){this.$D=value;if(this.$F){this.$0.scrollTop=value;}return value;},destroy:function(){this.$1.destroy();while(this.$A>0){this.$A--;this.$3.decrementWait();}this.$B=null;this.$C=null;},refreshImages:function(newCacheInfo){if(!ss.isValue(this.$2)||tab.SizeUtil.isEmpty(tab.RecordCast.regionRectAsSize(this.$2))){return;}if(ss.isNullOrUndefined(newCacheInfo)){return;}this.$9=newCacheInfo;this.$14();this.$13(true);},reset:function(newGeometry,newTileSize){var $0=this.$2;var $1=this.$8;this.$2=newGeometry;this.$8=newTileSize;if(ss.isNullOrUndefined(this.$2)||tab.SizeUtil.isEmpty(tab.RecordCast.regionRectAsSize(this.$2))){return;}if(ss.isValue($0)&&$0.w===this.$2.w&&$0.h===this.$2.h&&$1.w===this.$8.w&&$1.h===this.$8.h){return;}var $2=this.get_top();var $3=this.get_left();this.$6=Math.ceil(this.$2.w/this.$8.w);this.$7=Math.ceil(this.$2.h/this.$8.h);this.$4.width(this.$2.w);this.$4.height(this.$2.h);this.set_top(Math.min($2,Math.max(0,this.$2.h-this.$0.offsetHeight)));this.set_left(Math.min($3,Math.max(0,this.$2.w-this.$0.offsetWidth)));},setXPos:function(xPos){this.set_scrollPos(tab.$create_Point(xPos,this.get_scrollPos().y));},setYPos:function(yPos){this.set_scrollPos(tab.$create_Point(this.get_scrollPos().x,yPos));},$12:function($p0){var $0=$($p0);if($0.prop('_deferredClear')){$0.prop('_deferredClear',null);$0.empty();}},$13:function($p0){if(!ss.isValue($p0)){$p0=false;}if(!ss.isValue(this.$2)||tab.SizeUtil.isEmpty(tab.RecordCast.regionRectAsSize(this.$2))){return;}if(!ss.isValue(this.$9)){return;}var $0=this.get_left();var $1=$0+this.$0.clientWidth;var $2=this.get_top();var $3=$2+this.$0.clientHeight;var $4=Math.max(Math.floor($0/this.$8.w),0);var $5=Math.min(Math.ceil($1/this.$8.w),this.$6);var $6=Math.max(Math.floor($2/this.$8.h),0);var $7=Math.min(Math.ceil($3/this.$8.h),this.$7);this.$1.clear();if(!ss.isValue(this.$3)){return;}if(!!$p0){var $B=this.$A;this.$A=Math.max((($5-$4)*($7-$6)),0);if($B<=0&&this.$A>0){this.$3.incrementWait(false);}}var $8='';var $9=0;if(ss.isValue(this.$B)){$8=this.$B();}if(ss.isValue(this.$C)){$9=this.$C.get_cacheVersion();}var $A=false;for(var $C=$4;$C<$5;$C++){var $D=Math.min(this.$8.w,this.$2.w-($C*this.$8.w));for(var $E=$6;$E<$7;++$E){var $F=Math.min(this.$8.h,this.$2.h-($E*this.$8.h));var $10=($E*this.$6)+$C;var $11=tab.$create_Rect(($C*this.$8.w),($E*this.$8.h),$D,$F);var $12=this.$3.formatTileURL(this.$9,this.$2.r,$C,$E,'',$8);if(ss.isValue(this.$5[$10])&&this.$5[$10].$4($12,$9)){if($p0){this.$15();}var $13=this.$5[$10].get_$2();var $14=$13.width!==$11.w||$13.height!==$11.h;if($14){$($13).css({left:$11.l+'px',top:$11.t+'px'});tab.TiledWindow.$11($13,$11);}}else{$A=true;this.$5[$10]=(this.$5[$10]||new tab.vqlui$2());var $15=new tab.ImageDownloaderImageData(this.$5[$10].get_$2(),$10,$12,$11,$9);this.$1.addImage($15);}}}if(!$A){this.$4.each(ss.Delegate.create(this,function($p1_0,$p1_1){
this.$12($p1_1);}));}},$14:function(){this.$5=new Array(this.$6*this.$7);this.$4.prop('_deferredClear',true);},$15:function(){if(this.$A>0){this.$A--;if(!this.$A){this.$3.decrementWait();}}},$16:function($p0,$p1){this.$15();if(ss.isValue($p1.get_image().get_imageNode())){var $0=$p1.get_image().get_imageNode();tab.TiledWindow.$11($0,$p1.get_image().get_bounds());var $1=$p1.get_image().get_index();var $2=this.$C.get_cacheVersion();if((!ss.isValue(this.$5[$1].get_$2())||$(this.$5[$1].get_$2()).attr('src')!==$($0).attr('src'))&&$p1.get_image().get_version()===$2){this.$5[$1].set_$2($0);this.$5[$1].set_$3($2);var $3=$0;var $4=0;var $5=this.$4.length;this.$4.each(ss.Delegate.create(this,function($p1_0,$p1_1){
this.$12($p1_1);$p1_1.appendChild($3);if($4<$5-1){$3=$3.cloneNode(false);}$4++;}));}}},$17:function($p0,$p1){this.$15();},$18:function($p0,$p1){if(ss.isValue(this.$10)){this.$10(this,ss.EventArgs.Empty);}}}
tab.vqlui$2=function(){this.$1=-1;}
tab.vqlui$2.prototype={$0:null,$1:0,get_$2:function(){return this.$0;},set_$2:function($p0){this.$0=$p0;return $p0;},get_$3:function(){return this.$1;},set_$3:function($p0){this.$1=$p0;return $p0;},$4:function($p0,$p1){if(!ss.isValue(this.$0)){return false;}return (this.$0.getAttribute('src')===$p0&&this.$1===$p1);}}
tab.ToggleSwitch=function(){}
tab.ToggleSwitch.createToggleControl=function(changeHandler,labelClass,isChecked){var $0=$(String.format("<label class='tabToggleSwitchLabel'>\n            <input type='checkbox' />\n            <span class='tabSwitch'>\n                <span class='tabSwitchOn'>{0}</span>\n                <span class='tabSwitchOff'>{1}</span>\n                <span class='tabSwitchBlock'></span>\n            </span>\n        </label>",tab.Strings.AuthOnLabel,tab.Strings.AuthOffLabel));var $1=$0.find('.tabSwitch');$0.addClass(labelClass);var $2=$0.find('input');if(isChecked){$2.prop('checked',true);$1.css('left','0');}spiff.ClickHandler.targetAndPress($0,function($p1_0){
var $1_0=$2.prop('checked');$1.css('left',($1_0)?'-50px':'0');$2.prop('checked',!$1_0);changeHandler(!$1_0);});return $0;}
tab.ToolbarButton=function(clickAction){tab.ToolbarButton.initializeBase(this,[$('<a>').addClass('tab-toolbar-button')]);this.$1_0=clickAction;this.$1_1=new spiff.ClickHandler().onClick(ss.Delegate.create(this,this.$1_2));this.disposables.add(this.$1_1);this.setEnabled(true);}
tab.ToolbarButton.prototype={$1_0:null,$1_1:null,get_clickHandler:function(){return this.$1_1;},get_buttonElement:function(){return this.get_element();},setEnabled:function(enabled){if(enabled){this.get_buttonElement().removeClass('tab-disabled');this.get_buttonElement().addClass('tab-enabled');}else{this.get_buttonElement().removeClass('tab-enabled');this.get_buttonElement().addClass('tab-disabled');}return this;},setTooltip:function(tooltip){this.get_buttonElement().prop('title',tooltip);return this;},bindEvents:function(){this.$1_1.setTarget(this.get_buttonElement());},$1_2:function(){if(this.get_buttonElement().hasClass('tab-enabled')){this.$1_0();}}}
tab.ToolbarIconButton=function(clickAction){tab.ToolbarIconButton.initializeBase(this,[clickAction]);}
tab.ToolbarIconButton.prototype={iconElement:null,setIcon:function(iconClass){if(!ss.isValue(this.iconElement)){this.iconElement=$('<span>');this.iconElement.appendTo(this.get_buttonElement());}this.iconElement.removeClass().addClass('tab-toolbar-button-icon').addClass(iconClass);return this;}}
tab.ToolbarTextButton=function(clickAction){tab.ToolbarTextButton.initializeBase(this,[clickAction]);this.get_buttonElement().addClass('tab-toolbar-text-button');}
tab.ToolbarTextButton.prototype={leftIcon:null,textElement:null,rightIcon:null,get_textWidth:function(){return this.textElement.width();},set_textWidth:function(value){this.textElement.width(value);return value;},removeTextWidth:function(){this.textElement.width('auto');},setText:function(text){if(!ss.isValue(this.textElement)){this.textElement=$('<span>').addClass('tab-toolbar-button-text');if(ss.isValue(this.leftIcon)){this.textElement.insertAfter(this.leftIcon);}else{this.textElement.prependTo(this.get_buttonElement());}}this.textElement.text(text);return this;},setLeftIcon:function(iconClass){if(!ss.isValue(this.leftIcon)){this.leftIcon=$('<span>');this.leftIcon.prependTo(this.get_buttonElement());}this.leftIcon.removeClass().addClass('tab-toolbar-button-left-icon').addClass(iconClass);return this;},setRightIcon:function(iconClass){if(!ss.isValue(this.rightIcon)){this.rightIcon=$('<span>');this.rightIcon.appendTo(this.get_buttonElement());}this.rightIcon.removeClass().addClass('tab-toolbar-button-right-icon').addClass(iconClass);return this;}}
tab.Tooltip=function(template){this.$1_4=[];this.$1_B=16;this.$1_C=16;tab.Tooltip.initializeBase(this,[(template||tab.Tooltip.$1_1C()).get_domRoot()]);this.$1_3=template||tab.Tooltip.$1_1C();this.$1_2=spiff.LabelButton.newNativeButton();this.$1_2.set_label('close');this.$1_2.add_click(ss.Delegate.create(this,this.$1_1D));this.$1_A=tsConfig.is_mobile;if(!tsConfig.is_mobile){$(window).bind(this.createNamespacedEventName('resize'),ss.Delegate.create(this,function(){
this.$1_E=null;}));}}
tab.Tooltip.$1_1C=function(){return tab.Tooltip.$1_5||(tab.Tooltip.$1_5=new tab.TooltipTemplate());}
tab.Tooltip.prototype={tupleId:null,interactedTupleId:null,$1_2:null,$1_3:null,$1_6:false,$1_7:false,$1_8:false,$1_9:null,$1_A:false,$1_D:null,$1_E:null,$1_F:false,$1_10:false,$1_11:null,add_closed:function(value){this.$1_12=ss.Delegate.combine(this.$1_12,value);},remove_closed:function(value){this.$1_12=ss.Delegate.remove(this.$1_12,value);},$1_12:null,add_prePosition:function(value){this.$1_13=ss.Delegate.combine(this.$1_13,value);},remove_prePosition:function(value){this.$1_13=ss.Delegate.remove(this.$1_13,value);},$1_13:null,add_positioned:function(value){this.$1_14=ss.Delegate.combine(this.$1_14,value);},remove_positioned:function(value){this.$1_14=ss.Delegate.remove(this.$1_14,value);},$1_14:null,add_showed:function(value){this.$1_15=ss.Delegate.combine(this.$1_15,value);},remove_showed:function(value){this.$1_15=ss.Delegate.remove(this.$1_15,value);},$1_15:null,get_defaultShowCloseButton:function(){return this.$1_7;},set_defaultShowCloseButton:function(value){this.$1_7=value;return value;},get_isShown:function(){return this.$1_6;},get_closeButton:function(){return this.$1_2;},get_body:function(){return this.$1_3.get_body();},set_body:function(value){this.$1_3.get_body().empty().append(value);return value;},get_location:function(){return this.$1_9;},set_location:function(value){this.move(value);return value;},get_horizontalOffset:function(){return this.$1_C;},set_horizontalOffset:function(value){this.$1_C=value;return value;},get_verticalOffset:function(){return this.$1_B;},set_verticalOffset:function(value){this.$1_B=value;return value;},get_lastLocation:function(){return this.$1_D;},set_lastLocation:function(value){this.$1_D=value;return value;},get_previousShownArgs:function(){return this.$1_11;},get_showAbove:function(){return this.$1_A;},set_showAbove:function(value){this.$1_A=value;return value;},setTooltipBodyAndReposition:function(body,beforePositioningAction){this.requestLayout(ss.Delegate.create(this,function(){
if(ss.isValue(beforePositioningAction)){beforePositioningAction();}this.get_body().empty().append(body);}));},show:function(body,position,showClose){if(ss.isNullOrUndefined(position)||this.$1_F){this.close();return;}this.set_lastLocation(position);this.$1_8=(ss.isValue(showClose))?showClose:this.$1_7;this.ensureAttachedAndSized();this.$1_10=true;if(this.get_isShown()){this.setTooltipBodyAndReposition(body);}else{this.get_body().empty().append(body);this.requestLayout();}},move:function(position){if(!this.$1_6||ss.isNullOrUndefined(position)||(ss.isValue(this.$1_9)&&this.$1_9.x===position.x&&this.$1_9.y===position.y)){return;}this.$1_D=position;this.requestLayout();},close:function(){this.$1_10=false;if(!this.$1_6){return;}this.detach();this.$1_6=false;this.onClosed();},dispose:function(){this.close();this.$1_2.remove_click(ss.Delegate.create(this,this.$1_1D));this.$1_2.dispose();if(!tsConfig.is_mobile){$(window).unbind(this.createNamespacedEventName('resize'));}tab.Tooltip.callBaseMethod(this, 'dispose');},forceLayout:function(){this.$1_11=null;this.requestLayout();},requestLayout:function(callback){if(ss.isValue(callback)){this.$1_4.add(callback);}tab.BrowserViewport.getViewport(ss.Delegate.create(this,this.layoutTooltip));},onShowed:function(args){if(ss.isValue(this.$1_15)){this.$1_15(this,args);}},onPrePosition:function(){if(ss.isValue(this.$1_13)){this.$1_13();}},onPositioned:function(args){if(ss.isValue(this.$1_14)){this.$1_14(this,args);}},onClosed:function(){if(ss.isValue(this.$1_12)){this.$1_12();}},ensureAttachedAndSized:function(){if(!this.get_element().parent().is(document.body)){this.get_element().appendTo(document.body);}},detach:function(){this.get_element().hide();this.get_element().detach();this.get_element().unbind(this.get_eventNamespace());this.get_element().find('*').unbind(this.get_eventNamespace()).removeClass('hover');},$1_16:function($p0,$p1){if(ss.isNullOrUndefined($p0)||ss.isNullOrUndefined($p1)){return null;}this.$1_9=$p0;var $0=this.get_element().css('top');var $1=this.get_element().css('left');this.get_element().css({top:'0',left:'0'});var $2=ss.isValue(this.$1_E)&&$p0.y>=this.$1_E-16;var $3=this.get_element().height();var $4=this.get_element().width();var $5=$p1.getVisibleRoom($p0,1);var $6;if(!($5.roomRight>=$4+this.get_horizontalOffset())&&($5.roomRight+$5.roomLeft)>=$4+this.get_horizontalOffset()){$6=parseInt(Math.max(0,($5.roomRight-$4)));}else{$6=this.get_horizontalOffset();}var $7=$3+this.get_verticalOffset();var $8=$4+$6;var $9;var $A;if($5.roomRight>=$8){$9=true;$A=$p0.x+$6;}else if($5.roomLeft>=$8){$9=false;$A=$p0.x+$5.roomRight-$8;}else{$9=true;$A=Math.max(0,$p0.x-$8+$5.roomRight);}var $B=(this.get_showAbove())?this.$1_1B($p0,$5,$7,$8):this.$1_1A($p0,$5,$7,$8,$2);var $C=$B<=$p0.y;this.get_element().css({left:$1,top:$0});var $D=new tab.ShownEventArgs();if($C){if($9){$D.position='AR';}else{$D.position='AL';}}else{if($9){$D.position='BR';}else{$D.position='BL';}}$D.shownX=$A;$D.shownY=$B;$D.origX=$p0.x;$D.origY=$p0.y;$D.viewport=$p1;return $D;},$1_17:function($p0){var $0=this.$1_18($p0.position);if(!this.get_element().hasClass($0)){this.get_element().removeClass(tab.Tooltip.$1_1);this.get_element().addClass($0);}this.get_element().css({left:$p0.shownX+'px',top:$p0.shownY+'px'});this.$1_11=$p0;},$1_18:function($p0){var $0;switch($p0){case 'AR':$0='tab-tooltipAR';break;case 'AL':$0='tab-tooltipAL';break;case 'BL':$0='tab-tooltipBL';break;case 'BR':default:$0='tab-tooltipBR';break;}return $0;},layoutTooltip:function(viewport,justPosition){if(justPosition){this.$1_17(this.$1_16(this.get_lastLocation(),viewport));}else{var $enum1=ss.IEnumerator.getEnumerator(this.$1_4);while($enum1.moveNext()){var $1=$enum1.current;$1();}this.$1_4.clear();this.onPrePosition();var $0=this.$1_16(this.get_lastLocation(),viewport);if(!this.$1_19($0)){return;}this.$1_17($0);this.onPositioned($0);if(this.$1_10){this.$1_10=false;if(this.$1_8){this.$1_3.get_closeButton().html('').append(this.$1_2.get_element());this.$1_2.set_disabled(false);}else{this.$1_2.get_element().remove();this.$1_2.set_disabled(true);}this.get_element().show();this.$1_6=true;this.onShowed($0);}}},$1_19:function($p0){if(ss.isNullOrUndefined($p0)){return false;}if(this.$1_10){return true;}if(tab.ShownEventArgs.areShownArgsSame($p0,this.$1_11)&&parseInt(this.get_element().css('top'))===$p0.shownY){return false;}return true;},$1_1A:function($p0,$p1,$p2,$p3,$p4){var $0;if(!$p4&&$p1.roomBelow>=$p2){$0=$p0.y+this.get_verticalOffset();this.$1_E=null;}else if(!$p4&&$p1.roomAbove>=$p2&&$p1.roomRight>=$p3){$0=$p0.y+($p1.roomBelow-$p2+this.get_verticalOffset());}else if($p1.roomAbove>=$p2){$0=$p0.y-$p2;if(!ss.isValue(this.$1_E)){this.$1_E=$p0.y;}}else{$0=Math.max(0,$p0.y-$p1.roomAbove);}return $0;},$1_1B:function($p0,$p1,$p2,$p3){var $0;if($p1.roomAbove>=$p2){$0=$p0.y-$p2;if(!ss.isValue(this.$1_E)){this.$1_E=$p0.y;}}else if($p1.roomBelow>=$p2){$0=$p0.y+this.get_verticalOffset();this.$1_E=null;}else if($p1.roomAbove>=$p2&&$p1.roomRight>=$p3){$0=$p0.y+($p1.roomBelow-$p2+this.get_verticalOffset());}else{$0=Math.max(0,$p0.y-$p1.roomAbove);}return $0;},$1_1D:function(){this.close();},setSuppressTooltip:function(suppress){this.$1_F=suppress;if(this.$1_F){this.close();}}}
tab.TooltipTemplate=function(){tab.TooltipTemplate.initializeBase(this,[$("\n<div class='tab-tooltip'>\n  <div class='tab-tooltipContainer'>\n    <div class='tab-tooltipX'></div>\n    <div class='tab-tooltipContent' waiRole='alert'></div>\n  </div>\n  <div class='tab-tooltipConnector'></div>\n</div>")]);}
tab.TooltipTemplate.prototype={get_body:function(){return this.getElementBySelector('.tab-tooltipContent');},get_closeButton:function(){return this.getElementBySelector('.tab-tooltipX');}}
tab.TreeSupport=function(session,field,levels,isSingleSelect){this.session=session;this.field=field;this.levels=levels;this.isSingleSelect=isSingleSelect;this.root={};this.root.schema=null;this.root.tuple=tab.$create_TupleStruct(null,false,null);this.root.label='$ROOT$';this.root.level=-1;this.root.children=null;}
tab.TreeSupport.prototype={root:null,session:null,field:null,levels:0,isSingleSelect:false,$0:function($p0){var $0=$p0.t;if(tab.MiscUtil.isNullOrEmpty($0)){return false;}var $1=$0[$0.length-1];var $2=$1.s;var $3=tableau.types.DataSpecial.DS_RAGGED;var $4=tableau.types.DataSpecial.DS_SKIPPED;return ($2===$3||$2===$4);},itemsFromTable:function(data,level){var $0=[];var $1=(ss.isValue(data.table))?data.table.tuples:null;if(ss.isNullOrUndefined(data.table)){return $0;}for(var $2=0;$2<$1.length;$2++){var $3=tableau.format.formatTupleDisplayName($1[$2]);var $4=null;if(!!data.children){$4=this.itemsFromTable(data.children[$2],level+1);}var $5={};$5.id=tableau.format.formatTupleUniqueName($1[$2]);$5.schema=data.table.schema;$5.tuple=$1[$2];$5.label=$3;$5.level=level;$5.children=$4;$5.isRaggedOrSkipped=this.$0($1[$2]);$0.push($5);}return $0;},$1:function($p0){var $0=$p0.node;$0.updateCheckState();if(ss.isValue($p0.node2)){$p0.node2.updateCheckState();}},onChildrenChange:function(parent,newChildrenList){parent.children=newChildrenList;},getIdentity:function($p0){return $p0.id;},getLabel:function($p0){return $p0.label;},isChecked:function(item){return item.tuple.s;},mayHaveChildren:function(item){return item.level+1<this.levels;},getRoot:function(onComplete,onError){onComplete(this.root);},getChildren:function(parent,onComplete,onError){if(ss.isValue(parent.children)||parent===this.root){onComplete(parent.children);}else{var $0=ss.Delegate.create(this,function($p1_0){
if(!!!$p1_0[0].table){parent.children=null;}else{parent.children=this.itemsFromTable($p1_0[0],parent.level+1);}onComplete(parent.children);});var $1={};$1.schema=parent.schema;$1.tuples=[parent.tuple];this.session.requestHSMChildren(this.field,$1,$0,onError);}},refresh:function(table){this.$2(this.root,table);},$2:function($p0,$p1){if(tab.MiscUtil.isNullOrEmpty($p0.children)){return;}this.$3($p0.children,$p1[0].table);_.each($p0.children,ss.Delegate.create(this,function($p1_0,$p1_1){
if(!!$p1_0.children){if(ss.isValue($p1[0].children)&&$p1_1<$p1[0].children.length){this.$2($p1_0,[$p1[0].children[$p1_1]]);}else{var $1_0=ss.Delegate.create(this,function($p2_0){
this.$2($p1_0,$p2_0);});var $1_1={};$1_1.schema=$p1_0.schema;$1_1.tuples=[$p1_0.tuple];this.session.requestHSMChildren(this.field,$1_1,$1_0,null);}}}));},$3:function($p0,$p1){var $0=$p1.tuples;for(var $1=0;$1<$0.length;$1++){if($p0[$1].tuple.s!==$0[$1].s){$p0[$1].tuple.s=$0[$1].s;this.$1($p0[$1]);}}return $p0;}}
tab.TreeNode=function(param){tab.TreeNode.initializeBase(this);}
tab.TreeNode.prototype={isChecked:false,$2_0:null,tree:null,item:null,dispose:function(){this.$2_0.dispose();this.$2_0=null;},destroy:function(preserveDom){this.dispose();this.inherited(arguments);},updateCheckState:function(){this.isChecked=this.tree.model.isChecked(this.item);var $0=$(this.labelNode).find('input');if(this.isChecked){$0.attr('checked','checked');}else{$0.removeAttr('checked');}},setLabelNode:function(label){this.isChecked=this.tree.model.isChecked(this.item);var $0=(this.isChecked)?" checked='checked'":'';var $1='<input type=';if(this.tree.model.isSingleSelect){var $2=this.tree.model.field;if(ss.isValue(this.tree.model.session)){$2+=this.tree.model.session.get_viewId();}$1+="'radio' name='FI_"+$2+"'";}else{$1+="'checkbox'";}$1+=$0+"/><a title='"+label+"'>"+label+'</a>';this.labelNode.innerHTML=$1;if(ss.isValue(this.$2_0)){this.$2_0.dispose();}this.$2_0=new tab.DisposableHolder();this.$2_0.add(spiff.EventUtil.bindWithDispose($(this.labelNode.firstChild),'click',ss.Delegate.create(this,this.$2_1)));},$2_1:function($p0){this.isChecked=(this.labelNode.firstChild).checked;this.tree.notifyChange($p0);$p0.stopPropagation();}}
tab.Tree=function(param){tab.Tree.initializeBase(this);}
tab.Tree.prototype={model:null,anchor:null,prev_anchor:null,anchorIsStart:false,add_notifyChangeCalled:function(value){this.$2_0=ss.Delegate.combine(this.$2_0,value);},remove_notifyChangeCalled:function(value){this.$2_0=ss.Delegate.remove(this.$2_0,value);},$2_0:null,_createTreeNode:function($p0){$p0['isChecked']=this.model.isChecked($p0['item']);var $0=new tableau.base.widget.hsm._TreeNode($p0);($p0['item']).node=$0;return $0;},$2_1:function($p0){return this.model.mayHaveChildren($p0);},getIconClass:function(item,opened){return 'HFTreeNodeIcon';},getLabelClass:function(item,opened){var $0=(this.model.isSingleSelect)?'HFTreeNodeLabelSS':'HFTreeNodeLabel';$0+=(item.isRaggedOrSkipped)?' HFTreeNodeRaggedOrSkipped':'';return $0;},focusNode:function(node){var $0=dojo.attr(node.labelNode,'tabindex');if(!!$0){dojo.removeAttr(node.labelNode,'tabindex');}this.inherited(arguments);if(!!$0){dojo.attr(node.labelNode,'tabindex',$0);}},notifyChange:function(e){if(ss.isValue(this.$2_0)){this.$2_0(e);}},getDepth:function(node){var $0=0;while(node!==this.rootNode){$0+=1;node=node.getParent();}return $0;},findEarlierNode:function(node1,node2,level){return this.rEarlierContained(this.rootNode,0,node1,node2,level);},rEarlierContained:function(searchNode,searchLevel,n1,n2,targetLevel){if(searchLevel>targetLevel){return null;}else if(searchLevel<targetLevel){var $0=searchNode.getChildren();var $1=$0.length;for(var $2=0;$2<$1;$2++){var $3=this.rEarlierContained($0[$2],searchLevel+1,n1,n2,targetLevel);if(ss.isValue($3)){return $3;}}}else{if(searchNode===n1){return n1;}if(searchNode===n2){return n2;}return null;}return null;}}
tab.TypeIn=function(targetDiv,doUpdateFunc,style){this.div=targetDiv;this.$D=doUpdateFunc;this.$A=style;dojo.addClass(this.div,'tableauWidgetUiTypeIn');this.$0=new tab.DisposableHolder();}
tab.TypeIn.prototype={queryBox:null,div:null,outerDiv:null,querySpan:null,$0:null,$1:null,goButton:null,$2:null,$3:null,$4:false,$5:null,$6:null,$7:false,$8:null,$9:false,$A:null,$B:false,$C:0,$D:null,$E:null,$F:null,get_element:function(){return $(this.div);},instantiate:function(pattern,fieldnameArg,dataValue,minValue,maxValue,numberFormatArg,dateFormatArg,dateEditingFormatArg,firstDayOfWeek){this.$2=pattern;this.$1=fieldnameArg;this.$3=dataValue;this.$F=numberFormatArg;if(ss.isNullOrUndefined(this.$2)){this.$2='';}this.div.innerHTML="<div id='typein_"+tableau.format.escapeHTML(fieldnameArg)+"' class='TypeInDiv tab-ctrl-formatted-border tab-ctrl-formatted-darker-border-hover'>"+"<span class='TypeInQuerySpan'><input type='text' class='QueryBox' value='"+tableau.format.escapeHTML(this.$2)+"'/></span>"+"<span class='goButton' style='display:none'></span></div>";this.outerDiv=this.div.firstChild;this.querySpan=this.outerDiv.childNodes[0];this.queryBox=this.querySpan.childNodes[0];this.goButton=this.outerDiv.childNodes[1];var $0=function($p1_0){
$p1_0.stopPropagation();};var $1=$(this.queryBox);this.$0.add(spiff.EventUtil.bindWithDispose($1,'keydown',ss.Delegate.create(this,this.$1E)));this.$0.add(spiff.EventUtil.bindWithDispose($1,'keyup',ss.Delegate.create(this,this.$1F)));this.$0.add(spiff.EventUtil.bindWithDispose($1,'blur',ss.Delegate.create(this,this.onInputBlur)));this.$0.add(spiff.EventUtil.bindWithDispose($1,'focus',ss.Delegate.create(this,this.onQueryBoxFocus)));this.$0.add(spiff.EventUtil.bindWithDispose($1,'click',ss.Delegate.create(this,this.$14)));this.$0.add(spiff.EventUtil.bindWithDispose($1,'mousedown',$0));this.$0.add(spiff.EventUtil.bindWithDispose($1,'mousemove',$0));var $2=$(this.goButton);this.$0.add(spiff.EventUtil.bindWithDispose($2,'mousedown',ss.Delegate.create(this,this.$1B)));this.$0.add(spiff.EventUtil.bindWithDispose($2,'click',ss.Delegate.create(this,this.$1C)));this.$0.add(spiff.EventUtil.bindWithDispose($2,'mouseenter',ss.Delegate.create(this,this.$15)));this.$0.add(spiff.EventUtil.bindWithDispose($2,'mouseleave',ss.Delegate.create(this,this.$16)));var $3=ss.Delegate.create(this,function($p1_0,$p1_1){
if(this.$17()&&!this.isInsideWidget($p1_0)){this.setNewPattern();this.queryBox.blur();}});spiff.GlobalTouchWatcher.add_firstTouch($3);this.$0.add(new tab.CallOnDispose(function(){
spiff.GlobalTouchWatcher.remove_firstTouch($3);}));this.$4=false;this.$20();},isInsideWidget:function(e){return tab.DomUtil.isEqualOrAncestorOf(this.outerDiv,e.target);},destroy:function(){this.dispose();},dispose:function(){this.$0.dispose();},layout:function(){},editableValue:function(){return tableau.format.formatDataValue(this.$3,null,tableau.format.deriveNumberEditingFormat(this.$F),null,tab.DateTimeAutoFormatMode.showFullDateTime);},setNewState:function(pattern,domainArg,dataValue,minValue,maxValue){this.$2=pattern;this.queryBox.value=pattern;if(ss.isValue(dataValue)){this.$3=dataValue;}else{if(ss.isValue(this.$3)){var $0=this.$3;this.$3={};this.$3.s=tableau.types.DataSpecial.DS_NULL;this.$3.t=$0.t;}}this.$1A();this.$5=(domainArg||new Array(0));this.$6='';},$10:function(){return (tab.FilterModel.isNormalValue(this.$3)&&!this.$7);},$11:function($p0,$p1){this.$6='';this.$7=true;this.$5=($p0||new Array(0));this.$E=$p1;},$12:function($p0){this.clearTimeout();this.$8=window.setTimeout($p0,500);},clearTimeout:function(){if(ss.isValue(this.$8)){window.clearTimeout(this.$8);this.$8=null;}},$13:function(){if(!this.$7){return;}if(tab.MiscUtil.isNullOrEmpty(this.queryBox.value)){return;}if(!this.$6.toLowerCase().indexOf(this.queryBox.value.toLowerCase())){this.onAutocompleteDone(this.$6);return;}if(this.$5.length>0){var $0=this.queryBox.value.toLowerCase();var $1=this.$5.length;for(var $2=0;$2<$1;$2++){if(!this.$5[$2].toLowerCase().indexOf($0)){this.onAutocompleteDone(this.$5[$2]);return;}}}else if(ss.isValue(this.$E)){this.$12(ss.Delegate.create(this,function(){
this.$E(this.queryBox.value,ss.Delegate.create(this,this.onAutocompleteDone),this.$1);}));}},onAutocompleteDone:function($p0){var $0=$p0;if(tab.MiscUtil.isNullOrEmpty($0)){return;}this.$6=$0;var $1=this.queryBox.value;this.queryBox.value=$0;tableau.util.selectText(this.queryBox,$1.length,$0.length);},onQueryBoxFocus:function(e){this.queryBox.isFocused=true;if(this.$10()){this.queryBox.value=this.editableValue();this.$B=true;}},$14:function($p0){if(this.queryBox.isFocused){this.queryBox.select();}this.queryBox.isFocused=false;},$15:function($p0){dojo.addClass(this.goButton,'Hover');},$16:function($p0){dojo.removeClass(this.goButton,'Hover');},$17:function(){if(this.$B&&this.$10()){return this.editableValue()!==this.queryBox.value;}else{return this.$2!==this.queryBox.value;}},$18:function(){var $0=(this.$A==='TypeIn')?this.$17():!String.isNullOrEmpty(this.queryBox.value);if($0){this.$19();}else{this.$1A();}},$19:function(){dojo.style(this.goButton,'display','');dojo.addClass(this.goButton,this.$A+'Active');dojo.addClass(this.querySpan,'ShortQuerySpan');},$1A:function(){dojo.removeClass(this.querySpan,'ShortQuerySpan');dojo.removeClass(this.goButton,this.$A+'Active');dojo.style(this.goButton,'display','none');},onInputBlur:function(e){this.queryBox.isFocused=false;if(!this.$4&&!this.$9){this.setNewPattern();}this.$9=false;},$1B:function($p0){this.$4=true;},$1C:function($p0){this.$21();this.$4=false;},$1D:function($p0){this.$20();if(dojo.isFF){window.setTimeout(ss.Delegate.create(this,this.$20),10);}this.$18();$p0.stopPropagation();$p0.preventDefault();},$1E:function($p0){if($p0.which===27){this.$1D($p0);}this.$C=$p0.which;},$1F:function($p0){switch($p0.which){case 13:this.clearTimeout();this.setNewPattern();this.queryBox.blur();$p0.stopPropagation();$p0.preventDefault();break;case 27:this.clearTimeout();this.$1D($p0);this.$9=true;this.queryBox.blur();break;case 8:case 46:this.clearTimeout();this.$18();break;case 16:this.$18();break;default:if(this.$C===$p0.which){this.$13();this.$18();}break;}},setPattern:function(newPattern){this.queryBox.value=newPattern;this.clearTimeout();this.setNewPattern();this.queryBox.blur();},setNewPattern:function(){if(this.$17()){this.$D(this.queryBox.value);if(!this.$10()){this.setNewState(this.queryBox.value);}}else if(this.$10()){this.$20();}this.$B=false;},$20:function(){this.queryBox.value=this.$2;this.$B=false;this.$18();},$21:function(){if(this.$A==='TypeIn'){this.$20();this.queryBox.blur();}else{this.queryBox.value='';this.setNewPattern();}this.$18();}}
tab.TypeInDateField=function(targetDiv,doUpdateFunc,style,createDatePickerFunc){tab.TypeInDateField.initializeBase(this,[targetDiv,doUpdateFunc,style]);this.$22=createDatePickerFunc;if(ss.isNullOrUndefined(this.$22)){this.$22=function($p1_0){
return new tab.DatePicker($p1_0);};}}
tab.TypeInDateField.prototype={$22:null,$23:null,$24:null,$25:null,get_calendarElement:function(){return this.$23.get_element();},dispose:function(){tab.TypeInDateField.callBaseMethod(this, 'dispose');this.$23.dispose();},instantiate:function(pattern,fieldnameArg,dataValue,minValue,maxValue,numberFormatArg,dateFormatArg,dateEditingFormatArg,firstDayOfWeek){tab.TypeInDateField.callBaseMethod(this, 'instantiate',[pattern,fieldnameArg,dataValue,minValue,maxValue,numberFormatArg,dateFormatArg,dateEditingFormatArg,firstDayOfWeek]);this.$24=dateFormatArg;this.$25=dateEditingFormatArg;var $0=this.$24.locale_formatting_strings;var $1=$0.narrowDay;$1.shift();var $2=this.$26(this.$3);if(ss.isValue(firstDayOfWeek)){firstDayOfWeek=firstDayOfWeek-1;}var $3=new tab.DatePickerSettings($2,$2,this.$26(minValue),this.$26(maxValue),firstDayOfWeek,$1,$0.todayFormatTemplate,ss.Delegate.create(this,function($p1_0){
return tableau.format.formatCustomJSDateTime($p1_0,tableau.format.mapIcuToOleFormat(this.$24.yearMonthFormat),tab.DateTimeAutoFormatMode.showDateOnly,tableau.types.DataType.DT_DATE,this.$24.locale,null,null,$0);}),ss.Delegate.create(this,function($p1_0){
return tableau.format.formatCustomJSDateTime($p1_0,this.$25.format,tab.DateTimeAutoFormatMode.showDateOnly,tableau.types.DataType.DT_DATE,this.$25.locale,null,null,$0);}));this.$23=this.$22($3);this.$23.get_element().on('dateSelected',ss.Delegate.create(this,this.$28)).appendTo(document.body);},$26:function($p0){return (tab.FilterModel.isNormalValue($p0))?new Date(tableau.types.JsDateFromOleDate($p0.v)):null;},editableValue:function(){return tableau.format.formatDataValue(this.$3,tableau.types.TableauTypesFieldRole.ROLE_MEASURE,this.$25,null,tab.DateTimeAutoFormatMode.showFullDateTime);},$27:function(){if(ss.isValue(this.$3)&&ss.isValue(this.$3.t)){return this.$3.t;}else{return tableau.types.DataType.DT_TIMESTAMP;}},setNewState:function(pattern,domainArg,dataValue,minValue,maxValue){tab.TypeInDateField.callBaseMethod(this, 'setNewState',[pattern,domainArg,dataValue,minValue,maxValue]);this.$23.setDateRange(this.$26(minValue),this.$26(maxValue));},isInsideWidget:function(e){var $0=this.$23.get_element().get(0);return tab.TypeInDateField.callBaseMethod(this, 'isInsideWidget',[e])||tab.DomUtil.isEqualOrAncestorOf($0,e.target);},onQueryBoxFocus:function(e){tab.TypeInDateField.callBaseMethod(this, 'onQueryBoxFocus',[e]);if(this.$23.get_element().is(':hidden')){var $0=this.$26(this.$3);this.$23.show($0);this.$23.positionCalendarByElement($(this.queryBox).closest('.TypeInDiv'));}},$28:function($p0,$p1){this.$23.hide();this.setPattern(tableau.format.formatJsDateTime($p1,this.$25,tab.DateTimeAutoFormatMode.showFullDateTime,this.$27()));},onInputBlur:function(e){this.$23.hide();tab.TypeInDateField.callBaseMethod(this, 'onInputBlur',[e]);}}
tab.TypeInFilterContents=function(){this.templateString="<div class='TypeInFilter'>"+"<div class='TIFItemsList tab-ctrl-formatted-text' dojoAttachPoint='domItemsList'"+"dojoAttachEvent='onclick:_onItemsListClick,onmouseover:_onItemsListMouseOver,onmouseout:_onItemsListMouseOut,onkeydown:_onItemsKeyDown'>"+"<div class='wcIconSearchRemove' dojoAttachPoint='domXButton'"+"dojoAttachEvent='onclick:_onXButtonClick,onmouseover:_onXButtonMouseOver,onmouseout:_onXButtonMouseOut'></div>"+'</div>'+"<div class='TIFButtonDiv' dojoAttachPoint='domClearListButtonDiv'>"+"<button class='TIFButton'"+"dojoAttachEvent='onclick:_onClearListButtonClick'>Clear List</button>"+'</div>'+'</div>';tab.TypeInFilterContents.initializeBase(this);}
tab.TypeInFilterContents.prototype={isContainer:false,parentFilter:null,tuples:null,itemName:'',role:null,domItemsList:null,domXButton:null,domClearListButtonDiv:null,$1_0:null,postCreate:function(){var $0=tableau.format.formatTupleDisplayName;var $1=tableau.FilterItem.getTypeInHtml;var $2=[];var $3=0;for(var $4=0;$4<this.tuples.length;$4++){var $5=this.tuples[$4];if($5.s){var $6=this.itemName+'_'+$4;var $7=$1($6,$0($5,true,this.role));$2.add($7);$3++;}}this.domItemsList.innerHTML=$2.join('');dojo.style(this.domClearListButtonDiv,'display',($3>3)?'block':'none');},_onItemsListClick:function($p0){this.parentFilter.onListItemClick($p0);},_onItemsListMouseOver:function($p0){if(!ss.isValue($p0.target)||!dojo.hasClass($p0.target,'FITypeInItem')){return;}dojo.addClass($p0.target,'Hover');var $0=this.$1_0=tableau.FilterItem.getNodeFromEvent($p0);$0.appendChild(this.domXButton);dojo.style(this.domXButton,'top','2px');dojo.style(this.domXButton,'display','block');},_onItemsListMouseOut:function($p0){if(!ss.isValue($p0.relatedTarget)||$p0.relatedTarget!==this.domXButton){if(ss.isValue(this.$1_0)){dojo.removeClass(this.$1_0,'Hover');}this.$1_0=null;dojo.style(this.domXButton,'display','none');}},_onItemsKeyDown:function($p0){if($p0.keyCode===dojo.keys.DELETE){this._removeSelectedItemsFromFilter();dojo.stopEvent($p0);}},_onXButtonClick:function($p0){var $0=null;$p0.stopPropagation();$p0.preventDefault();var $1=tableau.FilterItem.getNodeFromEvent($p0);if(!ss.isValue($1)){return;}tableau.FilterItem.setChecked($1,false);if(ss.isValue(this.parentFilter.get_oFilter())){$0=this.parentFilter.get_oFilter().table;}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isValue($0)&&$0.actual_size===$0.tuples.length){var $3=new tab.CategoricalFilterData(this.parentFilter.get_oFilter().targetSheets,this.parentFilter.get_field(),this.parentFilter.get_oFilter().exclude,this.getCheckedAliases(this.getUIState()));tab.FilterClientCommands.updateCategoricalFilter($3);}}this.parentFilter.clearRangeAnchorAndSelection();var $2=ss.Delegate.create(this.parentFilter,this.parentFilter.applyChanges);this.parentFilter.notifyChange($2);},_onXButtonMouseOver:function($p0){dojo.addClass(this.domXButton,'Hover');},_onXButtonMouseOut:function($p0){dojo.removeClass(this.domXButton,'Hover');},_onClearListButtonClick:function($p0){var $0;var $1=null;this.parentFilter.get_searchWidget().clearSearch(true,false);for($0=this.domItemsList.firstChild;ss.isValue($0);$0=$0.nextSibling){tableau.FilterItem.setChecked($0,false);}this.parentFilter.set_stateId(this.parentFilter.get_stateId()+1);if(ss.isValue(this.parentFilter.get_oFilter())){$1=this.parentFilter.get_oFilter().table;}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isValue($1)&&$1.actual_size===$1.tuples.length){var $3=new tab.CategoricalFilterData(this.parentFilter.get_oFilter().targetSheets,this.parentFilter.get_field(),this.parentFilter.get_oFilter().exclude,this.getCheckedAliases(this.getUIState()));tab.FilterClientCommands.updateCategoricalFilter($3);}}this.parentFilter.clearRangeAnchorAndSelection();var $2=ss.Delegate.create(this.parentFilter,this.parentFilter.applyChanges);this.parentFilter.notifyChange($2);dojo.style(this.domClearListButtonDiv,'display','none');},layout:function(contentSize,horizontalLayout){if(tableau.util.isElementVisible(this.domClearListButtonDiv)){var $0=dojo.marginBox(this.domClearListButtonDiv);contentSize['h']=Math.max(0,contentSize['h']-$0['h']);}if(dojo.isIE<8){if(contentSize['h']<=12){dojo.style(this.domItemsList,'overflow','hidden');}else{dojo.style(this.domItemsList,'overflow','');}}dojo.marginBox(this.domItemsList,contentSize);},_removeSelectedItemsFromFilter:function(){this.parentFilter.forEachSelected(function($p1_0,$p1_1){
tableau.FilterItem.setChecked($p1_1,false);});this.parentFilter.clearRangeAnchorAndSelection();this.parentFilter.notifyChange(null);},getUIState:function(){var $0=this.domItemsList.firstChild,$1;var $2={};for($1=$0;ss.isValue($1);$1=$1.nextSibling){var $3=this.getFormattedAlias(this.tuples[tableau.FilterItem.getIndex($1)]);$2[$3]=tableau.FilterItem.isChecked($1);}return $2;},getCheckedAliases:function($p0){var $0=[];var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $1=$enum1.current;if(tab.MiscUtil.hasOwnProperty($p0,$1)){if($p0[$1]){$0.add($1);}}}return $0;},getFormattedAlias:function(tuple){return tableau.format.formatTupleDisplayName(tuple,true,this.role);}}
tab.Ubertip=function(tooltip,enforceButtonOrderingInMultiselect){this.$1_B=new tab.DisposableHolder();this.$1_12=-1;tab.Ubertip.initializeBase(this,[$("\n<div class='tab-ubertip'>\n  <div class='tab-ubertipContent'>\n    <div class='tab-ubertipTooltip'></div>\n    <div class='tab-ubertipActions'></div>\n  </div>\n  <div class='tab-ubertipCommandArea'>\n    <div class='tab-ubertipSelected'></div>\n    <div class='tab-ubertipCommands'></div>\n    <div class='tab-clear'></div>\n  </div>\n</div>")]);this.$1_A=tooltip;this.$1_A.add_showed(ss.Delegate.create(this,this.handleTooltipShowed));this.$1_A.add_positioned(ss.Delegate.create(this,this.handleTooltipShowing));this.$1_F=enforceButtonOrderingInMultiselect;}
tab.Ubertip.$1_1E=function($p0){var $0='';if(String.isNullOrEmpty($p0.imageRes)){$0='Command'+$p0.commandType;}else{if($p0.imageRes.toString().endsWith('png')){$0=tab.TabResources.getResourceName($p0.imageRes);}else{$0=tab.TabResources.lookupFullResourceAlias($p0.imageRes);}}return $0;}
tab.Ubertip.$1_1F=function($p0){var $0=spiff.LabelButton.newNativeButton();if(tsConfig.is_mobile){var $2=tab.Ubertip.$1_1E($p0);$0.set_label(tab.Strings.getString(String.format('Ubertip{0}Mobile',$2)));}else{$0.set_label($p0.name);$0.set_hoverTooltipText($p0.description);}$0.set_disabled(true);var $1=new ss.StringBuilder('tab-command');$1.append(tab.Ubertip.$1_1E($p0));$0.get_element().addClass($1.toString());$0.get_element().css('visibility','hidden');return $0;}
tab.Ubertip.prototype={$1_A:null,$1_D:null,$1_E:null,$1_F:false,$1_10:false,$1_11:null,add_commandExecuted:function(value){this.$1_13=ss.Delegate.combine(this.$1_13,value);},remove_commandExecuted:function(value){this.$1_13=ss.Delegate.remove(this.$1_13,value);},$1_13:null,add_actionExecuted:function(value){this.$1_14=ss.Delegate.combine(this.$1_14,value);},remove_actionExecuted:function(value){this.$1_14=ss.Delegate.remove(this.$1_14,value);},$1_14:null,add_ubertipMenuToggled:function(value){this.$1_15=ss.Delegate.combine(this.$1_15,value);},remove_ubertipMenuToggled:function(value){this.$1_15=ss.Delegate.remove(this.$1_15,value);},$1_15:null,add_ubertipMenuClosed:function(value){this.$1_16=ss.Delegate.combine(this.$1_16,value);},remove_ubertipMenuClosed:function(value){this.$1_16=ss.Delegate.remove(this.$1_16,value);},$1_16:null,get_model:function(){return this.$1_D;},set_model:function(value){this.$1_D=value;this.$1_21();return value;},get_isShowingActionAndCommandButtons:function(){return this.get_element().find('.tab-ubertipCommandArea').is(':visible')||this.get_element().find('.tab-ubertipActions').is(':visible');},get_$1_17:function(){return this.$1_F&&this.hasSummary();},dispose:function(){this.get_element().detach();this.$1_A.remove_showed(ss.Delegate.create(this,this.handleTooltipShowed));this.$1_A.remove_positioned(ss.Delegate.create(this,this.handleTooltipShowing));this.$1_20();tab.Ubertip.callBaseMethod(this, 'dispose');},hasActions:function(){if(ss.isNullOrUndefined(this.get_model())){return false;}var $0=ss.isValue(this.get_model().actionPMs)&&this.get_model().actionPMs.length>0;var $1=ss.isValue(this.get_model().actions)&&this.get_model().actions.length>0;return $0||$1;},hasCommands:function(){if(ss.isNullOrUndefined(this.get_model())){return false;}return ss.isValue(this.get_model().commands)&&this.get_model().commands.length>0;},hasSummary:function(){if(ss.isNullOrUndefined(this.get_model())){return false;}return ss.isValue(this.get_model().selectionHtml);},hasActionsOrSummaryOrCommands:function(){return this.hasActions()||this.hasSummary()||this.hasCommands();},hideMenuActionsAndCommandButtons:function(shouldRefresh){if(this.get_isShowingActionAndCommandButtons()&&shouldRefresh){this.$1_A.requestLayout(ss.Delegate.create(this,function(){
this.$1_24();this.get_element().find('.tab-ubertipCommands').css('min-width','');}));}else{this.$1_24();this.get_element().find('.tab-ubertipCommands').css('min-width','');}},prepareWidthForPositioning:function(){this.$1_22();},showMenuActionsAndCommandButtons:function(args){if(this.get_isShowingActionAndCommandButtons()){return;}this.get_element().css('width','');var $0=this.get_element().outerHeight();if(!this.$1_A.get_isShown()||!$0){this.$1_25(false);}else{var $1=this.$1_A.get_element().position();var $2=args.viewport.getVisibleRoom(tab.$create_Point($1.left,$1.top),1);this.$1_25(false);this.get_element().find('.tab-ubertipCommands').css('min-width',this.$1_23()+'px');var $3=this.get_element().outerHeight();var $4=this.get_element().find('.tab-ubertipActions').outerHeight();var $5=this.$1_19();if($5>this.$1_12){this.$1_12=$5;}this.get_element().width(this.$1_12);var $6=$1.left+$5>$1.left+$2.roomRight;var $7=this.$1_E==='BL'&&$1.top+$3>$1.top+$2.roomBelow;if($6||$7){this.$1_A.layoutTooltip(args.viewport,true);$1=this.$1_A.get_element().position();this.handleTooltipShowing(this,this.$1_A.get_previousShownArgs());if(this.$1_E==='AL'){var $D=parseInt(this.$1_A.get_element().css('top'));this.$1_A.get_element().css('top',($D+($3-$0-$4))+'px');}}var $8=parseInt(this.$1_A.get_element().css('top'));var $9=$8-($3-$0-$4);var $A=$1.top+$2.roomBelow+$3;var $B=Math.min($9,$A);this.$1_24();var $C=$4>0&&$1.top+$3>$1.top+$2.roomBelow;this.$1_25(!$C);if($C){var $E=$2.roomBelow-$0;var $F=$3-$0;var $10=$F-$E;$B=$1.top-$10-2;this.$1_A.get_element().css({top:$B+'px'});}else{switch(this.$1_E){case 'AR':case 'AL':if(this.$1_E==='AL'||($2.roomBelow<$3)){this.$1_A.get_element().animate({top:$B+'px'},'fast');}break;case 'BR':this.$1_A.get_element().css('top',($1.top-this.get_element().find('.tab-ubertipCommandArea').height())+'px');this.$1_A.get_element().animate({top:$B+'px'},'fast');break;case 'BL':default:break;}}}},handleRemoteFailure:function(){if(this.$1_10){this.$1_10=false;if(tab.CommandController.get().get_legacySession().get_waitHandler().isBusy()){tab.CommandController.get().get_legacySession().get_waitHandler().reset();}}},hideSpinner:function(){if(tab.CommandController.get().get_legacySession().get_waitHandler().isBusy()){tab.CommandController.get().get_legacySession().get_waitHandler().reset();}},handleTooltipShowing:function(sender,e){if(ss.isValue(this.$1_E)&&this.$1_E===e.position){return;}switch(e.position){case 'AL':case 'AR':this.get_element().find('.tab-ubertipContent').after(this.get_element().find('.tab-ubertipCommandArea'));this.get_element().find('.tab-ubertipCommands').before(this.get_element().find('.tab-ubertipSelected'));break;case 'BL':case 'BR':this.get_element().find('.tab-ubertipContent').before(this.get_element().find('.tab-ubertipCommandArea'));this.get_element().find('.tab-clear').after(this.get_element().find('.tab-ubertipSelected'));break;}this.$1_E=e.position;},handleTooltipShowed:function(sender,e){this.$1_18();},$1_18:function(){if(!this.get_element().width()){return;}var $0=this.$1_19();this.get_element().width($0);},$1_19:function(){return Math.min(this.get_element().width()+1,$(document.body).width()-2);},updateFromRemote:function(remoteModel){var $0=this.$1_D;this.$1_D=remoteModel;if(this.$1_10){var $enum1=ss.IEnumerator.getEnumerator(this.$1_D.actions);while($enum1.moveNext()){var $3=$enum1.current;if($3.name===this.$1_11){this.$1_10=false;var $4=new tab.ActionExecutedEventArgs();$4.action=$3;this.onActionExecuted($4);}}}var $1=[];var $2=null;if(ss.isValue($0)){$2=_.find($0.placeHolders,function($p1_0){
return $p1_0.commandType===10;});}if(ss.isValue($2)){var $5=_.find(this.$1_D.commands,function($p1_0){
return $p1_0.commandType===10;});if(ss.isValue($5)){if(!this.get_$1_17()){this.$1_D.commands.remove($5);this.$1_D.commands.add($5);$1.add(this.$1_D.commands.length-1);}}else{this.$1_D.placeHolders=[];this.$1_D.placeHolders.add($2);}}this.$1_21($1,true);},updatePartiallyFromRemote:function(remoteModel){if(ss.isNullOrUndefined(remoteModel)||ss.isNullOrUndefined(this.$1_D)){return;}this.$1_D.rid=remoteModel.rid;this.$1_1B(remoteModel);this.$1_1C(remoteModel);this.$1_1A(remoteModel);},$1_1A:function($p0){var $0=[];var $1=null;var $2=null;if(ss.isValue(this.$1_D)){$1=_.find(this.$1_D.placeHolders,function($p1_0){
return $p1_0.commandType===10;});$2=_.find($p0.commands,function($p1_0){
return $p1_0.commandType===10;});}if(ss.isValue($2)){if(!this.get_$1_17()){$p0.commands.remove($2);$p0.commands.add($2);$0.add($p0.commands.length-1);}this.$1_D.placeHolders=[];}else if(ss.isValue($1)){this.$1_D.placeHolders=[];this.$1_D.placeHolders.add($1);}this.$1_D.commands=$p0.commands;this.$1_2B($0);},$1_1B:function($p0){this.$1_D.selectionHtml=$p0.selectionHtml;this.$1_27();if(ss.isValue(this.$1_D.selectionHtml)){this.$1_22();this.$1_18();}},$1_1C:function($p0){this.$1_1D();this.$1_D.actionPMs=$p0.actionPMs;this.$1_D.actions=$p0.actions;this.$1_34();},$1_1D:function(){if(this.$1_10){var $enum1=ss.IEnumerator.getEnumerator(this.$1_D.actions);while($enum1.moveNext()){var $0=$enum1.current;if($0.name===this.$1_11){this.$1_10=false;var $1=new tab.ActionExecutedEventArgs();$1.action=$0;this.onActionExecuted($1);}}}},onCommandExecuted:function(args){if(ss.isValue(this.$1_13)){this.$1_13(this,args);}},onActionExecuted:function(args){if(ss.isValue(this.$1_14)){this.$1_14(this,args);}},$1_20:function(){this.$1_B.dispose();},$1_21:function($p0,$p1){var $0=false;var $1=this.$1_A.get_isShown();var $2=this.get_element().width();var $3=this.get_element().find('.tab-ubertipContent').height();var $4=this.get_element().find('.tab-ubertipCommandArea').height();this.$1_20();this.get_element().show();this.$1_26();this.$1_34();this.$1_2B($p0);this.$1_27();if(ss.isValue($p1)&&$p1&&$1){this.get_element().width($2);if(!$3||this.get_element().find('.tab-ubertipContent').hasClass('hide')){$0=true;}else{var $5=$3;var $6=this.get_element().find('.tab-ubertipCommandArea').height();if(!$6){$5+=$4;}this.get_element().find('.tab-ubertipContent').height($5);}}else{this.$1_22();}$0=$0||((ss.isNullOrUndefined(this.$1_D.actions)||!this.$1_D.actions.length)&&String.isNullOrEmpty(this.$1_D.tooltipHtml));if($0){this.get_element().find('.tab-ubertipContent').addClass('hide');}else{this.get_element().find('.tab-ubertipContent').removeClass('hide');}},$1_22:function(){this.get_element().css('width','');this.get_element().find('.tab-ubertipContent').css('height','');this.get_element().find('.tab-ubertipCommandArea').css('height','');var $0=this.computeAdjustedTooltipWidth();if($0>0){this.get_element().width($0);this.$1_12=$0;}else if(this.get_element().width()>0){this.$1_12=this.get_element().width();}},computeAdjustedTooltipWidth:function(){var $0=this.get_element().width();var $1=-1;var $2=tab.FeatureParamsLookup.getInt(tab.FeatureParam.maxTooltipWhitespace);if(!ss.isValue($2)){$2=70;}if($0>0&&this.$1_12>0&&this.$1_12>=$0&&this.$1_12-$0<=$2){$1=this.$1_12;}return $1;},$1_23:function(){var $0=0;this.get_element().find('.tab-ubertipCommands').find('li').each(function($p1_0,$p1_1){
$0+=$p1_1.firstChild.offsetWidth;});return $0;},$1_24:function(){this.$1_A.get_element().stop();this.get_element().find('.tab-ubertipActions').stop();this.get_element().find('.tab-ubertipCommandArea').stop();this.get_element().find('.tab-ubertipActions').hide();this.get_element().find('.tab-ubertipCommandArea').hide();},$1_25:function($p0){if(ss.isNullOrUndefined(this.get_model())){return;}if(this.hasActions()){if($p0){this.get_element().find('.tab-ubertipActions').show();}else{this.get_element().find('.tab-ubertipActions').show();}}if(this.hasCommands()||this.hasSummary()){if($p0){this.get_element().find('.tab-ubertipCommandArea').slideDown('fast');}else{this.get_element().find('.tab-ubertipCommandArea').show();}}},$1_26:function(){var $0=$(this.$1_D.tooltipHtml);this.get_element().find('.tab-ubertipTooltip').html('').append($0);},$1_27:function(){if(ss.isNullOrUndefined(this.$1_D.selectionHtml)){this.get_element().find('.tab-ubertipSelected').html('').addClass('hide');}else{this.get_element().find('.tab-ubertipSelected').html('').append(this.$1_D.selectionHtml).removeClass('hide');}},$1_28:function($p0,$p1,$p2){if($p0.get_commandsType()!=='subcommands'){return false;}var $0=[];tab.WidgetUtil.newMenuItemsFromCommands($0,$p0.get_commands(),tab.WidgetUtil.createDropdownMenuCommands,tab.PermissionManager.buildCommandPermission());if(!$0.length){return false;}var $1=this.$1_2E($p0);var $2=new spiff.MenuViewModel();$2.set_menu(new spiff.Menu($0));var $3=ss.Delegate.create(this,function(){
this.$1_2A($2,$1);});$1.add_click($3);$2.add_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked);var $4=function(){
$2.hide();};this.$1_A.add_closed($4);this.$1_B.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
$1.remove_click($3);$2.remove_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked);$2.remove_hidden(ss.Delegate.create(this,this.$1_29));this.$1_A.remove_closed($4);})));if($p2){$p1.append($("<li><div class='tab-separator'>&nbsp;</div></li>"));}var $5=$('<li></li>');$5.append($1.get_element());$p1.append($5);this.$1_B.add($2);spiff.ObjectRegistry.newView(spiff.MenuView,$2);return true;},$1_29:function(){if(ss.isValue(this.$1_16)){this.$1_16();}},$1_2A:function($p0,$p1){if($p0.get_visible()){$p0.remove_hidden(ss.Delegate.create(this,this.$1_29));$p0.hide();if(ss.isValue(this.$1_15)){this.$1_15(false);}}else{$p0.add_hidden(ss.Delegate.create(this,this.$1_29));var $0=spiff.ShowMenuOptions.create($p1.get_element(),false,$p1.get_element().outerWidth(false));$p0.show($0);if(ss.isValue(this.$1_15)){this.$1_15(true);}}},$1_2B:function($p0){var $0=false;var $1=$('<ul></ul>');if(ss.isValue(this.$1_D.commandsAndSubcommands)){var $enum1=ss.IEnumerator.getEnumerator(this.$1_D.commandsAndSubcommands);while($enum1.moveNext()){var $2=$enum1.current;var $3=$2.first;var $4=$2.second;if($3){var $5=this.$1_D.commands[$4];if(ss.isValue($5)&&$5.status!=='hidden'){var $6=ss.isValue($p0)&&$p0.contains($4);this.$1_2C($5,$1,$0,$6);$0=true;}}else{$0=this.$1_28(this.$1_D.subcommands[$4],$1,$0)||$0;}}}else if(ss.isValue(this.$1_D.commands)){for(var $7=0;$7<this.$1_D.commands.length;++$7){var $8=this.$1_D.commands[$7];if(ss.isValue($8)&&$8.status!=='hidden'){var $9=ss.isValue($p0)&&$p0.contains($7);this.$1_2C($8,$1,$0,$9);$0=true;}}}this.$1_2F($1,$0);if($0){this.get_element().find('.tab-ubertipCommands').html('').append($1).removeClass('hide');}else{this.get_element().find('.tab-ubertipCommands').html('').addClass('hide');}},$1_2C:function($p0,$p1,$p2,$p3){var $0=this.$1_2D($p0);$0.set_context($p0);this.$1_30($0,ss.Delegate.create(this,this.$1_31));if(Object.keyExists(tab.Ubertip.$1_C,$p0.commandType)){$0.get_element().width(tab.Ubertip.$1_C[$p0.commandType]);}if($p3){$0.get_element().fadeIn();}if($p2){$p1.append($("<li><div class='tab-separator'>&nbsp;</div></li>"));}var $1=$('<li></li>');$1.append($0.get_element());$p1.append($1);},$1_2D:function($p0){var $0=spiff.LabelButton.newNativeButton();if(tsConfig.is_mobile){var $2=String.format('Ubertip{0}Mobile',tab.Ubertip.$1_1E($p0));var $3=tab.Strings.getString($2);if($3===String.format('!{0}!',$2)){$3=$p0.name;}var $4=$('<div>'+$3+'</div>');$0.setLabelContents($4);}else{$0.set_label($p0.name);$0.set_hoverTooltipText($p0.description);}var $1=new ss.StringBuilder('tab-command');if(String.isNullOrEmpty($p0.imageRes)){$1.append($p0.commandType);}else{$1.append(tab.Ubertip.$1_1E($p0));}$1.append(' ').append($p0.status);$0.get_element().addClass($1.toString());if($p0.status==='disabled'){$0.set_disabled(true);}this.$1_B.add($0);spiff.HoverAddClassBehavior.attach($0);return $0;},$1_2E:function($p0){var $0=spiff.LabelButton.newNativeButton();$0.set_label($p0.get_name());$0.set_hoverTooltipText($p0.get_description());$0.get_element().addClass('enabled');$('<span>').addClass('tabTooltipMenuDropdownBtnIcon').appendTo($0.get_element());this.$1_B.add($0);spiff.HoverAddClassBehavior.attach($0);return $0;},$1_2F:function($p0,$p1){if(ss.isValue(this.get_model().placeHolders)){var $enum1=ss.IEnumerator.getEnumerator(this.get_model().placeHolders);while($enum1.moveNext()){var $0=$enum1.current;var $1=$("<li><div class='tab-separator'>&nbsp;</div></li>");var $2=tab.Ubertip.$1_1F($0);var $3=$('<li></li>');$3.append($2.get_element());if($0.commandType===10&&this.get_$1_17()&&$p1){var $4=_.filter(this.$1_D.commands,function($p1_0){
return $p1_0.commandType===2;});if(ss.isValue($4)){var $5=$p0.children().get(2);$1.insertAfter($5);$3.insertAfter($1);}else{var $6=$p0.children().get(0);$3.insertBefore($6);$1.insertBefore($6);}}else{if($p1){$p0.append($1);}$p0.append($3);}document.documentElement.appendChild($p0.first().get(0));tab.Ubertip.$1_C[$0.commandType]=$2.get_element().innerWidth();$2.get_element().width(tab.Ubertip.$1_C[$0.commandType]);document.documentElement.removeChild($p0.first().get(0));}}},$1_30:function($p0,$p1){var $0=function(){
$p1($p0);};$p0.add_click($0);this.$1_B.add(new tab.CallOnDispose(function(){
$p0.remove_click($0);}));},$1_31:function($p0){var $0=new tab.CommandExecutedEventArgs();$0.command=$p0.get_context();this.onCommandExecuted($0);},$1_32:function($p0){var $0=new tab.ActionExecutedEventArgs();$0.action=$p0.get_context();this.onActionExecuted($0);},$1_33:function($p0){var $0=$p0.get_context();if(tab.ActionUtils.isFilterAction($0)||(tab.ActionUtils.isHighlightAction($0)&&!tab.ActionUtils.isTargetOfActionLocal($0))){tab.CommandController.get().get_legacySession().get_waitHandler().showAndLock();this.$1_10=true;this.$1_11=$p0.get_labelElement().text();}else{var $1=tab.ModelUtils.getVisualModelFromVisualId(this.$1_D.visualId);var $2=[this.$1_D.tupleId];tab.UberTipClientCommands.executeUbertipAction($0,$2,$1);}},$1_34:function(){if((ss.isNullOrUndefined(this.$1_D.actions)||!this.$1_D.actions.length)&&(ss.isNullOrUndefined(this.$1_D.actionPMs)||!this.$1_D.actionPMs.length)){this.get_element().find('.tab-ubertipActions').html('').removeClass('invisible').addClass('hide');}else if(ss.isValue(this.$1_D.actions)){var $0=$('<ul></ul>');var $enum1=ss.IEnumerator.getEnumerator(this.$1_D.actions);while($enum1.moveNext()){var $1=$enum1.current;this.$1_35($0,$1.name,$1,ss.Delegate.create(this,this.$1_32));}this.get_element().find('.tab-ubertipActions').html('').append($0).removeClass('hide invisible');}else{var $2=$('<ul></ul>');var $3=tab.ModelUtils.getVisualModelFromVisualId(this.$1_D.visualId);var $4=false;var $5=true;var $enum2=ss.IEnumerator.getEnumerator(this.$1_D.actionPMs);while($enum2.moveNext()){var $7=$enum2.current;var $8=$3.get_vizDataModel();var $9=[this.$1_D.tupleId];var $A=tab.ApplicationModel.get_instance().get_dataDictionary();var $B=tab.VizDataUtils.constructUrlFromString($A,$7.mb,$8,$9,$3.get_worksheetName());this.$1_35($2,$B,$7,ss.Delegate.create(this,this.$1_33));var $C=tab.ActionUtils.getActionType($7);if($C==='filter'||$C==='url'){$4=true;}if($C==='url'){var $D=tab.ActionUtils.getUrlActionPm($7,$3,$9);if($D==null||String.isNullOrEmpty($B)){$5=false;}}}var $6=-1;if(ss.isValue($3.get_sceneModel())){$6=$3.get_sceneModel().get_paneDescriptorCount();}else{}if(($6>1&&$4)||!$5){this.get_element().find('.tab-ubertipActions').html('').append($2).removeClass('hide').addClass('invisible');}else{this.get_element().find('.tab-ubertipActions').html('').append($2).removeClass('hide invisible');}}},$1_35:function($p0,$p1,$p2,$p3){var $0=spiff.LabelButton.newAnchorButton();$0.set_label($p1);$0.get_element().addClass('tab-action');$0.set_context($p2);this.$1_30($0,$p3);this.$1_B.add($0);var $1=$('<li></li>');$1.append($0.get_element());$p0.append($1);}}
tab.IMenuItem=function(parameters){tab.IMenuItem.initializeBase(this);}
tab.OnClickOverride=function(){this.$2_2=tsConfig.is_mobile;tab.OnClickOverride.initializeBase(this);}
tab.OnClickOverride.prototype={$2_0:75,$2_1:null,postCreate:function(){this.inherited(arguments);if(this.$2_2){var $0=new tableau.util.NoClickDelay(this.domNode);}},$2_3:function(){this.getParent().focusChild(this);},$2_4:function($p0){if(ss.isValue(this.$2_1)){window.clearTimeout(this.$2_1);this.$2_1=null;}this.$2_1=window.setTimeout($p0,this.$2_0);},_onClick:function(evt){if(this.$2_2){if(!this._isReasonableEvent(evt)){return;}var $0=ss.Delegate.create(this,function(){
this.getParent().onItemClick(this,evt);dojo.stopEvent(evt);});this.$2_3();this.$2_4($0);}else{this.inherited(arguments);}},_onHover:function(evt){if(this.$2_2){this._onClick(evt);}else{this.inherited(arguments);}}}
tab.UIMenuItem=function(){tab.UIMenuItem.initializeBase(this);}
tab.UICheckedMenuItem=function(){tab.UICheckedMenuItem.initializeBase(this);}
tab.ViewingToolbar=function(app,isTop){this.disposables=new tab.DisposableHolder();this.app=app;this.isTop=isTop;this.subscriptions=[];}
tab.ViewingToolbar.isEditAllowed=function(){return tsConfig.allow_authoring&&!tsConfig.previewMode;}
tab.ViewingToolbar.isEditDisabled=function(){return !tab.ViewingToolbar.isEditAllowed()||tsConfig.isPublic||tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard();}
tab.ViewingToolbar.prototype={app:null,isTop:false,subscriptions:null,toolbarElement:null,leftElement:null,centerElement:null,rightElement:null,customViewsButton:null,editButton:null,viewMetricsDataButton:null,shareButtons:null,clearSelectionButton:null,undoButton:null,redoButton:null,exportButton:null,revertButton:null,autoUpdateButton:null,refreshButton:null,subscribeButton:null,downloadButton:null,guestBrandWatermark:null,customViewsViewModel:null,customViewsPanel:null,activeSheet:null,exportMenuView:null,exportMenuViewModel:null,exportImageEnabled:false,exportDataEnabled:false,exportCrosstabEnabled:false,exportPdfEnabled:false,subscribeViewModel:null,subscribeView:null,$0:null,get_element:function(){return this.toolbarElement;},get_$1:function(){return this.customViewsViewModel;},createItems:function(){this.toolbarElement=$('<div>').addClass('tab-fill').addClass('tab-toolbar');this.leftElement=$('<span>').addClass('tab-fill-left');this.centerElement=$('<span>').addClass('tab-inline-block');this.rightElement=$('<span>').addClass('tab-fill-right');this.toolbarElement.append(this.leftElement);this.toolbarElement.append(this.centerElement);this.toolbarElement.append(this.rightElement);if(tsConfig.showShareOptions){this.shareButtons=this.makeShareButtons();}if(tsConfig.allow_custom_views){this.customViewsButton=new tab.ToolbarTextButton(ss.Delegate.create(this,this.customViewsButtonClicked));this.customViewsButton.setLeftIcon('tab-width-10').setText(tab.Strings.CustomViewsOriginalView).setRightIcon('tab-icon-cv-toolbar-button');}if(tab.ViewingToolbar.isEditAllowed()){this.editButton=new tab.ToolbarTextButton(ss.Delegate.create(this,this.editButtonClicked));this.editButton.get_element().addClass('tab-toolbar-button-edit');this.editButton.setText(tab.Strings.ToolbarEdit);tab.ApplicationModel.get_instance().get_workbook().withDashboard(ss.Delegate.create(this,function(){
if(tsConfig.is_mobile_app||tab.ViewingToolbar.isEditDisabled()){this.editButton.get_element().css('display','none');this.editButton.setEnabled(false);}else{this.editButton.setEnabled(true);}}));}if(tsConfig.is_metrics_enabled){this.viewMetricsDataButton=new tab.ToolbarTextButton(ss.Delegate.create(this,this.viewMetricsDataButtonClicked));this.viewMetricsDataButton.setText(tab.Strings.ToolbarShowPerformanceRecording);}if(tsConfig.toolbarvis){this.exportButton=new tab.ToolbarIconButton(ss.Delegate.create(this,this.exportButtonClicked));this.exportButton.setIcon('tab-icon-export').setTooltip(tab.Strings.ToolbarExport);this.revertButton=new tab.ToolbarIconButton(ss.Delegate.create(this,this.revertButtonClicked));this.revertButton.setIcon('tab-icon-revert').setTooltip(tab.Strings.ToolbarRevertAll);this.autoUpdateButton=new tab.ToolbarIconButton(ss.Delegate.create(this,this.autoUpdateButtonClicked));this.autoUpdateButton.setIcon('tab-icon-autoupdate-on').setTooltip(tab.Strings.ToolbarPauseAutomaticUpdates);var $1=tab.ApplicationModel.get_instance().get_workbook();$1.withDashboard(ss.Delegate.create(this,function(){
if($1.get_isCurrentSheetStoryboard()){this.autoUpdateButton.setEnabled(false);}}));this.refreshButton=new tab.ToolbarIconButton(ss.Delegate.create(this,this.refreshButtonClicked));this.refreshButton.setIcon('tab-icon-refresh').setTooltip(tab.Strings.ToolbarRefreshData);}if(this.isDownloadAllowed()){this.downloadButton=new tab.ToolbarTextButton(ss.Delegate.create(this,this.downloadButtonClicked));this.downloadButton.setLeftIcon('tab-icon-download').setText(tab.Strings.ToolbarDownload);if(tsConfig.is_mobile_app){this.downloadButton.get_element().css('display','none');}}if(tsConfig.showShareOptions){var $enum1=ss.IEnumerator.getEnumerator(this.shareButtons);while($enum1.moveNext()){var $2=$enum1.current;this.leftElement.append($2.get_element());}}if(tsConfig.allow_custom_views){this.leftElement.append(this.customViewsButton.get_element());}if(ss.isValue(this.editButton)){this.leftElement.append(this.editButton.get_element());}if(tsConfig.is_metrics_enabled){this.leftElement.append(this.viewMetricsDataButton.get_element());}if(tsConfig.toolbarvis){if(!tsConfig.previewMode||tsConfig.isPublic){this.centerElement.append(this.exportButton.get_element());}this.centerElement.append(this.revertButton.get_element());this.centerElement.append(this.autoUpdateButton.get_element());this.centerElement.append(this.refreshButton.get_element());}if(tsConfig.gbrand){var $3=$('<img>');$3.attr('src',tsConfig.watermarklogo);$3.css('border','0');this.guestBrandWatermark=$('<a>');this.guestBrandWatermark.attr('href',tsConfig.serverGuestURI);this.guestBrandWatermark.attr('target','_blank');this.guestBrandWatermark.append($3);this.rightElement.append(this.guestBrandWatermark);}else{if(tsConfig.allow_subscriptions&&!tsConfig.is_guest){this.subscribeButton=new tab.ToolbarIconButton(ss.Delegate.create(this,this.subscribeButtonClicked));this.subscribeButton.setIcon('tab-toolbar-button-subscribe').setTooltip(tab.Strings.SubscribeButtonTooltip);this.subscribeViewModel=new tab.SubscribeViewModel(this.isTop);this.subscribeView=new tab.SubscribeView(this.subscribeViewModel,this.subscribeButton.get_element());this.rightElement.append(this.subscribeButton.get_element());if(!tsConfig.workbook_allow_subscriptions){this.subscribeButton.get_element().hide();}}if(this.isDownloadAllowed()){this.rightElement.append(this.downloadButton.get_element());}}if(tsConfig.allow_custom_views){this.customViewsViewModel=new tab.CustomViewsViewModel(new tab.CustomizedViewSession(this.app.get_session()),this.isTop);this.customViewsPanel=this.makeCustomViewsPanel(this.customViewsViewModel,this.customViewsButton.get_element());this.updateCustomViewsButton();}if(tsConfig.is_metrics_enabled){this.viewMetricsDataButton.setEnabled(true);}if(tsConfig.toolbarvis){this.revertButton.setEnabled(false);}var $0=tab.FeatureParamsLookup.getBool(tab.FeatureParam.newToolbar);if(ss.isValue($0)&&$0){this.clearSelectionButton=new tab.ToolbarTextButton(ss.Delegate.create(this,this.clearSelectionClicked));this.clearSelectionButton.setEnabled(true);this.clearSelectionButton.setText('Clear');this.leftElement.append(this.clearSelectionButton.get_element());this.undoButton=new tab.ToolbarTextButton(ss.Delegate.create(this,this.undoClicked));this.undoButton.setEnabled(true);this.undoButton.setText('Undo');this.rightElement.append(this.undoButton.get_element());this.redoButton=new tab.ToolbarTextButton(ss.Delegate.create(this,this.redoClicked));this.redoButton.setEnabled(true);this.redoButton.setText('Redo');this.rightElement.append(this.redoButton.get_element());}this.exportMenuViewModel=new spiff.MenuViewModel();this.exportMenuViewModel.add_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked);this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.exportMenuViewModel.remove_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked);})));this.exportImageEnabled=false;this.exportDataEnabled=false;this.exportCrosstabEnabled=false;this.exportPdfEnabled=false;this.createExportMenu();this.exportMenuView=this.makeMenuView(this.exportMenuViewModel);},bindEvents:function(){if(tsConfig.showShareOptions){var $enum1=ss.IEnumerator.getEnumerator(this.shareButtons);while($enum1.moveNext()){var $1=$enum1.current;$1.bindEvents();}}if(tsConfig.allow_custom_views){this.customViewsButton.bindEvents();}if(tab.ViewingToolbar.isEditAllowed()){this.editButton.bindEvents();}if(tsConfig.is_metrics_enabled){this.viewMetricsDataButton.bindEvents();}if(tsConfig.toolbarvis){this.exportButton.bindEvents();this.revertButton.bindEvents();this.autoUpdateButton.bindEvents();this.refreshButton.bindEvents();}if(this.isDownloadAllowed()){this.downloadButton.bindEvents();}if(ss.isValue(this.subscribeButton)){this.subscribeButton.bindEvents();}if(tsConfig.allow_custom_views){this.customViewsViewModel.add_dirtyChanged(ss.Delegate.create(this,this.handleCustomViewsChange));this.customViewsViewModel.add_customViewListChanged(ss.Delegate.create(this,this.handleCustomViewsChange));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.customViewsViewModel.remove_dirtyChanged(ss.Delegate.create(this,this.handleCustomViewsChange));this.customViewsViewModel.remove_customViewListChanged(ss.Delegate.create(this,this.handleCustomViewsChange));})));}if(tsConfig.allow_authoring){this.subscriptions.add(dojo.subscribe('activeViewChanged',ss.Delegate.create(this,this.onActiveViewChanged)));}var $0=tab.FeatureParamsLookup.getBool(tab.FeatureParam.newToolbar);if(ss.isValue($0)&&$0){this.clearSelectionButton.bindEvents();this.redoButton.bindEvents();this.undoButton.bindEvents();}this.subscriptions.add(dojo.subscribe('modifiedSheetsChanged',ss.Delegate.create(this,this.onModifiedSheetsChanged)));},updateActiveView:function(view){if(ss.isValue(view)){if(ss.isValue(this.$0)){dojo.unsubscribe(this.$0);}this.$0=view.registerEventListener('selectionChanged',ss.Delegate.create(this,this.updateViewMenuState));}else if(tsConfig.toolbarvis){this.updateMenus(this.app.getLegacyMenus());}},updateMenus:function(menus){if(ss.isValue(menus)){var $enum1=ss.IEnumerator.getEnumerator(menus);while($enum1.moveNext()){var $0=$enum1.current;var $1=$0.ajq;var $2=$0.ajs;if(ss.isValue($1)&&ss.isValue($2)){var $enum2=ss.IEnumerator.getEnumerator($2);while($enum2.moveNext()){var $3=$enum2.current;switch($1){case 'export':this.exportButton.setEnabled($3!=='grayed');break;case 'exportimage':this.exportImageEnabled=$3!=='grayed';break;case 'exportdata':this.exportDataEnabled=$3!=='grayed';break;case 'exportcrosstab':this.exportCrosstabEnabled=$3!=='grayed';break;case 'print':this.exportPdfEnabled=$3!=='grayed';break;case 'refreshdata':this.refreshButton.setEnabled($3!=='grayed');break;}}}}this.createExportMenu();}},setStyle:function(name,value){this.toolbarElement.css(name,value);},setStyles:function(styles){this.toolbarElement.css(styles);},setAutoUpdate:function(autoUpdate){this.setAutoUpdateStatusText(autoUpdate);},hideRefreshButtons:function(){this.autoUpdateButton.get_element().css('display','none');this.refreshButton.get_element().css('display','none');},showSubscribeButton:function(){if(ss.isNullOrUndefined(this.subscribeButton)){return;}this.subscribeButton.get_element().css('display','');},layout:function(){var $0=this.get_element().width();if(tsConfig.allow_custom_views){this.customViewsButton.removeTextWidth();var $2=$0-(this.leftElement.width()+10+this.centerElement.width()+10+this.rightElement.width());if($0>0&&$2<0){this.customViewsButton.set_textWidth(Math.max(this.customViewsButton.get_textWidth()+$2,30));}}var $1=($0-this.centerElement.width())/2;if($0>0&&$1<this.leftElement.width()){$1=this.leftElement.width()+10;this.centerElement.css({position:'absolute',left:$1+'px'});}else{this.centerElement.css('position','static');}},dispose:function(){this.disposables.dispose();var $enum1=ss.IEnumerator.getEnumerator(this.subscriptions);while($enum1.moveNext()){var $1=$enum1.current;dojo.unsubscribe($1);}if(ss.isValue(this.customViewsButton)){this.customViewsButton.dispose();this.customViewsButton=null;}if(ss.isValue(this.editButton)){this.editButton.dispose();this.editButton=null;}if(ss.isValue(this.viewMetricsDataButton)){this.viewMetricsDataButton.dispose();this.viewMetricsDataButton=null;}if(ss.isValue(this.exportButton)){this.exportButton.dispose();this.exportButton=null;}if(ss.isValue(this.revertButton)){this.revertButton.dispose();this.revertButton=null;}if(ss.isValue(this.autoUpdateButton)){this.autoUpdateButton.dispose();this.autoUpdateButton=null;}if(ss.isValue(this.refreshButton)){this.refreshButton.dispose();this.refreshButton=null;}if(ss.isValue(this.subscribeButton)){this.subscribeButton.dispose();this.subscribeButton=null;}if(ss.isValue(this.downloadButton)){this.downloadButton.dispose();this.downloadButton=null;}if(ss.isValue(this.subscribeViewModel)){this.subscribeViewModel.dispose();this.subscribeViewModel=null;}if(ss.isValue(this.subscribeView)){this.subscribeView.dispose();this.subscribeView=null;}if(ss.isValue(this.$0)){dojo.unsubscribe(this.$0);}var $0=tab.FeatureParamsLookup.getBool(tab.FeatureParam.newToolbar);if(ss.isValue($0)&&$0){if(ss.isValue(this.clearSelectionButton)){this.clearSelectionButton.dispose();this.clearSelectionButton=null;}if(ss.isValue(this.redoButton)){this.redoButton.dispose();this.redoButton=null;}if(ss.isValue(this.undoButton)){this.undoButton.dispose();this.undoButton=null;}}if(ss.isValue(this.get_element())){this.get_element().remove();}if(ss.isValue(this.customViewsPanel)){this.customViewsPanel.dispose();this.customViewsViewModel.dispose();this.customViewsPanel=null;this.customViewsViewModel=null;}if(ss.isValue(this.exportMenuView)){this.exportMenuView.dispose();this.exportMenuViewModel.dispose();this.exportMenuView=null;this.exportMenuViewModel=null;}this.app=null;if(ss.isValue(this.toolbarElement)){this.toolbarElement.remove();}this.toolbarElement=null;this.leftElement=null;this.centerElement=null;this.rightElement=null;this.customViewsButton=null;this.viewMetricsDataButton=null;this.shareButtons=null;this.guestBrandWatermark=null;this.activeSheet=null;},updateViewMenuState:function(selectionInfoObject){if(ss.isValue(selectionInfoObject)){var $0=selectionInfoObject;var $1=$0['menus'];if(ss.isValue($1)&&$1.length>0){if(('legacyMenuName' in $1[0])&&tsConfig.toolbarvis){this.updateMenus($1);}else{}}}},toggleMenu:function(menuButtomElement,menu){if(menu.get_visible()){menu.hide();}else{menu.show(spiff.ShowMenuOptions.create(menuButtomElement,!this.isTop));}},shareButtonClicked:function(){this.app.showShareDialog();this.app.saveSharedView('link');},facebookButtonClicked:function(){this.app.saveSharedView('facebook');},twitterButtonClicked:function(){this.app.saveSharedView('twitter');},mailButtonClicked:function(){this.app.saveSharedView('mail');},linkButtonClicked:function(){this.app.showShareDialog();this.app.saveSharedView('link');},clearSelectionClicked:function(){tab.SelectionClientCommands.clearAllSelectionsIncludingMaster();},undoClicked:function(){tab.WorksheetServerCommands.undo();},redoClicked:function(){tab.WorksheetServerCommands.redo();},customViewsButtonClicked:function(){this.customViewsViewModel.show();},handleCustomViewsChange:function(sender,e){this.updateCustomViewsButton();},updateCustomViewsButton:function(){if(this.customViewsViewModel.get_myCustomViews().length>0||this.customViewsViewModel.get_otherCustomViews().length>0){var $0=this.customViewsViewModel.get_currentCustomView();if(ss.isValue($0)){this.showCustomViewsButton($0.name);}else{if(ss.isValue(tsConfig.current_custom_view_id)){this.showCustomViewsButton(tab.Strings.CustomViewsUnlistedCustomView);}else{this.showCustomViewsButton(tab.Strings.CustomViewsOriginalView);}}}else{if(tsConfig.allow_custom_view_save){this.showCustomViewsButton(tab.Strings.CustomViewsRememberMyChanges);}else{this.customViewsButton.get_element().css('display','none');}}},showCustomViewsButton:function(text){this.customViewsButton.setText(text);this.customViewsButton.get_element().css('display','');if(this.customViewsViewModel.get_dirty()){this.customViewsButton.setLeftIcon('tab-icon-cv-toolbar-button-dirty');}else{this.customViewsButton.setLeftIcon('tab-width-10');}},editButtonClicked:function(){this.app.get_toolbarCommands().$3(this.activeSheet);},viewMetricsDataButtonClicked:function(){this.app.get_toolbarCommands().$D();},onActiveViewChanged:function(dataObject){var $0=dataObject;this.activeSheet=(ss.isValue($0)&&ss.isValue($0.newActive))?$0.newActive.get_sheetid():null;},createExportMenu:function(){this.exportMenuViewModel.set_menu(new spiff.Menu([spiff.MenuItem.newActionItem(tab.Strings.ToolbarExportImage,(this.exportImageEnabled)?ss.Delegate.create(this,this.exportImage):null),spiff.MenuItem.newActionItem(tab.Strings.ToolbarExportData,(this.exportDataEnabled)?ss.Delegate.create(this,this.exportData):null),spiff.MenuItem.newActionItem(tab.Strings.ToolbarExportCrosstab,(this.exportCrosstabEnabled)?ss.Delegate.create(this,this.exportCrosstab):null),spiff.MenuItem.newActionItem(tab.Strings.ToolbarPrintToPdf,(this.exportPdfEnabled)?ss.Delegate.create(this,this.exportPdf):null)]));},exportButtonClicked:function(){this.toggleMenu(this.exportButton.get_element(),this.exportMenuViewModel);},exportImage:function(){this.app.get_toolbarCommands().exportImage();},exportData:function(){this.app.get_toolbarCommands().exportData();},exportCrosstab:function(){this.app.get_toolbarCommands().exportCrosstab();},exportPdf:function(){this.app.get_toolbarCommands().exportPdf();},revertButtonClicked:function(){this.app.get_toolbarCommands().$4();},onModifiedSheetsChanged:function(eventData){var $0=eventData;if(ss.isValue(this.revertButton)){this.revertButton.setEnabled($0.length>0);}},autoUpdateButtonClicked:function(){this.app.get_toolbarCommands().$8();},setAutoUpdateStatusText:function(status){if(tsConfig.allow_filter&&!tsConfig.isPublic){if(status){this.autoUpdateButton.setIcon('tab-icon-autoupdate-on').setTooltip(tab.Strings.ToolbarPauseAutomaticUpdates);}else{this.autoUpdateButton.setIcon('tab-icon-autoupdate-off').setTooltip(tab.Strings.ToolbarResumeAutomaticUpdates);}}},refreshButtonClicked:function(){this.app.get_toolbarCommands().$C();},subscribeButtonClicked:function(){this.subscribeViewModel.show();},isDownloadAllowed:function(){return (!tsConfig.previewMode&&!String.isNullOrEmpty(tsConfig.downloadURI))||tsConfig.is_metrics_view;},downloadButtonClicked:function(){this.app.get_toolbarCommands().$A();}}
tab.WidgetStyle=function(){}
tab.WidgetStyle.applyFormatting=function(domNode,textStyleModel,backgroundColor,lineHeight){tab.WidgetStyle.$0(domNode.id,textStyleModel,backgroundColor,lineHeight,tab.WidgetStyle.$1);}
tab.WidgetStyle.applyFormattingByClassName=function(className,style){tab.WidgetStyle.$0(className,style.get_textStyleModel(),style.get_backgroundColor(),style.get_lineHeight(),tab.WidgetStyle.$2);}
tab.WidgetStyle.$0=function($p0,$p1,$p2,$p3,$p4){var $0=tab.FormattingConverters.$4($p1);if(ss.isValue($p3)){$0['line-height']=$p3+'px';}if(!Object.keyExists($0,'font-style')){$0['font-style']='normal';}if(!Object.keyExists($0,'font-weight')){$0['font-weight']='normal';}if(!Object.keyExists($0,'text-decoration')){$0['text-decoration']='none';}tab.StyleUtil.appendCSSRule($p4($p0,'tab-ctrl-formatted-text'),$0);delete $0['font-size'];delete $0['line-height'];tab.StyleUtil.appendCSSRule($p4($p0,'tab-ctrl-formatted-fixedsize'),$0);if(ss.isValue($p1.agb)){var $2={color:$p1.agb};tab.StyleUtil.appendCSSRule($p4($p0,'tab-ctrl-formatted-coloronly'),$2);}var $1={};if(ss.isValue($p1.agb)){$1['border-color']=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode($p1.agb),(200/255));tab.StyleUtil.appendCSSRule($p4($p0,'tab-ctrl-formatted-darker-border-hover:hover'),$1);$1['border-color']=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode($p1.agb),(105/255));tab.StyleUtil.appendCSSRule($p4($p0,'tab-ctrl-formatted-border'),$1);tab.StyleUtil.appendCSSRule($p4($p0,'tab-ctrl-formatted-border-hover:hover'),$1);}if(ss.isValue($p2)){var $3=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode($p2),(140/255));var $4=tab.ColorModel.alphaCompositeSolidDest($3,new tab.ColorModel(255,255,255,1));$1['background-color']=$4.toRgb();}tab.StyleUtil.appendCSSRule($p4($p0,'tab-ctrl-formatted-widget'),$1);delete $1['border-color'];tab.StyleUtil.appendCSSRule($p4($p0,'tab-ctrl-formatted-widget:hover'),$1);}
tab.WidgetStyle.$1=function($p0,$p1){return '[id="'+$p0+'"].'+$p1+','+'[id="'+$p0+'"] .'+$p1;}
tab.WidgetStyle.$2=function($p0,$p1){return '.'+$p0+'.'+$p1+','+'.'+$p0+' .'+$p1;}
tab.FormattingStyleInfo=function(textStyleModel,backgroundColor,lineHeight){this.$0=textStyleModel;this.$1=backgroundColor;this.$2=lineHeight;}
tab.FormattingStyleInfo.prototype={$0:null,$1:null,$2:null,get_textStyleModel:function(){return this.$0;},get_backgroundColor:function(){return this.$1;},get_lineHeight:function(){return this.$2;}}
tab.DisabledTooltipBehavior=function(){}
tab.DisabledTooltipBehavior.prototype={attach:function(){},detach:function(){},dispose:function(){},shownTooltipIsStatic:function(){return true;},isHoverAllowed:function(pageCoords){return true;},shouldShowCommandButtons:function(){return true;},handleUbertipMenuToggle:function(areMenuItemsVisible){},handleUbertipMenuClose:function(){},hoverOverObject:function(pageCoords,isSelected,isEmpty,isSameObject){},hoverOverWhitespace:function(pageCoords){},multiSelectComplete:function(pageAnchorPoint){},singleSelectComplete:function(pageCoords){},onPanningOrDragging:function(){},onScroll:function(){},mouseDown:function(pageCoords,objectUnderMouse){}}
tab.TooltipBaseMode=function(defaultBehavior,contextProvider,visualId){this.disposables=new tab.DisposableHolder();this.$4=contextProvider;this.visualId=visualId;this.$1=new tab.Tooltip();this.$1.add_closed(ss.Delegate.create(this,this.$14));this.get_tooltip().add_prePosition(ss.Delegate.create(this,this.$12));this.get_tooltip().add_showed(ss.Delegate.create(this,this.$12));this.$1.get_body().bind('mouseleave.basemode',ss.Delegate.create(this,this.$1B));this.$2=new tab.Ubertip(this.$1,this.get_ubertipShouldEnforceButtonOrdering());this.$2.add_actionExecuted(ss.Delegate.create(this,this.$15));this.$2.add_commandExecuted(ss.Delegate.create(this,this.$16));this.$2.add_ubertipMenuToggled(ss.Delegate.create(this,this.$17));this.$2.add_ubertipMenuClosed(ss.Delegate.create(this,this.$18));this.$3=defaultBehavior;this.$5=defaultBehavior;this.tooltipBehaviors={};this.buildBehaviorsDictionary();var $0=tab.ActionUtils.getApplicableActions(this.visualId.st,'on-hover');var $1=tab.ActionUtils.getApplicableActions(this.visualId.st,'explicitly');this.$9=$0.length+$1.length;if(tsConfig.is_mobile){tab.VizEvent.add_mobileVizReduceTransform(ss.Delegate.create(this,this.$19));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
tab.VizEvent.remove_mobileVizReduceTransform(ss.Delegate.create(this,this.$19));})));}}
tab.TooltipBaseMode.prototype={$1:null,$2:null,$3:null,tooltipBehaviors:null,$4:null,$5:null,visualId:null,readyForHover:true,$9:0,add_tooltipClosed:function(value){this.$A=ss.Delegate.combine(this.$A,value);},remove_tooltipClosed:function(value){this.$A=ss.Delegate.remove(this.$A,value);},$A:null,add_mouseExitedTooltip:function(value){this.$B=ss.Delegate.combine(this.$B,value);},remove_mouseExitedTooltip:function(value){this.$B=ss.Delegate.remove(this.$B,value);},$B:null,add_ubertipUpdated:function(value){this.$C=ss.Delegate.combine(this.$C,value);},remove_ubertipUpdated:function(value){this.$C=ss.Delegate.remove(this.$C,value);},$C:null,add_ubertipActionExecuted:function(value){this.$D=ss.Delegate.combine(this.$D,value);},remove_ubertipActionExecuted:function(value){this.$D=ss.Delegate.remove(this.$D,value);},$D:null,add_ubertipCommandExecuted:function(value){this.$E=ss.Delegate.combine(this.$E,value);},remove_ubertipCommandExecuted:function(value){this.$E=ss.Delegate.remove(this.$E,value);},$E:null,get_isTooltipShown:function(){return this.$1.get_isShown();},get_tooltip:function(){return this.$1;},get_ubertip:function(){return this.$2;},get_currentBehavior:function(){return this.$13(this.get_currentBehaviorType());},get_currentBehaviorType:function(){return this.$5;},get_defaultBehaviorType:function(){return this.$3;},get_ubertipShouldEnforceButtonOrdering:function(){return false;},get_multiSelectCompleteBehavior:function(){return 'sticky';},get_hasContextProvider:function(){return ss.isValue(this.$4);},get_$F:function(){return ss.Delegate.create(this,function(){
this.$10();});},get_testUseOnlyLastHoveredObjectID:function(){return tab.TooltipBaseMode.lastHoveredObjectId;},set_testUseOnlyLastHoveredObjectID:function(value){tab.TooltipBaseMode.lastHoveredObjectId=value;return value;},hoverOverObject:function(pageCoords,regionCoords,hoveredObjectId,isObjectSelected,paneDescriptorKey,targetType,regionPart){if(!this.readyForHover){return;}if(ss.isNullOrUndefined(hoveredObjectId)){return;}var $0=this.getHoverBehavior(targetType);this.switchTooltipMode($0);var $1=(hoveredObjectId===tab.TooltipBaseMode.lastHoveredObjectId);var $2=ss.Delegate.create(this,function(){
var $1_0=regionPart==='viz'&&this.isVizTooltipCurrentlyEmpty();this.get_currentBehavior().hoverOverObject(pageCoords,isObjectSelected,$1_0,$1);});if(targetType==='mark'&&tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&ss.isValue(paneDescriptorKey)&&!this.shouldForceRemoteTooltipForObject(targetType,hoveredObjectId)){if($1){$2();}else{var $3=this.getAffectedObjects('mark',hoveredObjectId);this.runBehaviorWithLocalUbertip($2,hoveredObjectId,$3,regionCoords,paneDescriptorKey,regionPart,targetType,'on-hover');}}else{this.runBehaviorWithRemoteUbertip($2,tab.$create_RectXY(regionCoords.x,regionCoords.y,0,0),regionPart);}},hoverOverWhitespace:function(pageCoords,regionPart){if(!this.readyForHover){return;}var $0=(tab.TooltipBaseMode.whitespaceObjectId===tab.TooltipBaseMode.lastHoveredObjectId);this.get_currentBehavior().hoverOverWhitespace(pageCoords);tab.TooltipBaseMode.lastHoveredObjectId=tab.TooltipBaseMode.whitespaceObjectId;if(this.get_currentBehavior().isHoverAllowed(pageCoords)){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()||(!$0&&this.needRemoteCommand(regionPart,'whitespace','on-hover',tab.VizDataUtils.invalidTupleId))){this.runBehaviorWithRemoteUbertip(null,tab.$create_RectXY(-1,-1,0,0),regionPart);}}else if(this.$1.get_isShown()){this.$1.close();}},hoverOverCoordinates:function(pageCoords,regionCoords,targetType,regionPart){if(!this.readyForHover){return;}tab.TooltipBaseMode.lastHoveredObjectId=tab.TooltipBaseMode.unknownObjectId;var $0=this.getHoverBehavior(targetType);this.switchTooltipMode($0);var $1=ss.Delegate.create(this,function(){
var $1_0=regionPart==='viz'&&this.isVizTooltipCurrentlyEmpty();this.get_currentBehavior().hoverOverObject(pageCoords,false,$1_0,false);});this.runBehaviorWithRemoteUbertip($1,tab.$create_RectXY(regionCoords.x,regionCoords.y,0,0),regionPart);},singleSelectComplete:function(pageCoords,regionCoords,selectedObjectId,paneDescriptorKey,targetType,regionPart){var $0=this.getSingleSelectBehavior(targetType);this.switchTooltipMode($0);this.suppressHoverIfNecesary();var $1=this.getSingleSelectBehaviorCallback(pageCoords);if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&targetType==='mark'){var $2=this.getAffectedObjects(targetType,selectedObjectId);this.runBehaviorWithLocalUbertip($1,selectedObjectId,$2,regionCoords,paneDescriptorKey,regionPart,targetType,'on-select');}else{var $3=tab.$create_RectXY(regionCoords.x,regionCoords.y,0,0);this.runBehaviorWithRemoteUbertip($1,$3,regionPart);}},singleSelectCoordinates:function(pageCoords,regionCoords,regionPart,targetType){var $0=this.getSingleSelectBehavior(targetType);this.switchTooltipMode($0);var $1=ss.Delegate.create(this,function(){
this.get_currentBehavior().singleSelectComplete(pageCoords);if(this.get_tooltip().get_isShown()){this.triggerUbertipButtonUpdate();}});this.runBehaviorWithRemoteUbertip($1,tab.$create_RectXY(regionCoords.x,regionCoords.y,0,0),regionPart);},multiSelectComplete:function(pageAnchorPoint,regionSelectionRect,regionPart){this.switchTooltipMode(this.get_multiSelectCompleteBehavior());this.suppressHoverIfNecesary();var $0=ss.Delegate.create(this,function(){
this.get_currentBehavior().multiSelectComplete(pageAnchorPoint);tab.TooltipBaseMode.lastHoveredObjectId=tab.TooltipBaseMode.unknownObjectId;if(this.get_tooltip().get_isShown()){this.triggerUbertipButtonUpdate();}});this.runBehaviorWithRemoteUbertip($0,regionSelectionRect,regionPart);},onTap:function(){},onScroll:function(){this.get_currentBehavior().onScroll();},onMoving:function(){},onDragEnd:function(regionDimension){},onPanOrDragStart:function(regionDimension){this.get_currentBehavior().onPanningOrDragging();},onPinchEnd:function(regionDimension){},onPress:function(){},dispose:function(){if(Object.keyExists(this.tooltipBehaviors,this.get_currentBehaviorType())){this.tooltipBehaviors[this.get_currentBehaviorType()].detach();}this.disposables.dispose();this.get_tooltip().get_body().unbind('mouseleave.basemode');this.get_tooltip().dispose();this.get_tooltip().remove_closed(ss.Delegate.create(this,this.$14));this.get_tooltip().remove_prePosition(ss.Delegate.create(this,this.$12));this.get_tooltip().remove_showed(ss.Delegate.create(this,this.$12));this.get_ubertip().remove_commandExecuted(ss.Delegate.create(this,this.$16));this.get_ubertip().remove_actionExecuted(ss.Delegate.create(this,this.$15));this.$2.remove_ubertipMenuToggled(ss.Delegate.create(this,this.$17));this.$2.remove_ubertipMenuClosed(ss.Delegate.create(this,this.$18));this.get_ubertip().dispose();},shownTooltipIsStatic:function(){return this.get_currentBehavior().shownTooltipIsStatic();},isHoverAllowed:function(pageCoords){return this.get_currentBehavior().isHoverAllowed(pageCoords);},clearTooltipWithFakeHover:function(){this.hoverOverWhitespace(tab.$create_Point(-1,-1),'viz');},getSingleSelectBehavior:function(targetType){return this.$3;},getHoverBehavior:function(targetType){return this.$3;},shouldForceRemoteTooltipForObject:function(targetType,interactedObject){return false;},suppressHoverIfNecesary:function(){this.readyForHover=false;},onBehaviorSwitch:function(){},modelUpdateCallback:function(ubertipModel){tab.TooltipBaseMode.$8=ubertipModel.tupleId;this.$1.setTooltipBodyAndReposition(this.get_ubertip().get_element(),ss.Delegate.create(this,function(){
var $1_0=ss.isValue(ubertipModel)&&ss.isValue(ubertipModel.selectionHtml);if(!$1_0&&ubertipModel.tupleId!==tab.TooltipBaseMode.$8){return;}var $1_1=this.$2.get_model();this.updateTooltipFromModel(ubertipModel);this.updateUbertipFromModel(ubertipModel);if(ss.isValue(this.$C)){this.$C(ubertipModel);}if(ss.isValue($1_1)&&$1_1.rid===ubertipModel.rid){this.get_ubertip().updatePartiallyFromRemote($1_1);}}));},updateModelFromServerResponse:function(ubertipModel){this.get_ubertip().updatePartiallyFromRemote(ubertipModel);},updateUbertipFromModel:function(ubertipModel){ubertipModel.tooltipOffset=(ss.isValue(this.$2.get_model()))?this.$2.get_model().tooltipOffset:null;if(!_.isEqual(ubertipModel,this.$2.get_model())){this.$2.set_model(ubertipModel);}},updateTooltipFromModel:function(ubertipModel){this.get_tooltip().tupleId=ubertipModel.tupleId;if(ss.isValue(ubertipModel.interactedTupleId)){this.get_tooltip().interactedTupleId=ubertipModel.interactedTupleId;}else{}if(ss.isValue(ubertipModel.tooltipOffset)){if(ss.isValue(ubertipModel.tooltipOffset.x)){this.get_tooltip().set_horizontalOffset(16+ubertipModel.tooltipOffset.x);}if(ss.isValue(ubertipModel.tooltipOffset.y)){this.get_tooltip().set_verticalOffset(16+ubertipModel.tooltipOffset.y);}}else{this.get_tooltip().set_horizontalOffset(16);this.get_tooltip().set_verticalOffset(16);}},switchTooltipMode:function(tooltipBehaviorType){if(this.get_currentBehaviorType()===tooltipBehaviorType){return false;}var $0=this.get_currentBehavior();$0.detach();var $1=this.$13(tooltipBehaviorType);$1.attach();this.$5=tooltipBehaviorType;this.onBehaviorSwitch();return true;},prepareForPositioning:function(){if(this.shouldShowCommandButtons()&&this.get_ubertip().hasActionsOrSummaryOrCommands()){if(!this.$1.get_isShown()){this.$2.get_element().css('width','');}}else{this.$2.hideMenuActionsAndCommandButtons(false);this.$2.prepareWidthForPositioning();}},triggerUbertipButtonUpdate:function(){if(this.shouldShowCommandButtons()&&this.get_ubertip().hasActionsOrSummaryOrCommands()&&this.$2.get_isShowingActionAndCommandButtons()){return;}this.$1.forceLayout();},handleUbertipButtons:function(sender,args){if(this.shouldShowCommandButtons()&&this.get_ubertip().hasActionsOrSummaryOrCommands()){this.$2.showMenuActionsAndCommandButtons(args);}else{this.$2.hideMenuActionsAndCommandButtons(true);}},shouldShowCommandButtons:function(){return this.get_currentBehavior().shouldShowCommandButtons();},isVizTooltipCurrentlyEmpty:function(){return ss.isValue(this.get_ubertip().get_model())&&tab.MiscUtil.isNullOrEmpty(this.get_ubertip().get_model().tooltipHtml);},getAffectedObjects:function(targetType,interactedObject){var $0=null;if(this.get_hasContextProvider()){if(this.$4.getSelectedObjects(targetType).contains(interactedObject)){$0=this.$4.getSelectedObjects(targetType);}else{$0=[interactedObject];}}return $0;},isCurrentObjectSelected:function(){if(ss.isNullOrUndefined(this.$2.get_model())){return false;}var $0=(this.get_hasContextProvider())?this.$4.isMarkSelected(this.$2.get_model().interactedTupleId):this.$2.get_model().tupleSelected;var $1=this.$2.get_model().refLineSelected||this.$2.get_model().trendLineSelected;var $2=(this.$2.get_model().imageRegion==='bottomaxis')||(this.$2.get_model().imageRegion==='leftaxis')||(this.$2.get_model().imageRegion==='rightaxis')||(this.$2.get_model().imageRegion==='topaxis');var $3=(this.$2.get_model().imageRegion==='xheader')||(this.$2.get_model().imageRegion==='yheader');return $0||$1||$2||$3;},runBehaviorWithLocalUbertip:function(tooltipUiBehavior,interactedObjectId,affectedObjectIds,regionCoords,paneDescriptorKey,regionPart,targetType,activationMethod){tab.TooltipBaseMode.$6+=1;tab.TooltipBaseMode.$7=this.visualId;var $0=tab.TooltipBaseMode.$6;var $1=ss.Delegate.create(this,function($p1_0){
if(!this.$1A($0.toString())){if(this.visualId!==tab.TooltipBaseMode.$7){this.readyForHover=true;}return;}if(ss.isValue($p1_0)){$p1_0.rid=$0;this.modelUpdateCallback($p1_0);tab.TooltipBaseMode.lastHoveredObjectId=interactedObjectId;if(regionPart==='viz'&&$p1_0.isExplicitlyEmpty){this.$11();return;}if(ss.isValue(tooltipUiBehavior)){tooltipUiBehavior();}}});var $2=new tab.LocalUbertipInfo([interactedObjectId],affectedObjectIds,paneDescriptorKey,false);if(this.needRemoteCommand(regionPart,targetType,activationMethod,interactedObjectId)){var $3=ss.Delegate.create(this,function($p1_0){
if(!this.$1A($0.toString())||!ss.isValue($p1_0)){return;}$p1_0.rid=$0;this.updateModelFromServerResponse($p1_0);});tab.UberTipClientCommands.localAndRemoteUberTipCommand(regionPart,this.visualId,tab.$create_RectXY(regionCoords.x,regionCoords.y,0,0),interactedObjectId,activationMethod,$2,$1,$3,this.get_$F());}else{tab.UberTipClientCommands.localOnlyUbertipCommand(this.visualId,$2,$1,activationMethod);}},runBehaviorWithRemoteUbertip:function(tooltipUiBehavior,regionSelectionRect,regionPart,interactedObjectId){tab.TooltipBaseMode.$6+=1;tab.TooltipBaseMode.$7=this.visualId;var $0=tab.TooltipBaseMode.$6;var $1=ss.Delegate.create(this,function($p1_0){
if(!this.$1A($0.toString())){if(this.visualId!==tab.TooltipBaseMode.$7){this.readyForHover=true;}return;}if(ss.isValue($p1_0)){$p1_0.rid=$0;this.modelUpdateCallback($p1_0);if(regionPart==='viz'&&$p1_0.isExplicitlyEmpty){this.$11();return;}if(ss.isValue(tooltipUiBehavior)){tooltipUiBehavior();}}else{this.$11();tab.TooltipBaseMode.lastHoveredObjectId=tab.TooltipBaseMode.whitespaceObjectId;}});tab.UberTipClientCommands.remoteOnlyUbertipCommand(regionPart,this.visualId,regionSelectionRect,$1,this.get_$F(),interactedObjectId);},needRemoteCommand:function(regionPart,targetType,activationMethod,interactedObjectId){if(tsConfig.is_authoring||!tab.ApplicationModel.get_instance().get_isLocalRenderMode()||regionPart!=='viz'||(targetType!=='mark'&&targetType!=='whitespace')||activationMethod!=='on-hover'||this.$9>0){return true;}var $0=ss.isValue(this.$4);var $1=$0&&this.$4.isMarkSelected(interactedObjectId);return !$0||$1;},$10:function(){this.get_ubertip().handleRemoteFailure();this.readyForHover=true;},$11:function(){this.$1.close();this.readyForHover=true;},$12:function($p0,$p1){if(this.get_isTooltipShown()){this.readyForHover=true;}},$13:function($p0){return this.tooltipBehaviors[$p0];},$14:function(){this.readyForHover=true;if(ss.isValue(this.$A)){this.$A();}},$15:function($p0,$p1){this.get_tooltip().close();if(ss.isValue(this.$D)){this.$D($p0,$p1);}},$16:function($p0,$p1){this.get_tooltip().close();if(ss.isValue(this.$E)){this.$E($p0,$p1);}},$17:function($p0){this.get_currentBehavior().handleUbertipMenuToggle($p0);},$18:function(){this.get_currentBehavior().handleUbertipMenuClose();},$19:function(){this.$1.close();},$1A:function($p0){if(ss.isValue($p0)&&tab.TooltipBaseMode.$6.toString()!==$p0){return false;}return true;},$1B:function($p0){if(!this.get_tooltip().get_isShown()||!ss.isValue(this.$B)){return;}var $0=tab.DomUtil.getDojoCoordsJQ(this.get_tooltip().get_body());if($0.x>$p0.pageX||($0.x+$0.w)<=$p0.pageX||$0.y>$p0.pageY||($0.y+$0.h)<=$p0.pageY){this.$B(tab.$create_Point($p0.pageX,$p0.pageY));}}}
tab.TooltipContextProvider=function(selectionsModel){this.$0=selectionsModel;}
tab.TooltipContextProvider.prototype={$0:null,getSelectedObjects:function(targetType){if(targetType==='mark'){return this.$0.get_tupleSelection().get_ids();}else{return null;}},isMarkSelected:function(objectId){return this.$0.get_tupleSelection().isMarkSelected(objectId);}}
tab.TooltipDisabledMode=function(contextProvider,visualId){tab.TooltipDisabledMode.initializeBase(this,['disabled',contextProvider,visualId]);}
tab.TooltipDisabledMode.prototype={get_multiSelectCompleteBehavior:function(){return 'disabled';},getSingleSelectBehaviorCallback:function(pageCoords){return function(){
};},buildBehaviorsDictionary:function(){var $0=new tab.DisabledTooltipBehavior();this.tooltipBehaviors['disabled']=$0;},suppressHoverIfNecesary:function(){}}
tab.TooltipBaseLegacyMode=function(contextProvider,visualId){tab.TooltipBaseLegacyMode.initializeBase(this,['sticky',contextProvider,visualId]);var $0=this.get_currentBehavior();$0.attach();}
tab.TooltipBaseLegacyMode.prototype={onTap:function(){this.get_tooltip().close();},onPress:function(){this.get_tooltip().close();},getSingleSelectBehaviorCallback:function(pageCoords){return ss.Delegate.create(this,function(){
this.get_currentBehavior().singleSelectComplete(pageCoords);});},shouldForceRemoteTooltipForObject:function(targetType,interactedObject){var $0=this.getAffectedObjects(targetType,interactedObject);return targetType==='mark'&&ss.isValue($0)&&$0.length>1;}}
tab.TooltipResponsiveMode=function(contextProvider,visualId){tab.TooltipResponsiveMode.initializeBase(this,['smooth',contextProvider,visualId]);var $0=this.get_currentBehavior();$0.attach();$0.add_onMouseStop(ss.Delegate.create(this,this.$20));this.$1C=tab.TooltipResponsiveMode.$24();this.$22();this.get_tooltip().add_prePosition(ss.Delegate.create(this,this.prepareForPositioning));this.get_tooltip().add_positioned(ss.Delegate.create(this,this.handleUbertipButtons));this.get_tooltip().add_showed(ss.Delegate.create(this,this.handleUbertipButtons));}
tab.TooltipResponsiveMode.$24=function(){tab.TooltipResponsiveMode.$1D++;return 'mousemove.TooltipResponsiveMode'+tab.TooltipResponsiveMode.$1D;}
tab.TooltipResponsiveMode.prototype={$1C:null,$1E:false,get_ubertipShouldEnforceButtonOrdering:function(){return true;},dispose:function(){var $0=this.tooltipBehaviors['smooth'];$0.remove_onMouseStop(ss.Delegate.create(this,this.$20));this.get_tooltip().remove_prePosition(ss.Delegate.create(this,this.prepareForPositioning));this.get_tooltip().remove_positioned(ss.Delegate.create(this,this.handleUbertipButtons));this.get_tooltip().remove_showed(ss.Delegate.create(this,this.handleUbertipButtons));this.$23();tab.TooltipResponsiveMode.callBaseMethod(this, 'dispose');},buildBehaviorsDictionary:function(){var $0=spiff.ObjectRegistry.newLegacyTooltipBehavior(tab.ITooltipBehavior,this.get_tooltip());var $1=new tab.SmoothTooltipBehavior(this.get_tooltip());this.tooltipBehaviors['sticky']=$0;this.tooltipBehaviors['smooth']=$1;},getSingleSelectBehaviorCallback:function(pageCoords){return ss.Delegate.create(this,function(){
this.get_currentBehavior().singleSelectComplete(pageCoords);if(this.get_tooltip().get_isShown()){this.triggerUbertipButtonUpdate();}if(!this.isCurrentObjectSelected()){this.switchTooltipMode('smooth');this.$21();}});},shouldShowCommandButtons:function(){var $0=tab.TooltipResponsiveMode.callBaseMethod(this, 'shouldShowCommandButtons');var $1=ss.isValue(this.get_ubertip().get_model());var $2=$1&&ss.isValue(this.get_ubertip().get_model().selectionHtml);if(!$2&&$1){$0=$0&&this.isCurrentObjectSelected();}return $0;},getSingleSelectBehavior:function(targetType){return 'sticky';},getHoverBehavior:function(targetType){var $0=this.get_defaultBehaviorType();if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(targetType==='header'||targetType==='visualparts'){$0='sticky';}else if(targetType==='mark'){$0='smooth';}else{}}else{if(targetType==='header'){$0='sticky';}else{$0='smooth';}}return $0;},onDragEnd:function(){this.get_tooltip().close();tab.TooltipResponsiveMode.callBaseMethod(this, 'onDragEnd');},onBehaviorSwitch:function(){if(this.get_currentBehaviorType()==='smooth'){this.$22();}else{this.$23();}},$1F:function($p0){if(this.readyForHover&&this.get_currentBehaviorType()==='smooth'){(this.get_currentBehavior()).onMouseMove($p0);}},$20:function($p0){if(ss.isNullOrUndefined(this.get_ubertip().get_model())){return;}var $0=false;var $1=this.isCurrentObjectSelected();if($1){$0=this.switchTooltipMode('sticky');}this.$21();if($0&&this.get_tooltip().get_isShown()){this.triggerUbertipButtonUpdate();}},$21:function(){if(!this.get_tooltip().get_isShown()&&ss.isValue(this.get_tooltip().get_lastLocation())&&this.get_currentBehaviorType()==='sticky'&&this.isVizTooltipCurrentlyEmpty()&&this.get_ubertip().hasActionsOrSummaryOrCommands()){this.get_tooltip().show(this.get_tooltip().get_body().children()[0],this.get_tooltip().get_lastLocation());}else if(this.get_tooltip().get_isShown()&&this.get_currentBehaviorType()==='smooth'&&this.isVizTooltipCurrentlyEmpty()){this.get_tooltip().close();}},$22:function(){if(this.$1E){return;}$(window.document.documentElement).bind(this.$1C,ss.Delegate.create(this,this.$1F));this.$1E=true;},$23:function(){if(!this.$1E){return;}$(window.document.documentElement).unbind(this.$1C);this.$1E=false;}}
tab.SmoothTooltipBehavior=function(tooltip){this.$5=new tab.DisposableHolder();tab.Param.verifyValue(tooltip,'tooltip');this.$2=tooltip;var $0=tab.FeatureParamsLookup.getInt(tab.FeatureParam.buttonDelay);if(ss.isValue($0)){this.$1=($0||0);}}
tab.SmoothTooltipBehavior.prototype={$1:750,$2:null,$3:null,$4:null,add_onMouseStop:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_onMouseStop:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,attach:function(){this.$2.add_showed(ss.Delegate.create(this,this.$7));this.$2.add_closed(ss.Delegate.create(this,this.$8));this.$2.add_disposed(ss.Delegate.create(this,this.$A));},detach:function(){this.$5.dispose();if(ss.isValue(this.$2)){this.$2.remove_showed(ss.Delegate.create(this,this.$7));this.$2.remove_closed(ss.Delegate.create(this,this.$8));this.$2.remove_disposed(ss.Delegate.create(this,this.$A));}},dispose:function(){this.detach();},shownTooltipIsStatic:function(){return false;},isHoverAllowed:function(pageCoords){return true;},shouldShowCommandButtons:function(){return false;},handleUbertipMenuToggle:function(areMenuItemsVisible){},handleUbertipMenuClose:function(){},hoverOverObject:function(pageCoords,isSelected,isEmpty,isSameObject){if(isEmpty){this.$2.close();}else if(ss.isValue(isSameObject)&&isSameObject&&this.$2.get_isShown()){this.$2.move(pageCoords);}else{this.showTooltip(pageCoords);}},hoverOverWhitespace:function(pageCoords){if(this.$2.get_isShown()){this.$2.close();}},multiSelectComplete:function(pageAnchorPoint){this.showTooltip(pageAnchorPoint);},singleSelectComplete:function(pageCoords){this.showTooltip(pageCoords);},onPanningOrDragging:function(){if(this.$2.get_isShown()){this.$2.close();}},onScroll:function(){if(this.$2.get_isShown()){this.$2.close();}},mouseDown:function(pageCoords,objectUnderMouse){},showTooltip:function(pageCoords){if(this.$2.get_isShown()&&tab.PointUtil.equals(this.$2.get_location(),pageCoords)){return;}this.$2.show(this.$2.get_body().children()[0],pageCoords);},$7:function($p0,$p1){this.$B();this.$9(tab.$create_Point($p1.origX,$p1.origY));this.$4=Date.get_now();},$8:function(){this.$2.get_element().unbind('.SmoothTooltipBehavior');this.$4=null;this.$B();},onMouseMove:function(e){var $0=(this.$2.get_lastLocation()||tab.$create_Point(0,0));var $1=tab.$create_Point(e.pageX,e.pageY);this.$2.set_lastLocation($1);this.$2.move($1);var $2=tab.PointUtil.distance($0,this.$2.get_lastLocation());if($2>0){if(ss.isValue(this.$3)){window.clearTimeout(this.$3);this.$3=null;}this.$9($1);if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.$2.close();}}},$9:function($p0){if(ss.isValue(this.$3)){window.clearTimeout(this.$3);this.$3=null;}this.$3=window.setTimeout(ss.Delegate.create(this,function(){
if(ss.isValue(this.$6)){this.$6($p0);}}),this.$1);},$A:function($p0,$p1){this.dispose();},$B:function(){if(ss.isValue(this.$3)){window.clearTimeout(this.$3);this.$3=null;}}}
tab.NotificationCommandRedirectHandler=function(){}
tab.NotificationCommandRedirectHandler.$0=function($p0){var $0=$.Deferred();var $1=$p0.a2k;tab.ConfirmationViewModel.showNotification($1.q1.toString().htmlEncode(),function(){
$0.resolve();});return $0.promise();}
tab.ReferenceLineConstantValueQuickEditCommandRedirectHandler=function(){}
tab.ReferenceLineConstantValueQuickEditCommandRedirectHandler.$0=function($p0){var $0=$.Deferred();if(ss.isValue($p0)&&tab.FeatureFlags.isEnabled('ConstantRefLineQuickEditor')){var $1=$p0.ap2;tab.ReferenceLineConstantValueEditorViewModel.constantLinePillDropped($1);$0.resolve();}return $0.promise();}
tab.ConfirmationCommandRedirectHandler=function(){}
tab.ConfirmationCommandRedirectHandler.$0=function($p0){var $0=$.Deferred();var $1=$p0.a2j;var $2=$('<div>').append($('<div>').text($1.q0).css('white-space','pre-wrap'));var $3=$2.html();tab.ConfirmationViewModel.showConfirmation($3,function($p1_0){
var $1_0=($p1_0==='confirm')?$1.aox:$1.aoy;if(ss.isNullOrUndefined($1_0)){$0.resolve();return;}var $1_1=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create($1_0).get_simpleCommand());tab.ServerCommands.executeServerCommand($1_1,'immediately',tab.CommandUtils.createCommandRedirectSuccessHandler($0),function(){
$0.reject();});});return $0.promise();}
tab.CircleShapeSelector=function(svgSize){tab.CircleShapeSelector.initializeBase(this,[svgSize,(tab.ShapeSelectorBase.get_isUsingVml())?tab.CircleShapeSelector.$17:tab.CircleShapeSelector.$16,'tvdrag_svg_div']);this.$C=tab.$create_Circle(tab.$create_PointF(0,0),0);this.$D=tab.$create_Circle(tab.$create_PointF(0,0),0);}
tab.CircleShapeSelector.prototype={$C:null,$D:null,get_hitTestingBox:function(){return tab.RectXYUtil.nonemptyify(this.$18(true));},isSingleSelect:function(){return this.$C.radius<1;},$18:function($p0){return tab.CircleUtil.boundingBox(($p0)?this.$D:this.$C);},updateSpecificShape:function(lastPoint){var $0=this.get_dragStart().x-this.get_connectNodePos().x;var $1=this.get_dragStart().y-this.get_connectNodePos().y;var $2=Math.sqrt(Math.pow($0-lastPoint.x,2)+Math.pow($1-lastPoint.y,2));this.$C=tab.$create_Circle(tab.$create_PointF($0+this.get_drawOffsets().x,$1+this.get_drawOffsets().y),$2);this.$D=tab.$create_Circle(tab.$create_PointF($0+this.get_totalScrollOffset().x,$1+this.get_totalScrollOffset().y),$2);},renderShape:function(){if(tab.ShapeSelectorBase.get_isUsingVml()){var $0=Math.round(this.$C.center.x);var $1=Math.round(this.$C.center.y);var $2=Math.round(this.$C.radius);var $3=$2*2;var $4=1;this.get_dom().find('.'+'voval').css('width',$3+'px').css('height',$3+'px').css('left',$0-$2+'px').css('top',$1-$2+'px');this.get_dom().find('.'+'circle_crosshairs').eq(0).css('width',((4*2)-$4)+'px').css('height',$4+'px').css('left',($0-4+1)+'px').css('top',$1+'px');this.get_dom().find('.'+'circle_crosshairs').eq(1).css('width',$4+'px').css('height',((4*2)-$4)+'px').css('left',$0+'px').css('top',($1-4+1)+'px');}else{this.get_dom().find('svg circle').attr('cx',this.$C.center.x.toString()).attr('cy',this.$C.center.y.toString()).attr('r',this.$C.radius.toString());this.get_dom().find('svg  g.'+'circle_crosshairs'+' line').eq(0).attr('x1',(this.$C.center.x-4).toString()).attr('x2',(this.$C.center.x+4).toString()).attr('y1',this.$C.center.y.toString()).attr('y2',this.$C.center.y.toString());this.get_dom().find('svg  g.'+'circle_crosshairs'+' line').eq(1).attr('x1',this.$C.center.x.toString()).attr('x2',this.$C.center.x.toString()).attr('y1',(this.$C.center.y-4).toString()).attr('y2',(this.$C.center.y+4).toString());}this.get_dom().css('display','');},show:function(){this.get_dom().find('.selectionShape').show();},hide:function(){this.get_dom().find('.selectionShape').hide();},shapeAreaHit:function(clippedSelection,paneDrawInfo,markHitTargetNode,t){return tab.HitTester.circleAreaHit(paneDrawInfo,markHitTargetNode.get_boundingBox(),this.$D,markHitTargetNode.get_objectId(),t,paneDrawInfo.get_markType());},sendSelectionCommand:function(region,action,visualId,tooltipCallback){tab.SelectionClientCommands.selectCircleRegionAndDoUbertip(region,this.get_hitTestingBox(),this.$D,action,visualId,tooltipCallback);},retrieveStateObject:function(shapeState){return (this.isStateObjectTypeCorrect(shapeState))?shapeState:new tab.CircleShapeState();},saveCurrentState:function(shapeState){if(this.isStateObjectTypeCorrect(shapeState)){var $0=shapeState;$0.saveCurrentState(this.$D);}},isStateObjectTypeCorrect:function(shapeState){if(ss.isValue(shapeState)){if(Type.getInstanceType(shapeState)===tab.CircleShapeState){return true;}}return false;}}
tab.CircleShapeState=function(){tab.CircleShapeState.initializeBase(this);this.$0=tab.$create_Circle(tab.$create_PointF(0,0),0);this.$1=tab.$create_Circle(tab.$create_PointF(0,0),0);}
tab.CircleShapeState.prototype={$0:null,$1:null,saveCurrentState:function(dragCircle){this.$0=tab.CircleUtil.clone(dragCircle);},updateLastState:function(){this.$1=this.$0;},getStateDiff:function(){if(!tab.CircleUtil.isEmpty(this.$1)){return tab.CircleUtil.getChangedRects(this.$0,this.$1);}var $0=new Array(1);$0[0]=tab.CircleUtil.boundingBox(this.$0);return $0;}}
tab.PolyShapeSelector=function(svgSize){tab.PolyShapeSelector.initializeBase(this,[svgSize,(tab.ShapeSelectorBase.get_isUsingVml())?tab.PolyShapeSelector.$16:"<div><svg class='selectionShape'><path class='tvdrag_svg_marquee'></path></svg></div>",'tvdrag_svg_div']);this.$C=[];this.$D=[];this.$E={};}
tab.PolyShapeSelector.prototype={$C:null,$D:null,$E:null,$F:'',$18:null,get_hitTestingBox:function(){return (!this.$C.length)?tab.$create_RectXY(0,0,0,0):tab.RectXYUtil.nonemptyify(this.$19(true));},get_autoScrollAdjustment:function(){return (tab.ApplicationModel.get_instance().get_isLocalRenderMode()||tsConfig.is_mobile)?this.get_autoScrollOffset():tab.$create_Point(0,0);},isSingleSelect:function(){return !this.$C.length;},$19:function($p0){var $0=($p0)?this.$D:this.$C;var $1=$0[0].x;var $2=$0[0].x;var $3=$0[0].y;var $4=$0[0].y;var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $5=$enum1.current;if($5.x<$1){$1=$5.x;}else if($5.x>$2){$2=$5.x;}if($5.y<$3){$3=$5.y;}else if($5.y>$4){$4=$5.y;}}return tab.$create_RectXY($1,$3,$2-$1,$4-$3);},updateSpecificShape:function(lastPoint){if(!this.$C.length){var $2=this.get_dragStart().x-this.get_connectNodePos().x;var $3=this.get_dragStart().y-this.get_connectNodePos().y;this.$1C($2,$3);}var $0=lastPoint.x;var $1=lastPoint.y;this.$1C($0,$1);},renderShape:function(){if(String.isNullOrEmpty(this.$F)){return;}if(tab.ShapeSelectorBase.get_isUsingVml()){var $0="<v:polyline class='"+'vpolyline'+"' filled='False' points='"+this.$F+"'><v:stroke color='"+'rgb(0, 176, 240)'+"'/></v:polyline>";this.get_dom().find('.'+'vpolyline').replaceWith($0);}else{this.get_dom().find('svg path').attr('d',this.$F);if(ss.isValue(this.$18)){window.clearTimeout(this.$18);}this.$18=window.setTimeout(ss.Delegate.create(this,function(){
this.$1A();}),300);}this.get_dom().css('display','');},$1A:function(){if(ss.isValue(this.$18)){window.clearTimeout(this.$18);}this.get_dom().find('svg path').attr('d',this.$F+'Z');},show:function(){this.$1B();this.renderShape();this.get_dom().find('.selectionShape').show();},hide:function(){this.get_dom().find('.selectionShape').hide();},shapeAreaHit:function(clippedSelection,paneDrawInfo,markHitTargetNode,t){var $0=markHitTargetNode.get_objectId();var $1=paneDrawInfo.get_markType();var $2=tab.HitTester.rectangleAreaHit(paneDrawInfo,markHitTargetNode.get_boundingBox(),clippedSelection,$0,t,$1);if(!$2){return false;}var $3=0;if(t.get_transformType()===tab.TransformationType.worldOffset){$3=t.get_translateX();}var $4=this.$1D($3);if(t.get_transformType()===tab.TransformationType.pixelToDomain){$4=t.transformPolygon($4);}return tab.HitTester.polyAreaHit(paneDrawInfo,markHitTargetNode.get_boundingBox(),$4,$0,t,$1);},sendSelectionCommand:function(region,action,visualId,tooltipCallback){tab.SelectionClientCommands.selectPolyRegionAndDoUbertip(region,this.get_hitTestingBox(),this.$D,action,visualId,tooltipCallback);},retrieveStateObject:function(shapeState){return (this.isStateObjectTypeCorrect(shapeState))?shapeState:new tab.PolyShapeState();},saveCurrentState:function(shapeState){if(this.isStateObjectTypeCorrect(shapeState)){var $0=shapeState;$0.saveCurrentState(this.$D);}},isStateObjectTypeCorrect:function(shapeState){if(ss.isValue(shapeState)){if(Type.getInstanceType(shapeState)===tab.PolyShapeState){return true;}}return false;},$1B:function(){this.$C.clear();this.$D.clear();Object.clearKeys(this.$E);this.$F='';},$1C:function($p0,$p1){var $0=$p0+this.get_drawOffsets().x+this.get_autoScrollAdjustment().x;var $1=$p1+this.get_drawOffsets().y+this.get_autoScrollAdjustment().y;var $2=$p0+this.get_totalScrollOffset().x;var $3=$p1+this.get_totalScrollOffset().y;this.$C.add(tab.$create_Point($0,$1));this.$D.add(tab.$create_Point($2,$3));this.$F='';var $4=this.get_autoScrollAdjustment();if(tab.ShapeSelectorBase.get_isUsingVml()){var $enum1=ss.IEnumerator.getEnumerator(this.$C);while($enum1.moveNext()){var $5=$enum1.current;this.$F+=($5.x-$4.x)+'px,'+($5.y-$4.y)+'px,';}this.$F+=(this.$C[0].x-$4.x)+'px,'+(this.$C[0].y-$4.y)+'px';}else{var $6='M';var $enum2=ss.IEnumerator.getEnumerator(this.$C);while($enum2.moveNext()){var $7=$enum2.current;this.$F+=$6+($7.x-$4.x)+','+($7.y-$4.y);$6='L';}}Object.clearKeys(this.$E);},$1D:function($p0){if(!Object.keyExists(this.$E,$p0)){var $0=[];var $1=Math.round($p0);var $2=this.$D;var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $3=$enum1.current;$0.add(tab.$create_PointF($3.x-$1,$3.y));}this.$E[$p0]=$0;}return this.$E[$p0];}}
tab.PolyShapeState=function(){tab.PolyShapeState.initializeBase(this);this.$0=[];this.$1=0;}
tab.PolyShapeState.prototype={$0:null,$1:0,saveCurrentState:function(listOfPoints){if(listOfPoints.length<this.$1){}this.$0=listOfPoints.clone();},updateLastState:function(){this.$1=Math.max(0,this.$0.length-1);},getStateDiff:function(){if(!this.$0.length){return new Array(0);}var $0=this.$0[0].y;var $1=$0;var $2=this.$0[0].x;var $3=$2;for(var $5=this.$1,$6=this.$0.length;$5<$6;$5++){$0=Math.min($0,this.$0[$5].y);$1=Math.max($1,this.$0[$5].y);$2=Math.min($2,this.$0[$5].x);$3=Math.max($3,this.$0[$5].x);}var $4=new Array(1);$4[0]=tab.RectXYUtil.nonemptyify(tab.$create_RectXY($2,$0,($3-$2),($1-$0)));return $4;}}
tab.RectShapeSelector=function(){tab.RectShapeSelector.initializeBase(this,[tab.$create_RectXY(0,0,0,0),'<div></div>','tvdrag']);this.$C=tab.$create_RectXY(0,0,0,0);this.$D=tab.$create_RectXY(0,0,0,0);}
tab.RectShapeSelector.prototype={$C:null,$D:null,get_hitTestingBox:function(){return tab.RectXYUtil.nonemptyify(this.$D);},isSingleSelect:function(){return this.$C.w<=1&&this.$C.h<=1;},updateSpecificShape:function(lastPoint){var $0=this.get_dragStart().x-this.get_connectNodePos().x;var $1=this.get_dragStart().y-this.get_connectNodePos().y;var $2=Math.round(Math.min(lastPoint.x,$0));var $3=Math.round(Math.max(lastPoint.x,$0));var $4=Math.round(Math.min(lastPoint.y,$1));var $5=Math.round(Math.max(lastPoint.y,$1));var $6=$3-$2;var $7=$5-$4;this.$C=tab.$create_RectXY($2+this.get_drawOffsets().x,$4+this.get_drawOffsets().y,$6,$7);this.$D=tab.$create_RectXY($2+this.get_totalScrollOffset().x,$4+this.get_totalScrollOffset().y,$6,$7);},renderShape:function(){var $0=tab.$create_Rect(this.$C.x,this.$C.y,this.$C.w,this.$C.h);tab.DomUtil.setMarginBoxJQ(this.get_dom(),$0);this.get_dom().css('display','');},show:function(){this.get_dom().addClass('tvdrag_marquee');},hide:function(){this.get_dom().removeClass('tvdrag_marquee');},shapeAreaHit:function(clippedSelection,paneDrawInfo,markHitTargetNode,t){return tab.HitTester.rectangleAreaHit(paneDrawInfo,markHitTargetNode.get_boundingBox(),clippedSelection,markHitTargetNode.get_objectId(),t,paneDrawInfo.get_markType());},sendSelectionCommand:function(region,action,visualId,tooltipCallback){tab.SelectionClientCommands.selectRectRegionAndDoUbertip(region,this.get_hitTestingBox(),action,visualId,tooltipCallback);},retrieveStateObject:function(shapeState){return (this.isStateObjectTypeCorrect(shapeState))?shapeState:new tab.RectShapeState();},saveCurrentState:function(shapeState){if(this.isStateObjectTypeCorrect(shapeState)){var $0=shapeState;$0.saveCurrentState(this.get_hitTestingBox());}},isStateObjectTypeCorrect:function(shapeState){if(ss.isValue(shapeState)){if(Type.getInstanceType(shapeState)===tab.RectShapeState){return true;}}return false;}}
tab.RectShapeState=function(){tab.RectShapeState.initializeBase(this);this.$0=tab.$create_RectXY(0,0,0,0);this.$1=tab.$create_RectXY(0,0,0,0);}
tab.RectShapeState.prototype={$0:null,$1:null,saveCurrentState:function(dragRect){this.$0=tab.RectXYUtil.clone(dragRect);},updateLastState:function(){this.$1=this.$0;},getStateDiff:function(){if(!tab.RectXYUtil.isEmpty(this.$1)){return tab.RectXYUtil.getChangedRects(this.$1,this.$0);}var $0=new Array(1);$0[0]=this.$0;return $0;}}
tab.ShapeSelectorBase=function(svgSize,htmlTemplate,divClassName){this.$6=tab.$create_Point(0,0);this.$7=tab.$create_Point(0,0);this.$8=tab.$create_RectXY(0,0,0,0);this.$9=tab.$create_Point(0,0);this.$A=tab.$create_Point(0,0);this.$0=svgSize.w.toString();this.$1=svgSize.h.toString();this.$2=htmlTemplate;this.$3=divClassName;}
tab.ShapeSelectorBase.get_isUsingVml=function(){return tab.ShapeSelectorBase.$4;}
tab.ShapeSelectorBase.prototype={$0:null,$1:null,$2:null,$3:null,$5:null,pi:null,get_dom:function(){return this.$5;},get_pi:function(){return this.pi;},set_pi:function(value){this.pi=value;return value;},get_dragStart:function(){return this.$7;},get_connectNodePos:function(){return this.$8;},get_totalScrollOffset:function(){return this.$9;},get_drawOffsets:function(){return (tab.ApplicationModel.get_instance().get_isLocalRenderMode()||tsConfig.is_mobile)?tab.$create_Point(0,0):this.get_totalScrollOffset();},get_autoScrollOffset:function(){return this.$A;},get_tooltipAnchor:function(){return tab.$create_Point(this.$6.x+this.$9.x,this.$6.y+this.$9.y);},setSingleSelectPoint:function(p){this.$6=tab.$create_Point(p.x,p.y);},dragStarted:function(dragStartX,dragStartY,connectedNodePosition){this.$7=tab.$create_Point(dragStartX,dragStartY);this.$8=connectedNodePosition;this.$A=tab.$create_Point(0,0);},recordScrollingOffsets:function(scrOffset){this.$9=tab.$create_Point(scrOffset.x,scrOffset.y);},updateAndRenderShape:function(gestureInfo){this.constrainShape(gestureInfo);this.updateSpecificShape(this.$6);this.renderShape();},constrainShape:function(gestureInfo){this.$6=tab.$create_Point(gestureInfo.pageX-this.$8.x,gestureInfo.pageY-this.$8.y);if(Type.canCast(this,tab.CircleShapeSelector)){return;}this.$6.y=Math.max(0,Math.min(this.$6.y,this.$8.h));this.$6.x=Math.max(0,Math.min(this.$6.x,this.$8.w));},shapeScrolled:function(scrolledX,scrolledY){this.get_dragStart().x-=scrolledX;this.get_dragStart().y-=scrolledY;this.$9.x+=scrolledX;this.$9.y+=scrolledY;this.$A.x+=scrolledX;this.$A.y+=scrolledY;this.updateSpecificShape(this.$6);this.renderShape();},createDomAndAppend:function(parentNode){this.$5=$(this.$2);this.$5.addClass(this.$3);this.$5.css('display','none');this.$5.find('svg').attr('width',this.$0).attr('height',this.$1);parentNode.append(this.$5);},hitTest:function(hitTester,isSingleSelect,sceneInfo){var $0=isSingleSelect||this.isSingleSelect();return ($0)?this.$B(hitTester,sceneInfo):this.hitTestShape(hitTester,sceneInfo);},$B:function($p0,$p1){var $0=tab.$create_RectXY(this.$6.x,this.$6.y,1,1);var $1=$p0.hitTestBoundingBoxes($0,true,$p1);return $p0.hitTestSingle($0,$p1,$1);},hitTestShape:function(hitTester,sceneInfo){var $0=hitTester.hitTestBoundingBoxes(this.get_hitTestingBox(),false,sceneInfo);var $1=[];for(var $2=$0.length-1;$2>=0;$2--){var $3=$0[$2];var $4=$3.get_objectId();if($4<0){continue;}var $5=tab.HitTargetNode.findPaneNode($3);if(ss.isNullOrUndefined($5)){continue;}var $6=sceneInfo.getPaneDrawInfoFromKey($5.get_paneKey());var $7=tab.HitTester.getTransformInfo($6,$3);var $8=tab.RectXYUtil.intersect(this.get_hitTestingBox(),$5.get_boundingBox());var $9=this.shapeAreaHit($8,$6,$3,$7);if($9){$1.push(new tab.HitTestResult($6.getMarkProperty('tuple_id',$4),1,1));}}return $1;},updateLastState:function(shapeState){if(this.isStateObjectTypeCorrect(shapeState)){shapeState.updateLastState();}},getStateDiff:function(shapeState){if(this.isStateObjectTypeCorrect(shapeState)){this.saveCurrentState(shapeState);return shapeState.getStateDiff();}var $0=new Array(1);$0[0]=this.get_hitTestingBox();return $0;}}
tab.ShapeStateBase=function(){}
tab.PresModelBrowserViewModel=function(pm){tab.PresModelBrowserViewModel.initializeBase(this);if(tab.PresModelBrowserViewModel.$1_0(pm)){if($.isArray(pm)){this.data=tab.PresModelBrowserViewModel.$1_1(pm);}else{this.data=tab.PresModelBrowserViewModel.$1_2(pm);}}else{this.data=pm.toString();}}
tab.PresModelBrowserViewModel.$1_0=function($p0){return typeof($p0)==='object';}
tab.PresModelBrowserViewModel.$1_1=function($p0){var $0=[];for(var $1=0;$1<$p0.length;++$1){$0.push(tab.PresModelBrowserViewModel.$1_4($1.toString(),$p0[$1]));}return $0;}
tab.PresModelBrowserViewModel.$1_2=function($p0){var $0=[];var $dict1=$p0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};$0.push(tab.PresModelBrowserViewModel.$1_4($1.key,$1.value));}return $0;}
tab.PresModelBrowserViewModel.$1_3=function($p0){return '<strong>'+$p0+':</strong> ';}
tab.PresModelBrowserViewModel.$1_4=function($p0,$p1){if(tab.PresModelBrowserViewModel.$1_0($p1)){if($.isArray($p1)){return {data:tab.PresModelBrowserViewModel.$1_3($p0),children:tab.PresModelBrowserViewModel.$1_1($p1)};}else{return {data:tab.PresModelBrowserViewModel.$1_3($p0),children:tab.PresModelBrowserViewModel.$1_2($p1)};}}else{if($p0.endsWith('Json')&&(($p1).startsWith('{')||($p1).startsWith('['))){var $0=null;try{$0=tab.JsonUtil.parseJson($p1);}catch($1){}if(ss.isValue($0)){return tab.PresModelBrowserViewModel.$1_4($p0,$0);}}}return tab.PresModelBrowserViewModel.$1_3($p0)+$p1;}
tab.PresModelBrowserViewModel.prototype={data:null}
tab.StepperControlViewModel=function(min,max,stepValue,initValue){tab.StepperControlViewModel.initializeBase(this);this.$1_0=min;this.$1_1=max;this.$1_2=stepValue;this.$1_4=initValue;this.$1_3=initValue;this.$1_5=true;this.$1_6=this.$1_4<this.$1_1;this.$1_7=this.$1_4>this.$1_0;}
tab.StepperControlViewModel.prototype={$1_0:0,$1_1:0,$1_2:0,$1_3:0,$1_4:0,$1_5:false,textClass:null,$1_6:false,$1_7:false,get_isEnabled:function(){return this.$1_5;},set_isEnabled:function(value){if(this.$1_5!==value){this.$1_5=value;if(!this.$1_5){this.set_isIncrementEnabled(false);this.set_isDecrementEnabled(false);}else{this.set_value((ss.isValue(this.get_value()))?this.get_value():this.get_initValue());this.set_isIncrementEnabled(this.get_value()<this.get_max());this.set_isDecrementEnabled(this.get_value()>this.get_min());}this.notifyPropertyChanged('IsEnabled');}return value;},get_isIncrementEnabled:function(){return this.$1_6;},set_isIncrementEnabled:function(value){if(this.$1_6!==value){this.$1_6=value;this.notifyPropertyChanged('IsIncrementEnabled');}return value;},get_isDecrementEnabled:function(){return this.$1_7;},set_isDecrementEnabled:function(value){if(this.$1_7!==value){this.$1_7=value;this.notifyPropertyChanged('IsDecrementEnabled');}return value;},get_min:function(){return this.$1_0;},get_max:function(){return this.$1_1;},get_initValue:function(){return this.$1_3;},get_step:function(){return this.$1_2;},get_value:function(){return this.$1_4;},set_value:function(value){if(!this.$1_5){return;}if(this.$1_4!==value){if(ss.isValue(value)&&!isNaN(value)&&this.isValueWithinRange(value)){this.$1_4=value;this.set_isIncrementEnabled(this.$1_4<this.get_max());this.set_isDecrementEnabled(this.$1_4>this.get_min());}this.notifyPropertyChanged('Value');}return value;},isValueWithinRange:function(value){return value>=this.$1_0&&value<=this.$1_1;},increment:function(){this.set_value(this.get_value()+this.get_step());},decrement:function(){this.set_value(this.get_value()-this.get_step());}}
tab.IMapsSearchViewTemplate=function(){};tab.IMapsSearchViewTemplate.registerInterface('tab.IMapsSearchViewTemplate');tab.MapsSearchViewModel=function(visualIdPresModel){tab.MapsSearchViewModel.initializeBase(this);this.$1_0=visualIdPresModel;}
tab.MapsSearchViewModel.prototype={$1_0:null,add_receivedNewSuggestions:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_receivedNewSuggestions:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,add_updateTextInputValue:function(value){this.$1_3=ss.Delegate.combine(this.$1_3,value);},remove_updateTextInputValue:function(value){this.$1_3=ss.Delegate.remove(this.$1_3,value);},$1_3:null,add_onMoveMapToBounds:function(value){this.$1_4=ss.Delegate.combine(this.$1_4,value);},remove_onMoveMapToBounds:function(value){this.$1_4=ss.Delegate.remove(this.$1_4,value);},$1_4:null,commitToSearchString:function(value){value=value.trim();this.sendGeographicSearchQuery(value,1,ss.Delegate.create(this,this.moveToTopGeographicCandidate));},getSuggestionsForSearchString:function(value){this.sendGeographicSearchQuery(value,5,ss.Delegate.create(this,this.processGeographicSuggestions));},moveMapToCandidateBounds:function(candidate){if(ss.isValue(this.$1_3)){this.$1_3(candidate);}if(ss.isValue(this.$1_4)){this.$1_4(candidate.aqs);}tab.PaneClientCommands.boundingBoxPan(this.$1_0,candidate.aqs);},moveMapToSuggestionListItem:function(listItem){var $0=listItem.get_data();this.moveMapToCandidateBounds($0);},moveToTopGeographicCandidate:function(suggestions){var $0=suggestions.a1m;if(!$0.length){}else{var $1=$0[0];this.moveMapToCandidateBounds($1);}},processGeographicSuggestions:function(suggestions){if(!ss.isValue(this.$1_2)){return;}var $0=[];for(var $1=0;$1<Math.min(suggestions.a1m.length);$1++){$0.add(suggestions.a1m[$1]);}this.$1_2(suggestions.l6,$0);},sendGeographicSearchQuery:function(value,maxNumberOfResults,resultsCallback){var $0=tsConfig.workbookLocale||'en_us';tab.PaneClientCommands.geographicSearchQuery(this.$1_0,value,$0,maxNumberOfResults,resultsCallback);}}
tab.MapsSearchView=function(vm,mapsSearchViewTemplate){tab.MapsSearchView.initializeBase(this,[vm,mapsSearchViewTemplate.get_template()]);this.mapsSearchViewModel=vm;this.mapsSearchViewTemplate=mapsSearchViewTemplate;this.$2_0=mapsSearchViewTemplate.get_compositeSearchWidget();this.set_isVisible(false);this.showInitialSearchText(true);this.get_compositeSearchWidget().get_domRoot().addClass('tabMapsSearchView');this.mapsSearchViewTemplate.get_domRoot().addClass(tab.MapsSearchView.widgetClassNameTranslucent);this.get_compositeSearchWidget().add_enterKeyPressed(ss.Delegate.create(this,this.handleEnterKeyPress));this.get_compositeSearchWidget().add_searchButtonClicked(ss.Delegate.create(this,this.handleSearchButtonClick));this.get_compositeSearchWidget().add_listItemClicked(ss.Delegate.create(this,this.handleListItemClick));this.get_compositeSearchWidget().get_textInputView().add_propertyChanged(ss.Delegate.create(this,this.$2_B));this.mapsSearchViewModel.add_receivedNewSuggestions(ss.Delegate.create(this,this.showNewSuggestions));this.mapsSearchViewModel.add_updateTextInputValue(ss.Delegate.create(this,this.updateSearchTextValue));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_compositeSearchWidget().remove_enterKeyPressed(ss.Delegate.create(this,this.handleEnterKeyPress));this.get_compositeSearchWidget().remove_searchButtonClicked(ss.Delegate.create(this,this.handleSearchButtonClick));this.get_compositeSearchWidget().remove_listItemClicked(ss.Delegate.create(this,this.handleListItemClick));this.get_compositeSearchWidget().get_textInputView().remove_propertyChanged(ss.Delegate.create(this,this.$2_B));this.mapsSearchViewModel.remove_receivedNewSuggestions(ss.Delegate.create(this,this.showNewSuggestions));this.mapsSearchViewModel.remove_updateTextInputValue(ss.Delegate.create(this,this.updateSearchTextValue));this.$2_F();})));this.disposables.add(spiff.EventUtil.bindWithDispose(this.get_compositeSearchWidget().get_textInputView().get_inputElement(),'keydown',ss.Delegate.create(this,this.$2_7)));this.disposables.add(spiff.EventUtil.bindWithDispose(this.get_compositeSearchWidget().get_textInputView().get_inputElement(),'mousedown',ss.Delegate.create(this,this.$2_6)));this.disposables.add(spiff.EventUtil.bindWithDispose(this.get_compositeSearchWidget().get_textInputView().get_inputElement(),'touchstart',ss.Delegate.create(this,this.$2_6)));this.disposables.add(spiff.EventUtil.bindWithDispose(this.get_compositeSearchWidget().get_textInputView().get_inputElement(),'focus',ss.Delegate.create(this,this.$2_9)));this.disposables.add(spiff.EventUtil.bindWithDispose(this.get_compositeSearchWidget().get_textInputView().get_inputElement(),'focusout',ss.Delegate.create(this,this.$2_A)));this.get_compositeSearchWidget().get_textInputView().get_inputElement().bind('paste',ss.Delegate.create(this,this.$2_8));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_compositeSearchWidget().get_textInputView().get_inputElement().unbind('paste',ss.Delegate.create(this,this.$2_8));})));if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){this.get_compositeSearchWidget().get_textInputView().get_inputElement().css('line-height','22px');}}
tab.MapsSearchView.newMapsSearchViewTemplate=function(){return new tab.vqlui$13();}
tab.MapsSearchView.prototype={mapsSearchViewModel:null,mapsSearchViewTemplate:null,$2_0:null,$2_3:false,$2_4:true,$2_5:null,queryDelayTimer:null,showingInitialText:false,get_compositeSearchWidget:function(){return this.$2_0;},get_isCollapsed:function(){return this.$2_3;},set_isCollapsed:function(value){this.$2_3=value;this.mapsSearchViewTemplate.get_domRoot().toggleClass(tab.MapsSearchView.$2_1,this.$2_3);return value;},get_isVisible:function(){return this.$2_4;},set_isVisible:function(value){if(!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.mapsSearchDebugAlwaysShow)){value=true;}if(this.$2_4===value){return;}this.$2_4=value;this.mapsSearchViewTemplate.get_domRoot().css('display',(this.$2_4)?'':'none');return value;},$2_6:function($p0){if(!this.showingInitialText){return;}if((tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9)||tab.BrowserSupport.get_isSafari()){this.showInitialSearchText(false);return;}$p0.preventDefault();this.get_compositeSearchWidget().get_textInputView().get_inputElement().get(0).focus();},$2_7:function($p0){if(!this.showingInitialText){return;}var $0=$p0.which;if($0===20||$0===16||$0===9||$0===27||$0===17||$0===91||$0===19||$0===18||$0===93||$0===45||$0===34||$0===33||($0>=112&&$0<=123)||($0>=144&&$0<=145)){return;}this.showInitialSearchText(false);},$2_8:function($p0){if(!this.showingInitialText){return;}this.showInitialSearchText(false);},$2_9:function($p0){this.mapsSearchViewTemplate.get_domRoot().removeClass(tab.MapsSearchView.widgetClassNameTranslucent);},$2_A:function($p0){this.mapsSearchViewTemplate.get_domRoot().addClass(tab.MapsSearchView.widgetClassNameTranslucent);},showInitialSearchText:function(show){if(this.showingInitialText===show){return;}this.get_compositeSearchWidget().get_textInputView().set_text((show)?tab.Strings.MapsSearchViewInitialText:'');this.get_compositeSearchWidget().get_textInputView().get_inputElement().toggleClass(tab.MapsSearchView.$2_2,show);if(show&&this.$2_4&&(!tab.FeatureParamsLookup.getBool(tab.FeatureParam.mapsSearchDebugAlwaysShow))){tab.DomUtil.setSelectionRangeOnInput(this.$2_0.get_textInputView().get_inputElement().get(0),0,0);}this.showingInitialText=show;},$2_B:function($p0,$p1){this.$2_F();if(!this.showingInitialText&&this.get_compositeSearchWidget().get_textInputView().get_text()!==this.$2_5){if(!this.get_compositeSearchWidget().get_textInputView().get_text().trim().length){this.get_compositeSearchWidget().removeList();}else{this.$2_C();this.$2_E();}}this.$2_5=null;},showNewSuggestions:function(searchTerm,suggestionsList){if((searchTerm!==this.$2_0.get_textInputView().get_text())||ss.isNullOrUndefined(suggestionsList)){return;}var $0=[];for(var $1=0;$1<suggestionsList.length;$1++){var $2=suggestionsList[$1];var $3='<span/>';var $4=$($3);this.$2_D($4,$2);$0.add(spiff.ListItemViewModel.newFormattedListItem($1.toString(),$4,$2));}this.get_compositeSearchWidget().showList($0,this.mapsSearchViewTemplate.get_domRoot());},$2_C:function(){if(!ss.isValue(this.$2_0.get_listViewModel())){return;}var $enum1=ss.IEnumerator.getEnumerator(this.$2_0.get_listViewModel().get_collection());while($enum1.moveNext()){var $0=$enum1.current;var $1=$0.get_data();this.$2_D($0.get_label(),$1);}},$2_D:function($p0,$p1){$p0.empty();var $0='<span/>';var $1=$($0);var $2=$($0);$1.addClass(tab.MapsSearchView.suggestionDisplayClassName);var $3=$p1.l8;var $4=this.$2_0.get_textInputView().get_text().trimEnd();if($3.toLowerCase().startsWith($4.toLowerCase())){var $5=$($0);$5.addClass(tab.MapsSearchView.suggestionActiveSearchTextClassName);$5.text($3.substr(0,$4.length));$1.append($5);var $6=$($0);$6.text($3.substr($4.length));$1.append($6);}else{$1.text($p1.l8);}$p0.append($1);$2.addClass(tab.MapsSearchView.suggestionParentClassName);$2.text($p1.l9);$p0.append($2);},handleEnterKeyPress:function(){this.$2_F();if(ss.isValue(this.get_compositeSearchWidget().get_listViewModel())){this.mapsSearchViewModel.moveMapToCandidateBounds(this.get_compositeSearchWidget().get_listViewModel().get_collection()[0].get_data());this.$2_0.removeList();}else{this.mapsSearchViewModel.commitToSearchString(this.get_compositeSearchWidget().get_textInputView().get_text());}},handleListItemClick:function(listItem){this.$2_F();this.$2_0.removeList();this.mapsSearchViewModel.moveMapToSuggestionListItem(listItem);},handleSearchButtonClick:function(){this.$2_F();this.set_isCollapsed(!this.$2_3);if(!this.$2_3){if(String.isNullOrEmpty(this.$2_0.get_textInputView().get_text())){this.showInitialSearchText(true);}this.$2_0.get_textInputView().get_inputElement().focus();if(this.showingInitialText){tab.DomUtil.setSelectionRangeOnInput(this.$2_0.get_textInputView().get_inputElement().get(0),0,0);}else{this.selectAllSearchText();}}},$2_E:function(){this.queryDelayTimer=window.setTimeout(ss.Delegate.create(this,this.$2_10),200);},$2_F:function(){if(ss.isValue(this.queryDelayTimer)){window.clearTimeout(this.queryDelayTimer);}this.queryDelayTimer=null;},$2_10:function(){this.mapsSearchViewModel.getSuggestionsForSearchString(this.get_compositeSearchWidget().get_textInputView().get_text());this.$2_F();},updateSearchTextValue:function(candidate){var $0=candidate.l8;if(!String.isNullOrEmpty(candidate.l9)){$0+=', '+candidate.l9;}this.$2_5=$0;this.get_compositeSearchWidget().get_textInputView().set_text($0);},selectAllSearchText:function(){tab.DomUtil.selectAllInputText(this.$2_0.get_textInputView().get_inputElement());},enableUserInteraction:function(enable){this.get_element().css('pointer-events',(enable)?'auto':'none');}}
tab.vqlui$13=function(){tab.vqlui$13.initializeBase(this,[$("<div class='tabMapsSearchView'><div class='tabMapsSearchView-searchControlsContainer'></div></div>")]);this.$1_0=spiff.ObjectRegistry.newView(spiff.CompositeSearchWidget,null);var $0=this.getElementBySelector('.tabMapsSearchView-searchControlsContainer');this.$1_0.get_textInputView().addToDom($0);this.$1_0.get_searchButton().addToDom($0);this.$1_0.get_clearButton().addToDom($0);this.$1_0.get_textInputView().get_inputElement().attr('autocomplete','off');this.$1_0.get_textInputView().get_inputElement().attr('autocorrect','off');this.$1_0.get_textInputView().get_inputElement().attr('autocapitalize','off');this.$1_0.get_textInputView().get_inputElement().attr('spellcheck','false');}
tab.vqlui$13.prototype={$1_0:null,get_template:function(){return this;},get_compositeSearchWidget:function(){return this.$1_0;},dispose:function(){tab.vqlui$13.callBaseMethod(this, 'dispose');this.$1_0.dispose();}}
tab.FormattingConverters.registerClass('tab.FormattingConverters');tab.ApiCrossDomainPresModelsFactory.registerClass('tab.ApiCrossDomainPresModelsFactory');tab.vqlui$D.registerClass('tab.vqlui$D');tab._ApiEnumConverter.registerClass('tab._ApiEnumConverter');tab.ApiEventHandler.registerClass('tab.ApiEventHandler',null,ss.IDisposable);tab.vqlui$C.registerClass('tab.vqlui$C');tab.vqlui$F.registerClass('tab.vqlui$F');tab.vqlui$9.registerClass('tab.vqlui$9');tab._ApiSerializer.registerClass('tab._ApiSerializer');tab.ApiStorytellingHandler.registerClass('tab.ApiStorytellingHandler',null,ss.IDisposable);tab.Application.registerClass('tab.Application',null,ss.IDisposable);tab.CategoricalSelection.registerClass('tab.CategoricalSelection');tab.ExportPdfDialog.registerClass('tab.ExportPdfDialog',spiff.ModalDialog);tab.SheetThumbnailTemplate.registerClass('tab.SheetThumbnailTemplate',spiff.Template);tab.ExportPdfDialogTemplate.registerClass('tab.ExportPdfDialogTemplate',spiff.Template);tab.VizEvent.registerClass('tab.VizEvent');tab.CanvasRenderer.registerClass('tab.CanvasRenderer');tab.MarksRenderer.registerClass('tab.MarksRenderer',tab.CanvasRenderer);tab.BrowserViewport.registerClass('tab.BrowserViewport');tab.ExportHelper.registerClass('tab.ExportHelper',null,tab.IExportImageHelper,tab.IExportPdfHelper);tab.QfButtonUtil.registerClass('tab.QfButtonUtil');tab.ImageUtil.registerClass('tab.ImageUtil');tab.CanvasUtil.registerClass('tab.CanvasUtil');tab.Metrics.registerClass('tab.Metrics');tab.LocalSearch.registerClass('tab.LocalSearch');tab.DisplayList2DUtils.registerClass('tab.DisplayList2DUtils');tab.GeometryUtil.registerClass('tab.GeometryUtil');tab.HitTestResult.registerClass('tab.HitTestResult');tab.HitTestDebugger.registerClass('tab.HitTestDebugger');tab.VisualPartsHitTest.registerClass('tab.VisualPartsHitTest');tab.LineMarkDrawState.registerClass('tab.LineMarkDrawState');tab.LineAttribute.registerClass('tab.LineAttribute');tab.HitTargetColliders.registerClass('tab.HitTargetColliders');tab.HitTargetNode.registerClass('tab.HitTargetNode');tab.HitTester.registerClass('tab.HitTester');tab.HitTestStructureBuilder.registerClass('tab.HitTestStructureBuilder');tab.RectangleGeom.registerClass('tab.RectangleGeom',null,tab.IHitTargetGeom);tab.ModifierKeyState.registerClass('tab.ModifierKeyState',null,ss.IDisposable);tab.PaneDrawInfo.registerClass('tab.PaneDrawInfo');tab.vqlui$7.registerClass('tab.vqlui$7');tab.DisplayList2DRenderer.registerClass('tab.DisplayList2DRenderer',tab.CanvasRenderer);tab.vqlui$8.registerClass('tab.vqlui$8');tab.vqlui$A.registerClass('tab.vqlui$A');tab.FontNormalizer.registerClass('tab.FontNormalizer');tab.PaneTable2DRenderer.registerClass('tab.PaneTable2DRenderer',tab.CanvasRenderer);tab.RenderUtil.registerClass('tab.RenderUtil');tab.TabRenderContext2D.registerClass('tab.TabRenderContext2D');tab.vqlui$E.registerClass('tab.vqlui$E');tab.SceneInfo.registerClass('tab.SceneInfo');tab.ShapeUtil.registerClass('tab.ShapeUtil');tab.ResolveSelectAction.registerClass('tab.ResolveSelectAction');tableau.util.registerClass('tableau.util');tableau.util.NoClickDelay.registerClass('tableau.util.NoClickDelay');tab.URIUtil.registerClass('tab.URIUtil');tab.ViewState2.registerClass('tab.ViewState2');tab.WidgetUtil.registerClass('tab.WidgetUtil');tab.ViewController.registerClass('tab.ViewController',null,ss.IDisposable);tab.ApplicationViewModel.registerClass('tab.ApplicationViewModel',spiff.Widget,tab.IClient,tab.IApiStorytellingClient);tab.vqlui$B.registerClass('tab.vqlui$B');tab.ApplicationViewModelReal.registerClass('tab.ApplicationViewModelReal',spiff.BaseViewModel);tab.ConfirmationViewModel.registerClass('tab.ConfirmationViewModel',spiff.BaseViewModel);tab.CategoricalFilterViewModel.registerClass('tab.CategoricalFilterViewModel',spiff.BaseViewModel,tab.IFilterTypeViewModel);tab.DownloadViewModel.registerClass('tab.DownloadViewModel',spiff.BaseViewModel,spiff.IUberPopupContent);tab.ReferenceLineConstantValueEditorViewModel.registerClass('tab.ReferenceLineConstantValueEditorViewModel',spiff.BaseViewModel);tab.StoryPointCaptionViewModel.registerClass('tab.StoryPointCaptionViewModel',spiff.BaseViewModel,tab.IStoryPointCaptionViewModel);tab.HierarchicalFilterViewModel.registerClass('tab.HierarchicalFilterViewModel',spiff.BaseViewModel,tab.IFilterTypeViewModel);tab.QuantitativeFilterViewModel.registerClass('tab.QuantitativeFilterViewModel',spiff.BaseViewModel,tab.IFilterTypeViewModel);tab.RelativeDateFilterViewModel.registerClass('tab.RelativeDateFilterViewModel',spiff.BaseViewModel,tab.IFilterTypeViewModel);tab.FlipboardNavigatorViewModel.registerClass('tab.FlipboardNavigatorViewModel',spiff.BaseViewModel,tab.IFlipboardNavigatorViewModel);tab.FlipboardViewModel.registerClass('tab.FlipboardViewModel',spiff.BaseViewModel);tab.ParameterControlViewModel.registerClass('tab.ParameterControlViewModel',spiff.BaseViewModel);tab.QuickFilterDisplayViewModel.registerClass('tab.QuickFilterDisplayViewModel',spiff.BaseViewModel);tab.ShareViewModel.registerClass('tab.ShareViewModel',spiff.BaseViewModel,spiff.IUberPopupContent);tab.LegendBaseViewModel.registerClass('tab.LegendBaseViewModel',spiff.BaseViewModel);tab.QuantitativeColorLegendViewModel.registerClass('tab.QuantitativeColorLegendViewModel',tab.LegendBaseViewModel);tab.ImageZoneViewModel.registerClass('tab.ImageZoneViewModel',spiff.BaseViewModel);tab.ToolbarButtonViewModel.registerClass('tab.ToolbarButtonViewModel',spiff.BaseViewModel);tab.ToolbarViewModel.registerClass('tab.ToolbarViewModel',spiff.BaseViewModel);tab.WebZoneViewModel.registerClass('tab.WebZoneViewModel',spiff.BaseViewModel);tab.CategoricalLegendViewModel.registerClass('tab.CategoricalLegendViewModel',tab.LegendBaseViewModel);tab.TextRegionViewModel.registerClass('tab.TextRegionViewModel',spiff.BaseViewModel);tab.PageViewModel.registerClass('tab.PageViewModel',spiff.BaseViewModel);tab.LegacyLegendViewModel.registerClass('tab.LegacyLegendViewModel',tab.LegendBaseViewModel);tab.DashboardViewModel.registerClass('tab.DashboardViewModel',spiff.BaseViewModel);tab.LogOnViewModel.registerClass('tab.LogOnViewModel',spiff.BaseViewModel);tab.NotificationViewModel.registerClass('tab.NotificationViewModel',spiff.BaseViewModel);tab.PaneTableViewModel.registerClass('tab.PaneTableViewModel',spiff.BaseViewModel);tab.SubscribeViewModel.registerClass('tab.SubscribeViewModel',spiff.BaseViewModel);tab.ViewingToolbarCommands.registerClass('tab.ViewingToolbarCommands',null,ss.IDisposable);tab.VisualListViewModel.registerClass('tab.VisualListViewModel',spiff.BaseViewModel);tab.WorkbookViewModel.registerClass('tab.WorkbookViewModel',spiff.BaseViewModel);tab.ZoneViewModel.registerClass('tab.ZoneViewModel',spiff.BaseViewModel);tab.ContinuousSliderViewModel.registerClass('tab.ContinuousSliderViewModel',spiff.BaseViewModel);tab.AccordionView.registerClass('tab.AccordionView',spiff.BaseView);tab.AccordionTemplate.registerClass('tab.AccordionTemplate',spiff.Template);tab.AccordionItemTemplate.registerClass('tab.AccordionItemTemplate',spiff.Template);tab.AccordionViewModel.registerClass('tab.AccordionViewModel',spiff.BaseViewModel);tab.AccordionItem.registerClass('tab.AccordionItem');tab.vqlui$0.registerClass('tab.vqlui$0',null,spiff.IDropTarget);tab.DownloadView.registerClass('tab.DownloadView',spiff.BaseView);tab.DownloadTemplate.registerClass('tab.DownloadTemplate',spiff.Template);tab.ReferenceLineConstantValueEditorView.registerClass('tab.ReferenceLineConstantValueEditorView',spiff.BaseView);tab.vqlui$12.registerClass('tab.vqlui$12',spiff.Template);tab.ToolbarButtonView.registerClass('tab.ToolbarButtonView',spiff.BaseView);tab.ToolbarButtonTemplate.registerClass('tab.ToolbarButtonTemplate',spiff.Template);tab.WorkbookView.registerClass('tab.WorkbookView',spiff.BaseView);tab.WorkbookTemplate.registerClass('tab.WorkbookTemplate',spiff.Template);tab.BaseLegendView.registerClass('tab.BaseLegendView',spiff.BaseView);tab.LegendTemplate.registerClass('tab.LegendTemplate',spiff.Template);tab.CanvasView.registerClass('tab.CanvasView',spiff.BaseView,spiff.IScrollable);tab.CanvasTemplate.registerClass('tab.CanvasTemplate',spiff.Template);tab.ConfirmationView.registerClass('tab.ConfirmationView',spiff.BaseView);tab.ApplicationView.registerClass('tab.ApplicationView',spiff.BaseView);tab.ApplicationTemplate.registerClass('tab.ApplicationTemplate',spiff.Template);tab.VisualRegionCanvasView.registerClass('tab.VisualRegionCanvasView',tab.CanvasView,tab.IRegionContentProvider);tab.PaneTableOverlayView.registerClass('tab.PaneTableOverlayView',tab.VisualRegionCanvasView);tab.vqlui$6.registerClass('tab.vqlui$6');tab.PresModelBrowserView.registerClass('tab.PresModelBrowserView',spiff.BaseView);tab.StoryPointCaptionView.registerClass('tab.StoryPointCaptionView',spiff.BaseView);tab.StoryPointCaptionTemplate.registerClass('tab.StoryPointCaptionTemplate',spiff.Template);tab.StoryPointCaptionContentTemplate.registerClass('tab.StoryPointCaptionContentTemplate',spiff.Template);tab.DashboardView.registerClass('tab.DashboardView',spiff.BaseView);tab.DashboardTemplate.registerClass('tab.DashboardTemplate',spiff.Template);tab.FlipboardNavigatorView.registerClass('tab.FlipboardNavigatorView',spiff.BaseView);tab.FlipboardNavigatorTemplate.registerClass('tab.FlipboardNavigatorTemplate',spiff.Template);tab.FlipboardNavigatorPointsTemplate.registerClass('tab.FlipboardNavigatorPointsTemplate',spiff.Template);tab.FlipboardView.registerClass('tab.FlipboardView',spiff.BaseView);tab.FlipboardTemplate.registerClass('tab.FlipboardTemplate',spiff.Template);tab.PaneTableView.registerClass('tab.PaneTableView',spiff.BaseView);tab.PaneTableTemplate.registerClass('tab.PaneTableTemplate',spiff.Template);tab.MapAttributionTemplate.registerClass('tab.MapAttributionTemplate',spiff.Template);tab.ParameterControlView.registerClass('tab.ParameterControlView',spiff.BaseView);tab.ParameterControlTemplate.registerClass('tab.ParameterControlTemplate',spiff.Template);tab.QuantitativeColorLegendView.registerClass('tab.QuantitativeColorLegendView',tab.BaseLegendView);tab.QuantitativeColorLegendTemplate.registerClass('tab.QuantitativeColorLegendTemplate',tab.LegendTemplate);tab.ImageZoneView.registerClass('tab.ImageZoneView',spiff.BaseView);tab.ImageZoneTemplate.registerClass('tab.ImageZoneTemplate',spiff.Template);tab.FilterWidget.registerClass('tab.FilterWidget',dijit._Widget);tab.QuantitativeFilter.registerClass('tab.QuantitativeFilter',tab.FilterWidget);tab.QuantitativeDateFilter.registerClass('tab.QuantitativeDateFilter',tab.QuantitativeFilter);tab.QuickFilterDisplayView.registerClass('tab.QuickFilterDisplayView',spiff.BaseView);tab.QuickFilterDisplayTemplate.registerClass('tab.QuickFilterDisplayTemplate',spiff.Template);tab.ToolbarView.registerClass('tab.ToolbarView',spiff.BaseView);tab.ToolbarTemplate.registerClass('tab.ToolbarTemplate',spiff.Template);tab.WebZoneView.registerClass('tab.WebZoneView',spiff.BaseView);tab.WebZoneTemplate.registerClass('tab.WebZoneTemplate',spiff.Template);tab.CategoricalLegendView.registerClass('tab.CategoricalLegendView',tab.BaseLegendView);tab.CategoricalLegendColumnHtmlTemplate.registerClass('tab.CategoricalLegendColumnHtmlTemplate',spiff.Template);tab.CategoricalLegendItemHtmlTemplate.registerClass('tab.CategoricalLegendItemHtmlTemplate',spiff.Template);tab.CategoricalLegendTemplate.registerClass('tab.CategoricalLegendTemplate',tab.LegendTemplate);tab.vqlui$14.registerClass('tab.vqlui$14',tab.MarksRenderer);tab.LegacyLegendView.registerClass('tab.LegacyLegendView',tab.BaseLegendView);tab.LegacyLegendTemplate.registerClass('tab.LegacyLegendTemplate',tab.LegendTemplate);tab.PageView.registerClass('tab.PageView',spiff.BaseView);tab.PageTemplate.registerClass('tab.PageTemplate',spiff.Template);tab.ShareView.registerClass('tab.ShareView',spiff.BaseView);tab.ShareTemplate.registerClass('tab.ShareTemplate',spiff.Template);tab.SimpleRegionCanvasView.registerClass('tab.SimpleRegionCanvasView',tab.VisualRegionCanvasView);tab.LogOnView.registerClass('tab.LogOnView',spiff.BaseView);tab.NotificationView.registerClass('tab.NotificationView',spiff.BaseView);tab.PaneTableCanvasView.registerClass('tab.PaneTableCanvasView',tab.VisualRegionCanvasView);tab.SubscribeView.registerClass('tab.SubscribeView',spiff.BaseView);tab.ZoneView.registerClass('tab.ZoneView',spiff.BaseView);tab.ZoneTemplate.registerClass('tab.ZoneTemplate',spiff.Template);tab.ActionExecutedEventArgs.registerClass('tab.ActionExecutedEventArgs',ss.EventArgs);tab.TextRegionView.registerClass('tab.TextRegionView',spiff.BaseView);tab.TextRegionTemplate.registerClass('tab.TextRegionTemplate',spiff.Template);tab.TiledImageViewModel.registerClass('tab.TiledImageViewModel',spiff.BaseViewModel);tab.TiledImageView.registerClass('tab.TiledImageView',spiff.BaseView,spiff.IScrollable);tab.TiledImageTemplate.registerClass('tab.TiledImageTemplate',spiff.Template);tab.ComboBoxView.registerClass('tab.ComboBoxView',spiff.BaseView);tab.ComboBoxTemplate.registerClass('tab.ComboBoxTemplate',spiff.Template);tab.ComboBoxViewModel.registerClass('tab.ComboBoxViewModel',spiff.BaseViewModel);tab.ComboBoxItem.registerClass('tab.ComboBoxItem');tab.CustomComboBoxItem.registerClass('tab.CustomComboBoxItem',tab.ComboBoxItem);tab.ComboBoxMenuTheme.registerClass('tab.ComboBoxMenuTheme',spiff.MenuViewTheme);tab.ComboBoxDropdownMenuTheme.registerClass('tab.ComboBoxDropdownMenuTheme',spiff.MenuViewTheme);tab.AuthorByline.registerClass('tab.AuthorByline',null,ss.IDisposable);tab.CategoricalFilter.registerClass('tab.CategoricalFilter',tab.FilterWidget,tab.IQuickfilterOfSearchWidget,tab.ICategoricalSelectionWidget);tab.BaseMode.registerClass('tab.BaseMode',Object,ss.IDisposable);tab.BaseDropdown.registerClass('tab.BaseDropdown',tab.BaseMode);tab.CheckDropdown.registerClass('tab.CheckDropdown',tab.BaseDropdown);tab.Checklist.registerClass('tab.Checklist',tab.BaseMode);tab.HierarchicalFilter.registerClass('tab.HierarchicalFilter',tab.FilterWidget,tab.IQuickfilterOfSearchWidget);tab.Pattern.registerClass('tab.Pattern',tab.BaseMode);tab.SimpleDropdown.registerClass('tab.SimpleDropdown',tab.BaseDropdown);tab.SliderCatmode.registerClass('tab.SliderCatmode',tab.BaseMode);tab.TypeInCatmode.registerClass('tab.TypeInCatmode',tab.BaseMode);tab.Radiolist.registerClass('tab.Radiolist',tab.BaseMode);tab.CommandExecutedEventArgs.registerClass('tab.CommandExecutedEventArgs',ss.EventArgs);tab.ConditionalsWidget.registerClass('tab.ConditionalsWidget',dijit._Widget);tab.ContinuousSlider.registerClass('tab.ContinuousSlider',spiff.BaseView);tab.vqlui$10.registerClass('tab.vqlui$10',spiff.Template);tab.CurrentPagePanel.registerClass('tab.CurrentPagePanel',dijit._Widget);tab.CustomViewsPanel.registerClass('tab.CustomViewsPanel',spiff.Widget);tab.CustomViewsViewModel.registerClass('tab.CustomViewsViewModel');tab.CustomizedViewChange.registerClass('tab.CustomizedViewChange');tab.DateFilterWidget.registerClass('tab.DateFilterWidget',tab.FilterWidget);tab.DatePicker.registerClass('tab.DatePicker',spiff.Widget);tab.DatePickerSettings.registerClass('tab.DatePickerSettings');tab.DojoWidgets.registerClass('tab.DojoWidgets');tableau.FilterItem.registerClass('tableau.FilterItem');tab.FilterItemUtil.registerClass('tab.FilterItemUtil');tab.FilterPanel.registerClass('tab.FilterPanel',dijit._Widget,ss.IDisposable);tab.FloatingZoomToolbar.registerClass('tab.FloatingZoomToolbar',spiff.Widget);tab.IteratorButtons.registerClass('tab.IteratorButtons',null,ss.IDisposable);tab.IteratorButtonTemplate.registerClass('tab.IteratorButtonTemplate',spiff.Template);tab.HorizontalIteratorButtonTemplate.registerClass('tab.HorizontalIteratorButtonTemplate',tab.IteratorButtonTemplate);tab.VerticalIteratorButtonTemplate.registerClass('tab.VerticalIteratorButtonTemplate',tab.IteratorButtonTemplate);tab.IDropDownSelect.registerClass('tab.IDropDownSelect',Object);tab.DownloadQueue.registerClass('tab.DownloadQueue');tab.vqlui$4.registerClass('tab.vqlui$4');tab.ImageDownloaderImageData.registerClass('tab.ImageDownloaderImageData');tab.ImageLoadedEventArgs.registerClass('tab.ImageLoadedEventArgs',ss.EventArgs);tab.WorkerDoneEventArgs.registerClass('tab.WorkerDoneEventArgs',ss.EventArgs);tab.WorkerTimeoutEventArgs.registerClass('tab.WorkerTimeoutEventArgs',ss.EventArgs);tab.LeafletMapControl.registerClass('tab.LeafletMapControl',null,ss.IDisposable);tab.vqlui$11.registerClass('tab.vqlui$11',spiff.Template);tab.ZoomComputer.registerClass('tab.ZoomComputer');tab.DialogUnderlay.registerClass('tab.DialogUnderlay',dijit.DialogUnderlay);tab.LegacyDialog.registerClass('tab.LegacyDialog',dijit.Dialog);tab.SearchWidgetBase.registerClass('tab.SearchWidgetBase',dijit._Widget,tab.ISearchWidget);tab.FilteringSearchWidget.registerClass('tab.FilteringSearchWidget',tab.SearchWidgetBase);tab.OverlayImage.registerClass('tab.OverlayImage',spiff.Widget,tab.IMovable);tab.OverlayPanel.registerClass('tab.OverlayPanel',spiff.Widget);tab.ParameterControl.registerClass('tab.ParameterControl',dijit._Widget);tab.ParamUIBase.registerClass('tab.ParamUIBase',Object,ss.IDisposable);tab.ParamUITypeIn.registerClass('tab.ParamUITypeIn',tab.ParamUIBase);tab.ParamUITypeInDateField.registerClass('tab.ParamUITypeInDateField',tab.ParamUITypeIn);tab.ParamUICompact.registerClass('tab.ParamUICompact',tab.ParamUIBase);tab.ParamUIList.registerClass('tab.ParamUIList',tab.ParamUIBase);tab.ParamUISlider.registerClass('tab.ParamUISlider',tab.ParamUIBase);tab.PendingChangesManager.registerClass('tab.PendingChangesManager');tab.RelativeDateFilter.registerClass('tab.RelativeDateFilter',tab.DateFilterWidget,ss.IDisposable);tab.RelativeDatePickFilter.registerClass('tab.RelativeDatePickFilter',tab.FilterWidget,ss.IDisposable);tab.SearchWidget.registerClass('tab.SearchWidget',tab.SearchWidgetBase,tab.ICategoricalSelectionWidget);tab.ShareDialog.registerClass('tab.ShareDialog',tab.LegacyDialog);tab.ShareDialogUtil.registerClass('tab.ShareDialogUtil');tab.ShownEventArgs.registerClass('tab.ShownEventArgs',ss.EventArgs);tab.Slider.registerClass('tab.Slider',null,tab.ISlider,ss.IDisposable);tab.SmallSearchWidget.registerClass('tab.SmallSearchWidget',tab.SearchWidgetBase);tab.Social.registerClass('tab.Social');tab.StepperControlView.registerClass('tab.StepperControlView',spiff.BaseView);tab.StepperControlTemplate.registerClass('tab.StepperControlTemplate',spiff.Template);tab.TabbedNavigation.registerClass('tab.TabbedNavigation',dijit._Widget);tab.TabEventArgs.registerClass('tab.TabEventArgs',ss.EventArgs);tab.TabView.registerClass('tab.TabView',spiff.Widget);tab.TiledViewerRegion.registerClass('tab.TiledViewerRegion');tab.vqlui$1.registerClass('tab.vqlui$1');tab.SimpleListContentFormatter.registerClass('tab.SimpleListContentFormatter',null,tab.IContentFormatter);tab.ChecklistContentFormatter.registerClass('tab.ChecklistContentFormatter',tab.SimpleListContentFormatter);tab.ContentFetchedEventArgs.registerClass('tab.ContentFetchedEventArgs',ss.EventArgs);tab.FetchInfo.registerClass('tab.FetchInfo');tab.FilterContentFetcher.registerClass('tab.FilterContentFetcher',null,tab.IContentFetcher);tab.FilterListUI.registerClass('tab.FilterListUI',null,tab.ITiledWidgetUI);tab.ListGridModel.registerClass('tab.ListGridModel',null,tab.ITiledGridModel);tab.RadiolistContentFormatter.registerClass('tab.RadiolistContentFormatter',tab.ChecklistContentFormatter);tab.ScrolledEventArgs.registerClass('tab.ScrolledEventArgs',ss.EventArgs);tab.TiledWidget.registerClass('tab.TiledWidget');tab.TiledWidgetFactory.registerClass('tab.TiledWidgetFactory');tab.vqlui$3.registerClass('tab.vqlui$3');tab.TiledWindow.registerClass('tab.TiledWindow',null,tab.IRegionContentProvider,spiff.IScrollable);tab.vqlui$2.registerClass('tab.vqlui$2');tab.ToggleSwitch.registerClass('tab.ToggleSwitch');tab.ToolbarButton.registerClass('tab.ToolbarButton',spiff.Widget);tab.ToolbarIconButton.registerClass('tab.ToolbarIconButton',tab.ToolbarButton);tab.ToolbarTextButton.registerClass('tab.ToolbarTextButton',tab.ToolbarButton);tab.Tooltip.registerClass('tab.Tooltip',spiff.Widget,tab.IMovable);tab.TooltipTemplate.registerClass('tab.TooltipTemplate',spiff.Template);tab.TreeSupport.registerClass('tab.TreeSupport');tab.TreeNode.registerClass('tab.TreeNode',dijit._TreeNode,ss.IDisposable);tab.Tree.registerClass('tab.Tree',dijit.Tree);tab.TypeIn.registerClass('tab.TypeIn',null,ss.IDisposable);tab.TypeInDateField.registerClass('tab.TypeInDateField',tab.TypeIn);tab.TypeInFilterContents.registerClass('tab.TypeInFilterContents',dijit._Widget);tab.Ubertip.registerClass('tab.Ubertip',spiff.Widget);tab.OnClickOverride.registerClass('tab.OnClickOverride',dijit.MenuItem);tab.UIMenuItem.registerClass('tab.UIMenuItem',tab.OnClickOverride);tab.IMenuItem.registerClass('tab.IMenuItem',tab.UIMenuItem);tab.UICheckedMenuItem.registerClass('tab.UICheckedMenuItem',tab.OnClickOverride);tab.ViewingToolbar.registerClass('tab.ViewingToolbar',null,ss.IDisposable);tab.WidgetStyle.registerClass('tab.WidgetStyle');tab.FormattingStyleInfo.registerClass('tab.FormattingStyleInfo');tab.DisabledTooltipBehavior.registerClass('tab.DisabledTooltipBehavior',null,tab.ITooltipBehavior,ss.IDisposable);tab.TooltipBaseMode.registerClass('tab.TooltipBaseMode');tab.TooltipContextProvider.registerClass('tab.TooltipContextProvider');tab.TooltipDisabledMode.registerClass('tab.TooltipDisabledMode',tab.TooltipBaseMode);tab.TooltipBaseLegacyMode.registerClass('tab.TooltipBaseLegacyMode',tab.TooltipBaseMode);tab.TooltipResponsiveMode.registerClass('tab.TooltipResponsiveMode',tab.TooltipBaseMode);tab.SmoothTooltipBehavior.registerClass('tab.SmoothTooltipBehavior',null,tab.ITooltipBehavior,ss.IDisposable);tab.NotificationCommandRedirectHandler.registerClass('tab.NotificationCommandRedirectHandler');tab.ReferenceLineConstantValueQuickEditCommandRedirectHandler.registerClass('tab.ReferenceLineConstantValueQuickEditCommandRedirectHandler');tab.ConfirmationCommandRedirectHandler.registerClass('tab.ConfirmationCommandRedirectHandler');tab.ShapeSelectorBase.registerClass('tab.ShapeSelectorBase');tab.CircleShapeSelector.registerClass('tab.CircleShapeSelector',tab.ShapeSelectorBase);tab.ShapeStateBase.registerClass('tab.ShapeStateBase');tab.CircleShapeState.registerClass('tab.CircleShapeState',tab.ShapeStateBase);tab.PolyShapeSelector.registerClass('tab.PolyShapeSelector',tab.ShapeSelectorBase);tab.PolyShapeState.registerClass('tab.PolyShapeState',tab.ShapeStateBase);tab.RectShapeSelector.registerClass('tab.RectShapeSelector',tab.ShapeSelectorBase);tab.RectShapeState.registerClass('tab.RectShapeState',tab.ShapeStateBase);tab.PresModelBrowserViewModel.registerClass('tab.PresModelBrowserViewModel',spiff.BaseViewModel);tab.StepperControlViewModel.registerClass('tab.StepperControlViewModel',spiff.BaseViewModel);tab.MapsSearchViewModel.registerClass('tab.MapsSearchViewModel',spiff.BaseViewModel);tab.MapsSearchView.registerClass('tab.MapsSearchView',spiff.BaseView);tab.vqlui$13.registerClass('tab.vqlui$13',spiff.Template,tab.IMapsSearchViewTemplate,ss.IDisposable);tab.FormattingConverters.$0=[new ss.Tuple('thin','100'),new ss.Tuple('extra-light','200'),new ss.Tuple('extra light','200'),new ss.Tuple('light','300'),new ss.Tuple('normal','400'),new ss.Tuple('regular','400'),new ss.Tuple('book','400'),new ss.Tuple('medium','500'),new ss.Tuple('demi-bold','600'),new ss.Tuple('semi-bold','600'),new ss.Tuple('demi','600'),new ss.Tuple('bold','700'),new ss.Tuple('heavy','800'),new ss.Tuple('black','900')];tab.FormattingConverters.$1=[new ss.Tuple('compressed','extra-condensed'),new ss.Tuple('narrow','condensed'),new ss.Tuple('condensed','condensed')];tab.FormattingConverters.$2=[new ss.Tuple('italic','italic')];tab.Application.$0=null;tab.Application.$1=false;tab.Application.$9=null;tab.Application.$A=null;tab.ExportPdfDialog.$3_0=null;(function(){spiff.ObjectRegistry.registerType(tab.ExportPdfDialog,tab.ExportPdfDialog);})();
tab.SheetThumbnailTemplate.template="\n<li class='tab-pdfdlg-sheet'>\n    <button class='tab-pdfdlg-thumbnail-button'>\n        <span class='tab-pdfdlg-button-icon tab-pdfdlg-thumbnail'></span>\n        <div class='tab-pdfdlg-note'></div>\n    </button>\n</li>";tab.ExportPdfDialogTemplate.template="\n<div class='tab-pdfdlg-body'>\n    <div class='tab-pdfdlg-select-group'>\n        <div class='pdf-only tab-pdfdlg-selector'>\n            <label for='pdfdlgPageSize'>{0}:</label><br />\n            <select id='pdfdlgPageSize' name='pageSize'></select>\n        </div>\n        <div class='png-only tab-pdfdlg-selector'>\n            <label for='pdfdlgImageSize'>{1}:</label><br />\n            <input name='imageHeight'></input>\n            <input name='imageWidth'></input>\n        </div>\n        <div class='tab-pdfdlg-selector'>\n            <label for='pdfdlgScaling'>{2}:</label><br />\n            <select id='pdfdlgScaling' name='scaling'></select>\n        </div>\n    </div>\n    <h3 class='pdf-only'>{3}:</h3>\n    <div class='tab-pdfdlg-button-group tab-pdfdlg-group-orientation'>\n        <button class='left pdf-only' name='orientation' value='portrait'>\n            <span class='tab-pdfdlg-portrait-icon tab-pdfdlg-button-icon'></span>\n            <div class='tab-pdfdlg-note'>{4}</div>\n        </button><button class='right pdf-only' name='orientation' value='landscape'>\n            <span class='tab-pdfdlg-landscape-icon tab-pdfdlg-button-icon'></span>\n            <div class='tab-pdfdlg-note'>{5}</div>\n        </button>\n    </div>\n    <h3>{6}:</h3>\n    <div>\n        <div class='tab-pdfdlg-button-group tab-pdfdlg-dashboard-content-mode'>\n            <button class='selected left' name='dashboard-content' value='dashboard'>\n                <span class='tab-pdfdlg-dashboard-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{8}</div>\n            </button><button class='' name='dashboard-content' value='all-dashboard'>\n                <span class='tab-pdfdlg-dash-sheets-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{7}</div>\n            </button><button class='right' name='dashboard-content' value='all'>\n                <span class='tab-pdfdlg-workbook-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{9}</div>\n            </button>\n        </div>\n        <div class='tab-pdfdlg-button-group tab-pdfdlg-story-content-mode'>\n            <button class='left selected' name='story-content' value='this-sheet'>\n                <span class='tab-pdfdlg-story-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{12}</div>\n            </button><button class='right' name='story-content' value='all'>\n                <span class='tab-pdfdlg-workbook-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{9}</div>\n            </button>\n        </div>\n        <div class='tab-pdfdlg-button-group tab-pdfdlg-worksheet-content-mode'>\n            <button class='left selected' name='worksheet-content' value='this-sheet'>\n                <span class='tab-pdfdlg-worksheet-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{10}</div>\n            </button><button class='right' name='worksheet-content' value='all'>\n                <span class='tab-pdfdlg-workbook-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{9}</div>\n            </button>\n        </div>\n    </div>\n    <h3>{11}:</h3>\n    <div class='tab-pdfdlg-sheets-container'>\n        <ul class='tab-pdfdlg-sheet-list'></ul>\n    </div>\n    <div class='tab-dialog-footer'>\n        <div class='tab-pdfdlg-status'>\n            <img class='tab-pdfdlg-spinner' src='/images/30x30REV.gif' />\n            <span class='tab-dialog-status-msg'></span>\n        </div>\n        <div class='tab-dialog-actions'></div>\n    </div>\n</div>";tab.VizEvent.$0=null;tab.VizEvent.$1=null;tab.BrowserViewport.$0=null;tab.BrowserViewport.$2=null;tab.BrowserViewport.$3=false;(function(){if(tabBootstrap.Utility.get_embedMode()==='embeddedNotInWg'){if(ss.isValue(window.addEventListener)){window.self.addEventListener('message',tab.BrowserViewport.$8,false);}else{window.self.attachEvent('onmessage', tab.BrowserViewport.$8);}tab.BrowserViewport.$3=true;}if(tab.BrowserSupport.get_isIE()){tab.BrowserViewport.$C();}})();
tab.GeometryUtil.halfPI=0.5*Math.PI;tab.GeometryUtil.onePI=Math.PI;tab.GeometryUtil.oneAndHalfPI=1.5*Math.PI;tab.GeometryUtil.twoPI=2*Math.PI;tab.GeometryUtil.$0=Math.PI*0.15;tab.HitTestDebugger.$0=null;tab.HitTestDebugger.$1=0;tab.VisualPartsHitTest.visualPartNearHitTestExpansionPixels=7;tab.HitTargetColliders.simpleRectangleCollider=null;(function(){tab.HitTargetColliders.simpleRectangleCollider=function($p1_0,$p1_1){
var $1_0=$p1_0.get_geom().x;var $1_1=$p1_0.get_geom().x+$p1_0.get_geom().w;var $1_2=$p1_0.get_geom().y;var $1_3=$p1_0.get_geom().y+$p1_0.get_geom().h;var $1_4=$p1_1.x;var $1_5=$p1_1.x+$p1_1.w;var $1_6=$p1_1.y;var $1_7=$p1_1.y+$p1_1.h;if($1_3<$1_6){return false;}if($1_2>$1_7){return false;}if($1_1<$1_4){return false;}if($1_0>$1_5){return false;}return true;};})();
tab.PaneDrawInfo.renderPassOrder=['normalUnderPass','normalOnPass','highlightedUnderPass','highlightedOnPass','selectedUnderPass','selectedOnPass'];tab.PaneDrawInfo.drawRoleOrder=['background','marks','underLabel','label','foreground'];tab.PaneDrawInfo.shapeMapping={'0':'shapeIDCircle','1':'shapeIDSquare','2':'shapeIDPlus','3':'shapeIDTimes','4':'shapeIDAsterisk','5':'shapeIDDiamond','6':'shapeIDTriangle','7':'shapeIDDownTriangle','8':'shapeIDLeftTriangle','9':'shapeIDRightTriangle','4194304':'shapeIDFilledCircle','4194305':'shapeIDFilledSquare','4194306':'shapeIDFilledPlus','4194307':'shapeIDFilledTimes','4194308':'shapeIDFilledStar','4194309':'shapeIDFilledDiamond','4194310':'shapeIDFilledTriangle','4194311':'shapeIDFilledDownTriangle','4194312':'shapeIDFilledLeftTriangle','4194313':'shapeIDFilledRightTriangle','-4194304':'shapeIDUnscaledFilledCircle'};tab.PaneDrawInfo.$B='color'+'_idx';tab.PaneDrawInfo.$13=['font','font_size','font_style','font_weight'];tab.PaneDrawInfo.$14=['color','border_color','halo_color','selected_halo_color','highlighted_halo_color','selected_multi_prim_halo_color','text_style_color','background_color'];tab.PaneDrawInfo.$15=['x','x1','x_prev','x_next','cell_x'];tab.PaneDrawInfo.$16=['clip_width'];tab.PaneDrawInfo.$17=['y','y1','y_prev','y_next','cell_y'];tab.PaneDrawInfo.$18=['clip_height'];tab.PaneDrawInfo.$19=null;tab.PaneDrawInfo.$1A=null;tab.PaneDrawInfo.$1B={theta:tab.$create_PointF(0,1),theta1:tab.$create_PointF(0,1),size:tab.$create_PointF(0,4096),text_run_x:tab.$create_PointF(0,4096),text_run_direction_x:tab.$create_PointF(0,4096),text_run_y:tab.$create_PointF(0,4096),text_run_direction_y:tab.$create_PointF(0,4096)};(function(){tab.PaneDrawInfo.$19={};tab.PaneDrawInfo.$19['enable-pan-x']=1<<0;tab.PaneDrawInfo.$19['enable-pan-y']=1<<1;tab.PaneDrawInfo.$19['enable-zoom-x']=1<<2;tab.PaneDrawInfo.$19['enable-zoom-y']=1<<3;tab.PaneDrawInfo.$19['enable-scale-x']=1<<4;tab.PaneDrawInfo.$19['enable-scale-y']=1<<5;tab.PaneDrawInfo.$19['clip-to-cell-x']=1<<6;tab.PaneDrawInfo.$19['clip-to-cell-y']=1<<7;tab.PaneDrawInfo.$19['clip-to-cell-for-selection']=1<<8;tab.PaneDrawInfo.$19['x-axis-on-top']=1<<9;tab.PaneDrawInfo.$19['y-axis-on-right']=1<<10;tab.PaneDrawInfo.$19['has-cells-x']=1<<11;tab.PaneDrawInfo.$19['has-cells-y']=1<<12;tab.PaneDrawInfo.$1A={};tab.PaneDrawInfo.$1A['end']=1<<0;tab.PaneDrawInfo.$1A['endprimitive']=1<<1;tab.PaneDrawInfo.$1A['closedprimitive']=1<<2;tab.PaneDrawInfo.$1A['marked']=1<<3;tab.PaneDrawInfo.$1A['markediflabel']=1<<4;tab.PaneDrawInfo.$1A['debug']=1<<7;tab.PaneDrawInfo.$1A['user']=1<<16;var $enum1=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.$15);while($enum1.moveNext()){var $0=$enum1.current;tab.PaneDrawInfo.$1B[$0]=tab.$create_PointF(0,0);}var $enum2=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.$17);while($enum2.moveNext()){var $1=$enum2.current;tab.PaneDrawInfo.$1B[$1]=tab.$create_PointF(0,0);}})();
tab.CanvasRenderer.halfPI=0.5*Math.PI;tab.CanvasRenderer.onePI=Math.PI;tab.CanvasRenderer.oneAndHalfPI=1.5*Math.PI;tab.CanvasRenderer.twoPI=2*Math.PI;tab.CanvasRenderer.angleEpsilon=0.000174;tab.DisplayList2DRenderer.$14=['x-labels','bottom-axis','top-axis'];tab.DisplayList2DRenderer.$15=['y-labels','left-axis','right-axis'];tab.FontNormalizer.$0=null;tab.FontNormalizer.$1=null;tab.TabRenderContext2D.defaultColor='rgb(0,0,0)';tab.TabRenderContext2D.defaultLinePattern='solid';tab.TabRenderContext2D.defaultLineDashDashed=[3,1];tab.TabRenderContext2D.defaultLineDashDotted=[1,1];tab.TabRenderContext2D.defaultLineWidth=1;tab.TabRenderContext2D.defaultLineJoin='bevel';tab.TabRenderContext2D.defaultLineCap='butt';tab.TabRenderContext2D.defaultTextColor='rgb(0,0,0)';tab.TabRenderContext2D.defaultTextBaseline='alphabetic';tab.TabRenderContext2D.defaultTextAlign='start';tab.TabRenderContext2D.defaultTextAngle=0;tab.TabRenderContext2D.defaultFontName='Arial';tab.TabRenderContext2D.defaultFontSize=8;tab.TabRenderContext2D.defaultTextUnderline=false;tableau.util.$0=[];tableau.util.bIsAnimationShown=false;tableau.util.has3D=window.WebKitCSSMatrix !== undefined && new WebKitCSSMatrix().m11 !== undefined;(function(){if(tab.BrowserSupport.get_isMac()){dojo.addClass(document.documentElement,'tb_mac');}})();
tab.ReferenceLineConstantValueEditorViewModel.$1_1=null;tab.ShareViewModel.currentViewPath='/shared/';tab.ShareViewModel.$1_0='http://facebook.com';tab.QuantitativeColorLegendViewModel.modelChangedProperty='ModelChanged';tab.LegendBaseViewModel.horizontalIteratorButtonSize=12;tab.LegendBaseViewModel.horizontalIteratorButtonHolderWidth=2*(12+2);tab.LegendBaseViewModel.parentZoneSizeChangedKey='ParentZoneSizeChanged';tab.LegendBaseViewModel.newZoneParentKey='newZoneParent';tab.CategoricalLegendViewModel.$1_8=new tab.ColorModel(0,0,0,1);tab.PaneTableViewModel.blackListVisualParts=['left-axis','right-axis','y-labels','x-labels','top-axis','bottom-axis','title','caption'];tab.SubscribeViewModel.modeEmail=0;tab.SubscribeViewModel.modeSubscribe=1;tab.ViewingToolbarCommands.$0=new RegExp('^https?://[^/]+(.*)$');tab.VisualListViewModel.propertyHoverNode='HoverNode';tab.ZoneViewModel.isActiveZonePropertyName='isActiveZone';tab.AccordionViewModel.propertyActiveItem='ActiveItem';tab.AccordionViewModel.propertyAllItems='AllItems';(function(){spiff.ObjectRegistry.registerType(tab.DownloadView,tab.DownloadView);})();
tab.DownloadTemplate.$1_0="<div class='tab-downloadView tab-toolbarFlyout'>"+"<div class='tab-downloadApplication'>"+"<div class='tab-explanationTitle' />"+"<div class='tab-explanationBody' />"+"<div class='tab-downloadAction'>"+"<div class='tab-availablePlatforms' />"+"<div class='tab-downloadAppButton' />"+'</div>'+'</div>'+"<div class='tab-downloadSeparator' />"+"<div class='tab-downloadButtons'>"+'</div>'+'</div>';tab.vqlui$12.$1_0="<div class='refLineConstantValueEditor'>"+"<span class='refLineConstantValueEditorTitle'></span>"+"<span><input class='refLineConstantValueEditorInput' type='text'/></span>"+'</div>';tab.ToolbarButtonTemplate.$1_1="\n<div class='tabToolbarButton'>\n    <span class='"+'tabToolbarButtonImg'+"' />\n    <span class='tabToolbarButtonText' />\n</div>";(function(){spiff.ObjectRegistry.registerType(tab.WorkbookView,tab.WorkbookView);})();
tab.BaseLegendView.controlsMargin=2;tab.LegendTemplate.legendHighlighterClass='tabLegendHighlighter';tab.LegendTemplate.legendHighlighterSelector='.'+'tabLegendHighlighter';(function(){spiff.ObjectRegistry.registerType(tab.ConfirmationView,tab.ConfirmationView);})();
(function(){spiff.ObjectRegistry.registerType(tab.ApplicationView,tab.ApplicationView);})();
(function(){spiff.ObjectRegistry.registerType(tab.StoryPointCaptionView,tab.StoryPointCaptionView);})();
tab.StoryPointCaptionTemplate.$1_0="<span class='tabStoryPoint'>\n"+"<div class='tabStoryPointToolbar'><div class='tabStoryRevert'></div></div>\n"+"<div class='tabStoryPointCaption tabUnformattedStoryPoint'>"+"<div class='tabStoryPointCaptionTop'/><div class='tabStoryPointCaptionBottom'/>"+'</div></span>';(function(){spiff.ObjectRegistry.registerType(tab.DashboardView,tab.DashboardView);})();
tab.FlipboardNavigatorView.storyPointToolbarHeight=20;tab.FlipboardNavigatorView.formattedStoryPointSelector='.tabFormattedFlipboardNav .tabFlipboardNavScroller '+'.tabScroller .tabScrollerContent .tabFlipboardNavPoints .tabStoryPoint';tab.FlipboardNavigatorView.selectedStoryPointBoxSelector='.tabStoryPointCaption.tabFormattedStoryPoint.tabCurrent';tab.FlipboardNavigatorView.unselectedStoryPointBoxSelector='.tabStoryPointCaption.tabFormattedStoryPoint';tab.FlipboardNavigatorView.selectedStoryPointTextSelector='.tabStoryPointCaption.tabFormattedStoryPoint.tabCurrent'+' .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent';tab.FlipboardNavigatorView.unselectedStoryPointTextSelector='.tabStoryPointCaption.tabFormattedStoryPoint'+' .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent';tab.FlipboardNavigatorView.selectedStoryPointNativeScrollerTopBottomSelector='.tabStoryPointCaption.tabFormattedStoryPoint.tabCurrent .tabStoryPointCaptionTop,'+'.tabStoryPointCaption.tabFormattedStoryPoint.tabCurrent .tabStoryPointCaptionBottom';tab.FlipboardNavigatorView.unselectedStoryPointNativeScrollerTopBottomSelector='.tabStoryPointCaption.tabFormattedStoryPoint .tabStoryPointCaptionTop,'+'.tabStoryPointCaption.tabFormattedStoryPoint .tabStoryPointCaptionBottom';tab.FlipboardNavigatorView.selectedStoryPointNativeScrollerTextSelector='.tabStoryPointCaption.tabFormattedStoryPoint.tabCurrent'+' .tabScroller .tabScrollerContent .tabStoryPointContent';tab.FlipboardNavigatorView.unselectedStoryPointNativeScrollerTextSelector='.tabStoryPointCaption.tabFormattedStoryPoint'+' .tabScroller .tabScrollerContent .tabStoryPointContent';tab.FlipboardNavigatorView.storyStyleSheetId='appendedStoryStyle';(function(){spiff.ObjectRegistry.registerType(tab.FlipboardNavigatorView,tab.FlipboardNavigatorView);})();
tab.FlipboardNavigatorTemplate.$1_0="<div class='tabFlipboardNav tabUnformattedFlipboardNav'>"+"<span class='tabFlipboardNavPrevious'><div class='tabStoryLeftArrow'/></span>"+"<span class='tabFlipboardNavScroller'/><span class='tabFlipboardNavNext'><div class='tabStoryRightArrow'/></span>"+'</div>';tab.FlipboardView.scrollBarThickness=24;(function(){spiff.ObjectRegistry.registerType(tab.FlipboardView,tab.FlipboardView);})();
tab.PaneTableView.suppressVizTooltipsAndOverlays='tabSuppressVizTooltipsAndOverlays';tab.PaneTableView.scrollableXRegions=['xheader','bottomaxis','topaxis','viz'];tab.PaneTableView.scrollableYRegions=['yheader','leftaxis','rightaxis','viz'];tab.PaneTableView.headerRegions=['yheader','xheader','leftaxis','rightaxis','bottomaxis','topaxis','uleft','uright'];tab.PaneTableTemplate.$1_0="<div class='tvViewportBorder tvLeftBorder' />"+"<div class='tvViewportBorder tvRightBorder' />"+"<div class='tvViewportBorder tvTopBorder' />"+"<div class='tvViewportBorder tvBottomBorder' />";tab.MapAttributionTemplate.$1_0="<div class='tabMapAttribution'>"+"<div class='tabMapAttributionBackground' />"+"<a class='tabMapAttributionLink'></a>"+'</div>';(function(){spiff.ObjectRegistry.registerType(tab.ParameterControlView,tab.ParameterControlView);})();
(function(){spiff.ObjectRegistry.registerType(tab.QuickFilterDisplayView,tab.QuickFilterDisplayView);})();
(function(){spiff.ObjectRegistry.registerType(tab.ToolbarView,tab.ToolbarView);})();
tab.CategoricalLegendView.$2_8=new tab.ColorModel(216,216,216,1);tab.CategoricalLegendView.$2_9=new tab.ColorModel(178,178,178,1);tab.CategoricalLegendTemplate.$1_0="<div class='"+'tabLegendHighlighter'+"'/>";(function(){spiff.ObjectRegistry.registerType(tab.PageView,tab.PageView);})();
(function(){spiff.ObjectRegistry.registerType(tab.ShareView,tab.ShareView);})();
tab.ShareTemplate.linkTemplate="\n            <div class='tab-shareLinkSection'>\n                <span class='tab-shareLinkTitle tab-shareTitle'/>\n                <input class='tab-shareLinkInput tab-shareInput' type='text'/>\n                <div class='tab-shareLinkSocial'/>\n            </div>";tab.ShareTemplate.embedTemplate="\n            <div class='tab-shareEmbedSection'>\n                <span class='tab-shareEmbedTitle tab-shareTitle'/>\n                <input class='tab-shareEmbedInput tab-shareInput'/>\n            </div>";tab.ShareTemplate.viewStateTemplate="\n            <div class='tab-shareViewStateSection'>\n                <span class='tab-shareCurrentView tab-shareViewToggle'/><span class='tab-shareOriginalView tab-shareViewToggle'/>\n            </div>";tab.LogOnView.$2_0=null;(function(){spiff.ObjectRegistry.registerType(tab.LogOnView,tab.LogOnView);})();
(function(){spiff.ObjectRegistry.registerType(tab.NotificationView,tab.NotificationView);})();
tab.SubscribeView.minPanelDistanceFromEdge=10;(function(){spiff.ObjectRegistry.registerType(tab.SubscribeView,tab.SubscribeView);})();
tab.ZoneView.$2_1=['bitmap','text','layout-free-form','empty','map','color','size','shape'];tab.ZoneView.$2_2=['bitmap','color','shape','size','map','text','text-block','web','paramctrl','filter','empty','current-page'];(function(){spiff.ObjectRegistry.registerType(tab.ZoneView,tab.ZoneView);})();
tab.ZoneTemplate.$1_0="<div class='tab-zone'>"+"<div class='wcHighlight wcHighlightTop'/>"+"<div class='wcHighlight wcHighlightBottom'/>"+"<div class='wcHighlight wcHighlightLeft'/>"+"<div class='wcHighlight wcHighlightRight'/>"+'</div>';tab.Checklist.getFilterItemHtml=tableau.FilterItem.formatChecklistFilterItemHtml;tab.HierarchicalFilter.$1_6=new tab.ColorModel(255,255,255,1);tab.HierarchicalFilter.$1_7=60/255;tab.HierarchicalFilter.$1_8=105/255;tab.HierarchicalFilter.$1_9=100/255;tab.HierarchicalFilter.$1_A=140/255;tab.HierarchicalFilter.$1_C=new tab.ColorModel(234,234,234,1);tab.HierarchicalFilter.$1_D=new tab.ColorModel(241,241,241,1);(function(){spiff.ObjectRegistry.registerType(tab.ContinuousSlider,tab.ContinuousSlider);})();
tab.vqlui$10.$1_0="<div class='tabHorizontalSlider'>\n</div>'";tab.CustomViewsPanel.minPanelWidth=200;tab.CustomViewsPanel.minPanelHeight=200;tab.CustomViewsPanel.minPanelDistanceFromEdge=10;tab.CustomViewsPanel.spacing=7;tab.CustomViewsPanel.log=tab.Logger.getLogger(tab.CustomViewsPanel);tab.CustomViewsViewModel.modeSelect=0;tab.CustomViewsViewModel.modeManage=1;tab.CustomViewsViewModel.$0=tab.Logger.getLogger(tab.CustomViewsViewModel);tab.DojoWidgets.$0="<div class='CategoricalFilter'>"+"<div class='CategoricalFilterBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='FilterTitle' dojoAttachPoint='domTitleBar'></div>"+"<div dojoType='dijit.form.Button' class='CFButton CFResetButton' showlabel='false'"+"dojoAttachPoint='resetButton' dojoAttachEvent='onClick:toggleReset'"+"iconClass='wcIconNonfiltered'>Showing all values</div>"+"<div dojoType='dijit.form.Button' class='CFButton CFSearchButton' showlabel='false'"+"dojoAttachPoint='searchButton' dojoAttachEvent='onClick:toggleSearchUI'"+"iconClass='wcIconSearch'>Search</div>"+"<div dojoType='dijit.form.Button' class='CFButton CFDomainButton' showlabel='false'"+"dojoAttachPoint='domainButton' dojoAttachEvent='onClick:toggleDomain'"+"iconClass='wcIconDomainAll'>Show Fewer Values</div>"+"<div dojoType='dijit.form.Button' dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'"+"class='CFButton CFMenuButton' dojoAttachPoint='menuButton' name='type'></div>"+'</div>'+"<div dojoAttachPoint='searchDiv'></div>"+"<div class='CFContent' dojoAttachPoint='domContent'></div>"+"<div class='CFHorizScroll' dojoAttachPoint='domHorizScroll' dojoAttachEvent='onscroll:doscrollHoriz'>"+"<div dojoAttachPoint='domHorizScrollContent'></div>"+'</div>'+"<div dojoType='tableau.base.widget.ConditionalsWidget' dojoAttachPoint='conditionals'></div>"+'</div>'+'</div>';tab.DojoWidgets.$1="<div class='ParameterControl'>"+"<div class='ParameterControlBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='ParamTitle' dojoAttachPoint='domTitleBar'></div>"+'</div>'+"<div class='PCContent' dojoAttachPoint='domContent'></div>"+'</div>'+'</div>';tab.DojoWidgets.$2="<div class='Search'>"+"<div class='SearchBox' dojoAttachPoint='domQuerySection'>"+"<textarea rows='1' class='QueryBox' spellcheck='false'"+"dojoAttachPoint='domQueryBox'"+"dojoAttachEvent='onkeydown:onQueryBoxKeyDown,onpaste:onQueryBoxPaste'></textarea>"+"<span class='wcSearchX' title='${XBUTTON_CLOSE_TOOLTIP}'"+"dojoAttachPoint='domXButton'"+"dojoAttachEvent='onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+"<img class='searchBusyImg' title='${CANCEL_SEARCH_TOOLTIP}' src='${busy_gif_url}'"+"dojoAttachPoint='domSearchBusyImg'"+"dojoAttachEvent='onclick:onSearchBusyImgClick'></img>"+"<span class='wcIconSearch' title='${SEARCH_TOOLTIP}'"+"dojoAttachPoint='domSearchButton'"+"dojoAttachEvent='onclick:onSearchButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+"<span class='wcIconSearchAdd' title='${ADD_ITEM_CTRL_ENTER}'"+"dojoAttachPoint='domSearchAddButton'"+"dojoAttachEvent='onclick:onSearchAddButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+'</div>'+"<div class='SearchResults' dojoAttachPoint='domResults' dojoAttachEvent='onclick:onListItemClick'></div>"+'</div>';(function(){dojo.require('tableau.base.BaseClient');var $0=null;$0=[dijit._Widget];dojo.declare('tableau.base.widget.FilterWidget',$0,(tab.FilterWidget).prototype);$0=[tableau.base.widget.FilterWidget];dojo.declare('tableau.base.widget.DateFilterWidget',$0,(tab.DateFilterWidget).prototype);$0=[tableau.base.widget.FilterWidget,dijit._Contained,dijit._Templated];(tab.CategoricalFilter).prototype.templateString=tab.DojoWidgets.$0;dojo.declare('tableau.base.widget.CategoricalFilter',$0,(tab.CategoricalFilter).prototype);$0=[dijit._Widget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.ConditionalsWidget',$0,(tab.ConditionalsWidget).prototype);$0=[dijit.layout._LayoutWidget,dijit._Templated];dojo.declare('tableau.base.widget.TabbedNavigation',$0,(tab.TabbedNavigation).prototype);$0=[dijit.layout._LayoutWidget,dijit._Templated];dojo.declare('tableau.base.widget.CurrentPagePanel',$0,(tab.CurrentPagePanel).prototype);dojo.declare('tableau.base.widget.catmode.BaseMode',[dijit._Contained],(tab.BaseMode).prototype);dojo.declare('tableau.base.widget.catmode.Checklist',[tableau.base.widget.catmode.BaseMode],(tab.Checklist).prototype);dojo.declare('tableau.base.widget.catmode.BaseDropdown',[tableau.base.widget.catmode.BaseMode],(tab.BaseDropdown).prototype);dojo.declare('tableau.base.widget.catmode.SimpleDropdown',[tableau.base.widget.catmode.BaseDropdown],(tab.SimpleDropdown).prototype);dojo.declare('tableau.base.widget.catmode.CheckDropdown',[tableau.base.widget.catmode.BaseDropdown],(tab.CheckDropdown).prototype);dojo.declare('tableau.base.widget.catmode.Pattern',[tableau.base.widget.catmode.BaseMode],(tab.Pattern).prototype);dojo.declare('tableau.base.widget.catmode.Slider',[tableau.base.widget.catmode.BaseMode],(tab.SliderCatmode).prototype);dojo.declare('tableau.base.widget.catmode.TypeIn',[tableau.base.widget.catmode.BaseMode],(tab.TypeInCatmode).prototype);dojo.declare('tableau.base.widget.catmode.Radiolist',[tableau.base.widget.catmode.BaseMode],(tab.Radiolist).prototype);dojo.declare('tableau.base.widget.ui.iDropDownSelect',[dojox.form.DropDownSelect],(tab.IDropDownSelect).prototype);dojo.declare('tableau.base.widget.ui.Slider',new Array(0),(tab.Slider).prototype);dojo.declare('tableau.base.widget.ui.TypeIn',new Array(0),(tab.TypeIn).prototype);dojo.declare('tableau.base.widget.ui.TypeInDateField',[tab.TypeIn],(tab.TypeInDateField).prototype);dojo.declare('tableau.base.widget.ui.onClickOverride',null,(tab.OnClickOverride).prototype);dojo.declare('tableau.base.widget.ui.iMenuItem',[dijit.MenuItem,tab.OnClickOverride],(tab.UIMenuItem).prototype);dojo.declare('tableau.base.widget.ui.iCheckedMenuItem',[dijit.CheckedMenuItem,tab.OnClickOverride],(tab.UICheckedMenuItem).prototype);dojo.declare('tableau.base.widget.hsm.TreeModel',null,(tab.TreeSupport).prototype);dojo.declare('tableau.base.widget.hsm.Tree',[dijit.Tree],(tab.Tree).prototype);dojo.declare('tableau.base.widget.hsm._TreeNode',[dijit._TreeNode],(tab.TreeNode).prototype);$0=[tableau.base.widget.FilterWidget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.HierarchicalFilter',$0,(tab.HierarchicalFilter).prototype);$0=[tableau.base.widget.FilterWidget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.QuantitativeFilter',$0,(tab.QuantitativeFilter).prototype);$0=[tableau.base.widget.DateFilterWidget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.RelativeDateFilter',$0,(tab.RelativeDateFilter).prototype);$0=[tableau.base.widget.FilterWidget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.RelativeDatePickFilter',$0,(tab.RelativeDatePickFilter).prototype);$0=[tableau.base.widget.QuantitativeFilter];dojo.declare('tableau.base.widget.QuantitativeDateFilter',$0,(tab.QuantitativeDateFilter).prototype);$0=[dijit._Widget,dijit._Templated];(tab.ParameterControl).prototype.templateString=tab.DojoWidgets.$1;dojo.declare('tableau.base.widget.ParameterControl',$0,(tab.ParameterControl).prototype);dojo.declare('tableau.base.widget.paramui.Base',[dijit._Contained],(tab.ParamUIBase).prototype);dojo.declare('tableau.base.widget.paramui.TypeIn',[tableau.base.widget.paramui.Base],(tab.ParamUITypeIn).prototype);dojo.declare('tableau.base.widget.paramui.TypeInDateField',[tab.ParamUITypeIn],(tab.ParamUITypeInDateField).prototype);dojo.declare('tableau.base.widget.paramui.Compact',[tableau.base.widget.paramui.Base],(tab.ParamUICompact).prototype);dojo.declare('tableau.base.widget.paramui.List',[tableau.base.widget.paramui.Base],(tab.ParamUIList).prototype);dojo.declare('tableau.base.widget.paramui.Slider',[tableau.base.widget.paramui.Base],(tab.ParamUISlider).prototype);$0=[dijit._Widget,dijit._Templated,dijit._Contained];dojo.declare('tableau.base.widget.SearchWidgetBase',$0,(tab.SearchWidgetBase).prototype);$0=[tableau.base.widget.SearchWidgetBase];(tab.SearchWidget).prototype.templateString=tab.DojoWidgets.$2;dojo.declare('tableau.base.widget.SearchWidget',$0,(tab.SearchWidget).prototype);dojo.declare('tableau.base.widget.SmallSearchWidget',[tableau.base.widget.SearchWidgetBase],(tab.SmallSearchWidget).prototype);dojo.declare('tableau.base.widget.FilteringSearchWidget',[tableau.base.widget.SearchWidgetBase],(tab.FilteringSearchWidget).prototype);$0=[dijit._Widget,dijit._Templated,dijit._Contained];dojo.declare('tableau.base.widget.TypeInFilterContents',$0,(tab.TypeInFilterContents).prototype);$0=[dijit.layout._LayoutWidget,dijit._Templated];dojo.declare('tableau.base.widget.FilterPanel',$0,(tab.FilterPanel).prototype);$0=[dijit.DialogUnderlay];dojo.declare('tableau.base.widget.DialogUnderlay',$0,(tab.DialogUnderlay).prototype);$0=[dijit.Dialog];dojo.declare('tableau.base.widget.Dialog',$0,(tab.LegacyDialog).prototype);$0=[tableau.base.widget.Dialog];dojo.declare('tableau.base.widget.ShareDialog',$0,(tab.ShareDialog).prototype);})();
tab.FilterItemUtil.unknownItemIndex=-2;tab.FilterItemUtil.allItemIndex=-1;tab.FilterItemUtil.$0=tab.Strings.QuickFilterAll;tab.HorizontalIteratorButtonTemplate.$1_1="<div class='tabCatLegendScrollButtonHolder'>"+"<span class='tabCatLegendScrollPrev'/>"+"<span class='tabCatLegendScrollNext'/>"+'</div>';tab.VerticalIteratorButtonTemplate.$1_1="<div class='tabCatLegendScrollButtonHolder'>"+"<span class='tabCatLegendScrollPrev'/>"+'<br>'+"<span class='tabCatLegendScrollNext'/>"+'</div>';tab.LeafletMapControl.$6=tab.$create_Point(1,1);tab.LeafletMapControl.$7=new ss.Tuple(90,0);tab.LeafletMapControl.$8=new ss.Tuple(-90,0);tab.vqlui$11.$1_3='<div>'+"<div class='tabLeafletMapHolder' />"+"<div class='tabLeftBarnDoor' />"+"<div class='tabRightBarnDoor' />"+'</div>';tab.FilteringSearchWidget.minimumDomainSize=5;tab.RelativeDateFilter.$1_8=null;tab.RelativeDateFilter.$1_9=null;tab.RelativeDatePickFilter.pickerDurationsInteger=[1,7,30,90,365,1825];tab.RelativeDatePickFilter.pickerDurations=['0d','-7d','-30d','-90d','-365d','-1825d'];tab.RelativeDatePickFilter.pickerStrings=[tab.Strings.RelDatePickerOneDayAbbrev,tab.Strings.RelDatePickerOneWeekAbbrev,tab.Strings.RelDatePickerOneMonthAbbrev,tab.Strings.RelDatePickerThreeMonthsAbbrev,tab.Strings.RelDatePickerOneYearAbbrev,tab.Strings.RelDatePickerFiveYearsAbbrev];tab.SearchWidgetBase.noSearchPerformed=-1;tab.ShareDialog.$3_7=(tsConfig.isPublic)?"<a class='shareVizHeaderLink' href='/' id='share_header_link' tabindex='-1' target='_blank'><img id='share_header_logo'/></a>":'';tab.ShareDialogUtil.$0=tab.Strings.ShareDialogWaitingLinkMessage;tab.ShareDialogUtil.$1=tab.Strings.ShareDialogWaitingEmbedMessage;tab.ShareDialogUtil.share_settings=tab.$create_ShareSettings();tab.ShareDialogUtil._popup=null;tab.ShareDialogUtil.$2=null;(function(){if(tab.BrowserSupport.get_addEventListener()){document.addEventListener('click',tab.ShareDialogUtil.hideActivePopup,false);}else if((typeof(document.attachEvent)==='function')){document.attachEvent('onclick',function(){
tab.ShareDialogUtil.hideActivePopup(null);});}else{document.onclick=tab.ShareDialogUtil.hideActivePopup;}})();
tab.Slider.tableauSliderTemplate="<div class='dijit dijitReset'>"+"<div class='dijitReset tableauSlider' dojoAttachPoint='tableauSlider'>"+"<table class='dijit dijitReset' cellspacing='0' cellpadding='0' border='0' rules='none' dojoAttachEvent='onkeypress:_onKeyPress'>"+"<tr class='dijitReset'>"+"<td class='dijitReset'></td>"+"<td dojoAttachPoint='containerNode,topDecoration' class='dijitReset' style='text-align:center;width:100%;'></td>"+"<td class='dijitReset'></td>"+'</tr>'+"<tr class='dijitReset'>"+"<td class='dijitReset'>"+"<div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper dijitSliderLeftBumper' dojoAttachEvent='onclick:_onClkDecBumper'></div>"+'</td>'+"<td class='dijitReset'>"+"<input dojoAttachPoint='valueNode' type='hidden' name='${name}'>"+"<div class='dijitReset dijitSliderBarContainerH' waiRole='presentation' dojoAttachPoint='sliderBarContainer'>"+"<div waiRole='presentation' dojoAttachPoint='progressBar' class='dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH' dojoAttachEvent='onclick:_onBarClick'>"+"<div class='dijitSliderMoveable dijitSliderMoveableH'>"+"<div dojoAttachPoint='sliderHandle,focusNode' class='dijitSliderImageHandle dijitSliderImageHandleH' dojoAttachEvent='onmousedown:_onHandleClick' waiRole='slider' valuemin='${minimum}' valuemax='${maximum}'></div>"+'</div>'+'</div>'+"<div waiRole='presentation' dojoAttachPoint='remainingBar' class='dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH' dojoAttachEvent='onclick:_onBarClick'></div>"+'</div>'+'</td>'+"<td class='dijitReset'>"+"<div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper dijitSliderRightBumper' dojoAttachEvent='onclick:_onClkIncBumper'></div>"+'</td>'+'</tr>'+"<tr class='dijitReset'>"+"<td class='dijitReset'></td>"+"<td dojoAttachPoint='containerNode,bottomDecoration' class='dijitReset'></td>"+"<td class='dijitReset'></td>"+'</tr>'+'</table>'+'</div>'+"<div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowDec' style='display:none' dojoAttachPoint='decrementButton'>"+"<div class='dijitSliderDecrementIconH' tabIndex='-1'>"+"<span class='dijitSliderButtonInner'>-</span>"+'</div>'+'</div>'+"<div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowInc' style='display:none' dojoAttachPoint='incrementButton'>"+"<div class='dijitSliderIncrementIconH' tabIndex='-1'>"+"<span class='dijitSliderButtonInner'>+</span>"+'</div>'+'</div>'+'</div>';tab.Slider.$0="<div class='dijitTooltip dijitTooltipLeft' id='dojoTooltip'>"+"<div class='dijitTooltipContainer' dojoAttachpoint='coreArea'>"+"<div class='dijitTooltipContents' dojoAttachPoint='containerNode' waiRole='alert'></div></div>"+"<div class='dijitTooltipConnector'></div>"+'</div>';tab.StepperControlView.incrementButtonClassName='tabDecrementButton';tab.StepperControlView.decrementButtonClassName='tabIncrementButton';(function(){spiff.ObjectRegistry.registerType(tab.StepperControlView,tab.StepperControlView);})();
tab.TiledViewerRegion.windowLog=null;tab.TiledViewerRegion.paneBorderMaskSize=2;tab.TiledViewerRegion.canvasBorderPixels=1;tab.TiledViewerRegion.zoomAnimationTime=777;tab.TiledViewerRegion.minZoomAnimationTime=500;tab.FilterListUI.$0=100;tab.TiledWidget.$0=tab.Logger.getLogger(tab.TiledWidget);tab.Tooltip.defaultVerticalOffset=16;tab.Tooltip.defaultHorizonalOffset=16;tab.Tooltip.belowRightClass='tab-tooltipBR';tab.Tooltip.belowLeftClass='tab-tooltipBL';tab.Tooltip.aboveRightClass='tab-tooltipAR';tab.Tooltip.aboveLeftClass='tab-tooltipAL';tab.Tooltip.$1_1='tab-tooltipAR'+' '+'tab-tooltipAL'+' '+'tab-tooltipBL'+' '+'tab-tooltipBR';tab.Tooltip.$1_5=null;tab.Ubertip.$1_C=null;(function(){tab.Ubertip.$1_C={};})();
tab.TooltipBaseMode.whitespaceObjectId=-1;tab.TooltipBaseMode.unknownObjectId=-2;tab.TooltipBaseMode.$6=0;tab.TooltipBaseMode.$7=null;tab.TooltipBaseMode.$8=null;tab.TooltipBaseMode.lastHoveredObjectId=tab.TooltipBaseMode.unknownObjectId;tab.TooltipResponsiveMode.$1D=0;(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-notification',tab.NotificationCommandRedirectHandler.$0);})();
(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-quick-edit',tab.ReferenceLineConstantValueQuickEditCommandRedirectHandler.$0);})();
(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-confirmation',tab.ConfirmationCommandRedirectHandler.$0);})();
tab.CircleShapeSelector.$13="<line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line>"+"<line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line>";tab.CircleShapeSelector.$14="<v:rect class='"+'circle_crosshairs'+"'><v:fill color='"+'rgb(0, 176, 240)'+"'/><v:stroke color='"+'rgb(0, 176, 240)'+"'/></v:rect>";tab.CircleShapeSelector.$15=tab.CircleShapeSelector.$14+tab.CircleShapeSelector.$14;tab.CircleShapeSelector.$16="<div><svg class='selectionShape'><circle class='tvdrag_svg_marquee'></circle>"+"<g class='"+'circle_crosshairs'+"'>"+tab.CircleShapeSelector.$13+'</g></svg></div>';tab.CircleShapeSelector.$17="<div><div class='selectionShape'><v:oval class='"+'voval'+"'><v:fill opacity='25%' color='"+'rgb(0, 176, 240)'+"'/>"+"<v:stroke color='"+'rgb(0, 176, 240)'+"'/></v:oval>"+tab.CircleShapeSelector.$15+'</div>';tab.PolyShapeSelector.$16="<div><div class='selectionShape'><v:polyline class='"+'vpolyline'+"'></v:polyline></div>";tab.ShapeSelectorBase.$4=tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9;tab.ShapeSelectorBase.vmlColor='rgb(0, 176, 240)';tab.StepperControlViewModel.valueProperty='Value';tab.StepperControlViewModel.enabledProperty='IsEnabled';tab.StepperControlViewModel.incrementEnabledProperty='IsIncrementEnabled';tab.StepperControlViewModel.decrementEnabledProperty='IsDecrementEnabled';tab.MapsSearchView.widgetClassName='tabMapsSearchView';tab.MapsSearchView.$2_1='tabMapsSearchView'+'Collapsed';tab.MapsSearchView.$2_2='tabMapsSearchView'+'InitialText';tab.MapsSearchView.widgetClassNameTranslucent='tabMapsSearchView'+'Translucent';tab.MapsSearchView.suggestionDisplayClassName='tabMapsSearchView'+'SuggestionDisplayName';tab.MapsSearchView.suggestionActiveSearchTextClassName='tabMapsSearchView'+'SuggestionActiveSearchText';tab.MapsSearchView.suggestionParentClassName='tabMapsSearchView'+'SuggestionParentName';tab.MapsSearchView.queryDelayTimerMs=200;(function(){spiff.ObjectRegistry.registerType(tab.MapsSearchView,tab.MapsSearchView);})();
});// This script was generated using Script# v0.7.4.0
// spiffuimobile.js
(function(){
Type.registerNamespace('spiff');spiff.$create_MobileScrollerOptions=function(){var $o={};$o.bounce=true;$o.momentum=tab.BrowserSupport.get_cssTranslate3D();$o.checkDOMChanges=true;$o.topOnDOMChanges=false;$o.hScrollbar=tab.BrowserSupport.get_cssTranslate3D();$o.vScrollbar=tab.BrowserSupport.get_cssTranslate3D();$o.displayPolicy='active';$o.oneDimensional=false;$o.fadeScrollbarOut=true;$o.shrinkScrollbar=true;$o.overflow='hidden';$o.snap=false;$o.scrollbarColor='rgba(0,0,0,0.5)';$o.onScrollEnd=function(){
};return $o;}
spiff.$create_spiffuimobile$2=function(x,y,time){var $o={};$o.x=x;$o.y=y;$o.$0=time;return $o;}
spiff.$create_spiffuimobile$1=function(distance,time){var $o={};$o.$0=distance;$o.$1=time;return $o;}
spiff.UberPopupViewMobile=function(viewModel){spiff.UberPopupViewMobile.initializeBase(this,[viewModel,new spiff.UberPopupTemplate()]);spiff.OrientationHandler.add_orientationChanged(ss.Delegate.create(this,this.onOrientationChange));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
spiff.OrientationHandler.remove_orientationChanged(ss.Delegate.create(this,this.onOrientationChange));})));}
spiff.UberPopupViewMobile.prototype={get_uberPopupShadowHeight:function(){return 28;},onOrientationChange:function(){spiff.SpiffBrowserViewport.getViewport(ss.Delegate.create(this,function($p1_0){
this.positionPopupVertically($p1_0,this.get_showOptions());}));}}
spiff.DefaultMobileScrollable=function(wrapper,element){this.$2=tab.$create_Point(0,0);this.$0=element;this.$1=wrapper;}
spiff.DefaultMobileScrollable.prototype={$0:null,$1:null,get_canScrollX:function(){return this.get_docSize().w>this.get_actualViewSize().w;},get_canScrollY:function(){return this.get_docSize().h>this.get_actualViewSize().h;},get_docSize:function(){return tab.$create_Size(this.$0.scrollWidth,this.$0.scrollHeight);},get_actualViewSize:function(){return tab.$create_Size(this.$1.clientWidth,this.$1.clientHeight);},get_effectiveViewSize:function(){return this.get_actualViewSize();},get_scrollPos:function(){return this.$2;},set_scrollPos:function(value){this.$2=value;return value;},setXPos:function(xPos){this.set_scrollPos(tab.$create_Point(xPos,this.get_scrollPos().y));},setYPos:function(yPos){this.set_scrollPos(tab.$create_Point(this.get_scrollPos().x,yPos));}}
spiff.CompositeSearchWidgetMobile=function(){spiff.CompositeSearchWidgetMobile.initializeBase(this,[new spiff.CompositeSearchWidgetTemplateMobile()]);}
spiff.CompositeSearchWidgetTemplateMobile=function(){spiff.CompositeSearchWidgetTemplateMobile.initializeBase(this);this.get_textInputView().get_inputElement()[0].setAttribute('name','search');var $0="<form onsubmit='return false;'><form />";var $1=$($0);var $2=this.getElementBySelector('.tabTextInputViewInputElement');$1.append($2);this.get_textInputView().get_element().append($1);}
spiff.MenuViewMobile=function(viewModel){this.$3_0=[];spiff.MenuViewMobile.initializeBase(this,[viewModel,new spiff.spiffuimobile$4()]);this.$3_0.push(this.dom.content);this.$3_2=$('<div/>').appendTo(this.dom.get_domRoot()).append(this.dom.content);this.$3_4();this.updateMenu();}
spiff.MenuViewMobile.prototype={$3_1:null,$3_2:null,dispose:function(){this.$3_1.dispose();spiff.MenuViewMobile.callBaseMethod(this, 'dispose');},showSubmenu:function(parent,realtiveObj,menuTemplate){var $0=this.dom.get_domRoot().height();this.dom.get_domRoot().css('height',$0+'px');var $1=new spiff.spiffuimobile$3();$1.$1_0.text(tab.Strings.MenuBackButton);this.disposables.add(spiff.ClickHandler.targetAndClick($1.$1_0,ss.Delegate.create(this,this.$3_6)));$1.$1_1.text(parent.get_name());$1.$1_2.append(menuTemplate.content.children());var $2=this.$3_0.peek();var $3=$1.get_domRoot();this.$3_0.push($3);this.$3_7($2,$3,true);},positionMenu:function(spiffBrowserViewport,options,menu){spiff.MenuViewMobile.callBaseMethod(this, 'positionMenu',[spiffBrowserViewport,options,menu]);this.$3_3();},$3_3:function(){this.$3_1.resetPosition();this.$3_1.refresh();},$3_4:function(){var $0=spiff.$create_EventHandleSpec();$0.potentialTap=ss.Delegate.create(this,this.$3_5);var $1=new spiff.TableauEventHandler(this.$3_2[0],$0);this.disposables.add($1);this.$3_1=new spiff.MobileScroller(this.$3_2[0],$1,spiff.$create_MobileScrollerOptions());},$3_5:function($p0){$($p0.target).trigger('tap');},$3_6:function($p0){var $0=this.menuStack[this.menuStack.length-1];this.disposables.add(new tab.CallOnDispose(function(){
$0.get_domRoot().remove();}));this.menuStack.removeAt(this.menuStack.length-1);var $1=this.$3_0.pop();var $2=this.$3_0.peek();this.$3_7($1,$2,false);},$3_7:function($p0,$p1,$p2){var $0=this.dom.get_domRoot().height();var $1=this.dom.get_domRoot().width();var $2=($p2)?$1:-$1;var $3=($p2)?-$1:$1;var $4={position:'absolute',width:$1+'px',height:$0+'pm',top:'0',left:'0'};$p0.css($4);var $5={position:'absolute',width:$1+'px',height:$0+'pm',top:this.$3_1.get_scrollPos().y+'px',left:$2+'px'};$p1.css($5);this.$3_2.append($p1);$p1.show();$p0.animate({left:$3+'px'},'fast','swing',function(){
$p0.detach();});$p1.animate({left:'0'},'fast','swing',ss.Delegate.create(this,function(){
$p1.css({position:'relative',top:'0'});this.$3_3();}));}}
spiff.spiffuimobile$4=function(){spiff.spiffuimobile$4.initializeBase(this,[spiff.MenuTemplate.htmlTemplate]);}
spiff.spiffuimobile$3=function(){spiff.spiffuimobile$3.initializeBase(this,[$("<div class='tabSubMenu'>\n<div class='tabSubMenuHeader'>\n<div class='tabSubMenuHeaderBtn'/>\n<div class='tabSubMenuHeaderText'/>\n</div>\n<div class='tabSubMenuContent'/>\n</div>")]);this.$1_0=this.getElementBySelector('.tabSubMenuHeaderBtn');this.$1_1=this.getElementBySelector('.tabSubMenuHeaderText');this.$1_2=this.getElementBySelector('.tabSubMenuContent');}
spiff.spiffuimobile$3.prototype={$1_0:null,$1_1:null,$1_2:null}
spiff.spiffuimobile$0=function(dir,domWrapper,displayPolicy,fade,shrink,color){this.$3=dir;this.$4=displayPolicy;this.$5=shrink;spiff.spiffuimobile$0.$2+=1;this.id=spiff.spiffuimobile$0.$2;this.$1=document.createElement('div');this.$1.style.cssText='position:absolute;top:0;left:0;'+'-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);pointer-events:none;-webkit-transition-duration:0;'+'-webkit-transition-delay:0;-webkit-transition-property:-webkit-transform;z-index:10;background:'+color+';'+'-webkit-transform:'+spiff.spiffuimobile$0.$A('0,0')+';'+((dir==='horizontal')?'-webkit-border-radius:3px 2px;min-width:6px;min-height:5px':'-webkit-border-radius:2px 3px;min-width:5px;min-height:6px');this.$0=document.createElement('div');var $0="-webkit-mask:-webkit-canvas(scrollbar'"+this.id+this.$3+"');position:absolute;"+'z-index:10;pointer-events:none;overflow:hidden;'+((this.$3==='horizontal')?'bottom:2px;left:2px;right:7px;height:5px;':'top:2px;right:2px;bottom:7px;width:5px;');if(this.$4!=='always'){$0+='opacity:0;';}if(this.$4!=='never'){$0+='-webkit-transition-duration:'+((fade)?'300ms':'0')+';-webkit-transition-delay:0;-webkit-transition-property:opacity;';}this.$0.style.cssText=$0;this.$0.appendChild(this.$1);domWrapper.appendChild(this.$0);}
spiff.spiffuimobile$0.$A=function($p0){return (tab.BrowserSupport.get_cssTranslate3D())?'translate3d('+$p0+',0)':'translate('+$p0+')';}
spiff.spiffuimobile$0.prototype={$0:null,$1:null,id:0,$3:null,$4:null,$5:false,$6:0,$7:0,$8:0,$9:0,$B:function($p0,$p1){var $0=Math.PI;if(this.$3==='horizontal'){if(this.$6!==this.$0.offsetWidth){this.$6=this.$0.offsetWidth;if(ss.isValue(window.document.getCSSCanvasContext)){var $1=document.getCSSCanvasContext('2d', 'scrollbar'+this.id+this.$3, this.$6, 5);$1.fillStyle='rgb(0,0,0)';$1.beginPath();$1.arc(2.5,2.5,2.5,$0/2,-$0/2,false);$1.lineTo(this.$6-2.5,0);$1.arc(this.$6-2.5,2.5,2.5,-$0/2,$0/2,false);$1.closePath();$1.fill();}}}else{if(this.$6!==this.$0.offsetHeight){this.$6=this.$0.offsetHeight;if(ss.isValue(window.document.getCSSCanvasContext)){var $2=document.getCSSCanvasContext('2d', 'scrollbar'+this.id+this.$3, 5, this.$6);$2.fillStyle='rgb(0,0,0)';$2.beginPath();$2.arc(2.5,2.5,2.5,$0,0,false);$2.lineTo(5,this.$6-2.5);$2.arc(2.5,this.$6-2.5,2.5,0,$0,false);$2.closePath();$2.fill();}}}this.$7=Math.max(Math.round(this.$6*this.$6/$p1),6);this.$8=this.$6-this.$7;this.$9=this.$8/($p0-$p1);this.$1.style[(this.$3==='horizontal')?'width':'height']=this.$7+'px';},$C:function($p0){if(this.$0.style.opacity!=='1'){this.$D();}$p0=Math.round(this.$9*$p0);if($p0<0){$p0=(this.$5)?($p0+($p0*3)):0;if(this.$7+$p0<7){$p0=-this.$7+6;}}else if($p0>this.$8){$p0=(this.$5)?($p0+(($p0-this.$8)*3)):this.$8;if(this.$7+this.$8-$p0<7){$p0=this.$7+this.$8-6;}}var $0;if(this.$3==='horizontal'){$0=spiff.spiffuimobile$0.$A($p0+'px,0');}else{$0=spiff.spiffuimobile$0.$A('0,'+$p0+'px');}this.$1.style['webkitTransform']=$0;},$D:function(){if(this.$4==='never'){return;}this.$F('1','0');},$E:function(){if(this.$4==='always'){return;}this.$F('0','350ms');},$F:function($p0,$p1){if(tab.BrowserSupport.get_cssTranslate3D()){this.$0.style['webkitTransitionDelay']=$p1;}this.$0.style.opacity=$p0;},$10:function(){if(this.$0.parentNode!=null){this.$0.parentNode.removeChild(this.$0);}}}
spiff.MobileScroller=function(domNodeToScroll,handler,options){this.point=tab.$create_Point(0,0);this.$7=tab.$create_Point(0,0);this.$C=tab.$create_Point(0,0);this.$11=tab.$create_Point(0,0);this.$14=tab.$create_Point(0,0);this.$17=tab.$create_Point(0,0);this.$18=tab.$create_Point(0,0);this.$19=tab.$create_Point(0,0);this.$1B=tab.$create_Point(0,0);this.$2=domNodeToScroll;this.$3=this.$2.parentNode;this.$2.style['webkitTransitionProperty']='-webkit-transform';this.$2.style['webkitTransitionTimingFunction']='cubic-bezier(0,0,0.25,1)';this.$2.style['webkitTransitionDuration']='0';this.$2.style['webkitTransform']=spiff.spiffuimobile$0.$A('0px,0px');this.$4=this.$27();this.$5=spiff.$create_MobileScrollerOptions();$.extend(this.$5,options);this.$6=this.$5.onScrollEnd;delete this.$5.onScrollEnd;this.$3.style.overflow=this.$5.overflow;this.$1C=new spiff.DefaultMobileScrollable(this.$3,this.$2);this.refresh();spiff.OrientationHandler.add_orientationChanged(ss.Delegate.create(this,this.$22));if(ss.isValue(handler)){var $0=ss.Delegate.create(this,function($p1_0){
this.touchMove($p1_0);});var $1=spiff.$create_EventHandleSpec();$1.dragStart=ss.Delegate.create(this,this.touchStart);$1.dragMove=$0;$1.dragEnd=ss.Delegate.create(this,this.touchEnd);handler.update($1);}if(this.$5.checkDOMChanges){this.$2.addEventListener('DOMSubtreeModified',this.$28(),false);}}
spiff.MobileScroller.$23=function($p0){return $p0+'ms';}
spiff.MobileScroller.prototype={$2:null,$3:null,$4:null,$5:null,$6:null,$8:true,$9:true,$A:null,$B:null,$D:0,$E:0,$F:0,$10:0,$12:false,$13:false,$15:false,$16:false,$1A:null,$1C:null,$1D:0,add_touchStartCalled:function(value){this.$1E=ss.Delegate.combine(this.$1E,value);},remove_touchStartCalled:function(value){this.$1E=ss.Delegate.remove(this.$1E,value);},$1E:null,add_touchMoveCalled:function(value){this.$1F=ss.Delegate.combine(this.$1F,value);},remove_touchMoveCalled:function(value){this.$1F=ss.Delegate.remove(this.$1F,value);},$1F:null,add_touchEndCalled:function(value){this.$20=ss.Delegate.combine(this.$20,value);},remove_touchEndCalled:function(value){this.$20=ss.Delegate.remove(this.$20,value);},$20:null,add_resetPositionCalled:function(value){this.$21=ss.Delegate.combine(this.$21,value);},remove_resetPositionCalled:function(value){this.$21=ss.Delegate.remove(this.$21,value);},$21:null,get_enabled:function(){return this.$8;},set_enabled:function(value){this.$8=value;return value;},get_isCssScrollingEnabled:function(){return this.$9;},set_isCssScrollingEnabled:function(value){this.$9=value;return value;},get_onScrollEnd:function(){return this.$6;},set_onScrollEnd:function(value){this.$6=value;return value;},get_canScroll:function(){return this.$12||this.$13;},get_canScrollX:function(){return this.$12;},get_canScrollY:function(){return this.$13;},get_scrollPos:function(){return tab.$create_Point(-this.point.x,-this.point.y);},get_maxScroll:function(){return this.$C;},get_visibleArea:function(){return tab.$create_Size(this.$3.offsetWidth,this.$3.offsetHeight);},get_transitionTime:function(){return this.$1D;},scrollX:function(amount){this.$24(this.point.x+amount,this.point.y,true);},scrollY:function(amount){this.$24(this.point.x,this.point.y+amount,true);},handleEvent:function(e){var $0=e.type;switch($0){case 'webkitTransitionEnd':this.transitionEnd();break;case 'DOMSubtreeModified':this.onDOMModified(e);break;}},$22:function(){this.refresh();},onDOMModified:function(evt){if(evt.target.parentNode!==this.$2){return;}window.setTimeout(ss.Delegate.create(this,this.refresh),0);if(this.$5.topOnDOMChanges&&(!!this.point.x||!!this.point.y)){this.scrollTo(0,0,0);}},refresh:function(){var $0=tab.$create_Point(this.point.x,this.point.y);this.$D=this.$1C.get_effectiveViewSize().w;this.$E=this.$1C.get_effectiveViewSize().h;this.$F=this.$1C.get_docSize().w;this.$10=this.$1C.get_docSize().h;this.$C=tab.$create_Point(this.$D-this.$F,this.$E-this.$10);this.$11=tab.$create_Point(0,0);if(this.$12){if(this.$C.x>=0){$0.x=0;}else if(this.point.x<this.$C.x){$0.x=this.$C.x;}}if(this.$13){if(this.$C.y>=0){$0.y=0;}else if(this.point.y<this.$C.y){$0.y=this.$C.y;}}if(this.$5.snap){this.$14=tab.$create_Point(-Math.floor(this.$C.x/this.$D),-Math.floor(this.$C.y/this.$E));var $1=this.$26($0.x,$0.y);$0.x=$1.x;$0.y=$1.y;}if($0.x!==this.point.x||$0.y!==this.point.y){this.setTransitionTime(0);this.$24($0.x,$0.y,true);}this.$12=this.$1C.get_canScrollX();this.$13=this.$1C.get_canScrollY();if(this.$5.hScrollbar&&this.$12){if(ss.isNullOrUndefined(this.$A)){this.$A=new spiff.spiffuimobile$0('horizontal',this.$3,this.$5.displayPolicy,this.$5.fadeScrollbarOut,this.$5.shrinkScrollbar,this.$5.scrollbarColor);}this.$A.$B(this.$D,this.$F);}else if(ss.isValue(this.$A)){this.$A.$10();this.$A=null;}if(ss.isValue(this.$5.vScrollbar)&&this.$13){if(ss.isNullOrUndefined(this.$B)){this.$B=new spiff.spiffuimobile$0('vertical',this.$3,this.$5.displayPolicy,this.$5.fadeScrollbarOut,this.$5.shrinkScrollbar,this.$5.scrollbarColor);}this.$B.$B(this.$E,this.$10);}else if(ss.isValue(this.$B)){this.$B.$10();this.$B=null;}},setTransitionTime:function(time){time=(time||0);this.$1D=time;var $0=spiff.MobileScroller.$23(time);this.$2.style['webkitTransitionDuration']=$0;if(ss.isValue(this.$A)){this.$A.$1.style['webkitTransitionDuration']=$0;this.$A.$0.style['webkitTransitionDuration']=(tab.BrowserSupport.get_cssTranslate3D()&&this.$5.fadeScrollbarOut)?'300ms':'0';}if(ss.isValue(this.$B)){this.$B.$1.style['webkitTransitionDuration']=$0;this.$B.$0.style['webkitTransitionDuration']=(tab.BrowserSupport.get_cssTranslate3D()&&this.$5.fadeScrollbarOut)?'300ms':'0';}},touchStart:function(pseudoEvent){if(!this.$8){return;}this.$15=true;this.$16=false;this.$17=tab.$create_Point(0,0);this.setTransitionTime(0);if((this.$5.momentum||this.$5.snap)&&this.$9){var $1=tab.DomUtil.getComputedStyle(this.$2)['webkitTransform'];var $2=this.point.x;var $3=this.point.y;var $4=$1.replace(new RegExp('[^0-9\\-.,]','g'),'').split(',');if(ss.isValue($4)&&$4.length>5){$2=parseInt($4[12]||$4[4],10);$3=parseInt($4[13]||$4[5],10);}if($2!==this.point.x||$3!==this.point.y){document.removeEventListener('webkitTransitionEnd',this.$4,false);this.$24($2,$3);this.$16=true;}}var $0=pseudoEvent.get_gestureInfo();this.$18=tab.$create_Point((ss.isValue($0.startX))?$0.startX:$0.pageX,(ss.isValue($0.startY))?$0.startY:$0.pageY);this.$19=tab.$create_Point(this.point.x,this.point.y);this.$1A=pseudoEvent.timeStamp;this.$11.x=0;this.$11.y=0;if(ss.isValue(this.$1E)){this.$1E(pseudoEvent);}},touchMove:function(pseudoEvent){if(!this.$15){return false;}var $0=tab.$create_Point(pseudoEvent.get_gestureInfo().pageX,pseudoEvent.get_gestureInfo().pageY);var $1=(this.$12)?$0.x-this.$18.x:0;var $2=(this.$13)?$0.y-this.$18.y:0;var $3=tab.$create_Point(this.point.x+$1,this.point.y+$2);var $4=false;this.$18.x=$0.x;this.$18.y=$0.y;if($3.x>=0||$3.x<this.$C.x){$3.x=(this.$5.bounce)?Math.round(this.point.x+($1/3)):(($3.x>=0||this.$C.x>=0)?0:this.$C.x);}if($3.y>=0||$3.y<this.$C.y){$3.y=(this.$5.bounce)?Math.round(this.point.y+($2/3)):(($3.y>=0||this.$C.y>=0)?0:this.$C.y);}if(this.$5.oneDimensional){if(this.$17.x-3>this.$17.y){$3.y=this.point.y;$2=0;}else if(this.$17.y-3>this.$17.x){$3.x=this.point.x;$1=0;}}$4=($3.x!==this.point.x)||($3.y!==this.point.y);if($4){pseudoEvent.preventDefault();}this.$24($3.x,$3.y);this.$16=true;this.$11.x=($1>0)?-1:1;this.$11.y=($2>0)?-1:1;this.$17.x+=Math.abs($1);this.$17.y+=Math.abs($2);if(ss.isValue(this.$1F)){this.$1F(pseudoEvent);}return $4;},touchEnd:function(pseudoEvent){if(!this.$15){return;}var $0=pseudoEvent.timeStamp-this.$1A;var $1;var $2;var $3=0;var $4=tab.$create_Point(this.point.x,this.point.y);var $5;var $6;var $7;var $8;this.$15=false;if(!this.$16){this.resetPosition();return;}if(!this.$5.snap&&$0>250){this.resetPosition();return;}if(this.$5.momentum){if(this.$12){$6=(this.$5.bounce)?-this.point.x+(this.$D/5):-this.point.x;$8=this.point.x+this.$F-this.$D;$7=(this.$5.bounce)?($8+(this.$D/5)):$8;$1=this.$25(this.point.x-this.$19.x,$0,$6,$7);}else{$1=spiff.$create_spiffuimobile$1(0,0);}if(this.$13){$6=(this.$5.bounce)?-this.point.y+(this.$E/5):-this.point.y;$8=this.point.y+this.$10-this.$E;$7=(this.$5.bounce)?(((this.$C.y<0)?$8:0)+(this.$E/5)):$8;$2=this.$25(this.point.y-this.$19.y,$0,$6,$7);}else{$2=spiff.$create_spiffuimobile$1(0,0);}$3=Math.max(Math.max($1.$1,$2.$1),1);$4.x=this.point.x+$1.$0;$4.y=this.point.y+$2.$0;}if(this.$5.snap){$5=this.$26($4.x,$4.y);$4.x=$5.x;$4.y=$5.y;$3=Math.max($5.$0,$3);}this.scrollTo($4.x,$4.y,$3);if(ss.isValue(this.$20)){this.$20();}},transitionEnd:function(){document.removeEventListener('webkitTransitionEnd',this.$4,false);this.resetPosition();},resetPosition:function(){var $0=tab.$create_Point(this.point.x,this.point.y);if(this.point.x>=0){$0.x=0;}else if(this.point.x<this.$C.x){$0.x=this.$C.x;}if(this.point.y>=0||this.$C.y>0){$0.y=0;}else if(this.point.y<this.$C.y){$0.y=this.$C.y;}if($0.x!==this.point.x||$0.y!==this.point.y){this.scrollTo($0.x,$0.y);}else{if(this.$16){this.$6();this.$16=false;}if(ss.isValue(this.$A)){this.$A.$E();}if(ss.isValue(this.$B)){this.$B.$E();}}if(ss.isValue(this.$21)){this.$21();}},scrollTo:function(destX,destY,runtime){if(this.point.x===destX&&this.point.y===destY){this.resetPosition();return;}this.$16=true;this.setTransitionTime((runtime||350));this.$24(destX,destY);if(ss.isValue(runtime)&&!runtime){this.resetPosition();}else{document.addEventListener('webkitTransitionEnd',this.$4,false);}},dispose:function(){spiff.OrientationHandler.remove_orientationChanged(ss.Delegate.create(this,this.$22));document.removeEventListener('webkitTransitionEnd',this.$4,false);if(this.$5.checkDOMChanges){this.$2.removeEventListener('DOMSubtreeModified',this.$28(),false);}if(ss.isValue(this.$A)){this.$A.$10();this.$A=null;}if(ss.isValue(this.$B)){this.$B.$10();this.$B=null;}},destroy:function(){this.dispose();},setScrollTarget:function(scrollTarget){this.$1C=scrollTarget;this.refresh();},setScrollTransitionPoint:function(timeAlpha){var $0=this.$7;var $1=this.get_scrollPos();var $2=!tab.PointUtil.equals($0,$1);if($2){var $3=1-timeAlpha;var $4=1-($3*$3*$3);var $5=1-$4;var $6=tab.$create_Point(Math.round(($1.x*$4)+($0.x*$5)),Math.round(($1.y*$4)+($0.y*$5)));$2=!tab.PointUtil.equals(this.$1C.get_scrollPos(),$6);if($2){this.$29($6);}}return $2;},isResettingAfterBounce:function(){var $0=this.get_scrollPos();return (!$0.y&&!$0.x)||($0.y===-this.get_maxScroll().y&&$0.x===-this.get_maxScroll().x);},isPointOutOfBounds:function(referencePoint){return referencePoint.x<0||referencePoint.x>-this.get_maxScroll().x||referencePoint.y<0||referencePoint.y>-this.get_maxScroll().y;},$24:function($p0,$p1,$p2){$p2=($p2||false);this.$7=this.get_scrollPos();this.point=tab.$create_Point($p0,$p1);if(this.$9){if(tab.BrowserSupport.get_cssTranslate3D()){this.$2.style['webkitTransform']=spiff.spiffuimobile$0.$A(this.point.x+'px,'+this.point.y+'px');}else{$(this.$2).css('position','relative');$(this.$2).css('left',this.point.x+'px');$(this.$2).css('top',this.point.y+'px');}this.$29(this.get_scrollPos());}if(!$p2){if(ss.isValue(this.$A)){this.$A.$C(this.point.x);}if(ss.isValue(this.$B)){this.$B.$C(this.point.y);}}},$25:function($p0,$p1,$p2,$p3){var $0=Math.abs($p0)/$p1*1000;var $1=$0*$0/2.5/1000;var $2=0;if($p0>0&&$1>$p2){$0=$0*$p2/$1/2.5;$1=$p2;}else if($p0<0&&$1>$p3){$0=$0*$p3/$1/2.5;$1=$p3;}$1=$1*(($p0<0)?-1:1);$2=parseInt(($0/1.2));return spiff.$create_spiffuimobile$1(Math.round($1),Math.round($2));},$26:function($p0,$p1){if(this.$11.x>0){$p0=Math.floor($p0/this.$D);}else if(this.$11.x<0){$p0=Math.ceil($p0/this.$D);}else{$p0=Math.round($p0/this.$D);}this.$1B=tab.$create_Point(0,0);this.$1B.x=-$p0;$p0=$p0*this.$D;if($p0>0){$p0=this.$1B.x=0;}else if($p0<this.$C.x){this.$1B.x=this.$14.x;$p0=this.$C.x;}if(this.$11.y>0){$p1=Math.floor($p1/this.$E);}else if(this.$11.y<0){$p1=Math.ceil($p1/this.$E);}else{$p1=Math.round($p1/this.$E);}this.$1B.y=-$p1;$p1=$p1*this.$E;if($p1>0){$p1=this.$1B.y=0;}else if($p1<this.$C.y){this.$1B.y=this.$14.y;$p1=this.$C.y;}var $0=Math.round(Math.max(Math.abs(this.point.x-$p0)/this.$D*500,Math.abs(this.point.y-$p1)/this.$E*500));return spiff.$create_spiffuimobile$2($p0,$p1,$0);},$27:function(){return ss.Delegate.create(this,function($p1_0){
this.handleEvent($p1_0);});},$28:function(){return this;},$29:function($p0){this.$1C.set_scrollPos($p0);}}
spiff.UberPopupViewMobile.registerClass('spiff.UberPopupViewMobile',spiff.UberPopupView);spiff.DefaultMobileScrollable.registerClass('spiff.DefaultMobileScrollable',null,spiff.IScrollable);spiff.CompositeSearchWidgetMobile.registerClass('spiff.CompositeSearchWidgetMobile',spiff.CompositeSearchWidget);spiff.CompositeSearchWidgetTemplateMobile.registerClass('spiff.CompositeSearchWidgetTemplateMobile',spiff.CompositeSearchWidgetTemplate);spiff.MenuViewMobile.registerClass('spiff.MenuViewMobile',spiff.MenuView);spiff.spiffuimobile$4.registerClass('spiff.spiffuimobile$4',spiff.MenuTemplate);spiff.spiffuimobile$3.registerClass('spiff.spiffuimobile$3',spiff.Template);spiff.spiffuimobile$0.registerClass('spiff.spiffuimobile$0');spiff.MobileScroller.registerClass('spiff.MobileScroller',null,spiff.IScroller,ss.IDisposable);(function(){spiff.ObjectRegistry.registerType(spiff.UberPopupView,spiff.UberPopupViewMobile);})();
(function(){spiff.ObjectRegistry.registerType(spiff.CompositeSearchWidget,spiff.CompositeSearchWidgetMobile);})();
(function(){spiff.ObjectRegistry.registerType(spiff.MenuView,spiff.MenuViewMobile);})();
spiff.spiffuimobile$0.$2=0;spiff.MobileScroller.defaultScrollTiming=350;}());// This script was generated using Script# v0.7.4.0
// vqluimobile.js
dojo.addOnLoad(function(){'';
Type.registerNamespace('tableau.mobile.util');Type.registerNamespace('tab');tableau.mobile.util.scaling=function(){}
tableau.mobile.util.scaling.logToWindow=function(msg){}
tableau.mobile.util.scaling.logToWindowII=function(msg){}
tableau.mobile.util.scaling.doWithScaleFactor=function(cb){tsConfig.getScale(function($p1_0,$p1_1,$p1_2){
tableau.mobile.util.scaling._scaleFactor=$p1_0;tableau.mobile.util.scaling._scaleToFactor=1/$p1_0;if(ss.isValue(cb)){cb($p1_0,$p1_1,$p1_2);}});}
tableau.mobile.util.scaling.getZoomScaleFactor=function(){if(ss.isNullOrUndefined(tableau.mobile.util.scaling._scaleFactor)){tableau.mobile.util.scaling.doWithScaleFactor(null);}return tableau.mobile.util.scaling._scaleFactor;}
tab.CategoricalLegendViewMobile=function(viewModel){tab.CategoricalLegendViewMobile.initializeBase(this,[viewModel,new tab.CategoricalLegendTemplateMobile()]);this.$4_0=this.$4_3();this.$4_1=new spiff.MobileScroller(this.get_catLegendTemplate().columnsHolder.get(0),this.$4_0,spiff.$create_MobileScrollerOptions());}
tab.CategoricalLegendViewMobile.prototype={$4_0:null,$4_1:null,$4_2:null,get_scrollOffset:function(){return this.$4_1.get_scrollPos();},set_scrollOffset:function(value){this.$4_1.scrollTo(value.x,value.y);return value;},dispose:function(){this.$4_0.dispose();this.$4_1.dispose();tab.CategoricalLegendViewMobile.callBaseMethod(this, 'dispose');},setContentSize:function(viewportHeight,viewportWidth){tab.CategoricalLegendViewMobile.callBaseMethod(this, 'setContentSize',[viewportHeight,viewportWidth]);tab.CategoricalLegendView.setDomNodeStyleSize(this.get_catLegendTemplate().get_contentArea(),viewportWidth,viewportHeight);},resetLegend:function(){this.$4_1.resetPosition();this.$4_1.refresh();tab.CategoricalLegendViewMobile.callBaseMethod(this, 'resetLegend');},drawLegend:function(){tab.CategoricalLegendViewMobile.callBaseMethod(this, 'drawLegend');this.$4_1.refresh();},$4_3:function(){var $0=spiff.$create_EventHandleSpec();$0.tap=ss.Delegate.create(this,this.$4_4);$0.potentialTap=ss.Delegate.create(this,this.$4_5);var $1=new spiff.TableauEventHandler(this.get_baseLegendTemplate().get_domRoot().get(0),$0);return $1;},$4_4:function($p0){var $0=this.getLegendItemFromEvent($p0);var $1=tab.ResolveSelectAction.fromNormalizedEvent($p0);if(ss.isValue($0)){var $2=this.getViewportPosition($p0);var $3=this.getDocumentPosition($2);var $4=tab.$create_RectXY($3.x,$3.y,0,0);this.performSelectOnItem($0,$1,$2,$4);}else{this.get_catLegendViewModel().selectNone($1);}$p0.preventDefault();},$4_5:function($p0){this.$4_2=tab.FeedbackMobile.createTapFeedback(this.get_catLegendTemplate().get_domRoot().closest('.tab-dashboard').get(0),$p0);$p0.stopPropagation();}}
tab.CategoricalLegendTemplateMobile=function(){tab.CategoricalLegendTemplateMobile.initializeBase(this,[$("\n            <div class='tabLegendPanel'>\n                <div class='tabLegendBox'>\n                    <div class='tabLegendTitle'></div>\n                    <div class='tabLegendContentBox'>\n                        <div class='tabLegendContentHolder'>\n                            <div class='tabLegendColumnHolder' style='white-space:nowrap'></div>\n                        </div>\n                    </div>\n                    <div class='tabLegendHorizScroll'></div>\n                </div>\n            </div>")]);this.legendContentArea=this.getElementBySelector('.tabLegendContentBox');}
tab.MapsSearchViewMobile=function(vm){tab.MapsSearchViewMobile.initializeBase(this,[vm,tab.MapsSearchView.newMapsSearchViewTemplate()]);this.$3_0=this.$3_2(this.mapsSearchViewTemplate.get_domRoot()[0],ss.Delegate.create(this,this.$3_3));var $0=ss.Delegate.create(this,function(){
this.$3_1();});this.get_compositeSearchWidget().get_clearButton().add_click($0);this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_compositeSearchWidget().get_clearButton().remove_click($0);this.$3_0.dispose();})));}
tab.MapsSearchViewMobile.prototype={$3_0:null,$3_1:function(){this.showInitialSearchText(true);},$3_2:function($p0,$p1){var $0=spiff.$create_EventHandleSpec();$0.tap=$p1;$0.press=$p1;$0.potentialTap=$p1;$0.potentialPress=$p1;$0.firstTouch=$p1;$0.touchMove=$p1;$0.lastTouch=$p1;$0.dragStart=$p1;$0.dragMove=$p1;$0.dragEnd=$p1;var $1=new spiff.TableauEventHandler($p0,$0);return $1;},$3_3:function($p0){$p0.preventDefault();$p0.stopPropagation();},handleEnterKeyPress:function(){tab.MapsSearchViewMobile.callBaseMethod(this, 'handleEnterKeyPress');this.removeMobileKeyboard();},handleListItemClick:function(listItem){tab.MapsSearchViewMobile.callBaseMethod(this, 'handleListItemClick',[listItem]);this.removeMobileKeyboard();},handleSearchButtonClick:function(){tab.MapsSearchViewMobile.callBaseMethod(this, 'handleSearchButtonClick');if(this.get_isCollapsed()){this.removeMobileKeyboard();}},removeMobileKeyboard:function(){this.get_compositeSearchWidget().get_textInputView().get_inputElement().blur();this.get_compositeSearchWidget().get_searchButton().get_element()[0].focus();document.activeElement.blur();}}
tab.DragDropAndScrollHandler=function(dragScrollContainer){this.$E=1;var $0=spiff.$create_EventHandleSpec();$0.firstTouch=ss.Delegate.create(this,this.$16);$0.dragStart=ss.Delegate.create(this,this.$1A);$0.dragMove=ss.Delegate.create(this,this.$19);$0.dragEnd=ss.Delegate.create(this,this.$18);this.$7=new spiff.TableauEventHandler(dragScrollContainer[0],$0);spiff.GlobalTouchWatcher.add_lastTouch(ss.Delegate.create(this,this.$14));var $1=spiff.$create_MobileScrollerOptions();this.$8=new spiff.MobileScroller(dragScrollContainer[0],null,$1);}
tab.DragDropAndScrollHandler.get_dragInProgress=function(){return tab.DragDropAndScrollHandler.$5;}
tab.DragDropAndScrollHandler.get_scrollInProgress=function(){return tab.DragDropAndScrollHandler.$6;}
tab.DragDropAndScrollHandler.prototype={$7:null,$8:null,$9:0,$A:null,$B:null,$C:0,$D:0,add_draggingStarted:function(value){this.$F=ss.Delegate.combine(this.$F,value);},remove_draggingStarted:function(value){this.$F=ss.Delegate.remove(this.$F,value);},$F:null,get_orientation:function(){return this.$E;},set_orientation:function(value){this.$E=value;return value;},get_scroller:function(){return this.$8;},dispose:function(){if(ss.isValue(this.$7)){this.$7.dispose();this.$7=null;}if(ss.isValue(this.$8)){this.$8.dispose();this.$8=null;}this.$10();spiff.GlobalTouchWatcher.remove_lastTouch(ss.Delegate.create(this,this.$14));},updateScrollableContentSize:function(){this.$8.resetPosition();this.$8.refresh();},$10:function(){if(ss.isValue(this.$A)){window.clearTimeout(this.$A);this.$A=null;document.removeEventListener('touchend',ss.Delegate.create(this,this.$17),true);}},$11:function(){if(this.$A==null){return;}this.$10();if(tab.DragDropAndScrollHandler.$5||tab.DragDropAndScrollHandler.$6){return;}this.$12(this.$B);},$12:function($p0){if(tab.DragDropAndScrollHandler.$5){return;}tab.DragDropAndScrollHandler.$5=true;this.$10();if(ss.isValue(this.$F)){this.$F();}spiff.DragDropManager.firstTouch(this.$B);spiff.DragDropManager.dragStart($p0);spiff.DragDropManager.add_dragEnded(ss.Delegate.create(this,this.$15));},$13:function($p0){if(tab.DragDropAndScrollHandler.$6){return;}tab.DragDropAndScrollHandler.$6=true;this.$10();this.$8.touchStart(this.$B);this.$8.touchMove($p0);},$14:function($p0,$p1){this.$10();window.setTimeout(function(){
if(tab.DragDropAndScrollHandler.$5){spiff.DragDropManager.cancelDrag();}},0);},$15:function($p0){tab.DragDropAndScrollHandler.$5=false;spiff.DragDropManager.remove_dragEnded(ss.Delegate.create(this,this.$15));},$16:function($p0){this.$B=$p0;this.$9=new Date().getMilliseconds();this.$C=$p0.touches[0].screenX;this.$D=$p0.touches[0].screenY;this.$10();this.$A=window.setTimeout(ss.Delegate.create(this,this.$11),250);document.addEventListener('touchend',ss.Delegate.create(this,this.$17),true);},$17:function($p0){this.$10();},$18:function($p0){if(tab.DragDropAndScrollHandler.$5){tab.DragDropAndScrollHandler.$5=false;spiff.DragDropManager.dragEnd($p0);}else if(tab.DragDropAndScrollHandler.$6){this.$8.touchEnd($p0);tab.DragDropAndScrollHandler.$6=false;}},$19:function($p0){$p0.stopPropagation();$p0.preventDefault();if(tab.DragDropAndScrollHandler.$5){spiff.DragDropManager.dragMove($p0);}else if(tab.DragDropAndScrollHandler.$6){this.$8.touchMove($p0);}else{var $0=$p0.changedTouches[0].screenY-this.$D;var $1=$p0.changedTouches[0].screenX-this.$C;var $2=($0*$0)+($1*$1);if($2>tab.DragDropAndScrollHandler.$1){var $3=$2/(new Date().getMilliseconds()-this.$9);var $4=99999;if(!!$1&&this.$E===1){$4=Math.abs($0/$1);}if(!!$0&&this.$E===2){$4=Math.abs($1/$0);}if(this.$8.get_canScroll()&&(($3>1&&$4>0.5)||$4>=2)){this.$13($p0);}else{this.$12($p0);}}}},$1A:function($p0){this.$19($p0);}}
tab.IInplaceMobile=function(){};tab.IInplaceMobile.registerInterface('tab.IInplaceMobile');tab.IInplaceMobilePopupWidget=function(){};tab.IInplaceMobilePopupWidget.registerInterface('tab.IInplaceMobilePopupWidget');tab.TooltipLegacyMode=function(contextProvider,visualId){tab.TooltipLegacyMode.initializeBase(this,[contextProvider,visualId]);}
tab.TooltipLegacyMode.prototype={onMoving:function(){},onDragEnd:function(regionDimension){if(ss.isValue(regionDimension)){this.$2_0(regionDimension);}},onPinchEnd:function(regionDimension){if(ss.isValue(regionDimension)){this.$2_0(regionDimension);}},buildBehaviorsDictionary:function(){var $0=new tab.LegacyTooltipBehavior(this.get_tooltip());this.tooltipBehaviors['sticky']=$0;},$2_0:function($p0){var $0=this.get_tooltip().get_location();if(ss.isValue($0)&&($0.x<$p0.x||$0.x>($p0.w+$p0.x)||$0.y<$p0.y||$0.y>($p0.h+$p0.y))){this.get_tooltip().close();}}}
tab.ContinuousSliderMobile=function(viewModel){tab.ContinuousSliderMobile.initializeBase(this,[viewModel]);this.viewModel=viewModel;this.$3_0();}
tab.ContinuousSliderMobile.prototype={singleSlider:null,$3_0:function(){var $0={};$0.bShowSlider=true;$0.bShowArrows=false;$0.currentValue=this.viewModel.get_currentFraction()*this.viewModel.get_pixelWidth();$0.isPercentageMode=true;$0.length=this.viewModel.get_pixelWidth();this.singleSlider=new tableau.mobile.widget.catmode.popup.SingleSlider($0);var $1=this.get_template().get_domRoot().get(0);this.singleSlider.setParentContainerNode($1);this.singleSlider.placeAt($1);this.singleSlider.setParentContainerNode($1);this.singleSlider.add_onPopupSliderChange(ss.Delegate.create(this,this.handleIntermediateChange));this.singleSlider.add_onPopupSliderDragEnd(ss.Delegate.create(this,this.applyChangeFromSlider));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.singleSlider.remove_onPopupSliderChange(ss.Delegate.create(this,this.handleIntermediateChange));this.singleSlider.remove_onPopupSliderDragEnd(ss.Delegate.create(this,this.applyChangeFromSlider));this.singleSlider.destroy();})));},onAddedToDom:function(){tab.ContinuousSliderMobile.callBaseMethod(this, 'onAddedToDom');this.singleSlider.startup();},applyChangeFromSlider:function(value){this.viewModel.set_currentFraction(value/this.viewModel.get_pixelWidth());},handleIntermediateChange:function(value,updated){this.viewModel.applyIntermediateChange(value);}}
tab.$create_TapFeedbackArgs=function(parent,newEvent,finishedCallback){var $o={};$o.parent=parent;$o.event=newEvent;$o.finishedCallback=finishedCallback;return $o;}
tab.$create_PressFeedbackArgs=function(parent,newEvent){var $o={};$o.parent=parent;$o.event=newEvent;return $o;}
Type.registerNamespace('tableau.mobile');Type.registerNamespace('tableau.mobile.widget.ui');tab.PaneTableViewMobile=function(paneTableVM){this.$3_6=-1;tab.PaneTableViewMobile.initializeBase(this,[paneTableVM,new tab.PaneTableTemplateMobile()]);this.$3_0=[];this.$3_0.addRange(tab.PaneTableView.scrollableYRegions);this.$3_0.remove('viz');this.$3_0.addRange(tab.PaneTableView.scrollableXRegions);this.init();}
tab.PaneTableViewMobile.prototype={$3_0:null,$3_1:null,$3_2:null,$3_3:null,$3_4:false,$3_5:false,$3_7:false,get_$3_8:function(){return this.$3_7;},set_$3_8:function($p0){this.$3_7=$p0;return $p0;},get_mapsSearchViewMobile:function(){return this.mapsSearchView;},getDomNodeForContentRegion:function(domNode){return domNode.get(0).firstChild;},makeFloatingZoomToolbar:function(viewNode){var $0=new tab.FZTOpsMobile(this);var $1=new tab.FloatingZoomToolbarMobile(viewNode.get(0),$0,this.shouldUseFullFloatingZoomToolbar(),this.get_mapsSearchEnabled());$1.addClass(tab.PaneTableView.suppressVizTooltipsAndOverlays);return $1;},makeRegions:function(){var $0=this.listNonVizRegions();var $1=function(){
return false;};var $enum1=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum1.moveNext()){var $3=$enum1.current;var $4=$0[$3];this.regions[$3]=new tab.TiledViewerRegionMobile($3,$4.get(0).firstChild,this.get_session(),$1,this.get_sheetid(),this.get_paneTableVM());}var $2=ss.Delegate.create(this,this.allowPanZoom);this.regions['viz']=new tab.TiledViewerRegionMobile('viz',this.dom.view.get(0).firstChild,this.get_session(),$2,this.get_sheetid(),this.get_paneTableVM());},makeTooltip:function(){var $0=null;if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){$0=new tab.TooltipContextProvider(this.get_paneTableVM().get_visualModel().get_selectionsModel());}var $1=this.get_paneTableVM().get_visualModel().get_tooltipMode();var $2=ss.isNullOrUndefined(tsConfig.allow_tooltip)||tsConfig.allow_tooltip;if(!$2||$1==='none'){return new tab.TooltipDisabledMode($0,this.get_visualId());}else if($1==='smooth'&&!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.selectionToolsMobile)){return new tab.TooltipResponsiveMode($0,this.get_visualId());}else{return new tab.TooltipLegacyMode($0,this.get_visualId());}},makeInputHandlers:function(){var $0;this.$3_1={};this.$3_2={};var $1=this.listNonVizRegions();var $2=spiff.$create_MobileScrollerOptions();$2.displayPolicy='never';var $enum1=ss.IEnumerator.getEnumerator(Object.keys($1));while($enum1.moveNext()){var $3=$enum1.current;var $4=$1[$3];$0=this.$3_B(this.$3_32($3));this.$3_C($3,$4,$0,$2);}$0=this.$3_B(this.$3_32('viz'));$2.displayPolicy='active';this.$3_C('viz',this.dom.view,$0,$2);spiff.DragDropManager.add_dragStarted(ss.Delegate.create(this,this.$3_9));spiff.DragDropManager.add_dragEnded(ss.Delegate.create(this,this.$3_A));},$3_9:function($p0){if(ss.isValue(spiff.DragDropManager.get_lastDragEvent())){this.checkForSuppressTooltipsAndOverlays(spiff.DragDropManager.get_lastDragEvent().target);}},$3_A:function($p0){this.get_vizToolTip().get_tooltip().setSuppressTooltip(false);},destroyInputHandlers:function(){if(ss.isValue(this.$3_1)){var $dict1=this.$3_1;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};$0.value.dispose();}Object.clearKeys(this.$3_1);this.$3_1=null;}if(ss.isValue(this.$3_2)){var $dict3=this.$3_2;for(var $key4 in $dict3){var $1={key:$key4,value:$dict3[$key4]};$1.value.dispose();}Object.clearKeys(this.$3_2);this.$3_2=null;}if(ss.isValue(this.regions)){var $dict5=this.regions;for(var $key6 in $dict5){var $2={key:$key6,value:$dict5[$key6]};$2.value.destroy();}Object.clearKeys(this.regions);}spiff.DragDropManager.remove_dragStarted(ss.Delegate.create(this,this.$3_9));spiff.DragDropManager.remove_dragEnded(ss.Delegate.create(this,this.$3_A));},makeMapsSearchViewConnections:function(){if(ss.isValue(this.mapsSearchView)){this.mapsSearchView.get_compositeSearchWidget().get_textInputView().get_inputElement().focusin(ss.Delegate.create(this,function($p1_0){
this.get_vizToolTip().get_tooltip().close();}));this.mapsSearchView.get_compositeSearchWidget().get_textInputView().get_inputElement().keypress(ss.Delegate.create(this,function($p1_0){
this.get_vizToolTip().get_tooltip().close();}));}},makeRegionContentProviders:function(){var $0=ss.Delegate.create(this,function($p1_0,$p1_1){
this.regions['viz'].reset();});this.makeRegionContentProvidersHelper(this.dom.view,$0);this.$3_D();},makeTiledWindow:function(domNode,sessionRef,controllerRef,getRID,optionalCallback){return this.makeTiledWindowHelper(domNode,sessionRef,controllerRef,getRID,optionalCallback,false);},refreshScrollingAndDrilling:function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$3_2));while($enum1.moveNext()){var $0=$enum1.current;this.$3_2[$0].refresh();}},setRegionGeometryHelper:function(domNode,marginBoxSpec){if(ss.isValue(domNode.get(0).firstChild)&&$(domNode.get(0).firstChild).hasClass('tvMScrollContainer')){var $0=tab.$create_Rect(0,0,marginBoxSpec.w,marginBoxSpec.h);tab.DomUtil.setMarginBox(domNode.get(0).firstChild,$0);}},allowPanZoom:function(){return this.isMap;},maybeShowOverlayImages:function(ubertipModel){},checkForHoverOverlay:function(){},updateRegionContentProvider:function(regionKey,canvasView){tab.PaneTableViewMobile.callBaseMethod(this, 'updateRegionContentProvider',[regionKey,canvasView]);this.$3_32(regionKey).$1_C();},$3_B:function($p0){var $0=spiff.$create_EventHandleSpec();$0.potentialTap=ss.Delegate.create(this,function($p1_0){
this.$3_E($p0,$p1_0);});$0.tap=ss.Delegate.create(this,function($p1_0){
this.$3_10($p0,$p1_0);});$0.lastTouch=ss.Delegate.create(this,function($p1_0){
this.$3_25($p0,$p1_0);});if(tsConfig.allow_filter||!this.isMap){$0.dragStart=ss.Delegate.create(this,function($p1_0){
this.$3_12($p0,$p1_0);});$0.dragMove=ss.Delegate.create(this,function($p1_0){
this.$3_13($p0,$p1_0);});$0.dragEnd=ss.Delegate.create(this,function($p1_0){
this.$3_14($p0,$p1_0);});}if($p0.get_regionPart()==='viz'){$0.firstTouch=ss.Delegate.create(this,function($p1_0){
this.$3_24($p0,$p1_0);});$0.doubleTap=ss.Delegate.create(this,function($p1_0){
this.$3_11($p0,$p1_0);});$0.potentialPress=ss.Delegate.create(this,function($p1_0){
this.$3_19($p0,$p1_0);});$0.cancelPotentialPress=ss.Delegate.create(this,function($p1_0){
this.$3_1A($p0,$p1_0);});$0.pressDragStart=ss.Delegate.create(this,function($p1_0){
this.$3_26($p0,$p1_0);});$0.pressDragMove=ss.Delegate.create(this,function($p1_0){
this.$3_27($p0,$p1_0);});$0.pressDragEnd=ss.Delegate.create(this,function($p1_0){
this.$3_28($p0,$p1_0);});if(tsConfig.allow_filter&&this.isMap){$0.pinchStart=ss.Delegate.create(this,function($p1_0){
this.$3_16($p0,$p1_0);});$0.pinchMove=ss.Delegate.create(this,function($p1_0){
this.$3_17($p0,$p1_0);});$0.pinchEnd=ss.Delegate.create(this,function($p1_0){
this.$3_18($p0,$p1_0);});}}return $0;},$3_C:function($p0,$p1,$p2,$p3){var $0=$.extend(spiff.$create_MobileScrollerOptions(),$p3);this.$3_1[$p0]=new spiff.TableauEventHandler($p1.get(0),$p2);this.$3_2[$p0]=new spiff.MobileScroller($p1.get(0).firstChild.firstChild,null,$0);},$3_D:function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$3_2));while($enum1.moveNext()){var $0=$enum1.current;this.$3_2[$0].set_isCssScrollingEnabled(Type.canCast(this.regions[$0].get_contentProvider(),tab.TiledWindow));this.$3_32($0).setScroller(this.$3_2[$0]);this.$3_32($0).$1_C();}},$3_E:function($p0,$p1){tab.FeedbackMobile.createTapFeedback(this.dom.get_domRoot().closest('.tab-dashboard').get(0),$p1);$p1.stopPropagation();},$3_F:function(){if(ss.isValue(this.mapsSearchView)&&this.get_mapsSearchEnabled()){this.mapsSearchView.get_compositeSearchWidget().removeList();this.mapsSearchView.set_isVisible(true);}},$3_10:function($p0,$p1){$p1.stopPropagation();if(ss.isValue(this.mapsSearchView)){this.mapsSearchView.get_compositeSearchWidget().get_textInputView().get_inputElement().blur();}this.get_vizToolTip().onTap();this.disposeOfOverlayImages();var $0=$p0.toLocalCoordsEvent($p1);var $1=tab.PointUtil.add($0,tab.RecordCast.dojoCoordsAsPoint($p0.getLocalOffset()));var $2=tab.ResolveSelectAction.fromNormalizedEvent($p1);if(this.$3_7&&$2==='simple'){$2='toggle';}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.handleLocalTap($p0,$2,$1,$0);}else{var $3=ss.Delegate.create(this,function(){
var $1_0=tab.PaneTableView.guessTooltipTargetTypeFromRegion($p0.get_regionPart());this.get_vizToolTip().singleSelectCoordinates($1,$0,$p0.get_regionPart(),$1_0);});var $4=tab.$create_RectXY($0.x,$0.y,0,0);tab.SelectionClientCommands.selectRectRegionAndDoUbertip($p0.get_regionPart(),$4,$2,this.get_paneTableVM().get_visualId(),$3);}this.$3_F();},$3_11:function($p0,$p1){$p1.preventDefault();$p1.stopPropagation();this.doDoubleTap($p0,$p1,2);},$3_12:function($p0,$p1){switch($p0.get_currentPointerToolMode()){case 'rectSelect':case 'radialSelect':case 'lassoSelect':this.$3_1B($p0,$p1);break;case 'pan':this.$3_1C($p0,$p1);break;case 'singleSelect':this.$3_1D($p0,$p1);break;default:break;}},$3_13:function($p0,$p1){if(this.$3_5){this.$3_1E($p0,$p1);}else if($p0.get_currentPointerToolMode()==='singleSelect'){this.$3_20($p0,$p1);}else{this.$3_1F($p0,$p1);}},$3_14:function($p0,$p1){if(this.$3_5){this.$3_21($p0,$p1);}else{this.$3_22($p0,$p1);}this.$3_F();},$3_15:function(){return (this.isMap&&this.isOneVisiblePane())||this.$3_4;},$3_16:function($p0,$p1){if(this.allowPanZoom()){var $0=this.resolvePane($p0.toLocalCoordsEvent($p1));this.$3_4=true;$p0.$1_7($p1,$0);}},$3_17:function($p0,$p1){this.disposeOfOverlayImages();var $0=this.resolvePane($p0.toLocalCoordsEvent($p1));$p0.$1_8($p1,$0,this.geometry.pi);},$3_18:function($p0,$p1){var $0=this.resolvePane($p0.toLocalCoordsEvent($p1));$p0.$1_9($p1,$0,this.geometry.pi);this.get_vizToolTip().onPinchEnd($p0.$1_B());this.$3_F();},$3_19:function($p0,$p1){if(this.$3_33($p0)){this.disposeOfOverlayImages();var $0=this.dom.get_domRoot();this.$3_3=tab.FeedbackMobile.createPressFeedback($0.get(0),$p1);}},$3_1A:function($p0,$p1){if(ss.isValue(this.$3_3)){this.$3_3.onPressEnd();}},$3_1B:function($p0,$p1){if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.enableUserInteraction(false);}this.$3_5=true;$p0.$1_4($p1);},$3_1C:function($p0,$p1){if(this.$3_15()){var $0=this.resolvePane($p0.toLocalCoordsEvent($p1));$p0.$1_7($p1,$0);}else{this.$3_29($p0,$p1,'touchStart');}},$3_1D:function($p0,$p1){$p1.preventDefault();},$3_1E:function($p0,$p1){$p1.preventDefault();$p0.$1_5($p1);this.checkForDragOverlays();},$3_1F:function($p0,$p1){if(this.$3_15()){this.disposeOfOverlayImages();var $0=this.resolvePane($p0.toLocalCoordsEvent($p1));$p0.$1_8($p1,$0,this.geometry.pi);}else{this.$3_29($p0,$p1,'touchMove');}},$3_20:function($p0,$p1){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&$p0.get_regionPart()==='viz'){this.disposeOfOverlayImages();var $0=$p0.toLocalCoordsEvent($p1);var $1=tab.PointUtil.add($0,tab.RecordCast.dojoCoordsAsPoint($p0.getLocalOffset()));$p0.get_shapeSelector().setSingleSelectPoint($0);var $2=tab.$create_RectXY($0.x,$0.y,1,1);var $3=$p0.hitTestMarks($2,true);var $4=$p0.hitTestVisualPartsHelper($2,true,$3);var $5=tab.HitTestResult.tieBreakHits($3,$4);if($5.get_hitType()!==tab.HitResultHitType.noHit&&$5.get_hitObjectType()===tab.HitResultObjectType.mark){var $6=this.get_paneTableVM().get_visualModel().get_selectionsModel();var $7=$6.get_tupleSelection().get_ids().contains($5.get_id());var $8=tab.SceneUtils.getPaneDescriptorKeyFromTupleId($5.get_id(),this.get_paneTableVM().get_scene().get_scene());this.get_vizToolTip().hoverOverObject($1,$0,$5.get_id(),$7,$8,'mark',$p0.get_regionPart());}else{this.get_vizToolTip().hoverOverWhitespace($1,$p0.get_regionPart());}}},$3_21:function($p0,$p1){var $0=this.resolvePane($p0.toLocalCoordsEvent($p1));this.$3_5=true;$p0.$1_6($p1,$0);if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.enableUserInteraction(true);}},$3_22:function($p0,$p1){if(this.$3_15()){var $0=this.resolvePane($p0.toLocalCoordsEvent($p1));$p0.$1_9($p1,$0,this.geometry.pi);this.get_vizToolTip().onDragEnd($p0.$1_B());}else{this.$3_29($p0,$p1,'touchEnd');}},$3_23:function($p0,$p1){this.get_vizToolTip().onDragEnd();},$3_24:function($p0,$p1){if(ss.isNullOrUndefined(this.zoomToolbar)){this.createZoomToolbar();}if(ss.isValue(this.mapsSearchView)){this.mapsSearchView.get_compositeSearchWidget().removeList();this.get_mapsSearchViewMobile().removeMobileKeyboard();}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&$p0.get_regionPart()==='viz'&&!this.get_vizToolTip().get_isTooltipShown()&&!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.responsiveUi)){var $0=$p0.toLocalCoordsEvent($p1);$p0.get_shapeSelector().setSingleSelectPoint($0);var $1=tab.$create_RectXY($0.x,$0.y,1,1);var $2=$p0.hitTestMarks($1,true);var $3=$p0.hitTestVisualPartsHelper($1,true,$2);var $4=tab.HitTestResult.tieBreakHits($2,$3);switch($4.get_hitObjectType()){case tab.HitResultObjectType.mark:this.updateOverlayTarget($4.get_id(),'press','marks');break;case tab.HitResultObjectType.referenceLine:case tab.HitResultObjectType.trendLine:this.updateOverlayTarget($4.get_id(),'press',$3[0].get_visualPart());break;}}},$3_25:function($p0,$p1){var $0=$p0.$1_A();this.$3_4=false;this.disposeOfOverlayImages();if(ss.isValue(this.$3_3)){this.$3_3.onPressEnd($p1);this.$3_3=null;}this.showFloatingZoomToolbar(true);if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.resetVisualState();}if(!ss.isValue($0)){return;}if(this.$3_5){var $1=Type.safeCast(this.regions['viz'],tab.TiledViewerRegionMobile);if($p0!==$1){this.$3_21($1,$p1);this.$3_25($1,$p1);}else{this.$3_5=false;this.$3_2C($p1,$p0);}if(!tab.FeatureParamsLookup.getBool(tab.FeatureParam.selectionToolsMobile)){this.resetPointerToolMode();}return;}if(Math.abs($0.scale-1)>0.05){var $2=$p0.toLocalCoords(tab.$create_Point($p1.get_gestureInfo().startX,$p1.get_gestureInfo().startY));this.$3_2E($p0,$0,$2);}else if(!!$0.x||!!$0.y){var $3=tab.$create_Point($0.x,$0.y);this.$3_2D($p0,$3);}},$3_26:function($p0,$p1){if($p0.isSelectingToolActive()||this.$3_33($p0)){this.$3_1B($p0,$p1);}},$3_27:function($p0,$p1){if($p0.isSelectingToolActive()||this.$3_33($p0)){this.$3_1E($p0,$p1);}},$3_28:function($p0,$p1){if($p0.isSelectingToolActive()||this.$3_33($p0)){this.$3_21($p0,$p1);}},$3_29:function($p0,$p1,$p2){this.disposeOfOverlayImages();this.$3_31($p0,$p1);var $0=0;var $1=null;var $enum1=ss.IEnumerator.getEnumerator(this.$3_0);while($enum1.moveNext()){var $2=$enum1.current;var $3=this.$3_2[$2];var $4=$3[$p2]($p1);$0=Math.max($0,$3.get_transitionTime());if($4){this.get_vizToolTip().onScroll();}if($2==='viz'){$1=this.$3_2['viz'].get_scrollPos();}}if($p2==='touchEnd'){this.$3_2A($($p1.currentTarget));}if(ss.isValue($1)){this.set_scrollPosition($1);}if(this.$3_6>=0){tab.WindowHelper.cancelAnimationFrame(this.$3_6);this.$3_6=-1;this.$3_2B(0);}if(!$0){this.$3_2B(1);}else{var $5=Date.get_now().getTime();var $6=$0;var $7=this.$3_2['viz'].isResettingAfterBounce();var $8=null;$8=ss.Delegate.create(this,function(){
var $1_0=Date.get_now().getTime()-$5;if($1_0>$6&&!$7){var $1_1=this.$3_2['viz'];var $1_2=$1_1.isResettingAfterBounce()||$1_1.isPointOutOfBounds($1_1.get_scrollPos());if($1_2){$5=$5+$1_0;$1_0-=$0;$6=spiff.MobileScroller.defaultScrollTiming;$7=true;}}if($1_0>$6){this.$3_2B(1);}else{var $1_3=($1_0)/$6;this.$3_2B($1_3);this.$3_6=tab.WindowHelper.requestAnimationFrame($8);}});this.$3_6=tab.WindowHelper.requestAnimationFrame($8);}},$3_2A:function($p0){var $0='caption';if($p0.hasClass('tab-tvView')){$0='viz';}else if($p0.hasClass('tab-tvYLabel')){$0='yheader';}else if($p0.hasClass('tab-tvLeftAxis')){$0='leftaxis';}else if($p0.hasClass('tab-tvRightAxis')){$0='rightaxis';}else if($p0.hasClass('tab-tvXLabel')){$0='xheader';}else if($p0.hasClass('tab-tvTopAxis')){$0='topaxis';}else if($p0.hasClass('tab-tvBottomAxis')){$0='bottomaxis';}if(this.$3_2[$0].get_canScrollY()){var $enum1=ss.IEnumerator.getEnumerator(tab.PaneTableView.scrollableYRegions);while($enum1.moveNext()){var $1=$enum1.current;if(this.$3_2[$1].get_scrollPos().y!==this.$3_2[$0].get_scrollPos().y){this.$3_2[$1].scrollTo(-this.$3_2[$1].get_scrollPos().x,-this.$3_2[$0].get_scrollPos().y);}}}if(this.$3_2[$0].get_canScrollX()){var $enum2=ss.IEnumerator.getEnumerator(tab.PaneTableView.scrollableXRegions);while($enum2.moveNext()){var $2=$enum2.current;if(this.$3_2[$2].get_scrollPos().x!==this.$3_2[$0].get_scrollPos().x){this.$3_2[$2].scrollTo(-this.$3_2[$0].get_scrollPos().x,-this.$3_2[$2].get_scrollPos().y);}}}},$3_2B:function($p0){var $enum1=ss.IEnumerator.getEnumerator(this.$3_0);while($enum1.moveNext()){var $0=$enum1.current;var $1=this.$3_2[$0];$1.setScrollTransitionPoint($p0);}},$3_2C:function($p0,$p1){this.disposeOfOverlayImages();var $0=tab.ResolveSelectAction.fromNormalizedEvent($p0);if(this.$3_7&&$0==='simple'){$0='range';}var $1=$p1.get_shapeSelector().get_tooltipAnchor();var $2=$p1.get_regionPart();var $3=tab.PointUtil.add($1,tab.RecordCast.dojoCoordsAsPoint($p1.getLocalOffset()));var $4=ss.Delegate.create(this,function(){
this.get_vizToolTip().multiSelectComplete($3,$p1.get_shapeSelector().get_hitTestingBox(),$2);});if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){$p1.doSelectMarkAndUbertipFromSelectionShape($0,$4);}else{$p1.get_shapeSelector().sendSelectionCommand($2,$0,this.get_visualId(),$4);}},$3_2D:function($p0,$p1){var $0=function(){
$p0.reset();};this.get_session().pan($p0.get_regionPart(),tab.$create_Point(0,0),$p1,$0);},$3_2E:function($p0,$p1,$p2){var $0=tab.$create_RectXY(0,0,0,0);var $1=this.geometry.pi.xWidths[0];var $2=this.geometry.pi.yHeights[0];$p2.x%=$1;$p2.y%=$2;$0.w=parseInt(($1/$p1.scale));$0.h=parseInt(($2/$p1.scale));$0.x=parseInt((($1/2)-($0.w/2)-($p1.x/$p1.scale)));$0.y=parseInt((($2/2)-($0.h/2)-($p1.y/$p1.scale)));this.get_session().zoomIn($p0.get_regionPart(),$0,$p2);},$3_2F:function($p0){return tab.PaneTableView.scrollableXRegions.contains($p0);},$3_30:function($p0){return tab.PaneTableView.scrollableYRegions.contains($p0);},$3_31:function($p0,$p1){if(!this.$3_2F($p0.get_regionPart())){$p1.get_gestureInfo().pageX=$p1.get_gestureInfo().startX;}if(!this.$3_30($p0.get_regionPart())){$p1.get_gestureInfo().pageY=$p1.get_gestureInfo().startY;}},$3_32:function($p0){return Type.safeCast(this.regions[$p0],tab.TiledViewerRegionMobile);},$3_33:function($p0){return $p0.get_currentPointerToolMode()==='pan'||!tab.FeatureParamsLookup.getBool(tab.FeatureParam.selectionToolsMobile);}}
tab.FZTOpsMobile=function(tv){this.tv=tv;}
tab.FZTOpsMobile.prototype={tv:null,zoomHome:function(){this.tv.zoomHome();},zoomIn:function(){},zoomOut:function(){},setPointerToolMode:function(pointerToolMode,isLocked){this.tv.setPointerToolMode(pointerToolMode,isLocked);},setAppendMode:function(isAppending){this.tv.set_$3_8(isAppending);},anyButtonTouched:function(){if(ss.isValue(this.tv.get_mapsSearchViewMobile())){this.tv.get_mapsSearchViewMobile().removeMobileKeyboard();}},defaultPointerToolMode:function(){return this.tv.defaultPointerToolMode();}}
tab.PaneTableTemplateMobile=function(){tab.PaneTableTemplateMobile.initializeBase(this,[$(tab.PaneTableTemplateMobile.htmlTemplate)]);}
tab.ParameterControlViewMobile=function(viewModel){tab.ParameterControlViewMobile.initializeBase(this,[viewModel]);}
tab.ParameterControlViewMobile.prototype={makeParameterControl:function(oProps){return new tableau.mobile.widget.ParameterControlMobile(oProps);}}
tab.QuickFilterDisplayViewMobile=function(viewModel){tab.QuickFilterDisplayViewMobile.initializeBase(this,[viewModel]);}
tab.QuickFilterDisplayViewMobile.prototype={makeFilterPanel:function(oProps){return new tableau.mobile.widget.FilterPanelMobile(oProps);}}
tab.BasePopupMobile=function(){this.templateString=tab.BasePopupMobile.basePopupTemplate;this.$1_9=new tab.DisposableHolder();tab.BasePopupMobile.initializeBase(this);}
tab.BasePopupMobile.prototype={touchHandler:null,$1_0:null,$1_1:null,$1_2:1,$1_3:0,$1_4:0,$1_5:null,$1_6:null,$1_7:'',qf:null,widgetsInTemplate:true,$1_8:false,_tools:null,optionsWidget:null,$1_A:null,_titleContents:null,_borderNode:null,_shadowNode:null,_title:null,$1_B:null,_searchPane:null,_layoutContainer:null,_applyPane:null,containerNode:null,contentContainerNode:null,domSearch:null,domOptions:null,domContent:null,domApplyButton:null,list:null,$1_C:null,$1_D:null,add_dispatchItemsChanged:function(value){this.$1_E=ss.Delegate.combine(this.$1_E,value);},remove_dispatchItemsChanged:function(value){this.$1_E=ss.Delegate.remove(this.$1_E,value);},$1_E:null,get_searchWidget:function(){return this.$1_A;},set_searchWidget:function(value){this.$1_A=value;return value;},get_title:function(){return this.$1_B;},set_title:function(value){this.$1_B=value;return value;},get_list:function(){return this.list;},set_list:function(value){this.list=value;return value;},get_content:function(){return this.$1_C;},set_content:function(value){this.$1_C=value;return value;},get_$1_F:function(){return this.qf;},get_$1_10:function(){return this.qf;},update:function(popupParams){if(this.$1_8){if(!!this._tools){this._tools.update(this.qf);}if(!!this.optionsWidget){this.optionsWidget.update(this.qf);}if(!!this.get_searchWidget()){this.get_searchWidget().update(this.qf);}}if(!!this.get_$1_10().oFilter){if(this.get_$1_10().oFilter.all){dojo.addClass(this.domNode,'CFAll');}else{dojo.removeClass(this.domNode,'CFAll');}if(this.get_$1_10().oFilter.exclude){dojo.addClass(this.domNode,'CFExclusive');}else{dojo.removeClass(this.domNode,'CFExclusive');}}if((typeof(this._refreshContent)==='function')){this._refreshContent(popupParams);this.doResize(null,null);}},postMixInProperties:function(){},postCreate:function(){this.$1_D=new spiff.MoveDragSource($(this._title),$(this.containerNode));this.$1_D.add_endAction(ss.Delegate.create(this,this.$1_11));this.touchHandler=new spiff.TableauEventHandler(this.domNode,null);spiff.GlobalTouchWatcher.add_firstTouch(ss.Delegate.create(this,this.onGlobalFirstTouch));this.$1_9.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_D.remove_endAction(ss.Delegate.create(this,this.$1_11));spiff.GlobalTouchWatcher.remove_firstTouch(ss.Delegate.create(this,this.onGlobalFirstTouch));})));this._layoutContainer.resize();},$1_11:function($p0){var $0=$(this.containerNode).position();this.$1_5=$0.left;this.$1_6=$0.top;},createControls:function(){if(this.$1_8){return;}this.$1_8=true;this._tools=new tableau.mobile.widget.catmode.popup.ControlsToolbar({qf:this.get_$1_10()},this._tools);if(this.get_$1_10().declaredClass.indexOf('Quantitative')<0&&this.get_$1_10().declaredClass.indexOf('Relative')<0&&this.get_$1_10().mode!=='typeinlist'){if(this.$1_21()){this.set_searchWidget(this.$1_20());}else{this.set_searchWidget(this.$1_1F());}}var $0=this.get_$1_10().oFilter.all;if($0){dojo.addClass(this.domNode,'CFAll');}else{dojo.removeClass(this.domNode,'CFAll');}if(this.get_$1_10().oFilter.exclude){dojo.addClass(this.domNode,'CFExclusive');}else{dojo.removeClass(this.domNode,'CFExclusive');}if(!this.get_$1_10().shouldHideContextMenu()){this.optionsWidget=this.$1_1E({qf:this.get_$1_10(),popup:this,hideExclusiveVsInclusiveInMenu:this._tools.hideExclusiveVsInclusiveInMenu,hideSingleVsMultipleInMenu:this._tools.hideSingleVsMultipleInMenu,hideNullControls:this._tools.hideNullControls});}if(this.get_$1_10().declaredClass.indexOf('Categorical')>=0&&this.get_$1_F().shouldDeferChanges()){this.get_$1_F().get_modeContents().appendApplyButton($(this.domApplyButton));}if(!!this.get_searchWidget()){this.$1_12();this.get_searchWidget().startup();}var $1=ss.Delegate.create(this,function(){
if(!!this.get_searchWidget()){this.get_searchWidget().hideUI();}this.get_$1_10().toggleDomain();if((typeof('this'._resetScrollPos)==='function')){this._resetScrollPos();}});this._tools.add_domainTapped($1);this.$1_9.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this._tools.remove_domainTapped($1);})));var $2=ss.Delegate.create(this,function(){
if(!!this.get_searchWidget()){this.get_searchWidget().hideUI();}this.get_$1_10().toggleReset();});this._tools.add_resetTapped($2);this.$1_9.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this._tools.remove_resetTapped($2);})));if(!!this.optionsWidget){var $3=ss.Delegate.create(this,function(){
this.optionsWidget.toggleUI();if(!!this.get_searchWidget()){this.get_searchWidget().hideUI();}this.doResize(null,null);});this._tools.add_optionsTapped($3);this.optionsWidget.add_hideUICalled(ss.Delegate.create(this,this.$1_13));this.optionsWidget.add_handleOptionsSelection(ss.Delegate.create(this,this.$1_15));this.$1_9.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this._tools.remove_optionsTapped($3);this.optionsWidget.remove_hideUICalled(ss.Delegate.create(this,this.$1_13));this.optionsWidget.remove_handleOptionsSelection(ss.Delegate.create(this,this.$1_15));})));}},$1_12:function(){if(!!this.get_searchWidget()){var $0=ss.Delegate.create(this,function(){
this.get_searchWidget().toggleUI();if(!!this.optionsWidget){this.optionsWidget.hideUI();}this.doResize(null,null);});this._tools.add_searchTapped($0);this.get_searchWidget().add_onXButtonClickCalled(ss.Delegate.create(this,this.doResize));this.get_searchWidget().add_attachItemsChangedHandlerCalled(ss.Delegate.create(this,this.$1_16));this.get_searchWidget().add_hideUICalled(ss.Delegate.create(this,this.$1_14));this.$1_9.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this._tools.remove_searchTapped($0);this.get_searchWidget().remove_onXButtonClickCalled(ss.Delegate.create(this,this.doResize));this.get_searchWidget().remove_attachItemsChangedHandlerCalled(ss.Delegate.create(this,this.$1_16));this.get_searchWidget().remove_hideUICalled(ss.Delegate.create(this,this.$1_14));})));}},$1_13:function(){this._tools.setOptionsButtonState(false);this.doResize(null,null);},$1_14:function(){this._tools.setSearchButtonState(false);this.doResize(null,null);},$1_15:function(){this.hide();},$1_16:function($p0){var $0=$p0;var $1=ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=$p1_0[0].rowState;if(this.get_$1_10().declaredClass==='tableau.mobile.widget.HierarchicalFilterMobile'){var $1_1=this.get_searchWidget()._applyChangesHier();this.get_searchWidget().notifyParentFilterOfChanged($1_1);}else if(this.$1_21()){return;}else if(this.get_$1_10().mode==='slider'){this.updateFromSearch($p1_1);}else if(this.get_$1_F().isSingleSelect()){this.get_list().singleValueHitTest($p1_1);}else{this.get_list().multiValueHitTest($p1_1,$1_0);}});$p0.add_dispatchItemsChanged($1);this.$1_9.add(new tab.CallOnDispose(function(){
$p0.remove_dispatchItemsChanged($1);}));var $2=$0.getListSize();dojo.style($0.scrollWrapper,'height',Math.max(Math.min(200,$2),0)+'px');$0.iscrollObj.refresh();this.doResize(null,null);},dispose:function(){this.$1_9.dispose();this.$1_D.dispose();this.touchHandler.dispose();},destroy:function(){if(!!this._tools&&(typeof(this._tools.destroy)==='function')){this._tools.destroy();}this.inherited(arguments);this.dispose();},onGlobalFirstTouch:function(e,cancelCallback){if(this.isVisible()&&!tab.DomUtil.isAncestorOf(this.domNode,e.target)){this.hide();if(ss.isValue(cancelCallback)){cancelCallback(false);}}},isVisible:function(){return dojo.style(this.containerNode,'visibility')==='visible';},doResize:function(newPageX,newPageY){newPageX=(newPageX||this.$1_5);newPageY=(newPageY||this.$1_6);this.layoutPopupUsingAsyncHelpers(newPageX,newPageY);},hide:function(){this.prepareToHide();dojo.style(this.containerNode,'visibility','hidden');dojo.style(this.containerNode,'display','none');},prepareToHide:function(){if(!!this.get_searchWidget()){this.get_searchWidget().hideUI();}if(!!this.optionsWidget){this.optionsWidget.hideUI();}},show:function(newPageX,newPageY){if(!ss.isValue(this.$1_5)){this.$1_5=newPageX;}if(!ss.isValue(this.$1_6)){this.$1_6=newPageY;}dojo.style(this.containerNode,'display','block');this.layoutPopupUsingAsyncHelpers(this.$1_5,this.$1_6);var $0=function($p1_0,$p1_1){
dojo.style($p1_0,'visibility','visible');};var $1=dojo.partial($0,this.containerNode);window.setTimeout(dojo.partial($1,this.containerNode),50);},layoutPopupUsingAsyncHelpers:function(newPageX,newPageY){var $0=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
var $1_0=ss.Delegate.create(this,function($p2_0){
if(!ss.isNullOrUndefined(this.domNode)){this.layoutPopup(newPageX,newPageY,$p1_0,$p2_0);}});tab.BrowserViewport.getViewport($1_0);});tableau.mobile.util.scaling.doWithScaleFactor($0);},layoutPopup:function(newPageX,newPageY,sf,viewportRect){var $0={};var $1=false;var $2=1/sf;if(this.$1_2!==$2){this.$1_2=$2;$1=true;}this.$1_17(sf,viewportRect);dojo.mixin($0,dojo.marginBox(this.containerNode));this.$1_1A($2,$1);if(ss.isValue(newPageX)){this.$1_19($0,newPageX,newPageY);this.$1_1B($0,viewportRect);this.$1_5=$0.l;this.$1_6=$0.t;}dojo.marginBox(this.containerNode,$0);tab.DomUtil.setElementPosition($(this.containerNode),$0.l,$0.t);},$1_17:function($p0,$p1){var $0=(!!this._searchPane&&!!this._searchPane.domNode)?dojo.marginBox(this._searchPane.domNode).h:0;this.$1_1D();var $1=(!!this._applyPane)?dojo.marginBox(this._applyPane.domNode).h:0;this.$1_1C();var $2=dojo.marginBox(this._title);var $3=this.$1_18($p1,$0,$1);var $4=this.getContentDimensions($3);this._layoutContainer.resize({h:$4.h+$0+$1});this.resizeSpecificContent({h:$4.h});var $5=$4.h+$2.h+$0+$1;dojo.style(this.containerNode,'height',($5+21)+'px');if(!!this._borderNode){dojo.style(this._borderNode,'height',($5+21)+'px');}if(!!this._shadowNode){dojo.style(this._shadowNode,'height',($5-3)+'px');}if(!!this.contentContainerNode){dojo.style(this.contentContainerNode,'height',Math.max($5,0)+'px');}},$1_18:function($p0,$p1,$p2){var $0;var $1;var $2;var $3;$0=1/this.$1_2;var $4=tabBootstrap.ViewerBootstrap.get_instance().getViewport();var $5=$p0.translatePositionToViewport(tab.$create_Point(0,0));var $6=$5.y;var $7=$6+tab.ApplicationModel.get_instance().get_workbook().get_outerDashboardPortSize().h;$1=Math.max($6,0);$2=Math.min($7,$4.h,$p0.get_dimensions().h);$3=$2-$1;$3=Math.floor(Math.max($3-((($p1+$p2)/$0)+60),0));$3=$0*$3;return $3;},$1_19:function($p0,$p1,$p2){$p0.l=$p1+window.pageXOffset;$p0.t=$p2+window.pageYOffset;},$1_1A:function($p0,$p1){if($p1){dojo.style(this.containerNode,'-webkit-transform','scale('+$p0+')');dojo.style(this.containerNode,'-webkit-transform-origin','left top');}},$1_1B:function($p0,$p1){var $0=tab.$create_Point($p0.l,$p0.t);var $1=$p1.translatePositionToViewport($0);var $2=Math.min($p1.get_dimensions().w-$1.x,$(window).width()-$0.x);var $3=Math.min($1.x,$0.x);var $4=$p0.w-$2;if($4>0){$p0.l-=Math.min($4,$3);}if($3<0){$p0.l+=Math.abs($3);}var $5=Math.min($p1.get_dimensions().h-$1.y,$(window).height()-$0.y);var $6=Math.min($1.y,$0.y);var $7=$p0.h-$5;if($7>0){$p0.t-=Math.min($7,$6);}if($6<0){$p0.t+=Math.abs($6);}},resizeSpecificContent:function(size){},$1_1C:function(){var $0=0;if(!!this._tools&&(typeof(this._tools._getButtonCount)==='function')){$0=this._tools._getButtonCount();}var $1=dojo.marginBox(this._title);dojo.style(this._titleContents,'width',($1.w-(($0*44)+10))+'px');},$1_1D:function(){dojo.style(this._applyPane.domNode,'width',this._layoutContainer.domNode.clientWidth+'px');},getContentDimensions:function(availableHeight){var $0=tab.$create_DojoCoords();$0.h=0;$0.l=0;$0.t=0;$0.w=0;$0.x=0;$0.y=0;return $0;},$1_1E:function($p0){return new tableau.mobile.widget.OptionsWidgetMobile($p0,this.domOptions);},$1_1F:function(){var $0=tab.$create_SearchWidgetQfProperty();$0.qf=this.qf;return new tableau.mobile.widget.SearchWidgetMobile($0,this.domSearch);},$1_20:function(){var $0=tab.$create_SearchWidgetQfProperty();$0.qf=this.qf;var $1=ss.Delegate.create(this,function($p1_0){
if(ss.isValue(this.get_list())){this.get_list().destroy();}this.set_list($p1_0);this.get_list().placeAt(this.domContent);if(ss.isValue(this.$1_E)){this.get_list().add_dispatchItemsChanged(this.$1_E);this.$1_9.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_list().remove_dispatchItemsChanged(this.$1_E);})));}});return new tableau.mobile.widget.FilteringSearchWidgetMobile($0,this.domSearch,$1);},$1_21:function(){return this.get_$1_10().declaredClass.indexOf('Categorical')>=0&&ss.isValue(this.get_$1_F())&&(this.get_$1_F().get_mode()==='checklist'||this.get_$1_F().get_mode()==='radiolist'||this.get_$1_F().get_mode()==='dropdown'||this.get_$1_F().get_mode()==='checkdropdown');}}
tab.CheckDropdownMobile=function(parent,div,attrs){tab.CheckDropdownMobile.initializeBase(this,[parent,div,attrs]);}
tab.CheckDropdownMobile.prototype={get_popup:function(){return this.get_inplaceMobile().get_popup();},instantiate:function(tuples,itemName,facet){this.setUpForPendingChanges();tab.CheckDropdownMobile.callBaseMethod(this, 'instantiate',[tuples,itemName,facet]);},createPopup:function(items,facet){var $0=tableau.format.formatColumnDisplayName(this.parent.get_oFilter(),false);var $1=tableau.mobile.widget.catmode.popup.ListPopup;var $2={};$2.listParams={};$2.listParams.filter=this.parent;$2.listParams.listItems=items;$2.listParams.bFacet=facet;$2.title=$0;$2.qf=this.parent;$2.listParams.itemFormatter=tableau.mobile.FilterItemMobile.formatListRowFilterItemHtml;this.get_inplaceMobile().createPopup($1,$2);this.get_inplaceMobile().connectPopupAndAttachHandler(ss.Delegate.create(this,this.$2_6));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_popup().get_list().remove_dispatchItemsChanged(ss.Delegate.create(this,this.$2_6));})));this.get_popup().createControls();},$2_6:function($p0,$p1){if(!$p0.length){return;}if($p1===tab.FilterItemUtil.allItemIndex){if(ss.isValue(this.$2_7())){this.$2_7().handleMobileItemClicked(tab.FilterItemUtil.allItemIndex,this.get_popup().get_list());}this.parent.doSelectAll($p0[0].rowState);}else if($p0.length===1){if(ss.isValue(this.$2_7())){this.$2_7().handleMobileItemClicked($p0[0].rowIndex,this.get_popup().get_list());}if(this.parent.get_oFilter().allChecked&&!$p0[0].rowState){this.parent.get_oFilter().allChecked=false;}this.parent.set_stateId(this.parent.get_stateId()+1);var $0=new tab.RawChange();var $1=new tab.Changelist();$0.setRange(new tab.IntegerRange($p0[0].rowIndex,$p0[0].rowIndex),$p0[0].rowState);$1.addChange($0);this.parent.applyChangesByChangelist($1);}},fetchChildNodeByIndex:function(index){return null;},fetchAllItem:function(){return null;},resetPendingVisuals:function(resetCheckState){var $0=$(this.get_popup().get_list()._scrollingListArea).find('.tile');tab.FilterItemUtil.resetPendingFilterItems($0.children().get(),resetCheckState);},$2_7:function(){return this.pendingManager;}}
tab.ChecklistMobile=function(parent,div,attrs){tab.ChecklistMobile.initializeBase(this,[parent,div,attrs]);this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.ChecklistMobile.prototype={touchHandler:null,iscroller:null,contentNode:null,$3_0:null,domNode:null,domBox:null,get_inplaceMobile:function(){return this.$3_0;},set_inplaceMobile:function(value){this.$3_0=value;return value;},get_popup:function(){return this.get_inplaceMobile().get_popup();},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.get_domBox():this.domBox;},instantiate:function(tuples,itemName,facet){this.setUpForPendingChanges();this.contentNode=dojo.doc.createElement('div');this.div.appendChild(this.contentNode);dojo.style(this.div,'overflow','hidden');this.get_inplaceMobile().setupTouchHandler(this.div);this.iscroller=new spiff.MobileScroller(this.contentNode,this.touchHandler,null);this.$3_1(tuples,itemName,facet);tableau.util.defer(ss.Delegate.create(this,function(){
this.createPopup(tuples,facet);}));},resetContent:function(tuples,itemName,facet){this.$3_2();var $0=$(this.contentNode);$0.empty();if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null;}this.$3_1(tuples,itemName,facet);this.createPopup(tuples,facet);},$3_1:function($p0,$p1,$p2){if(this.shouldUseAllItem()&&$p0.length>0){tab.Checklist.addAllItem($(this.contentNode),this.parent,$p1,$p2,tab.Checklist.shouldCheckAllItem(this.parent.get_oFilter(),this.pendingManager),tableau.mobile.FilterItemMobile.formatChecklistFilterItemHtml);}var $0=new tab.ChecklistContentFormatter(this.parent,$p1,tableau.mobile.FilterItemMobile.formatChecklistFilterItemHtml);if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=tab.TiledWidgetFactory.createListTiledWidget(this.parent,$p0,this.contentNode,$0,this.get_lineHeight());},shouldNotReinstantiate:function(){return ss.isValue(this.get_popup())&&ss.isValue(this.get_popup().get_searchWidget())&&this.get_popup().get_searchWidget().isShowingResults();},layout:function(contentSize,horizontalLayout){dojo.marginBox(this.div,contentSize);if(!!this.iscroller){this.iscroller.refresh();}},dispose:function(){this.$3_2();tab.ChecklistMobile.callBaseMethod(this, 'dispose');},destroy:function(){this.dispose();},$3_2:function(){this.get_inplaceMobile().disconnectPopup();this.get_inplaceMobile().destroyPopup();if(!!this.iscroller){this.iscroller.dispose();}},$3_3:function($p0,$p1){var $0=this.parent.get_oFilter().table;var $1={};$1.schema=$0.schema;$1.tuples=[];var $2=$0.tuples;if(!$p0.length){return;}if($p1===tab.FilterItemUtil.allItemIndex){tableau.FilterItem.setChecked(this.contentNode.firstChild,$p0[0].rowState);var $3=!this.parent.get_oFilter().all;if(ss.isValue(this.$3_4())){this.$3_4().handleMobileItemClicked(tab.FilterItemUtil.allItemIndex,this.get_popup().get_list());}this.parent.doSelectAll($3);}else{var $4=this.fetchChildNodeByIndex($p0[0].rowIndex);tableau.FilterItem.setChecked($4,$p0[0].rowState);if(ss.isValue(this.$3_4())){this.$3_4().handleMobileItemClicked(tableau.FilterItem.getIndex($4),this.get_popup().get_list());}if(this.parent.get_oFilter().all||this.parent.get_oFilter().allChecked){$1.tuples.push(tab.$create_TupleStruct(null,$p0[0].rowState,$2[$p0[0].rowIndex].t));}else{for(var $5=0;$5<$2.length;$5++){$4=this.tiledWidget.getElement($5);if(tableau.FilterItem.isChecked($4)!==$2[$5].s){$1.tuples.push($2[$5]);}}}if(!!$1.tuples.length){this.parent.set_stateId(this.parent.get_stateId()+1);var $6=new tab.RawChange();var $7=new tab.Changelist();$6.setRange(new tab.IntegerRange($p0[0].rowIndex,$p0[0].rowIndex),$p0[0].rowState);$7.addChange($6);this.parent.applyChangesByChangelist($7);}}},createPopup:function($p0,$p1){var $0=tableau.format.formatColumnDisplayName(this.parent.get_oFilter(),false);var $1=tableau.mobile.widget.catmode.popup.ListPopup;var $2={};$2.listParams={};$2.listParams.filter=this.parent;$2.listParams.listItems=$p0;$2.listParams.bFacet=$p1;$2.listParams.itemFormatter=tableau.mobile.FilterItemMobile.formatListRowFilterItemHtml;$2.title=$0;$2.qf=this.parent;this.get_inplaceMobile().createPopup($1,$2);this.get_inplaceMobile().connectPopupAndAttachHandler(ss.Delegate.create(this,this.$3_3));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
if(ss.isValue(this.get_popup())){this.get_popup().get_list().remove_dispatchItemsChanged(ss.Delegate.create(this,this.$3_3));}})));this.get_popup().createControls();},fetchAllItem:function(){return this.contentNode.firstChild;},resetPendingVisuals:function(resetCheckState){var $0=$(this.contentNode);var $enum1=ss.IEnumerator.getEnumerator($0.children().get());while($enum1.moveNext()){var $1=$enum1.current;if(tableau.FilterItem.isPending($1)){tableau.FilterItem.togglePendingState($1);if(resetCheckState){tableau.FilterItem.setChecked($1,!tableau.FilterItem.isChecked($1));}}}var $enum2=ss.IEnumerator.getEnumerator(this.get_popup().get_list().getRowList().get());while($enum2.moveNext()){var $2=$enum2.current;if(this.get_popup().get_list().isPendingRow($2)){this.get_popup().get_list().togglePendingRow($2);if(resetCheckState){this.get_popup().get_list().toggleSelectedRow($2);}}}},get_uniqueNodeId:function(){return this.parent.id;},$3_4:function(){return this.pendingManager;}}
tab.DropdownMobile=function(parent,div,attrs){tab.DropdownMobile.initializeBase(this,[parent,div,attrs]);this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.DropdownMobile.prototype={$2_0:0,$2_1:false,domNode:null,domBox:null,fillSummary:null,$2_2:null,get_inplaceMobile:function(){return this.$2_2;},set_inplaceMobile:function(value){this.$2_2=value;return value;},get_uniqueNodeId:function(){return this.parent.id;},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.get_domBox():this.domBox;},instantiate:function(tuples,itemName,facet){this.fillSummary=ss.Delegate.create(this,function($p1_0,$p1_1){
this.$2_3($p1_0,itemName,facet,$p1_1);});this.fillSummary(tuples,tab.FilterItemUtil.isAllOrAllChecked(this.parent));this.get_inplaceMobile().setupTouchHandler(this.div);this.createPopup(tuples,facet);},resetContent:function(tuples,itemName,facet){this.$2_4();this.fillSummary(tuples,tab.FilterItemUtil.isAllOrAllChecked(this.parent));this.createPopup(tuples,facet);},$2_3:function($p0,$p1,$p2,$p3){var $0=[];this.$2_0=-1;this.$2_1=false;if(tab.FilterItemUtil.isAllOrAllChecked(this.parent)&&this.parent.isSingleSelect()){for(var $2=0;$2<$p0.length;$2++){$p0[$2].s=false;}}var $1=true;if($p3){$0.push(tab.FilterItemUtil.getAllItemHtml(this.parent,$p1,$p2,false,tableau.mobile.FilterItemMobile.formatDropdownListFilterItemHtml));}else{for(var $3=0;$3<$p0.length;$3++){if($p0[$3].s){if(!this.$2_1){$0.push(tableau.mobile.FilterItemMobile.formatDropdownListFilterItemHtml(this.parent,$p0[$3],$p1,$3));}if(this.$2_0>-1){this.$2_1=true;$0=[];}else{this.$2_0=$3;}}else{$1=false;}}}if($1){$0=[];$0.push(tab.FilterItemUtil.getAllItemHtml(this.parent,$p1,$p2,false,tableau.mobile.FilterItemMobile.formatDropdownListFilterItemHtml));}else if(this.$2_1&&!$p3){$0.push(tableau.mobile.FilterItemMobile.getDropdownHtml($p1+'_'+$p0.length,tab.Strings.QuickFilterMultipleValues,'true',$p3));}else if(this.$2_0===-1&&this.hasSummaryText()){$0.push(tableau.mobile.FilterItemMobile.getDropdownHtml($p1+'_'+$p0.length,this.getSummaryText(),'true',$p3));}this.div.innerHTML=$0.join('');},shouldNotReinstantiate:function(){return ss.isValue(this.get_inplaceMobile().get_popup())&&ss.isValue(this.get_inplaceMobile().get_popup().get_searchWidget())&&this.get_inplaceMobile().get_popup().get_searchWidget().isShowingResults();},destroy:function(){this.dispose();this.$2_4();},$2_4:function(){this.get_inplaceMobile().disconnectPopup();this.get_inplaceMobile().destroyPopup();},createPopup:function(items,facet){var $0=tableau.format.formatColumnDisplayName(this.parent.get_oFilter(),false);var $1=tableau.mobile.widget.catmode.popup.ListPopup;var $2={};$2.listParams={};$2.listParams.filter=this.parent;$2.listParams.listItems=items;$2.listParams.isMultiValue=false;$2.listParams.bFacet=facet;$2.title=$0;$2.mode='dropdown';$2.qf=this.parent;$2.listParams.itemFormatter=tableau.mobile.FilterItemMobile.formatListRowFilterItemHtml;this.get_inplaceMobile().createPopup($1,$2);this.get_inplaceMobile().connectPopupAndAttachHandler(ss.Delegate.create(this,this.$2_5));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_inplaceMobile().get_popup().get_list().remove_dispatchItemsChanged(ss.Delegate.create(this,this.$2_5));})));this.get_inplaceMobile().get_popup().createControls();},$2_5:function($p0,$p1){var $0=this.parent.get_oFilter().table;var $1=[];var $2={};$2.schema=$0.schema;$2.tuples=new Array(0);var $3=$0.tuples;if($p0.length<1){return;}var $4=$p0[0];if($4.rowIndex===tab.FilterItemUtil.allItemIndex){this.parent.doSelectAll(true);}else{for(var $6=0;$6<$3.length;++$6){if($p1===$6&&!$3[$6].s){$3[$6].s=true;$2.tuples.push($3[$6]);break;}else if($3[$6].s){$3[$6].s=false;}}this.fillSummary($2.tuples,tab.FilterItemUtil.isAllOrAllChecked(this.parent));var $5=this.parent.get_oFilter().table.tuples[$p1].d||this.parent.get_oFilter().table.tuples[$p1].t[0].v;$1.push($5);if(!!$2.tuples.length){this.parent.set_stateId(this.parent.get_stateId()+1);tab.FilterClientCommands.setCategoricalFilterValues(this.parent.get_session().get_visualId(),this.parent.get_field(),'filter-replace',$1);}}}}
tab.HierarchicalFilterMobile=function(filterProps){tab.HierarchicalFilterMobile.initializeBase(this,[filterProps]);this.templateString="<div class='MobilePanel HierarchicalFilterMobile'>"+"<div class='MobilePanelBox HierarchicalFilterMobileBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='FilterTitle' dojoAttachPoint='domTitleBar'></div>"+'</div>'+"<div class='HFSelection tab-ctrl-formatted-text' dojoAttachPoint='domContent'></div>"+"<div dojoType='tableau.base.widget.ConditionalsWidget' dojoAttachPoint='conditionals'></div>"+'</div>'+"<div class='MobilePanelBorderOuter'><div class='MobilePanelBorderInner'></div></div>"+'</div>';this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.HierarchicalFilterMobile.prototype={$3_0:500,$3_1:null,_scrollWrapper:null,iscroller:null,domNode:null,parent:null,$3_2:null,get_inplaceMobile:function(){return this.$3_2;},set_inplaceMobile:function(value){this.$3_2=value;return value;},get_popup:function(){return this.get_inplaceMobile().get_popup();},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.domBox:this.domBox;},createTreeDom:function(){var $0=new tableau.mobile.TreeModel(this.get_session(),this.get_field(),this.get_oFilter().levels.length,this.isSingleSelect());$0.onChildrenChange($0.root,$0.itemsFromTable(this.get_oFilter().table[0],0));this._scrollWrapper=document.createElement('div');this.get_domContent().appendChild(this._scrollWrapper);var $1={};$1.model=$0;$1.showRoot=false;this.tree=new tableau.mobile.InPlaceTree($1);this._scrollWrapper.appendChild(this.tree.domNode);var $2=spiff.$create_MobileScrollerOptions();this.iscroller=new spiff.MobileScroller(this._scrollWrapper,this.get_inplaceMobile().get_touchHandler(),$2);},resize:function($p0){this.inherited(arguments);if(ss.isValue(this.iscroller)){this.iscroller.refresh();}},initFromState:function(suppressRefresh){this.inherited(arguments);this.$3_1=new tab.DisposableHolder();if(!suppressRefresh){this.tree.model.refresh(this.get_oFilter().table);}this.get_inplaceMobile().setupTouchHandler(this.domTitleBar);this.createPopup();this.connect(this.tree,'treeSizeChanged',ss.Delegate.create(this,this.treeSizeChanged));},treeSizeChanged:function(){if(ss.isValue(this.iscroller)){this.iscroller.refresh();}},$3_3:function($p0,$p1){var $0=[];var $1=[];if($p1){$0.push($p0);}else{$1.push($p0);}if($0.length>0||$1.length>0){tab.FilterClientCommands.doLevelHierarchialFilter(this.get_session().get_visualId(),this.get_field(),$0,$1,'filter-delta');}},applyChangesFromPopup:function(){var $0=[];var $1=[];var $2=[].concat((this.get_inplaceMobile().get_popup().get_content()).tree.rootNode.getChildren());var $3=[];var $4=[];if(!$2.length){return;}var $5='filter-delta';do{var $7=$2.shift();var $8=$7.item.tuple;var $9=tab.$create_TupleStruct($8.d,$8.s,$8.t);if($7.item.schema.length>$0.length){$0=$7.item.schema;}if($7.isChecked&&!$9.s){$9.s=true;$1.push($9);if(this.isSingleSelect()){$5='filter-replace';break;}}else if(!$7.isChecked&&$9.s){delete $9.s;$1.push($9);}$2=$2.concat($7.getChildren());}while(!!$2.length);var $6=$1;if(!!$6.length){for(var $A=0;$A<$6.length;$A++){var $B=$6[$A].t.length-1;var $C=$6[$A].t[$B].v;if($6[$A].s){$3.push($C);}else{$4.push($C);}}tab.FilterClientCommands.doMemberHierarchialFilter(this.get_session().get_visualId(),this.get_field(),$3,$4,$5);}},$3_4:function($p0){if(dojo.hasClass($p0.target,'checkArea')||dojo.hasClass($p0.target.parentNode,'HFTreeNodeLabel')){if(ss.isValue(this._applyTimer)){window.clearTimeout(this._applyTimer);this._applyTimer=null;}this.set_stateId(this.get_stateId()+1)-1;if(!!$p0.shiftKey&&!!this.tree.prev_anchor&&this.tree.getDepth(this.tree.prev_anchor)===this.tree.getDepth(this.tree.anchor)&&!this.isSingleSelect()){this.updateCheckboxRange(this.tree.anchor,this.tree.prev_anchor);this.applyChangesFromPopup();}else{this._applyTimer=window.setTimeout(ss.Delegate.create(this,this.applyChangesFromPopup),this.$3_0);}}},createPopup:function(){var $0=tableau.format.formatColumnDisplayName(this.get_oFilter());var $1=tableau.mobile.widget.catmode.popup.HierarchicalControlPopup;var $2={};$2.showLevels=this.get_attributes()['show-levels']!=='false';$2.isSingleSelect=this.isSingleSelect();$2.model=this.tree.model;$2.oFilter=this.get_oFilter();$2.session=this.get_session();$2.title=$0;$2.qf=this;this.get_inplaceMobile().createPopup($1,$2);this.get_inplaceMobile().connectPopup();this.get_inplaceMobile().get_popup().createControls();this.get_popup().add_notifyMemberChangeCalled(ss.Delegate.create(this,this.$3_4));this.get_popup().add_onExpandNodeCalled(ss.Delegate.create(this,this.onExpandNode));this.get_popup().add_onCollapseNodeCalled(ss.Delegate.create(this,this.onCollapseNode));this.get_popup().add_onLevelClickInPopupCalled(ss.Delegate.create(this,this.$3_3));this.$3_1.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_popup().remove_notifyMemberChangeCalled(ss.Delegate.create(this,this.$3_4));this.get_popup().remove_onExpandNodeCalled(ss.Delegate.create(this,this.onExpandNode));this.get_popup().remove_onCollapseNodeCalled(ss.Delegate.create(this,this.onCollapseNode));this.get_popup().remove_onLevelClickInPopupCalled(ss.Delegate.create(this,this.$3_3));})));},onCollapseNode:function($p0,$p1){var $0=this.findMatchingNode($p1);if(ss.isValue($0)){this.tree._collapseNode($0);}},onExpandNode:function($p0,$p1){var $0=this.findMatchingNode($p1);if(ss.isValue($0)){this.tree._expandNode($0);}},findMatchingNode:function($p0){var $0=[].concat(this.tree.rootNode.getChildren());if(!$0.length){return null;}do{var $1=$0.shift();if($1.item.tuple===$p0.item.tuple){return $1;}$0=$0.concat($1.getChildren());}while(!!$0.length);return null;},get_uniqueNodeId:function(){return this.id;},destroy:function(){this.get_inplaceMobile().disconnectPopup();this.get_inplaceMobile().destroyPopup();this.dispose();},dispose:function(){this.$3_1.dispose();if(ss.isValue(this.iscroller)){this.iscroller.dispose();this.iscroller=null;}}}
tab.CategoricalSliderPopup=function(popupParams,srcRefNode){this.$1_22=['show-readout','hide-readout'];this.$1_23=['show-slider','hide-slider'];this.$1_24=['show-step-btns','hide-buttons'];this.$1_25=new tab.DisposableHolder();tab.CategoricalSliderPopup.initializeBase(this);this.$1_27=popupParams.attributes;this.initValues=popupParams.initValues;}
tab.CategoricalSliderPopup.prototype={$1_26:null,$1_27:null,initValues:null,parentObject:null,$1_28:null,$1_29:null,$1_2A:null,add_onPopupSliderChange:function(value){this.$1_2B=ss.Delegate.combine(this.$1_2B,value);},remove_onPopupSliderChange:function(value){this.$1_2B=ss.Delegate.remove(this.$1_2B,value);},$1_2B:null,startup:function(){if(this.$1_26!=null){this.$1_26.startup();}this.inherited(arguments);},prepareToHide:function(){this.inherited(arguments);},getContentDimensions:function(availableHeight){var $0=tab.$create_DojoCoords();$0.h=100;$0.w=0;$0.l=0;$0.t=0;return $0;},postCreate:function(){this.$1_28=dojo.doc.createElement('div');this.$1_29=dojo.doc.createElement('div');this.domContent.appendChild(this.$1_28);if(this.initValues.showFacets){this.$1_2A=dojo.doc.createElement('div');this.$1_28.appendChild(this.$1_2A);dojo.addClass(this.$1_2A,'facet');}this.$1_28.appendChild(this.$1_29);dojo.addClass(this.$1_28,'catSliderReadoutWrapper');dojo.addClass(this.$1_29,'leftReadOut');if(this.$1_2D(this.$1_24)){dojo.addClass(this.containerNode,'Wide');}else{dojo.addClass(this.containerNode,'Slider');}this.$1_2C();this.inherited(arguments);},$1_2C:function(){this.updateReadout(this.initValues.initialText,this.initValues.facet);this.initValues.bShowSlider=this.$1_2D(this.$1_23);this.initValues.bShowArrows=this.$1_2D(this.$1_24);this.$1_26=new tableau.mobile.widget.catmode.popup.SingleSlider(this.initValues);this.$1_26.setParent(this);this.$1_26.placeAt(this.$1_28,'after');var $0=ss.Delegate.create(this,function($p1_0,$p1_1){
if(ss.isValue(this.$1_2B)){this.$1_2B(parseInt($p1_0),$p1_1);}});this.$1_26.add_onPopupSliderChange($0);this.$1_25.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_26.remove_onPopupSliderChange($0);})));},$1_2D:function($p0){return (this.$1_27[$p0[0]]!=='false'&&this.$1_27[$p0[1]]!=='true');},updateFromSearch:function($p0){this.$1_26.setSliderIndex($p0);},_refreshContent:function($p0){this.qf=$p0.qf;this.$1_27=$p0.attributes;this.initValues=$p0.initValues;if(!!this.$1_26){this.$1_25.dispose();this.$1_26.destroy();}this.$1_2C();this.$1_26.startup();},updateReadout:function(text,facet){if(this.$1_2D(this.$1_22)){this.$1_29.innerHTML=text;if(this.initValues.showFacets&&!!facet){this.$1_2A.innerHTML=facet;}}},propogateChange:function($p0){},setParent:function($p0){this.parentObject=$p0;},dispose:function(){this.$1_25.dispose();},destroy:function(){this.dispose();this.$1_26.destroy();this.inherited(arguments);}}
tab.ControlsToolbar=function(initParams,sourceRefNode){this.templateString="<div dojoattachpoint='containerNode' class='ControlsToolbar'>"+'<ul>'+"<li style='margin-left:0;'>"+"<div class='tapArea' dojoAttachPoint='domResetBtn'></div>"+"<div class='controlIcon wcIconFiltered' dojoAttachPoint='domResetIcon'></div>"+'</li>'+'<li>'+"<div class='tapArea' dojoAttachPoint='domSearchBtn'></div>"+"<div class='controlIcon wcIconPopupSearch'></div>"+'</li>'+'<li>'+"<div class='tapArea' dojoAttachPoint='domDomainBtn'></div>"+"<div class='controlIcon wcIconDomainAll' dojoAttachPoint='domDomainIcon'></div>"+'</li>'+'<li>'+"<div class='tapArea' dojoAttachPoint='domMenuBtn'></div>"+"<div class='controlIcon wcIconPopupMenu'></div>"+'</li>'+'</ul>'+'</div>';tab.ControlsToolbar.initializeBase(this);this.touchHandlers=[];}
tab.ControlsToolbar.prototype={widgetsInTemplate:false,hasDomain:true,metricsOnly:false,domMenuBtn:null,domResetBtn:null,domResetIcon:null,domDomainBtn:null,domSearchBtn:null,domDomainIcon:null,optionsPressed:false,searchPressed:false,hideExclusiveVsInclusiveInMenu:false,hideSingleVsMultipleInMenu:false,hideNullControls:false,$1_0:false,qf:null,touchHandlers:null,add_resetTapped:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_resetTapped:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,add_domainTapped:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_domainTapped:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,add_optionsTapped:function(value){this.$1_3=ss.Delegate.combine(this.$1_3,value);},remove_optionsTapped:function(value){this.$1_3=ss.Delegate.remove(this.$1_3,value);},$1_3:null,add_searchTapped:function(value){this.$1_4=ss.Delegate.combine(this.$1_4,value);},remove_searchTapped:function(value){this.$1_4=ss.Delegate.remove(this.$1_4,value);},$1_4:null,postMixInProperties:function(initParams,sourceRefNode){},_quantitativeControlsPostCreate:function(){if(!this.metricsOnly){var $0=function($p1_0,$p1_1){
if($p1_1){dojo.style($p1_0,'display','none');}};this.hideNullControls=this.qf.shouldHideContextMenu();this.hideExclusiveVsInclusiveInMenu=true;this.hideSingleVsMultipleInMenu=true;$0(this.domMenuBtn.parentNode,this.hideNullControls);$0(this.domDomainBtn.parentNode,this.qf.shouldHideDomainButton());$0(this.domSearchBtn.parentNode,true);$0(this.domResetBtn.parentNode,this.qf.shouldHideResetButton());}this._updateDomainButton();},$1_5:function(){if(!this.metricsOnly){var $0=function($p1_0,$p1_1){
if($p1_1){dojo.style($p1_0,'display','none');}};this.hideNullControls=this.qf.shouldHideContextMenu();this.hideExclusiveVsInclusiveInMenu=true;this.hideSingleVsMultipleInMenu=true;$0(this.domMenuBtn.parentNode,this.hideNullControls);$0(this.domDomainBtn.parentNode,true);$0(this.domSearchBtn.parentNode,true);$0(this.domResetBtn.parentNode,true);}},$1_6:function(){if(!this.metricsOnly){var $0=this.qf.get_oFilter().catIsHier||(!!this.qf.get_oFilter().table&&this.qf.get_oFilter().table.schema.length===1&&tableau.types.isOm(this.qf.get_oFilter().table.schema[0]));var $1=(this.qf.get_mode()==='pattern'||this.qf.get_mode()==='typeinlist'||this.qf.shouldHideSearchButton());var $2=(this.qf.get_mode()==='pattern'||this.qf.get_mode()==='typeinlist'||this.qf.shouldHideDomainButton());var $3=(this.qf.get_mode()==='pattern'||this.qf.get_mode()==='typeinlist'||this.qf.shouldHideResetButton());var $4=$0||this.qf.shouldHideIncludeExclude();var $5=this.qf.shouldHideContextMenu();var $6=($4&&$5);this.processControlButtons($1,$2,$4,$5,$6,$3);this.hideNullControls=true;}},_hierControlsPostCreate:function(){if(!this.metricsOnly){var $0=function($p1_0,$p1_1){
if($p1_1){dojo.style($p1_0,'display','none');}};$0(this.domMenuBtn.parentNode,this.qf.shouldHideContextMenu());$0(this.domSearchBtn.parentNode,this.qf.shouldHideSearchButton());$0(this.domDomainBtn.parentNode,true);$0(this.domResetBtn.parentNode,true);this.hideExclusiveVsInclusiveInMenu=true;this.hideNullControls=true;}},postCreate:function(){if(this.qf.declaredClass==='tableau.mobile.widget.QuantitativeFilterMobile'||this.qf.declaredClass==='tableau.mobile.widget.QuantitativeDateFilterMobile'){this._quantitativeControlsPostCreate();}else if(this.qf.declaredClass==='tableau.mobile.widget.RelativeDatePickFilterMobile'||this.qf.declaredClass==='tableau.mobile.widget.RelativeDateFilterMobile'){this.$1_5();}else if(this.qf.declaredClass==='tableau.mobile.widget.HierarchicalFilterMobile'){this._hierControlsPostCreate();}else{this.$1_6();}var $0=spiff.$create_EventHandleSpec();$0.firstTouch=ss.Delegate.create(this,this.$1_7);this.touchHandlers.push(new spiff.TableauEventHandler(this.domSearchBtn,$0));$0=spiff.$create_EventHandleSpec();$0.firstTouch=ss.Delegate.create(this,this.$1_B);this.touchHandlers.push(new spiff.TableauEventHandler(this.domDomainBtn,$0));$0=spiff.$create_EventHandleSpec();$0.firstTouch=ss.Delegate.create(this,this.$1_D);this.touchHandlers.push(new spiff.TableauEventHandler(this.domMenuBtn,$0));$0=spiff.$create_EventHandleSpec();$0.firstTouch=ss.Delegate.create(this,this.$1_C);this.touchHandlers.push(new spiff.TableauEventHandler(this.domResetBtn,$0));this._updateDomainButton();this.$1_A();},processControlButtons:function($p0,$p1,$p2,$p3,$p4,$p5){var $0=function($p1_0,$p1_1){
if($p1_1){dojo.style($p1_0,'display','none');}};$0(this.domMenuBtn.parentNode,$p4);$0(this.domDomainBtn.parentNode,$p1);$0(this.domSearchBtn.parentNode,$p0);$0(this.domResetBtn.parentNode,$p5);if(!$p4){if($p2){this.hideExclusiveVsInclusiveInMenu=true;}if($p3){this.hideSingleVsMultipleInMenu=true;}}},$1_7:function($p0){this.optionsPressed=false;this.searchPressed=!this.searchPressed;this._setButtonsState();if(ss.isValue(this.$1_4)){this.$1_4();$p0.stopPropagation();}},setSearchButtonState:function(state){this.searchPressed=state;if(this.searchPressed){this.optionsPressed=false;}this._setButtonsState();},setOptionsButtonState:function(state){this.optionsPressed=state;if(this.optionsPressed){this.searchPressed=false;}this._setButtonsState();},_setButtonsState:function(){dojo.toggleClass(this.domSearchBtn.parentNode,'pressed',this.searchPressed);dojo.toggleClass(this.domMenuBtn.parentNode,'pressed',this.optionsPressed);},$1_8:function(){if(!this.qf.shouldHideResetButton()){dojo.removeClass(this.domResetIcon,'wcIconNonfiltered');dojo.removeClass(this.domResetIcon,'wcIconFiltered');dojo.addClass(this.domResetIcon,'wcIconNonfiltered');this.$1_0=true;}},$1_9:function(){if(!this.qf.shouldHideResetButton()){dojo.removeClass(this.domResetIcon,'wcIconNonfiltered');dojo.removeClass(this.domResetIcon,'wcIconFiltered');dojo.addClass(this.domResetIcon,'wcIconFiltered');this.$1_0=false;}},updateResetCf:function(cf){if(ss.isValue(cf.get_oFilter().all)&&cf.get_oFilter().all){this.$1_8();}else{this.$1_9();}},updateResetQf:function(qf){if(qf.isMaxRange(qf.get_oCurrentMin().v,qf.get_oCurrentMax().v)){this.$1_8();}else{this.$1_9();}},update:function(filterArg){this.qf=filterArg;this._updateDomainButton();this.$1_A();},$1_A:function(){if(this.qf.oFilter.type==='C'){this.updateResetCf(this.qf);}else if(this.qf.oFilter.type==='Q'){this.updateResetQf(this.qf);}},$1_B:function($p0){if(ss.isValue(this.$1_2)){this.$1_2();$p0.stopPropagation();}},$1_C:function($p0){if(ss.isValue(this.$1_1)&&!this.$1_0){this.$1_1();$p0.stopPropagation();}},_getButtonCount:function(){var $0=0;var $1;dojo.query('li',this.domNode).forEach(function($p1_0,$p1_1){
$1=dojo.style($p1_0,'display');if($1!=='none'){$0++;}});return $0;},_updateDomainButton:function(){if(!ss.isNullOrUndefined(this.qf)&&(typeof(this.qf.shouldHideDomainButton)==='function')&&this.qf.shouldHideDomainButton()){return;}dojo.removeClass(this.domDomainIcon,'wcIconDomainAll');dojo.removeClass(this.domDomainIcon,'wcIconDomainContext');dojo.removeClass(this.domDomainIcon,'wcIconDomainRelevant');var $0=(this.qf).get_attributes()['values'];if($0===tableau.types.QFDomain.QFD_RELEVANT){dojo.addClass(this.domDomainIcon,'wcIconDomainRelevant');}else if($0===tableau.types.QFDomain.QFD_CONTEXT){dojo.addClass(this.domDomainIcon,'wcIconDomainContext');}else{dojo.addClass(this.domDomainIcon,'wcIconDomainAll');}},$1_D:function($p0){this.searchPressed=false;this.optionsPressed=!this.optionsPressed;this._setButtonsState();if(ss.isValue(this.$1_3)){this.$1_3();$p0.stopPropagation();}},destroy:function(){dojo.forEach(this.touchHandlers,function($p1_0){
$p1_0.destroy();});this.inherited(arguments);}}
tab.PopupFormattedValueTypeInWidget=function(targetDiv,style){tab.PopupFormattedValueTypeInWidget.initializeBase(this,[targetDiv,style]);}
tab.PopupFormattedValueTypeInWidget.prototype={$D:false,onQueryBoxFocus:function(evt){tab.PopupFormattedValueTypeInWidget.callBaseMethod(this, 'onQueryBoxFocus',[evt]);this.queryBox.value=this.editableValue();this.$D=true;},patternIsChanged:function(){if(this.$D){return this.editableValue()!==this.queryBox.value;}else{return this.pattern!==this.queryBox.value;}},setNewPattern:function(){var $0=this.patternIsChanged();tab.PopupFormattedValueTypeInWidget.callBaseMethod(this, 'setNewPattern');if(!$0){this.resetPattern();}this.$D=false;},resetPattern:function(){this.queryBox.value=this.pattern;this.queryBox.blur();this.$D=false;this.setButtonToProperState();}}
tab.CustomValueListPopup=function(pparams,srcRefNode){tab.CustomValueListPopup.initializeBase(this);this.$1_22=new tab.DisposableHolder();this.listParams=pparams.listParams;this.listParams.isRemovable=true;this.set_title(pparams.title);}
tab.CustomValueListPopup.prototype={listParams:null,$1_22:null,typeInSearchWidget:null,list:null,clearAllButtonVisible:false,_SearchBoxWrapper:null,_Selection:null,_ButtonSeparator:null,$1_23:null,$1_24:null,get_$1_25:function(){return this;},postCreate:function(){this._SearchBoxWrapper=dojo.doc.createElement('div');this.domContent.appendChild(this._SearchBoxWrapper);this._Selection=dojo.doc.createElement('div');this.domContent.appendChild(this._Selection);var $0=tab.$create_SearchWidgetQfProperty();$0.qf=this.qf;this.typeInSearchWidget=new tableau.mobile.widget.SearchWidgetMobile($0,null);this.typeInSearchWidget.placeAt(this._SearchBoxWrapper,'after');this.typeInSearchWidget.startup();this.list=tab.ScrollingList.createScrollingList(this.listParams);this.list.placeAt(this._Selection,'after');this.clearAllButtonVisible=false;this._ButtonSeparator=dojo.doc.createElement('div');this.domContent.appendChild(this._ButtonSeparator);this.$1_23=dojo.doc.createElement('div');this.domContent.appendChild(this.$1_23);this.$1_24=dojo.doc.createElement('div');this.$1_23.appendChild(this.$1_24);dojo.addClass(this.$1_23,'ClearListButtonWrapper');dojo.addClass(this.$1_24,'ClearListButton ');this.$1_24.innerHTML=tab.Strings.ClearAllButtonText;var $1=spiff.$create_EventHandleSpec();$1.potentialTap=ss.Delegate.create(this,this.removeAllRowFromList);this.touchHandler=new spiff.TableauEventHandler(this.$1_24,$1);this.inherited(arguments);this.setupConnections();this.get_$1_25().setupScrollListener(this.list.iscrollObj);},setupConnections:function(){this.$1_22.dispose();this.$1_22=new tab.DisposableHolder();this.typeInSearchWidget.add_onXButtonClickCalled(ss.Delegate.create(this,this.doResize));this.list.add_deleteRowCalled(ss.Delegate.create(this,this.rowDeleted));this.typeInSearchWidget.add_attachItemsChangedHandlerCalled(ss.Delegate.create(this,this.$1_26));this.$1_22.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.typeInSearchWidget.remove_onXButtonClickCalled(ss.Delegate.create(this,this.doResize));this.list.remove_deleteRowCalled(ss.Delegate.create(this,this.rowDeleted));this.typeInSearchWidget.remove_attachItemsChangedHandlerCalled(ss.Delegate.create(this,this.$1_26));})));},$1_26:function($p0){var $0=this.typeInSearchWidget.get_list();var $1=$0.getListSize();dojo.style($0.scrollWrapper,'height',Math.max(Math.min(200,$1),0)+'px');$0.iscrollObj.refresh();this.doResize();this.get_$1_25().doScrollToLastPos();},$1_27:function(){dojo.style(this.$1_23,'height',55+'px');dojo.style(this.$1_24,'height',25+'px');},$1_28:function(){dojo.style(this.$1_23,'height','0px');dojo.style(this.$1_24,'height','0px');},update:function(popupParams){this.inherited(arguments);this.listParams=popupParams.listParams;this.listParams.isRemovable=true;this.list.destroy();this.list=tab.ScrollingList.createScrollingList(this.listParams);this.list.placeAt(this._Selection,'after');this.setupConnections();this.doResize();this.get_$1_25().setupScrollListener(this.list.iscrollObj);this.get_$1_25().doScrollToLastPos();},getContentDimensions:function(availableHeight){var $0;var $1=this.list.getListRowCont();var $2=dojo.marginBox(this.typeInSearchWidget.domNode);var $3=dojo.marginBox(this.list._scrollingListArea);var $4=Math.min($3.h,availableHeight-$2.h);if($1>4){this.$1_27();this.clearAllButtonVisible=true;$0=$4-40;}else{if(!!this.clearAllButtonVisible){this.$1_28();this.clearAllButtonVisible=false;}$0=$4;}dojo.style(this.list.scrollWrapper,'height',$0+'px');this.list.iscrollObj.refresh();this.get_$1_25().doScrollToLastPos();var $5=tab.$create_DojoCoords();$5.h=$2.h+$4;return $5;},onSelect:function($p0){},rowDeleted:function(){if(ss.isValue(this.typeInSearchWidget.get_list())){this.typeInSearchWidget.update(this.qf);}this.doResize();},removeAllRowFromList:function($p0){$p0.preventDefault();this.list.deleteAllRows();},dispose:function(){this.$1_22.dispose();this.touchHandler.dispose();this.typeInSearchWidget.dispose();},destroy:function(){this.list.destroy();this.inherited(arguments);}}
tab.ListPopup=function(parms,srcRefNode){tab.ListPopup.initializeBase(this);this.listParams=parms.listParams;this.set_title(parms.title);}
tab.ListPopup.prototype={listParams:null,get_$1_22:function(){return this;},startup:function(){this.get_list().startup();},postCreate:function(){if((typeof(this.qf.isSingleSelect)==='function')){this.listParams.isMultiValue=!(this.qf).isSingleSelect();}else{this.listParams.isMultiValue=false;}this.set_list(tab.ScrollingList.createScrollingList(this.listParams));this.get_list().placeAt(this.domContent,'after');this.get_$1_22().setupScrollListener(this.get_list().iscrollObj);this.inherited(arguments);},update:function(popupParams){this.inherited(arguments);},destroy:function(){this.get_list().destroy();this.inherited(arguments);},getContentDimensions:function(availableHeight){var $0=dojo.marginBox(this.get_list()._scrollingListArea);var $1=Math.min($0.h,availableHeight);var $2=tab.$create_DojoCoords();$2.h=$1;return $2;},resizeSpecificContent:function(size){dojo.style(this.get_list().scrollWrapper,'height',size.h+'px');this.get_list().iscrollObj.refresh();},_refreshContent:function($p0){this.qf=$p0.qf;this.listParams=$p0.listParams;if((typeof(this.qf.isSingleSelect)==='function')){this.listParams.isMultiValue=!(this.qf).isSingleSelect();}else{this.listParams.isMultiValue=false;}this.set_title($p0.title);if(!!this.get_list()){this.get_list().destroy();this.set_list(tab.ScrollingList.createScrollingList(this.listParams));this.get_list().placeAt(this.domContent,'after');}this.get_$1_22().setupScrollListener(this.get_list().iscrollObj);}}
tab.PatternPopup=function(newParam,srcRefNode){tab.PatternPopup.initializeBase(this);this.params=newParam;this.set_title(newParam.title);this.type=newParam.type;}
tab.PatternPopup.prototype={params:null,patternWidget:null,type:null,$1_22:null,postCreate:function(){this.$1_22=dojo.doc.createElement('div');this.domContent.appendChild(this.$1_22);if(this.type==='Pattern'){this.patternWidget=new tableau.mobile.widget.catmode.popup.PopupTypeInWidget(this.$1_22,this.type);this.patternWidget.instantiate(this.params.pattern,this.params.itemName);}else{if(this.params.isListDomain||ss.isValue(this.params.domain)){var $0=new tableau.mobile.widget.catmode.popup.PopupListTypeInWidget(this.$1_22,this.type);$0.instantiate(this.params.pattern,this.params.itemName,this.params.domain,ss.Delegate.create((this.params.qf).session,(this.params.qf).session.getAutocompleteInfo));this.patternWidget=$0;}else if(tab.PopupValueTypeInWidget.hasSeparateDisplayFormat(this.params.datavalue)){var $1=new tableau.mobile.widget.catmode.popup.PopupFormattedValueTypeInWidget(this.$1_22,this.type);$1.instantiate(this.params.pattern,this.params.itemName,this.params.datavalue,this.params.numberFormat);this.patternWidget=$1;}else{var $2=new tableau.mobile.widget.catmode.popup.PopupValueTypeInWidget(this.$1_22,this.type);$2.instantiate(this.params.pattern,this.params.itemName,this.params.datavalue,this.params.numberFormat);this.patternWidget=$2;}}this.inherited(arguments);},update:function(popupParams){this.inherited(arguments);this.patternWidget.update(popupParams.pattern,popupParams.datavalue,popupParams.domain);},prepareToHide:function(){this.patternWidget.setNewPattern();},getContentDimensions:function(availableHeight){return dojo.marginBox(this.$1_22);},destroy:function(){this.dispose();this.inherited(arguments);},dispose:function(){this.patternWidget.dispose();}}
tab.PopupListTypeInWidget=function(targetDiv,style){tab.PopupListTypeInWidget.initializeBase(this,[targetDiv,style]);this.cssClass='revertButton';}
tab.PopupListTypeInWidget.prototype={domain:null,$B:null,autocomplete:false,$C:null,$D:null,update:function(newPattern,unusedDataValue,newDomain){this.domain=newDomain||[];tab.PopupListTypeInWidget.callBaseMethod(this, 'update',[newPattern]);},instantiate:function(newPattern,newFieldname,newDomain,autocompleteFunction){tab.PopupListTypeInWidget.callBaseMethod(this, 'instantiate',[newPattern,newFieldname]);this.$E(newDomain,autocompleteFunction);},setNewState:function(){this.$B='';tab.PopupListTypeInWidget.callBaseMethod(this, 'setNewState');},$E:function($p0,$p1){this.$B='';this.autocomplete=true;this.domain=$p0||[];this.$C=$p1;},$F:function($p0){this._clearTimeout();this.$D=window.setTimeout($p0,500);},_clearTimeout:function(){if(!!this.$D){window.clearTimeout(this.$D);this.$D=null;}},$10:function(){if(!this.autocomplete){return;}if(tab.MiscUtil.isNullOrEmpty(this.queryBox.value)){return;}if(!this.$B.toLowerCase().indexOf(this.queryBox.value.toLowerCase())){this.$11(this.$B);return;}if(this.domain.length>0){var $0=this.queryBox.value.toLowerCase();for(var $1=0,$2=this.domain.length;$1<$2;$1++){if(!this.domain[$1].toLowerCase().indexOf($0)){this.$11(this.domain[$1]);return;}}}else if(ss.isValue(this.$C)){var $3=ss.Delegate.create(this,function(){
this.$C(this.queryBox.value,ss.Delegate.create(this,this.$11),this.fieldname);});this.$F($3);}},$11:function($p0){var $0=$p0;if(tab.MiscUtil.isNullOrEmpty($0)){return;}this.$B=$0;var $1=this.queryBox.value;this.queryBox.value=$0;tableau.util.selectText(this.queryBox,$1.length,$0.length);},buttonShouldBeActive:function(){return this.patternIsChanged();},onKeyUp:function(e){switch(e.which){case 13:case 27:case 8:case 46:this._clearTimeout();break;case 16:break;default:if(this.keyCode===e.which){this.$10();}break;}tab.PopupListTypeInWidget.callBaseMethod(this, 'onKeyUp',[e]);},doButtonAction:function(){this.resetPattern();}}
tab.PopupValueTypeInWidget=function(targetDiv,style){tab.PopupValueTypeInWidget.initializeBase(this,[targetDiv,style]);this.cssClass='revertButton';}
tab.PopupValueTypeInWidget.$C=function($p0){var $0='text';if($p0.t===tableau.types.DataType.DT_DATE&&tab.BrowserSupport.get_dateInput()){$0='date';}else if($p0.t===tableau.types.DataType.DT_TIMESTAMP&&tab.BrowserSupport.get_dateTimeLocalInput()){$0='datetime-local';}return $0;}
tab.PopupValueTypeInWidget.hasSeparateDisplayFormat=function(val){return !tab.PopupValueTypeInWidget.$C(val).startsWith('date');}
tab.PopupValueTypeInWidget.prototype={dataValue:null,$B:null,update:function(newPattern,newDataValue,unusedDomain){this.dataValue=newDataValue;tab.PopupValueTypeInWidget.callBaseMethod(this, 'update',[newPattern]);this.resetPattern();},instantiate:function(newPattern,newFieldname,newDataValue,numberFormatArg){this.dataValue=newDataValue;this.inputType=tab.PopupValueTypeInWidget.$C(this.dataValue);this.$B=numberFormatArg;tab.PopupValueTypeInWidget.callBaseMethod(this, 'instantiate',[newPattern,newFieldname]);this.resetPattern();},setNewState:function(){if(this.inputType==='date'){this.pattern=tableau.format.formatToJSCompliantFormat(this.queryBox.value,tableau.format.get_isO8601DateFormat(),tab.DateTimeAutoFormatMode.showFullDateTime,this.dataValue.t);}else if(this.inputType==='datetime-local'){this.pattern=tableau.format.formatToJSCompliantFormat(this.queryBox.value,tableau.format.get_isO8601DateTimeFormat(),tab.DateTimeAutoFormatMode.showFullDateTime,this.dataValue.t);}else{tab.PopupValueTypeInWidget.callBaseMethod(this, 'setNewState');}},patternIsChanged:function(){return this.editableValue()!==this.queryBox.value;},buttonShouldBeActive:function(){return this.patternIsChanged();},editableValue:function(){if(this.inputType==='date'){return tableau.format.formatDataValue(this.dataValue,null,tableau.format.get_isO8601DateFormat(),null,tab.DateTimeAutoFormatMode.showFullDateTime);}else if(this.inputType==='datetime-local'){return tableau.format.formatDataValue(this.dataValue,null,tableau.format.get_isO8601DateTimeFormat(),null,tab.DateTimeAutoFormatMode.showFullDateTime);}else{return tableau.format.formatDataValue(this.dataValue,null,tableau.format.deriveNumberEditingFormat(this.$B),null,tab.DateTimeAutoFormatMode.showFullDateTime);}},resetPattern:function(){this.queryBox.value=this.editableValue();this.setButtonToProperState();},doButtonAction:function(){this.resetPattern();},isLocalized:function(){return (this.inputType!=='date'&&this.inputType!=='datetime-local');}}
tab.ScrollingList=function(listParams,srcRefNode){this.templateString="<div dojoAttachPoint='containerNode' style='' class='scrollContainer'>"+"<div dojoAttachPoint='scrollWrapper' class='scrollWrapper'>"+"<div dojoAttachPoint='_scrollingListArea' class='scrollListArea'>"+'</div>'+'</div>'+'</div>';tab.ScrollingList.initializeBase(this);this.$1_3=new tab.DisposableHolder();this.$1_1=listParams.filter;this.isRemovable=(listParams.isRemovable||false);if(ss.isValue(this.$1_1)){this.bHasAll=!listParams.isSearchWidget&&this.$1_1.get_modeContents().shouldUseAllItem()&&this.$1_1.get_oFilter().table.tuples.length>0&&!this.isRemovable;this.$1_4=tab.FilterItemUtil.getBaseItemName(this.$1_1,'FIP');this.$1_0=this.$1_1.get_oFilter().exclude&&this.$1_1.get_oFilter().all;}else{this.$1_4='FIP';this.$1_0=false;}this.itemList=(listParams.listItems||[]);this.isMultiValue=listParams.isMultiValue;this.facet=(listParams.bFacet||'');this.itemFormatter=(listParams.itemFormatter||tableau.mobile.FilterItemMobile.formatListRowFilterItemHtml);}
tab.ScrollingList.createScrollingList=function(listParams){return new tableau.mobile.widget.catmode.popup.ScrollingList(listParams,null);}
tab.ScrollingList.prototype={$1_0:false,$1_1:null,itemList:null,indices:null,$1_2:null,isMultiValue:false,bHasAll:false,isSearchWidget:false,isMsgOnly:false,$1_3:null,scrollOffset:0,prevScrollPos:0,$1_4:null,$1_5:null,widgetsInTemplate:false,iscrollObj:null,scrollHandler:null,$1_6:false,$1_7:null,facet:null,isRemovable:false,itemFormatter:null,_scrollingListArea:null,scrollWrapper:null,isWide:false,add_dispatchItemsChanged:function(value){this.$1_8=ss.Delegate.combine(this.$1_8,value);},remove_dispatchItemsChanged:function(value){this.$1_8=ss.Delegate.remove(this.$1_8,value);},$1_8:null,add_deleteRowCalled:function(value){this.$1_9=ss.Delegate.combine(this.$1_9,value);},remove_deleteRowCalled:function(value){this.$1_9=ss.Delegate.remove(this.$1_9,value);},$1_9:null,startup:function(){this.iscrollObj.refresh();},postCreate:function(){if(ss.isValue(this.$1_5)){this.$1_5.destroy();this.$1_5=null;}this._scrollingListArea.innerHTML='';if(this.bHasAll){tab.Checklist.addAllItem($(this._scrollingListArea),this.$1_1,this.$1_4,this.facet,tab.Checklist.shouldCheckAllItem(this.$1_1.get_oFilter(),this.$1_1.get_modeContents().pendingManager),this.itemFormatter);}if(ss.isValue(this.$1_1)&&this.$1_1.get_oFilter().isTiled){var $0=new tab.ChecklistContentFormatter(this.$1_1,this.$1_4,this.itemFormatter);this.$1_5=tab.TiledWidgetFactory.createListTiledWidget(this.$1_1,this.itemList,this._scrollingListArea,$0,41);}else{var $1=[];for(var $2=0;$2<this.itemList.length;$2++){if(ss.isValue(this.$1_1)){$1.push(this.itemFormatter(this.$1_1,this.itemList[$2],this.$1_4,$2));}else{var $3=this.$1_4+'_'+$2;if(!this.isRemovable){$1.push(tableau.mobile.FilterItemMobile.getScrollingListRowHtml($3,tableau.format.formatTupleDisplayName(this.itemList[$2]),null,false,this.itemList[$2].s,false,false));}else{$1.push(tableau.mobile.FilterItemMobile.getScrollingListRemovableRowHtml($3,tableau.format.formatTupleDisplayName(this.itemList[$2])));}}}this._scrollingListArea.innerHTML+=$1.join('');}this._enableTouchEvents();if(ss.isValue(this.indices)){this.$1_2=[];for(var $4=0;$4<this.indices.length;$4++){this.$1_2[this.indices[$4]]=$4;}}},_enableTouchEvents:function(){var $0=spiff.$create_EventHandleSpec();$0.tap=ss.Delegate.create(this,this.onSelect);this.scrollHandler=new spiff.TableauEventHandler(this._scrollingListArea,$0);var $1=spiff.$create_MobileScrollerOptions();$1.displayPolicy='always';this.iscrollObj=new spiff.MobileScroller(this._scrollingListArea,this.scrollHandler,$1);this.iscrollObj.add_touchMoveCalled(ss.Delegate.create(this,this.$1_B));this.iscrollObj.add_touchStartCalled(ss.Delegate.create(this,this.$1_C));this.iscrollObj.add_resetPositionCalled(ss.Delegate.create(this,this.resetPos));this.$1_3.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.iscrollObj.remove_touchMoveCalled(ss.Delegate.create(this,this.$1_B));this.iscrollObj.remove_touchStartCalled(ss.Delegate.create(this,this.$1_C));this.iscrollObj.remove_resetPositionCalled(ss.Delegate.create(this,this.resetPos));})));},destroy:function(){this.scrollHandler.destroy();this.iscrollObj.dispose();this.inherited(arguments);this.$1_3.dispose();},onSelect:function($p0){if(this.isMsgOnly){$p0.stopPropagation();$p0.preventDefault();return;}var $0=this.$1_10($p0.target);if(!this.isRemovable){this.hitTest($0);}else if(dojo.hasClass($p0.target,'wcIconSearchRemove')){this.deleteRow($0);}},hitTest:function($p0){if(this.isMultiValue){this.multiValueHitTest($p0);}else{this.singleValueHitTest($p0);}},multiValueHitTest:function(index,searchState){var $0=this.toggleSelectedAtIndex(index);var $1=(!ss.isUndefined(searchState))?searchState:$0;if(index===tab.FilterItemUtil.allItemIndex){var $2=true;var $3=(ss.isValue(this.$1_1))?($1^this.$1_1.get_oFilter().exclude)===1:$1;var $enum1=ss.IEnumerator.getEnumerator(this.getRowList().get());while($enum1.moveNext()){var $4=$enum1.current;if(!$2){this.setSelectedRow($4,$3);}else{$2=false;}}}this.$1_A(index,$1);},singleValueHitTest:function(index){if(this.isSelectedAtIndex(index)){return;}this.setSelectedAtIndex(index,true);var $enum1=ss.IEnumerator.getEnumerator(this.getRowList().get());while($enum1.moveNext()){var $0=$enum1.current;var $1=this.$1_10($0);if(index!==$1){this.setSelectedRow($0,false);}}this.$1_A(index,true);},$1_A:function($p0,$p1){if(ss.isValue(this.$1_8)){var $0=[];var $1={};$1.rowIndex=$p0;$1.rowState=$p1;$0.push($1);this.$1_8($0,$p0);}},$1_B:function($p0){$(this._scrollingListArea).trigger('scroll');this.scrollOffset=this.prevScrollPos-(-this.iscrollObj.get_scrollPos().x);this.$1_E(false);this.prevScrollPos=-this.iscrollObj.get_scrollPos().x;},$1_C:function($p0){this.prevScrollPos=-this.iscrollObj.get_scrollPos().x;this.$1_6=true;this.$1_7=Date.get_now();window.setTimeout(ss.Delegate.create(this,this.$1_D),250);},$1_D:function(){$(this._scrollingListArea).trigger('scroll');if(this.$1_6&&Date.get_now().getTime()-this.$1_7.getTime()<10000){window.setTimeout(ss.Delegate.create(this,this.$1_D),500);}},resetPos:function(){$(this._scrollingListArea).trigger('scroll');this.$1_6=false;this.scrollOffset=245-(-this.iscrollObj.get_scrollPos().x);this.$1_E(true);},$1_E:function($p0){if(!this.isRemovable){return;}var $0=this._getRowHeight();var $1=dojo.style(this.scrollWrapper,'height');var $2=Math.ceil($1/$0);var $3=Math.abs(-this.iscrollObj.get_scrollPos().y);var $4=Math.floor($3/$0);for(var $5=$4;$5<($4+$2)&&$5<this.itemList.length;$5++){this.$1_F(this.getRowAtIndex($5),this.scrollOffset,$p0);}},$1_F:function($p0,$p1,$p2){var $0=($p2)?'0':dojo.style($p0,'left');dojo.style($p0,'left',$0+$p1+'px');},deleteRow:function(index){this.iscrollObj.refresh();this.$1_A(index,false);if(ss.isValue(this.$1_9)){this.$1_9();}},deleteAllRows:function(){var $0=[];for(var $1=0;$1<this.itemList.length;$1++){var $2={};$2.rowIndex=$1;$2.rowState=false;$0.push($2);}this.iscrollObj.refresh();if(ss.isValue(this.$1_8)){this.$1_8($0,tab.FilterItemUtil.unknownItemIndex);}},$1_10:function($p0){$p0=tab.FilterItemUtil.getClassElement($p0,'ListRow');if(ss.isValue($p0)){var $0=tab.FilterItemUtil.getIndexFromId($p0.id);return (ss.isValue(this.indices))?this.indices[$0]:$0;}return tab.FilterItemUtil.unknownItemIndex;},getRowList:function(){return $(this._scrollingListArea).find('.ListRow');},getRowAtIndex:function(index){if(index===tab.FilterItemUtil.allItemIndex){return (this.bHasAll)?this._scrollingListArea.firstChild:null;}if(ss.isValue(this.indices)){index=this.$1_2[index];}if(ss.isValue(this.$1_5)){return this.$1_5.getElement(index);}return this._scrollingListArea.children[(this.bHasAll)?index+1:index];},clearAll:function(){for(var $0=0;$0<this.itemList.length;$0++){this.setSelectedAtIndex($0,false);}},$1_11:function($p0,$p1,$p2){this.$1_12(this.getRowAtIndex($p0),$p1,$p2);},$1_12:function($p0,$p1,$p2){dojo.toggleClass($p0,$p1,$p2);},$1_13:function($p0,$p1){return tab.FilterItemUtil.toggleClassState(this.getRowAtIndex($p0),$p1);},$1_14:function($p0,$p1){return this.$1_15(this.getRowAtIndex($p0),$p1);},$1_15:function($p0,$p1){return dojo.hasClass($p0,$p1);},setSelectedAtIndex:function(index,state){this.$1_11(index,'checked',state);},setSelectedRow:function(row,state){this.$1_12(row,'checked',state);},isSelectedAtIndex:function(index){return this.$1_14(index,'checked');},isSelectedRow:function(row){return this.$1_15(row,'checked');},toggleSelectedAtIndex:function(index){return this.$1_13(index,'checked');},toggleSelectedRow:function(row){return tab.FilterItemUtil.toggleClassState(row,'checked');},togglePendingAtIndex:function(index){this.$1_13(index,'pending');},togglePendingRow:function(row){return tab.FilterItemUtil.toggleClassState(row,'pending');},isPendingRow:function(row){return this.$1_15(row,'pending');},getListSize:function(){var $0=this.itemList.length+((this.isMultiValue&&!this.isSearchWidget)?1:0);return $0*this._getRowHeight();},_getRowHeight:function(){var $0=dojo.query('.ListRow:first-child',this._scrollingListArea);var $1=$0.at(0);if($1.length>0){var $2=dojo.marginBox($1[0]);return $2.h;}return 0;},getListRowCont:function(){return this.itemList.length;}}
tab.ScrollListener=function(){}
tab.ScrollListener.prototype={_iScrollRef:null,_listPos:0,_maxListPos:0,$0:null,setupScrollListener:function(scroller){this._iScrollRef=scroller;if(ss.isNullOrUndefined(this._iScrollRef)){return;}var $0=ss.Delegate.create(this,function(){
this._maxListPos=-this._iScrollRef.get_maxScroll().y;this._listPos=Math.min(Math.max(this._iScrollRef.get_scrollPos().y,0),this._maxListPos);});if(ss.isValue(this.$0)){this.$0.dispose();}this.$0=new tab.DisposableHolder();this._iScrollRef.add_touchEndCalled($0);this.$0.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this._iScrollRef.remove_touchEndCalled($0);})));scroller.set_onScrollEnd($0);this.doScrollToLastPos();},doScrollToLastPos:function(){if(this._listPos>0){this._iScrollRef.scrollTo(0,-this._listPos,10);}},_resetScrollPos:function(){this._listPos=0;this._maxListPos=0;},dispose:function(){if(ss.isValue(this.$0)){this.$0.dispose();}}}
tab.TypeInMobile=function(parent,div,attrs){tab.TypeInMobile.initializeBase(this,[parent,div,attrs]);this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.TypeInMobile.prototype={contentNode:null,touchHandler:null,iscroller:null,domNode:null,domBox:null,$2_0:null,get_inplaceMobile:function(){return this.$2_0;},set_inplaceMobile:function(value){this.$2_0=value;return value;},get_$2_1:function(){return this.get_inplaceMobile().get_popup();},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.get_domBox():this.domBox;},instantiate:function(t,itemName,isAll){var $0=[];for(var $1=0;$1<t.length;$1++){if(t[$1].s){var $2=itemName+'_'+$1;$0.push(tableau.mobile.FilterItemMobile.getTypeInHtml($2,this.formatTuple(t[$1])));}}this.contentNode=dojo.doc.createElement('div');this.div.appendChild(this.contentNode);dojo.style(this.div,'overflow','hidden');this.contentNode.innerHTML=$0.join('');this.get_inplaceMobile().setupTouchHandler(this.div);this.createPopup(t);this.iscroller=new spiff.MobileScroller(this.contentNode,this.touchHandler,null);},layout:function(contentSize,horizontalLayout){dojo.marginBox(this.div,contentSize);if(ss.isValue(this.iscroller)){this.iscroller.refresh();}},destroy:function(){this.dispose();this.get_inplaceMobile().disconnectPopup();this.get_inplaceMobile().destroyPopup();if(ss.isValue(this.iscroller)){this.iscroller.dispose();}},$2_2:function($p0,$p1){var $0=this.parent.get_oFilter().table;var $1={};$1.schema=$0.schema;$1.tuples=[];var $2=$0.tuples;var $3=$p0.length;for(var $4=0;$4<$3;$4++){var $5=$p0[$4];$2[$5.rowIndex].s=$5.rowState;$1.tuples.push($2[$5.rowIndex]);}this.updateViz($1);},createPopup:function($p0){var $0=tableau.format.formatColumnDisplayName(this.parent.get_oFilter());var $1=tableau.mobile.widget.catmode.popup.CustomValueListPopup;var $2={};$2.listParams={};$2.listParams.listItems=$p0;$2.listParams.isMultiValue=true;$2.title=$0;$2.options=true;$2.lessMore=true;$2.search=true;$2.mode='typeIn';$2.qf=this.parent;$2.listParams.filter=this.parent;$2.listParams.itemFormatter=tableau.mobile.FilterItemMobile.formatRemovableListRowFilterItemHtml;this.get_inplaceMobile().createPopup($1,$2);this.get_inplaceMobile().connectPopup();this.get_$2_1().get_list().add_dispatchItemsChanged(ss.Delegate.create(this,this.$2_2));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$2_1().get_list().remove_dispatchItemsChanged(ss.Delegate.create(this,this.$2_2));})));this.get_$2_1().createControls();},get_uniqueNodeId:function(){return this.parent.id;},updateViz:function($p0){var $0=[];var $1=[];if(!!$p0.tuples.length){this.parent.set_stateId(this.parent.get_stateId()+1);var $2=$p0.tuples.length;for(var $3=0;$3<$2;$3++){var $4=$p0.tuples[$3].d||$p0.tuples[$3].t[0].v;if(!!$p0.tuples[$3].s){$0.push($4);}else{$1.push($4);}}tab.FilterClientCommands.modifyCategoricalFilterValues(this.parent.get_session().get_visualId(),this.parent.get_field(),$0,$1);}}}
tab.PatternMobile=function(parent,div,attrs){tab.PatternMobile.initializeBase(this,[parent,div,attrs]);this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.PatternMobile.prototype={id:null,pattern:null,domNode:null,domBox:null,$2_0:null,get_inplaceMobile:function(){return this.$2_0;},set_inplaceMobile:function(value){this.$2_0=value;return value;},get_$2_1:function(){return this.get_inplaceMobile().get_popup();},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.get_domBox():this.domBox;},instantiate:function(newPattern,itemName){this.id=itemName;this.disposables=new tab.DisposableHolder();this.pattern=newPattern;if(ss.isUndefined(newPattern)){this.pattern='';}this.div.innerHTML='<span class="FIMContainer FIMPattern" id="'+this.id+'"><span class="wcInplaceSearch" style="float:left; margin-left:2px; margin-right:3px;"></span>'+'<span class="FIMItem tab-ctrl-formatted-text">'+this.pattern+'</span></span>';this.get_inplaceMobile().setupTouchHandler(this.div);this.createPopup();},destroy:function(){this.dispose();this.get_inplaceMobile().disconnectPopup();this.get_inplaceMobile().destroyPopup();},updateFromPopup:function($p0){this.parent.set_stateId(this.parent.get_stateId()+1);this.parent.get_session().setPatternFilterState($p0,this.parent);this.parent.get_oFilter().pattern=$p0;},createPopup:function(){var $0=tableau.format.formatColumnDisplayName(this.parent.get_oFilter(),false);var $1=tableau.mobile.widget.catmode.popup.PatternPopup;var $2={};$2.pattern=this.pattern;$2.title=$0;$2.type='Pattern';$2.options=true;$2.lessMore=true;$2.search=true;$2.mode='pattern';$2.qf=this.parent;this.get_inplaceMobile().createPopup($1,$2);this.get_inplaceMobile().connectPopup();this.get_$2_1().patternWidget.add_updatePattern(ss.Delegate.create(this,this.updateFromPopup));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$2_1().patternWidget.remove_updatePattern(ss.Delegate.create(this,this.updateFromPopup));})));this.get_$2_1().createControls();},get_uniqueNodeId:function(){return this.parent.id;}}
tab.RadiolistMobile=function(parent,div,attrs){tab.RadiolistMobile.initializeBase(this,[parent,div,attrs]);this.set_itemFormatter(tableau.mobile.FilterItemMobile.formatRadiolistFilterItemHtml);this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.RadiolistMobile.prototype={iscroller:null,touchHandler:null,domNode:null,domBox:null,$3_0:null,get_inplaceMobile:function(){return this.$3_0;},set_inplaceMobile:function(value){this.$3_0=value;return value;},get_$3_1:function(){return this.get_inplaceMobile().get_popup();},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.get_domBox():this.domBox;},instantiate:function(tuples,itemName,facet){this.contentNode=dojo.doc.createElement('div');this.div.appendChild(this.contentNode);dojo.style(this.div,'overflow','hidden');this.get_inplaceMobile().setupTouchHandler(this.div);this.iscroller=new spiff.MobileScroller(this.contentNode,this.touchHandler,null);this.resetContent(tuples,itemName,facet);},resetContent:function(tuples,itemName,facet){this.$3_2();tab.RadiolistMobile.callBaseMethod(this, 'resetContent',[tuples,itemName,facet]);tableau.util.defer(ss.Delegate.create(this,function(){
this.createPopup(tuples,facet);}));},shouldNotReinstantiate:function(){return ss.isValue(this.get_$3_1())&&ss.isValue(this.get_$3_1().get_searchWidget())&&this.get_$3_1().get_searchWidget().isShowingResults();},layout:function(contentSize,horizontalLayout){dojo.marginBox(this.div,contentSize);if(ss.isValue(this.iscroller)){this.iscroller.refresh();}},dispose:function(){this.$3_2();tab.RadiolistMobile.callBaseMethod(this, 'dispose');},$3_2:function(){if(ss.isValue(this.iscroller)){this.iscroller.dispose();}},destroy:function(){this.dispose();this.get_inplaceMobile().disconnectPopup();this.get_inplaceMobile().destroyPopup();},createPopup:function($p0,$p1){var $0=tableau.format.formatColumnDisplayName(this.parent.get_oFilter());var $1=tableau.mobile.widget.catmode.popup.ListPopup;var $2={};$2.listParams={};$2.listParams.filter=this.parent;$2.listParams.listItems=$p0;$2.listParams.isMultiValue=false;$2.listParams.bFacet=$p1;$2.title=$0;$2.qf=this.parent;$2.listParams.itemFormatter=tableau.mobile.FilterItemMobile.formatListRowFilterItemHtml;this.get_inplaceMobile().createPopup($1,$2);this.get_inplaceMobile().connectPopupAndAttachHandler(ss.Delegate.create(this,this.$3_3));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$3_1().get_list().remove_dispatchItemsChanged(ss.Delegate.create(this,this.$3_3));})));this.get_$3_1().createControls();},get_uniqueNodeId:function(){return this.parent.id;},$3_3:function($p0,$p1){var $0=this.parent.get_oFilter().table;var $1={};$1.schema=$0.schema;$1.tuples=[];var $2=$0.tuples;if(!$p0.length){return;}if($p1===tab.FilterItemUtil.allItemIndex){var $3=this.contentNode.firstChild;tableau.mobile.FilterItemMobile.setChecked($3,true);for(var $4=0;$4<$2.length;$4++){$3=this.tiledWidget.getElement($4);tableau.mobile.FilterItemMobile.setChecked($3,false);}this.parent.doSelectAll(true);}else{for(var $5=0;$5<$2.length;$5++){var $6=this.tiledWidget.getElement($5);if($p1===$5&&!tableau.mobile.FilterItemMobile.isChecked($6)){$1.tuples.push(tableau.mobile.FilterItemMobile.setChecked($6,true,$2[$5]));}else if($p1!==$5){tableau.mobile.FilterItemMobile.setChecked($6,false,$2[$5]);}}if(!!$1.tuples.length){this.parent.set_stateId(this.parent.get_stateId()+1);var $7=new tab.RawChange();var $8=new tab.Changelist();$7.setSingle($p1,true);$8.addChange($7);this.applyChangesByChangelist($8,this.parent.get_mode());}}}}
tab.DojoWidgetsMobile=function(){}
tab.DoubleSliderMobile=function(sliderAttributes){this.templateString="<div dojoAttachPoint='_doubleSliderWrapper' class='doubleSliderWrapper'>"+"<div dojoAttachPoint='_sliderThumbtrackRail' class='sliderThumbtrackRail'>"+"<div dojoAttachPoint='_limitsRail' class='sliderLimitsRail'>"+"<div dojoAttachPoint='_completedRail' class='sliderRangeRail'></div>"+'</div>'+"<div id='leftThumbWrapper' dojoAttachPoint='_sliderThumbTrackLeft' class='leftThumbtrackWrapper'>"+"<div id='doubleSliderLeft' dojoAttachPoint='_sliderThumbTrackLeftImage' class='leftThumbtrack'></div>"+'</div>  '+"<div id='rightThumbWrapper' dojoAttachPoint='_sliderThumbTrackRight' class='rightThumbtrackWrapper'>"+"<div id= 'doubleSliderRight' dojoAttachPoint='_sliderThumbTrackRightImage' class='rightThumbtrack'>"+'</div>'+'</div>'+'</div>'+'</div>';this.$1_0=[];tab.DoubleSliderMobile.initializeBase(this);this.$1_16=sliderAttributes;}
tab.DoubleSliderMobile.prototype={$1_1:0,$1_2:0,$1_3:0,$1_4:0,$1_5:null,$1_6:null,$1_7:0,$1_8:0,$1_9:0,$1_A:0,$1_B:0,$1_C:null,$1_D:null,$1_E:0,$1_F:false,$1_10:false,$1_11:false,$1_12:0,$1_13:0,$1_14:0,$1_15:0,$1_16:null,$1_17:null,$1_18:null,$1_19:null,$1_1A:null,$1_1B:null,$1_1C:null,$1_1D:null,$1_1E:null,$1_1F:0,_sliderThumbTrackLeft:null,_sliderThumbTrackRight:null,_sliderThumbTrackLeftImage:null,_sliderThumbTrackRightImage:null,_sliderThumbtrackRail:null,_limitsRail:null,_completedRail:null,add_updateLeftReadout:function(value){this.$1_20=ss.Delegate.combine(this.$1_20,value);},remove_updateLeftReadout:function(value){this.$1_20=ss.Delegate.remove(this.$1_20,value);},$1_20:null,add_updateRightReadout:function(value){this.$1_21=ss.Delegate.combine(this.$1_21,value);},remove_updateRightReadout:function(value){this.$1_21=ss.Delegate.remove(this.$1_21,value);},$1_21:null,add_setReadoutState:function(value){this.$1_22=ss.Delegate.combine(this.$1_22,value);},remove_setReadoutState:function(value){this.$1_22=ss.Delegate.remove(this.$1_22,value);},$1_22:null,add_updateRange:function(value){this.$1_23=ss.Delegate.combine(this.$1_23,value);},remove_updateRange:function(value){this.$1_23=ss.Delegate.remove(this.$1_23,value);},$1_23:null,add_setCurrentMinMax:function(value){this.$1_24=ss.Delegate.combine(this.$1_24,value);},remove_setCurrentMinMax:function(value){this.$1_24=ss.Delegate.remove(this.$1_24,value);},$1_24:null,add_onPopupSliderChange:function(value){this.$1_25=ss.Delegate.combine(this.$1_25,value);},remove_onPopupSliderChange:function(value){this.$1_25=ss.Delegate.remove(this.$1_25,value);},$1_25:null,postCreate:function(){},startup:function(){this.setupInitValues();this.enableTouchHandling();this.drawRangeRail();this.setPopupReadouts();},setupInitValues:function(){this.$1_F=this.$1_16['showLeftHandle'];this.$1_10=this.$1_16['showRightHandle'];this.$1_17=this.$1_16['rangeMax'].s;this.$1_18=(this.$1_16['rangeMax']).t;this.$1_19=(this.$1_16['rangeMin']).v;this.$1_1A=(this.$1_16['rangeMax']).v;this.$1_1B=(this.$1_16['dataMin']).v;this.$1_1C=(this.$1_16['dataMax']).v;this.$1_1D=(this.$1_16['currentMin']).v;this.$1_1E=(this.$1_16['currentMax']).v;this.$1_2=-dojo.style(this._sliderThumbTrackLeft,'width');this.$1_3=dojo.style(this._sliderThumbtrackRail,'width');this.$1_1=this.calculateSliderRange();this.calculatePrecision();this.$1_B=this.$1_1/this.$1_3;this.$1_E=parseInt(dojo.style(this._sliderThumbTrackLeft,'width'));this.setupSliders();this.setupLimitsIndicatorRail();this.setupDataRangeIndicatorRail();},updateData:function(attrs){this.$1_16=attrs;this.setupInitValues();this.drawRangeRail();this.setPopupReadouts();this.setupSliders();},setupSliders:function(){var $0;($(this._sliderThumbTrackLeft)).toggleClass('HFButtonHide',!this.$1_F);if(!this.$1_F){this.$1_7=this.$1_2;if(ss.isValue(this.$1_22)){this.$1_22('left',false);}}else{$0=this.convertIndexToPixels((this.$1_1D-this.$1_19),'left');this.setSliderPosition('left',$0);this.$1_7=$0;this.$1_8=$0;}($(this._sliderThumbTrackRight)).toggleClass('HFButtonHide',!this.$1_10);if(!this.$1_10){this.$1_9=parseInt(dojo.style(this._sliderThumbtrackRail,'width'));if(ss.isValue(this.$1_22)){this.$1_22('right',false);}}else{$0=this.convertIndexToPixels((this.$1_1E-this.$1_19),'right');this.setSliderPosition('right',$0);this.$1_9=$0;this.$1_A=$0;}},setParent:function(parent){this.$1_D=parent;},setupLimitsIndicatorRail:function(){var $0=this.$1_7+this.$1_E;dojo.style(this._limitsRail,'left',$0+'px');dojo.style(this._limitsRail,'width',(this.$1_9-$0)+'px');},setupDataRangeIndicatorRail:function(){this.$1_14=0;dojo.style(this._completedRail,'left','0px');if(this.$1_1B==null&&this.$1_1C==null){this.$1_11=false;}else{this.$1_11=true;}var $0=this.$1_16['dataMin'];var $1=this.$1_16['rangeMin'];if(ss.isValue($0.v)){this.$1_12=this.convertIndexToPixels(($0.v-$1.v),null);}var $2=this.$1_16['dataMax'];if(ss.isValue($2.v)){this.$1_13=this.convertIndexToPixels(($2.v-$1.v),null);}},drag:function(elementID,pageX,railX){var $0;var $1;var $2;pageX=Math.round(pageX*tableau.mobile.util.scaling.getZoomScaleFactor());$0=pageX-railX-Math.abs(this.$1_2);if(elementID===this._sliderThumbTrackLeft.id||elementID===this._sliderThumbTrackLeftImage.id){if($0<this.$1_2){$0=this.$1_2;this.$1_7=$0;}else if(($0+this.$1_E)>this.$1_9){$0=this.$1_9-this.$1_E;this.$1_7=$0;}else{this.$1_7=$0;}dojo.style(this._sliderThumbTrackLeft,'left',this.$1_7+'px');this.drawRangeRail();if(ss.isValue(this.$1_20)){this.$1_20(this.getSliderValue(this.$1_7,'left'),this.$1_18,this.$1_17,this.$1_15);}}else if(elementID===this._sliderThumbTrackRight.id||elementID===this._sliderThumbTrackRightImage.id){if($0<(this.$1_7+this.$1_E)){$0=this.$1_7+this.$1_E;this.$1_9=$0;}else if($0>this.$1_3){$0=this.$1_3;this.$1_9=$0;}else{this.$1_9=$0;}dojo.style(this._sliderThumbTrackRight,'left',this.$1_9+'px');this.drawRangeRail();if(ss.isValue(this.$1_21)){this.$1_21(this.getSliderValue(this.$1_9,'right'),this.$1_18,this.$1_17,this.$1_15);}}$1=this.getSliderValue(this.$1_7,'left');$2=this.getSliderValue(this.$1_9,'right');if(ss.isValue(this.$1_23)){this.$1_23($1,$2);}},calculateSliderRange:function(){if(ss.isValue(this.$1_1D)){this.$1_6=(this.$1_19<=this.$1_1D)?this.$1_16['rangeMin']:this.$1_16['currentMin'];}else{this.$1_6=this.$1_16['rangeMin'];}if(ss.isValue(this.$1_1E)){this.$1_5=(this.$1_1A>=this.$1_1E)?this.$1_16['rangeMax']:this.$1_16['currentMax'];}else{this.$1_5=this.$1_16['rangeMax'];}return (this.$1_5.v-this.$1_6.v);},getRange:function(){return this.$1_5.v-this.$1_6.v;},calculatePrecision:function(){var $0=(!!this.getRange())?this.getRange()/this.$1_3:1;var $1=Math.log($0)/Math.log(10);this.$1_15=($1>0)?Math.ceil($1):Math.floor($1);if(this.$1_15===Number.NEGATIVE_INFINITY||isNaN(this.$1_15)){this.$1_15=5;}},convertIndexToPixels:function(index,slider){if(slider==='right'){return Math.round(index/this.$1_B);}else if(slider==='left'){return Math.round(index/this.$1_B)-this.$1_E;}else{return Math.round(index/this.$1_B);}},$1_26:function(){this.$1_C=window.setTimeout(ss.Delegate.create(this,this.$1_28),1000);},$1_27:function(){if(ss.isValue(this.$1_C)){window.clearTimeout(this.$1_C);this.$1_C=null;}},$1_28:function(){var $0;var $1;var $2=false;if(this.$1_9!==this.$1_A){this.$1_A=this.$1_9;$1=this.getSliderValue(this.$1_A,'right');$2=true;}else{$1=this.$1_1E;}if(this.$1_7!==this.$1_8){this.$1_8=this.$1_7;$0=this.getSliderValue(this.$1_8,'left');$2=true;}else{$0=this.$1_1D;}if($2&&ss.isValue(this.$1_25)){this.$1_25($0,$1);}},setSliderPosition:function(slider,pixelPosition){if(pixelPosition>=this.$1_2&&pixelPosition<=this.$1_3){if(slider==='left'){if(!!this.$1_16['showLeftHandle']){dojo.style(this._sliderThumbTrackLeft,'left',pixelPosition+'px');this.$1_7=pixelPosition;}}else if(slider==='right'){if(!!this.$1_16['showRightHandle']){dojo.style(this._sliderThumbTrackRight,'left',pixelPosition+'px');this.$1_9=pixelPosition;}}}},drawRangeRail:function(){this.setupLimitsIndicatorRail();if(!!this.$1_11){var $0;var $1;var $2;var $3;if((this.$1_7+this.$1_E>this.$1_13)||(this.$1_9<this.$1_12)){$0=$1=this.$1_12;}else{if(this.$1_7+this.$1_E<=this.$1_12){$0=this.$1_12;}else{$0=this.$1_7+this.$1_E;}if(this.$1_9>=this.$1_13){$1=this.$1_13;}else{$1=this.$1_9;}}$2=(this.$1_14+$0);$3=parseInt(dojo.style(this._limitsRail,'left'));dojo.style(this._completedRail,'left',($2-$3)+'px');dojo.style(this._completedRail,'width',($1-$0)+'px');}else{dojo.style(this._completedRail,'width','0'+'px');}},getSliderValue:function(posInPixels,slider){var $0;if(slider==='right'){if(posInPixels===this.$1_3){return this.$1_1A;}else if(!posInPixels){return this.$1_19;}if(this.$1_15<0){$0=Math.pow(10,-this.$1_15);return Math.round((this.$1_19+(posInPixels*this.$1_B))*$0)/$0;}else{return this.$1_19+Math.round(posInPixels*this.$1_B);}}else if(slider==='left'){if(posInPixels===this.$1_2){return this.$1_19;}else if(posInPixels+Math.abs(this.$1_2)===this.$1_3){return this.$1_1A;}var $1=posInPixels+Math.abs(this.$1_2);if(this.$1_15<0){$0=Math.pow(10,-this.$1_15);return Math.round((this.$1_19+($1*this.$1_B))*$0)/$0;}else{return this.$1_19+Math.round($1*this.$1_B);}}return undefined;},enableTouchHandling:function(){var $0=spiff.$create_EventHandleSpec();$0.dragMove=ss.Delegate.create(this,this.onDrag);$0.dragStart=ss.Delegate.create(this,this.onDragStart);$0.dragEnd=ss.Delegate.create(this,this.onDragEnd);var $1=spiff.$create_EventHandleSpec();$1.dragMove=ss.Delegate.create(this,this.onDrag);$1.dragStart=ss.Delegate.create(this,this.onDragStart);$1.dragEnd=ss.Delegate.create(this,this.onDragEnd);if(!!this.$1_16['showLeftHandle']){this.$1_0.push(new spiff.TableauEventHandler(this._sliderThumbTrackLeft,$0));this.$1_0.push(new spiff.TableauEventHandler(this._sliderThumbTrackLeftImage,$0));}else{dojo.addClass(this._sliderThumbTrackLeft,'hide');}if(!!this.$1_16['showRightHandle']){this.$1_0.push(new spiff.TableauEventHandler(this._sliderThumbTrackRight,$1));this.$1_0.push(new spiff.TableauEventHandler(this._sliderThumbTrackRightImage,$0));}else{dojo.addClass(this._sliderThumbTrackRight,'hide');}},getRailX:function(){var $0;var $1;var $2;var $3=this.$1_D.containerNode;$0=tab.DomUtil.getElementRelativePosition($(this._sliderThumbtrackRail),$($3)).x;$1=tab.DomUtil.getElementClientPosition($($3)).x;$1=Math.round($1*tableau.mobile.util.scaling.getZoomScaleFactor());$2=$1+$0;return $2;},onDragStart:function(e){var $0;var $1;if(ss.isValue(this.$1_C)){this.$1_27();}this.$1_1F=this.getRailX();if(this.$1_F){$0=this.getSliderValue(this.$1_7,'left');}else{$0=null;}if(this.$1_10){$1=this.getSliderValue(this.$1_9,'right');}else{$1=null;}if(ss.isValue(this.$1_24)){this.$1_24($0,$1);}},onDrag:function(e){this.drag(e.target.id,e.pageX,this.$1_1F);e.preventDefault();},onDragEnd:function(e){if(ss.isValue(this.$1_C)){this.$1_27();}this.$1_26();},setPopupReadouts:function(){if(this.$1_1D!=null){if(ss.isValue(this.$1_20)){this.$1_20(this.$1_1D,this.$1_18,this.$1_17,this.$1_15);}}else{var $0=this.$1_16['rangeMin'];if(ss.isValue(this.$1_20)&&ss.isValue($0.v)){this.$1_20($0.v,$0.t,this.$1_19.s,this.$1_15);}}if(this.$1_1E!=null){if(ss.isValue(this.$1_21)){this.$1_21(this.$1_1E,this.$1_18,this.$1_17,this.$1_15);}}else{var $1=this.$1_16['rangeMax'];if(ss.isValue(this.$1_21)&&ss.isValue($1.v)){this.$1_21($1.v,$1.t,this.$1_1A.s,this.$1_15);}}},destroy:function(){this.$1_27();var $enum1=ss.IEnumerator.getEnumerator(this.$1_0);while($enum1.moveNext()){var $0=$enum1.current;$0.dispose();}this.$1_0=[];this.inherited(arguments);}}
tab.FeedbackMobile=function(){}
tab.FeedbackMobile.$5=function($p0){delete tab.FeedbackMobile.$2[$p0.tapID];tab.FeedbackMobile.$3.push($p0);}
tab.FeedbackMobile.$6=function(){if(tab.FeedbackMobile.$1>=5){var $dict1=tab.FeedbackMobile.$2;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};if(tab.MiscUtil.hasOwnProperty(tab.FeedbackMobile.$2,$0.key)){tab.FeedbackMobile.$2[$0.key].resetToInitialState();tab.FeedbackMobile.$2[$0.key].destroy();}}tab.FeedbackMobile.$2={};tab.FeedbackMobile.$1=0;}if(tab.FeedbackMobile.$3.length>=5){for(var $1=5,$2=tab.FeedbackMobile.$3.length;$1<$2;$1++){var $3=tab.FeedbackMobile.$3.pop();$3.destroy();}}}
tab.FeedbackMobile.$7=function($p0,$p1){var $0=new tableau.mobile.widget.feedback.TapFeedback(tab.$create_TapFeedbackArgs($p0,$p1,tab.FeedbackMobile.$5));tab.FeedbackMobile.$1+=1;$0.tapID=tab.FeedbackMobile.$1.toString();tab.FeedbackMobile.$2[tab.FeedbackMobile.$1.toString()]=$0;return $0;}
tab.FeedbackMobile.$8=function($p0){for(var $0=0;$0<$p0;$0++){tab.FeedbackMobile.$3.push(tab.FeedbackMobile.$7(null,null));}}
tab.FeedbackMobile.createTapFeedback=function(placeUnder,pseudoEvent){var $0;tab.FeedbackMobile.$6();if(tab.FeedbackMobile.$3.length<1){$0=tab.FeedbackMobile.$7(placeUnder,pseudoEvent);}else{$0=tab.FeedbackMobile.$3.pop();}$0.init(placeUnder,pseudoEvent);$0.placeAt(placeUnder);window.setTimeout(ss.Delegate.create($0,$0.startup),0);return $0;}
tab.FeedbackMobile.createPressFeedback=function(placeUnder,pseudoEvent){if(!!!tab.FeedbackMobile.$4){tab.FeedbackMobile.$4=new tableau.mobile.widget.feedback.PressFeedback(tab.$create_PressFeedbackArgs(placeUnder,pseudoEvent));}else{tab.FeedbackMobile.$4.updateParent(placeUnder,pseudoEvent);}tab.FeedbackMobile.$4.placeAt(placeUnder);window.setTimeout(function(){
tab.FeedbackMobile.$4.onPressStart(pseudoEvent);},0);return tab.FeedbackMobile.$4;}
tab.TapFeedback=function(args){this.templateString="<div class='TapFeedback'>"+"<div class='TapSplash' dojoAttachPoint='domSplash'>"+"<canvas class='TapSplashCanvas' dojoAttachPoint='domSplashCanvas' width='150' height='150'></canvas>"+'</div>'+"<div class='TapReticle' dojoAttachPoint='domReticle'>"+"<div style='position: relative;'>"+"<div class='TapReticleBarV'></div>"+"<div class='TapReticleBarH'></div>"+'</div>'+'</div>'+'</div>';tab.TapFeedback.initializeBase(this);this.$1_1=args.parent;this.$1_2=args.event;this.finishedCallback=args.finishedCallback;}
tab.TapFeedback.prototype={domSplash:null,domSplashCanvas:null,domReticle:null,$1_1:null,$1_2:null,tapID:null,$1_3:null,_parentCoords:null,$1_4:false,$1_5:false,finishedCallback:null,postCreate:function(){var $0=this.domSplashCanvas.getContext('2d');$0.globalAlpha=0.2;$0.fillStyle=this.$1_6($0,75);$0.fillRect(0,0,75*2,75*2);this.$1_3=new tab.DisposableHolder();this.$1_3.add(spiff.EventUtil.bindWithDispose($(this.domSplash),'webkitTransitionEnd',ss.Delegate.create(this,this.onSplashTransitionEnd)));dojo.addClass(this.domSplash,'PreStart');},init:function(newParent,newEvent){this.$1_1=newParent;this.$1_2=newEvent;this._parentCoords=dojo.coords(this.$1_1,true);},$1_6:function($p0,$p1){var $0=$p0.createRadialGradient($p1,$p1,0,$p1,$p1,$p1);$0.addColorStop(0,'rgba(0, 176, 240, 0.6)');$0.addColorStop(0.85,'rgba(0, 176, 240, 0.8)');$0.addColorStop(0.9,'rgba(0, 176, 240, 1.0)');$0.addColorStop(1,'rgba(0, 176, 240, 0.0)');$0.addColorStop(1,'#FFFFFF');return $0;},startup:function(){if(!!this.$1_2){this.onTouchStart(this.$1_2);}},onTouchStart:function(e){var $0=e.pageX-this._parentCoords.x;var $1=e.pageY-this._parentCoords.y;dojo.style(this.domNode,'pointer-events','none');dojo.style(this.domNode,'left',$0-75+'px');dojo.style(this.domNode,'top',$1-75+'px');dojo.addClass(this.domReticle,'InstantTransition');dojo.style(this.domReticle,'opacity',1);dojo.style(this.domReticle,'display','block');this.$1_4=true;dojo.style(this.domSplash,'opacity',1);dojo.style(this.domSplash,'webkitTransform','scale(1.0)');window.setTimeout(ss.Delegate.create(this,function(){
this.onSplashTransitionEnd(null);}),600);},onSplashTransitionEnd:function(newEvent){if(this.$1_4){dojo.style(this.domSplash,'opacity','0');this.$1_4=false;this.$1_5=true;dojo.removeClass(this.domReticle,'InstantTransition');dojo.addClass(this.domReticle,'SlowTransition');dojo.style(this.domReticle,'opacity','0');}else if(this.$1_5){this.resetToInitialState();this.$1_5=false;this.finishedCallback(this);}},resetToInitialState:function(){if(!!this.domNode){this.domNode=this.domNode.parentNode.removeChild(this.domNode);dojo.style(this.domNode,'left',-3000+'px');dojo.style(this.domSplash,'webkitTransform','scale(0.05)');dojo.removeClass(this.domReticle,'SlowTransition');dojo.addClass(this.domReticle,'InstantTransition');dojo.style(this.domReticle,'opacity',1);dojo.style(this.domSplash,'opacity',1);}},dispose:function(){this.$1_3.dispose();}}
tab.PressFeedback=function(args){this.templateString="<div class='PressFeedback' dojoAttachPoint='domPressFeedback'>"+"<canvas class='PressFeedbackCanvas' dojoAttachPoint='domCanvas' width='141' height='141'></canvas>"+'</div>';tab.PressFeedback.initializeBase(this);this.$1_4=args.parent;this.$1_5=args.event;}
tab.PressFeedback.prototype={domPressFeedback:null,domCanvas:null,$1_4:null,$1_5:null,_animationFrameTimer:null,_clockAtPressTimerStart:null,_canvasContext:null,$1_6:null,_parentCoords:null,postCreate:function(){dojo.style(this.domPressFeedback,{width:141+'px',height:141+'px'});this.domCanvas.width=this.domCanvas.height=141;this._canvasContext=this.domCanvas.getContext('2d');this.$1_6=new tab.DisposableHolder();this.$1_6.add(spiff.EventUtil.bindWithDispose($(this.domPressFeedback),'webkitTransitionEnd',ss.Delegate.create(this,this.$1_7)));this.updateParent(this.$1_4,this.$1_5);},updateParent:function(newParent,newEvent){this.$1_4=newParent;this.$1_5=newEvent;this._parentCoords=dojo.coords(newParent,true);},onPressStart:function(e){var $0=e.pageX-this._parentCoords.x;var $1=e.pageY-this._parentCoords.y;this.$1_9($0,$1);},onPressEnd:function(){this.$1_7(null);},dispose:function(){this.$1_6.dispose();},$1_7:function($p0){this.$1_8();if(!!this.domNode&&!!this.domNode.parentNode){this.domNode.parentNode.removeChild(this.domNode);}},$1_8:function(){if(!!this._animationFrameTimer){window.clearInterval(this._animationFrameTimer);this._animationFrameTimer=null;}this._canvasContext.clearRect(0,0,141,141);dojo.style(this.domPressFeedback,{display:'none',webkitTransitionDuration:'0ms',webkitTransform:'scale(1.0)'});},$1_9:function($p0,$p1){this.$1_8();dojo.style(this.domPressFeedback,{left:($p0-(120/2)-10.5)+'px',top:($p1-(120/2)-10.5)+'px',display:'block'});this._clockAtPressTimerStart=new Date();this._animationFrameTimer=window.setInterval(ss.Delegate.create(this,this.$1_A),40);},$1_A:function(){var $0=new Date()-this._clockAtPressTimerStart;var $1=Math.max(0,Math.min(1,$0/500));this.$1_B($1);if($1>=1){dojo.style(this.domPressFeedback,{webkitTransitionProperty:'-webkit-transform',webkitTransitionDuration:250+'ms',webkitTransform:'scale(0.05)'});}},$1_B:function($p0){var $0=this._canvasContext;var $1;var $2;var $3=Math.floor(10.5)-1;var $4=Math.floor($3/2);var $5=120+10.5;var $6=function($p1_0,$p1_1){
$0.fillStyle='rgba(0, 176, 240, 1.0)';$0.fillRect($p1_0-$4,$p1_1-$4,$3,$3);};$p0=Math.max(0,$p0);$p0=Math.min(1,$p0);$0.clearRect(0,0,141,141);$0.beginPath();$0.moveTo(10.5,10.5);if($p0<=0.25){$1=($p0*4*120)+10.5;$0.lineTo($1,10.5);$6($1,10.5);}else if($p0<=0.5){$2=(($p0-0.25)*4*120)+10.5;$0.lineTo($5,10.5);$0.lineTo($5,$2);$6($5,$2);}else if($p0<0.75){$1=$5-(($p0-0.5)*4*120);$0.lineTo($5,11);$0.lineTo($5,$5);$0.lineTo($1,$5);$6($1,$5);}else if($p0<1){$2=$5-(($p0-0.75)*4*120);$0.lineTo($5,10.5);$0.lineTo($5,$5);$0.lineTo(10.5,$5);$0.lineTo(10.5,$2);$6(10.5,$2);}else{$0.rect(10.5,10.5,120,120);}$0.strokeStyle='rgba(0, 176, 240, 1.0)';$0.stroke();$0.fillStyle='rgba(0, 176, 240, '+($p0*0.15)+')';$0.fillRect(10.5,10.5,120,120);}}
tab.HierarchicalControlPopup=function(){this.$1_22=new tab.DisposableHolder();tab.HierarchicalControlPopup.initializeBase(this);}
tab.HierarchicalControlPopup.prototype={intervalCount:0,intervalId:0,suppressRefresh:false,params:null,add_onLevelClickInPopupCalled:function(value){this.$1_23=ss.Delegate.combine(this.$1_23,value);},remove_onLevelClickInPopupCalled:function(value){this.$1_23=ss.Delegate.remove(this.$1_23,value);},$1_23:null,add_onExpandNodeCalled:function(value){this.$1_24=ss.Delegate.combine(this.$1_24,value);},remove_onExpandNodeCalled:function(value){this.$1_24=ss.Delegate.remove(this.$1_24,value);},$1_24:null,add_onCollapseNodeCalled:function(value){this.$1_25=ss.Delegate.combine(this.$1_25,value);},remove_onCollapseNodeCalled:function(value){this.$1_25=ss.Delegate.remove(this.$1_25,value);},$1_25:null,add_notifyMemberChangeCalled:function(value){this.$1_26=ss.Delegate.combine(this.$1_26,value);},remove_notifyMemberChangeCalled:function(value){this.$1_26=ss.Delegate.remove(this.$1_26,value);},$1_26:null,get_$1_27:function(){return this.get_content();},get_asScrollListener:function(){return this;},getContentDimensions:function(availableHeight){return this.get_$1_27().getContentDimensions(availableHeight);},postCreate:function(){this.params.parentPopup=this;this.set_content(new tableau.mobile.widget.catmode.popup.HierarchicalControlContentMobile(this.params,null));this.get_$1_27().placeAt(this.domContent,'after');this.inherited(arguments);this.get_$1_27().add_onTreeSizeChanged(ss.Delegate.create(this,this._onTreeSizeChanged));this.$1_22.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$1_27().remove_onTreeSizeChanged(ss.Delegate.create(this,this._onTreeSizeChanged));})));this.get_asScrollListener().setupScrollListener(this.get_$1_27().$1_0);},update:function(popupParams){this.inherited(arguments);this.get_asScrollListener().doScrollToLastPos();},show:function(newPageX,newPageY){this.inherited(arguments);this.get_$1_27().treeSizeChanged();this.get_$1_27().tree.visible=true;},hide:function(){this.get_$1_27().tree.visible=false;this.inherited(arguments);},_refreshContent:function($p0){if(!!this.get_content()&&!this.suppressRefresh){this.get_$1_27().destroy();this.$1_22.dispose();this.$1_22=new tab.DisposableHolder();$p0.parentPopup=this;this.set_content(new tableau.mobile.widget.catmode.popup.HierarchicalControlContentMobile($p0,null));this.get_$1_27().placeAt(this.domContent,'after');this.get_$1_27().add_onTreeSizeChanged(ss.Delegate.create(this,this._onTreeSizeChanged));this.$1_22.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$1_27().remove_onTreeSizeChanged(ss.Delegate.create(this,this._onTreeSizeChanged));})));this.intervalCount=0;window.clearInterval(this.intervalId);this.intervalId=window.setInterval(ss.Delegate.create(this,this.refreshTreeHeight),100);}this.suppressRefresh=false;this.get_asScrollListener().setupScrollListener(this.get_$1_27().$1_0);},refreshTreeHeight:function(){var $0=dojo.marginBox(this.get_$1_27()._scrollingTreeArea);if($0.h>5||this.intervalCount>20){this.get_$1_27().treeSizeChanged();window.clearInterval(this.intervalId);this.get_asScrollListener().doScrollToLastPos();}},onExpandNode:function(item,node){if(ss.isValue(this.$1_24)){this.$1_24(item,node);}},onCollapseNode:function(item,node){if(ss.isValue(this.$1_25)){this.$1_25(item,node);}},$1_28:function($p0,$p1){this.suppressRefresh=true;if(ss.isValue(this.$1_23)){this.$1_23($p0,$p1);}},notifyMemberChange:function(e){this.suppressRefresh=true;if(ss.isValue(this.$1_26)){this.$1_26(e);}},_onTreeSizeChanged:function(){this.doResize(null,null);},destroy:function(){this.get_$1_27().destroy();this.$1_22.dispose();this.inherited(arguments);}}
tab.HierarchicalControlContentMobile=function(options,srcRefNode){this.templateString='<div>'+"<div style='margin-left:30px;' dojoAttachPoint='_levelsWrapper'>"+"<table class='HFLevels'>"+"<tr dojoAttachPoint='_levelButtonsContainer'>"+'</tr>'+'</table>'+'</div>'+"<div dojoAttachPoint='_scrollWrapper' style='position:relative;'>"+"<div dojoAttachPoint='_scrollingTreeArea'></div>"+'</div>'+'</div>';this.$1_1=new tab.DisposableHolder();tab.HierarchicalControlContentMobile.initializeBase(this);this.params=options;this.title=options.title;this.mode=options.mode;this.levelButtonHanders=[];}
tab.HierarchicalControlContentMobile.prototype={_levelButtonsContainer:null,_scrollingTreeArea:null,parentPopup:null,_availableHeight:0,_levelsWrapper:null,_scrollWrapper:null,params:null,title:null,mode:null,scrollHandler:null,$1_0:null,levelButtonHanders:null,tree:null,add_onTreeSizeChanged:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_onTreeSizeChanged:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,postCreate:function(){var $0={};$0.model=this.params.model;$0.showRoot=false;this.tree=new tableau.mobile.Tree($0);var $1=this.tree;dojo.forEach(this.tree.rootNode.getChildren(),function($p1_0){
var $1_0=$p1_0;if($1_0.isExpandable){$1._expandNode($1_0);}});this.tree.add_notifyChangeCalled(ss.Delegate.create(this.parentPopup,this.parentPopup.notifyMemberChange));this.tree.add_treeSizeChangedCalled(ss.Delegate.create(this,this.treeSizeChanged));this.tree.add_onOpenCalled(ss.Delegate.create(this.parentPopup,this.parentPopup.onExpandNode));this.tree.add_onCloseCalled(ss.Delegate.create(this.parentPopup,this.parentPopup.onCollapseNode));this.$1_1.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.tree.remove_notifyChangeCalled(ss.Delegate.create(this.parentPopup,this.parentPopup.notifyMemberChange));this.tree.remove_treeSizeChangedCalled(ss.Delegate.create(this,this.treeSizeChanged));this.tree.remove_onOpenCalled(ss.Delegate.create(this.parentPopup,this.parentPopup.onExpandNode));this.tree.remove_onCloseCalled(ss.Delegate.create(this.parentPopup,this.parentPopup.onCollapseNode));})));if(this.params.isSingleSelect||!this.params.showLevels){dojo.style(this._levelButtonsContainer,'display','none');}else{this.formatLevelButtons();}this._enableTouchEvents();this.inherited(arguments);},getContentDimensions:function(currentAvailableHeight){this._availableHeight=currentAvailableHeight;this._setTreeScrollerHeight();var $0=dojo.marginBox(this._levelsWrapper);var $1=dojo.marginBox(this._scrollWrapper);var $2=tab.$create_DojoCoords();$2.h=$1.h+$0.h;return $2;},_setTreeScrollerHeight:function(){var $0;var $1;var $2=dojo.marginBox(this._levelsWrapper);var $3=dojo.marginBox(this._scrollingTreeArea);$1=Math.min($3.h,this._availableHeight-$2.h);$0=Math.min($1,this._availableHeight-$2.h);dojo.style(this._scrollWrapper,'height',$0+'px');this.$1_0.refresh();},startup:function(){},update:function($p0){this.params=$p0;this.title=$p0.title;this.mode=$p0.mode;dojox.data.dom.removeChildren(this._levelButtonsContainer);if(!this.params.isSingleSelect){this.formatLevelButtons();}this.inherited(arguments);},_enableTouchEvents:function(){var $0=spiff.$create_EventHandleSpec();$0.tap=ss.Delegate.create(this,this.onSelect);this.scrollHandler=new spiff.TableauEventHandler(this._scrollingTreeArea,$0);var $1=spiff.$create_MobileScrollerOptions();$1.displayPolicy='always';this.$1_0=new spiff.MobileScroller(this._scrollingTreeArea,this.scrollHandler,$1);this._scrollingTreeArea.appendChild(this.tree.domNode);},onSelect:function($p0){},treeSizeChanged:function(){this._setTreeScrollerHeight();this.$1_2();},formatLevelButtons:function(){for(var $0=0;$0<this.params.oFilter.levels.length;$0++){var $1=dojo.doc.createElement('td');$1.appendChild(dojo.doc.createTextNode($0.toString()));this._levelButtonsContainer.appendChild($1);if(this.mode!=='radiolist'){if(!this.params.oFilter.levels[$0]){dojo.addClass($1,'HFLevelAllSelected');}else if(this.params.oFilter.levels[$0]===1){dojo.addClass($1,'HFLevelNoneSelected');}else{dojo.addClass($1,'HFLevelSomeSelected');}}if(!$0){dojo.addClass($1,'HFLevelFirst');}else{if($0<this.params.oFilter.levels.length-1){dojo.addClass($1,'HFLevelNonLeaf');}else{dojo.addClass($1,'HFLevelLast');}}var $2=spiff.$create_EventHandleSpec();$2.potentialTap=ss.Delegate.create(this,this.onLevelClick);this.levelButtonHanders.add(new spiff.TableauEventHandler($1,$2));}},onLevelClick:function($p0){var $0=$p0.target;var $1;if($0.tagName.toLowerCase()!=='td'){return;}$p0.preventDefault();if(this.params.isSingleSelect){return;}var $2=parseInt(dojox.data.dom.textContent($0),10);if(!this.params.oFilter.levels[$2]){$1=false;dojo.removeClass($0,'HFLevelAllSelected');dojo.removeClass($0,'HFLevelSomeSelected');dojo.addClass($0,'HFLevelNoneSelected');this.params.oFilter.levels[$2]=1;}else{$1=true;dojo.removeClass($0,'HFLevelNoneSelected');dojo.removeClass($0,'HFLevelSomeSelected');dojo.addClass($0,'HFLevelAllSelected');this.params.oFilter.levels[$2]=0;}this.parentPopup.$1_28($2,$1);},dispose:function(){this.$1_1.dispose();this.scrollHandler.dispose();this.$1_0.dispose();},destroy:function(){dojo.forEach(this.levelButtonHanders,function($p1_0){
($p1_0).destroy();});this.dispose();this.inherited(arguments);}}
tab.InplaceMobilePopup=function(widget){this.$0=widget;}
tab.InplaceMobilePopup.prototype={$0:null,popup:null,$1:null,$2:null,$3:null,get_popup:function(){return this.popup;},get_touchHandler:function(){return this.$1;},createPopup:function(popupClass,popupParams){var $0=this.$0.get_uniqueNodeId()+'_popup';var $1=dojo.byId($0);if(!!!$1){$1=dojo.doc.createElement('span');dojo.attr($1,'id',$0);dojo.body().appendChild($1);}var $2=new tableau.mobile.widget.catmode.popup.PopupFactory();this.popup=$2.getPopupObject(popupClass,popupParams,$0);},destroyPopup:function(){if(!!this.popup){if(!this.popup.isVisible()){var $0=new tableau.mobile.widget.catmode.popup.PopupFactory();$0.removePopup(this.popup);}}},setupTouchHandler:function(itemElement){if(!!this.$1){return;}var $0=this.$0.get_domBoxElement();if(!ss.isUndefined($0)){this.$2=$0;}else{this.$2=itemElement;}this.$1=new spiff.TableauEventHandler(this.$2,spiff.$create_EventHandleSpec());},connectPopup:function(){this.connectPopupAndAttachHandler(null);},connectPopupAndAttachHandler:function(dispatchItemsHandlerAction){if(ss.isValue(this.popup)&&ss.isValue(dispatchItemsHandlerAction)){this.$3=dispatchItemsHandlerAction;this.popup.add_dispatchItemsChanged(dispatchItemsHandlerAction);this.popup.get_list().add_dispatchItemsChanged(dispatchItemsHandlerAction);}this.setupTouchHandler(this.$0.get_domNodeElement());var $0=spiff.$create_EventHandleSpec();$0.firstTouch=ss.Delegate.create(this,this.$4);$0.lastTouch=ss.Delegate.create(this,this.$5);$0.cancelPotentialTap=ss.Delegate.create(this,this.$5);$0.cancelPotentialPress=ss.Delegate.create(this,this.$5);$0.potentialTap=ss.Delegate.create(this,this.onFingerUp);this.$1.update($0);},$4:function($p0){$(this.$2).siblings('.MobilePanelBorderOuter').addClass('tab-inplace-touched');},$5:function($p0){$(this.$2).siblings('.MobilePanelBorderOuter').removeClass('tab-inplace-touched');},onFingerUp:function(pseudoEvent){this.$5(pseudoEvent);if(ss.isValue(this.popup)){if(!this.popup.isVisible()){var $0=dojo.coords(pseudoEvent.currentTarget);var $1=$0.x;var $2=$0.y;this.popup.show($1,$2);}else{this.popup.hide();}}},disconnectPopup:function(){if(ss.isValue(this.$1)){this.$1.destroy();this.$1=null;}if(ss.isValue(this.$3)){this.popup.remove_dispatchItemsChanged(this.$3);this.popup.get_list().remove_dispatchItemsChanged(this.$3);}},isPopupVisible:function(){return this.popup.isVisible();}}
tab.OptionsWidgetMobile=function(parameters,srcRefNode){tab.OptionsWidgetMobile.initializeBase(this,[parameters,srcRefNode]);this.$1_16=[];}
tab.OptionsWidgetMobile.prototype={isMultiValue:false,bHasAll:false,isSearchWidget:false,iscrollObj:false,scrollHandler:null,single:false,baseClass:'Options',qf:null,popup:null,$1_16:null,$1_17:false,add_hideUICalled:function(value){this.$1_18=ss.Delegate.combine(this.$1_18,value);},remove_hideUICalled:function(value){this.$1_18=ss.Delegate.remove(this.$1_18,value);},$1_18:null,add_handleOptionsSelection:function(value){this.$1_19=ss.Delegate.combine(this.$1_19,value);},remove_handleOptionsSelection:function(value){this.$1_19=ss.Delegate.remove(this.$1_19,value);},$1_19:null,createMenuItemClickHander:function(menuItem){return menuItem.get_data();},postCreate:function(){this.update(null);dojo.addClass(this.domNode,'Options');this.hideUI();},destroy:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$1_16);while($enum1.moveNext()){var $0=$enum1.current;$0.dispose();}},toggleUI:function(){dojo.style(this.domNode,'display',(this.$1_17)?'none':'');this.$1_17=!this.$1_17;},showUI:function(){this.$1_17=true;dojo.style(this.domNode,'display','');},hideUI:function(){this.$1_17=false;dojo.style(this.domNode,'display','none');if(ss.isValue(this.$1_18)){this.$1_18();}},update:function(qfThatAppearsToNotGetUsed){var $0=this.qf.getContextMenuCommands();var $1=[];var $2=null;var $3=this;var $enum1=ss.IEnumerator.getEnumerator(this.$1_16);while($enum1.moveNext()){var $4=$enum1.current;$4.dispose();}this.$1_16=[];if(this._scrollingListArea!=null){$(this._scrollingListArea).find('.ListRow').remove();tab.WidgetUtil.newMenuItemsFromCommands($1,$0,function($p1_0){
var $1_0=function(){
var $2_0=false;var $2_1=tab.CommandSerializer.deserialize(tab.CommandItemWrapper.create($p1_0).get_command());if($2_1.commandName==='set-quick-filter-mode'){if((!ss.isNullOrUndefined($2_1.commandParams['axp'])&&$3.qf.mode!==$2_1.commandParams['axp'])||(!ss.isNullOrUndefined($2_1.commandParams['axr'])&&$3.qf.mode!==$2_1.commandParams['axr'])){if(ss.isValue($3.$1_19)){$3.$1_19();}$2_0=true;}}else if($2_1.commandName==='set-quick-filter-include-exclude'){var $2_2=$2_1.commandParams['t']==='true';if($3.qf.oFilter.exclude!==$2_2){$2_0=true;}}else{$2_0=true;}if($2_0){tab.ServerCommands.executeServerCommand($2_1,'immediately');}};return $1_0;});var $enum2=ss.IEnumerator.getEnumerator($1);while($enum2.moveNext()){var $5=$enum2.current;if($5.get_isDivider()){if($2==null){$2=new tableau.mobile.widget.catmode.popup.ScrollingListRow(null,null);}dojo.style($2.domNode,'borderBottom','');}else{var $6={};$6.formattedLabel=$5.get_name();$6.checked=$5.get_checkState()>0;$6.uniqueId='';($2=new tableau.mobile.widget.catmode.popup.ScrollingListRow($6,null)).placeAt(this._scrollingListArea,null);var $7=spiff.$create_EventHandleSpec();$7.firstTouch=this.createMenuItemClickHander($5);this.$1_16.add(new spiff.TableauEventHandler($2.domNode,$7));dojo.style($2.domNode,'borderBottom','none');}}}}}
tab.MobileWindowAppender=function(){tab.MobileWindowAppender.initializeBase(this);}
tab.MobileWindowAppender.enableLogging=function(filter){if(ss.isNullOrUndefined(tab.MobileWindowAppender.$1_0)){tab.MobileWindowAppender.$1_0=new tab.MobileWindowAppender();tab.Logger.addAppender(tab.MobileWindowAppender.$1_0);}tab.MobileWindowAppender.$1_0.addFilter((filter||function(){
return true;}));}
tab.MobileWindowAppender.disableLogging=function(){if(ss.isNullOrUndefined(tab.MobileWindowAppender.$1_0)){return;}tab.Logger.removeAppender(tab.MobileWindowAppender.$1_0);tab.MobileWindowAppender.$1_0=null;}
tab.MobileWindowAppender.prototype={$1_1:null,$1_2:null,dispose:function(){this.$1_1.dispose();},logInternal:function(source,level,message,args){if(ss.isNullOrUndefined(this.$1_2)){this.$1_3();}message=this.formatMessage(message.replaceAll('\\n','<br />'),args);this.$1_2.append("<div class='entry'><span class='name'>"+source.get_name()+'</span>'+message+'</div>');this.$1_1.refresh();},$1_3:function(){var $0=$("<div id='tableauggerWrapper'>\n                    <div id='tableaugger'>Double Tap to Clear</div>\n                </div>");$0.css({position:'absolute',bottom:'0px',right:'0px',backgroundColor:'white',opacity:'.8',border:'1px solid black',width:'250px',height:'300px',overflow:'auto',zIndex:'333'});this.$1_2=$0.find('#tableaugger');this.$1_2.css({width:'100%',paddingBottom:'300px'});$('body').append($0);var $1=spiff.$create_EventHandleSpec();spiff.TableauEventHandler.setHandler($1,'doubleTap',ss.Delegate.create(this,this.$1_4));var $2=new spiff.TableauEventHandler(this.$1_2[0],$1);var $3=spiff.$create_MobileScrollerOptions();$3.displayPolicy='active';this.$1_1=new spiff.MobileScroller(this.$1_2[0],$2,$3);},$1_4:function($p0){this.$1_5();},$1_5:function(){this.$1_2.html(tab.Strings.noLoc('Double tap to clear<br />'));}}
tab.ApplicationViewModelMobile=function(skipInit,layoutSession){tab.ApplicationViewModelMobile.initializeBase(this,[skipInit,layoutSession]);spiff.OrientationHandler.add_orientationChanged(ss.Delegate.create(this,this.onOrientationChange));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
spiff.OrientationHandler.remove_orientationChanged(ss.Delegate.create(this,this.onOrientationChange));})));this.$2_5();}
tab.ApplicationViewModelMobile.prototype={$2_0:null,$2_1:null,get_$2_2:function(){var $0=tsConfig.mobile_app_cookie;return (ss.isValue($0)&&$0.indexOf('TableauApp')>=0)||tsConfig.is_mobile_app;},showShareDialog:function(){tab.ShareDialogUtil.toggleMobileClientVizDisplay(false);tab.ApplicationViewModelMobile.callBaseMethod(this, 'showShareDialog');},destroy:function(){this.$2_6();if(ss.isValue(this.$2_1)){this.$2_1.dispose();}tab.ApplicationViewModelMobile.callBaseMethod(this, 'destroy');},makeExportPdfDialog:function(session){return new tab.ExportPdfDialogMobile(session,false);},makeViewingToolbar:function(isTop){return new tab.ViewingToolbarMobile(this,isTop);},createTapToInteractTransition:function(animateTransition,initialDelay){if(tsConfig.bootstrapOnMouseover){return;}var $0=450;if(animateTransition){this.$2_3();var $1=$('#tapToInteract');$1.delay(initialDelay).fadeTo($0,1,function(){
tableau.util.performDeferredCalls();});$1.delay(2000).fadeTo($0,0,ss.Delegate.create(this,this.$2_4));}else{this.$2_3();tableau.util.performDeferredCalls();window.setTimeout(ss.Delegate.create(this,this.$2_4),2000);}},createTapToInteractTouchHandler:function(tapToInteractElem){if(tsConfig.bootstrapOnMouseover){return;}if(ss.isValue(tapToInteractElem)&&tapToInteractElem.length>0&&!this.get_$2_2()){var $0=spiff.$create_EventHandleSpec();$0.firstTouch=ss.Delegate.create(this,function(){
this.$2_4();});this.$2_1=new spiff.TableauEventHandler(tapToInteractElem.get(0),$0);}},doMeasureMetrics:function(){},$2_3:function(){var $0=$('#tapToInteract');if($0.size()>0&&!this.get_$2_2()){$0.find('.wcTapToInteractBody').text(tab.Strings.MobileClientTapToInteract).end().css({display:'none',visibility:''});}},$2_4:function(){var $0=$('#tapToInteract');if($0.size()>0&&!this.get_$2_2()){$0.hide();}},$2_5:function(){this.$2_0=new spiff.TableauEventHandler($('body').get(0),null);},$2_6:function(){if(ss.isValue(this.$2_0)){this.$2_0.dispose();}this.$2_0=null;},onOrientationChange:function(){tabBootstrap.Utility.applySafari7CSSHackFix();this.resize(true);}}
tab.LegacyLegendViewMobile=function(viewModel){tab.LegacyLegendViewMobile.initializeBase(this,[viewModel,new tab.LegacyLegendTemplateMobile()]);}
tab.LegacyLegendViewMobile.prototype={scroller:null,_splash:null,allowHover:function(){},disallowHover:function(){},onLegendMouseDown:function(){},onBoxClick:function(){},hideControls:function(){},showControls:function(){},makeViewerInputHandler:function(viewSession,element){var $0=spiff.$create_EventHandleSpec();$0.potentialTap=ss.Delegate.create(this,this.onFingerUp);$0.tap=ss.Delegate.create(this,this.onTap);var $1=new spiff.TableauEventHandler(this.get_domNode(),$0);this.scroller=new spiff.MobileScroller(this.get_legendTemplate().domContent.get(0),$1,null);return $1;},layoutButtons:function(contentSize){if(contentSize.w>0){if(this.get_serverRenderedModel().by){this.get_baseLegendTemplate().get_contentArea().css('width',contentSize.w+'px');}else{this.get_legendTemplate().domContent.css('width',contentSize.w+'px');}}if(contentSize.h>0){if(this.get_serverRenderedModel().by){this.get_baseLegendTemplate().get_contentArea().css('height',contentSize.h+'px');}else{this.get_legendTemplate().domContent.css('height',contentSize.h+'px');}}if(contentSize.h>1){var $0=this.bodySize.w;if($0>contentSize.w&&this.get_serverRenderedModel().ajn!=='vertical'){this.get_domRoot().addClass('LegendHorizontal');this.get_legendTemplate().domContent.css('float','left');}}this.scroller.refresh();},onFingerUp:function($p0){this._splash=tab.FeedbackMobile.createTapFeedback(this.get_domRoot().closest('.tab-dashboard').get()[0],$p0);},documentPointToContentPoint:function(documentPoint){var $0=this.get_legendTemplate().get_contentArea().offset();return tab.$create_Point(documentPoint.x-$0.left+this.scroller.get_scrollPos().x+this.bodyOffset.x,documentPoint.y-$0.top+this.scroller.get_scrollPos().y+this.bodyOffset.y);},onTap:function($p0){$p0.preventDefault();var $0=this.getDocumentPoint($p0);var $1=this.documentPointToContentPoint($0);var $2=tab.$create_RectXY($1.x,$1.y,0,0);var $3=tableau.util.getSelectAction($p0);if(this.get_serverRenderedModel().ahx!=='map'){tab.SelectionClientCommands.selectRegion(this.get_legendViewModel().get_regionType(),$2,$3,this.get_visualId(),this.getFieldNameVec());}window.setTimeout(ss.Delegate.create(this,function(){
this.get_legendTooltip().singleSelectCoordinates($0,$1,this.get_legendViewModel().get_regionType(),'legenditem');}),15);},onDragStart:function($p0){},onDragMove:function($p0){},onDragEnd:function($p0){}}
tab.LegacyLegendTemplateMobile=function(){tab.LegacyLegendTemplateMobile.initializeBase(this,[$(tab.LegacyLegendTemplateMobile.$3_0)]);this.legendContentArea=this.getElementBySelector('.LegendContentBox');this.domHighlighter.css('visibility','hidden');}
tab.PageViewMobile=function(viewModel){tab.PageViewMobile.initializeBase(this,[viewModel]);}
tab.PageViewMobile.prototype={instantiateCurrentPagePanel:function(props){return new tableau.mobile.widget.CurrentPagePanelMobile(props);}}
tab.AccordionViewMobile=function(viewModel){tab.AccordionViewMobile.initializeBase(this,[viewModel,new tab.AccordionTemplate()]);}
tab.CategoricalFilterMobile=function(props){this.templateString="<div class='MobilePanel CategoricalFilterMobile'>"+"<div class='MobilePanelBox CategoricalFilterMobileBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='FilterTitle' dojoAttachPoint='domTitleBar'></div>"+'</div>'+"<div class='CFMContent' dojoAttachPoint='domContent'></div>"+"<div class='CFMHorizScroll' dojoAttachPoint='domHorizScroll' dojoAttachEvent='onscroll:doscrollHoriz'>"+"<div dojoAttachPoint='domHorizScrollContent'></div>"+'</div>'+"<div dojoType='tableau.base.widget.ConditionalsWidget' dojoAttachPoint='conditionals'></div>"+'</div>'+"<div class='MobilePanelBorderOuter'><div class='MobilePanelBorderInner'></div></div>"+'</div>';tab.CategoricalFilterMobile.initializeBase(this,[props]);}
tab.CategoricalFilterMobile.prototype={processControlButtons:function(hideSearchButton,hideDomainButton,hideMenuButton,hideResetButton){},getCheckDropdownCatmodeClass:function(){return tableau.mobile.widget.catmode.CheckDropdownMobile;},getChecklistCatmodeClass:function(){return tableau.mobile.widget.catmode.ChecklistMobile;},getRadiolistCatmodeClass:function(){return tableau.mobile.widget.catmode.RadiolistMobile;},getSliderCatmodeClass:function(){return tableau.mobile.widget.catmode.SliderMobile;},getDropdownCatmodeClass:function(){return tableau.mobile.widget.catmode.DropdownMobile;},getPatternCatmodeClass:function(){return tableau.mobile.widget.catmode.PatternMobile;},getTypeInListCatmodeClass:function(){return tableau.mobile.widget.catmode.TypeInMobile;},makePendingChangesManager:function(){return new tab.PendingChangesManagerMobile(this.get_modeContents(),this.get_oFilter().table.actual_size,this.get_oFilter().exclude,this.get_oFilter().all);},updateSearch:function(){},updateStateFromSearch:function(changed){},updateDomainButton:function(){},updateMenuIcons:function(){},_getContentFloatingElement:function(){return this.get_domContent();},_layoutSearchWidget:function(notTitleSize){},_getSearchWidgetDim:function(){var $0=tab.$create_DojoCoords();$0.h=0;$0.w=0;return $0;},_layoutTypeInList:function(notTitleSize){this.layoutVertical(notTitleSize);},getTheAllItemNode:function(){return this.get_domContent().firstChild.firstChild;},layoutVertical:function(notTitleSize){var $0;var $1;$1={h:0};$0=notTitleSize.h-$1['h'];this.get_modeContents().layout(tab.$create_Size(notTitleSize.w,$0),false);}}
tab.PopupTypeInWidget=function(targetDiv,style){this.div=targetDiv;this.style=style;this.inputType='text';this.cssClass='goButton';dojo.addClass(this.div,'tableauWidgetUiTypeInMobile');this.$3=new tab.DisposableHolder();}
tab.PopupTypeInWidget.prototype={style:null,cssClass:null,pattern:null,$0:false,fieldname:null,keyCode:0,$1:false,div:null,outerDiv:null,queryBox:null,goButton:null,$2:null,$3:null,inputType:null,add_updatePattern:function(value){this.$4=ss.Delegate.combine(this.$4,value);},remove_updatePattern:function(value){this.$4=ss.Delegate.remove(this.$4,value);},$4:null,update:function(newPattern,unusedValue,unusedDomain){this.pattern=newPattern;this.queryBox.value=newPattern;this.setButtonToProperState();},instantiate:function(newPattern,newFieldname){this.pattern=(ss.isValue(newPattern))?newPattern:'';this.fieldname=newFieldname;this.div.innerHTML='<div id="typein_'+tableau.format.escapeHTML(newFieldname)+'" class="TypeInDiv">'+'<input type="'+this.inputType+'" class="QueryBox" autocapitalize="off" autocorrect="off" value="'+tableau.format.escapeHTML(this.pattern)+'"/>'+'<span class="'+this.cssClass+'" style="display:none"></span></div>';this.outerDiv=this.div.firstChild;this.queryBox=this.outerDiv.childNodes[0];this.goButton=this.outerDiv.childNodes[1];var $0=$(this.queryBox);this.$3.add(spiff.EventUtil.bindWithDispose($0,'keydown',ss.Delegate.create(this,this.$A)));this.$3.add(spiff.EventUtil.bindWithDispose($0,'keyup',ss.Delegate.create(this,this.onKeyUp)));this.$3.add(spiff.EventUtil.bindWithDispose($0,'click',ss.Delegate.create(this,this.$5)));this.$3.add(spiff.EventUtil.bindWithDispose($0,'focus',ss.Delegate.create(this,this.onQueryBoxFocus)));this.$2=new spiff.TableauEventHandler(this.goButton,{potentialTap:ss.Delegate.create(this,this.onButtonTap)});this.queryBox.focus();this.$0=false;this.setButtonToProperState();},destroy:function(){this.dispose();},dispose:function(){this.$2.dispose();this.$3.dispose();},layout:function(){this.$6();},setNewState:function(){this.pattern=this.queryBox.value;this.setButtonToProperState();},onQueryBoxFocus:function(evt){this.queryBox.isFocused=true;},$5:function($p0){if(this.queryBox.isFocused){this.queryBox.select();}this.queryBox.focus();this.queryBox.isFocused=true;$p0.stopPropagation();},$6:function(){var $0=22;if(!!dojo.isIE){if(dojo.isIE<7){$0=30;}else{$0=24;}}dojo.marginBox(this.queryBox,{w:dojo.marginBox(this.outerDiv).w-$0});},patternIsChanged:function(){return this.pattern!==this.queryBox.value;},setButtonToProperState:function(){if(this.buttonShouldBeActive()){this.$7();}else{this.$8();}},buttonShouldBeActive:function(){return !String.isNullOrEmpty(this.queryBox.value);},$7:function(){dojo.style(this.goButton,'display','');dojo.addClass(this.goButton,this.style+'Active');},$8:function(){dojo.removeClass(this.goButton,this.style+'Active');dojo.style(this.goButton,'display','none');},onInputBlur:function($p0){this.queryBox.isFocused=false;if(!this.$0&&!this.$1){this.setNewPattern();}this.$1=false;},onButtonMouseDown:function($p0){this.$0=true;},onButtonTap:function($p0){this.doButtonAction();this.$0=false;},$9:function($p0){this.resetPattern();if(dojo.isFF){window.setTimeout(ss.Delegate.create(this,this.resetPattern),10);}$p0.stopPropagation();$p0.preventDefault();},$A:function($p0){if($p0.which===27){this.$9($p0);}this.keyCode=$p0.which;},onKeyUp:function(e){switch(e.which){case 13:this.setNewPattern();this.queryBox.blur();e.stopPropagation();e.preventDefault();break;case 27:this.$9(e);this.$1=true;this.queryBox.blur();break;case 8:case 46:this.setButtonToProperState();break;case 16:this.setButtonToProperState();break;default:if(this.keyCode===e.which){this.setButtonToProperState();}break;}},setNewPattern:function(){if(this.patternIsChanged()){this.setNewState();if(ss.isValue(this.$4)){this.$4(this.pattern);}}},resetPattern:function(){this.queryBox.value=this.pattern;this.setButtonToProperState();},doButtonAction:function(){this.queryBox.value='';this.setNewPattern();this.setButtonToProperState();},isLocalized:function(){return true;}}
tab.ComboBoxViewMobile=function(viewModel){tab.ComboBoxViewMobile.initializeBase(this,[viewModel,new tab.ComboBoxTemplate()]);}
tab.CurrentPagePanelMobile=function(oProps){tab.CurrentPagePanelMobile.initializeBase(this,[oProps]);this.WIDGET_SPACE=8;this.SCROLL_PAGES=14;this.BUTTONS_HEIGHT=26;this.ONLY_BUTTONS=24;this.SLIDER_HEIGHT=16;this.ONLY_SLIDER=15;this.TOGGLE_HEIGHT=16;this.TOGGLE_WIDTH_OFFSET=90;this.RULE_OFFSET=19;this.DOM_OFFSET=4;this.baseClass='currentPagePanel mobile';this.templateString=tab.CurrentPagePanelMobile.$3_0;this.widgetsInTemplate=true;this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.CurrentPagePanelMobile.prototype={layoutSession:null,id:0,parent:null,domBox:null,trailsenabled:false,$3_1:null,$3_2:null,get_inplaceMobile:function(){return this.$3_2;},set_inplaceMobile:function(value){this.$3_2=value;return value;},get_$3_3:function(){return this.get_inplaceMobile().get_popup();},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.get_domBoxElement():this.domBox;},layout:function(){var $0=0;var $1=0;var $2=0;if(ss.isNullOrUndefined(this.titleSize)||(ss.isValue(this.lTitle)&&!this.titleSize.w)){return;}var $3=dojo.marginBox(this.containerNode);var $4=$3.w-this.DOM_OFFSET;var $5=0;if(this.titleSize.w<$3.w){if($3.h<this.getWidgetOffset()){this.cpOrientation='horizontal';}else{this.cpOrientation='vertical';}$4-=this.titleSize.w;$0=this.titleSize.w;}else{if($3.h-this.titleSize.h<this.getWidgetOffset()){this.cpOrientation='horizontal';}else{this.cpOrientation='vertical';}$1=this.titleSize.h/2;}if(this.cpOrientation==='horizontal'){if(this.show_toggle){$4-=this.TOGGLE_WIDTH_OFFSET;}$5=(this.show_dropdown)?this.BUTTONS_HEIGHT:this.SLIDER_HEIGHT;}else{$5=(this.show_slider)?this.SLIDER_HEIGHT:0;$5+=(this.show_dropdown)?this.BUTTONS_HEIGHT:0;$2=(this.show_toggle)?this.TOGGLE_HEIGHT/2:0;}this.innerWrapper.isHorizontal=this.cpOrientation==='horizontal';dojo.marginBox(this.innerWrapper.domNode,{w:$4,h:$5});this.innerWrapper.resize();var $6=dojo.marginBox(this.sliderPane.domNode);if(this._horizontalRule!=null&&$6.w>0){dojo.marginBox(this._horizontalRule.domNode,{w:$6.w-this.RULE_OFFSET});if(this.pages.length*2>$6.w-this.RULE_OFFSET){dojo.style(this._horizontalRule.domNode,'display','none');}else{dojo.style(this._horizontalRule.domNode,'display','');}}var $7=Math.min((($3.h-$5)/2)-$1-$2,6);var $8=$7+(2*$1);dojo.style(this.innerWrapper.domNode,{top:Math.max($8,0)+'px',position:'absolute',left:($0+(this.DOM_OFFSET/2))+'px'});if(this.cpOrientation==='vertical'){dojo.style(this.buttonsContainer.domNode,{height:this.ONLY_BUTTONS+'px',position:'relative',top:'',left:'',padding:'0 0 2px 0'});this.buttonsContainer.resize();dojo.style(this.sliderPane.domNode,{height:this.SLIDER_HEIGHT+'px',position:'relative',top:'',left:''});dojo.style(this._checkboxPane.domNode,{width:Math.max($3.w-1,0)+'px',top:Math.max($8,0)+$5+$7+'px',position:'absolute',left:$0+'px'});}else{dojo.style(this._checkboxPane.domNode,{top:Math.max($8,0)+'px',position:'absolute',left:$0+$4+'px'});}},postMixInProperties:function(){this.display_dropdown=(this.show_dropdown)?'block':'none';this.display_slider=(this.show_slider)?'block':'none';this.display_toggle=(this.show_toggle)?'block':'none';var $0=this.pages.length;this.maximum=$0-1;this.discrete_values=$0;this.show_ruler=(this.show_slider)?'block':'none';this.ruler_count=$0;this.popupClass=($0>this.SCROLL_PAGES)?'cpPopupEx':'cpPopup';this.cpOrientation=(this.cpHeight<this.getWidgetOffset())?'horizontal':'vertical';this.trailsenabled=this.enable;},postCreate:function(){this.inherited(arguments);dojo.toggleClass(this._showHistoryCb,'FIMChecked',this.enable);this.$3_1=new tab.DisposableHolder();this.get_inplaceMobile().setupTouchHandler(this.domNode);this.createPopup();},dispose:function(){this.$3_1.dispose();},destroy:function(preserveDom){this.dispose();this.get_inplaceMobile().destroyPopup();this.get_inplaceMobile().disconnectPopup();this.inherited(arguments);},refreshLayout:function(newPages,page,newEnable){this.refreshed=false;this.current_page=page;this.pages=newPages;if(this.show_slider){if(this._horizontalRule!=null){this._horizontalRule.destroy(false);this._horizontalRule=null;}this._slider.maximum=this.pages.length-1;this._slider.discreteValues=this.pages.length;dijit.setWaiState(this._slider.focusNode,'valuemax',this.pages.length);if(this.pages.length<1200){var $0={style:'width:100%; height:3px; margin-left:4px;',count:this.pages.length};this._horizontalRule=new dijit.form.HorizontalRule($0,this._horizontalRuleNode);this._horizontalRule.placeAt(this.sliderPane.domNode,2);this._horizontalRule.startup();}this._slider.startup();this._slider.onBarClick=null;}if(this.show_toggle&&arguments.length>2){this.enable=newEnable;}this.setTitle();this.layout();this.refreshed=true;this.refreshWidget(this.current_page);this.get_$3_3()._refreshContent(this.pages,page,this.enable);},refreshWidget:function(page){this.current_page=page;if(this.show_dropdown&&this._dropdown!=null){this._dropdown.innerHTML=(this.pages[this.current_page]||'');this._rightBtn.setAttribute('disabled',this.current_page===(this.pages.length-1));this._rightBtn.attr('iconClass','dijitIcon cpRightArrow'+((this.current_page===(this.pages.length-1))?'Grey':'Black'));this._leftBtn.setAttribute('disabled',!this.current_page);this._leftBtn.attr('iconClass','dijitIcon cpLeftArrow'+((!this.current_page)?'Grey':'Black'));}if(this.show_slider&&this._slider!=null){this._slider.setValue(this.current_page);}},prevPage:function(e){this.inherited(arguments);(this.get_$3_3().get_content()).syncEverything(this.current_page);},nextPage:function(e){this.inherited(arguments);(this.get_$3_3().get_content()).syncEverything(this.current_page);},onCheckboxChange:function(){this.inherited(arguments);dojo.toggleClass(this._showHistoryCb,'FIMChecked',this.enable);},onSelection:function(selectedPage,propagate){if(propagate){this.inherited(arguments);}},createPopup:function(items){var $0=tableau.mobile.widget.catmode.popup.CurrentPagePanelPopup;var $1={};$1.show_dropdown=this.show_dropdown;$1.show_slider=this.show_slider;$1.show_toggle=this.show_toggle;$1.trails_enabled=this.trailsenabled;$1.title=this.lTitle;$1.items=this.pages;$1.current_page=this.current_page;$1.viewModel=this.pageViewModel;this.parent=this;this.get_inplaceMobile().createPopup($0,$1);this.get_inplaceMobile().connectPopup();this.get_$3_3().get_contentAsPagePanelContent().add_applyChangeFromSliderCalled(ss.Delegate.create(this,this.onSelection));this.get_$3_3().get_contentAsPagePanelContent().add_applyChangeCalled(ss.Delegate.create(this,this.onSelection));this.get_$3_3().get_contentAsPagePanelContent().add_rightPressed(ss.Delegate.create(this,this.nextPage));this.get_$3_3().get_contentAsPagePanelContent().add_leftPressed(ss.Delegate.create(this,this.prevPage));this.get_$3_3().get_contentAsPagePanelContent().add_toggleHistoryCalled(ss.Delegate.create(this,this.onCheckboxChange));this.$3_1.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$3_3().get_contentAsPagePanelContent().remove_applyChangeFromSliderCalled(ss.Delegate.create(this,this.onSelection));this.get_$3_3().get_contentAsPagePanelContent().remove_applyChangeCalled(ss.Delegate.create(this,this.onSelection));this.get_$3_3().get_contentAsPagePanelContent().remove_rightPressed(ss.Delegate.create(this,this.nextPage));this.get_$3_3().get_contentAsPagePanelContent().remove_leftPressed(ss.Delegate.create(this,this.prevPage));this.get_$3_3().get_contentAsPagePanelContent().remove_toggleHistoryCalled(ss.Delegate.create(this,this.onCheckboxChange));})));},get_uniqueNodeId:function(){return this.id.toString();}}
tab.CustomViewsPanelMobile=function(viewModel,toolbarButton){tab.CustomViewsPanelMobile.initializeBase(this,[viewModel,toolbarButton]);this.resizeHandle.hide();this.listPanelScroller=this.panel.find('.tab-cv-list-panel-scroller');var $0=this.listPanelScroller.get(0);var $1=spiff.$create_EventHandleSpec();$1.potentialTap=ss.Delegate.create(this,this.handlePotentialTap);this.touchHandler=new spiff.TableauEventHandler($0,$1);var $2=spiff.$create_MobileScrollerOptions();this.scroller=new spiff.MobileScroller($0,this.touchHandler,$2);}
tab.CustomViewsPanelMobile.prototype={touchHandler:null,scroller:null,listPanelScroller:null,get_defaultPanelWidth:function(){return 360;},get_defaultPanelHeight:function(){return 370;},get_panelBorder:function(){return 5;},show:function(){tab.CustomViewsPanelMobile.callBaseMethod(this, 'show');tsConfig.getScale(ss.Delegate.create(this,function($p1_0){
this.panel.css({'-webkit-transform':'scale('+(1/$p1_0).toString()+')','-webkit-transform-origin':(this.viewModel.get_isTop())?'top left':'bottom left'});}));},appendListItemSeparatorHtml:function(sb){sb.append('<div unselectable="on" class="tab-cv-list-item-separator"></div>');},appendSelectListItemNameAndAuthorHtml:function(sb,customViewName,ownerName,isDefault){var $0=(ss.isValue(ownerName))?'tab-cv-select-list-item-name':'tab-cv-select-list-item-name tab-cv-select-list-item-name-middle';sb.append('<span unselectable="on" class="').append($0).append('">').append(customViewName);if(isDefault){sb.append(' (').append(tab.Strings.CustomViewsDefault).append(')');}sb.append('</span>');if(ss.isValue(ownerName)){sb.append('<span unselectable="on" class="tab-cv-select-list-item-name-owner">').append(ownerName).append('</span>');}},bindListItem:function(item,cv){this.disposables.add(spiff.ClickHandler.targetAndClick(item,ss.Delegate.create(this,function($p1_0){
this.listItemClicked($p1_0,cv);})));},handlePotentialTap:function(evt){$(evt.target).trigger('tap');},rememberNamePlaceholderClicked:function(e){this.rememberNamePlaceholder.hide();tab.CustomViewsPanelMobile.callBaseMethod(this, 'rememberNamePlaceholderClicked',[e]);},updateCustomViewsList:function(){tab.CustomViewsPanelMobile.callBaseMethod(this, 'updateCustomViewsList');this.scroller.resetPosition();this.scroller.refresh();}}
tab.ExportPdfDialogMobile=function(sess,pngMode){tab.ExportPdfDialogMobile.initializeBase(this,[sess,pngMode]);this.get_body().addClass('tab-pdfdlg-mobile');}
tab.ExportPdfDialogMobile.prototype={$4_0:null,$4_1:null,dispose:function(){this.$4_0.dispose();this.$4_1.dispose();tab.ExportPdfDialogMobile.callBaseMethod(this, 'dispose');},initFromModel:function(){var $0=spiff.$create_EventHandleSpec();$0.potentialTap=ss.Delegate.create(this,this.$4_2);this.$4_0=new spiff.TableauEventHandler(this.$4_3(),$0);var $1=spiff.$create_MobileScrollerOptions();$1.displayPolicy='always';this.$4_1=new spiff.MobileScroller(this.$4_3(),this.$4_0,$1);tab.ExportPdfDialogMobile.callBaseMethod(this, 'initFromModel');this.$4_4();},initEventHandlers:function(){this.get_body().find('select').change(ss.Delegate.create(this,this.updateSelection)).end().find('.png-only input').change(ss.Delegate.create(this,this.updateImageDimension)).end();spiff.ClickHandler.targetAndClick(this.get_body().find('.tab-pdfdlg-group-orientation button'),ss.Delegate.create(this,this.updateOrientation));spiff.ClickHandler.targetAndClick(this.get_body().find('.tab-pdfdlg-dashboard-content-mode button'),ss.Delegate.create(this,this.handleContentModeSwitch));spiff.ClickHandler.targetAndClick(this.get_body().find('.tab-pdfdlg-worksheet-content-mode button'),ss.Delegate.create(this,this.handleContentModeSwitch));spiff.ClickHandler.targetAndClick(this.get_body().find('.tab-pdfdlg-story-content-mode button'),ss.Delegate.create(this,this.handleContentModeSwitch));},onWindowResize:function(e){return;},showThumbList:function(){tab.ExportPdfDialogMobile.callBaseMethod(this, 'showThumbList');this.$4_4();},hideThumbList:function(){tab.ExportPdfDialogMobile.callBaseMethod(this, 'hideThumbList');this.$4_4();},setSingleSheetSelected:function(){tab.ExportPdfDialogMobile.callBaseMethod(this, 'setSingleSheetSelected');this.$4_4();},$4_2:function($p0){var $0=$p0.target;var $1=$($0).closest('li button');if($1.length>0){var $2=null;var $enum1=ss.IEnumerator.getEnumerator(this.thumbnails);while($enum1.moveNext()){var $3=$enum1.current;if($3.button===$1){$2=$3;break;}}if(ss.isValue($2)){$2.set_isSelected(!$2.get_isSelected());}}},$4_3:function(){return this.dom.thumbList[0];},$4_4:function(){this.$4_1.resetPosition();this.$4_1.refresh();}}
tableau.mobile.FilterItemMobile=function(){}
tableau.mobile.FilterItemMobile.getSearchResultHtml=function(filter,tuple,itemName,itemIndex){switch(filter.get_mode()){case 'checklist':case 'checkdropdown':case 'typeinlist':return tableau.mobile.FilterItemMobile.formatChecklistFilterItemHtml(filter,tuple,itemName,itemIndex);case 'radiolist':return tableau.mobile.FilterItemMobile.formatRadiolistFilterItemHtml(filter,tuple,itemName,itemIndex);case 'dropdown':return tableau.mobile.FilterItemMobile.formatDropdownListFilterItemHtml(filter,tuple,itemName,itemIndex);}return '';}
tableau.mobile.FilterItemMobile.formatChecklistFilterItemHtml=function(filter,tuple,itemName,itemIndex){var $0=tab.FilterItemUtil.getItemId(itemName,itemIndex);var $1=tab.FilterItemUtil.shouldCheckFilterItemMultiValue(tuple,filter);var $2=tableau.format.formatTupleDisplayName(tuple,false,filter.get_oFilter().role);var $3=tableau.format.formatTupleDisplayFacet(tuple,false,filter.get_oFilter().role);var $4=tab.FilterItemUtil.showFacets(filter);var $5=ss.isValue(filter.get_modeContents().pendingManager)&&filter.get_modeContents().pendingManager.isPending(tuple,itemIndex);return tableau.mobile.FilterItemMobile.getCheckHtml($0,$2,$1,$3,$4,$5);}
tableau.mobile.FilterItemMobile.getCheckHtml=function(id,dname,ischecked,facet,showFacets,isPending){var $0='';var $1=(isPending)?'FIMPending':'';var $2='';if((ischecked&&!isPending)||(!ischecked&&isPending)){$0=' FIMChecked';}if(showFacets){$2=facet;}return (['<div class="FIMContainer '+$1+' facetOverflow" id="',id,'"><div class="facet">',$2,'</div><span class="FIMCheckMark',$0,'"></span><span class="FIMCheckLabel tab-ctrl-formatted-text',$0,'">',dname,'</span></div>']).join('');}
tableau.mobile.FilterItemMobile.formatRadiolistFilterItemHtml=function(filter,tuple,itemName,itemIndex){var $0=tab.FilterItemUtil.getItemId(itemName,itemIndex);var $1=tab.FilterItemUtil.shouldCheckFilterItemSingleValue(tuple,filter);var $2=tableau.format.formatTupleDisplayName(tuple,false,filter.get_oFilter().role);var $3=tableau.format.formatTupleDisplayFacet(tuple,false,filter.get_oFilter().role);var $4=tab.FilterItemUtil.showFacets(filter);return tableau.mobile.FilterItemMobile.getRadioHtml($0,$2,$1,$3,$4);}
tableau.mobile.FilterItemMobile.getRadioHtml=function(id,dname,ischecked,facet,showFacets){var $0='',$1='';if(ischecked){$0=' FIMRadiolist FIMChecked';}if(showFacets){$1=facet;}return (['<div class="FIMContainer facetOverflow" id="',id,'"><div class="facet">',$1,'</div><span class="FIMCheckMark',$0,'"></span><span class="FIMCheckLabel tab-ctrl-formatted-text',$0,'">',dname,'</span></div>']).join('');}
tableau.mobile.FilterItemMobile.formatDropdownListFilterItemHtml=function(filter,tuple,itemName,itemIndex){var $0=tab.FilterItemUtil.getItemId(itemName,itemIndex);var $1=tableau.format.formatTupleDisplayName(tuple,false,filter.get_oFilter().role);var $2=tableau.format.formatTupleDisplayFacet(tuple,false,filter.get_oFilter().role);var $3=tab.FilterItemUtil.showFacets(filter);return tableau.mobile.FilterItemMobile.getDropdownHtml($0,$1,$2,$3);}
tableau.mobile.FilterItemMobile.getDropdownHtml=function(id,dname,facet,showFacets){var $0='';if(showFacets){$0=facet;}return (['<div class="FIMContainer FIMDropdown" id="',id,'"><div class="facet">',$0,'</div><span class="FIMCheckLabel tab-ctrl-formatted-fixedsize">',dname,'</span></div>']).join('');}
tableau.mobile.FilterItemMobile.getTypeInHtml=function(id,dname){return (['<div class="FIMContainer FIMTypeIn" id="',id,'"><span class="FIMCheckLabel tab-ctrl-formatted-text">',dname,'</span></div>']).join('');}
tableau.mobile.FilterItemMobile.formatListRowFilterItemHtml=function(filter,tuple,itemName,itemIndex){var $0=tab.FilterItemUtil.getItemId(itemName,itemIndex);var $1=itemIndex===tab.FilterItemUtil.allItemIndex;var $2;if($1){$2=tuple.s;}else if(filter.isSingleSelect()){$2=tab.FilterItemUtil.shouldCheckFilterItemSingleValue(tuple,filter);}else{$2=tab.FilterItemUtil.shouldCheckFilterItemMultiValue(tuple,filter);}var $3=tableau.format.formatTupleDisplayName(tuple,false,filter.get_oFilter().role);var $4=tab.FilterItemUtil.showFacets(filter);var $5=($4)?tableau.format.formatTupleDisplayFacet(tuple,false,filter.get_oFilter().role):'';var $6=ss.isValue(filter.get_modeContents())&&ss.isValue(filter.get_modeContents().pendingManager)&&filter.get_modeContents().pendingManager.isPending(tuple,itemIndex);var $7=false;if($1){var $8=(ss.isValue(filter.get_modeContents()))?filter.get_modeContents().pendingManager:null;$7=tab.Checklist.shouldCheckAllItem(filter.get_oFilter(),$8);}else if(($2&&!$6)||(!$2&&$6)){$7=true;}return tableau.mobile.FilterItemMobile.getScrollingListRowHtml($0,$3,$5,$1,$7,$4,$6);}
tableau.mobile.FilterItemMobile.getScrollingListRowHtml=function(id,dname,facet,isAllRow,isChecked,isWide,isPending){return (['<div class="ListRow',(isAllRow)?' rowAll':'',(isChecked)?' checked':'',(isWide)?' Wide':'',(isPending)?' pending':'','" id="_popup_',id,'">','<div class="facet">',facet,'</div>','<div class="checkArea">&nbsp;</div>','<div class="labelArea" style="margin-left: 28px;">',dname,'</div></div>']).join('');}
tableau.mobile.FilterItemMobile.formatRemovableListRowFilterItemHtml=function(filter,tuple,itemName,itemIndex){var $0=tab.FilterItemUtil.getItemId(itemName,itemIndex);var $1=tableau.format.formatTupleDisplayName(tuple,false,filter.get_oFilter().role);return tableau.mobile.FilterItemMobile.getScrollingListRemovableRowHtml($0,$1);}
tableau.mobile.FilterItemMobile.getScrollingListRemovableRowHtml=function(id,dname){return (['<div class="ListRow" id="_popup_',id,'" style="min-width: 270px; white-space: nowrap;">'+'<div class="wcIconSearchRemoveContainer" style="margin-right:10px">'+'<div class="wcIconSearchRemove" style="margin-right:10px">&nbsp;</div>'+'</div>'+'<div class="xRowlabelArea">',dname,'</div>'+'<div style="clear:both;"></div>'+'</div>']).join('');}
tableau.mobile.FilterItemMobile.$0=function($p0){return tab.FilterItemUtil.getClassElement($p0,'FIMContainer');}
tableau.mobile.FilterItemMobile.setChecked=function(node,ischecked,tuple){var $0=$(node).find('.FIMCheckMark');var $1=$(node).find('.FIMCheckLabel');if(ss.isValue($0)&&ss.isValue($1)){if(ischecked){$0.addClass('FIMChecked');$1.addClass('FIMChecked');}else{$0.removeClass('FIMChecked');$1.removeClass('FIMChecked');}}if(ss.isValue(tuple)){tuple.s=(!!ischecked);}return tuple;}
tableau.mobile.FilterItemMobile.isChecked=function(node){if(ss.isValue(node)&&dojo.hasClass(node,'FIMContainer')){var $0=$(node).find('.FIMCheckMark');return (ss.isValue($0))?$0.hasClass('FIMChecked'):false;}return false;}
tableau.mobile.FilterItemMobile.isPending=function(node){if(ss.isValue(node)){return dojo.hasClass(node,'FIMPending');}return false;}
tableau.mobile.FilterItemMobile.togglePendingState=function(node){$(node).toggleClass('FIMPending');}
tableau.mobile.FilterItemMobile.syncCssToCheckState=function(node){var $0=tableau.FilterItem.getCheckboxOrRadio(node);if(ss.isValue($0)){tableau.mobile.FilterItemMobile.setChecked(node,$0.checked);}}
tableau.mobile.FilterItemMobile.setSelected=function(node,selected){var $0=tableau.mobile.FilterItemMobile.$0(node);if(selected){dojo.addClass($0,'FIMSelected');}else{dojo.removeClass($0,'FIMSelected');}}
tableau.mobile.FilterItemMobile.isSelected=function(node){var $0=tableau.mobile.FilterItemMobile.$0(node);return dojo.hasClass($0,'FIMSelected');}
tableau.mobile.FilterItemMobile.getNodeFromEvent=function(evt){if(ss.isNullOrUndefined(evt)||ss.isNullOrUndefined(evt.target)){return null;}var $0=evt.target;while(ss.isValue($0)&&$0.tagName!=='OPTION'&&!dojo.hasClass($0,'FIMContainer')){$0=$0.parentNode;}return $0;}
tableau.mobile.FilterItemMobile.getIndex=function(node){return tab.FilterItemUtil.getIndexFromId(node.id);}
tableau.mobile.FilterItemMobile.isTypeInListItem=function(node){var $0=tableau.mobile.FilterItemMobile.$0(node);return dojo.hasClass($0,'FIMTypeIn');}
tableau.mobile.FilterItemMobile.isAllItem=function(node){if(tableau.mobile.FilterItemMobile.isTypeInListItem(node)){return false;}return tab.FilterItemUtil.isAllItemId(node.id);}
tab.FilterPanelMobile=function(oProps){tab.FilterPanelMobile.initializeBase(this,[oProps]);}
tab.FilterPanelMobile.prototype={makeCategoricalFilter:function(filterProps){return new tableau.mobile.widget.CategoricalFilterMobile(filterProps);},makeQuantitativeFilter:function(filterProps){return new tableau.mobile.widget.QuantitativeFilterMobile(filterProps);},makeQuantitativeDateFilter:function(filterProps){return new tableau.mobile.widget.QuantitativeDateFilterMobile(filterProps);},makeHierarchicalFilter:function(filterProps){return new tableau.mobile.widget.HierarchicalFilterMobile(filterProps);},makeRelativeDateFilter:function(filterProps){return new tableau.mobile.widget.RelativeDateFilterMobile(filterProps);},makeRelativeDatePickFilter:function(filterProps){return new tableau.mobile.widget.RelativeDatePickFilterMobile(filterProps);},hideControls:function(){},setupEventHandlers:function(){},onMouseOut:function(){},onMouseDown:function(){}}
tab.FloatingZoomToolbarMobile=function(containerDiv,zoomFuncs,useAllButtons,addMapsSearchOffset){tab.FloatingZoomToolbarMobile.initializeBase(this,[containerDiv,zoomFuncs,useAllButtons,addMapsSearchOffset]);if(!tab.FeatureParamsLookup.getBool(tab.FeatureParam.selectionToolsMobile)){this.isFullToolbar=false;}this.init();if(!tab.FeatureParamsLookup.getBool(tab.FeatureParam.selectionToolsMobile)&&addMapsSearchOffset){this.zoomHomeBtn.addClass('FloatingZoomToolbar-MapsSearchOffset');}}
tab.FloatingZoomToolbarMobile.prototype={appendSelectBtn:null,singleSelectBtn:null,$2_0:false,$2_1:null,dispose:function(){if(this.$2_1!=null){var $0=Object.keys(this.$2_1);var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;this.$2_1[$1].dispose();delete this.$2_1[$1];}}tab.FloatingZoomToolbarMobile.callBaseMethod(this, 'dispose');},setZoomHomePossibility:function(state){tab.FloatingZoomToolbarMobile.callBaseMethod(this, 'setZoomHomePossibility',[state]);if(this.isFullToolbar&&this.zoomHomeBtn!=null){this.zoomHomeBtn.get_element().css('display',(state)?'':'none');}},resetVisualState:function(){this.updateButtonState(this.get_currentToolMode(),true);tab.FloatingZoomToolbarMobile.callBaseMethod(this, 'resetVisualState');},createButtons:function(){if(!tab.FeatureParamsLookup.getBool(tab.FeatureParam.selectionToolsMobile)){this.oldCreateButtons();}else{this.createButtonContainer();if(this.isFullToolbar){this.flyOutBtn=this.addButton(this.buttonContainer,'','');this.createButtonFlyOut();this.$2_2();this.updateButtonState(this.api.defaultPointerToolMode(),true);}this.zoomHomeBtn=this.addButton(this.buttonContainer,'buttonZoomHome',tab.Strings.PanZoomSelectToolsZoomHomeTooltip);}this.setupEventHandling();},showFlyout:function(){if(this.flyOutContainer==null){return;}if(this.flyOutContainer.css('display')!=='none'){this.updateFlyOutVisibility(false);return;}tab.FloatingZoomToolbarMobile.callBaseMethod(this, 'showFlyout');},$2_2:function(){this.panBtn=this.addToggleButton(this.flyOutButtons,'buttonPan',tab.Strings.PanZoomSelectToolsPanTooltip);this.radialSelectBtn=this.addToggleButton(this.flyOutButtons,'buttonRadialSelect',tab.Strings.PanZoomSelectToolsRadialSelectionTooltip);this.lassoSelectBtn=this.addToggleButton(this.flyOutButtons,'buttonLassoSelect',tab.Strings.PanZoomSelectToolsLassoSelectionTooltip);this.rectSelectBtn=this.addToggleButton(this.flyOutButtons,'buttonRectSelect',tab.Strings.PanZoomSelectToolsRectangularSelectionTooltip);this.appendSelectBtn=this.addToggleButton(this.flyOutButtons,'buttonAppendSelect','');},setupEventHandling:function(){tab.FloatingZoomToolbarMobile.callBaseMethod(this, 'setupEventHandling');this.$2_1={};if(this.isFullToolbar){this.$2_1[this.panBtn]=new spiff.TableauEventHandler(this.panBtn.get_element().get(0),this.$2_7(this.panBtn));this.$2_1[this.radialSelectBtn]=new spiff.TableauEventHandler(this.radialSelectBtn.get_element().get(0),this.$2_7(this.radialSelectBtn));this.$2_1[this.lassoSelectBtn]=new spiff.TableauEventHandler(this.lassoSelectBtn.get_element().get(0),this.$2_7(this.lassoSelectBtn));this.$2_1[this.rectSelectBtn]=new spiff.TableauEventHandler(this.rectSelectBtn.get_element().get(0),this.$2_7(this.rectSelectBtn));this.$2_1[this.appendSelectBtn]=new spiff.TableauEventHandler(this.appendSelectBtn.get_element().get(0),this.$2_7(this.appendSelectBtn));}this.$2_1[this.zoomHomeBtn]=new spiff.TableauEventHandler(this.zoomHomeBtn.get_element().get(0),this.$2_7(this.zoomHomeBtn));if(this.flyOutBtn!=null){this.flyOutBtn.add_click(ss.Delegate.create(this,this.showFlyout));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.flyOutBtn.remove_click(ss.Delegate.create(this,this.showFlyout));})));this.$2_1[this.flyOutBtn]=new spiff.TableauEventHandler(this.flyOutBtn.get_element().get(0),this.$2_7(this.flyOutBtn));}if(this.appendSelectBtn!=null){this.appendSelectBtn.add_click(ss.Delegate.create(this,this.$2_4));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.appendSelectBtn.remove_click(ss.Delegate.create(this,this.$2_4));})));}if(this.singleSelectBtn!=null){this.singleSelectBtn.add_click(ss.Delegate.create(this,this.$2_6));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.singleSelectBtn.remove_click(ss.Delegate.create(this,this.$2_6));})));}},updateButtonState:function(mode,isSelected){tab.FloatingZoomToolbarMobile.callBaseMethod(this, 'updateButtonState',[mode,isSelected]);if(this.flyOutBtn==null){return;}switch(mode){case 'pan':this.$2_3('buttonPan',isSelected);break;case 'singleSelect':this.selectButton(this.singleSelectBtn,isSelected);this.$2_3('buttonSingleSelect',isSelected);break;case 'rectSelect':this.$2_3('buttonRectSelect',isSelected);break;case 'radialSelect':this.$2_3('buttonRadialSelect',isSelected);break;case 'lassoSelect':this.$2_3('buttonLassoSelect',isSelected);break;default:break;}},toolModeChanged:function(oldMode){if(this.get_currentToolMode()==='pan'){this.$2_0=false;this.api.setAppendMode(this.$2_0);this.$2_5();}tab.FloatingZoomToolbarMobile.callBaseMethod(this, 'toolModeChanged',[oldMode]);},$2_3:function($p0,$p1){if(this.flyOutBtn!=null){if(this.$2_0&&$p1){this.flyOutBtn.get_element().addClass('append');}else{this.flyOutBtn.get_element().removeClass('append');}var $0=this.flyOutBtn.get_element().children();if($p1){$0.addClass($p0);}else if($0.hasClass($p0)){$0.removeClass($p0);}}},$2_4:function(){this.$2_0=!this.$2_0;this.api.setAppendMode(this.$2_0);this.$2_5();this.updateButtonState(this.get_currentToolMode(),true);this.updateFlyOutVisibility(false);},$2_5:function(){if(this.appendSelectBtn!=null){this.appendSelectBtn.set_selected(this.$2_0);}},$2_6:function(){this.setToolMode('singleSelect',false);},$2_7:function($p0){var $0=spiff.$create_EventHandleSpec();$0.firstTouch=ss.Delegate.create(this,function($p1_0){
this.$2_9($p0,$p1_0);});$0.lastTouch=ss.Delegate.create(this,function($p1_0){
this.$2_A($p0,$p1_0);});$0.potentialTap=ss.Delegate.create(this,function($p1_0){
this.$2_8($p1_0);});$0.potentialPress=ss.Delegate.create(this,function($p1_0){
this.$2_8($p1_0);});$0.press=ss.Delegate.create(this,function($p1_0){
this.$2_8($p1_0);});$0.touchMove=ss.Delegate.create(this,function($p1_0){
this.$2_8($p1_0);});return $0;},$2_8:function($p0){$p0.preventDefault();$p0.stopPropagation();},$2_9:function($p0,$p1){this.api.anyButtonTouched();$p0.get_element().addClass('pressed');this.$2_8($p1);},$2_A:function($p0,$p1){$p0.get_element().removeClass('pressed');this.$2_8($p1);}}
tab.HorizontalSliderMobile=function(sliderParams,sliderDiv){tab.HorizontalSliderMobile.initializeBase(this,[sliderParams,sliderDiv]);}
tab.HorizontalSliderMobile.prototype={postCreate:function(){this.inherited(arguments);this._movable.destroy();}}
tableau.mobile.widget.ui.SliderDojoMobile=function(sliderParams,sliderDiv){tableau.mobile.widget.ui.SliderDojoMobile.initializeBase(this,[sliderParams,sliderDiv]);}
tab.ParameterControlMobile=function(oProps){this.templateString="<div class='MobilePanel ParameterControl'>"+"<div class='MobilePanelBox ParameterControlBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='ParamTitle' dojoAttachPoint='domTitleBar'></div>"+'</div>'+"<div class='PCContent' dojoAttachPoint='domContent'></div>"+'</div>'+"<div class='MobilePanelBorderOuter'><div class='MobilePanelBorderInner'></div></div>"+'</div>';tab.ParameterControlMobile.initializeBase(this,[oProps]);}
tab.ParameterControlMobile.prototype={getTypeInParamClass:function(){return tableau.mobile.widget.paramui.TypeIn;},getTypeInDateFieldParamClass:function(){return tableau.mobile.widget.paramui.TypeIn;},getCompactParamClass:function(){return tableau.mobile.widget.paramui.Compact;},getListParamClass:function(){return tableau.mobile.widget.paramui.List;},getSliderParamClass:function(){return tableau.mobile.widget.paramui.Slider;}}
tab.ParamUITypeInMobile=function(parent,div,field,attrs,parameterViewModel){tab.ParamUITypeInMobile.initializeBase(this,[parent,div,field,attrs,parameterViewModel]);this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.ParamUITypeInMobile.prototype={domNode:null,domBox:null,widget:null,mode:null,$2_0:null,get_inplaceMobile:function(){return this.$2_0;},set_inplaceMobile:function(value){this.$2_0=value;return value;},get_popup:function(){return this.get_inplaceMobile().get_popup();},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.get_domBoxElement():this.domBox;},instantiate:function(isUpdate){this.div.innerHTML='<span>'+tableau.format.escapeHTML(this.get_legacyModel().alias)+'</span>';this.get_inplaceMobile().setupTouchHandler(this.div);this.$2_1(isUpdate);},$2_1:function($p0){var $0={};$0.pattern=this.get_legacyModel().alias;$0.datavalue=this.get_legacyModel().value;$0.isListDomain=this.get_legacyModel().is_list_domain;$0.domain=this.get_legacyModel().domain;$0.title=this.get_legacyModel().title;$0.numberFormat=this.get_legacyModel().format;$0.type='TypeIn';$0.options=false;$0.lessMore=false;$0.search=false;$0.mode=this.mode;$0.qf=this.parent;this.get_inplaceMobile().createPopup(tableau.mobile.widget.catmode.popup.PatternPopup,$0);this.get_inplaceMobile().connectPopup();if(!$p0){this.get_popup().patternWidget.add_updatePattern(ss.Delegate.create(this,this.updateFromPopup));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
if(ss.isValue(this.get_popup())){this.get_popup().patternWidget.remove_updatePattern(ss.Delegate.create(this,this.updateFromPopup));}})));}},setNewState:function(){this.instantiate(true);},get_uniqueNodeId:function(){return this.parent.id;},destroy:function(){this.get_inplaceMobile().disconnectPopup();this.get_inplaceMobile().destroyPopup();this.inherited(arguments);},updateFromPopup:function($p0){++this.parent.stateId;tab.ParameterServerCommands.setParameterValue(this.field,$p0,!this.get_popup().patternWidget.isLocalized(),ss.Delegate.create(this,this.$2_3),ss.Delegate.create(this,this.$2_2));},$2_2:function($p0){this.widget.queryBox.value=this.get_legacyModel().alias;},$2_3:function($p0){}}
tab.ParamUICompactMobile=function(parent,div,field,attrs,parameterViewModel){tab.ParamUICompactMobile.initializeBase(this,[parent,div,field,attrs,parameterViewModel]);this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.ParamUICompactMobile.prototype={t:null,domNode:null,domBox:null,$2_0:null,get_inplaceMobile:function(){return this.$2_0;},set_inplaceMobile:function(value){this.$2_0=value;return value;},get_popup:function(){return this.get_inplaceMobile().get_popup();},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.get_domBoxElement():this.domBox;},instantiate:function(isUpdate){var $0=[];var $1=this.field;var $2=this.get_legacyModel().alias;var $3=tableau.mobile.FilterItemMobile.getDropdownHtml;var $4=this.get_legacyModel().domain;var $5=$4.length;for(var $7=0;$7<$5;$7++){if($2===$4[$7]){var $8=([$1,'_',$7.toString()]).join('');$0.add($3($8,$4[$7]));}}this.div.innerHTML=$0.join('');this.t=[];var $6=this.get_legacyModel().domain.length;for(var $9=0;$9<$6;$9++){this.t.push(tab.$create_TupleStruct(this.get_legacyModel().domain[$9],this.get_legacyModel().domain[$9]===$2,null));}if(!isUpdate){this.get_inplaceMobile().setupTouchHandler(this.div);this.$2_1(this.t);}},$2_1:function($p0){var $0={};$0.listParams={};$0.listParams.listItems=$p0;$0.listParams.isMultiValue=false;$0.title=this.get_legacyModel().title;$0.options=false;$0.lessMore=false;$0.search=false;$0.mode='compact';$0.qf=this.parent;this.get_inplaceMobile().createPopup(tableau.mobile.widget.catmode.popup.ListPopup,$0);this.get_inplaceMobile().connectPopup();this.get_popup().get_list().add_dispatchItemsChanged(ss.Delegate.create(this,this.$2_2));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_popup().get_list().remove_dispatchItemsChanged(ss.Delegate.create(this,this.$2_2));})));},get_uniqueNodeId:function(){return this.parent.id;},setNewState:function(){this.instantiate(true);},$2_2:function($p0,$p1){if(!$p0.length){return;}var $0=$p0[0];var $1=this.get_legacyModel().domain;if($0.rowIndex>=$1.length||$0.rowIndex<0||tab.MiscUtil.isNullOrEmpty($1)){return;}var $2=this.get_legacyModel().domain[$0.rowIndex];++this.parent.stateId;tab.ParameterServerCommands.setParameterValue(this.field,$2);}}
tab.ParamUIListMobile=function(parent,div,field,attrs,parameterViewModel){tab.ParamUIListMobile.initializeBase(this,[parent,div,field,attrs,parameterViewModel]);this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.ParamUIListMobile.prototype={touchHandler:null,t:null,$2_0:null,$2_1:null,$2_2:null,domNode:null,domBox:null,get_inplaceMobile:function(){return this.$2_2;},set_inplaceMobile:function(value){this.$2_2=value;return value;},get_uniqueNodeId:function(){return this.parent.id;},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.get_domBoxElement():this.domBox;},instantiate:function(isUpdate){var $0=[];var $1=this.field;var $2=this.get_legacyModel().alias;var $3=tableau.mobile.FilterItemMobile.getRadioHtml;var $4=this.get_legacyModel().domain;var $5=$4.length;for(var $7=0;$7<$5;$7++){var $8=([$1,'_',$7.toString()]).join('');$0.add($3($8,$4[$7],$2===$4[$7]));}if(!isUpdate){this.$2_0=document.createElement('div');this.div.appendChild(this.$2_0);}dojo.style(this.div,'overflow','hidden');this.$2_0.innerHTML=$0.join('');this.t=[];var $6=this.get_legacyModel().domain.length;for(var $9=0;$9<$6;$9++){this.t.push(tab.$create_TupleStruct(this.get_legacyModel().domain[$9],this.get_legacyModel().domain[$9]===$2,null));}if(!isUpdate){this.get_inplaceMobile().setupTouchHandler(this.div);this.$2_3(this.t);}this.$2_1=new spiff.MobileScroller(this.$2_0,this.touchHandler,spiff.$create_MobileScrollerOptions());},layout:function(contentSize){dojo.marginBox(this.div,contentSize);if(ss.isValue(this.$2_1)){this.$2_1.refresh();}},$2_3:function($p0){var $0={};$0.listParams={};$0.listParams.listItems=$p0;$0.listParams.isMultiValue=false;$0.title=this.get_legacyModel().title;$0.options=false;$0.lessMore=false;$0.search=false;$0.mode='compact';$0.qf=this.parent;this.get_inplaceMobile().createPopup(tableau.mobile.widget.catmode.popup.ListPopup,$0);this.get_inplaceMobile().connectPopup();this.get_inplaceMobile().get_popup().get_list().add_dispatchItemsChanged(ss.Delegate.create(this,this.$2_4));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_inplaceMobile().get_popup().get_list().remove_dispatchItemsChanged(ss.Delegate.create(this,this.$2_4));})));},setNewState:function(){this.instantiate(true);},$2_4:function($p0,$p1){if(!$p0.length){return;}var $0=$p0[0];var $1=this.get_legacyModel().domain[$0.rowIndex];++this.parent.stateId;tab.ParameterServerCommands.setParameterValue(this.field,$1);},destroy:function(){tab.ParamUIListMobile.callBaseMethod(this, 'destroy');this.$2_1.dispose();this.dispose();}}
tab.ParamUISliderMobile=function(parent,div,field,attrs,parameterViewModel){tab.ParamUISliderMobile.initializeBase(this,[parent,div,field,attrs,parameterViewModel]);this.$3_3=new tab.InplaceMobilePopup(this);}
tab.ParamUISliderMobile.prototype={$3_0:null,$3_1:0,$3_2:null,currentValue:0,domNode:null,domBox:null,isPercentageMode:false,$3_3:null,get_popup:function(){return this.$3_3.get_popup();},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.get_domBoxElement():this.domBox;},instantiate:function(isUpdate){this.slider=new tableau.mobile.widget.ui.SliderMobile(this.div,this.attributes,false,null,ss.Delegate.create(this.parent,this.parent.getTitleOffset),ss.Delegate.create(this,this.getCurrentText),null,null,false);var $0=this.get_legacyModel().domain;this.$3_2=this.get_legacyModel().alias;this.$3_1=1;this.currentValue=1;if(this.get_legacyModel().fake_continuous){this.attributes['show-step-btns']='false';this.attributes['show-ticks']='false';}var $1=ss.Delegate.create(this,function(){
this.slider.instantiateFromDomain($0,this.$3_2);this.$3_1=(this.slider).numValues;this.currentValue=(this.slider).currentlySelected;});var $2=ss.Delegate.create(this,function(){
this.$3_1=Number.POSITIVE_INFINITY;this.currentValue=this.modelValueOrRangeMin()*100;this.attributes['show-step-btns']='false';this.slider.instantiate(this.$3_1,this.currentValue,this.$3_2);});var $3=ss.Delegate.create(this,function(){
this.$3_1=this.numPeriods();this.currentValue=this.indexInDateRange(this.modelValueOrRangeMin());this.$3_2=this.formatValue(this.modelValueOrRangeMin());this.slider.instantiate(this.$3_1,this.currentValue,this.$3_2);});var $4=ss.Delegate.create(this,function(){
this.$3_1=this.sizeOfDiscreteRange();this.currentValue=this.indexInRange(this.modelValueOrRangeMin());this.slider.instantiate(this.$3_1,this.currentValue,this.$3_2);});this.behaviorPicker($1,$2,$3,$4);this.$3_3.setupTouchHandler(this.div);var $5={};if(!isFinite(this.$3_1)){$5.length=101;this.isPercentageMode=true;}else{$5.length=this.$3_1;this.isPercentageMode=false;}$5.currentValue=this.currentValue;$5.isPercentageMode=this.isPercentageMode;$5.initialText=this.$3_2;this.$3_4($5);},$3_4:function($p0){var $0={};$0.attributes=this.attributes;$0.initValues=$p0;$0.title=this.get_legacyModel().title;$0.options=true;$0.lessMore=true;$0.search=true;$0.mode='slider';$0.qf=this.parent;this.$3_3.createPopup(tableau.mobile.widget.catmode.popup.CategoricalSliderPopup,$0);this.$3_3.connectPopup();if(ss.isValue(this.$3_0)){this.$3_0.dispose();}this.$3_0=new tab.DisposableHolder();this.get_popup().add_onPopupSliderChange(ss.Delegate.create(this,this.$3_5));this.$3_0.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_popup().remove_onPopupSliderChange(ss.Delegate.create(this,this.$3_5));})));},get_uniqueNodeId:function(){return this.parent.id;},$3_5:function($p0,$p1){var $0=this.getCurrentText($p0);this.get_popup().updateReadout($0);if(!!$p1){this.doUpdateViz($p0);}},applyChangesToItem:function($p0,$p1,$p2){}}
tab.PendingChangesManagerMobile=function(parent,domainActualSize,exclusive,isAll){tab.PendingChangesManagerMobile.initializeBase(this,[parent,domainActualSize,exclusive,isAll]);}
tab.PendingChangesManagerMobile.prototype={$1_0:null,handleMobileItemClicked:function(index,curList){this.$1_0=curList;this.handleItemClicked(index,null);},hasAllItem:function(){return this.$1_1()||tab.PendingChangesManagerMobile.callBaseMethod(this, 'hasAllItem');},hasItemAtIndex:function(index){return index<this.domainActualSize&&ss.isValue(this.parent.fetchChildNodeByIndex(index));},setAllItemChecked:function(isChecked){if(this.$1_1()){this.$1_0.setSelectedAtIndex(tab.FilterItemUtil.allItemIndex,isChecked);}tab.PendingChangesManagerMobile.callBaseMethod(this, 'setAllItemChecked',[isChecked]);},setChecked:function(index,isChecked){tab.PendingChangesManagerMobile.callBaseMethod(this, 'setChecked',[index,isChecked]);this.$1_0.setSelectedAtIndex(index,isChecked);},togglePendingCss:function(index){tab.PendingChangesManagerMobile.callBaseMethod(this, 'togglePendingCss',[index]);this.$1_0.togglePendingAtIndex(index);},isChecked:function(index){var $0=this.$1_0.getRowAtIndex(index);if(ss.isValue($0)){return this.$1_0.isSelectedRow($0);}return tab.PendingChangesManagerMobile.callBaseMethod(this, 'isChecked',[index]);},$1_1:function(){return ss.isValue(this.$1_0.getRowAtIndex(tab.FilterItemUtil.allItemIndex));}}
tab.PopupFactory=function(){}
tab.PopupFactory.prototype={getPopupObject:function(popupKlass,popupParams,srcRefNode){var $0=this.getFromArray(popupKlass,srcRefNode);if($0==null){$0=new popupKlass(popupParams,srcRefNode);$0.startup();var $1={};$1.popupObject=$0;$1.div=srcRefNode;$1.className=popupKlass;tab.PopupFactory.$0.push($1);}else{if((typeof($0.update)==='function')){$0.update(popupParams);}}return $0;},getFromArray:function($p0,$p1){for(var $0=0;$0<tab.PopupFactory.$0.length;$0++){if(tab.PopupFactory.$0[$0].div===$p1){if(tab.PopupFactory.$0[$0].className!==$p0){this.removePopup(tab.PopupFactory.$0[$0].popupObject);return null;}else{return tab.PopupFactory.$0[$0].popupObject;}}}return null;},removeObject:function($p0){for(var $0=0;$0<tab.PopupFactory.$0.length;$0++){if(tab.PopupFactory.$0[$0].popupObject===$p0){return tab.PopupFactory.$0.splice($0,1);}}return null;},removePopup:function(basePopupObj){var $0=this.removeObject(basePopupObj);if(ss.isValue($0)&&ss.isValue($0[0])){$0[0].popupObject.destroyRecursive(false);}}}
tab.QuantitativeDateFilterMobile=function(props){this.$3_4=tab.DateTimeAutoFormatMode.showDateOnly;tab.QuantitativeDateFilterMobile.initializeBase(this,[props]);}
tab.QuantitativeDateFilterMobile.prototype={showFullDateTimes:function(dateFormat,val){this.$3_4=tab.QuantitativeDateFilter.getDateTimeFormatMode([this.oCurrentMin,this.oCurrentMax,this.oRangeMin,this.oRangeMax,val],this.get_presModel().ag9,dateFormat,this.$3_4);return this.$3_4;},speciallyFormatDataValueForQuantitativeQF:function(val){return tableau.format.formatDataValue(val,this.oFilter.role,this.oFilter.date_format,null,this.showFullDateTimes(this.oFilter.date_format,val));}}
tab.QuantitativeFilterMobile=function(props){tab.QuantitativeFilterMobile.initializeBase(this,[props]);this.templateString=tab.QuantitativeFilterMobile.$3_0;this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.QuantitativeFilterMobile.prototype={parent:null,domBox:null,$3_1:null,classQFI_:'QFMI_',div:null,qf:null,$3_2:null,get_inplaceMobile:function(){return this.$3_2;},set_inplaceMobile:function(value){this.$3_2=value;return value;},get_$3_3:function(){return this.get_inplaceMobile().get_popup();},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.domBox:this.domBox;},postCreate:function(){this.classQF='QFM';this.classQFButtonR='QFMButtonR';this.classQFDisabled='QFMDisabled';this.classQFCenterText='QFMCenterText';this.classQFHideSlider='QFMHideSlider';this.classQFHideReadout='QFMHideReadout';this.$3_1=new tab.DisposableHolder();this.timestamp=new Date().getTime();var $0=tableau.format.formatColumnDisplayName(this.oFilter,false);dojo.attr(this.domTitleBar,'title',$0);this.updateTitleBar();this.initValues();this.get_inplaceMobile().setupTouchHandler(this.div);this.createPopup(null);},layout:function(){var $0,$1=200;if(this.hasCurrentMin()){dojox.data.dom.textContent(this.domLowerText,this.getMinText());dojo.removeClass(this.domLowerText.parentNode,this.classQFDisabled);}else{dojox.data.dom.textContent(this.domLowerText,this.speciallyFormatDataValueForQuantitativeQF(this.oRangeMin));dojo.addClass(this.domLowerText.parentNode,this.classQFDisabled);}if(this.hasCurrentMax()){dojox.data.dom.textContent(this.domUpperText,this.getMaxText());dojo.removeClass(this.domUpperText.parentNode,this.classQFDisabled);}else{dojox.data.dom.textContent(this.domUpperText,this.speciallyFormatDataValueForQuantitativeQF(this.oRangeMax));dojo.addClass(this.domUpperText.parentNode,this.classQFDisabled);}dojo.addClass(this.domNode,this.classQFHideButtons);dojo.removeClass(this.domNode,this.classQFCenterText);var $2=dojo.marginBox(this.domTitleBar);this.resetTitleSize();if(this.titleH>0){$2.h=this.titleH;dojo.marginBox(this.domTitleBar,{h:$2.h});}if(this.titleW>0){$2.w=this.titleW;dojo.marginBox(this.domTitleBar,{w:$2.w});}tableau.util.setupTitleEllipsis($(this.domTitleBar));var $3=dojo.contentBox(this.domNode);var $4=tab.$create_Size($3.w,$3.h);if(!this.metricsOnly){if(!this.hideEmptyTitlebar()){if(this.titleW>0){$4.w=$3.w-$2.w;dojo.style(this.domContent,'top','');dojo.style(this.domContent,'left',$2.w+'px');}else{dojo.removeClass(this.domNode,this.classQFHideButtons);$4.h=$3.h-$2.h;dojo.style(this.domContent,'top',$2.h+'px');dojo.style(this.domContent,'left','');}}}dojo.marginBox(this.domContent,tab.$create_Size($4.w,$4.h));if(this.attributes['show-slider']!=='false'&&this.attributes['show-readout']!=='false'){dojo.removeClass(this.domNode,this.classQFHideReadout);dojo.removeClass(this.domNode,this.classQFHideSlider);var $6=dojo.contentBox(this.domLowerBound).h+dojo.contentBox(this.domLowerImg).h+8;if($4.h<$6&&$4.w>200){dojo.addClass(this.domNode,this.classQFCenterText);dojo.style(this.domLowerBound,'width','');dojo.style(this.domUpperBound,'width','');var $7=this.contentBox(this.domLowerBound).w;var $8=this.contentBox(this.domUpperBound).w;dojo.style(this.domLowerBound,'top','2px');dojo.style(this.domUpperBound,'top','2px');var $9=(((($4.w-($7+dojo.contentBox(this.domLowerImg).w))-($8+dojo.contentBox(this.domUpperImg).w))-(2*8))-10);dojo.marginBox(this.domBar,{w:$9});dojo.style(this.domBar,'top','7px');dojo.style(this.domBar,'left',($7+dojo.contentBox(this.domLowerImg).w+4)+'px');}else{$0=Math.min($1,Math.floor(($4.w/2)-10));dojo.marginBox(this.domLowerBound,{w:$0});dojo.marginBox(this.domUpperBound,{w:$0});var $A=this.domLowerBound.offsetTop+this.domLowerBound.offsetHeight;dojo.style(this.domBar,'top',$A+'px');dojo.style(this.domBar,'width','');dojo.style(this.domBar,'left','');}}else if(this.attributes['show-slider']!=='false'){dojo.addClass(this.domNode,this.classQFHideReadout);dojo.removeClass(this.domNode,this.classQFHideSlider);}else if(this.attributes['show-readout']!=='false'){dojo.removeClass(this.domNode,this.classQFHideReadout);dojo.addClass(this.domNode,this.classQFHideSlider);$0=Math.min($1,Math.floor(($4.w/2)-4));dojo.marginBox(this.domLowerBound,{w:$0});dojo.marginBox(this.domUpperBound,{w:$0});}else{dojo.addClass(this.domNode,this.classQFHideSlider);dojo.addClass(this.domNode,this.classQFHideReadout);}this.oMetrics.top=this.domBar.offsetTop;this.oMetrics.absOffset=this.domBar.offsetLeft;this.oMetrics.left=0;this.oMetrics.right=this.domBar.offsetWidth;if(this.hasCurrentMin()){dojo.style(this.domLowerImg,'top',(this.oMetrics.top-4)+'px');dojo.style(this.domLowerImg,'visibility','visible');}else{dojo.style(this.domLowerImg,'visibility','hidden');}if(this.hasCurrentMax()){dojo.style(this.domUpperImg,'top',(this.oMetrics.top-4)+'px');dojo.style(this.domUpperImg,'visibility','visible');}else{dojo.style(this.domUpperImg,'visibility','hidden');}this.oMetrics.width=this.oMetrics.right-this.oMetrics.left;this.computePrecision(this.oMetrics.width);var $5=(this.hasDataMin()||this.hasDataMax())?true:false;dojo.style(this.domHighlight,'visibility',($5)?'visible':'hidden');this.updateUIByValue(this.getCurMin(),this.getCurMax());this.updateDomainButton();},dispose:function(){this.$3_1.dispose();},updateDomainButton:function(){if(!!this.get_$3_3()){this.get_$3_3().update(this.qf);}},clearDataRange:function(){if(this.hasDataMin()){this.oDataMin.v=null;}if(this.hasDataMax()){this.oDataMax.v=null;}},initValues:function(){this.oRangeMin=dojo.mixin({},this.oFilter.range.min);this.oRangeMax=dojo.mixin({},this.oFilter.range.max);this.oDataMin=dojo.mixin({},this.oFilter.data.min);this.oDataMax=dojo.mixin({},this.oFilter.data.max);this.oCurrentMin=dojo.mixin({},this.oFilter.table.min);if(!this.isRange()){this.oCurrentMin=dojo.mixin({},this.oFilter.range.min);}this.oCurrentMax=dojo.mixin({},this.oFilter.table.max);if(!this.isRange()){this.oCurrentMax=dojo.mixin({},this.oFilter.range.max);}this.oMetrics=tab.$create_QFMetrics();},onUpdateFromPopup:function($p0,$p1){this.removeRangeOverride();this.updateUIByValue($p0,$p1);this.notifyChange();},onUpdatePopupRange:function($p0,$p1){this.applyQuantFilter($p0,$p1);},updateUIByValue:function($p0,$p1){var $0;var $1=(this.hasCurrentMin()&&ss.isValue($p0))?$p0:-Number.MAX_VALUE;var $2=(this.hasCurrentMax()&&ss.isValue($p1))?$p1:Number.MAX_VALUE;var $3;if($1>$2){$3=$1;$1=$2;$2=$3;}this.removeRangeOverride();if(this.hasCurrentMin()&&!isNaN($1)){this.setMinValue($1);}if(this.hasCurrentMax()&&!isNaN($2)){this.setMaxValue($2);}var $4=this.getRange();$0=this.oMetrics.left;if(this.hasCurrentMin()){var $5=(ss.isValue($4)&&!tab.FloatUtil.isEqual($4,0))?Math.round((this.getCurMin()-this.getRangeMin())*this.oMetrics.width/$4):0;this.setLowerPos(this.oMetrics.left+$5);this.lastLowerOffset=this.domLowerImg.offsetLeft;dojo.style(this.domRange,'left',(this.oMetrics.left+$5)+'px');$0=this.getLowerPos();}else{dojo.style(this.domRange,'left',$0+'px');}if(this.hasCurrentMax()){var $6=(this.hasCurrentMin())?this.getCurMin():this.getRangeMin();var $7=(ss.isValue($4)&&!tab.FloatUtil.isEqual($4,0))?Math.round((this.getCurMax()-$6)*this.oMetrics.width/$4):this.oMetrics.width;this.setUpperPos($0+$7);this.lastUpperOffset=this.domUpperImg.offsetLeft;dojo.style(this.domRange,'width',Math.max($7,0)+'px');}else{dojo.style(this.domRange,'width',Math.max(this.oMetrics.right-$0,0)+'px');}this.updateDataBar();},updatePopup:function(){var $0={};$0.attributes={rangeMin:{t:this.oRangeMin.t,v:this.getRangeMin(),s:this.oRangeMin.s},rangeMax:{t:this.oRangeMax.t,v:this.getRangeMax(),s:this.oRangeMax.s},dataMin:this.oDataMin,dataMax:this.oDataMax,currentMin:this.oCurrentMin,currentMax:this.oCurrentMax,showLeftHandle:this.hasCurrentMin(),showRightHandle:this.hasCurrentMax()};this.get_$3_3().updateData($0);},createPopup:function($p0){var $0=tableau.format.formatColumnDisplayName(this.oFilter,false);var $1={rangeMin:this.oRangeMin,rangeMax:this.oRangeMax,dataMin:this.oDataMin,dataMax:this.oDataMax,currentMin:this.oCurrentMin,currentMax:this.oCurrentMax,showLeftHandle:this.hasCurrentMin(),showRightHandle:this.hasCurrentMax()};var $2={};$2.attributes=$1;$2.oFilter=this.oFilter;$2.aggType=this.get_presModel().ag9;$2.title=$0;$2.options=true;$2.lessMore=true;$2.search=true;$2.mode='checklist';$2.qf=this;this.get_inplaceMobile().createPopup(tableau.mobile.widget.catmode.popup.QuantitativeSliderPopup,$2);this.get_inplaceMobile().connectPopup();this.get_$3_3().createControls();this.get_$3_3().add_onPopupSliderChange(ss.Delegate.create(this,this.onUpdateFromPopup));this.get_$3_3().add_onPopupSliderUpdateRange(ss.Delegate.create(this,this.onUpdatePopupRange));this.get_$3_3().add_setCurrentMinMax(ss.Delegate.create(this,this.setCurrentMinMax));this.$3_1.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$3_3().remove_onPopupSliderChange(ss.Delegate.create(this,this.onUpdateFromPopup));this.get_$3_3().remove_onPopupSliderUpdateRange(ss.Delegate.create(this,this.onUpdatePopupRange));this.get_$3_3().remove_setCurrentMinMax(ss.Delegate.create(this,this.setCurrentMinMax));})));},onDestroy:function(){this.dispose();this.get_inplaceMobile().disconnectPopup();this.get_inplaceMobile().destroyPopup();},setCurrentMinMax:function(min,max){this.oCurrentMin.v=min;this.oCurrentMax.v=max;this.savePreviousMinAndMaxVals();},get_uniqueNodeId:function(){return this.id;},initFromState:function(){this.initValues();this.layout();this.updatePopup();}}
tab.QuantitativeSliderPopup=function(parameters,srcRefNode){this.$1_23='none';tab.QuantitativeSliderPopup.initializeBase(this);this.oFilter=parameters.oFilter;this.attributes=parameters.attributes;this.set_title(parameters.title);this.$1_22=new tab.DisposableHolder();var $0=this.attributes['rangeMin'];this.typeOfData=$0['t'];this.$1_23=parameters.aggType;}
tab.QuantitativeSliderPopup.prototype={attributes:null,$1_22:null,doubleSlider:null,quantReadouts:null,domNode:null,oFilter:null,typeOfData:null,add_onPopupSliderUpdateRange:function(value){this.$1_24=ss.Delegate.combine(this.$1_24,value);},remove_onPopupSliderUpdateRange:function(value){this.$1_24=ss.Delegate.remove(this.$1_24,value);},$1_24:null,add_onPopupSliderChange:function(value){this.$1_25=ss.Delegate.combine(this.$1_25,value);},remove_onPopupSliderChange:function(value){this.$1_25=ss.Delegate.remove(this.$1_25,value);},$1_25:null,add_setCurrentMinMax:function(value){this.$1_26=ss.Delegate.combine(this.$1_26,value);},remove_setCurrentMinMax:function(value){this.$1_26=ss.Delegate.remove(this.$1_26,value);},$1_26:null,startup:function(){if(this.doubleSlider!=null){this.doubleSlider.startup();}},postCreate:function(){this.attributes['oFilter']=this.oFilter;this.doubleSlider=new tableau.mobile.widget.catmode.popup.DoubleSlider(this.attributes);this.doubleSlider.placeAt(this.domContent,'after');this.doubleSlider.setParent(this);this.quantReadouts=new tableau.mobile.widget.catmode.popup.QuantReadouts(this.oFilter,this.attributes['currentMin'],this.attributes['currentMax'],null,this.$1_23);this.quantReadouts.placeAt(this.domContent,'after');var $0=ss.Delegate.create(this,function($p1_0,$p1_1){
if(ss.isValue(this.$1_24)){this.$1_24($p1_0,$p1_1);}});var $1=ss.Delegate.create(this,function($p1_0,$p1_1){
if(ss.isValue(this.$1_25)){this.$1_25($p1_0,$p1_1);}});var $2=ss.Delegate.create(this,function($p1_0,$p1_1){
if(ss.isValue(this.$1_26)){this.$1_26($p1_0,$p1_1);}});this.doubleSlider.add_updateLeftReadout(ss.Delegate.create(this,this.$1_27));this.doubleSlider.add_updateRightReadout(ss.Delegate.create(this,this.$1_28));this.doubleSlider.add_onPopupSliderChange($1);this.doubleSlider.add_setReadoutState(ss.Delegate.create(this,this.$1_29));this.doubleSlider.add_updateRange($0);this.doubleSlider.add_setCurrentMinMax($2);this.quantReadouts.add_onPopupReadoutChange(ss.Delegate.create(this,this.onPopupReadoutChange));this.$1_22.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.doubleSlider.remove_updateLeftReadout(ss.Delegate.create(this,this.$1_27));this.doubleSlider.remove_updateRightReadout(ss.Delegate.create(this,this.$1_28));this.doubleSlider.remove_onPopupSliderChange($1);this.doubleSlider.remove_setReadoutState(ss.Delegate.create(this,this.$1_29));this.doubleSlider.remove_updateRange($0);this.doubleSlider.remove_setCurrentMinMax($2);this.quantReadouts.remove_onPopupReadoutChange(ss.Delegate.create(this,this.onPopupReadoutChange));})));dojo.addClass(this.domNode,'Slider');this.inherited(arguments);},updateData:function(parameters){this.doubleSlider.updateData(parameters.attributes);},$1_27:function($p0,$p1,$p2,$p3){this.quantReadouts.setMinValue($p0,$p1,$p2,$p3);},$1_28:function($p0,$p1,$p2,$p3){this.quantReadouts.setMaxValue($p0,$p1,$p2,$p3);},$1_29:function($p0,$p1){if($p0==='left'){this.quantReadouts.setMinReadoutState($p1);}else if($p0==='right'){this.quantReadouts.setMaxReadoutState($p1);}},onPopupReadoutChange:function(valLower,valUpper){if(ss.isValue(this.$1_25)){this.$1_25(valLower,valUpper);}},getContentDimensions:function(){return tab.$create_Rect(0,0,0,100);},destroy:function(){this.doubleSlider.destroy();this.quantReadouts.destroy();this.$1_22.dispose();this.inherited(arguments);}}
tab.QuantReadoutsMobile=function(param,currentMin,currentMax,srcRefNode,aggTypeArg){this.templateString="<div class='QFPopupReadoutWrapper' dojoAttachPoint='_quantReadoutsWrapper'>"+"<div class='QFPopupReadout QFPopupLowerBound'"+" dojoAttachPoint='domLowerBound'>"+"<div class='readoutText' dojoAttachPoint='domLowerText'></div>"+"<input type='${inputType}' dojoAttachPoint='domLowerInput'></input></div>"+"<div class='QFPopupReadout QFPopupUpperBound'"+" dojoAttachPoint='domUpperBound'>"+"<div class='readoutText' dojoAttachPoint='domUpperText'></div>"+"<input type='${inputType}' dojoAttachPoint='domUpperInput'></input>"+'</div>'+"<a dojoAttachPoint='focusGrabber' href='#'></a>"+'</div>';this.$1_7=tab.DateTimeAutoFormatMode.showDateOnly;this.$1_B='none';tab.QuantReadoutsMobile.initializeBase(this);this.$1_8=param;this.$1_2={};this.$1_2.v=(ss.isValue(currentMax))?currentMax.v:0;this.$1_2.t=(ss.isValue(currentMax))?currentMax.t:'';this.$1_3={};this.$1_3.v=(ss.isValue(currentMin))?currentMin.v:0;this.$1_3.t=(ss.isValue(currentMin))?currentMin.t:'';this.$1_B=aggTypeArg;var $0=(this.$1_B==='trunc-month'||this.$1_B==='trunc-year');if(!$0&&tab.QuantitativeDateFilter.isPureTime([this.$1_3,this.$1_2,param.range.min,param.range.max],this.$1_B)&&tab.BrowserSupport.get_timeInput()){this.inputType='time';}else if(!$0&&tab.FilterModel.isQuantitativeTimestampFilter(this.$1_8,this.$1_3,this.$1_2)&&tab.BrowserSupport.get_dateTimeLocalInput()){this.inputType='datetime-local';}else if(!$0&&tab.FilterModel.isQuantitativeDateFilter(this.$1_8,this.$1_3,this.$1_2)&&tab.BrowserSupport.get_dateInput()){this.inputType='date';}else{this.inputType='text';}}
tab.QuantReadoutsMobile.prototype={widgetsInTemplate:true,domLowerInput:null,domUpperInput:null,domLowerText:null,domUpperText:null,domLowerBound:null,domUpperBound:null,focusGrabber:null,$1_2:null,$1_3:null,$1_4:5,$1_5:true,$1_6:true,$1_8:null,$1_9:null,$1_A:null,domNode:null,inputType:null,$1_C:null,add_onPopupReadoutChange:function(value){this.$1_D=ss.Delegate.combine(this.$1_D,value);},remove_onPopupReadoutChange:function(value){this.$1_D=ss.Delegate.remove(this.$1_D,value);},$1_D:null,get_$1_E:function(){if(this.$1_C==null){if(this.inputType==='date'){this.$1_C=tableau.format.get_isO8601DateFormat();}else if(this.inputType==='datetime-local'){this.$1_C=tableau.format.get_isO8601DateTimeFormat();}else if(this.inputType==='time'){this.$1_C=tableau.format.get_isO8601TimeFormat();}else if(this.$1_3.t===tableau.types.DataType.DT_DATE||this.$1_3.t===tableau.types.DataType.DT_TIMESTAMP){this.$1_C=this.$1_8.editing_format;}else{this.$1_C=tableau.format.deriveNumberEditingFormat(this.$1_8.format);}}return this.$1_C;},get_precision:function(){return this.$1_4;},set_precision:function(value){this.$1_4=value;return value;},postCreate:function(){this.$1_A=new tab.DisposableHolder();var $0=spiff.$create_EventHandleSpec();$0.potentialTap=ss.Delegate.create(this,this.showLowerInput);this.$1_A.add(new spiff.TableauEventHandler(this.domLowerBound,$0));var $1=spiff.$create_EventHandleSpec();$1.potentialTap=ss.Delegate.create(this,this.showUpperInput);this.$1_A.add(new spiff.TableauEventHandler(this.domUpperBound,$1));$(this.domLowerInput).change(ss.Delegate.create(this,function(){
this.$1_1F(this.domLowerInput,this.$1_3);}));$(this.domUpperInput).change(ss.Delegate.create(this,function(){
this.$1_1F(this.domUpperInput,this.$1_2);}));},$1_F:function($p0,$p1){this.$1_11($p0,$p1,ss.Delegate.create(this,this.$1_1C));},$1_10:function($p0,$p1){this.$1_11($p0,$p1,ss.Delegate.create(this,this.$1_1D));},$1_11:function($p0,$p1,$p2){if(!(tab.DomUtil.isEqualOrAncestorOf(this.domLowerBound,$p0.target)||tab.DomUtil.isEqualOrAncestorOf(this.domUpperBound,$p0.target))){$p2(null);this.$1_12();$p1(false);}},$1_12:function(){this.focusGrabber.focus();document.activeElement.blur();},$1_13:function($p0){tab.DomUtil.selectAllInputText($p0);$p0.focus();},$1_14:function($p0,$p1){var $0=$($p0);var $1=$0.find('.readoutText');var $2=$0.find('input');$1.text(this.$1_15($p1,this.$1_4));var $3=$2.val();var $4=this.$1_16($p1);if($3!==$4){$2.val($4);if($0.hasClass('Editing')){this.$1_13($2);}}},setMinValue:function(minVal,type,state,newPrecision){this.$1_3.v=minVal;this.$1_3.t=type;if(!ss.isUndefined(state)){this.$1_3.s=state;}this.set_precision(newPrecision);this.$1_14(this.domLowerBound,this.$1_3);},setMaxValue:function(maxValue,type,state,newPrecision){this.$1_2.v=maxValue;this.$1_2.t=type;if(ss.isValue(state)){this.$1_2.s=state;}this.set_precision(newPrecision);this.$1_14(this.domUpperBound,this.$1_2);},showLowerInput:function(e){if(!this.$1_5){return;}if(this.$1_6){this.$1_1D(null);}this.$1_18(e,this.$1_3,this.domLowerInput,ss.Delegate.create(this,this.$1_1C),ss.Delegate.create(this,this.$1_19));spiff.GlobalTouchWatcher.add_firstTouch(ss.Delegate.create(this,this.$1_F));},showUpperInput:function(e){if(!this.$1_6){return;}if(this.$1_5){this.$1_1C(null);}this.$1_18(e,this.$1_2,this.domUpperInput,ss.Delegate.create(this,this.$1_1D),ss.Delegate.create(this,this.$1_1A));spiff.GlobalTouchWatcher.add_firstTouch(ss.Delegate.create(this,this.$1_10));},setMinReadoutState:function(state){if(!!state){dojo.removeClass(this.domLowerText.parentNode,'QFPopupDisabled');this.$1_5=true;}else if(!state){dojo.addClass(this.domLowerText.parentNode,'QFPopupDisabled');this.$1_5=false;}},setMaxReadoutState:function(state){if(!!state){dojo.removeClass(this.domUpperText.parentNode,'QFPopupDisabled');this.$1_6=true;}else if(!state){dojo.addClass(this.domUpperText.parentNode,'QFPopupDisabled');this.$1_6=false;}},getMinText:function(newPrecision){return this.$1_15(this.$1_3,newPrecision);},getMaxText:function(newPrecision){return this.$1_15(this.$1_2,newPrecision);},$1_15:function($p0,$p1){var $0=this.$1_8;var $1=($p0.t===tableau.types.DataType.DT_TIMESTAMP||$p0.t===tableau.types.DataType.DT_DATE)?$0.editing_format:$0.format;return tableau.format.formatDataValue($p0,$0.role,$1,$p1,this.$1_17($1,$p0));},$1_16:function($p0){return tableau.format.formatDataValue($p0,this.$1_8.role,this.get_$1_E(),this.$1_4,this.$1_17(this.get_$1_E(),$p0));},$1_17:function($p0,$p1){this.$1_7=tab.QuantitativeDateFilter.getDateTimeFormatMode([this.$1_3,this.$1_2,this.$1_8.range.min,this.$1_8.range.max,$p1],this.$1_B,$p0,this.$1_7);return this.$1_7;},$1_18:function($p0,$p1,$p2,$p3,$p4){var $0=$($p2);var $1=$0.parent();if($1.hasClass('Editing')){return;}if(ss.isValue($p0)){$p0.stopPropagation();$p0.preventDefault();}this.$1_9=new tab.DisposableHolder();this.$1_9.add(spiff.EventUtil.bindWithDispose($0,'blur',$p3));this.$1_9.add(spiff.EventUtil.bindWithDispose($0,'keypress',$p4));$0.val(this.$1_16($p1));$1.addClass('Editing');this.$1_13($0);},$1_19:function($p0){this.$1_1B($p0,this.domLowerInput);},$1_1A:function($p0){this.$1_1B($p0,this.domUpperInput);},$1_1B:function($p0,$p1){if($p0.which===13){$p0.stopPropagation();$p0.preventDefault();$p1.blur();}},$1_1C:function($p0){spiff.GlobalTouchWatcher.remove_firstTouch(ss.Delegate.create(this,this.$1_F));this.$1_1E($p0,this.$1_3,this.domLowerInput);},$1_1D:function($p0){spiff.GlobalTouchWatcher.remove_firstTouch(ss.Delegate.create(this,this.$1_10));this.$1_1E($p0,this.$1_2,this.domUpperInput);},$1_1E:function($p0,$p1,$p2){this.$1_1F($p2,$p1);var $0=$($p2).parent();if(!$0.hasClass('Editing')){return;}$0.removeClass('Editing');if(ss.isValue(this.$1_9)){this.$1_9.dispose();}if(ss.isValue($p0)){$p0.stopPropagation();$p0.preventDefault();}},$1_1F:function($p0,$p1){var $0=$($p0).text();var $1=this.$1_20($p0,$p1);var $2=dojo.mixin({},$p1);if(isNaN($1)){$1=$0;}else{$2.v=$1;$1=this.$1_15($2,null);}if($0!==$1.toString()){$($p0).siblings('.readoutText').text($1);var $3=(this.$1_5)?this.$1_20(this.domLowerInput,this.$1_3):(-Number.MAX_VALUE);var $4=(this.$1_6)?this.$1_20(this.domUpperInput,this.$1_2):Number.MAX_VALUE;if($3>$4){var $5=$3;$3=$4;$4=$5;}if(ss.isValue(this.$1_D)){this.$1_D($3,$4);}}},$1_20:function($p0,$p1){return tableau.format.parseQuantitativeDataValue($p0.value,$p1.t,this.get_$1_E(),this.$1_17(this.get_$1_E()),$p1);},destroy:function(){this.$1_A.dispose();if(ss.isValue(this.$1_9)){this.$1_9.dispose();}spiff.GlobalTouchWatcher.remove_firstTouch(ss.Delegate.create(this,this.$1_F));spiff.GlobalTouchWatcher.remove_firstTouch(ss.Delegate.create(this,this.$1_10));}}
tab.RelativeDateFilterDialogMobile=function(popupParams){this.templateString="<div class='RelativeDateFilterDialogMobile'>"+"<div class='RDFDMBody'>"+"<div class='RDFDMColumnWest RDFDMBorderRight' >"+"<div class='RDFDMButtonTapArea' dojoattachpoint='buttonYear' name='year'>"+"<span class='RDFDMButtonCheckmark'></span>"+"<span class='RDFDMButtonLabel'>${buttonYearLabel}</span>"+'</div>'+"<div class='RDFDMButtonTapArea' dojoattachpoint='buttonQuarter' name='quarter'>"+"<span class='RDFDMButtonCheckmark'></span>"+"<span class='RDFDMButtonLabel'>${buttonQuarterLabel}</span>"+'</div>'+"<div class='RDFDMButtonTapArea' dojoattachpoint='buttonMonth' name='month'>"+"<span class='RDFDMButtonCheckmark'></span>"+"<span class='RDFDMButtonLabel'>${buttonMonthLabel}</span>"+'</div>'+"<div class='RDFDMButtonTapArea' dojoattachpoint='buttonWeek' name='week'>"+"<span class='RDFDMButtonCheckmark'></span>"+"<span class='RDFDMButtonLabel'>${buttonWeekLabel}</span>"+'</div>'+"<div class='RDFDMButtonTapArea' dojoattachpoint='buttonDay' name='day'>"+"<span class='RDFDMButtonCheckmark'></span>"+"<span class='RDFDMButtonLabel'>${buttonDayLabel}</span>"+'</div>'+"<div class='RDFDMButtonTapArea' dojoattachpoint='buttonHour' name='hour'>"+"<span class='RDFDMButtonCheckmark'></span>"+"<span class='RDFDMButtonLabel'>${buttonHourLabel}</span>"+'</div>'+"<div class='RDFDMButtonTapArea' dojoattachpoint='buttonMinute' name='minute'>"+"<span class='RDFDMButtonCheckmark'></span>"+"<span class='RDFDMButtonLabel'>${buttonMinuteLabel}</span>"+'</div>'+'</div>'+"<div class='RDFDMColumnEast'>"+"<div class='RDFDMButtonTapArea' dojoattachpoint='radioLast' name='last'>"+"<span class='RDFDMButtonCheckmark'></span>"+"<span class='RDFDMButtonLabel' dojoattachpoint='textLast'></span>"+'</div>'+"<div class='RDFDMButtonTapArea' dojoattachpoint='radioCurr' name='curr'>"+"<span class='RDFDMButtonCheckmark'></span>"+"<span class='RDFDMButtonLabel' dojoattachpoint='textCurr'></span>"+'</div>'+"<div class='RDFDMButtonTapArea' dojoattachpoint='radioNext' name='next'>"+"<span class='RDFDMButtonCheckmark'></span>"+"<span class='RDFDMButtonLabel' dojoattachpoint='textNext'></span>"+'</div>'+"<div class='RDFDMButtonTapArea' dojoattachpoint='radioLastn' name='lastn'>"+"<span class='RDFDMButtonCheckmark'></span>"+"<span class='RDFDMButtonLabel' dojoattachpoint='textLastn1'></span>"+"<span class='RDFDMInputWrapper'>"+"<input type='text' dojoattachpoint='inputLastn' value='3'"+"dojoattachevent='onkeyup:onTypingLast,onclick:setRLastn' />"+'</span>'+"<span class='RDFDMButtonLabel' dojoattachpoint='textLastn2'></span>"+'</div>'+"<div class='RDFDMButtonTapArea' dojoattachpoint='radioNextn' name='nextn'>"+"<span class='RDFDMButtonCheckmark'></span>"+"<span class='RDFDMButtonLabel' dojoattachpoint='textNextn1'></span>"+"<span class='RDFDMInputWrapper'>"+"<input type='text' dojoattachpoint='inputNextn' value='3'"+"dojoattachevent='onkeyup:onTypingNext,onclick:setRNextn' />"+'</span>'+"<span class='RDFDMButtonLabel' dojoattachpoint='textNextn2'></span>"+'</div>'+"<div class='RDFDMButtonTapArea' dojoattachpoint='radioTodate' name='todate'>"+"<span class='RDFDMButtonCheckmark'></span>"+"<span class='RDFDMButtonLabel' dojoattachpoint='textTodate'></span>"+'</div>'+'</div>'+'</div>'+"<div class='RDFDMFooter'>"+"<span dojoattachpoint='domPreview'></span>"+'</div>'+'</div>';this.$3_0=[];this.$3_1=[];this.buttonYearLabel=tab.Strings.RelDateFilterYears;this.buttonQuarterLabel=tab.Strings.RelDateFilterQuarters;this.buttonMonthLabel=tab.Strings.RelDateFilterMonths;this.buttonWeekLabel=tab.Strings.RelDateFilterWeeks;this.buttonDayLabel=tab.Strings.RelDateFilterDays;this.buttonHourLabel=tab.Strings.RelDateFilterHours;this.buttonMinuteLabel=tab.Strings.RelDateFilterMinutes;tab.RelativeDateFilterDialogMobile.initializeBase(this);this.$3_2=[];this.$3_3=[];}
tab.RelativeDateFilterDialogMobile.prototype={widgetsInTemplate:true,session:null,field:'',stateId:0,rid:0,timestamp:0,touchHandler:null,firstTouchOnMe:true,scaleFactor:1,buttonYear:null,buttonQuarter:null,buttonMonth:null,buttonWeek:null,buttonDay:null,buttonHour:null,buttonMinute:null,radioLast:null,radioCurr:null,radioNext:null,radioLastn:null,radioNextn:null,domText:null,inputNextn:null,$3_2:null,$3_3:null,getSID:null,postCreate:function(){this.getSID=ss.Delegate.create(this,function(){
return this.stateId;});if(!!this.oFilter.fy){this.fy=this.oFilter.fy-1;}if(!!this.oFilter.start_of_week){this.startOfWeek=this.oFilter.start_of_week;}this.timestamp=new Date().getTime();this.$3_1=[this.buttonYear,this.buttonQuarter,this.buttonMonth,this.buttonWeek,this.buttonDay];if(this.oFilter.noTime){dojo.style(this.buttonHour,'display','none');dojo.style(this.buttonMinute,'display','none');}else{this.$3_1.push(this.buttonHour);this.$3_1.push(this.buttonMinute);}this.$3_0=[this.radioLast,this.radioCurr,this.radioNext,this.radioLastn,this.radioNextn,this.radioTodate];this.$3_4();this.$3_5();this.prepareToShow();},$3_4:function(){var $0=ss.Delegate.create(this,function($p1_0){
var $1_0=spiff.$create_EventHandleSpec();$1_0.potentialTap=function(){
$p1_0.second();};this.$3_3.push(new spiff.TableauEventHandler($p1_0.first,$1_0));});var $1=[new ss.Tuple(this.buttonYear,ss.Delegate.create(this,this.setPYear)),new ss.Tuple(this.buttonQuarter,ss.Delegate.create(this,this.setPQuarter)),new ss.Tuple(this.buttonMonth,ss.Delegate.create(this,this.setPMonth)),new ss.Tuple(this.buttonWeek,ss.Delegate.create(this,this.setPWeek)),new ss.Tuple(this.buttonDay,ss.Delegate.create(this,this.setPDay)),new ss.Tuple(this.buttonHour,ss.Delegate.create(this,this.setPHour)),new ss.Tuple(this.buttonMinute,ss.Delegate.create(this,this.setPMinute)),new ss.Tuple(this.radioLast,ss.Delegate.create(this,this.setRLast)),new ss.Tuple(this.radioCurr,ss.Delegate.create(this,this.setRCurr)),new ss.Tuple(this.radioNext,ss.Delegate.create(this,this.setRNext)),new ss.Tuple(this.radioLastn,ss.Delegate.create(this,this.setRLastn)),new ss.Tuple(this.radioNextn,ss.Delegate.create(this,this.setRNextn)),new ss.Tuple(this.radioTodate,ss.Delegate.create(this,this.setRTodate))];var $2=$1.length;for(var $3=0;$3<$2;++$3){$0($1[$3]);}},updateRangeButtons:function(newPeriodType){var $0=this.$3_1.length;for(var $1=0;$1<$0;$1++){if(dojo.attr(this.$3_1[$1],'name')===newPeriodType){dojo.addClass(this.$3_1[$1],'Selected');dojo.addClass($(this.$3_1[$1]).find('.RDFDMButtonCheckmark').get(0),'Checked');}else{dojo.removeClass(this.$3_1[$1],'Selected');dojo.removeClass($(this.$3_1[$1]).find('.RDFDMButtonCheckmark').get(0),'Checked');}}},destroy:function(preserveDom){var $0=function($p1_0){
$p1_0.destroy();};dojo.forEach(this.$3_3,$0);dojo.forEach(this.$3_2,dojo.unsubscribe);if(!!this.domText){this.domText.innerHTML='';}this.inherited(arguments);},layout:function(){},getMetrics:function(){var $0=dojo.marginBox(this.domNode);return {fixed:tab.$create_Size(0,$0.h)};},$3_5:function(){var $0=this.oFilter.table;this.periodType=$0.periodType;this.rangeType=$0.rangeType;this.rangeN=$0.rangeN;if(!ss.isUndefined($0.anchor)){var $1=$0.anchor;this.anchorDateTime=new Date($1.year,$1.month-1,$1.day,$1.hour,$1.minute,$1.second);}this.setRangeType(this.rangeType,this.rangeN);},applyChanges:function(){++this.stateId;tab.FilterClientCommands.doRelativeDateQuickFilter(this.session.get_visualId(),this.field,this.periodType,this.rangeType,this.rangeN);},prepareToShow:function(){this.setPeriodUI(this.periodType);this.setRangeUI(this.rangeType,this.rangeN);this.setPreviewUI();},onTypingLast:function(){this.onTyping(this.inputLastn);},onTypingNext:function(){this.onTyping(this.inputNextn);},setRLast:function(){this.setRange('last');},setRCurr:function(){this.setRange('curr');},setRNext:function(){this.setRange('next');},setRLastn:function(){this.setRange('lastn',this.inputLastn.value);},setRNextn:function(){this.setRange('nextn',this.inputNextn.value);},setRTodate:function(){this.setRange('todate');},setRangeUI:function(range,n){var $0=this.$3_0.length;for(var $1=0;$1<$0;$1++){if(dojo.attr(this.$3_0[$1],'name')===range){dojo.addClass(this.$3_0[$1],'Selected');dojo.addClass($(this.$3_0[$1]).find('.RDFDMButtonCheckmark').get(0),'Checked');}else{dojo.removeClass(this.$3_0[$1],'Selected');dojo.removeClass($(this.$3_0[$1]).find('.RDFDMButtonCheckmark').get(0),'Checked');}}switch(range){case 'lastn':this.rangeN=n;this.inputLastn.value=n;break;case 'nextn':this.rangeN=n;this.inputNextn.value=n;break;default:this.inputLastn.blur();this.inputNextn.blur();break;}}}
tab.RelativeDateFilterMobile=function(props){tab.RelativeDateFilterMobile.initializeBase(this,[props]);this.templateString=tab.RelativeDateFilterMobile.$4_0;this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.RelativeDateFilterMobile.prototype={parent:null,domBox:null,$4_1:null,div:null,domReadout:null,$4_2:null,get_inplaceMobile:function(){return this.$4_2;},set_inplaceMobile:function(value){this.$4_2=value;return value;},get_uniqueNodeId:function(){return this.domNode.id;},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.domBox:this.domBox;},postCreate:function(){this.getSID=ss.Delegate.create(this,function(){
return this.stateId;});this.initFromState();this.get_inplaceMobile().setupTouchHandler(this.div);this.$4_5();},initFromState:function(){this.$4_3(this.oFilter.text);this.updateCurrentStateOfData();this.setTitle();this.updateTitleBar();},onDestroy:function(){this.$4_6();this.inherited(arguments);},$4_3:function($p0){this.domReadout.innerHTML=$p0;},layout:function(){},onUpdateFromPopup:function(data){this.$4_4(data);},$4_4:function($p0){++this.stateId;var $0=tableau.util.findDirectParentByClassName(this.domDialog,'dijitPopup',dojo.body());if(!ss.isNullOrUndefined($0)){dojo.style($0,'zIndex','980');}},$4_5:function(){var $0={};$0.title=tableau.format.formatColumnDisplayName(this.oFilter);$0.inPlaceControl=this;$0.field=this.field;$0.oFilter=this.oFilter;$0.layoutSession=this.layoutSession;$0.zid=this.zid;$0.format=this.format;$0.attributes=this.attributes||{};$0.requestSetAttributes=this.requestSetAttributes;$0.session=this.session;$0.qf=this;var $1=tableau.mobile.widget.RelativeDateFilterPopup;this.get_inplaceMobile().createPopup($1,$0);this.get_inplaceMobile().connectPopup();this.get_inplaceMobile().get_popup().createControls();},$4_6:function(){this.get_inplaceMobile().disconnectPopup();this.get_inplaceMobile().destroyPopup();}}
tab.RelativeDateFilterPopup=function(popupParams,srcRefNode){tab.RelativeDateFilterPopup.initializeBase(this);}
tab.RelativeDateFilterPopup.prototype={params:null,postCreate:function(){this.set_content(new tableau.mobile.widget.RelativeDateFilterDialogMobile(this.params));(this.get_content()).placeAt(this.domContent,'after');this.inherited(arguments);(this.get_content()).layout();dojo.addClass(this.domNode,'RDFM');},prepareToShow:function(){(this.get_content()).prepareToShow();},destroy:function(){(this.get_content()).destroy();this.inherited(arguments);},getContentDimensions:function(availableHeight){this._layoutContainer.resize({h:330});return dojo.marginBox((this.get_content()).domNode);}}
tab.RelativeDatePickFilterMobile=function(oProps){tab.RelativeDatePickFilterMobile.initializeBase(this,[oProps]);this.templateString=tab.RelativeDatePickFilterMobile.$3_0;this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.RelativeDatePickFilterMobile.prototype={$3_1:null,parent:null,domBox:null,$3_2:null,get_inplaceMobile:function(){return this.$3_2;},set_inplaceMobile:function(value){this.$3_2=value;return value;},get_$3_3:function(){return this.get_inplaceMobile().get_popup();},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.domBox:this.domBox;},postCreate:function(){this.disposables=new tab.DisposableHolder();this.getSID=ss.Delegate.create(this,function(){
return this.stateId;});this.timestamp=new Date().getTime();this.initFromState();},initFromState:function(){var $0=tab.RelativeDatePickFilter.pickerDurations;var $1=tab.RelativeDatePickFilter.pickerStrings;var $2=null;this.disposables=new tab.DisposableHolder();this.currentRange=this.oFilter.table;this.currentAbbrev=this.toAbbrev(this.currentRange);this.domPicker.innerHTML='';var $3=tableau.format.formatColumnDisplayName(this.oFilter);dojo.attr(this.domTitleBar,'title',$3);if(this.hideEmptyTitlebar()){dojo.style(this.domTitleBar,'display','none');dojo.marginBox(this.domTitleBar,{h:0});}else{this.domTitleBar.innerHTML=this.titleHTML;}this.$3_1=[];var $4=$0.length;for(var $5=0;$5<$4;$5++){var $6=tab.$create_TupleStruct($1[$5],false,null);if(this.currentAbbrev===$0[$5]){$2=$1[$5];$6.s=true;}this.$3_1.push($6);}this.$3_5($2);this.layout();this.get_inplaceMobile().setupTouchHandler(this.domNode);this.createPopup(this.$3_1);},destroy:function(){this.disposables.dispose();this.get_inplaceMobile().disconnectPopup();this.get_inplaceMobile().destroyPopup();this.inherited(arguments);},createPopup:function(picks){var $0=tableau.mobile.widget.catmode.popup.ListPopup;var $1=tableau.format.formatColumnDisplayName(this.oFilter);var $2={};$2.listParams={};$2.listParams.listItems=picks;$2.listParams.isMultiValue=false;$2.title=$1;$2.qf=this;$2.listParams.itemFormatter=tableau.mobile.FilterItemMobile.formatListRowFilterItemHtml;this.get_inplaceMobile().createPopup($0,$2);this.get_inplaceMobile().connectPopup();this.get_$3_3().createControls();this.get_$3_3().get_list().add_dispatchItemsChanged(ss.Delegate.create(this,this.$3_4));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_$3_3().get_list().remove_dispatchItemsChanged(ss.Delegate.create(this,this.$3_4));})));},get_uniqueNodeId:function(){return this.id;},adjustLabelPickWidth:function(totalWidth){},$3_4:function($p0,$p1){if($p0.length<=0){return;}var $0=tab.RelativeDatePickFilter.pickerDurationsInteger;for(var $1=0;$1<$p0.length;$1++){if(!!$p0[$1].rowState){var $2=$p0[$1].rowIndex;this.$3_5(this.$3_1[$2].d);var $3=$0[$2];++this.stateId;tab.FilterClientCommands.doRelativeDateQuickFilter(this.session.get_visualId(),this.field,'day','lastn',$3);break;}}},$3_5:function($p0){if(ss.isValue($p0)){this.domPicker.innerHTML=tableau.format.escapeHTML($p0);}else{this.domPicker.innerHTML='';}}}
tab.SearchWidgetMobile=function(props,dom){tab.SearchWidgetMobile.initializeBase(this,[props,dom]);this.templateString=tab.SearchWidgetMobile.mobileTemplateString;}
tab.SearchWidgetMobile.prototype={list:null,lastQuery:'',$3_0:null,$3_1:null,add_hideUICalled:function(value){this.$3_2=ss.Delegate.combine(this.$3_2,value);},remove_hideUICalled:function(value){this.$3_2=ss.Delegate.remove(this.$3_2,value);},$3_2:null,add_onXButtonClickCalled:function(value){this.$3_3=ss.Delegate.combine(this.$3_3,value);},remove_onXButtonClickCalled:function(value){this.$3_3=ss.Delegate.remove(this.$3_3,value);},$3_3:null,add_attachItemsChangedHandlerCalled:function(value){this.$3_4=ss.Delegate.combine(this.$3_4,value);},remove_attachItemsChangedHandlerCalled:function(value){this.$3_4=ss.Delegate.remove(this.$3_4,value);},$3_4:null,get_$3_5:function(){return this;},get_list:function(){return this.list;},set_list:function(value){this.list=value;return value;},postCreate:function(){this.$3_0=new tab.DisposableHolder();this.$3_1=new tab.DisposableHolder();var $0=spiff.$create_EventHandleSpec();$0.potentialTap=ss.Delegate.create(this,this.onXButtonClick);this.$3_1.add(new spiff.TableauEventHandler(this.get_domXButton(),$0));var $1=spiff.$create_EventHandleSpec();$1.potentialTap=ss.Delegate.create(this,this.onSearchBusyImgClick);this.$3_1.add(new spiff.TableauEventHandler(this.domSearchBusyImg,$1));var $2=spiff.$create_EventHandleSpec();$2.potentialTap=ss.Delegate.create(this,this.onSearchButtonClick);this.$3_1.add(new spiff.TableauEventHandler(this.domSearchButton,$2));var $3=spiff.$create_EventHandleSpec();$3.potentialTap=ss.Delegate.create(this,this.onSearchAddButtonClick);this.$3_1.add(new spiff.TableauEventHandler(this.domSearchAddButton,$3));var $4=spiff.$create_EventHandleSpec();$4.potentialTap=ss.Delegate.create(this,function($p1_0){
this.onListItemClick($p1_0);});this.$3_1.add(new spiff.TableauEventHandler(this.domResults,$4));this.inherited(arguments);this.$3_0.add(spiff.EventUtil.bindWithDispose($(this.domQueryBox),'focus',ss.Delegate.create(this,this.testClick)));},postMixInProperties:function(){this.inherited(arguments);this.busy_gif_url=tableau.util.assetUrl('/javascripts/tableau/mobile/images/Snake16x16.gif');},testClick:function($p0){this.focusQueryBox();this.setQueryIconsVisibility(true);},focusQueryBox:function(){if(!tab.BrowserSupport.get_isSafari()){this.domQueryBox.focus();}},dispose:function(){this.$3_1.dispose();this.$3_0.dispose();},destroy:function(){this.dispose();this.inherited(arguments);},hideUI:function(){if(!this.get_isVisible()){return;}tab.SearchWidgetMobile.callBaseMethod(this, 'hideUI');if(!!this.list){this.list.destroy();this.list=null;}if(ss.isValue(this.$3_2)){this.$3_2();}},onXButtonClick:function(evt){if(!this._isTypeInList&&String.isNullOrEmpty(this.getQuery())){this.hideUI();}else{this.clearSearch();}if(!!this.list){this.$3_0.dispose();this.$3_0=new tab.DisposableHolder();this.list.destroy();this.list=null;}if(ss.isValue(this.$3_3)){this.$3_3();}},clearSearch:function(preserveQueryBoxText,noFocus){this.lastQuery='';tab.SearchWidgetMobile.callBaseMethod(this, 'clearSearch',[preserveQueryBoxText,noFocus]);},addManualSearchItems:function(items){var $0=[];if(this.get_qf().get_dijitDeclaredClass()!=='tableau.mobile.widget.CategoricalFilterMobile'){return;}if(tab.MiscUtil.isNullOrUndefined(items)){items=this.getQuery().split('\n');}if(tab.MiscUtil.isNullOrEmpty(items)){return;}for(var $1=0,$2=items.length;$1<$2;$1++){var $3=items[$1];if(!tab.MiscUtil.isNullOrEmpty($3)){$0.push(tab.$create_TupleStruct($3,true,[tab.$create_DataValueStruct('s',$3)]));}var $4={};$4.schema=this.get_qf().get_oFilter().table.schema;$4.tuples=$0;this.notifyParentFilterOfChanged($4,true);this.clearSearch();}},fixQueryWidth:function(){},setQueryIconsVisibility:function(initialLoad){var $0=this._isTypeInList;var $1=(initialLoad)?false:!!this.list;var $2=(!String.isNullOrEmpty(this.getQuery())&&$0&&!$1);var $3=$2;var $4=true;var $5;if(!!this.get_qf()&&$0){$4=this.get_qf().get_oFilter().is_searchable;}$5=($2&&$4);dojo.style(this.domSearchBusyImg,'display',($5&&this._bSearching)?'block':'none');dojo.style(this.domSearchButton,'display',($5&&!this._bSearching)?'block':'none');dojo.style(this.domSearchAddButton,'display',($3)?'block':'none');var $6=($0&&!$1)?'none':'block';dojo.style(this.get_domXButton(),'display',$6);this.fixQueryWidth();},searchWithQuery:function(query){this.lastQuery=query;this.inherited(arguments);},doCategoricalSearch:function(query){var $0=this.get_qf().get_oFilter();var $1=[];var $2=function($p1_0,$p1_1,$p1_2){
$1.push($p1_2);return $p1_0;};var $3={};$3.tuples=tab.LocalSearch.findMatches(query,$0,ss.Delegate.create(this,this.formatTuple),$2);$3.indices=$1;return $3;},handleSearchResults:function(data){this.set_oResults(data);this.showSearchSpinner(false);if(!!data&&data.dojoType==='cancel'){return;}this.domResults.innerHTML='';var $0={};if(ss.isValue(data.tuples)){$0.indices=data.indices;$0.listItems=data.tuples;}else{$0.listItems=data;}this.resultCount=$0.listItems.length;if(!!this.list){this.list.destroy();this.list=null;}$0.isMultiValue=!this.get_qf().isSingleSelect();$0.isWide=ss.isValue(tab.FilterItemUtil.getClassElement(this.domNode.parentNode,'Wide'));$0.isSearchWidget=true;if(!this.resultCount){var $1=tab.$create_TupleStruct(this.NO_MATCHES,false,[tab.$create_DataValueStruct('s',this.NO_MATCHES)]);var $2=[$1];$0.listItems=$2;$0.isMsgOnly=true;}$0.filter=this.get_qf();$0.itemFormatter=tableau.mobile.FilterItemMobile.formatListRowFilterItemHtml;this.list=tab.ScrollingList.createScrollingList($0);this.placeList();this.attachItemsChangedHandler(this.list);this.get_$3_5().setupScrollListener(this.list.iscrollObj);this.setQueryIconsVisibility(false);},placeList:function(){this.list.placeAt(this.domResults,'after');},handleSearchResultsError:function(response){},update:function(qf){this.set_qf(qf);if(!!this.lastQuery){this.searchWithQuery(this.lastQuery);}},$3_6:function($p0,$p1){var $0=this.get_oResults();var $1={};$1.schema=$0.schema;$1.tuples=[];var $2=$0.tuples;if($p0.length<1){return;}for(var $3=0;$3<$p0.length;$3++){var $4=$p0[$3].rowIndex;if($p0[$3].rowState&&!$2[$4].s){$2[$4].s=true;$1.tuples.push($2[$4]);}else if(!$p0[$3].rowState&&$2[$4].s){$2[$4].s=false;$1.tuples.push($2[$4]);}}if(!!$1.tuples.length){this.notifyParentFilterOfChanged($1,false,false);}},_applyChangesHier:function(){var $0={};$0.schema=this.get_oResults().schema;$0.tuples=[];var $1=this.get_oResults().tuples;for(var $2=0,$3=$1.length;$2<$3;$2++){var $4=this.list.getRowAtIndex($2);this.recordCheckedChanges($0,$4,$1[$2]);}return $0;},recordCheckedChanges:function(changedList,item,tuple){if(this.list.isSelectedRow(item)&&!tuple.s){tuple.s=true;changedList.tuples.push(tuple);}else if(!this.list.isSelectedRow(item)&&tuple.s){tuple.s=false;changedList.tuples.push(tuple);}},attachItemsChangedHandler:function(refArg){if(this._isTypeInList){this.list.add_dispatchItemsChanged(ss.Delegate.create(this,this.$3_6));this.$3_0.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.list.remove_dispatchItemsChanged(ss.Delegate.create(this,this.$3_6));})));}if(ss.isValue(this.$3_4)){this.$3_4(refArg);}},applyChanges:function(){var $0=null;if(this.get_qf().get_dijitDeclaredClass()==='tableau.mobile.widget.CategoricalFilter'&&!this._isTypeInList){$0=this.applyChangesCat();}else{$0=this.applyChangesHierOrTypeIn();}this.notifyParentFilterOfChanged($0);},notifyParentFilterOfChanged:function(changed,manualAdd,noServerCall){if(!changed.tuples.length){return;}this.get_qf().updateStateFromSearch(changed);if(noServerCall){return;}this.get_qf().set_stateId(this.get_qf().get_stateId()+1);if(manualAdd){var $0=ss.Delegate.create(this,this.onManualAddSuccess);this.get_qf().get_session().addManualFilterItems(changed,this.get_qf(),$0);}else{var $1=this._isTypeInList&&this.get_qf().get_oFilter().all;if($1||this.get_qf().isSingleSelect()){this.doSetCategoricalFilter($1,changed);}else{this.doModifyCategoricalFilter(changed);}}}}
tab.FilteringSearchWidgetMobile=function(props,dom,updateListInPopover){tab.FilteringSearchWidgetMobile.initializeBase(this,[props,dom]);this.templateString=tab.SearchWidgetMobile.mobileTemplateString;this.$3_7=updateListInPopover;}
tab.FilteringSearchWidgetMobile.prototype={$3_7:null,get_$3_8:function(){return this.get_qf();},clearSearch:function(){this.resultCount=tab.SearchWidgetBase.noSearchPerformed;this.setQuery('');tab.FilteringSearchWidgetMobile.callBaseMethod(this, 'clearSearch');this.get_$3_8().filterBySearchResults(null);},placeList:function(){this.$3_7(this.get_list());}}
tab.ScrollingListRow=function(parameters,srcRefNode){this.rowIndex=-1;this.templateString='<div dojoAttachPoint="_listRow" class="ListRow ${extraClass}" '+'data-uniqueid="${uniqueId}" data-rowIndex="${rowIndex}">'+'<div class="facet">${facet}</div>'+'<div dojoAttachPoint="_check" class="checkArea">&nbsp;</div>'+'<div class="labelArea" style="margin-left: 28px;">${label}</div>'+'</div>';tab.ScrollingListRow.initializeBase(this);this.extraClass=parameters.extraClass||'';this.checked=(parameters.checked||false);this.label=parameters.formattedLabel||'';this.isWide=parameters.bIsWide;this.facet=parameters.bFacet||'';}
tab.ScrollingListRow.prototype={checked:false,widgetsInTemplate:false,uniqueId:'',extraClass:'',label:'',isWide:false,facet:'',_listRow:null,getUniqueId:function(){var $0=dojo.attr(this.domNode,'data-uniqueid');return $0;},postCreate:function(){this.setState(this.checked);if(!!this.isWide){dojo.addClass(this._listRow,'Wide');}},getValue:function(){return null;},setState:function(state){this.checked=state;dojo.toggleClass(this._listRow,'checked',state);},toggleState:function(){this.checked=!this.checked;dojo.toggleClass(this._listRow,'checked',this.checked);},isSelected:function(){return this.checked;},isAll:function(){return this.extraClass==='rowAll';}}
tab.SharePopup=function(facebookClickAction,twitterClickAction,mailClickAction){tab.SharePopup.initializeBase(this,[$('<div>').addClass('share-popup')]);spiff.GlobalTouchWatcher.add_potentialTap(ss.Delegate.create(this,this.hide));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
spiff.GlobalTouchWatcher.remove_potentialTap(ss.Delegate.create(this,this.hide));})));this.$1_1(facebookClickAction,'Facebook','facebook');this.$1_1(twitterClickAction,'Twitter','twitter');this.$1_1(mailClickAction,'Mail','mail');}
tab.SharePopup.prototype={hide:function(e,cancelCallback){this.get_element().hide();},show:function(){if(this.get_element().offset().top<0){this.get_element().css('height',String.format('{0}px',this.get_element().height()));tab.DomUtil.setElementPosition(this.get_element(),this.get_element().offset().left,0);}this.get_element().show();},$1_1:function($p0,$p1,$p2){var $0=String.format("<div class='share-popup-tap-area'>\n<div class='share-popup-title'>{0}</div>\n<div class='share-popup-icon tab-icon-{1}-popup'></div>\n</div>",$p1,$p2);var $1=$($0);this.disposables.add(spiff.ClickHandler.targetAndClick($1,$p0));this.get_element().append($1);}}
tab.SingleSliderMobile=function(param){this.templateString="<div dojoAttachPoint='_singleSliderWrapper' class='singleSliderWrapper'>"+"<div dojoAttachPoint='_marksStrip' class='sliderMarksStrip'></div>"+"<div dojoAttachPoint='_singleSliderThumbtrackRailWrapper' class='sliderThumbtrackRailWrapper'>"+"<div dojoAttachPoint='_singleSliderThumbtrackRail' class='sliderThumbtrackRail'>"+"<div id='handleWrapper' dojoAttachPoint='_sliderThumbTrack' class='thumbtrackWrapper'>"+"<div id='left' dojoAttachPoint='_sliderThumbTrackImage' class='thumbtrack'></div>"+'</div>'+"<div dojoAttachPoint='_completedRail' class='sliderRangeRail'></div>"+'</div>'+'</div>'+"<div id='leftButton' dojoAttachPoint='_leftButton' class='leftButtonWrapper' style='margin-top:8px;'>"+"<div class='leftButton' style='margin:10px 0 0 14px'></div>"+'</div>'+"<div id='rightButton' dojoAttachPoint='_rightButton' class='rightButtonWrapper' style='margin-top:8px;'>"+"<div class='rightButton' style='margin:10px 0 0 14px'></div>"+'</div>'+'</div>';this.$1_5=-5;this.$1_F=[];tab.SingleSliderMobile.initializeBase(this);this.$1_2=param.bShowArrows;this.$1_13=param.bShowSlider;this.$1_0=param.length;this.isPercentageMode=param.isPercentageMode;this.currentValue=(this.isPercentageMode)?param.currentValue:param.currentlySelected;}
tab.SingleSliderMobile.prototype={widgetsInTemplate:true,_sliderThumbTrack:null,_sliderThumbTrackImage:null,_singleSliderThumbtrackRail:null,_completedRail:null,_leftButton:null,_rightButton:null,_marksStrip:null,_singleSliderWrapper:null,_singleSliderThumbtrackRailWrapper:null,$1_0:0,$1_1:false,$1_2:false,currentValue:0,$1_3:0,$1_4:0,$1_6:0,$1_7:0,$1_8:0,$1_9:0,$1_A:0,$1_B:0,$1_C:0,$1_D:0,$1_E:0,$1_10:null,$1_11:null,$1_12:null,$1_13:false,isPercentageMode:false,$1_14:false,$1_15:0,add_onPopupSliderChange:function(value){this.$1_16=ss.Delegate.combine(this.$1_16,value);},remove_onPopupSliderChange:function(value){this.$1_16=ss.Delegate.remove(this.$1_16,value);},$1_16:null,add_onPopupSliderDragEnd:function(value){this.$1_17=ss.Delegate.combine(this.$1_17,value);},remove_onPopupSliderDragEnd:function(value){this.$1_17=ss.Delegate.remove(this.$1_17,value);},$1_17:null,startup:function(){this.setupSliderComponents();},setupSliderComponents:function(){if(this.$1_13){var $0=parseInt(dojo.style(this._sliderThumbTrack,'width'));this.$1_6=-Math.round($0/2);$0=parseInt(dojo.style(this._singleSliderThumbtrackRail,'width'));this.$1_7=$0-Math.abs(this.$1_6);this.$1_8=$0;this.$1_E=this.$1_8/(this.$1_0-1);if(!this.isPercentageMode){this.addMarksToSlider();}var $1=this.convertIndexToPixels(this.currentValue);this.setSliderPosition($1);this.$1_B=$1;this.$1_D=this.getCurrentPostionAsMark($1);this.$1_C=this.$1_D;}else{this.$1_D=this.currentValue;this.$1_C=this.$1_D;dojo.addClass(this._completedRail,'HFButtonHide');dojo.addClass(this._singleSliderThumbtrackRail,'HFButtonHide');dojo.addClass(this._marksStrip,'HFButtonHide');}if(this.$1_2){dojo.addClass(this._singleSliderWrapper,'Wide');this.updateButtons();}else{dojo.addClass(this._leftButton,'hide');dojo.addClass(this._rightButton,'hide');}this.enableTouchHandling();},getElementRailX:function(containerNode){var $0;var $1;var $2;$0=tab.DomUtil.getElementRelativePosition($(this._singleSliderThumbtrackRail),$(containerNode)).x;$0=$0*tableau.mobile.util.scaling.getZoomScaleFactor();$1=tab.DomUtil.getElementClientPosition($(containerNode)).x;$1=$1*tableau.mobile.util.scaling.getZoomScaleFactor();$2=$1+$0;return parseInt($2);},getRailX:function(){if(ss.isValue(this.$1_11)){return this.getElementRailX(this.$1_11.containerNode);}else{return this.getElementRailX(this.$1_12);}},shortTapSliderRail:function(e){var $0=this.getRailX();var $1=e.clientX*tableau.mobile.util.scaling.getZoomScaleFactor();var $2=($1-$0-Math.abs(this.$1_6));this.$1_B=this.snapToMark(parseInt($2));if(this.$1_B<this.$1_6){this.$1_B=this.$1_6;}if(this.$1_B>this.$1_7){this.$1_B=this.$1_7;}dojo.style(this._sliderThumbTrack,'left',this.$1_B+'px');if(this.$1_B<0){dojo.style(this._completedRail,'width','0px');}else{dojo.style(this._completedRail,'width',this.$1_B+'px');}this.$1_D=this.getCurrentPostionAsMark(this.$1_B);if(ss.isValue(this.$1_10)){this.killTimer();}this.setTimer();if(ss.isValue(this.$1_16)){this.$1_16(this.$1_D,false);}if(ss.isValue(this.$1_17)){this.$1_17(this.$1_D);}this.updateButtons();},shortTapButton:function(e){var $0;if(e.currentTarget.id===this._leftButton.id){if(this.$1_D-1>=0){this.$1_D--;this.updateButtons();if(this.$1_13){$0=this.convertIndexToPixels(this.$1_D);dojo.style(this._sliderThumbTrack,'left',$0+'px');this.$1_B=$0;if($0<0){$0=0;}dojo.style(this._completedRail,'width',$0+'px');}if(ss.isValue(this.$1_16)){this.$1_16(this.$1_D,false);}if(ss.isValue(this.$1_17)){this.$1_17(this.$1_D);}if(ss.isValue(this.$1_10)){this.killTimer();}this.setTimer();}}else if(e.currentTarget.id===this._rightButton.id){if(this.$1_D+1<this.$1_0){this.$1_D++;this.updateButtons();if(this.$1_13){$0=this.convertIndexToPixels(this.$1_D);dojo.style(this._sliderThumbTrack,'left',$0+'px');this.$1_B=$0;if($0<0){$0=0;}dojo.style(this._completedRail,'width',$0+'px');}if(ss.isValue(this.$1_16)){this.$1_16(this.$1_D,false);}if(ss.isValue(this.$1_10)){this.killTimer();}this.setTimer();}}},drag:function(pageX,railX){pageX=pageX*tableau.mobile.util.scaling.getZoomScaleFactor();var $0=pageX-railX-Math.abs(this.$1_6);this.$1_B=this.snapToMark($0);if(this.$1_B<this.$1_6){this.$1_B=this.$1_6;}if(this.$1_B>this.$1_7){this.$1_B=this.$1_7;}dojo.style(this._sliderThumbTrack,'left',this.$1_B+'px');if(this.$1_B<0){dojo.style(this._completedRail,'width','0px');}else{dojo.style(this._completedRail,'width',this.$1_B+'px');}this.$1_D=this.getCurrentPostionAsMark(this.$1_B);this.updateButtons();if(ss.isValue(this.$1_16)){this.$1_16(this.$1_D,false);}},addMarksToSlider:function(){this.$1_3=this.$1_8/(this.$1_0-1);if(this.$1_3<5){this.$1_14=true;return;}else{this.$1_14=false;}var $0=document.createElement('div');dojo.addClass($0,'rulerMark');this._marksStrip.appendChild($0);$0=document.createElement('div');dojo.addClass($0,'rulerMark');dojo.style($0,'left',dojo.style(this._marksStrip,'width')+'px');this._marksStrip.appendChild($0);for(var $1=1;$1<=(this.$1_0-2);$1++){$0=document.createElement('div');dojo.addClass($0,'rulerMark');dojo.style($0,'left',Math.round($1*this.$1_3)+'px');this._marksStrip.appendChild($0);}},getCurrentPostionAsMark:function(xPos){var $0=xPos+Math.abs(this.$1_6);return Math.round($0/this.$1_E);},convertIndexToPixels:function(index){if(this.$1_13){var $0=Math.round(index*this.$1_E)-Math.abs(this.$1_6);if($0<this.$1_6){$0=this.$1_6;}else if($0>this.$1_7){$0=this.$1_7;}return $0;}return undefined;},snapToMark:function(xPos){if(!this.isPercentageMode){var $0=(xPos/tableau.mobile.util.scaling.getZoomScaleFactor())+Math.abs(this.$1_6);var $1=Math.round($0/this.$1_E);var $2=Math.round(this.$1_E*$1)-Math.abs(this.$1_6);return $2;}else{return xPos;}},setTimer:function(){this.$1_10=window.setTimeout(ss.Delegate.create(this,this.timerCallback),1000);},killTimer:function(){if(this.$1_10!=null){window.clearTimeout(this.$1_10);this.$1_10=null;}},timerCallback:function(){if(this.$1_D!==this.$1_C){this.$1_C=this.$1_D;if(ss.isValue(this.$1_16)){this.$1_16(this.$1_D,true);}}},updateButtons:function(){if(this.$1_0>1){dojo.removeClass(this._rightButton,'disabled');dojo.removeClass(this._leftButton,'disabled');if(this.$1_2){if(this.$1_D===this.$1_0-1){dojo.addClass(this._rightButton,'disabled');}else if(!this.$1_D){dojo.addClass(this._leftButton,'disabled');}}}else{dojo.addClass(this._rightButton,'disabled');dojo.addClass(this._leftButton,'disabled');}},setSliderIndex:function(index){var $0=this.convertIndexToPixels(index);this.setSliderPosition($0);if(ss.isValue(this.$1_16)){this.$1_16(index,true);}this.$1_D=this.$1_C=index;this.updateButtons();},setSliderPosition:function(pixelPosition){if(pixelPosition>=this.$1_6&&pixelPosition<=this.$1_7){dojo.style(this._sliderThumbTrack,'left',pixelPosition+'px');this.$1_B=pixelPosition;if(pixelPosition<0){pixelPosition=0;}dojo.style(this._completedRail,'width',pixelPosition+'px');}},enableTouchHandling:function(){if(this.$1_0>1){if(this.$1_13){var $0=spiff.$create_EventHandleSpec();$0.dragMove=ss.Delegate.create(this,this.onDrag);$0.dragStart=ss.Delegate.create(this,this.onDragStart);$0.dragEnd=ss.Delegate.create(this,this.onDragEnd);var $1=spiff.$create_EventHandleSpec();$1.tap=ss.Delegate.create(this,this.shortTapSliderRail);this.$1_F.push(new spiff.TableauEventHandler(this._sliderThumbTrack,$0));this.$1_F.push(new spiff.TableauEventHandler(this._sliderThumbTrackImage,$0));this.$1_F.push(new spiff.TableauEventHandler(this._singleSliderThumbtrackRail,$1));this.$1_F.push(new spiff.TableauEventHandler(this._singleSliderThumbtrackRailWrapper,$1));}if(this.$1_2){var $2=spiff.$create_EventHandleSpec();$2.firstTouch=ss.Delegate.create(this,this.shortTapButton);this.$1_F.push(new spiff.TableauEventHandler(this._leftButton,$2));var $3=spiff.$create_EventHandleSpec();$3.firstTouch=ss.Delegate.create(this,this.shortTapButton);this.$1_F.push(new spiff.TableauEventHandler(this._rightButton,$3));var $4=spiff.$create_EventHandleSpec();$4.doubleTap=function($p1_0){
$p1_0.preventDefault();};this.$1_F.push(new spiff.TableauEventHandler(this._leftButton,$4));this.$1_F.push(new spiff.TableauEventHandler(this._rightButton,$4));}}},onTap:function(e){},onDragStart:function(e){this.$1_15=this.getRailX();if(ss.isValue(this.$1_10)){this.killTimer();}},onDrag:function(e){this.drag(e.pageX,this.$1_15);e.preventDefault();},onDragEnd:function(e){if(ss.isValue(this.$1_17)){this.$1_17(this.$1_D);}if(ss.isValue(this.$1_10)){this.killTimer();}this.setTimer();},setParent:function(parentObj){this.$1_11=parentObj;},setParentContainerNode:function(parentNode){this.$1_12=parentNode;},destroy:function(){this.killTimer();var $enum1=ss.IEnumerator.getEnumerator(this.$1_F);while($enum1.moveNext()){var $0=$enum1.current;$0.dispose();}this.$1_F=[];this.inherited(arguments);}}
tab.SliderDojo=function(){}
tab.SliderMobile=function(targetDiv,attrs,isAll,doUpdateFunc,getTitleOffsetFunc,getCurrentTextFunc,onIntermediateChangeFunc,getCurrentFacetFunc,showFacets){this.$0=['show-readout','hide-readout'];this.$1=['show-slider','hide-slider'];this.$2=['show-step-btns','hide-buttons'];this.$3=['show-ticks','hide-ticks'];this.$10=targetDiv;this.$F=attrs;this.$C=isAll;this.$A=getTitleOffsetFunc;this.$B=getCurrentTextFunc;this.onIntermediateChange=onIntermediateChangeFunc;this.$E=getCurrentFacetFunc||function(){
return null;};this.$D=showFacets;dojo.addClass(this.$10,'tableauWidgetUiSliderMobile');this.currentlySelected=-1;this.numValues=0;}
tab.SliderMobile.prototype={styleid:0,$4:null,currentlySelected:0,numValues:0,$5:null,$6:null,slider:null,$7:false,readout:null,$8:null,$9:null,$A:null,tooltipTimer:0,shouldShowTooltip:false,$B:null,$C:false,doUpdate:null,onIntermediateChange:null,$D:false,$E:null,$F:null,$10:null,shouldShow:function($p0){return (this.$F[$p0[0]]!=='false'&&this.$F[$p0[1]]!=='true');},calculateStyleID:function(){this.styleid=0;if(!this.shouldShow(this.$0)){this.styleid+=4;}if(!this.shouldShow(this.$1)){this.styleid+=2;}this.styleid+=1;if(this.styleid>5){this.styleid=3;}},destroy:function(){dojo.unsubscribe(this.$5);dojo.unsubscribe(this.$6);if(ss.isValue(this.slider)&&(typeof(this.slider.destroy)==='function')){this.slider.destroy();}if(ss.isValue(this.$4)&&(typeof(this.$4.destroy)==='function')){this.$4.destroy();}},instantiateFromDomain:function(domain,current){var $0=[];var $1=domain.length;for(var $2=0;$2<$1;$2++){$0[$2]=tab.$create_TupleStruct(domain[$2],current===domain[$2],new Array(0));}this.$11($0,null);},$11:function($p0,$p1){var $0=-1;var $1=tab.Strings.QuickFilterUnknown;var $2=null;if($p0.length>0){var $3=$p0.length;for(var $4=0;$4<$3;$4++){if(!!$p0[$4].s&&!this.$C){if($0>-1){$1=tab.Strings.QuickFilterMultipleValues;}else{$0=$4;$1=this.$B($4);}}}}if($0<0){$0=0;if(ss.isValue($p1)){$1=$p1;}}$2=this.$E($0);this.instantiate($p0.length,$0,$1,$2);},instantiate:function(numValues,currentlySelectedArg,initialText,facet){var $0=null;this.numValues=numValues;this.currentlySelected=currentlySelectedArg;this.calculateStyleID();if(this.shouldShow(this.$0)){this.readout=document.createElement('div');dojo.addClass(this.readout,'sliderTextReadout');dojo.addClass(this.readout,'tab-ctrl-formatted-fixedsize');this.$8=document.createElement('div');dojo.addClass(this.$8,'sliderText');this.$8.innerHTML=tableau.format.escapeHTML(initialText);if(this.$D){this.$9=document.createElement('div');dojo.addClass(this.$9,'facet');this.$9.innerHTML=tableau.format.escapeHTML(facet);this.readout.appendChild(this.$9);}this.readout.appendChild(this.$8);this.$10.appendChild(this.readout);}if(this.styleid===3){return;}var $1=document.createElement('div');if(this.shouldShow(this.$1)){$0=document.createElement('div');$1.appendChild($0);}this.$10.appendChild($1);if(numValues<1){numValues=1;}this.$7=(!isFinite(numValues));if(this.shouldShow(this.$1)&&numValues<1200&&this.shouldShow(this.$3)){var $3={count:numValues};this.$4=new dijit.form.HorizontalRule($3,$0);}var $2=tab.$create_SliderParams();$2.templateString=tab.Slider.tableauSliderTemplate;$2.onChange=function(){
};$2.value=this.currentlySelected;$2.slideDuration=0;$2.intermediateChanges=true;$2.showButtons=false;$2.pageIncrement=1;$2._onBarClick=function(){
};$2._onHandleClick=function(){
};if(isFinite(numValues)){$2.minimum=0;$2.maximum=numValues-1;$2.discreteValues=numValues;}this.slider=new tableau.mobile.widget.ui.SliderDojoMobile($2,$1);this.slider.startup();if(ss.isValue(this.$4)){this.$4.startup();}this.$13();},refreshSliderMarksForIE:function(){if(dojo.isIE<=7){if(ss.isValue(this.$4)){this.$4.domNode.className=this.$4.domNode.className+' ';}}},setNewState:function(newSelected){this.currentlySelected=newSelected;if(ss.isValue(this.slider)){this.slider._setValueAttr(this.currentlySelected);}this.refreshSliderMarksForIE();},$12:function($p0){var $0;if(ss.isNullOrUndefined($p0)||isNaN($p0)){return 0;}if(this.$7){$0=$p0;}else{$0=parseInt($p0.toString(),10);}if($0<0){$0=0;}return $0;},updateByIndex:function($p0){if(ss.isValue(this.slider)){this.slider._setValueAttr(this.$12($p0));}this.updateReadout(this.$B($p0));},updateReadout:function(text){if(this.styleid<4){this.readout.innerHTML=text;}},$13:function(){if(!this.shouldShow(this.$1)){dojo.addClass(this.$10,'HideSlider');}if(this.styleid>3){dojo.style(this.$10,'height','15px');}},layout:function(){var $0=34;var $1=dojo.marginBox(this.$10).h;var $2=parseInt(dojo.style(this.$10,'width'),10);if($2<$0){return;}if(ss.isValue(this.readout)){dojo.style(this.readout,'width','');dojo.style(this.readout,'float','none');}if(ss.isValue(this.slider)){dojo.style(this.slider.tableauSlider,'width','');dojo.style(this.slider.tableauSlider,'float','none');}if(ss.isValue(this.$4)&&(this.$4.count*2>$2)){dojo.style(this.$4.domNode,'display','none');}if($1<38&&this.styleid<=1){var $3=(!this.styleid)?($2-$0):$2;$3=Math.floor(($3-14)/2);dojo.style(this.readout,'width',$3+'px');dojo.style(this.slider.tableauSlider,'width',$3+'px');dojo.style(this.readout,'float','left');dojo.style(this.slider.tableauSlider,'float','left');}else if(!this.styleid||this.styleid===4){dojo.style(this.slider.tableauSlider,'width',$2-$0+'px');}else if(this.styleid===1||this.styleid===5){dojo.style(this.slider.tableauSlider,'width',$2+'px');}else if(this.styleid===2){dojo.style(this.readout,'width',$2-$0-4+'px');}}}
tab.SliderMobileCatmode=function(parent,div,attrs){tab.SliderMobileCatmode.initializeBase(this,[parent,div,attrs]);this.set_inplaceMobile(new tab.InplaceMobilePopup(this));}
tab.SliderMobileCatmode.prototype={$2_0:false,$2_1:null,$2_2:null,$2_3:null,domNode:null,domBox:null,$2_4:null,get_inplaceMobile:function(){return this.$2_4;},set_inplaceMobile:function(value){this.$2_4=value;return value;},get_uniqueNodeId:function(){return this.parent.id;},get_popup:function(){return this.get_inplaceMobile().get_popup();},get_domNodeElement:function(){return this.domNode;},get_domBoxElement:function(){return (ss.isValue(this.parent))?this.parent.get_domBox():this.domBox;},instantiate:function(tuples,itemName,facet){var $0=tab.FilterItemUtil.isAllOrAllChecked(this.parent);this.$2_2=new tab.DisposableHolder();this.$2_1=tuples;if(this.shouldUseAllItem()){this.$2_1.unshift(tab.$create_TupleStruct(tab.Strings.QuickFilterAll,$0,[tab.$create_DataValueStruct('i',facet)]));}this.$2_3=new tableau.mobile.widget.ui.SliderMobile(this.div,this.attributes,$0,ss.Delegate.create(this,this.updateViz),ss.Delegate.create(this.parent,this.parent.getTitleOffset),ss.Delegate.create(this,this.getCurrentText),ss.Delegate.create(this,this.onIntermediateChange),ss.Delegate.create(this,this.getCurrentFacet),this.parent.get_oFilter().showFacets);var $1=this.$2_5(this.$2_1,this.getSummaryText(),$0,this.parent.get_oFilter().showFacets);this.$2_3.$11(this.$2_1,this.getSummaryText());this.get_inplaceMobile().setupTouchHandler(this.div);this.createPopup($1);},$2_5:function($p0,$p1,$p2,$p3){var $0={};$0.initialText=tab.Strings.QuickFilterUnknown;$0.currentlySelected=-1;if($p0.length>0){var $1=$p0.length;for(var $2=0;$2<$1;$2++){if(!!$p0[$2].s&&!$p2){if($0.currentlySelected>-1){$0.initialText=tab.Strings.QuickFilterMultipleValues;}else{$0.currentlySelected=$2;$0.initialText=this.formatTuple($p0[$2]);}}}}if($0.currentlySelected<0||this.$2_0){$0.currentlySelected=0;if(ss.isValue($p1)){$0.initialText=$p1;}}$0.showFacets=$p3;$0.facet=this.getCurrentFacet($0.currentlySelected);$0.length=$p0.length;return $0;},destroy:function(){this.$2_2.dispose();this.get_inplaceMobile().disconnectPopup();this.get_inplaceMobile().destroyPopup();},createPopup:function($p0){var $0=tableau.mobile.widget.catmode.popup.CategoricalSliderPopup;var $1=tableau.format.formatColumnDisplayName(this.parent.get_oFilter(),false);var $2={};$2.attributes=this.attributes;$2.initValues=$p0;$2.title=$1;$2.mode='slider';$2.qf=this.parent;$2.hasAllValue=this.shouldUseAllItem();$2.catIsHier=this.$2_0;$2.hasExtraControls={exclInclOnly:true};this.get_inplaceMobile().createPopup($0,$2);this.get_inplaceMobile().connectPopup();this.get_popup().setParent(this);this.get_popup().add_onPopupSliderChange(ss.Delegate.create(this,this.$2_6));this.$2_2.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_popup().remove_onPopupSliderChange(ss.Delegate.create(this,this.$2_6));})));this.get_inplaceMobile().get_popup().createControls();},$2_6:function($p0,$p1){var $0=this.getCurrentText($p0);var $1=this.getCurrentFacet($p0);this.get_popup().updateReadout($0,$1);if(!!$p1){this.updateViz($p0);}},layout:function(contentSize,horizontalLayout){this.inherited(arguments);},showOrHide:function($p0,$p1){dojo.style($p0,'display',(($p1)?'':'none'));},onSmallSearchUI:function(searchIsOn,searchDiv){var $0=false;var $1=this.$2_3;if($1.styleid===2||$1.styleid===4){this.showOrHide($1.slider.decrementButton,$0);this.showOrHide($1.slider.incrementButton,$0);}if($1.styleid===3){this.showOrHide($1.$10,$0);dojo.style(searchDiv,'marginBottom','2px');}else if($1.styleid<3){this.showOrHide($1.readout,$0);}else{this.showOrHide($1.slider.tableauSlider,$0);}},getRealIndex:function($p0){if(ss.isNullOrUndefined($p0)||isNaN($p0)){return 0;}var $0=parseInt($p0.toString(),10);if($0<0){$0=0;}return $0;},updateViz:function($p0){var $0={schema:this.parent.get_oFilter().table.schema,tuples:[]};var $1=[];var $2=this.getRealIndex($p0);if(this.shouldUseAllItem()&&!$2){this.parent.doSelectAll(true);return;}this.$2_1[$2].s=true;($0['tuples']).add(this.$2_1[$2]);var $3=(this.$2_1[$2].d||this.$2_1[$2].t[0].v);$1.push($3);this.parent.set_stateId(this.parent.get_stateId()+1);tab.FilterClientCommands.setCategoricalFilterValues(this.parent.get_session().get_visualId(),this.parent.get_field(),'filter-replace',$1);},onIntermediateChange:function(){if(this.parent.get_searchWidget().get_isVisible()){this.parent.get_searchWidget().toggleUI();}},getCurrentText:function($p0){var $0=this.getRealIndex($p0);var $1=this.$2_1[$0];return this.formatTuple($1);},getCurrentFacet:function($p0){var $0=this.getRealIndex($p0);var $1=this.$2_1[$0];return tableau.format.formatTupleDisplayFacet($1,true,this.parent.get_oFilter().role);}}
tab.TiledViewerRegionMobile=function(regionPart,domNode,session,allowPanZoom,sheetID,viewModel){tab.TiledViewerRegionMobile.initializeBase(this,[regionPart,domNode,session,allowPanZoom,sheetID,viewModel]);this.$1_1=$('.tvMScrolledNode',domNode);this.$1_2=$('.tvimagesContainer',domNode);if(regionPart==='viz'){if(!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.lassoSelection)){this.set_defaultPointerToolMode('lassoSelect');}else if(!!tab.FeatureParamsLookup.getBool(tab.FeatureParam.radialSelection)){this.set_defaultPointerToolMode('radialSelect');}else{this.set_defaultPointerToolMode('pan');}this.set_currentPointerToolMode(this.get_defaultPointerToolMode());this.makeDomDrag();this.get_shapeSelector().createDomAndAppend(this.$1_1);this.get_shapeSelector().get_dom().css('z-index','16');this.setPointerToolMode(this.get_currentPointerToolMode());}this.$1_E();}
tab.TiledViewerRegionMobile.prototype={$1_1:null,$1_2:null,$1_3:null,destroy:function(){this.$1_1.empty();this.$1_1=null;this.$1_2.empty();this.$1_2=null;tab.TiledViewerRegionMobile.callBaseMethod(this, 'destroy');},setGeometry:function(regionGeometry,viewSize,tileSize){tab.TiledViewerRegionMobile.callBaseMethod(this, 'setGeometry',[regionGeometry,viewSize,tileSize]);this.$1_1.width(regionGeometry.w);this.$1_1.height(regionGeometry.h);(this.scroller).refresh();},setScroller:function(newScroller){this.scroller=newScroller;},$1_4:function($p0){this.get_shapeSelector().show();var $0=$p0.get_gestureInfo();this.get_shapeSelector().dragStarted($0.startX,$0.startY,tab.RecordCast.dojoCoordsAsRectXY(this.getLocalOffset(true)));},$1_5:function($p0){this.onMarqueeMouseMove($p0);},$1_6:function($p0,$p1){var $0=tab.DomUtil.getDojoCoordsJQ(this.get_shapeSelector().get_dom());var $1=this.toLocalCoords(tab.RecordCast.dojoCoordsAsPoint($0));this.$1_3=tab.$create_Delta($1.x,$1.y,1);this.$1_3.w=$0.w;this.$1_3.h=$0.h;this.get_shapeSelector().hide();},$1_7:function($p0,$p1){$p0.preventDefault();if(this.waitingOnPanZoomServerResponse!=='normal'&&this.waitingOnPanZoomServerResponse!=='inProgress'){return;}this.waitingOnPanZoomServerResponse='inProgress';if(this.$1_F()){this.setViewportBorderVisibility(true);this.backgroundMap.splatOverlayToMapForTransition(tab.TiledViewerRegion.getCanvasElement(this.connectNode));this.$1_11();}},$1_8:function($p0,$p1,$p2){if(this.waitingOnPanZoomServerResponse!=='inProgress'){$p0.preventDefault();return;}var $0=tab.$create_TransformSpec();var $1=$p0.get_gestureInfo();if(this.allowPanZoom()){$0.translateX=($p1.canDragH)?this.$1_3.x:0;$0.translateY=($p1.canDragV)?this.$1_3.y:0;$0.translateX+=($p1.canDragH)?$1.deltaX:0;$0.translateY+=($p1.canDragV)?$1.deltaY:0;var $2=this.$1_D($p0,$p2,false);$0.translateX+=($p1.canDragH)?parseInt($2.x):0;$0.translateY+=($p1.canDragV)?parseInt($2.y):0;$0.scaleX=($p1.canDragH)?this.$1_3.scale*$1.scale:1;$0.scaleY=($p1.canDragV)?this.$1_3.scale*$1.scale:1;}if(!!$0.translateX||!!$0.translateY){$p0.preventDefault();}if(this.allowPanZoom()){if(this.backgroundMap.get_enabled()){this.backgroundMap.touchMove($0.translateX,$0.translateY,$0.scaleX);}else{tableau.util.transform(this.$1_2.get(0),$0);}}},$1_9:function($p0,$p1,$p2){if(this.waitingOnPanZoomServerResponse!=='inProgress'){$p0.preventDefault();return;}if(this.allowPanZoom()){this.$1_3.x+=($p1.canDragH)?$p0.get_gestureInfo().deltaX:0;this.$1_3.y+=($p1.canDragV)?$p0.get_gestureInfo().deltaY:0;this.$1_3.scale*=$p0.get_gestureInfo().scale;var $0=null;if(this.$1_3.scale!==1){if(this.backgroundMap.get_enabled()){}else{var $1=tab.$create_TransformSpec();$1.time=250;var $2=this.paneTableViewModel.get_mapServerModel().get_mapServerPresModel();$1.scale=tab.ZoomComputer.resolveDesiredScale($2,this.$1_3.scale);this.$1_3.scale=$1.scale;$p0.get_gestureInfo().scale=$1.scale;$0=this.$1_D($p0,$p2,false);$1.translateX=this.$1_3.x+(($p1.canDragH)?parseInt($0.x):0);$1.translateY=this.$1_3.y+(($p1.canDragV)?parseInt($0.y):0);tableau.util.transform(this.$1_2.get(0),$1);}}$0=this.$1_D($p0,$p2,true);this.$1_3.x+=($p1.canDragH)?parseInt($0.x):0;this.$1_3.y+=($p1.canDragV)?parseInt($0.y):0;}},$1_A:function(){var $0=this.$1_3;this.$1_E();if(this.waitingOnPanZoomServerResponse==='inProgress'){this.backgroundMap.touchEnd($0.x,$0.y,$0.scale);this.waitingOnPanZoomServerResponse='waitingOnServer';}return $0;},$1_B:function(){return tab.DomUtil.getDojoCoordsJQ(this.connectNode);},$1_C:function(){if(this.scroller!=null&&this.regionContent!=null){var $0=Type.safeCast(this.regionContent,tab.TiledWindow);if($0==null){$0=Type.safeCast(this.regionContent,tab.VisualRegionCanvasView);}(this.scroller).setScrollTarget($0);}},stopScrolling:function(){},startScrolling:function(scrollX,scrollY,scrollSpeed){},determineScrollDirection:function(scrollAxis,outsideViz){return 0;},onRegionContentLoadComplete:function(sender,e){tab.TiledViewerRegionMobile.callBaseMethod(this, 'onRegionContentLoadComplete',[sender,e]);this.$1_10();},$1_D:function($p0,$p1,$p2){var $0=$p0.get_gestureInfo();var $1=this.$1_B();var $2=1-$0.scale;var $3=$p1.xWidths;var $4=$p1.yHeights;var $5=$3.length;var $6=$4.length;var $7=$p1.xWidths[0];var $8=$p1.yHeights[0];var $9=$7*$5;var $A=$8*$6;var $B=$0.pageX-$1.x;var $C=$0.pageY-$1.y;if($p2||!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){$B+=this.scroller.get_scrollPos().x;$C+=this.scroller.get_scrollPos().y;}var $D=($p2)?($B%$7)-($7/2):$B-($9/2);var $E=($p2)?($C%$8)-($8/2):$C-($A/2);return tab.$create_PointF(($2*($D-$0.deltaX)),($2*($E-$0.deltaY)));},$1_E:function(){this.$1_3=tab.$create_Delta(0,0,1);},$1_F:function(){return this.allowPanZoom();},$1_10:function(){this.$1_2.css('clip','auto');tableau.util.transform(this.$1_2.get(0));this.setViewportBorderVisibility(false);},$1_11:function(){if(!this.$1_2.size()){return;}var $0='px';var $1=2;var $2=tab.DomUtil.getMarginBoxJQ(this.$1_2);var $3=[$1+$0,($2.w-$1)+$0,($2.h-$1)+$0,$1+$0].join(', ');$3='rect('+$3+')';this.$1_2.css('clip',$3);}}
tab.LegacyTooltipBehavior=function(tooltip){this.$2=new tab.DisposableHolder();tab.Param.verifyValue(tooltip,'tooltip');this.$1=tooltip;this.$1.set_defaultShowCloseButton(false);}
tab.LegacyTooltipBehavior.prototype={$1:null,$3:false,attach:function(){this.$1.add_showed(ss.Delegate.create(this,this.$4));this.$1.add_closed(ss.Delegate.create(this,this.$5));this.$1.add_disposed(ss.Delegate.create(this,this.$6));spiff.GlobalTouchWatcher.add_firstTouch(ss.Delegate.create(this,this.$7));var $0=spiff.$create_EventHandleSpec();spiff.TableauEventHandler.setHandler($0,'potentialTap',ss.Delegate.create(this,this.$8));this.$2.add(new spiff.TableauEventHandler(this.$1.get_element()[0],$0));},detach:function(){this.$2.dispose();if(ss.isValue(this.$1)){this.$1.remove_showed(ss.Delegate.create(this,this.$4));this.$1.remove_closed(ss.Delegate.create(this,this.$5));this.$1.remove_disposed(ss.Delegate.create(this,this.$6));}spiff.GlobalTouchWatcher.remove_firstTouch(ss.Delegate.create(this,this.$7));this.$2.dispose();},dispose:function(){this.detach();},shownTooltipIsStatic:function(){return true;},isHoverAllowed:function(pageCoords){return false;},shouldShowCommandButtons:function(){return true;},handleUbertipMenuToggle:function(areMenuItemsVisible){this.$3=areMenuItemsVisible;},handleUbertipMenuClose:function(){this.$1.close();},hoverOverObject:function(pageCoords,isSelected,isEmpty,isSameObject){},hoverOverWhitespace:function(pageCoords){},multiSelectComplete:function(pageAnchorPoint){this.showTooltip(pageAnchorPoint);},singleSelectComplete:function(pageCoords){this.showTooltip(pageCoords);},onPanningOrDragging:function(){if(this.$1.get_isShown()){this.$1.close();}},onScroll:function(){if(this.$1.get_isShown()){this.$1.close();}},mouseDown:function(pageCoords,objectUnderMouse){},showTooltip:function(pageCoords){if(this.$1.get_isShown()&&tab.PointUtil.equals(this.$1.get_location(),pageCoords)){return;}this.$1.show(this.$1.get_body().children()[0],pageCoords);},$4:function($p0,$p1){},$5:function(){},$6:function($p0,$p1){this.dispose();},$7:function($p0,$p1){if($p0.target===this.$1.get_element()[0]){return;}if(!this.$1.get_isShown()||ss.isNullOrUndefined($p0)||tab.DomUtil.isAncestorOf(this.$1.get_element()[0],$p0.target)||this.$3){return;}this.$1.close();},$8:function($p0){$p0.preventDefault();$p0.stopPropagation();this.$1.close();}}
tab.TreeModelMobile=function(session,field,levels,isSingleSelect){tab.TreeModelMobile.initializeBase(this,[session,field,levels,isSingleSelect]);this.session=session;this.field=field;this.isSingleSelect=isSingleSelect;this.root={};this.root.schema=null;this.root.tuple=tab.$create_TupleStruct('',false,null);this.root.label='$ROOT$';this.root.level=-1;this.root.children=null;}
tab.TreeModelMobile.prototype={itemsFromTable:function(data,level){var $0=[];var $1=(!!data.table)?data.table.tuples:null;if(!!!data.table){return $0;}for(var $2=0;$2<$1.length;$2++){var $3=$1[$2];var $4=tableau.format.formatTupleDisplayName($3);var $5=null;if(!!data.children){$5=this.itemsFromTable(data.children[$2],level+1);}var $6={};$6.id=tableau.format.formatTupleUniqueName($3,null);$6.schema=data.table.schema;$6.tuple=$3;$6.label=$4;$6.level=level;$6.children=$5;$0.push($6);}return $0;}}
tab.TreeNodeMobile=function(options){tab.TreeNodeMobile.initializeBase(this,[options]);}
tab.TreeNodeMobile.prototype={isChecked:false,touchHandler:null,wipeIn:null,wipeOut:null,tree:null,destroy:function(preserveDom){if(ss.isValue(this.touchHandler)){this.touchHandler.dispose();}this.inherited(arguments);},updateCheckState:function(){this.isChecked=this.tree.model.isChecked(this.item);var $0=$(this.labelNode).find('.checkArea');if(this.isChecked){$0.addClass('checked');}else{$0.removeClass('checked');}},setLabelNode:function(label){this.isChecked=this.tree.model.isChecked(this.item);var $0="class='checkArea "+((this.isChecked)?" checked'":"'");var $1="<span style='display: inline-block; vertical-align: middle;'";if(this.tree.model.isSingleSelect){var $2=(this.tree.model).field;if(!!(this.tree.model).session){$2+=(this.tree.model).session.get_viewId();}$1+=" name='FI_"+$2+"'";}$1+=$0;$1+="></span><a title='"+label+"'>"+label+'</a>';this.labelNode.innerHTML=$1;if(ss.isNullOrUndefined(this.touchHandler)){var $3=spiff.$create_EventHandleSpec();$3.potentialTap=ss.Delegate.create(this,this.onFingerUp);this.touchHandler=new spiff.TableauEventHandler(this.rowNode,$3);}},onFingerUp:function(e){if(tab.DomUtil.isEqualOrAncestorOf(this.labelNode,e.target)){this.$3_0(e);}else if(tab.DomUtil.isEqualOrAncestorOf(this.expandoNode,e.target)){this.handleExpandoTap(e);}},$3_0:function($p0){this.labelNode.firstChild.checked=!this.tree.model.isChecked(this.item);this.isChecked=!dojo.hasClass(this.labelNode.firstChild,'checked');dojo.toggleClass(this.labelNode.firstChild,'checked',this.isChecked);$p0.level=this.item.level;$p0.isChecked=this.isChecked;this.tree.notifyChange($p0);},handleExpandoTap:function(e){if(this.isExpanded){this.tree._collapseNode(this);}else{this.tree._expandNode(this);}},expand:function(){if(this.isExpanded){return;}if(!!this.wipeOut){this.wipeOut.stop();}this.isExpanded=true;dijit.setWaiState(this.labelNode,'expanded','true');dijit.setWaiRole(this.containerNode,'group');this.contentNode.className='dijitTreeContent dijitTreeContentExpanded';this._setExpando();this._updateItemClasses(this.item);if(ss.isNullOrUndefined(this.wipeIn)){var $0={};$0.node=this.containerNode;$0.duration=dijit.defaultDuration;$0.onEnd=ss.Delegate.create(this,this.animationCompletionCallback);this.wipeIn=dojo.fx.wipeIn($0);}this.wipeIn.play();},animationCompletionCallback:function(){if(!!this.tree){this.tree.treeSizeChanged();}},collapse:function(){if(!this.isExpanded){return;}if(!!this.wipeIn){this.wipeIn.stop();}this.isExpanded=false;dijit.setWaiState(this.labelNode,'expanded',0);this.contentNode.className='dijitTreeContent';this._setExpando();this._updateItemClasses(this.item);if(ss.isNullOrUndefined(this.wipeOut)){var $0={};$0.node=this.containerNode;$0.duration=dijit.defaultDuration;$0.onEnd=ss.Delegate.create(this,this.animationCompletionCallback);this.wipeOut=dojo.fx.wipeOut($0);}this.wipeOut.play();}}
tab.InPlaceTreeNode=function(options){tab.InPlaceTreeNode.initializeBase(this,[options]);}
tab.InPlaceTreeNode.prototype={$3_1:'HFIMChecked',updateCheckState:function(){this.isChecked=this.tree.model.isChecked(this.item);var $0=$(this.labelNode);var $1=$0.find('.HFIMCheckMark');var $2=$0.find('HFIMItem');if(this.isChecked){$1.addClass(this.$3_1);$2.addClass(this.$3_1);}else{$1.removeClass(this.$3_1);$2.removeClass(this.$3_1);}},setLabelNode:function(label){var $0="<span class='HFIMCheckMark __0'>__1</span><span class='HFIMItem __0' title='__2'>__2</span>";this.isChecked=this.tree.model.isChecked(this.item);$0=$0.replace(new RegExp('__0','g'),(this.isChecked)?'HFIMChecked':'').replace(new RegExp('__1','g'),'&nbsp;').replace(new RegExp('__2','g'),label);this.labelNode.innerHTML=$0;},_setExpando:function(){dojo.addClass(this.domNode,'inplaceTree');this.inherited(arguments);}}
tab.TreeMobile=function(param){tab.TreeMobile.initializeBase(this,[param]);}
tab.TreeMobile.prototype={visible:false,add_treeSizeChangedCalled:function(value){this.$3_0=ss.Delegate.combine(this.$3_0,value);},remove_treeSizeChangedCalled:function(value){this.$3_0=ss.Delegate.remove(this.$3_0,value);},$3_0:null,add_onOpenCalled:function(value){this.$3_1=ss.Delegate.combine(this.$3_1,value);},remove_onOpenCalled:function(value){this.$3_1=ss.Delegate.remove(this.$3_1,value);},$3_1:null,add_onCloseCalled:function(value){this.$3_2=ss.Delegate.combine(this.$3_2,value);},remove_onCloseCalled:function(value){this.$3_2=ss.Delegate.remove(this.$3_2,value);},$3_2:null,_createTreeNode:function(options){options.isChecked=this.model.isChecked(options.item);var $0=new tableau.mobile._TreeNode(options);options.item.node=$0;return $0;},getIconClass:function(item,opened){return 'HFTreeNodeIcon';},getLabelClass:function(item,opened){return (this.model.isSingleSelect)?'HFTreeNodeLabelSS':'HFTreeNodeLabel';},focusNode:function(node){},treeSizeChanged:function(){if(ss.isValue(this.$3_0)){this.$3_0();}},onOpen:function($p0,$p1){if(ss.isValue(this.$3_1)){this.$3_1($p0,$p1);}},onClose:function($p0,$p1){if(ss.isValue(this.$3_2)){this.$3_2($p0,$p1);}},findEarlierNode:function(node1,node2,level){return this.rEarlierContained(this.rootNode,0,node1,node2,level);},rEarlierContained:function(searchNode,searchLevel,n1,n2,targetLevel){if(searchLevel>targetLevel){return null;}else if(searchLevel<targetLevel){var $0=(searchNode).getChildren();var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;var $2=this.rEarlierContained($1,searchLevel+1,n1,n2,targetLevel);if(!!$2){return $2;}}}else{if(searchNode===n1){return n1;}if(searchNode===n2){return n2;}}return null;}}
tab.InPlaceTree=function(options){tab.InPlaceTree.initializeBase(this,[options]);}
tab.InPlaceTree.prototype={_createTreeNode:function(options){options.isChecked=this.model.isChecked(options.item);var $0=new tableau.mobile._InPlaceTreeNode(options);options.item.node2=$0;return $0;},_onClick:function($p0){}}
tab.ViewingToolbarMobile=function(app,isTop){tab.ViewingToolbarMobile.initializeBase(this,[app,isTop]);this.$1_0=$('<div>').addClass('tab-toolbar-button-feedback');}
tab.ViewingToolbarMobile.prototype={$1_0:null,$1_1:null,bindEvents:function(){tab.ViewingToolbarMobile.callBaseMethod(this, 'bindEvents');var $enum1=ss.IEnumerator.getEnumerator(spiff.Widget.getWidgets(this.toolbarElement.find('.tab-toolbar-button'),tab.ToolbarButton));while($enum1.moveNext()){var $0=$enum1.current;$0.get_clickHandler().onPress(ss.Delegate.create(this,this.$1_3));}},makeCustomViewsPanel:function(viewModel,toolbarButton){return new tab.CustomViewsPanelMobile(viewModel,toolbarButton);},makeMenuView:function(viewModel){return new spiff.MenuViewMobile(viewModel);},makeShareButtons:function(){var $0=[];var $1;if(tsConfig.isPublic){$1=new tab.ToolbarTextButton(ss.Delegate.create(this,this.$1_2));}else{$1=new tab.ToolbarTextButton(ss.Delegate.create(this,this.shareButtonClicked));}$1.setLeftIcon('tab-icon-share').setText(tab.Strings.ToolbarShare);$1.get_element().addClass('wcShareButton');if(tsConfig.isPublic){$1.get_element().addClass('tab-toolbar-share-text-button-public');}$0.add($1);if(tsConfig.isPublic){var $2=new tab.ToolbarIconButton(ss.Delegate.create(this,this.$1_2));$2.setIcon('tab-icon-facebook');$2.get_element().addClass('tab-icon-public');$0.add($2);var $3=new tab.ToolbarIconButton(ss.Delegate.create(this,this.$1_2));$3.setIcon('tab-icon-twitter');$3.get_element().addClass('tab-icon-public');$0.add($3);var $4=new tab.ToolbarIconButton(ss.Delegate.create(this,this.$1_2));$4.setIcon('tab-icon-mail');$4.get_element().addClass('tab-icon-public');$0.add($4);}$0.forEach(ss.Delegate.create(this.disposables,this.disposables.add));return $0;},$1_2:function(){if(!ss.isValue(this.$1_1)){this.$1_1=new tab.SharePopup(ss.Delegate.create(this,this.facebookButtonClicked),ss.Delegate.create(this,this.twitterButtonClicked),ss.Delegate.create(this,this.mailButtonClicked));this.leftElement.append(this.$1_1.get_element());}this.$1_1.show();},$1_3:function($p0){this.$1_0.css({opacity:'1'});this.$1_0.appendTo($($p0.target));this.$1_0.animate({opacity:'0'},'slow','swing',ss.Delegate.create(this,function(){
this.$1_0.detach();}));}}
tab.CurrentPagePanelPopup=function(){tab.CurrentPagePanelPopup.initializeBase(this);}
tab.CurrentPagePanelPopup.prototype={params:null,srcRefNode:null,get_contentAsPagePanelContent:function(){return this.get_content();},get_$1_22:function(){return this;},postCreate:function(){this.params.parentPopup=this;this.set_content(new tableau.mobile.widget.catmode.popup.CurrentPagePanelContent(this.params,this.domContent));this.inherited(arguments);dojo.addClass(this.domNode,'Medium');if(ss.isNullOrUndefined(this.params.title)){dojo.style(this.get_title(),'display','none');dojo.style(this._layoutContainer.domNode,'border','none');}this.get_$1_22().setupScrollListener(this.get_contentAsPagePanelContent().dropdown.iscrollObj);},destroy:function(){this.get_contentAsPagePanelContent().destroy();this.inherited(arguments);},prepareToHide:function(){this.get_contentAsPagePanelContent().prepareToHide();},_refreshContent:function(pages,page,enable){this.get_contentAsPagePanelContent().refreshContent(pages,page,enable);this.get_$1_22().setupScrollListener(this.get_contentAsPagePanelContent().dropdown.iscrollObj);},getContentDimensions:function(){return dojo.marginBox(this.get_contentAsPagePanelContent().domNode);}}
tab.CurrentPagePanelContent=function(popupParams,srcRefNode){this.templateString="<div class='CurrentPagePanelContent'>"+"<div style='height:50px; width:100%;' dojoAttachPoint='_buttonsPane'>"+"<div dojoAttachPoint='_leftButton' style='width:44px; height:44px; display:${show_dropdown}; float:left;'>"+"<div class='leftButton' style='margin:10px 0 0 14px;'></div>"+'</div>'+"<div dojoAttachPoint='_dropDownButton' class='' style='display:${show_dropdown} width: 50%; float:left; height:44px; width:65%;'>"+"<div class='CurrentPageTitle' style='padding-top:13px; overflow:hidden; color:#3b3f42;' dojoAttachPoint='_currentTitle'>${current_page_label}</div>"+'</div>'+"<div dojoAttachPoint='_rightButton' style='display:${show_dropdown}; float:right; width:44px; height:44px;'>"+"<div class='rightButton' style='margin:10px 0 0 14px;'></div>"+'</div>'+"<span style='clear:both;'></span>"+'</div>'+"<div style='width:100%;'>"+"<div dojoAttachPoint='_dropdownPane' style='background-color:white; border:1px solid grey; width:99%;'>"+"<div dojoAttachPoint='_scrollAttachPoint'></div>"+'</div>'+'</div>'+"<div style='width:100%; height:65px;' dojoAttachPoint='_sliderWrapper'>"+"<div dojoAttachPoint='_sliderAttachPoint'></div>"+'</div>'+"<div style='height: 39px; width:100%;' class='History' dojoAttachPoint='_historyWrapper'>"+"<div dojoAttachPoint='_history'></div>"+'</div>'+'</div>';this.$1_0=new tab.DisposableHolder();tab.CurrentPagePanelContent.initializeBase(this);this.$1_1=popupParams.viewModel;this.touchHandlers=[];this.historyTouchHandler=null;this.subscriptions=[];this.items=popupParams.items;this._dropDownVisible=false;this.show_dropdown=false;this.dropdown_display='none';this.trails_enabled=false;}
tab.CurrentPagePanelContent.prototype={current_page:0,dropdown_display:null,show_dropdown:false,trails_enabled:false,title:'',current_page_label:'',items:null,itemsAsTupleStruct:null,dropdown:null,singleSlider:null,parentPopup:null,touchHandlers:null,historyTouchHandler:null,subscriptions:null,_dropDownVisible:false,toggle:null,_rightButton:null,_leftButton:null,_history:null,_historyWrapper:null,_scrollAttachPoint:null,_dropDownButton:null,_dropdownPane:null,_buttonsPane:null,_sliderAttachPoint:null,show_slider:false,_sliderWrapper:null,_currentTitle:null,$1_1:null,add_leftPressed:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_leftPressed:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,add_rightPressed:function(value){this.$1_3=ss.Delegate.combine(this.$1_3,value);},remove_rightPressed:function(value){this.$1_3=ss.Delegate.remove(this.$1_3,value);},$1_3:null,add_toggleHistoryCalled:function(value){this.$1_4=ss.Delegate.combine(this.$1_4,value);},remove_toggleHistoryCalled:function(value){this.$1_4=ss.Delegate.remove(this.$1_4,value);},$1_4:null,add_applyChangeCalled:function(value){this.$1_5=ss.Delegate.combine(this.$1_5,value);},remove_applyChangeCalled:function(value){this.$1_5=ss.Delegate.remove(this.$1_5,value);},$1_5:null,add_applyChangeFromSliderCalled:function(value){this.$1_6=ss.Delegate.combine(this.$1_6,value);},remove_applyChangeFromSliderCalled:function(value){this.$1_6=ss.Delegate.remove(this.$1_6,value);},$1_6:null,postMixInProperties:function(){this.current_page_label=(this.items[this.current_page]||'');this.dropdown_display=(this.show_dropdown)?'':'none';},postCreate:function(){this.inherited(arguments);this.itemsAsTupleStruct=this.$1_12(this.items);this.$1_7();this._history.innerHTML=tableau.mobile.FilterItemMobile.getScrollingListRowHtml(null,tab.Strings.CurrentPagePanelShowHistory,null,false,this.trails_enabled,false,false);this.toggle=this._history.firstChild;var $0=spiff.$create_EventHandleSpec();$0.firstTouch=ss.Delegate.create(this,this.$1_D);this.historyTouchHandler=new spiff.TableauEventHandler(this.toggle,$0);if(!this.$1_1.get_showHistoryToggleForPopup()){dojo.style(this._historyWrapper,'display','none');}this.$1_8();this.$1_C(this.current_page);},syncEverything:function(index){if(index<this.itemsAsTupleStruct.length){var $0=this.itemsAsTupleStruct[index].d;this.$1_10($0,index);}this.$1_11(index);this.$1_C(index);},refreshContent:function(pages,page,enable){dojo.forEach(this.touchHandlers,function($p1_0){
$p1_0.destroy();});this.$1_0.dispose();this.items=pages;this.itemsAsTupleStruct=this.$1_12(pages);this.current_page=page;this.$1_7();this.$1_8();if(ss.isValue(enable)){dojo.toggleClass(this.toggle,'checked',enable);this.trails_enabled=enable;}this.$1_C(this.current_page);this.syncEverything(this.current_page);if(this._dropDownVisible){this.$1_B();}},$1_7:function(){if(ss.isValue(this.dropdown)){dojo.forEach(this.touchHandlers,function($p1_0){
$p1_0.destroy();});this.dropdown.destroy();}var $0={};$0.listItems=this.itemsAsTupleStruct;this.dropdown=tab.ScrollingList.createScrollingList($0);this.dropdown.placeAt(this._scrollAttachPoint,'after');dojo.style(this._dropdownPane,'display','none');var $1=spiff.$create_EventHandleSpec();$1.firstTouch=this.$1_2;this.touchHandlers.push(new spiff.TableauEventHandler(this._leftButton,$1));var $2=spiff.$create_EventHandleSpec();$2.firstTouch=this.$1_3;this.touchHandlers.push(new spiff.TableauEventHandler(this._rightButton,$2));var $3=spiff.$create_EventHandleSpec();$3.doubleTap=function($p1_0){
$p1_0.preventDefault();};this.touchHandlers.push(new spiff.TableauEventHandler(this._leftButton,$3));this.touchHandlers.push(new spiff.TableauEventHandler(this._rightButton,$3));var $4=spiff.$create_EventHandleSpec();$4.firstTouch=ss.Delegate.create(this,this.$1_9);this.touchHandlers.push(new spiff.TableauEventHandler(this._dropDownButton,$4));var $5=ss.Delegate.create(this,function($p1_0,$p1_1){
this.$1_E($p1_1,true);});this.dropdown.add_dispatchItemsChanged($5);this.$1_0.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.dropdown.remove_dispatchItemsChanged($5);})));if(!this.show_dropdown){dojo.style(this._dropdownPane,'display','none');dojo.style(this._buttonsPane,'display','none');}},$1_8:function(){if(ss.isValue(this.singleSlider)){this.singleSlider.destroy();}var $0={};$0.bShowSlider=true;$0.length=this.items.length;$0.currentlySelected=this.current_page;this.singleSlider=new tableau.mobile.widget.catmode.popup.SingleSlider($0);this.singleSlider.placeAt(this._sliderAttachPoint,'after');this.singleSlider.setParent(this.parentPopup);this.singleSlider.startup();this.singleSlider.add_onPopupSliderChange(ss.Delegate.create(this,this.$1_F));this.$1_0.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.singleSlider.remove_onPopupSliderChange(ss.Delegate.create(this,this.$1_F));})));dojo.style(this.singleSlider._leftButton,'display','none');dojo.style(this.singleSlider._rightButton,'display','none');dojo.style(this.singleSlider._singleSliderWrapper,'width','300px');if(!this.show_slider){dojo.style(this._sliderWrapper,'display','none');}},$1_9:function($p0){if(this._dropDownVisible){this.$1_A();}else{this.$1_B();}},$1_A:function(){this._dropDownVisible=false;dojo.style(this._dropdownPane,'display','none');this.dropdown.iscrollObj.refresh();this.parentPopup.doResize(null,null);},$1_B:function(){this._dropDownVisible=true;dojo.style(this._dropdownPane,'display','');var $0=this.dropdown.getListSize();var $1=Math.max(Math.min(44*4,$0),0)+'px';dojo.style(this.dropdown.scrollWrapper,'height',$1);this.dropdown.iscrollObj.refresh();this.parentPopup.doResize(null,null);},$1_C:function($p0){dojo.toggleClass(this._rightButton,'disabled',$p0>=this.items.length-1);dojo.toggleClass(this._leftButton,'disabled',!$p0);},$1_D:function($p0){tab.FilterItemUtil.toggleClassState(this.toggle,'checked');if(ss.isValue(this.$1_4)){this.$1_4();}},$1_E:function($p0,$p1){this.syncEverything($p0);if(ss.isValue(this.$1_5)){this.$1_5($p0,$p1);}},$1_F:function($p0,$p1){var $0=$p0;var $1=this.itemsAsTupleStruct[$0].d;this.$1_10($1,$0);this.$1_C($0);if(ss.isValue(this.$1_6)){this.$1_6($0,$p1);}},$1_10:function($p0,$p1){this._currentTitle.innerHTML=$p0;this.dropdown.clearAll();this.dropdown.setSelectedAtIndex($p1,true);},$1_11:function($p0){var $0=this.singleSlider.convertIndexToPixels($p0);this.singleSlider.setSliderPosition($0);},$1_12:function($p0){var $0=$p0.length;var $1=[];for(var $2=0;$2<$0;$2++){$1.push(tab.$create_TupleStruct($p0[$2],$2===this.current_page,[tab.$create_DataValueStruct('s',$p0[$2])]));}return $1;},destroy:function(){this.historyTouchHandler.destroy();dojo.forEach(this.touchHandlers,function($p1_0){
$p1_0.destroy();});this.$1_0.dispose();dojo.forEach(this.subscriptions,dojo.unsubscribe);this.dropdown.destroy();this.singleSlider.destroy();this.inherited(arguments);},prepareToHide:function(){this.$1_A();}}
tab.IPopupMobile=function(){};tab.IPopupMobile.registerInterface('tab.IPopupMobile');tab.StepperControlViewMobile=function(viewModel){tab.StepperControlViewMobile.initializeBase(this,[viewModel,new tab.MobileStepperControlTemplate()]);}
tab.MobileStepperControlTemplate=function(){tab.MobileStepperControlTemplate.initializeBase(this,["<div class='tabStepperControl'>\n            <div class='tabDecrementButton' />\n            <input class='tabStepCountValue' type='text'></input>\n            <div class='tabIncrementButton' />\n        </div>"]);this.decrementButton=this.getElementBySelector('.tabDecrementButton');this.incrementButton=this.getElementBySelector('.tabIncrementButton');this.valueText=this.getElementBySelector('.tabStepCountValue');}
tableau.mobile.util.scaling.registerClass('tableau.mobile.util.scaling');tab.CategoricalLegendViewMobile.registerClass('tab.CategoricalLegendViewMobile',tab.CategoricalLegendView);tab.CategoricalLegendTemplateMobile.registerClass('tab.CategoricalLegendTemplateMobile',tab.CategoricalLegendTemplate);tab.MapsSearchViewMobile.registerClass('tab.MapsSearchViewMobile',tab.MapsSearchView);tab.DragDropAndScrollHandler.registerClass('tab.DragDropAndScrollHandler',null,ss.IDisposable);tab.TooltipLegacyMode.registerClass('tab.TooltipLegacyMode',tab.TooltipBaseLegacyMode);tab.ContinuousSliderMobile.registerClass('tab.ContinuousSliderMobile',tab.ContinuousSlider);tab.PaneTableViewMobile.registerClass('tab.PaneTableViewMobile',tab.PaneTableView);tab.FZTOpsMobile.registerClass('tab.FZTOpsMobile',null,tab.IFloatingZoomToolbarOps);tab.PaneTableTemplateMobile.registerClass('tab.PaneTableTemplateMobile',tab.PaneTableTemplate);tab.ParameterControlViewMobile.registerClass('tab.ParameterControlViewMobile',tab.ParameterControlView);tab.QuickFilterDisplayViewMobile.registerClass('tab.QuickFilterDisplayViewMobile',tab.QuickFilterDisplayView);tab.BasePopupMobile.registerClass('tab.BasePopupMobile',dijit._Widget,ss.IDisposable,tab.IPopupMobile);tab.DropdownMobile.registerClass('tab.DropdownMobile',tab.BaseMode,tab.IInplaceMobilePopupWidget);tab.CheckDropdownMobile.registerClass('tab.CheckDropdownMobile',tab.DropdownMobile);tab.ChecklistMobile.registerClass('tab.ChecklistMobile',tab.Checklist,tab.IInplaceMobilePopupWidget);tab.HierarchicalFilterMobile.registerClass('tab.HierarchicalFilterMobile',tab.HierarchicalFilter,ss.IDisposable,tab.IInplaceMobilePopupWidget);tab.CategoricalSliderPopup.registerClass('tab.CategoricalSliderPopup',tab.BasePopupMobile);tab.ControlsToolbar.registerClass('tab.ControlsToolbar',dijit._Widget);tab.PopupTypeInWidget.registerClass('tab.PopupTypeInWidget',null,ss.IDisposable);tab.PopupValueTypeInWidget.registerClass('tab.PopupValueTypeInWidget',tab.PopupTypeInWidget);tab.PopupFormattedValueTypeInWidget.registerClass('tab.PopupFormattedValueTypeInWidget',tab.PopupValueTypeInWidget);tab.CustomValueListPopup.registerClass('tab.CustomValueListPopup',tab.BasePopupMobile);tab.ListPopup.registerClass('tab.ListPopup',tab.BasePopupMobile);tab.PatternPopup.registerClass('tab.PatternPopup',tab.BasePopupMobile);tab.PopupListTypeInWidget.registerClass('tab.PopupListTypeInWidget',tab.PopupTypeInWidget);tab.ScrollingList.registerClass('tab.ScrollingList',dijit._Widget);tab.ScrollListener.registerClass('tab.ScrollListener',null,ss.IDisposable);tab.TypeInMobile.registerClass('tab.TypeInMobile',tab.BaseMode,tab.IInplaceMobilePopupWidget);tab.PatternMobile.registerClass('tab.PatternMobile',tab.BaseMode,tab.IInplaceMobilePopupWidget);tab.RadiolistMobile.registerClass('tab.RadiolistMobile',tab.Radiolist,tab.IInplaceMobilePopupWidget);tab.DojoWidgetsMobile.registerClass('tab.DojoWidgetsMobile');tab.DoubleSliderMobile.registerClass('tab.DoubleSliderMobile',dijit._Widget);tab.FeedbackMobile.registerClass('tab.FeedbackMobile');tab.TapFeedback.registerClass('tab.TapFeedback',dijit._Widget,ss.IDisposable);tab.PressFeedback.registerClass('tab.PressFeedback',dijit._Widget,ss.IDisposable);tab.HierarchicalControlPopup.registerClass('tab.HierarchicalControlPopup',tab.BasePopupMobile);tab.HierarchicalControlContentMobile.registerClass('tab.HierarchicalControlContentMobile',dijit._Widget,ss.IDisposable);tab.InplaceMobilePopup.registerClass('tab.InplaceMobilePopup',null,tab.IInplaceMobile);tab.OptionsWidgetMobile.registerClass('tab.OptionsWidgetMobile',tab.ScrollingList);tab.MobileWindowAppender.registerClass('tab.MobileWindowAppender',tab.BaseLogAppender,ss.IDisposable);tab.ApplicationViewModelMobile.registerClass('tab.ApplicationViewModelMobile',tab.ApplicationViewModel);tab.LegacyLegendViewMobile.registerClass('tab.LegacyLegendViewMobile',tab.LegacyLegendView);tab.LegacyLegendTemplateMobile.registerClass('tab.LegacyLegendTemplateMobile',tab.LegacyLegendTemplate);tab.PageViewMobile.registerClass('tab.PageViewMobile',tab.PageView);tab.AccordionViewMobile.registerClass('tab.AccordionViewMobile',tab.AccordionView);tab.CategoricalFilterMobile.registerClass('tab.CategoricalFilterMobile',tab.CategoricalFilter);tab.ComboBoxViewMobile.registerClass('tab.ComboBoxViewMobile',tab.ComboBoxView);tab.CurrentPagePanelMobile.registerClass('tab.CurrentPagePanelMobile',tab.CurrentPagePanel,ss.IDisposable,tab.IInplaceMobilePopupWidget);tab.CustomViewsPanelMobile.registerClass('tab.CustomViewsPanelMobile',tab.CustomViewsPanel);tab.ExportPdfDialogMobile.registerClass('tab.ExportPdfDialogMobile',tab.ExportPdfDialog);tableau.mobile.FilterItemMobile.registerClass('tableau.mobile.FilterItemMobile');tab.FilterPanelMobile.registerClass('tab.FilterPanelMobile',tab.FilterPanel);tab.FloatingZoomToolbarMobile.registerClass('tab.FloatingZoomToolbarMobile',tab.FloatingZoomToolbar);tab.HorizontalSliderMobile.registerClass('tab.HorizontalSliderMobile',dijit.form.HorizontalSlider);tableau.mobile.widget.ui.SliderDojoMobile.registerClass('tableau.mobile.widget.ui.SliderDojoMobile',tab.HorizontalSliderMobile);tab.ParameterControlMobile.registerClass('tab.ParameterControlMobile',tab.ParameterControl);tab.ParamUITypeInMobile.registerClass('tab.ParamUITypeInMobile',tab.ParamUIBase,tab.IInplaceMobilePopupWidget);tab.ParamUICompactMobile.registerClass('tab.ParamUICompactMobile',tab.ParamUIBase,tab.IInplaceMobilePopupWidget);tab.ParamUIListMobile.registerClass('tab.ParamUIListMobile',tab.ParamUIBase,tab.IInplaceMobilePopupWidget);tab.ParamUISliderMobile.registerClass('tab.ParamUISliderMobile',tab.ParamUISlider,tab.IInplaceMobilePopupWidget);tab.PendingChangesManagerMobile.registerClass('tab.PendingChangesManagerMobile',tab.PendingChangesManager);tab.PopupFactory.registerClass('tab.PopupFactory');tab.QuantitativeFilterMobile.registerClass('tab.QuantitativeFilterMobile',tab.QuantitativeFilter,ss.IDisposable,tab.IInplaceMobilePopupWidget);tab.QuantitativeDateFilterMobile.registerClass('tab.QuantitativeDateFilterMobile',tab.QuantitativeFilterMobile);tab.QuantitativeSliderPopup.registerClass('tab.QuantitativeSliderPopup',tab.BasePopupMobile);tab.QuantReadoutsMobile.registerClass('tab.QuantReadoutsMobile',dijit._Widget);tab.RelativeDateFilterDialogMobile.registerClass('tab.RelativeDateFilterDialogMobile',tab.DateFilterWidget);tab.RelativeDateFilterMobile.registerClass('tab.RelativeDateFilterMobile',tab.RelativeDateFilter,tab.IInplaceMobilePopupWidget);tab.RelativeDateFilterPopup.registerClass('tab.RelativeDateFilterPopup',tab.BasePopupMobile);tab.RelativeDatePickFilterMobile.registerClass('tab.RelativeDatePickFilterMobile',tab.RelativeDatePickFilter,tab.IInplaceMobilePopupWidget);tab.SearchWidgetMobile.registerClass('tab.SearchWidgetMobile',tab.SearchWidget,tab.ISearchWidgetMobile,ss.IDisposable);tab.FilteringSearchWidgetMobile.registerClass('tab.FilteringSearchWidgetMobile',tab.SearchWidgetMobile);tab.ScrollingListRow.registerClass('tab.ScrollingListRow',dijit._Widget);tab.SharePopup.registerClass('tab.SharePopup',spiff.Widget);tab.SingleSliderMobile.registerClass('tab.SingleSliderMobile',dijit._Widget);tab.SliderDojo.registerClass('tab.SliderDojo');tab.SliderMobile.registerClass('tab.SliderMobile',null,tab.ISlider);tab.SliderMobileCatmode.registerClass('tab.SliderMobileCatmode',tab.BaseMode,tab.IInplaceMobilePopupWidget);tab.TiledViewerRegionMobile.registerClass('tab.TiledViewerRegionMobile',tab.TiledViewerRegion);tab.LegacyTooltipBehavior.registerClass('tab.LegacyTooltipBehavior',null,tab.ITooltipBehavior,ss.IDisposable);tab.TreeModelMobile.registerClass('tab.TreeModelMobile',tab.TreeSupport);tab.TreeNodeMobile.registerClass('tab.TreeNodeMobile',tab.TreeNode);tab.InPlaceTreeNode.registerClass('tab.InPlaceTreeNode',tab.TreeNodeMobile);tab.TreeMobile.registerClass('tab.TreeMobile',tab.Tree);tab.InPlaceTree.registerClass('tab.InPlaceTree',tab.TreeMobile);tab.ViewingToolbarMobile.registerClass('tab.ViewingToolbarMobile',tab.ViewingToolbar);tab.CurrentPagePanelPopup.registerClass('tab.CurrentPagePanelPopup',tab.BasePopupMobile);tab.CurrentPagePanelContent.registerClass('tab.CurrentPagePanelContent',dijit._Widget);tab.StepperControlViewMobile.registerClass('tab.StepperControlViewMobile',tab.StepperControlView);tab.MobileStepperControlTemplate.registerClass('tab.MobileStepperControlTemplate',tab.StepperControlTemplate);tableau.mobile.util.scaling._scaleFactor=null;tableau.mobile.util.scaling._scaleToFactor=null;(function(){spiff.ObjectRegistry.registerType(tab.CategoricalLegendView,tab.CategoricalLegendViewMobile);})();
(function(){spiff.ObjectRegistry.registerType(tab.MapsSearchView,tab.MapsSearchViewMobile);})();
tab.DragDropAndScrollHandler.$1=12*12;tab.DragDropAndScrollHandler.$5=false;tab.DragDropAndScrollHandler.$6=false;(function(){spiff.ObjectRegistry.registerType(tab.TooltipBaseLegacyMode,tab.TooltipLegacyMode);})();
(function(){spiff.ObjectRegistry.registerType(tab.ContinuousSlider,tab.ContinuousSliderMobile);})();
(function(){spiff.ObjectRegistry.registerType(tab.PaneTableView,tab.PaneTableViewMobile);})();
tab.PaneTableTemplateMobile.htmlTemplate="<div class='tab-tiledViewer placeholder'>"+"<div class='tab-clip'>"+"<div class='tab-tvTLSpacer tvMobileRegion'><img></img></div>"+"<div class='tab-tvTRSpacer tvMobileRegion'><img></img></div>"+"<div class='tab-tvBLSpacer tvMobileRegion'><img></img></div>"+"<div class='tab-tvBRSpacer tvMobileRegion'><img></img></div>"+"<div class='tab-tvYLabel tvMobileRegion'><div class='tvMScrollContainer'>"+"<div class='tvMScrolledNode'><div class='tvimagesContainer'></div></div></div></div>"+"<div class='tab-tvLeftAxis tvMobileRegion'><div class='tvMScrollContainer'>"+"<div class='tvMScrolledNode'><div class='tvimagesContainer'></div></div></div></div>"+"<div class='tab-tvRightAxis tvMobileRegion'><div class='tvMScrollContainer'>"+"<div class='tvMScrolledNode'><div class='tvimagesContainer'></div></div></div></div>"+"<div class='tab-tvXLabel tvMobileRegion'><div class='tvMScrollContainer'>"+"<div class='tvMScrolledNode'><div class='tvimagesContainer'></div></div></div></div>"+"<div class='tab-tvBottomAxis tvMobileRegion'><div class='tvMScrollContainer'>"+"<div class='tvMScrolledNode'><div class='tvimagesContainer'></div></div></div></div>"+"<div class='tab-tvTopAxis tvMobileRegion'><div class='tvMScrollContainer'>"+"<div class='tvMScrolledNode'><div class='tvimagesContainer'></div></div></div></div>"+"<div class='tab-tvView tvMobileRegion'>"+"<div class='tvMScrollContainer'>"+"<div class='tvMScrolledNode'>"+"<div class='tvBackgroundContainer'></div>"+"<div class='tvimagesContainer'></div>"+'</div>'+"<div class='tvViewportBorders'></div>"+'</div>'+'</div>'+"<div class='tab-tvTitle tvMobileRegion'></div>"+"<div class='tab-tvCaption tvMobileRegion'></div>"+'</div>'+'</div>';(function(){spiff.ObjectRegistry.registerType(tab.ParameterControlView,tab.ParameterControlViewMobile);})();
(function(){spiff.ObjectRegistry.registerType(tab.QuickFilterDisplayView,tab.QuickFilterDisplayViewMobile);})();
tab.BasePopupMobile.basePopupTemplate="<div class='BasePopup' dojoAttachPoint='containerNode'>"+"<div class='PopupShadow' dojoAttachPoint='_shadowNode'></div>"+"<div class='PopupOuterContainer'>"+"<div class='PopupBorder' dojoAttachPoint='_borderNode'></div>"+"<div class='PopupContainer' dojoAttachPoint='contentContainerNode'>"+"<div class='BasePopupTitleBar' dojoAttachPoint='_title'>"+"<div class='BasePopupTitle' dojoAttachPoint='_titleContents'>${title}</div>"+"<span dojoAttachPoint='_tools'></span>"+'</div>'+"<div dojoType='dijit.layout.LayoutContainer' style='height:280px; border-top: 1px solid #FAFBFC;' dojoAttachPoint='_layoutContainer'>"+"<div class='SearchPane' dojoType='dijit.layout.ContentPane' layoutAlign='top'"+"dojoAttachPoint='_searchPane'>"+"<div dojoAttachPoint='domSearch'></div>"+"<div dojoAttachPoint='domOptions'></div>"+'</div>'+"<div dojoType='dijit.layout.ContentPane' layoutAlign='client'>"+"<div dojoAttachPoint='domContent'></div>"+'</div>'+"<div class='ApplyPane' dojoType='dijit.layout.ContentPane' layoutAlign='bottom'"+"dojoAttachPoint='_applyPane'>"+"<div dojoAttachPoint='domApplyButton'></div>"+'</div>'+'</div>'+'</div>'+'</div>'+'</div>';(function(){dojo.require('tableau.mobile.MobileClient');var $0=null;$0=[dijit._Widget,dijit._Contained,dijit._Templated];(tab.BasePopupMobile).prototype.templateString=tab.BasePopupMobile.basePopupTemplate;dojo.declare('tableau.mobile.widget.catmode.popup.BasePopup',$0,(tab.BasePopupMobile).prototype);$0=[dijit._Widget,dijit._Templated];dojo.declare('tableau.mobile.widget.catmode.popup.ScrollingList',$0,(tab.ScrollingList).prototype);dojo.declare('tableau.mobile.widget.catmode.popup.ScrollListener',null,(tab.ScrollListener).prototype);$0=[tableau.mobile.widget.catmode.popup.BasePopup];dojo.declare('tableau.mobile.widget.catmode.popup.CategoricalSliderPopup',$0,(tab.CategoricalSliderPopup).prototype);$0=[tableau.mobile.widget.catmode.popup.BasePopup,tableau.mobile.widget.catmode.popup.ScrollListener];dojo.declare('tableau.mobile.widget.catmode.popup.CustomValueListPopup',$0,(tab.CustomValueListPopup).prototype);$0=[dijit._Widget,dijit._Templated];dojo.declare('tableau.mobile.widget.feedback.TapFeedback',$0,(tab.TapFeedback).prototype);$0=[dijit._Widget,dijit._Templated];dojo.declare('tableau.mobile.widget.feedback.PressFeedback',$0,(tab.PressFeedback).prototype);$0=[dijit._Widget,dijit._Templated];dojo.declare('tableau.mobile.widget.catmode.popup.ControlsToolbar',$0,(tab.ControlsToolbar).prototype);$0=[tableau.base.widget.QuantitativeFilter];dojo.declare('tableau.mobile.widget.QuantitativeFilterMobile',$0,(tab.QuantitativeFilterMobile).prototype);$0=[tableau.mobile.widget.QuantitativeFilterMobile];dojo.declare('tableau.mobile.widget.QuantitativeDateFilterMobile',$0,(tab.QuantitativeDateFilterMobile).prototype);$0=[dijit._Widget,dijit._Templated];dojo.declare('tableau.mobile.widget.catmode.popup.QuantReadouts',$0,(tab.QuantReadoutsMobile).prototype);$0=[dijit._Widget,dijit._Templated];dojo.declare('tableau.mobile.widget.catmode.popup.SingleSlider',$0,(tab.SingleSliderMobile).prototype);$0=[dijit._Widget,dijit._Templated];dojo.declare('tableau.mobile.widget.catmode.popup.DoubleSlider',$0,(tab.DoubleSliderMobile).prototype);dojo.declare('tableau.mobile.widget.catmode.popup.PopupTypeInWidget',new Array(0),(tab.PopupTypeInWidget).prototype);dojo.declare('tableau.mobile.widget.catmode.popup.PopupListTypeInWidget',[tableau.mobile.widget.catmode.popup.PopupTypeInWidget],(tab.PopupListTypeInWidget).prototype);dojo.declare('tableau.mobile.widget.catmode.popup.PopupValueTypeInWidget',[tableau.mobile.widget.catmode.popup.PopupTypeInWidget],(tab.PopupValueTypeInWidget).prototype);dojo.declare('tableau.mobile.widget.catmode.popup.PopupFormattedValueTypeInWidget',[tableau.mobile.widget.catmode.popup.PopupValueTypeInWidget],(tab.PopupFormattedValueTypeInWidget).prototype);dojo.declare('tableau.mobile.widget.catmode.popup.PatternPopup',[tableau.mobile.widget.catmode.popup.BasePopup],(tab.PatternPopup).prototype);$0=[tableau.mobile.widget.catmode.popup.BasePopup];dojo.declare('tableau.mobile.widget.catmode.popup.QuantitativeSliderPopup',$0,(tab.QuantitativeSliderPopup).prototype);$0=[tableau.mobile.widget.catmode.popup.BasePopup,tableau.mobile.widget.catmode.popup.ScrollListener];dojo.declare('tableau.mobile.widget.catmode.popup.CurrentPagePanelPopup',$0,(tab.CurrentPagePanelPopup).prototype);$0=[dijit._Widget,dijit._Templated];dojo.declare('tableau.mobile.widget.catmode.popup.CurrentPagePanelContent',$0,(tab.CurrentPagePanelContent).prototype);dojo.declare('tableau.mobile.widget.CategoricalFilterMobile',[tableau.base.widget.CategoricalFilter],(tab.CategoricalFilterMobile).prototype);$0=[tableau.base.widget.CurrentPagePanel];dojo.declare('tableau.mobile.widget.CurrentPagePanelMobile',$0,(tab.CurrentPagePanelMobile).prototype);dojo.declare('tableau.mobile.widget.ui.SliderMobile',new Array(0),(tab.SliderMobile).prototype);dojo.declare('tableau.mobile.widget.ui.SliderDojoMobile',[dijit.form.HorizontalSlider],(tab.HorizontalSliderMobile).prototype);$0=[dijit._Widget,dijit._Templated];dojo.declare('tableau.mobile.widget.catmode.popup.ScrollingListRow',$0,(tab.ScrollingListRow).prototype);dojo.declare('tableau.mobile.widget.OptionsWidgetMobile',[tableau.mobile.widget.catmode.popup.ScrollingList],(tab.OptionsWidgetMobile).prototype);dojo.declare('tableau.mobile.widget.catmode.popup.PopupFactory',null,(tab.PopupFactory).prototype);$0=[tableau.base.widget.catmode.BaseMode];dojo.declare('tableau.mobile.widget.catmode.SliderMobile',$0,(tab.SliderMobileCatmode).prototype);$0=[tableau.base.widget.catmode.BaseMode];dojo.declare('tableau.mobile.widget.catmode.RadiolistMobile',$0,(tab.RadiolistMobile).prototype);$0=[tableau.base.widget.catmode.BaseMode];dojo.declare('tableau.mobile.widget.catmode.DropdownMobile',$0,(tab.DropdownMobile).prototype);$0=[tableau.base.widget.catmode.Checklist];dojo.declare('tableau.mobile.widget.catmode.ChecklistMobile',$0,(tab.ChecklistMobile).prototype);$0=[tableau.base.widget.catmode.BaseMode];dojo.declare('tableau.mobile.widget.catmode.TypeInMobile',$0,(tab.TypeInMobile).prototype);$0=[tableau.base.widget.catmode.BaseMode];dojo.declare('tableau.mobile.widget.catmode.PatternMobile',$0,(tab.PatternMobile).prototype);dojo.declare('tableau.mobile.widget.ParameterControlMobile',[tableau.base.widget.ParameterControl],(tab.ParameterControlMobile).prototype);$0=[tableau.base.widget.paramui.Base];dojo.declare('tableau.mobile.widget.paramui.TypeIn',$0,(tab.ParamUITypeInMobile).prototype);$0=[tableau.base.widget.paramui.Base];dojo.declare('tableau.mobile.widget.paramui.Compact',$0,(tab.ParamUICompactMobile).prototype);$0=[tableau.base.widget.paramui.Base];dojo.declare('tableau.mobile.widget.paramui.List',$0,(tab.ParamUIListMobile).prototype);$0=[tableau.base.widget.paramui.Slider];dojo.declare('tableau.mobile.widget.paramui.Slider',$0,(tab.ParamUISliderMobile).prototype);$0=[tableau.base.widget.SearchWidget,tableau.mobile.widget.catmode.popup.ScrollListener];dojo.declare('tableau.mobile.widget.SearchWidgetMobile',$0,(tab.SearchWidgetMobile).prototype);dojo.declare('tableau.mobile.widget.FilteringSearchWidgetMobile',[tableau.mobile.widget.SearchWidgetMobile],(tab.FilteringSearchWidgetMobile).prototype);$0=[dijit._Widget,dijit._Contained,dijit._Templated,tableau.base.widget.RelativeDateFilter];dojo.declare('tableau.mobile.widget.RelativeDateFilterMobile',$0,(tab.RelativeDateFilterMobile).prototype);$0=[tableau.base.widget.RelativeDatePickFilter];dojo.declare('tableau.mobile.widget.RelativeDatePickFilterMobile',$0,(tab.RelativeDatePickFilterMobile).prototype);$0=[dijit.layout._LayoutWidget,dijit._Templated,tableau.base.widget.FilterPanel];dojo.declare('tableau.mobile.widget.FilterPanelMobile',$0,(tab.FilterPanelMobile).prototype);$0=[tableau.base.widget.HierarchicalFilter];dojo.declare('tableau.mobile.widget.HierarchicalFilterMobile',$0,(tab.HierarchicalFilterMobile).prototype);dojo.declare('tableau.mobile.Tree',tableau.base.widget.hsm.Tree,(tab.TreeMobile).prototype);dojo.declare('tableau.mobile._TreeNode',dijit._TreeNode,(tab.TreeNodeMobile).prototype);dojo.declare('tableau.mobile._InPlaceTreeNode',tableau.mobile._TreeNode,(tab.InPlaceTreeNode).prototype);dojo.declare('tableau.mobile.InPlaceTree',tableau.mobile.Tree,(tab.InPlaceTree).prototype);dojo.declare('tableau.mobile.TreeModel',tableau.base.widget.hsm.TreeModel,(tab.TreeModelMobile).prototype);$0=[tableau.mobile.widget.catmode.popup.BasePopup,tableau.mobile.widget.catmode.popup.ScrollListener];dojo.declare('tableau.mobile.widget.catmode.popup.ListPopup',$0,(tab.ListPopup).prototype);$0=[tableau.mobile.widget.catmode.popup.BasePopup,tableau.mobile.widget.catmode.popup.ScrollListener];dojo.declare('tableau.mobile.widget.catmode.popup.HierarchicalControlPopup',$0,(tab.HierarchicalControlPopup).prototype);$0=[dijit._Widget,dijit._Templated];dojo.declare('tableau.mobile.widget.catmode.popup.HierarchicalControlContentMobile',$0,(tab.HierarchicalControlContentMobile).prototype);$0=[tableau.mobile.widget.catmode.DropdownMobile];dojo.declare('tableau.mobile.widget.catmode.CheckDropdownMobile',$0,(tab.CheckDropdownMobile).prototype);$0=[tableau.mobile.widget.catmode.popup.BasePopup];dojo.declare('tableau.mobile.widget.RelativeDateFilterPopup',$0,(tab.RelativeDateFilterPopup).prototype);$0=[tab.DateFilterWidget,dijit._Contained,dijit._Templated];dojo.declare('tableau.mobile.widget.RelativeDateFilterDialogMobile',$0,(tab.RelativeDateFilterDialogMobile).prototype);})();
tab.FeedbackMobile.$1=0;tab.FeedbackMobile.$2={};tab.FeedbackMobile.$3=[];tab.FeedbackMobile.$4=null;(function(){window.setTimeout(function(){
tab.FeedbackMobile.$8(2);},500);})();
tab.MobileWindowAppender.$1_0=null;(function(){spiff.ObjectRegistry.registerType(tab.LegacyLegendView,tab.LegacyLegendViewMobile);})();
tab.LegacyLegendTemplateMobile.$3_0="<div class='LegendPanel'>"+"<div class='LegendBox'>"+"<div class='tabLegendTitle'></div>"+"<div class='LegendContentBox'>"+"<div class='LegendContent'>"+"<img class='LegendImageBody'/>"+'</div>'+'</div>'+'</div>'+"<div class='"+tab.LegendTemplate.legendHighlighterClass+"'/>"+'</div>';(function(){spiff.ObjectRegistry.registerType(tab.PageView,tab.PageViewMobile);})();
(function(){spiff.ObjectRegistry.registerType(tab.AccordionView,tab.AccordionViewMobile);})();
tab.PopupTypeInWidget.dateInputType='date';tab.PopupTypeInWidget.datetimeLocalInputType='datetime-local';tab.PopupTypeInWidget.textInputType='text';(function(){spiff.ObjectRegistry.registerType(tab.ComboBoxView,tab.ComboBoxViewMobile);})();
tab.CurrentPagePanelMobile.$3_0="<div class='MobilePanel' dojoAttachPoint='containerNode'>"+"<div class='MobilePanelBox' dojoAttachPoint='domBox'>"+"<div dojoAttachPoint='_titlePane' style='border:0; float:left;'></div>"+"<div dojoType='dijit.layout.SplitContainer' persist='false' dojoAttachPoint='innerWrapper' orientation='${cpOrientation}' sizerWidth='0' dragRestriction='true' activeSizing='false' style='float:left;'>"+"<div dojoType='dijit.layout.LayoutContainer' sizeShare='24' sizeMin='24' style='display:${display_dropdown};' dojoAttachPoint='buttonsContainer'>"+"<button dojoType='dijit.form.Button' layoutAlign='left' style='margin:0; margin-right:2px;' iconClass='dijitIcon cpLeftArrowBlack' showLabel='false' dojoAttachPoint='_leftBtn'></button>"+"<div dojoAttachPoint='_dropdown' layoutAlign='client' style='margin:3px 26px 0 26px; overflow:hidden;'></div>"+"<button dojoType='dijit.form.Button' layoutAlign='right' style='clear: left; margin:0; margin-left:2px;' iconClass='dijitIcon cpRightArrowBlack' showLabel='false' dojoAttachPoint='_rightBtn'></button>"+'</div>'+"<div dojoType='dijit.layout.ContentPane' sizeShare='24' sizeMin='24' style='display:${display_slider}; padding:6px 5px 0 10px; border:0; overflow:hidden;' dojoAttachPoint='sliderPane'>"+"<div dojoType='dijit.form.HorizontalSlider' slideDuration='0'"+"pageIncrement='1' minimum='0' maximum='${maximum}' discreteValues='${discrete_values}' intermediateChanges='true' showButtons='false'"+"dojoAttachPoint='_slider'></div>"+"<div dojoAttachPoint='_horizontalRuleNode'></div>"+'</div>'+'</div>'+"<div dojoType='dijit.layout.ContentPane' dojoAttachPoint='_checkboxPane' style='padding:0; height:16px; width:110px; display:${display_toggle}; border:0; position:relative; float:left;'>"+"<div style='display:inline-block;height:16px'><span id='_showHistoryCb' dojoAttachPoint='_showHistoryCb' class='FIMCheckMark' style='margin-left:5px; height:15px;'></span></div>"+'</div>'+'</div>'+"<div class='MobilePanelBorderOuter'><div class='MobilePanelBorderInner'></div></div"+'</div>';(function(){spiff.ObjectRegistry.registerType(tab.ExportPdfDialog,tab.ExportPdfDialogMobile);})();
(function(){tableau.FilterItem = tableau.mobile.FilterItemMobile;})();
tab.PopupFactory.$0=[];tab.QuantitativeFilterMobile.$3_0="<div class='MobilePanel QuantitativeFilterMobile'>"+"<div class='MobilePanelBox QuantitativeFilterMobileBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='QFMTitle' dojoAttachPoint='domTitleBar'></div>"+'</div>'+"<div class='QFMContent' dojoAttachPoint='domContent'>"+"<div class='QFMReadout QFMLowerBound tab-ctrl-formatted-fixedsize' dojoAttachPoint='domLowerBound'>"+"<div dojoAttachPoint='domLowerText' class='QFMReadoutText'></div>"+'</div>'+"<div class='QFMReadout QFMUpperBound tab-ctrl-formatted-fixedsize' dojoAttachPoint='domUpperBound'>"+"<div dojoAttachPoint='domUpperText' class='QFMReadoutText'></div>"+'</div>'+"<div dojoAttachPoint='domBar' class='QFMSlider QFMBar'>"+"<div dojoAttachPoint='domRange' class='QFMRange'>"+"<div dojoAttachPoint='domHighlight' class='QFMRangeHighlight'></div>"+'</div>'+'</div>'+"<span dojoAttachPoint='domLowerImg' class='QFMSlider QFMImg'></span>"+"<span dojoAttachPoint='domUpperImg' class='QFMSlider QFMImg'></span>"+'</div>'+'</div>'+"<div class='MobilePanelBorderOuter'><div class='MobilePanelBorderInner'></div></div>"+'</div>';tab.RelativeDateFilterMobile.$4_0="<div class='MobilePanel RelativeDateFilter'>"+"<div class='MobilePanelBox RelativeDateFilterBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='FilterTitle' dojoAttachPoint='domTitleBar'></div>"+'</div>'+"<div class='Readout tab-ctrl-formatted-fixedsize' dojoAttachPoint='domReadout'></div>"+'</div>'+"<div class='MobilePanelBorderOuter'><div class='MobilePanelBorderInner'></div></div>"+'</div>';tab.RelativeDatePickFilterMobile.$3_0="<div class='MobilePanel RelativeDatePickFilter'>"+"<div class='MobilePanelBox RelativeDatePickFilterBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='FilterTitle' dojoAttachPoint='domTitleBar'></div>"+"<div class='PicklistContentDiv tab-ctrl-formatted-fixedsize' dojoAttachPoint='domPicker'></div>"+'</div>'+'</div>'+"<div class='MobilePanelBorderOuter'><div class='MobilePanelBorderInner'></div></div>"+'</div>';tab.SearchWidgetMobile.mobileTemplateString="<div class='Search'>"+"<div class='SearchBox' dojoAttachPoint='domQuerySection' style='height:30px;'>"+"<input type='text' class='QueryBox' spellcheck='false' autocapitalize='off' autocorrect='off' style='padding-top:5px; font-size:12pt; font-weight:bold;'"+"dojoAttachPoint='domQueryBox'"+"dojoAttachEvent='onkeydown:onQueryBoxKeyDown,onpaste:onQueryBoxPaste' />"+"<span class='wcSearchX' title='${XBUTTON_CLOSE_TOOLTIP}'"+"dojoAttachPoint='domXButton'></span>"+"<img class='searchBusyImg' title='${CANCEL_SEARCH_TOOLTIP}' src='${busy_gif_url}'"+"dojoAttachPoint='domSearchBusyImg'></img>"+"<span class='wcIconSearch' title='${SEARCH_TOOLTIP}'"+"dojoAttachPoint='domSearchButton'></span>"+"<span class='wcIconSearchAdd' title='${ADD_ITEM_CTRL_ENTER}'"+"dojoAttachPoint='domSearchAddButton'></span>"+'</div>'+"<div class='SearchResults' dojoAttachPoint='domResults'></div>"+'</div>';(function(){spiff.ObjectRegistry.registerType(tab.ITooltipBehavior,tab.LegacyTooltipBehavior);})();
(function(){spiff.ObjectRegistry.registerType(tab.StepperControlView,tab.StepperControlViewMobile);})();
tab.MobileStepperControlTemplate.template="<div class='tabStepperControl'>\n            <div class='tabDecrementButton' />\n            <input class='tabStepCountValue' type='text'></input>\n            <div class='tabIncrementButton' />\n        </div>";});// This script was generated using Script# v0.7.4.0
